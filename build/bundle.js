
(function(l, r) { if (!l || l.getElementById('livereloadscript')) return; r = l.createElement('script'); r.async = 1; r.src = '//' + (self.location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1'; r.id = 'livereloadscript'; l.getElementsByTagName('head')[0].appendChild(r) })(self.document);
var app = (function () {
    'use strict';

    function noop$1() { }
    function add_location(element, file, line, column, char) {
        element.__svelte_meta = {
            loc: { file, line, column, char }
        };
    }
    function run(fn) {
        return fn();
    }
    function blank_object() {
        return Object.create(null);
    }
    function run_all(fns) {
        fns.forEach(run);
    }
    function is_function(thing) {
        return typeof thing === 'function';
    }
    function safe_not_equal(a, b) {
        return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');
    }
    function is_empty(obj) {
        return Object.keys(obj).length === 0;
    }
    function append(target, node) {
        target.appendChild(node);
    }
    function insert$1(target, node, anchor) {
        target.insertBefore(node, anchor || null);
    }
    function detach(node) {
        node.parentNode.removeChild(node);
    }
    function element(name) {
        return document.createElement(name);
    }
    function text$1(data) {
        return document.createTextNode(data);
    }
    function space() {
        return text$1(' ');
    }
    function empty$1() {
        return text$1('');
    }
    function listen(node, event, handler, options) {
        node.addEventListener(event, handler, options);
        return () => node.removeEventListener(event, handler, options);
    }
    function attr$1(node, attribute, value) {
        if (value == null)
            node.removeAttribute(attribute);
        else if (node.getAttribute(attribute) !== value)
            node.setAttribute(attribute, value);
    }
    function set_custom_element_data(node, prop, value) {
        if (prop in node) {
            node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;
        }
        else {
            attr$1(node, prop, value);
        }
    }
    function children(element) {
        return Array.from(element.childNodes);
    }
    function custom_event(type, detail, bubbles = false) {
        const e = document.createEvent('CustomEvent');
        e.initCustomEvent(type, bubbles, false, detail);
        return e;
    }

    let current_component;
    function set_current_component(component) {
        current_component = component;
    }
    function get_current_component() {
        if (!current_component)
            throw new Error('Function called outside component initialization');
        return current_component;
    }
    function onMount(fn) {
        get_current_component().$$.on_mount.push(fn);
    }

    const dirty_components = [];
    const binding_callbacks = [];
    const render_callbacks = [];
    const flush_callbacks = [];
    const resolved_promise = Promise.resolve();
    let update_scheduled = false;
    function schedule_update() {
        if (!update_scheduled) {
            update_scheduled = true;
            resolved_promise.then(flush);
        }
    }
    function add_render_callback(fn) {
        render_callbacks.push(fn);
    }
    function add_flush_callback(fn) {
        flush_callbacks.push(fn);
    }
    // flush() calls callbacks in this order:
    // 1. All beforeUpdate callbacks, in order: parents before children
    // 2. All bind:this callbacks, in reverse order: children before parents.
    // 3. All afterUpdate callbacks, in order: parents before children. EXCEPT
    //    for afterUpdates called during the initial onMount, which are called in
    //    reverse order: children before parents.
    // Since callbacks might update component values, which could trigger another
    // call to flush(), the following steps guard against this:
    // 1. During beforeUpdate, any updated components will be added to the
    //    dirty_components array and will cause a reentrant call to flush(). Because
    //    the flush index is kept outside the function, the reentrant call will pick
    //    up where the earlier call left off and go through all dirty components. The
    //    current_component value is saved and restored so that the reentrant call will
    //    not interfere with the "parent" flush() call.
    // 2. bind:this callbacks cannot trigger new flush() calls.
    // 3. During afterUpdate, any updated components will NOT have their afterUpdate
    //    callback called a second time; the seen_callbacks set, outside the flush()
    //    function, guarantees this behavior.
    const seen_callbacks = new Set();
    let flushidx = 0; // Do *not* move this inside the flush() function
    function flush() {
        const saved_component = current_component;
        do {
            // first, call beforeUpdate functions
            // and update components
            while (flushidx < dirty_components.length) {
                const component = dirty_components[flushidx];
                flushidx++;
                set_current_component(component);
                update(component.$$);
            }
            set_current_component(null);
            dirty_components.length = 0;
            flushidx = 0;
            while (binding_callbacks.length)
                binding_callbacks.pop()();
            // then, once components are updated, call
            // afterUpdate functions. This may cause
            // subsequent updates...
            for (let i = 0; i < render_callbacks.length; i += 1) {
                const callback = render_callbacks[i];
                if (!seen_callbacks.has(callback)) {
                    // ...so guard against infinite loops
                    seen_callbacks.add(callback);
                    callback();
                }
            }
            render_callbacks.length = 0;
        } while (dirty_components.length);
        while (flush_callbacks.length) {
            flush_callbacks.pop()();
        }
        update_scheduled = false;
        seen_callbacks.clear();
        set_current_component(saved_component);
    }
    function update($$) {
        if ($$.fragment !== null) {
            $$.update();
            run_all($$.before_update);
            const dirty = $$.dirty;
            $$.dirty = [-1];
            $$.fragment && $$.fragment.p($$.ctx, dirty);
            $$.after_update.forEach(add_render_callback);
        }
    }
    const outroing = new Set();
    let outros;
    function group_outros() {
        outros = {
            r: 0,
            c: [],
            p: outros // parent group
        };
    }
    function check_outros() {
        if (!outros.r) {
            run_all(outros.c);
        }
        outros = outros.p;
    }
    function transition_in(block, local) {
        if (block && block.i) {
            outroing.delete(block);
            block.i(local);
        }
    }
    function transition_out(block, local, detach, callback) {
        if (block && block.o) {
            if (outroing.has(block))
                return;
            outroing.add(block);
            outros.c.push(() => {
                outroing.delete(block);
                if (callback) {
                    if (detach)
                        block.d(1);
                    callback();
                }
            });
            block.o(local);
        }
    }

    const globals = (typeof window !== 'undefined'
        ? window
        : typeof globalThis !== 'undefined'
            ? globalThis
            : global);

    function bind(component, name, callback) {
        const index = component.$$.props[name];
        if (index !== undefined) {
            component.$$.bound[index] = callback;
            callback(component.$$.ctx[index]);
        }
    }
    function create_component(block) {
        block && block.c();
    }
    function mount_component(component, target, anchor, customElement) {
        const { fragment, on_mount, on_destroy, after_update } = component.$$;
        fragment && fragment.m(target, anchor);
        if (!customElement) {
            // onMount happens before the initial afterUpdate
            add_render_callback(() => {
                const new_on_destroy = on_mount.map(run).filter(is_function);
                if (on_destroy) {
                    on_destroy.push(...new_on_destroy);
                }
                else {
                    // Edge case - component was destroyed immediately,
                    // most likely as a result of a binding initialising
                    run_all(new_on_destroy);
                }
                component.$$.on_mount = [];
            });
        }
        after_update.forEach(add_render_callback);
    }
    function destroy_component(component, detaching) {
        const $$ = component.$$;
        if ($$.fragment !== null) {
            run_all($$.on_destroy);
            $$.fragment && $$.fragment.d(detaching);
            // TODO null out other refs, including component.$$ (but need to
            // preserve final state?)
            $$.on_destroy = $$.fragment = null;
            $$.ctx = [];
        }
    }
    function make_dirty(component, i) {
        if (component.$$.dirty[0] === -1) {
            dirty_components.push(component);
            schedule_update();
            component.$$.dirty.fill(0);
        }
        component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));
    }
    function init$1(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {
        const parent_component = current_component;
        set_current_component(component);
        const $$ = component.$$ = {
            fragment: null,
            ctx: null,
            // state
            props,
            update: noop$1,
            not_equal,
            bound: blank_object(),
            // lifecycle
            on_mount: [],
            on_destroy: [],
            on_disconnect: [],
            before_update: [],
            after_update: [],
            context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),
            // everything else
            callbacks: blank_object(),
            dirty,
            skip_bound: false,
            root: options.target || parent_component.$$.root
        };
        append_styles && append_styles($$.root);
        let ready = false;
        $$.ctx = instance
            ? instance(component, options.props || {}, (i, ret, ...rest) => {
                const value = rest.length ? rest[0] : ret;
                if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {
                    if (!$$.skip_bound && $$.bound[i])
                        $$.bound[i](value);
                    if (ready)
                        make_dirty(component, i);
                }
                return ret;
            })
            : [];
        $$.update();
        ready = true;
        run_all($$.before_update);
        // `false` as a special case of no DOM component
        $$.fragment = create_fragment ? create_fragment($$.ctx) : false;
        if (options.target) {
            if (options.hydrate) {
                const nodes = children(options.target);
                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                $$.fragment && $$.fragment.l(nodes);
                nodes.forEach(detach);
            }
            else {
                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                $$.fragment && $$.fragment.c();
            }
            if (options.intro)
                transition_in(component.$$.fragment);
            mount_component(component, options.target, options.anchor, options.customElement);
            flush();
        }
        set_current_component(parent_component);
    }
    /**
     * Base class for Svelte components. Used when dev=false.
     */
    class SvelteComponent {
        $destroy() {
            destroy_component(this, 1);
            this.$destroy = noop$1;
        }
        $on(type, callback) {
            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));
            callbacks.push(callback);
            return () => {
                const index = callbacks.indexOf(callback);
                if (index !== -1)
                    callbacks.splice(index, 1);
            };
        }
        $set($$props) {
            if (this.$$set && !is_empty($$props)) {
                this.$$.skip_bound = true;
                this.$$set($$props);
                this.$$.skip_bound = false;
            }
        }
    }

    function dispatch_dev(type, detail) {
        document.dispatchEvent(custom_event(type, Object.assign({ version: '3.47.0' }, detail), true));
    }
    function append_dev(target, node) {
        dispatch_dev('SvelteDOMInsert', { target, node });
        append(target, node);
    }
    function insert_dev(target, node, anchor) {
        dispatch_dev('SvelteDOMInsert', { target, node, anchor });
        insert$1(target, node, anchor);
    }
    function detach_dev(node) {
        dispatch_dev('SvelteDOMRemove', { node });
        detach(node);
    }
    function listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {
        const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];
        if (has_prevent_default)
            modifiers.push('preventDefault');
        if (has_stop_propagation)
            modifiers.push('stopPropagation');
        dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });
        const dispose = listen(node, event, handler, options);
        return () => {
            dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });
            dispose();
        };
    }
    function attr_dev(node, attribute, value) {
        attr$1(node, attribute, value);
        if (value == null)
            dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });
        else
            dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });
    }
    function set_data_dev(text, data) {
        data = '' + data;
        if (text.wholeText === data)
            return;
        dispatch_dev('SvelteDOMSetData', { node: text, data });
        text.data = data;
    }
    function validate_slots(name, slot, keys) {
        for (const slot_key of Object.keys(slot)) {
            if (!~keys.indexOf(slot_key)) {
                console.warn(`<${name}> received an unexpected slot "${slot_key}".`);
            }
        }
    }
    /**
     * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.
     */
    class SvelteComponentDev extends SvelteComponent {
        constructor(options) {
            if (!options || (!options.target && !options.$$inline)) {
                throw new Error("'target' is a required option");
            }
            super();
        }
        $destroy() {
            super.$destroy();
            this.$destroy = () => {
                console.warn('Component was already destroyed'); // eslint-disable-line no-console
            };
        }
        $capture_state() { }
        $inject_state() { }
    }

    /*
     * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
     */

    var IdentifierIssuer_1 = class IdentifierIssuer {
      /**
       * Creates a new IdentifierIssuer. A IdentifierIssuer issues unique
       * identifiers, keeping track of any previously issued identifiers.
       *
       * @param prefix the prefix to use ('<prefix><counter>').
       * @param existing an existing Map to use.
       * @param counter the counter to use.
       */
      constructor(prefix, existing = new Map(), counter = 0) {
        this.prefix = prefix;
        this._existing = existing;
        this.counter = counter;
      }

      /**
       * Copies this IdentifierIssuer.
       *
       * @return a copy of this IdentifierIssuer.
       */
      clone() {
        const {prefix, _existing, counter} = this;
        return new IdentifierIssuer(prefix, new Map(_existing), counter);
      }

      /**
       * Gets the new identifier for the given old identifier, where if no old
       * identifier is given a new identifier will be generated.
       *
       * @param [old] the old identifier to get the new identifier for.
       *
       * @return the new identifier.
       */
      getId(old) {
        // return existing old identifier
        const existing = old && this._existing.get(old);
        if(existing) {
          return existing;
        }

        // get next identifier
        const identifier = this.prefix + this.counter;
        this.counter++;

        // save mapping
        if(old) {
          this._existing.set(old, identifier);
        }

        return identifier;
      }

      /**
       * Returns true if the given old identifer has already been assigned a new
       * identifier.
       *
       * @param old the old identifier to check.
       *
       * @return true if the old identifier has been assigned a new identifier,
       *   false if not.
       */
      hasId(old) {
        return this._existing.has(old);
      }

      /**
       * Returns all of the IDs that have been issued new IDs in the order in
       * which they were issued new IDs.
       *
       * @return the list of old IDs that has been issued new IDs in order.
       */
      getOldIds() {
        return [...this._existing.keys()];
      }
    };

    var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

    function getAugmentedNamespace(n) {
    	if (n.__esModule) return n;
    	var a = Object.defineProperty({}, '__esModule', {value: true});
    	Object.keys(n).forEach(function (k) {
    		var d = Object.getOwnPropertyDescriptor(n, k);
    		Object.defineProperty(a, k, d.get ? d : {
    			enumerable: true,
    			get: function () {
    				return n[k];
    			}
    		});
    	});
    	return a;
    }

    (function (global, undefined$1) {

        if (global.setImmediate) {
            return;
        }

        var nextHandle = 1; // Spec says greater than zero
        var tasksByHandle = {};
        var currentlyRunningATask = false;
        var doc = global.document;
        var registerImmediate;

        function setImmediate(callback) {
          // Callback can either be a function or a string
          if (typeof callback !== "function") {
            callback = new Function("" + callback);
          }
          // Copy function arguments
          var args = new Array(arguments.length - 1);
          for (var i = 0; i < args.length; i++) {
              args[i] = arguments[i + 1];
          }
          // Store and register the task
          var task = { callback: callback, args: args };
          tasksByHandle[nextHandle] = task;
          registerImmediate(nextHandle);
          return nextHandle++;
        }

        function clearImmediate(handle) {
            delete tasksByHandle[handle];
        }

        function run(task) {
            var callback = task.callback;
            var args = task.args;
            switch (args.length) {
            case 0:
                callback();
                break;
            case 1:
                callback(args[0]);
                break;
            case 2:
                callback(args[0], args[1]);
                break;
            case 3:
                callback(args[0], args[1], args[2]);
                break;
            default:
                callback.apply(undefined$1, args);
                break;
            }
        }

        function runIfPresent(handle) {
            // From the spec: "Wait until any invocations of this algorithm started before this one have completed."
            // So if we're currently running a task, we'll need to delay this invocation.
            if (currentlyRunningATask) {
                // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a
                // "too much recursion" error.
                setTimeout(runIfPresent, 0, handle);
            } else {
                var task = tasksByHandle[handle];
                if (task) {
                    currentlyRunningATask = true;
                    try {
                        run(task);
                    } finally {
                        clearImmediate(handle);
                        currentlyRunningATask = false;
                    }
                }
            }
        }

        function installNextTickImplementation() {
            registerImmediate = function(handle) {
                process.nextTick(function () { runIfPresent(handle); });
            };
        }

        function canUsePostMessage() {
            // The test against `importScripts` prevents this implementation from being installed inside a web worker,
            // where `global.postMessage` means something completely different and can't be used for this purpose.
            if (global.postMessage && !global.importScripts) {
                var postMessageIsAsynchronous = true;
                var oldOnMessage = global.onmessage;
                global.onmessage = function() {
                    postMessageIsAsynchronous = false;
                };
                global.postMessage("", "*");
                global.onmessage = oldOnMessage;
                return postMessageIsAsynchronous;
            }
        }

        function installPostMessageImplementation() {
            // Installs an event handler on `global` for the `message` event: see
            // * https://developer.mozilla.org/en/DOM/window.postMessage
            // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages

            var messagePrefix = "setImmediate$" + Math.random() + "$";
            var onGlobalMessage = function(event) {
                if (event.source === global &&
                    typeof event.data === "string" &&
                    event.data.indexOf(messagePrefix) === 0) {
                    runIfPresent(+event.data.slice(messagePrefix.length));
                }
            };

            if (global.addEventListener) {
                global.addEventListener("message", onGlobalMessage, false);
            } else {
                global.attachEvent("onmessage", onGlobalMessage);
            }

            registerImmediate = function(handle) {
                global.postMessage(messagePrefix + handle, "*");
            };
        }

        function installMessageChannelImplementation() {
            var channel = new MessageChannel();
            channel.port1.onmessage = function(event) {
                var handle = event.data;
                runIfPresent(handle);
            };

            registerImmediate = function(handle) {
                channel.port2.postMessage(handle);
            };
        }

        function installReadyStateChangeImplementation() {
            var html = doc.documentElement;
            registerImmediate = function(handle) {
                // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted
                // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.
                var script = doc.createElement("script");
                script.onreadystatechange = function () {
                    runIfPresent(handle);
                    script.onreadystatechange = null;
                    html.removeChild(script);
                    script = null;
                };
                html.appendChild(script);
            };
        }

        function installSetTimeoutImplementation() {
            registerImmediate = function(handle) {
                setTimeout(runIfPresent, 0, handle);
            };
        }

        // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.
        var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);
        attachTo = attachTo && attachTo.setTimeout ? attachTo : global;

        // Don't get fooled by e.g. browserify environments.
        if ({}.toString.call(global.process) === "[object process]") {
            // For Node.js before 0.9
            installNextTickImplementation();

        } else if (canUsePostMessage()) {
            // For non-IE10 modern browsers
            installPostMessageImplementation();

        } else if (global.MessageChannel) {
            // For web workers, where supported
            installMessageChannelImplementation();

        } else if (doc && "onreadystatechange" in doc.createElement("script")) {
            // For IE 6–8
            installReadyStateChangeImplementation();

        } else {
            // For older browsers
            installSetTimeoutImplementation();
        }

        attachTo.setImmediate = setImmediate;
        attachTo.clearImmediate = clearImmediate;
    }(typeof self === "undefined" ? typeof commonjsGlobal === "undefined" ? commonjsGlobal : commonjsGlobal : self));

    /*
     * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
     */



    const crypto$1 = self.crypto || self.msCrypto;

    // TODO: synchronous version no longer supported in browser

    var MessageDigestBrowser = class MessageDigest {
      /**
       * Creates a new MessageDigest.
       *
       * @param algorithm the algorithm to use.
       */
      constructor(algorithm) {
        // check if crypto.subtle is available
        // check is here rather than top-level to only fail if class is used
        if(!(crypto$1 && crypto$1.subtle)) {
          throw new Error('crypto.subtle not found.');
        }
        if(algorithm === 'sha256') {
          this.algorithm = {name: 'SHA-256'};
        } else if(algorithm === 'sha1') {
          this.algorithm = {name: 'SHA-1'};
        } else {
          throw new Error(`Unsupport algorithm "${algorithm}".`);
        }
        this._content = '';
      }

      update(msg) {
        this._content += msg;
      }

      async digest() {
        const data = new TextEncoder().encode(this._content);
        const buffer = new Uint8Array(
          await crypto$1.subtle.digest(this.algorithm, data));
        // return digest in hex
        let hex = '';
        for(let i = 0; i < buffer.length; ++i) {
          hex += buffer[i].toString(16).padStart(2, '0');
        }
        return hex;
      }
    };

    /*
     * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
     */

    // TODO: convert to ES6 iterable?

    var Permuter_1 = class Permuter {
      /**
       * A Permuter iterates over all possible permutations of the given array
       * of elements.
       *
       * @param list the array of elements to iterate over.
       */
      constructor(list) {
        // original array
        this.current = list.sort();
        // indicates whether there are more permutations
        this.done = false;
        // directional info for permutation algorithm
        this.dir = new Map();
        for(let i = 0; i < list.length; ++i) {
          this.dir.set(list[i], true);
        }
      }

      /**
       * Returns true if there is another permutation.
       *
       * @return true if there is another permutation, false if not.
       */
      hasNext() {
        return !this.done;
      }

      /**
       * Gets the next permutation. Call hasNext() to ensure there is another one
       * first.
       *
       * @return the next permutation.
       */
      next() {
        // copy current permutation to return it
        const {current, dir} = this;
        const rval = current.slice();

        /* Calculate the next permutation using the Steinhaus-Johnson-Trotter
         permutation algorithm. */

        // get largest mobile element k
        // (mobile: element is greater than the one it is looking at)
        let k = null;
        let pos = 0;
        const length = current.length;
        for(let i = 0; i < length; ++i) {
          const element = current[i];
          const left = dir.get(element);
          if((k === null || element > k) &&
            ((left && i > 0 && element > current[i - 1]) ||
            (!left && i < (length - 1) && element > current[i + 1]))) {
            k = element;
            pos = i;
          }
        }

        // no more permutations
        if(k === null) {
          this.done = true;
        } else {
          // swap k and the element it is looking at
          const swap = dir.get(k) ? pos - 1 : pos + 1;
          current[pos] = current[swap];
          current[swap] = k;

          // reverse the direction of all elements larger than k
          for(const element of current) {
            if(element > k) {
              dir.set(element, !dir.get(element));
            }
          }
        }

        return rval;
      }
    };

    /*
     * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
     */
    const RDF$1 = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#';
    const RDF_LANGSTRING$1 = RDF$1 + 'langString';
    const XSD_STRING$2 = 'http://www.w3.org/2001/XMLSchema#string';

    const TYPE_NAMED_NODE = 'NamedNode';
    const TYPE_BLANK_NODE = 'BlankNode';
    const TYPE_LITERAL = 'Literal';
    const TYPE_DEFAULT_GRAPH = 'DefaultGraph';

    // build regexes
    const REGEX = {};
    (() => {
      const iri = '(?:<([^:]+:[^>]*)>)';
      // https://www.w3.org/TR/turtle/#grammar-production-BLANK_NODE_LABEL
      const PN_CHARS_BASE =
        'A-Z' + 'a-z' +
        '\u00C0-\u00D6' +
        '\u00D8-\u00F6' +
        '\u00F8-\u02FF' +
        '\u0370-\u037D' +
        '\u037F-\u1FFF' +
        '\u200C-\u200D' +
        '\u2070-\u218F' +
        '\u2C00-\u2FEF' +
        '\u3001-\uD7FF' +
        '\uF900-\uFDCF' +
        '\uFDF0-\uFFFD';
        // TODO:
        //'\u10000-\uEFFFF';
      const PN_CHARS_U =
        PN_CHARS_BASE +
        '_';
      const PN_CHARS =
        PN_CHARS_U +
        '0-9' +
        '-' +
        '\u00B7' +
        '\u0300-\u036F' +
        '\u203F-\u2040';
      const BLANK_NODE_LABEL =
        '(_:' +
          '(?:[' + PN_CHARS_U + '0-9])' +
          '(?:(?:[' + PN_CHARS + '.])*(?:[' + PN_CHARS + ']))?' +
        ')';
      const bnode = BLANK_NODE_LABEL;
      const plain = '"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"';
      const datatype = '(?:\\^\\^' + iri + ')';
      const language = '(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))';
      const literal = '(?:' + plain + '(?:' + datatype + '|' + language + ')?)';
      const ws = '[ \\t]+';
      const wso = '[ \\t]*';

      // define quad part regexes
      const subject = '(?:' + iri + '|' + bnode + ')' + ws;
      const property = iri + ws;
      const object = '(?:' + iri + '|' + bnode + '|' + literal + ')' + wso;
      const graphName = '(?:\\.|(?:(?:' + iri + '|' + bnode + ')' + wso + '\\.))';

      // end of line and empty regexes
      REGEX.eoln = /(?:\r\n)|(?:\n)|(?:\r)/g;
      REGEX.empty = new RegExp('^' + wso + '$');

      // full quad regex
      REGEX.quad = new RegExp(
        '^' + wso + subject + property + object + graphName + wso + '$');
    })();

    var NQuads_1 = class NQuads {
      /**
       * Parses RDF in the form of N-Quads.
       *
       * @param input the N-Quads input to parse.
       *
       * @return an RDF dataset (an array of quads per http://rdf.js.org/).
       */
      static parse(input) {
        // build RDF dataset
        const dataset = [];

        const graphs = {};

        // split N-Quad input into lines
        const lines = input.split(REGEX.eoln);
        let lineNumber = 0;
        for(const line of lines) {
          lineNumber++;

          // skip empty lines
          if(REGEX.empty.test(line)) {
            continue;
          }

          // parse quad
          const match = line.match(REGEX.quad);
          if(match === null) {
            throw new Error('N-Quads parse error on line ' + lineNumber + '.');
          }

          // create RDF quad
          const quad = {subject: null, predicate: null, object: null, graph: null};

          // get subject
          if(match[1] !== undefined) {
            quad.subject = {termType: TYPE_NAMED_NODE, value: match[1]};
          } else {
            quad.subject = {termType: TYPE_BLANK_NODE, value: match[2]};
          }

          // get predicate
          quad.predicate = {termType: TYPE_NAMED_NODE, value: match[3]};

          // get object
          if(match[4] !== undefined) {
            quad.object = {termType: TYPE_NAMED_NODE, value: match[4]};
          } else if(match[5] !== undefined) {
            quad.object = {termType: TYPE_BLANK_NODE, value: match[5]};
          } else {
            quad.object = {
              termType: TYPE_LITERAL,
              value: undefined,
              datatype: {
                termType: TYPE_NAMED_NODE
              }
            };
            if(match[7] !== undefined) {
              quad.object.datatype.value = match[7];
            } else if(match[8] !== undefined) {
              quad.object.datatype.value = RDF_LANGSTRING$1;
              quad.object.language = match[8];
            } else {
              quad.object.datatype.value = XSD_STRING$2;
            }
            quad.object.value = _unescape(match[6]);
          }

          // get graph
          if(match[9] !== undefined) {
            quad.graph = {
              termType: TYPE_NAMED_NODE,
              value: match[9]
            };
          } else if(match[10] !== undefined) {
            quad.graph = {
              termType: TYPE_BLANK_NODE,
              value: match[10]
            };
          } else {
            quad.graph = {
              termType: TYPE_DEFAULT_GRAPH,
              value: ''
            };
          }

          // only add quad if it is unique in its graph
          if(!(quad.graph.value in graphs)) {
            graphs[quad.graph.value] = [quad];
            dataset.push(quad);
          } else {
            let unique = true;
            const quads = graphs[quad.graph.value];
            for(const q of quads) {
              if(_compareTriples(q, quad)) {
                unique = false;
                break;
              }
            }
            if(unique) {
              quads.push(quad);
              dataset.push(quad);
            }
          }
        }

        return dataset;
      }

      /**
       * Converts an RDF dataset to N-Quads.
       *
       * @param dataset (array of quads) the RDF dataset to convert.
       *
       * @return the N-Quads string.
       */
      static serialize(dataset) {
        if(!Array.isArray(dataset)) {
          dataset = NQuads.legacyDatasetToQuads(dataset);
        }
        const quads = [];
        for(const quad of dataset) {
          quads.push(NQuads.serializeQuad(quad));
        }
        return quads.sort().join('');
      }

      /**
       * Converts an RDF quad to an N-Quad string (a single quad).
       *
       * @param quad the RDF quad convert.
       *
       * @return the N-Quad string.
       */
      static serializeQuad(quad) {
        const s = quad.subject;
        const p = quad.predicate;
        const o = quad.object;
        const g = quad.graph;

        let nquad = '';

        // subject can only be NamedNode or BlankNode
        if(s.termType === TYPE_NAMED_NODE) {
          nquad += `<${s.value}>`;
        } else {
          nquad += `${s.value}`;
        }

        // predicate can only be NamedNode
        nquad += ` <${p.value}> `;

        // object is NamedNode, BlankNode, or Literal
        if(o.termType === TYPE_NAMED_NODE) {
          nquad += `<${o.value}>`;
        } else if(o.termType === TYPE_BLANK_NODE) {
          nquad += o.value;
        } else {
          nquad += `"${_escape(o.value)}"`;
          if(o.datatype.value === RDF_LANGSTRING$1) {
            if(o.language) {
              nquad += `@${o.language}`;
            }
          } else if(o.datatype.value !== XSD_STRING$2) {
            nquad += `^^<${o.datatype.value}>`;
          }
        }

        // graph can only be NamedNode or BlankNode (or DefaultGraph, but that
        // does not add to `nquad`)
        if(g.termType === TYPE_NAMED_NODE) {
          nquad += ` <${g.value}>`;
        } else if(g.termType === TYPE_BLANK_NODE) {
          nquad += ` ${g.value}`;
        }

        nquad += ' .\n';
        return nquad;
      }

      /**
       * Converts a legacy-formatted dataset to an array of quads dataset per
       * http://rdf.js.org/.
       *
       * @param dataset the legacy dataset to convert.
       *
       * @return the array of quads dataset.
       */
      static legacyDatasetToQuads(dataset) {
        const quads = [];

        const termTypeMap = {
          'blank node': TYPE_BLANK_NODE,
          IRI: TYPE_NAMED_NODE,
          literal: TYPE_LITERAL
        };

        for(const graphName in dataset) {
          const triples = dataset[graphName];
          triples.forEach(triple => {
            const quad = {};
            for(const componentName in triple) {
              const oldComponent = triple[componentName];
              const newComponent = {
                termType: termTypeMap[oldComponent.type],
                value: oldComponent.value
              };
              if(newComponent.termType === TYPE_LITERAL) {
                newComponent.datatype = {
                  termType: TYPE_NAMED_NODE
                };
                if('datatype' in oldComponent) {
                  newComponent.datatype.value = oldComponent.datatype;
                }
                if('language' in oldComponent) {
                  if(!('datatype' in oldComponent)) {
                    newComponent.datatype.value = RDF_LANGSTRING$1;
                  }
                  newComponent.language = oldComponent.language;
                } else if(!('datatype' in oldComponent)) {
                  newComponent.datatype.value = XSD_STRING$2;
                }
              }
              quad[componentName] = newComponent;
            }
            if(graphName === '@default') {
              quad.graph = {
                termType: TYPE_DEFAULT_GRAPH,
                value: ''
              };
            } else {
              quad.graph = {
                termType: graphName.startsWith('_:') ?
                  TYPE_BLANK_NODE : TYPE_NAMED_NODE,
                value: graphName
              };
            }
            quads.push(quad);
          });
        }

        return quads;
      }
    };

    /**
     * Compares two RDF triples for equality.
     *
     * @param t1 the first triple.
     * @param t2 the second triple.
     *
     * @return true if the triples are the same, false if not.
     */
    function _compareTriples(t1, t2) {
      // compare subject and object types first as it is the quickest check
      if(!(t1.subject.termType === t2.subject.termType &&
        t1.object.termType === t2.object.termType)) {
        return false;
      }
      // compare values
      if(!(t1.subject.value === t2.subject.value &&
        t1.predicate.value === t2.predicate.value &&
        t1.object.value === t2.object.value)) {
        return false;
      }
      if(t1.object.termType !== TYPE_LITERAL) {
        // no `datatype` or `language` to check
        return true;
      }
      return (
        (t1.object.datatype.termType === t2.object.datatype.termType) &&
        (t1.object.language === t2.object.language) &&
        (t1.object.datatype.value === t2.object.datatype.value)
      );
    }

    const _escapeRegex = /["\\\n\r]/g;
    /**
     * Escape string to N-Quads literal
     */
    function _escape(s) {
      return s.replace(_escapeRegex, function(match) {
        switch(match) {
          case '"': return '\\"';
          case '\\': return '\\\\';
          case '\n': return '\\n';
          case '\r': return '\\r';
        }
      });
    }

    const _unescapeRegex =
      /(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;
    /**
     * Unescape N-Quads literal to string
     */
    function _unescape(s) {
      return s.replace(_unescapeRegex, function(match, code, u, U) {
        if(code) {
          switch(code) {
            case 't': return '\t';
            case 'b': return '\b';
            case 'n': return '\n';
            case 'r': return '\r';
            case 'f': return '\f';
            case '"': return '"';
            case '\'': return '\'';
            case '\\': return '\\';
          }
        }
        if(u) {
          return String.fromCharCode(parseInt(u, 16));
        }
        if(U) {
          // FIXME: support larger values
          throw new Error('Unsupported U escape');
        }
      });
    }

    /*
     * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
     */






    var URDNA2015_1 = class URDNA2015 {
      constructor() {
        this.name = 'URDNA2015';
        this.blankNodeInfo = new Map();
        this.canonicalIssuer = new IdentifierIssuer_1('_:c14n');
        this.hashAlgorithm = 'sha256';
        this.quads = null;
      }

      // 4.4) Normalization Algorithm
      async main(dataset) {
        this.quads = dataset;

        // 1) Create the normalization state.
        // 2) For every quad in input dataset:
        for(const quad of dataset) {
          // 2.1) For each blank node that occurs in the quad, add a reference
          // to the quad using the blank node identifier in the blank node to
          // quads map, creating a new entry if necessary.
          this._addBlankNodeQuadInfo({quad, component: quad.subject});
          this._addBlankNodeQuadInfo({quad, component: quad.object});
          this._addBlankNodeQuadInfo({quad, component: quad.graph});
        }

        // 3) Create a list of non-normalized blank node identifiers
        // non-normalized identifiers and populate it using the keys from the
        // blank node to quads map.
        // Note: We use a map here and it was generated during step 2.

        // 4) `simple` flag is skipped -- loop is optimized away. This optimization
        // is permitted because there was a typo in the hash first degree quads
        // algorithm in the URDNA2015 spec that was implemented widely making it
        // such that it could not be fixed; the result was that the loop only
        // needs to be run once and the first degree quad hashes will never change.
        // 5.1-5.2 are skipped; first degree quad hashes are generated just once
        // for all non-normalized blank nodes.

        // 5.3) For each blank node identifier identifier in non-normalized
        // identifiers:
        const hashToBlankNodes = new Map();
        const nonNormalized = [...this.blankNodeInfo.keys()];
        let i = 0;
        for(const id of nonNormalized) {
          // Note: batch hashing first degree quads 100 at a time
          if(++i % 100 === 0) {
            await this._yield();
          }
          // steps 5.3.1 and 5.3.2:
          await this._hashAndTrackBlankNode({id, hashToBlankNodes});
        }

        // 5.4) For each hash to identifier list mapping in hash to blank
        // nodes map, lexicographically-sorted by hash:
        const hashes = [...hashToBlankNodes.keys()].sort();
        // optimize away second sort, gather non-unique hashes in order as we go
        const nonUnique = [];
        for(const hash of hashes) {
          // 5.4.1) If the length of identifier list is greater than 1,
          // continue to the next mapping.
          const idList = hashToBlankNodes.get(hash);
          if(idList.length > 1) {
            nonUnique.push(idList);
            continue;
          }

          // 5.4.2) Use the Issue Identifier algorithm, passing canonical
          // issuer and the single blank node identifier in identifier
          // list, identifier, to issue a canonical replacement identifier
          // for identifier.
          const id = idList[0];
          this.canonicalIssuer.getId(id);

          // Note: These steps are skipped, optimized away since the loop
          // only needs to be run once.
          // 5.4.3) Remove identifier from non-normalized identifiers.
          // 5.4.4) Remove hash from the hash to blank nodes map.
          // 5.4.5) Set simple to true.
        }

        // 6) For each hash to identifier list mapping in hash to blank nodes map,
        // lexicographically-sorted by hash:
        // Note: sort optimized away, use `nonUnique`.
        for(const idList of nonUnique) {
          // 6.1) Create hash path list where each item will be a result of
          // running the Hash N-Degree Quads algorithm.
          const hashPathList = [];

          // 6.2) For each blank node identifier identifier in identifier list:
          for(const id of idList) {
            // 6.2.1) If a canonical identifier has already been issued for
            // identifier, continue to the next identifier.
            if(this.canonicalIssuer.hasId(id)) {
              continue;
            }

            // 6.2.2) Create temporary issuer, an identifier issuer
            // initialized with the prefix _:b.
            const issuer = new IdentifierIssuer_1('_:b');

            // 6.2.3) Use the Issue Identifier algorithm, passing temporary
            // issuer and identifier, to issue a new temporary blank node
            // identifier for identifier.
            issuer.getId(id);

            // 6.2.4) Run the Hash N-Degree Quads algorithm, passing
            // temporary issuer, and append the result to the hash path list.
            const result = await this.hashNDegreeQuads(id, issuer);
            hashPathList.push(result);
          }

          // 6.3) For each result in the hash path list,
          // lexicographically-sorted by the hash in result:
          hashPathList.sort(_stringHashCompare$1);
          for(const result of hashPathList) {
            // 6.3.1) For each blank node identifier, existing identifier,
            // that was issued a temporary identifier by identifier issuer
            // in result, issue a canonical identifier, in the same order,
            // using the Issue Identifier algorithm, passing canonical
            // issuer and existing identifier.
            const oldIds = result.issuer.getOldIds();
            for(const id of oldIds) {
              this.canonicalIssuer.getId(id);
            }
          }
        }

        /* Note: At this point all blank nodes in the set of RDF quads have been
        assigned canonical identifiers, which have been stored in the canonical
        issuer. Here each quad is updated by assigning each of its blank nodes
        its new identifier. */

        // 7) For each quad, quad, in input dataset:
        const normalized = [];
        for(const quad of this.quads) {
          // 7.1) Create a copy, quad copy, of quad and replace any existing
          // blank node identifiers using the canonical identifiers
          // previously issued by canonical issuer.
          // Note: We optimize with shallow copies here.
          const q = {...quad};
          q.subject = this._useCanonicalId({component: q.subject});
          q.object = this._useCanonicalId({component: q.object});
          q.graph = this._useCanonicalId({component: q.graph});
          // 7.2) Add quad copy to the normalized dataset.
          normalized.push(NQuads_1.serializeQuad(q));
        }

        // sort normalized output
        normalized.sort();

        // 8) Return the normalized dataset.
        return normalized.join('');
      }

      // 4.6) Hash First Degree Quads
      async hashFirstDegreeQuads(id) {
        // 1) Initialize nquads to an empty list. It will be used to store quads in
        // N-Quads format.
        const nquads = [];

        // 2) Get the list of quads `quads` associated with the reference blank node
        // identifier in the blank node to quads map.
        const info = this.blankNodeInfo.get(id);
        const quads = info.quads;

        // 3) For each quad `quad` in `quads`:
        for(const quad of quads) {
          // 3.1) Serialize the quad in N-Quads format with the following special
          // rule:

          // 3.1.1) If any component in quad is an blank node, then serialize it
          // using a special identifier as follows:
          const copy = {
            subject: null, predicate: quad.predicate, object: null, graph: null
          };
          // 3.1.2) If the blank node's existing blank node identifier matches
          // the reference blank node identifier then use the blank node
          // identifier _:a, otherwise, use the blank node identifier _:z.
          copy.subject = this.modifyFirstDegreeComponent(
            id, quad.subject, 'subject');
          copy.object = this.modifyFirstDegreeComponent(
            id, quad.object, 'object');
          copy.graph = this.modifyFirstDegreeComponent(
            id, quad.graph, 'graph');
          nquads.push(NQuads_1.serializeQuad(copy));
        }

        // 4) Sort nquads in lexicographical order.
        nquads.sort();

        // 5) Return the hash that results from passing the sorted, joined nquads
        // through the hash algorithm.
        const md = new MessageDigestBrowser(this.hashAlgorithm);
        for(const nquad of nquads) {
          md.update(nquad);
        }
        info.hash = await md.digest();
        return info.hash;
      }

      // 4.7) Hash Related Blank Node
      async hashRelatedBlankNode(related, quad, issuer, position) {
        // 1) Set the identifier to use for related, preferring first the canonical
        // identifier for related if issued, second the identifier issued by issuer
        // if issued, and last, if necessary, the result of the Hash First Degree
        // Quads algorithm, passing related.
        let id;
        if(this.canonicalIssuer.hasId(related)) {
          id = this.canonicalIssuer.getId(related);
        } else if(issuer.hasId(related)) {
          id = issuer.getId(related);
        } else {
          id = this.blankNodeInfo.get(related).hash;
        }

        // 2) Initialize a string input to the value of position.
        // Note: We use a hash object instead.
        const md = new MessageDigestBrowser(this.hashAlgorithm);
        md.update(position);

        // 3) If position is not g, append <, the value of the predicate in quad,
        // and > to input.
        if(position !== 'g') {
          md.update(this.getRelatedPredicate(quad));
        }

        // 4) Append identifier to input.
        md.update(id);

        // 5) Return the hash that results from passing input through the hash
        // algorithm.
        return md.digest();
      }

      // 4.8) Hash N-Degree Quads
      async hashNDegreeQuads(id, issuer) {
        // 1) Create a hash to related blank nodes map for storing hashes that
        // identify related blank nodes.
        // Note: 2) and 3) handled within `createHashToRelated`
        const md = new MessageDigestBrowser(this.hashAlgorithm);
        const hashToRelated = await this.createHashToRelated(id, issuer);

        // 4) Create an empty string, data to hash.
        // Note: We created a hash object `md` above instead.

        // 5) For each related hash to blank node list mapping in hash to related
        // blank nodes map, sorted lexicographically by related hash:
        const hashes = [...hashToRelated.keys()].sort();
        for(const hash of hashes) {
          // 5.1) Append the related hash to the data to hash.
          md.update(hash);

          // 5.2) Create a string chosen path.
          let chosenPath = '';

          // 5.3) Create an unset chosen issuer variable.
          let chosenIssuer;

          // 5.4) For each permutation of blank node list:
          const permuter = new Permuter_1(hashToRelated.get(hash));
          let i = 0;
          while(permuter.hasNext()) {
            const permutation = permuter.next();
            // Note: batch permutations 3 at a time
            if(++i % 3 === 0) {
              await this._yield();
            }

            // 5.4.1) Create a copy of issuer, issuer copy.
            let issuerCopy = issuer.clone();

            // 5.4.2) Create a string path.
            let path = '';

            // 5.4.3) Create a recursion list, to store blank node identifiers
            // that must be recursively processed by this algorithm.
            const recursionList = [];

            // 5.4.4) For each related in permutation:
            let nextPermutation = false;
            for(const related of permutation) {
              // 5.4.4.1) If a canonical identifier has been issued for
              // related, append it to path.
              if(this.canonicalIssuer.hasId(related)) {
                path += this.canonicalIssuer.getId(related);
              } else {
                // 5.4.4.2) Otherwise:
                // 5.4.4.2.1) If issuer copy has not issued an identifier for
                // related, append related to recursion list.
                if(!issuerCopy.hasId(related)) {
                  recursionList.push(related);
                }
                // 5.4.4.2.2) Use the Issue Identifier algorithm, passing
                // issuer copy and related and append the result to path.
                path += issuerCopy.getId(related);
              }

              // 5.4.4.3) If chosen path is not empty and the length of path
              // is greater than or equal to the length of chosen path and
              // path is lexicographically greater than chosen path, then
              // skip to the next permutation.
              // Note: Comparing path length to chosen path length can be optimized
              // away; only compare lexicographically.
              if(chosenPath.length !== 0 && path > chosenPath) {
                nextPermutation = true;
                break;
              }
            }

            if(nextPermutation) {
              continue;
            }

            // 5.4.5) For each related in recursion list:
            for(const related of recursionList) {
              // 5.4.5.1) Set result to the result of recursively executing
              // the Hash N-Degree Quads algorithm, passing related for
              // identifier and issuer copy for path identifier issuer.
              const result = await this.hashNDegreeQuads(related, issuerCopy);

              // 5.4.5.2) Use the Issue Identifier algorithm, passing issuer
              // copy and related and append the result to path.
              path += issuerCopy.getId(related);

              // 5.4.5.3) Append <, the hash in result, and > to path.
              path += `<${result.hash}>`;

              // 5.4.5.4) Set issuer copy to the identifier issuer in
              // result.
              issuerCopy = result.issuer;

              // 5.4.5.5) If chosen path is not empty and the length of path
              // is greater than or equal to the length of chosen path and
              // path is lexicographically greater than chosen path, then
              // skip to the next permutation.
              // Note: Comparing path length to chosen path length can be optimized
              // away; only compare lexicographically.
              if(chosenPath.length !== 0 && path > chosenPath) {
                nextPermutation = true;
                break;
              }
            }

            if(nextPermutation) {
              continue;
            }

            // 5.4.6) If chosen path is empty or path is lexicographically
            // less than chosen path, set chosen path to path and chosen
            // issuer to issuer copy.
            if(chosenPath.length === 0 || path < chosenPath) {
              chosenPath = path;
              chosenIssuer = issuerCopy;
            }
          }

          // 5.5) Append chosen path to data to hash.
          md.update(chosenPath);

          // 5.6) Replace issuer, by reference, with chosen issuer.
          issuer = chosenIssuer;
        }

        // 6) Return issuer and the hash that results from passing data to hash
        // through the hash algorithm.
        return {hash: await md.digest(), issuer};
      }

      // helper for modifying component during Hash First Degree Quads
      modifyFirstDegreeComponent(id, component) {
        if(component.termType !== 'BlankNode') {
          return component;
        }
        /* Note: A mistake in the URDNA2015 spec that made its way into
        implementations (and therefore must stay to avoid interop breakage)
        resulted in an assigned canonical ID, if available for
        `component.value`, not being used in place of `_:a`/`_:z`, so
        we don't use it here. */
        return {
          termType: 'BlankNode',
          value: component.value === id ? '_:a' : '_:z'
        };
      }

      // helper for getting a related predicate
      getRelatedPredicate(quad) {
        return `<${quad.predicate.value}>`;
      }

      // helper for creating hash to related blank nodes map
      async createHashToRelated(id, issuer) {
        // 1) Create a hash to related blank nodes map for storing hashes that
        // identify related blank nodes.
        const hashToRelated = new Map();

        // 2) Get a reference, quads, to the list of quads in the blank node to
        // quads map for the key identifier.
        const quads = this.blankNodeInfo.get(id).quads;

        // 3) For each quad in quads:
        let i = 0;
        for(const quad of quads) {
          // Note: batch hashing related blank node quads 100 at a time
          if(++i % 100 === 0) {
            await this._yield();
          }
          // 3.1) For each component in quad, if component is the subject, object,
          // and graph name and it is a blank node that is not identified by
          // identifier:
          // steps 3.1.1 and 3.1.2 occur in helpers:
          await Promise.all([
            this._addRelatedBlankNodeHash({
              quad, component: quad.subject, position: 's',
              id, issuer, hashToRelated
            }),
            this._addRelatedBlankNodeHash({
              quad, component: quad.object, position: 'o',
              id, issuer, hashToRelated
            }),
            this._addRelatedBlankNodeHash({
              quad, component: quad.graph, position: 'g',
              id, issuer, hashToRelated
            })
          ]);
        }

        return hashToRelated;
      }

      async _hashAndTrackBlankNode({id, hashToBlankNodes}) {
        // 5.3.1) Create a hash, hash, according to the Hash First Degree
        // Quads algorithm.
        const hash = await this.hashFirstDegreeQuads(id);

        // 5.3.2) Add hash and identifier to hash to blank nodes map,
        // creating a new entry if necessary.
        const idList = hashToBlankNodes.get(hash);
        if(!idList) {
          hashToBlankNodes.set(hash, [id]);
        } else {
          idList.push(id);
        }
      }

      _addBlankNodeQuadInfo({quad, component}) {
        if(component.termType !== 'BlankNode') {
          return;
        }
        const id = component.value;
        const info = this.blankNodeInfo.get(id);
        if(info) {
          info.quads.add(quad);
        } else {
          this.blankNodeInfo.set(id, {quads: new Set([quad]), hash: null});
        }
      }

      async _addRelatedBlankNodeHash(
        {quad, component, position, id, issuer, hashToRelated}) {
        if(!(component.termType === 'BlankNode' && component.value !== id)) {
          return;
        }
        // 3.1.1) Set hash to the result of the Hash Related Blank Node
        // algorithm, passing the blank node identifier for component as
        // related, quad, path identifier issuer as issuer, and position as
        // either s, o, or g based on whether component is a subject, object,
        // graph name, respectively.
        const related = component.value;
        const hash = await this.hashRelatedBlankNode(
          related, quad, issuer, position);

        // 3.1.2) Add a mapping of hash to the blank node identifier for
        // component to hash to related blank nodes map, adding an entry as
        // necessary.
        const entries = hashToRelated.get(hash);
        if(entries) {
          entries.push(related);
        } else {
          hashToRelated.set(hash, [related]);
        }
      }

      _useCanonicalId({component}) {
        if(component.termType === 'BlankNode' &&
          !component.value.startsWith(this.canonicalIssuer.prefix)) {
          return {
            termType: 'BlankNode',
            value: this.canonicalIssuer.getId(component.value)
          };
        }
        return component;
      }

      async _yield() {
        return new Promise(resolve => setImmediate(resolve));
      }
    };

    function _stringHashCompare$1(a, b) {
      return a.hash < b.hash ? -1 : a.hash > b.hash ? 1 : 0;
    }

    /*
     * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
     */



    var URGNA2012 = class URDNA2012 extends URDNA2015_1 {
      constructor() {
        super();
        this.name = 'URGNA2012';
        this.hashAlgorithm = 'sha1';
      }

      // helper for modifying component during Hash First Degree Quads
      modifyFirstDegreeComponent(id, component, key) {
        if(component.termType !== 'BlankNode') {
          return component;
        }
        if(key === 'graph') {
          return {
            termType: 'BlankNode',
            value: '_:g'
          };
        }
        return {
          termType: 'BlankNode',
          value: (component.value === id ? '_:a' : '_:z')
        };
      }

      // helper for getting a related predicate
      getRelatedPredicate(quad) {
        return quad.predicate.value;
      }

      // helper for creating hash to related blank nodes map
      async createHashToRelated(id, issuer) {
        // 1) Create a hash to related blank nodes map for storing hashes that
        // identify related blank nodes.
        const hashToRelated = new Map();

        // 2) Get a reference, quads, to the list of quads in the blank node to
        // quads map for the key identifier.
        const quads = this.blankNodeInfo.get(id).quads;

        // 3) For each quad in quads:
        let i = 0;
        for(const quad of quads) {
          // 3.1) If the quad's subject is a blank node that does not match
          // identifier, set hash to the result of the Hash Related Blank Node
          // algorithm, passing the blank node identifier for subject as related,
          // quad, path identifier issuer as issuer, and p as position.
          let position;
          let related;
          if(quad.subject.termType === 'BlankNode' && quad.subject.value !== id) {
            related = quad.subject.value;
            position = 'p';
          } else if(
            quad.object.termType === 'BlankNode' && quad.object.value !== id) {
            // 3.2) Otherwise, if quad's object is a blank node that does not match
            // identifier, to the result of the Hash Related Blank Node algorithm,
            // passing the blank node identifier for object as related, quad, path
            // identifier issuer as issuer, and r as position.
            related = quad.object.value;
            position = 'r';
          } else {
            // 3.3) Otherwise, continue to the next quad.
            continue;
          }
          // Note: batch hashing related blank nodes 100 at a time
          if(++i % 100 === 0) {
            await this._yield();
          }
          // 3.4) Add a mapping of hash to the blank node identifier for the
          // component that matched (subject or object) to hash to related blank
          // nodes map, adding an entry as necessary.
          const hash = await this.hashRelatedBlankNode(
            related, quad, issuer, position);
          const entries = hashToRelated.get(hash);
          if(entries) {
            entries.push(related);
          } else {
            hashToRelated.set(hash, [related]);
          }
        }

        return hashToRelated;
      }
    };

    /*
     * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
     */






    var URDNA2015Sync_1 = class URDNA2015Sync {
      constructor() {
        this.name = 'URDNA2015';
        this.blankNodeInfo = new Map();
        this.canonicalIssuer = new IdentifierIssuer_1('_:c14n');
        this.hashAlgorithm = 'sha256';
        this.quads = null;
      }

      // 4.4) Normalization Algorithm
      main(dataset) {
        this.quads = dataset;

        // 1) Create the normalization state.
        // 2) For every quad in input dataset:
        for(const quad of dataset) {
          // 2.1) For each blank node that occurs in the quad, add a reference
          // to the quad using the blank node identifier in the blank node to
          // quads map, creating a new entry if necessary.
          this._addBlankNodeQuadInfo({quad, component: quad.subject});
          this._addBlankNodeQuadInfo({quad, component: quad.object});
          this._addBlankNodeQuadInfo({quad, component: quad.graph});
        }

        // 3) Create a list of non-normalized blank node identifiers
        // non-normalized identifiers and populate it using the keys from the
        // blank node to quads map.
        // Note: We use a map here and it was generated during step 2.

        // 4) `simple` flag is skipped -- loop is optimized away. This optimization
        // is permitted because there was a typo in the hash first degree quads
        // algorithm in the URDNA2015 spec that was implemented widely making it
        // such that it could not be fixed; the result was that the loop only
        // needs to be run once and the first degree quad hashes will never change.
        // 5.1-5.2 are skipped; first degree quad hashes are generated just once
        // for all non-normalized blank nodes.

        // 5.3) For each blank node identifier identifier in non-normalized
        // identifiers:
        const hashToBlankNodes = new Map();
        const nonNormalized = [...this.blankNodeInfo.keys()];
        for(const id of nonNormalized) {
          // steps 5.3.1 and 5.3.2:
          this._hashAndTrackBlankNode({id, hashToBlankNodes});
        }

        // 5.4) For each hash to identifier list mapping in hash to blank
        // nodes map, lexicographically-sorted by hash:
        const hashes = [...hashToBlankNodes.keys()].sort();
        // optimize away second sort, gather non-unique hashes in order as we go
        const nonUnique = [];
        for(const hash of hashes) {
          // 5.4.1) If the length of identifier list is greater than 1,
          // continue to the next mapping.
          const idList = hashToBlankNodes.get(hash);
          if(idList.length > 1) {
            nonUnique.push(idList);
            continue;
          }

          // 5.4.2) Use the Issue Identifier algorithm, passing canonical
          // issuer and the single blank node identifier in identifier
          // list, identifier, to issue a canonical replacement identifier
          // for identifier.
          const id = idList[0];
          this.canonicalIssuer.getId(id);

          // Note: These steps are skipped, optimized away since the loop
          // only needs to be run once.
          // 5.4.3) Remove identifier from non-normalized identifiers.
          // 5.4.4) Remove hash from the hash to blank nodes map.
          // 5.4.5) Set simple to true.
        }

        // 6) For each hash to identifier list mapping in hash to blank nodes map,
        // lexicographically-sorted by hash:
        // Note: sort optimized away, use `nonUnique`.
        for(const idList of nonUnique) {
          // 6.1) Create hash path list where each item will be a result of
          // running the Hash N-Degree Quads algorithm.
          const hashPathList = [];

          // 6.2) For each blank node identifier identifier in identifier list:
          for(const id of idList) {
            // 6.2.1) If a canonical identifier has already been issued for
            // identifier, continue to the next identifier.
            if(this.canonicalIssuer.hasId(id)) {
              continue;
            }

            // 6.2.2) Create temporary issuer, an identifier issuer
            // initialized with the prefix _:b.
            const issuer = new IdentifierIssuer_1('_:b');

            // 6.2.3) Use the Issue Identifier algorithm, passing temporary
            // issuer and identifier, to issue a new temporary blank node
            // identifier for identifier.
            issuer.getId(id);

            // 6.2.4) Run the Hash N-Degree Quads algorithm, passing
            // temporary issuer, and append the result to the hash path list.
            const result = this.hashNDegreeQuads(id, issuer);
            hashPathList.push(result);
          }

          // 6.3) For each result in the hash path list,
          // lexicographically-sorted by the hash in result:
          hashPathList.sort(_stringHashCompare);
          for(const result of hashPathList) {
            // 6.3.1) For each blank node identifier, existing identifier,
            // that was issued a temporary identifier by identifier issuer
            // in result, issue a canonical identifier, in the same order,
            // using the Issue Identifier algorithm, passing canonical
            // issuer and existing identifier.
            const oldIds = result.issuer.getOldIds();
            for(const id of oldIds) {
              this.canonicalIssuer.getId(id);
            }
          }
        }

        /* Note: At this point all blank nodes in the set of RDF quads have been
        assigned canonical identifiers, which have been stored in the canonical
        issuer. Here each quad is updated by assigning each of its blank nodes
        its new identifier. */

        // 7) For each quad, quad, in input dataset:
        const normalized = [];
        for(const quad of this.quads) {
          // 7.1) Create a copy, quad copy, of quad and replace any existing
          // blank node identifiers using the canonical identifiers
          // previously issued by canonical issuer.
          // Note: We optimize with shallow copies here.
          const q = {...quad};
          q.subject = this._useCanonicalId({component: q.subject});
          q.object = this._useCanonicalId({component: q.object});
          q.graph = this._useCanonicalId({component: q.graph});
          // 7.2) Add quad copy to the normalized dataset.
          normalized.push(NQuads_1.serializeQuad(q));
        }

        // sort normalized output
        normalized.sort();

        // 8) Return the normalized dataset.
        return normalized.join('');
      }

      // 4.6) Hash First Degree Quads
      hashFirstDegreeQuads(id) {
        // 1) Initialize nquads to an empty list. It will be used to store quads in
        // N-Quads format.
        const nquads = [];

        // 2) Get the list of quads `quads` associated with the reference blank node
        // identifier in the blank node to quads map.
        const info = this.blankNodeInfo.get(id);
        const quads = info.quads;

        // 3) For each quad `quad` in `quads`:
        for(const quad of quads) {
          // 3.1) Serialize the quad in N-Quads format with the following special
          // rule:

          // 3.1.1) If any component in quad is an blank node, then serialize it
          // using a special identifier as follows:
          const copy = {
            subject: null, predicate: quad.predicate, object: null, graph: null
          };
          // 3.1.2) If the blank node's existing blank node identifier matches
          // the reference blank node identifier then use the blank node
          // identifier _:a, otherwise, use the blank node identifier _:z.
          copy.subject = this.modifyFirstDegreeComponent(
            id, quad.subject, 'subject');
          copy.object = this.modifyFirstDegreeComponent(
            id, quad.object, 'object');
          copy.graph = this.modifyFirstDegreeComponent(
            id, quad.graph, 'graph');
          nquads.push(NQuads_1.serializeQuad(copy));
        }

        // 4) Sort nquads in lexicographical order.
        nquads.sort();

        // 5) Return the hash that results from passing the sorted, joined nquads
        // through the hash algorithm.
        const md = new MessageDigestBrowser(this.hashAlgorithm);
        for(const nquad of nquads) {
          md.update(nquad);
        }
        info.hash = md.digest();
        return info.hash;
      }

      // 4.7) Hash Related Blank Node
      hashRelatedBlankNode(related, quad, issuer, position) {
        // 1) Set the identifier to use for related, preferring first the canonical
        // identifier for related if issued, second the identifier issued by issuer
        // if issued, and last, if necessary, the result of the Hash First Degree
        // Quads algorithm, passing related.
        let id;
        if(this.canonicalIssuer.hasId(related)) {
          id = this.canonicalIssuer.getId(related);
        } else if(issuer.hasId(related)) {
          id = issuer.getId(related);
        } else {
          id = this.blankNodeInfo.get(related).hash;
        }

        // 2) Initialize a string input to the value of position.
        // Note: We use a hash object instead.
        const md = new MessageDigestBrowser(this.hashAlgorithm);
        md.update(position);

        // 3) If position is not g, append <, the value of the predicate in quad,
        // and > to input.
        if(position !== 'g') {
          md.update(this.getRelatedPredicate(quad));
        }

        // 4) Append identifier to input.
        md.update(id);

        // 5) Return the hash that results from passing input through the hash
        // algorithm.
        return md.digest();
      }

      // 4.8) Hash N-Degree Quads
      hashNDegreeQuads(id, issuer) {
        // 1) Create a hash to related blank nodes map for storing hashes that
        // identify related blank nodes.
        // Note: 2) and 3) handled within `createHashToRelated`
        const md = new MessageDigestBrowser(this.hashAlgorithm);
        const hashToRelated = this.createHashToRelated(id, issuer);

        // 4) Create an empty string, data to hash.
        // Note: We created a hash object `md` above instead.

        // 5) For each related hash to blank node list mapping in hash to related
        // blank nodes map, sorted lexicographically by related hash:
        const hashes = [...hashToRelated.keys()].sort();
        for(const hash of hashes) {
          // 5.1) Append the related hash to the data to hash.
          md.update(hash);

          // 5.2) Create a string chosen path.
          let chosenPath = '';

          // 5.3) Create an unset chosen issuer variable.
          let chosenIssuer;

          // 5.4) For each permutation of blank node list:
          const permuter = new Permuter_1(hashToRelated.get(hash));
          while(permuter.hasNext()) {
            const permutation = permuter.next();

            // 5.4.1) Create a copy of issuer, issuer copy.
            let issuerCopy = issuer.clone();

            // 5.4.2) Create a string path.
            let path = '';

            // 5.4.3) Create a recursion list, to store blank node identifiers
            // that must be recursively processed by this algorithm.
            const recursionList = [];

            // 5.4.4) For each related in permutation:
            let nextPermutation = false;
            for(const related of permutation) {
              // 5.4.4.1) If a canonical identifier has been issued for
              // related, append it to path.
              if(this.canonicalIssuer.hasId(related)) {
                path += this.canonicalIssuer.getId(related);
              } else {
                // 5.4.4.2) Otherwise:
                // 5.4.4.2.1) If issuer copy has not issued an identifier for
                // related, append related to recursion list.
                if(!issuerCopy.hasId(related)) {
                  recursionList.push(related);
                }
                // 5.4.4.2.2) Use the Issue Identifier algorithm, passing
                // issuer copy and related and append the result to path.
                path += issuerCopy.getId(related);
              }

              // 5.4.4.3) If chosen path is not empty and the length of path
              // is greater than or equal to the length of chosen path and
              // path is lexicographically greater than chosen path, then
              // skip to the next permutation.
              // Note: Comparing path length to chosen path length can be optimized
              // away; only compare lexicographically.
              if(chosenPath.length !== 0 && path > chosenPath) {
                nextPermutation = true;
                break;
              }
            }

            if(nextPermutation) {
              continue;
            }

            // 5.4.5) For each related in recursion list:
            for(const related of recursionList) {
              // 5.4.5.1) Set result to the result of recursively executing
              // the Hash N-Degree Quads algorithm, passing related for
              // identifier and issuer copy for path identifier issuer.
              const result = this.hashNDegreeQuads(related, issuerCopy);

              // 5.4.5.2) Use the Issue Identifier algorithm, passing issuer
              // copy and related and append the result to path.
              path += issuerCopy.getId(related);

              // 5.4.5.3) Append <, the hash in result, and > to path.
              path += `<${result.hash}>`;

              // 5.4.5.4) Set issuer copy to the identifier issuer in
              // result.
              issuerCopy = result.issuer;

              // 5.4.5.5) If chosen path is not empty and the length of path
              // is greater than or equal to the length of chosen path and
              // path is lexicographically greater than chosen path, then
              // skip to the next permutation.
              // Note: Comparing path length to chosen path length can be optimized
              // away; only compare lexicographically.
              if(chosenPath.length !== 0 && path > chosenPath) {
                nextPermutation = true;
                break;
              }
            }

            if(nextPermutation) {
              continue;
            }

            // 5.4.6) If chosen path is empty or path is lexicographically
            // less than chosen path, set chosen path to path and chosen
            // issuer to issuer copy.
            if(chosenPath.length === 0 || path < chosenPath) {
              chosenPath = path;
              chosenIssuer = issuerCopy;
            }
          }

          // 5.5) Append chosen path to data to hash.
          md.update(chosenPath);

          // 5.6) Replace issuer, by reference, with chosen issuer.
          issuer = chosenIssuer;
        }

        // 6) Return issuer and the hash that results from passing data to hash
        // through the hash algorithm.
        return {hash: md.digest(), issuer};
      }

      // helper for modifying component during Hash First Degree Quads
      modifyFirstDegreeComponent(id, component) {
        if(component.termType !== 'BlankNode') {
          return component;
        }
        /* Note: A mistake in the URDNA2015 spec that made its way into
        implementations (and therefore must stay to avoid interop breakage)
        resulted in an assigned canonical ID, if available for
        `component.value`, not being used in place of `_:a`/`_:z`, so
        we don't use it here. */
        return {
          termType: 'BlankNode',
          value: component.value === id ? '_:a' : '_:z'
        };
      }

      // helper for getting a related predicate
      getRelatedPredicate(quad) {
        return `<${quad.predicate.value}>`;
      }

      // helper for creating hash to related blank nodes map
      createHashToRelated(id, issuer) {
        // 1) Create a hash to related blank nodes map for storing hashes that
        // identify related blank nodes.
        const hashToRelated = new Map();

        // 2) Get a reference, quads, to the list of quads in the blank node to
        // quads map for the key identifier.
        const quads = this.blankNodeInfo.get(id).quads;

        // 3) For each quad in quads:
        for(const quad of quads) {
          // 3.1) For each component in quad, if component is the subject, object,
          // or graph name and it is a blank node that is not identified by
          // identifier:
          // steps 3.1.1 and 3.1.2 occur in helpers:
          this._addRelatedBlankNodeHash({
            quad, component: quad.subject, position: 's',
            id, issuer, hashToRelated
          });
          this._addRelatedBlankNodeHash({
            quad, component: quad.object, position: 'o',
            id, issuer, hashToRelated
          });
          this._addRelatedBlankNodeHash({
            quad, component: quad.graph, position: 'g',
            id, issuer, hashToRelated
          });
        }

        return hashToRelated;
      }

      _hashAndTrackBlankNode({id, hashToBlankNodes}) {
        // 5.3.1) Create a hash, hash, according to the Hash First Degree
        // Quads algorithm.
        const hash = this.hashFirstDegreeQuads(id);

        // 5.3.2) Add hash and identifier to hash to blank nodes map,
        // creating a new entry if necessary.
        const idList = hashToBlankNodes.get(hash);
        if(!idList) {
          hashToBlankNodes.set(hash, [id]);
        } else {
          idList.push(id);
        }
      }

      _addBlankNodeQuadInfo({quad, component}) {
        if(component.termType !== 'BlankNode') {
          return;
        }
        const id = component.value;
        const info = this.blankNodeInfo.get(id);
        if(info) {
          info.quads.add(quad);
        } else {
          this.blankNodeInfo.set(id, {quads: new Set([quad]), hash: null});
        }
      }

      _addRelatedBlankNodeHash(
        {quad, component, position, id, issuer, hashToRelated}) {
        if(!(component.termType === 'BlankNode' && component.value !== id)) {
          return;
        }
        // 3.1.1) Set hash to the result of the Hash Related Blank Node
        // algorithm, passing the blank node identifier for component as
        // related, quad, path identifier issuer as issuer, and position as
        // either s, o, or g based on whether component is a subject, object,
        // graph name, respectively.
        const related = component.value;
        const hash = this.hashRelatedBlankNode(related, quad, issuer, position);

        // 3.1.2) Add a mapping of hash to the blank node identifier for
        // component to hash to related blank nodes map, adding an entry as
        // necessary.
        const entries = hashToRelated.get(hash);
        if(entries) {
          entries.push(related);
        } else {
          hashToRelated.set(hash, [related]);
        }
      }

      _useCanonicalId({component}) {
        if(component.termType === 'BlankNode' &&
          !component.value.startsWith(this.canonicalIssuer.prefix)) {
          return {
            termType: 'BlankNode',
            value: this.canonicalIssuer.getId(component.value)
          };
        }
        return component;
      }
    };

    function _stringHashCompare(a, b) {
      return a.hash < b.hash ? -1 : a.hash > b.hash ? 1 : 0;
    }

    /*
     * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
     */



    var URGNA2012Sync = class URDNA2012Sync extends URDNA2015Sync_1 {
      constructor() {
        super();
        this.name = 'URGNA2012';
        this.hashAlgorithm = 'sha1';
      }

      // helper for modifying component during Hash First Degree Quads
      modifyFirstDegreeComponent(id, component, key) {
        if(component.termType !== 'BlankNode') {
          return component;
        }
        if(key === 'graph') {
          return {
            termType: 'BlankNode',
            value: '_:g'
          };
        }
        return {
          termType: 'BlankNode',
          value: (component.value === id ? '_:a' : '_:z')
        };
      }

      // helper for getting a related predicate
      getRelatedPredicate(quad) {
        return quad.predicate.value;
      }

      // helper for creating hash to related blank nodes map
      createHashToRelated(id, issuer) {
        // 1) Create a hash to related blank nodes map for storing hashes that
        // identify related blank nodes.
        const hashToRelated = new Map();

        // 2) Get a reference, quads, to the list of quads in the blank node to
        // quads map for the key identifier.
        const quads = this.blankNodeInfo.get(id).quads;

        // 3) For each quad in quads:
        for(const quad of quads) {
          // 3.1) If the quad's subject is a blank node that does not match
          // identifier, set hash to the result of the Hash Related Blank Node
          // algorithm, passing the blank node identifier for subject as related,
          // quad, path identifier issuer as issuer, and p as position.
          let position;
          let related;
          if(quad.subject.termType === 'BlankNode' && quad.subject.value !== id) {
            related = quad.subject.value;
            position = 'p';
          } else if(
            quad.object.termType === 'BlankNode' && quad.object.value !== id) {
            // 3.2) Otherwise, if quad's object is a blank node that does not match
            // identifier, to the result of the Hash Related Blank Node algorithm,
            // passing the blank node identifier for object as related, quad, path
            // identifier issuer as issuer, and r as position.
            related = quad.object.value;
            position = 'r';
          } else {
            // 3.3) Otherwise, continue to the next quad.
            continue;
          }
          // 3.4) Add a mapping of hash to the blank node identifier for the
          // component that matched (subject or object) to hash to related blank
          // nodes map, adding an entry as necessary.
          const hash = this.hashRelatedBlankNode(related, quad, issuer, position);
          const entries = hashToRelated.get(hash);
          if(entries) {
            entries.push(related);
          } else {
            hashToRelated.set(hash, [related]);
          }
        }

        return hashToRelated;
      }
    };

    var _nodeResolve_empty = {};

    var _nodeResolve_empty$1 = /*#__PURE__*/Object.freeze({
        __proto__: null,
        'default': _nodeResolve_empty
    });

    var require$$0 = /*@__PURE__*/getAugmentedNamespace(_nodeResolve_empty$1);

    /**
     * An implementation of the RDF Dataset Normalization specification.
     * This library works in the browser and node.js.
     *
     * BSD 3-Clause License
     * Copyright (c) 2016-2021 Digital Bazaar, Inc.
     * All rights reserved.
     *
     * Redistribution and use in source and binary forms, with or without
     * modification, are permitted provided that the following conditions are met:
     *
     * Redistributions of source code must retain the above copyright notice,
     * this list of conditions and the following disclaimer.
     *
     * Redistributions in binary form must reproduce the above copyright
     * notice, this list of conditions and the following disclaimer in the
     * documentation and/or other materials provided with the distribution.
     *
     * Neither the name of the Digital Bazaar, Inc. nor the names of its
     * contributors may be used to endorse or promote products derived from
     * this software without specific prior written permission.
     *
     * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
     * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
     * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
     * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
     * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
     * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
     * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
     * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
     * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
     * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
     * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     */






    // optional native support
    let rdfCanonizeNative;
    try {
      rdfCanonizeNative = require$$0;
    } catch(e) {}

    const api$d = {};
    var lib = api$d;

    // expose helpers
    api$d.NQuads = NQuads_1;
    api$d.IdentifierIssuer = IdentifierIssuer_1;

    /**
     * Get or set native API.
     *
     * @param api the native API.
     *
     * @return the currently set native API.
     */
    api$d._rdfCanonizeNative = function(api) {
      if(api) {
        rdfCanonizeNative = api;
      }
      return rdfCanonizeNative;
    };

    /**
     * Asynchronously canonizes an RDF dataset.
     *
     * @param dataset the dataset to canonize.
     * @param options the options to use:
     *          algorithm the canonicalization algorithm to use, `URDNA2015` or
     *            `URGNA2012`.
     *          [useNative] use native implementation (default: false).
     *
     * @return a Promise that resolves to the canonicalized RDF Dataset.
     */
    api$d.canonize = async function(dataset, options) {
      // back-compat with legacy dataset
      if(!Array.isArray(dataset)) {
        dataset = api$d.NQuads.legacyDatasetToQuads(dataset);
      }

      if(options.useNative) {
        if(!rdfCanonizeNative) {
          throw new Error('rdf-canonize-native not available');
        }
        // TODO: convert native algorithm to Promise-based async
        return new Promise((resolve, reject) =>
          rdfCanonizeNative.canonize(dataset, options, (err, canonical) =>
            err ? reject(err) : resolve(canonical)));
      }

      if(options.algorithm === 'URDNA2015') {
        return new URDNA2015_1(options).main(dataset);
      }
      if(options.algorithm === 'URGNA2012') {
        return new URGNA2012(options).main(dataset);
      }
      if(!('algorithm' in options)) {
        throw new Error('No RDF Dataset Canonicalization algorithm specified.');
      }
      throw new Error(
        'Invalid RDF Dataset Canonicalization algorithm: ' + options.algorithm);
    };

    /**
     * This method is no longer available in the public API, it is for testing
     * only. It synchronously canonizes an RDF dataset and does not work in the
     * browser.
     *
     * @param dataset the dataset to canonize.
     * @param options the options to use:
     *          algorithm the canonicalization algorithm to use, `URDNA2015` or
     *            `URGNA2012`.
     *          [useNative] use native implementation (default: false).
     *
     * @return the RDF dataset in canonical form.
     */
    api$d._canonizeSync = function(dataset, options) {
      // back-compat with legacy dataset
      if(!Array.isArray(dataset)) {
        dataset = api$d.NQuads.legacyDatasetToQuads(dataset);
      }

      if(options.useNative) {
        if(rdfCanonizeNative) {
          return rdfCanonizeNative.canonizeSync(dataset, options);
        }
        throw new Error('rdf-canonize-native not available');
      }
      if(options.algorithm === 'URDNA2015') {
        return new URDNA2015Sync_1(options).main(dataset);
      }
      if(options.algorithm === 'URGNA2012') {
        return new URGNA2012Sync(options).main(dataset);
      }
      if(!('algorithm' in options)) {
        throw new Error('No RDF Dataset Canonicalization algorithm specified.');
      }
      throw new Error(
        'Invalid RDF Dataset Canonicalization algorithm: ' + options.algorithm);
    };

    /**
     * An implementation of the RDF Dataset Normalization specification.
     *
     * @author Dave Longley
     *
     * Copyright 2010-2021 Digital Bazaar, Inc.
     */

    var rdfCanonize = lib;

    /*
     * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.
     */

    const api$c = {};
    var types = api$c;

    /**
     * Returns true if the given value is an Array.
     *
     * @param v the value to check.
     *
     * @return true if the value is an Array, false if not.
     */
    api$c.isArray = Array.isArray;

    /**
     * Returns true if the given value is a Boolean.
     *
     * @param v the value to check.
     *
     * @return true if the value is a Boolean, false if not.
     */
    api$c.isBoolean = v => (typeof v === 'boolean' ||
      Object.prototype.toString.call(v) === '[object Boolean]');

    /**
     * Returns true if the given value is a double.
     *
     * @param v the value to check.
     *
     * @return true if the value is a double, false if not.
     */
    api$c.isDouble = v => api$c.isNumber(v) &&
      (String(v).indexOf('.') !== -1 || Math.abs(v) >= 1e21);

    /**
     * Returns true if the given value is an empty Object.
     *
     * @param v the value to check.
     *
     * @return true if the value is an empty Object, false if not.
     */
    api$c.isEmptyObject = v => api$c.isObject(v) && Object.keys(v).length === 0;

    /**
     * Returns true if the given value is a Number.
     *
     * @param v the value to check.
     *
     * @return true if the value is a Number, false if not.
     */
    api$c.isNumber = v => (typeof v === 'number' ||
      Object.prototype.toString.call(v) === '[object Number]');

    /**
     * Returns true if the given value is numeric.
     *
     * @param v the value to check.
     *
     * @return true if the value is numeric, false if not.
     */
    api$c.isNumeric = v => !isNaN(parseFloat(v)) && isFinite(v);

    /**
     * Returns true if the given value is an Object.
     *
     * @param v the value to check.
     *
     * @return true if the value is an Object, false if not.
     */
    api$c.isObject = v => Object.prototype.toString.call(v) === '[object Object]';

    /**
     * Returns true if the given value is a String.
     *
     * @param v the value to check.
     *
     * @return true if the value is a String, false if not.
     */
    api$c.isString = v => (typeof v === 'string' ||
      Object.prototype.toString.call(v) === '[object String]');

    /**
     * Returns true if the given value is undefined.
     *
     * @param v the value to check.
     *
     * @return true if the value is undefined, false if not.
     */
    api$c.isUndefined = v => typeof v === 'undefined';

    /*
     * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.
     */



    const api$b = {};
    var graphTypes = api$b;

    /**
     * Returns true if the given value is a subject with properties.
     *
     * @param v the value to check.
     *
     * @return true if the value is a subject with properties, false if not.
     */
    api$b.isSubject = v => {
      // Note: A value is a subject if all of these hold true:
      // 1. It is an Object.
      // 2. It is not a @value, @set, or @list.
      // 3. It has more than 1 key OR any existing key is not @id.
      if(types.isObject(v) &&
        !(('@value' in v) || ('@set' in v) || ('@list' in v))) {
        const keyCount = Object.keys(v).length;
        return (keyCount > 1 || !('@id' in v));
      }
      return false;
    };

    /**
     * Returns true if the given value is a subject reference.
     *
     * @param v the value to check.
     *
     * @return true if the value is a subject reference, false if not.
     */
    api$b.isSubjectReference = v =>
      // Note: A value is a subject reference if all of these hold true:
      // 1. It is an Object.
      // 2. It has a single key: @id.
      (types.isObject(v) && Object.keys(v).length === 1 && ('@id' in v));

    /**
     * Returns true if the given value is a @value.
     *
     * @param v the value to check.
     *
     * @return true if the value is a @value, false if not.
     */
    api$b.isValue = v =>
      // Note: A value is a @value if all of these hold true:
      // 1. It is an Object.
      // 2. It has the @value property.
      types.isObject(v) && ('@value' in v);

    /**
     * Returns true if the given value is a @list.
     *
     * @param v the value to check.
     *
     * @return true if the value is a @list, false if not.
     */
    api$b.isList = v =>
      // Note: A value is a @list if all of these hold true:
      // 1. It is an Object.
      // 2. It has the @list property.
      types.isObject(v) && ('@list' in v);

    /**
     * Returns true if the given value is a @graph.
     *
     * @return true if the value is a @graph, false if not.
     */
    api$b.isGraph = v => {
      // Note: A value is a graph if all of these hold true:
      // 1. It is an object.
      // 2. It has an `@graph` key.
      // 3. It may have '@id' or '@index'
      return types.isObject(v) &&
        '@graph' in v &&
        Object.keys(v)
          .filter(key => key !== '@id' && key !== '@index').length === 1;
    };

    /**
     * Returns true if the given value is a simple @graph.
     *
     * @return true if the value is a simple @graph, false if not.
     */
    api$b.isSimpleGraph = v => {
      // Note: A value is a simple graph if all of these hold true:
      // 1. It is an object.
      // 2. It has an `@graph` key.
      // 3. It has only 1 key or 2 keys where one of them is `@index`.
      return api$b.isGraph(v) && !('@id' in v);
    };

    /**
     * Returns true if the given value is a blank node.
     *
     * @param v the value to check.
     *
     * @return true if the value is a blank node, false if not.
     */
    api$b.isBlankNode = v => {
      // Note: A value is a blank node if all of these hold true:
      // 1. It is an Object.
      // 2. If it has an @id key its value begins with '_:'.
      // 3. It has no keys OR is not a @value, @set, or @list.
      if(types.isObject(v)) {
        if('@id' in v) {
          return (v['@id'].indexOf('_:') === 0);
        }
        return (Object.keys(v).length === 0 ||
          !(('@value' in v) || ('@set' in v) || ('@list' in v)));
      }
      return false;
    };

    /*
     * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.
     */

    var JsonLdError_1 = class JsonLdError extends Error {
      /**
       * Creates a JSON-LD Error.
       *
       * @param msg the error message.
       * @param type the error type.
       * @param details the error details.
       */
      constructor(
        message = 'An unspecified JSON-LD error occurred.',
        name = 'jsonld.Error',
        details = {}) {
        super(message);
        this.name = name;
        this.message = message;
        this.details = details;
      }
    };

    /*
     * Copyright (c) 2017-2019 Digital Bazaar, Inc. All rights reserved.
     */



    // TODO: move `IdentifierIssuer` to its own package
    const IdentifierIssuer$1 = rdfCanonize.IdentifierIssuer;


    // constants
    const REGEX_LINK_HEADERS = /(?:<[^>]*?>|"[^"]*?"|[^,])+/g;
    const REGEX_LINK_HEADER$1 = /\s*<([^>]*?)>\s*(?:;\s*(.*))?/;
    const REGEX_LINK_HEADER_PARAMS =
      /(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;

    const DEFAULTS = {
      headers: {
        accept: 'application/ld+json, application/json'
      }
    };

    const api$a = {};
    var util = api$a;
    api$a.IdentifierIssuer = IdentifierIssuer$1;

    /**
     * Clones an object, array, Map, Set, or string/number. If a typed JavaScript
     * object is given, such as a Date, it will be converted to a string.
     *
     * @param value the value to clone.
     *
     * @return the cloned value.
     */
    api$a.clone = function(value) {
      if(value && typeof value === 'object') {
        let rval;
        if(types.isArray(value)) {
          rval = [];
          for(let i = 0; i < value.length; ++i) {
            rval[i] = api$a.clone(value[i]);
          }
        } else if(value instanceof Map) {
          rval = new Map();
          for(const [k, v] of value) {
            rval.set(k, api$a.clone(v));
          }
        } else if(value instanceof Set) {
          rval = new Set();
          for(const v of value) {
            rval.add(api$a.clone(v));
          }
        } else if(types.isObject(value)) {
          rval = {};
          for(const key in value) {
            rval[key] = api$a.clone(value[key]);
          }
        } else {
          rval = value.toString();
        }
        return rval;
      }
      return value;
    };

    /**
     * Ensure a value is an array. If the value is an array, it is returned.
     * Otherwise, it is wrapped in an array.
     *
     * @param value the value to return as an array.
     *
     * @return the value as an array.
     */
    api$a.asArray = function(value) {
      return Array.isArray(value) ? value : [value];
    };

    /**
     * Builds an HTTP headers object for making a JSON-LD request from custom
     * headers and asserts the `accept` header isn't overridden.
     *
     * @param headers an object of headers with keys as header names and values
     *          as header values.
     *
     * @return an object of headers with a valid `accept` header.
     */
    api$a.buildHeaders = (headers = {}) => {
      const hasAccept = Object.keys(headers).some(
        h => h.toLowerCase() === 'accept');

      if(hasAccept) {
        throw new RangeError(
          'Accept header may not be specified; only "' +
          DEFAULTS.headers.accept + '" is supported.');
      }

      return Object.assign({Accept: DEFAULTS.headers.accept}, headers);
    };

    /**
     * Parses a link header. The results will be key'd by the value of "rel".
     *
     * Link: <http://json-ld.org/contexts/person.jsonld>;
     * rel="http://www.w3.org/ns/json-ld#context"; type="application/ld+json"
     *
     * Parses as: {
     *   'http://www.w3.org/ns/json-ld#context': {
     *     target: http://json-ld.org/contexts/person.jsonld,
     *     type: 'application/ld+json'
     *   }
     * }
     *
     * If there is more than one "rel" with the same IRI, then entries in the
     * resulting map for that "rel" will be arrays.
     *
     * @param header the link header to parse.
     */
    api$a.parseLinkHeader = header => {
      const rval = {};
      // split on unbracketed/unquoted commas
      const entries = header.match(REGEX_LINK_HEADERS);
      for(let i = 0; i < entries.length; ++i) {
        let match = entries[i].match(REGEX_LINK_HEADER$1);
        if(!match) {
          continue;
        }
        const result = {target: match[1]};
        const params = match[2];
        while((match = REGEX_LINK_HEADER_PARAMS.exec(params))) {
          result[match[1]] = (match[2] === undefined) ? match[3] : match[2];
        }
        const rel = result['rel'] || '';
        if(Array.isArray(rval[rel])) {
          rval[rel].push(result);
        } else if(rval.hasOwnProperty(rel)) {
          rval[rel] = [rval[rel], result];
        } else {
          rval[rel] = result;
        }
      }
      return rval;
    };

    /**
     * Throws an exception if the given value is not a valid @type value.
     *
     * @param v the value to check.
     */
    api$a.validateTypeValue = (v, isFrame) => {
      if(types.isString(v)) {
        return;
      }

      if(types.isArray(v) && v.every(vv => types.isString(vv))) {
        return;
      }
      if(isFrame && types.isObject(v)) {
        switch(Object.keys(v).length) {
          case 0:
            // empty object is wildcard
            return;
          case 1:
            // default entry is all strings
            if('@default' in v &&
              api$a.asArray(v['@default']).every(vv => types.isString(vv))) {
              return;
            }
        }
      }

      throw new JsonLdError_1(
        'Invalid JSON-LD syntax; "@type" value must a string, an array of ' +
        'strings, an empty object, ' +
        'or a default object.', 'jsonld.SyntaxError',
        {code: 'invalid type value', value: v});
    };

    /**
     * Returns true if the given subject has the given property.
     *
     * @param subject the subject to check.
     * @param property the property to look for.
     *
     * @return true if the subject has the given property, false if not.
     */
    api$a.hasProperty = (subject, property) => {
      if(subject.hasOwnProperty(property)) {
        const value = subject[property];
        return (!types.isArray(value) || value.length > 0);
      }
      return false;
    };

    /**
     * Determines if the given value is a property of the given subject.
     *
     * @param subject the subject to check.
     * @param property the property to check.
     * @param value the value to check.
     *
     * @return true if the value exists, false if not.
     */
    api$a.hasValue = (subject, property, value) => {
      if(api$a.hasProperty(subject, property)) {
        let val = subject[property];
        const isList = graphTypes.isList(val);
        if(types.isArray(val) || isList) {
          if(isList) {
            val = val['@list'];
          }
          for(let i = 0; i < val.length; ++i) {
            if(api$a.compareValues(value, val[i])) {
              return true;
            }
          }
        } else if(!types.isArray(value)) {
          // avoid matching the set of values with an array value parameter
          return api$a.compareValues(value, val);
        }
      }
      return false;
    };

    /**
     * Adds a value to a subject. If the value is an array, all values in the
     * array will be added.
     *
     * @param subject the subject to add the value to.
     * @param property the property that relates the value to the subject.
     * @param value the value to add.
     * @param [options] the options to use:
     *        [propertyIsArray] true if the property is always an array, false
     *          if not (default: false).
     *        [valueIsArray] true if the value to be added should be preserved as
     *          an array (lists) (default: false).
     *        [allowDuplicate] true to allow duplicates, false not to (uses a
     *          simple shallow comparison of subject ID or value) (default: true).
     *        [prependValue] false to prepend value to any existing values.
     *          (default: false)
     */
    api$a.addValue = (subject, property, value, options) => {
      options = options || {};
      if(!('propertyIsArray' in options)) {
        options.propertyIsArray = false;
      }
      if(!('valueIsArray' in options)) {
        options.valueIsArray = false;
      }
      if(!('allowDuplicate' in options)) {
        options.allowDuplicate = true;
      }
      if(!('prependValue' in options)) {
        options.prependValue = false;
      }

      if(options.valueIsArray) {
        subject[property] = value;
      } else if(types.isArray(value)) {
        if(value.length === 0 && options.propertyIsArray &&
          !subject.hasOwnProperty(property)) {
          subject[property] = [];
        }
        if(options.prependValue) {
          value = value.concat(subject[property]);
          subject[property] = [];
        }
        for(let i = 0; i < value.length; ++i) {
          api$a.addValue(subject, property, value[i], options);
        }
      } else if(subject.hasOwnProperty(property)) {
        // check if subject already has value if duplicates not allowed
        const hasValue = (!options.allowDuplicate &&
          api$a.hasValue(subject, property, value));

        // make property an array if value not present or always an array
        if(!types.isArray(subject[property]) &&
          (!hasValue || options.propertyIsArray)) {
          subject[property] = [subject[property]];
        }

        // add new value
        if(!hasValue) {
          if(options.prependValue) {
            subject[property].unshift(value);
          } else {
            subject[property].push(value);
          }
        }
      } else {
        // add new value as set or single value
        subject[property] = options.propertyIsArray ? [value] : value;
      }
    };

    /**
     * Gets all of the values for a subject's property as an array.
     *
     * @param subject the subject.
     * @param property the property.
     *
     * @return all of the values for a subject's property as an array.
     */
    api$a.getValues = (subject, property) => [].concat(subject[property] || []);

    /**
     * Removes a property from a subject.
     *
     * @param subject the subject.
     * @param property the property.
     */
    api$a.removeProperty = (subject, property) => {
      delete subject[property];
    };

    /**
     * Removes a value from a subject.
     *
     * @param subject the subject.
     * @param property the property that relates the value to the subject.
     * @param value the value to remove.
     * @param [options] the options to use:
     *          [propertyIsArray] true if the property is always an array, false
     *            if not (default: false).
     */
    api$a.removeValue = (subject, property, value, options) => {
      options = options || {};
      if(!('propertyIsArray' in options)) {
        options.propertyIsArray = false;
      }

      // filter out value
      const values = api$a.getValues(subject, property).filter(
        e => !api$a.compareValues(e, value));

      if(values.length === 0) {
        api$a.removeProperty(subject, property);
      } else if(values.length === 1 && !options.propertyIsArray) {
        subject[property] = values[0];
      } else {
        subject[property] = values;
      }
    };

    /**
     * Relabels all blank nodes in the given JSON-LD input.
     *
     * @param input the JSON-LD input.
     * @param [options] the options to use:
     *          [issuer] an IdentifierIssuer to use to label blank nodes.
     */
    api$a.relabelBlankNodes = (input, options) => {
      options = options || {};
      const issuer = options.issuer || new IdentifierIssuer$1('_:b');
      return _labelBlankNodes(issuer, input);
    };

    /**
     * Compares two JSON-LD values for equality. Two JSON-LD values will be
     * considered equal if:
     *
     * 1. They are both primitives of the same type and value.
     * 2. They are both @values with the same @value, @type, @language,
     *   and @index, OR
     * 3. They both have @ids they are the same.
     *
     * @param v1 the first value.
     * @param v2 the second value.
     *
     * @return true if v1 and v2 are considered equal, false if not.
     */
    api$a.compareValues = (v1, v2) => {
      // 1. equal primitives
      if(v1 === v2) {
        return true;
      }

      // 2. equal @values
      if(graphTypes.isValue(v1) && graphTypes.isValue(v2) &&
        v1['@value'] === v2['@value'] &&
        v1['@type'] === v2['@type'] &&
        v1['@language'] === v2['@language'] &&
        v1['@index'] === v2['@index']) {
        return true;
      }

      // 3. equal @ids
      if(types.isObject(v1) &&
        ('@id' in v1) &&
        types.isObject(v2) &&
        ('@id' in v2)) {
        return v1['@id'] === v2['@id'];
      }

      return false;
    };

    /**
     * Compares two strings first based on length and then lexicographically.
     *
     * @param a the first string.
     * @param b the second string.
     *
     * @return -1 if a < b, 1 if a > b, 0 if a === b.
     */
    api$a.compareShortestLeast = (a, b) => {
      if(a.length < b.length) {
        return -1;
      }
      if(b.length < a.length) {
        return 1;
      }
      if(a === b) {
        return 0;
      }
      return (a < b) ? -1 : 1;
    };

    /**
     * Labels the blank nodes in the given value using the given IdentifierIssuer.
     *
     * @param issuer the IdentifierIssuer to use.
     * @param element the element with blank nodes to rename.
     *
     * @return the element.
     */
    function _labelBlankNodes(issuer, element) {
      if(types.isArray(element)) {
        for(let i = 0; i < element.length; ++i) {
          element[i] = _labelBlankNodes(issuer, element[i]);
        }
      } else if(graphTypes.isList(element)) {
        element['@list'] = _labelBlankNodes(issuer, element['@list']);
      } else if(types.isObject(element)) {
        // relabel blank node
        if(graphTypes.isBlankNode(element)) {
          element['@id'] = issuer.getId(element['@id']);
        }

        // recursively apply to all keys
        const keys = Object.keys(element).sort();
        for(let ki = 0; ki < keys.length; ++ki) {
          const key = keys[ki];
          if(key !== '@id') {
            element[key] = _labelBlankNodes(issuer, element[key]);
          }
        }
      }

      return element;
    }

    /*
     * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.
     */

    const RDF = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#';
    const XSD = 'http://www.w3.org/2001/XMLSchema#';

    var constants = {
      // TODO: Deprecated and will be removed later. Use LINK_HEADER_CONTEXT.
      LINK_HEADER_REL: 'http://www.w3.org/ns/json-ld#context',

      LINK_HEADER_CONTEXT: 'http://www.w3.org/ns/json-ld#context',

      RDF,
      RDF_LIST: RDF + 'List',
      RDF_FIRST: RDF + 'first',
      RDF_REST: RDF + 'rest',
      RDF_NIL: RDF + 'nil',
      RDF_TYPE: RDF + 'type',
      RDF_PLAIN_LITERAL: RDF + 'PlainLiteral',
      RDF_XML_LITERAL: RDF + 'XMLLiteral',
      RDF_JSON_LITERAL: RDF + 'JSON',
      RDF_OBJECT: RDF + 'object',
      RDF_LANGSTRING: RDF + 'langString',

      XSD,
      XSD_BOOLEAN: XSD + 'boolean',
      XSD_DOUBLE: XSD + 'double',
      XSD_INTEGER: XSD + 'integer',
      XSD_STRING: XSD + 'string',
    };

    /*
     * Copyright (c) 2017-2019 Digital Bazaar, Inc. All rights reserved.
     */

    var RequestQueue_1 = class RequestQueue {
      /**
       * Creates a simple queue for requesting documents.
       */
      constructor() {
        this._requests = {};
      }

      wrapLoader(loader) {
        const self = this;
        self._loader = loader;
        return function(/* url */) {
          return self.add.apply(self, arguments);
        };
      }

      async add(url) {
        let promise = this._requests[url];
        if(promise) {
          // URL already queued, wait for it to load
          return Promise.resolve(promise);
        }

        // queue URL and load it
        promise = this._requests[url] = this._loader(url);

        try {
          return await promise;
        } finally {
          delete this._requests[url];
        }
      }
    };

    /*
     * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.
     */



    const api$9 = {};
    var url = api$9;

    // define URL parser
    // parseUri 1.2.2
    // (c) Steven Levithan <stevenlevithan.com>
    // MIT License
    // with local jsonld.js modifications
    api$9.parsers = {
      simple: {
        // RFC 3986 basic parts
        keys: [
          'href', 'scheme', 'authority', 'path', 'query', 'fragment'
        ],
        /* eslint-disable-next-line max-len */
        regex: /^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/
      },
      full: {
        keys: [
          'href', 'protocol', 'scheme', 'authority', 'auth', 'user', 'password',
          'hostname', 'port', 'path', 'directory', 'file', 'query', 'fragment'
        ],
        /* eslint-disable-next-line max-len */
        regex: /^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/
      }
    };
    api$9.parse = (str, parser) => {
      const parsed = {};
      const o = api$9.parsers[parser || 'full'];
      const m = o.regex.exec(str);
      let i = o.keys.length;
      while(i--) {
        parsed[o.keys[i]] = (m[i] === undefined) ? null : m[i];
      }

      // remove default ports in found in URLs
      if((parsed.scheme === 'https' && parsed.port === '443') ||
        (parsed.scheme === 'http' && parsed.port === '80')) {
        parsed.href = parsed.href.replace(':' + parsed.port, '');
        parsed.authority = parsed.authority.replace(':' + parsed.port, '');
        parsed.port = null;
      }

      parsed.normalizedPath = api$9.removeDotSegments(parsed.path);
      return parsed;
    };

    /**
     * Prepends a base IRI to the given relative IRI.
     *
     * @param base the base IRI.
     * @param iri the relative IRI.
     *
     * @return the absolute IRI.
     */
    api$9.prependBase = (base, iri) => {
      // skip IRI processing
      if(base === null) {
        return iri;
      }
      // already an absolute IRI
      if(api$9.isAbsolute(iri)) {
        return iri;
      }

      // parse base if it is a string
      if(!base || types.isString(base)) {
        base = api$9.parse(base || '');
      }

      // parse given IRI
      const rel = api$9.parse(iri);

      // per RFC3986 5.2.2
      const transform = {
        protocol: base.protocol || ''
      };

      if(rel.authority !== null) {
        transform.authority = rel.authority;
        transform.path = rel.path;
        transform.query = rel.query;
      } else {
        transform.authority = base.authority;

        if(rel.path === '') {
          transform.path = base.path;
          if(rel.query !== null) {
            transform.query = rel.query;
          } else {
            transform.query = base.query;
          }
        } else {
          if(rel.path.indexOf('/') === 0) {
            // IRI represents an absolute path
            transform.path = rel.path;
          } else {
            // merge paths
            let path = base.path;

            // append relative path to the end of the last directory from base
            path = path.substr(0, path.lastIndexOf('/') + 1);
            if((path.length > 0 || base.authority) && path.substr(-1) !== '/') {
              path += '/';
            }
            path += rel.path;

            transform.path = path;
          }
          transform.query = rel.query;
        }
      }

      if(rel.path !== '') {
        // remove slashes and dots in path
        transform.path = api$9.removeDotSegments(transform.path);
      }

      // construct URL
      let rval = transform.protocol;
      if(transform.authority !== null) {
        rval += '//' + transform.authority;
      }
      rval += transform.path;
      if(transform.query !== null) {
        rval += '?' + transform.query;
      }
      if(rel.fragment !== null) {
        rval += '#' + rel.fragment;
      }

      // handle empty base
      if(rval === '') {
        rval = './';
      }

      return rval;
    };

    /**
     * Removes a base IRI from the given absolute IRI.
     *
     * @param base the base IRI.
     * @param iri the absolute IRI.
     *
     * @return the relative IRI if relative to base, otherwise the absolute IRI.
     */
    api$9.removeBase = (base, iri) => {
      // skip IRI processing
      if(base === null) {
        return iri;
      }

      if(!base || types.isString(base)) {
        base = api$9.parse(base || '');
      }

      // establish base root
      let root = '';
      if(base.href !== '') {
        root += (base.protocol || '') + '//' + (base.authority || '');
      } else if(iri.indexOf('//')) {
        // support network-path reference with empty base
        root += '//';
      }

      // IRI not relative to base
      if(iri.indexOf(root) !== 0) {
        return iri;
      }

      // remove root from IRI and parse remainder
      const rel = api$9.parse(iri.substr(root.length));

      // remove path segments that match (do not remove last segment unless there
      // is a hash or query)
      const baseSegments = base.normalizedPath.split('/');
      const iriSegments = rel.normalizedPath.split('/');
      const last = (rel.fragment || rel.query) ? 0 : 1;
      while(baseSegments.length > 0 && iriSegments.length > last) {
        if(baseSegments[0] !== iriSegments[0]) {
          break;
        }
        baseSegments.shift();
        iriSegments.shift();
      }

      // use '../' for each non-matching base segment
      let rval = '';
      if(baseSegments.length > 0) {
        // don't count the last segment (if it ends with '/' last path doesn't
        // count and if it doesn't end with '/' it isn't a path)
        baseSegments.pop();
        for(let i = 0; i < baseSegments.length; ++i) {
          rval += '../';
        }
      }

      // prepend remaining segments
      rval += iriSegments.join('/');

      // add query and hash
      if(rel.query !== null) {
        rval += '?' + rel.query;
      }
      if(rel.fragment !== null) {
        rval += '#' + rel.fragment;
      }

      // handle empty base
      if(rval === '') {
        rval = './';
      }

      return rval;
    };

    /**
     * Removes dot segments from a URL path.
     *
     * @param path the path to remove dot segments from.
     */
    api$9.removeDotSegments = path => {
      // RFC 3986 5.2.4 (reworked)

      // empty path shortcut
      if(path.length === 0) {
        return '';
      }

      const input = path.split('/');
      const output = [];

      while(input.length > 0) {
        const next = input.shift();
        const done = input.length === 0;

        if(next === '.') {
          if(done) {
            // ensure output has trailing /
            output.push('');
          }
          continue;
        }

        if(next === '..') {
          output.pop();
          if(done) {
            // ensure output has trailing /
            output.push('');
          }
          continue;
        }

        output.push(next);
      }

      // if path was absolute, ensure output has leading /
      if(path[0] === '/' && output.length > 0 && output[0] !== '') {
        output.unshift('');
      }
      if(output.length === 1 && output[0] === '') {
        return '/';
      }

      return output.join('/');
    };

    // TODO: time better isAbsolute/isRelative checks using full regexes:
    // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html

    // regex to check for absolute IRI (starting scheme and ':') or blank node IRI
    const isAbsoluteRegex = /^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;

    /**
     * Returns true if the given value is an absolute IRI or blank node IRI, false
     * if not.
     * Note: This weak check only checks for a correct starting scheme.
     *
     * @param v the value to check.
     *
     * @return true if the value is an absolute IRI, false if not.
     */
    api$9.isAbsolute = v => types.isString(v) && isAbsoluteRegex.test(v);

    /**
     * Returns true if the given value is a relative IRI, false if not.
     * Note: this is a weak check.
     *
     * @param v the value to check.
     *
     * @return true if the value is a relative IRI, false if not.
     */
    api$9.isRelative = v => types.isString(v);

    /*
     * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.
     */

    const {parseLinkHeader, buildHeaders} = util;
    const {LINK_HEADER_CONTEXT} = constants;


    const {prependBase: prependBase$2} = url;

    const REGEX_LINK_HEADER = /(^|(\r\n))link:/i;

    /**
     * Creates a built-in XMLHttpRequest document loader.
     *
     * @param options the options to use:
     *          secure: require all URLs to use HTTPS.
     *          headers: an object (map) of headers which will be passed as request
     *            headers for the requested document. Accept is not allowed.
     *          [xhr]: the XMLHttpRequest API to use.
     *
     * @return the XMLHttpRequest document loader.
     */
    var xhr = ({
      secure,
      headers = {},
      xhr
    } = {headers: {}}) => {
      headers = buildHeaders(headers);
      const queue = new RequestQueue_1();
      return queue.wrapLoader(loader);

      async function loader(url) {
        if(url.indexOf('http:') !== 0 && url.indexOf('https:') !== 0) {
          throw new JsonLdError_1(
            'URL could not be dereferenced; only "http" and "https" URLs are ' +
            'supported.',
            'jsonld.InvalidUrl', {code: 'loading document failed', url});
        }
        if(secure && url.indexOf('https') !== 0) {
          throw new JsonLdError_1(
            'URL could not be dereferenced; secure mode is enabled and ' +
            'the URL\'s scheme is not "https".',
            'jsonld.InvalidUrl', {code: 'loading document failed', url});
        }

        let req;
        try {
          req = await _get(xhr, url, headers);
        } catch(e) {
          throw new JsonLdError_1(
            'URL could not be dereferenced, an error occurred.',
            'jsonld.LoadDocumentError',
            {code: 'loading document failed', url, cause: e});
        }

        if(req.status >= 400) {
          throw new JsonLdError_1(
            'URL could not be dereferenced: ' + req.statusText,
            'jsonld.LoadDocumentError', {
              code: 'loading document failed',
              url,
              httpStatusCode: req.status
            });
        }

        let doc = {contextUrl: null, documentUrl: url, document: req.response};
        let alternate = null;

        // handle Link Header (avoid unsafe header warning by existence testing)
        const contentType = req.getResponseHeader('Content-Type');
        let linkHeader;
        if(REGEX_LINK_HEADER.test(req.getAllResponseHeaders())) {
          linkHeader = req.getResponseHeader('Link');
        }
        if(linkHeader && contentType !== 'application/ld+json') {
          // only 1 related link header permitted
          const linkHeaders = parseLinkHeader(linkHeader);
          const linkedContext = linkHeaders[LINK_HEADER_CONTEXT];
          if(Array.isArray(linkedContext)) {
            throw new JsonLdError_1(
              'URL could not be dereferenced, it has more than one ' +
              'associated HTTP Link Header.',
              'jsonld.InvalidUrl',
              {code: 'multiple context link headers', url});
          }
          if(linkedContext) {
            doc.contextUrl = linkedContext.target;
          }

          // "alternate" link header is a redirect
          alternate = linkHeaders['alternate'];
          if(alternate &&
            alternate.type == 'application/ld+json' &&
            !(contentType || '').match(/^application\/(\w*\+)?json$/)) {
            doc = await loader(prependBase$2(url, alternate.target));
          }
        }

        return doc;
      }
    };

    function _get(xhr, url, headers) {
      xhr = xhr || XMLHttpRequest;
      const req = new xhr();
      return new Promise((resolve, reject) => {
        req.onload = () => resolve(req);
        req.onerror = err => reject(err);
        req.open('GET', url, true);
        for(const k in headers) {
          req.setRequestHeader(k, headers[k]);
        }
        req.send();
      });
    }

    /*
     * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
     */



    const api$8 = {};
    var platformBrowser = api$8;

    /**
     * Setup browser document loaders.
     *
     * @param jsonld the jsonld api.
     */
    api$8.setupDocumentLoaders = function(jsonld) {
      if(typeof XMLHttpRequest !== 'undefined') {
        jsonld.documentLoaders.xhr = xhr;
        // use xhr document loader by default
        jsonld.useDocumentLoader('xhr');
      }
    };

    /**
     * Setup browser globals.
     *
     * @param jsonld the jsonld api.
     */
    api$8.setupGlobals = function(jsonld) {
      // setup browser global JsonLdProcessor
      if(typeof globalThis.JsonLdProcessor === 'undefined') {
        Object.defineProperty(globalThis, 'JsonLdProcessor', {
          writable: true,
          enumerable: false,
          configurable: true,
          value: jsonld.JsonLdProcessor
        });
      }
    };

    var iterator = function (Yallist) {
      Yallist.prototype[Symbol.iterator] = function* () {
        for (let walker = this.head; walker; walker = walker.next) {
          yield walker.value;
        }
      };
    };

    var yallist = Yallist;

    Yallist.Node = Node;
    Yallist.create = Yallist;

    function Yallist (list) {
      var self = this;
      if (!(self instanceof Yallist)) {
        self = new Yallist();
      }

      self.tail = null;
      self.head = null;
      self.length = 0;

      if (list && typeof list.forEach === 'function') {
        list.forEach(function (item) {
          self.push(item);
        });
      } else if (arguments.length > 0) {
        for (var i = 0, l = arguments.length; i < l; i++) {
          self.push(arguments[i]);
        }
      }

      return self
    }

    Yallist.prototype.removeNode = function (node) {
      if (node.list !== this) {
        throw new Error('removing node which does not belong to this list')
      }

      var next = node.next;
      var prev = node.prev;

      if (next) {
        next.prev = prev;
      }

      if (prev) {
        prev.next = next;
      }

      if (node === this.head) {
        this.head = next;
      }
      if (node === this.tail) {
        this.tail = prev;
      }

      node.list.length--;
      node.next = null;
      node.prev = null;
      node.list = null;

      return next
    };

    Yallist.prototype.unshiftNode = function (node) {
      if (node === this.head) {
        return
      }

      if (node.list) {
        node.list.removeNode(node);
      }

      var head = this.head;
      node.list = this;
      node.next = head;
      if (head) {
        head.prev = node;
      }

      this.head = node;
      if (!this.tail) {
        this.tail = node;
      }
      this.length++;
    };

    Yallist.prototype.pushNode = function (node) {
      if (node === this.tail) {
        return
      }

      if (node.list) {
        node.list.removeNode(node);
      }

      var tail = this.tail;
      node.list = this;
      node.prev = tail;
      if (tail) {
        tail.next = node;
      }

      this.tail = node;
      if (!this.head) {
        this.head = node;
      }
      this.length++;
    };

    Yallist.prototype.push = function () {
      for (var i = 0, l = arguments.length; i < l; i++) {
        push(this, arguments[i]);
      }
      return this.length
    };

    Yallist.prototype.unshift = function () {
      for (var i = 0, l = arguments.length; i < l; i++) {
        unshift(this, arguments[i]);
      }
      return this.length
    };

    Yallist.prototype.pop = function () {
      if (!this.tail) {
        return undefined
      }

      var res = this.tail.value;
      this.tail = this.tail.prev;
      if (this.tail) {
        this.tail.next = null;
      } else {
        this.head = null;
      }
      this.length--;
      return res
    };

    Yallist.prototype.shift = function () {
      if (!this.head) {
        return undefined
      }

      var res = this.head.value;
      this.head = this.head.next;
      if (this.head) {
        this.head.prev = null;
      } else {
        this.tail = null;
      }
      this.length--;
      return res
    };

    Yallist.prototype.forEach = function (fn, thisp) {
      thisp = thisp || this;
      for (var walker = this.head, i = 0; walker !== null; i++) {
        fn.call(thisp, walker.value, i, this);
        walker = walker.next;
      }
    };

    Yallist.prototype.forEachReverse = function (fn, thisp) {
      thisp = thisp || this;
      for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {
        fn.call(thisp, walker.value, i, this);
        walker = walker.prev;
      }
    };

    Yallist.prototype.get = function (n) {
      for (var i = 0, walker = this.head; walker !== null && i < n; i++) {
        // abort out of the list early if we hit a cycle
        walker = walker.next;
      }
      if (i === n && walker !== null) {
        return walker.value
      }
    };

    Yallist.prototype.getReverse = function (n) {
      for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {
        // abort out of the list early if we hit a cycle
        walker = walker.prev;
      }
      if (i === n && walker !== null) {
        return walker.value
      }
    };

    Yallist.prototype.map = function (fn, thisp) {
      thisp = thisp || this;
      var res = new Yallist();
      for (var walker = this.head; walker !== null;) {
        res.push(fn.call(thisp, walker.value, this));
        walker = walker.next;
      }
      return res
    };

    Yallist.prototype.mapReverse = function (fn, thisp) {
      thisp = thisp || this;
      var res = new Yallist();
      for (var walker = this.tail; walker !== null;) {
        res.push(fn.call(thisp, walker.value, this));
        walker = walker.prev;
      }
      return res
    };

    Yallist.prototype.reduce = function (fn, initial) {
      var acc;
      var walker = this.head;
      if (arguments.length > 1) {
        acc = initial;
      } else if (this.head) {
        walker = this.head.next;
        acc = this.head.value;
      } else {
        throw new TypeError('Reduce of empty list with no initial value')
      }

      for (var i = 0; walker !== null; i++) {
        acc = fn(acc, walker.value, i);
        walker = walker.next;
      }

      return acc
    };

    Yallist.prototype.reduceReverse = function (fn, initial) {
      var acc;
      var walker = this.tail;
      if (arguments.length > 1) {
        acc = initial;
      } else if (this.tail) {
        walker = this.tail.prev;
        acc = this.tail.value;
      } else {
        throw new TypeError('Reduce of empty list with no initial value')
      }

      for (var i = this.length - 1; walker !== null; i--) {
        acc = fn(acc, walker.value, i);
        walker = walker.prev;
      }

      return acc
    };

    Yallist.prototype.toArray = function () {
      var arr = new Array(this.length);
      for (var i = 0, walker = this.head; walker !== null; i++) {
        arr[i] = walker.value;
        walker = walker.next;
      }
      return arr
    };

    Yallist.prototype.toArrayReverse = function () {
      var arr = new Array(this.length);
      for (var i = 0, walker = this.tail; walker !== null; i++) {
        arr[i] = walker.value;
        walker = walker.prev;
      }
      return arr
    };

    Yallist.prototype.slice = function (from, to) {
      to = to || this.length;
      if (to < 0) {
        to += this.length;
      }
      from = from || 0;
      if (from < 0) {
        from += this.length;
      }
      var ret = new Yallist();
      if (to < from || to < 0) {
        return ret
      }
      if (from < 0) {
        from = 0;
      }
      if (to > this.length) {
        to = this.length;
      }
      for (var i = 0, walker = this.head; walker !== null && i < from; i++) {
        walker = walker.next;
      }
      for (; walker !== null && i < to; i++, walker = walker.next) {
        ret.push(walker.value);
      }
      return ret
    };

    Yallist.prototype.sliceReverse = function (from, to) {
      to = to || this.length;
      if (to < 0) {
        to += this.length;
      }
      from = from || 0;
      if (from < 0) {
        from += this.length;
      }
      var ret = new Yallist();
      if (to < from || to < 0) {
        return ret
      }
      if (from < 0) {
        from = 0;
      }
      if (to > this.length) {
        to = this.length;
      }
      for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {
        walker = walker.prev;
      }
      for (; walker !== null && i > from; i--, walker = walker.prev) {
        ret.push(walker.value);
      }
      return ret
    };

    Yallist.prototype.splice = function (start, deleteCount, ...nodes) {
      if (start > this.length) {
        start = this.length - 1;
      }
      if (start < 0) {
        start = this.length + start;
      }

      for (var i = 0, walker = this.head; walker !== null && i < start; i++) {
        walker = walker.next;
      }

      var ret = [];
      for (var i = 0; walker && i < deleteCount; i++) {
        ret.push(walker.value);
        walker = this.removeNode(walker);
      }
      if (walker === null) {
        walker = this.tail;
      }

      if (walker !== this.head && walker !== this.tail) {
        walker = walker.prev;
      }

      for (var i = 0; i < nodes.length; i++) {
        walker = insert(this, walker, nodes[i]);
      }
      return ret;
    };

    Yallist.prototype.reverse = function () {
      var head = this.head;
      var tail = this.tail;
      for (var walker = head; walker !== null; walker = walker.prev) {
        var p = walker.prev;
        walker.prev = walker.next;
        walker.next = p;
      }
      this.head = tail;
      this.tail = head;
      return this
    };

    function insert (self, node, value) {
      var inserted = node === self.head ?
        new Node(value, null, node, self) :
        new Node(value, node, node.next, self);

      if (inserted.next === null) {
        self.tail = inserted;
      }
      if (inserted.prev === null) {
        self.head = inserted;
      }

      self.length++;

      return inserted
    }

    function push (self, item) {
      self.tail = new Node(item, self.tail, null, self);
      if (!self.head) {
        self.head = self.tail;
      }
      self.length++;
    }

    function unshift (self, item) {
      self.head = new Node(item, null, self.head, self);
      if (!self.tail) {
        self.tail = self.head;
      }
      self.length++;
    }

    function Node (value, prev, next, list) {
      if (!(this instanceof Node)) {
        return new Node(value, prev, next, list)
      }

      this.list = list;
      this.value = value;

      if (prev) {
        prev.next = this;
        this.prev = prev;
      } else {
        this.prev = null;
      }

      if (next) {
        next.prev = this;
        this.next = next;
      } else {
        this.next = null;
      }
    }

    try {
      // add if support for Symbol.iterator is present
      iterator(Yallist);
    } catch (er) {}

    // A linked list to keep track of recently-used-ness


    const MAX = Symbol('max');
    const LENGTH = Symbol('length');
    const LENGTH_CALCULATOR = Symbol('lengthCalculator');
    const ALLOW_STALE = Symbol('allowStale');
    const MAX_AGE = Symbol('maxAge');
    const DISPOSE = Symbol('dispose');
    const NO_DISPOSE_ON_SET = Symbol('noDisposeOnSet');
    const LRU_LIST = Symbol('lruList');
    const CACHE = Symbol('cache');
    const UPDATE_AGE_ON_GET = Symbol('updateAgeOnGet');

    const naiveLength = () => 1;

    // lruList is a yallist where the head is the youngest
    // item, and the tail is the oldest.  the list contains the Hit
    // objects as the entries.
    // Each Hit object has a reference to its Yallist.Node.  This
    // never changes.
    //
    // cache is a Map (or PseudoMap) that matches the keys to
    // the Yallist.Node object.
    class LRUCache {
      constructor (options) {
        if (typeof options === 'number')
          options = { max: options };

        if (!options)
          options = {};

        if (options.max && (typeof options.max !== 'number' || options.max < 0))
          throw new TypeError('max must be a non-negative number')
        // Kind of weird to have a default max of Infinity, but oh well.
        this[MAX] = options.max || Infinity;

        const lc = options.length || naiveLength;
        this[LENGTH_CALCULATOR] = (typeof lc !== 'function') ? naiveLength : lc;
        this[ALLOW_STALE] = options.stale || false;
        if (options.maxAge && typeof options.maxAge !== 'number')
          throw new TypeError('maxAge must be a number')
        this[MAX_AGE] = options.maxAge || 0;
        this[DISPOSE] = options.dispose;
        this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false;
        this[UPDATE_AGE_ON_GET] = options.updateAgeOnGet || false;
        this.reset();
      }

      // resize the cache when the max changes.
      set max (mL) {
        if (typeof mL !== 'number' || mL < 0)
          throw new TypeError('max must be a non-negative number')

        this[MAX] = mL || Infinity;
        trim(this);
      }
      get max () {
        return this[MAX]
      }

      set allowStale (allowStale) {
        this[ALLOW_STALE] = !!allowStale;
      }
      get allowStale () {
        return this[ALLOW_STALE]
      }

      set maxAge (mA) {
        if (typeof mA !== 'number')
          throw new TypeError('maxAge must be a non-negative number')

        this[MAX_AGE] = mA;
        trim(this);
      }
      get maxAge () {
        return this[MAX_AGE]
      }

      // resize the cache when the lengthCalculator changes.
      set lengthCalculator (lC) {
        if (typeof lC !== 'function')
          lC = naiveLength;

        if (lC !== this[LENGTH_CALCULATOR]) {
          this[LENGTH_CALCULATOR] = lC;
          this[LENGTH] = 0;
          this[LRU_LIST].forEach(hit => {
            hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key);
            this[LENGTH] += hit.length;
          });
        }
        trim(this);
      }
      get lengthCalculator () { return this[LENGTH_CALCULATOR] }

      get length () { return this[LENGTH] }
      get itemCount () { return this[LRU_LIST].length }

      rforEach (fn, thisp) {
        thisp = thisp || this;
        for (let walker = this[LRU_LIST].tail; walker !== null;) {
          const prev = walker.prev;
          forEachStep(this, fn, walker, thisp);
          walker = prev;
        }
      }

      forEach (fn, thisp) {
        thisp = thisp || this;
        for (let walker = this[LRU_LIST].head; walker !== null;) {
          const next = walker.next;
          forEachStep(this, fn, walker, thisp);
          walker = next;
        }
      }

      keys () {
        return this[LRU_LIST].toArray().map(k => k.key)
      }

      values () {
        return this[LRU_LIST].toArray().map(k => k.value)
      }

      reset () {
        if (this[DISPOSE] &&
            this[LRU_LIST] &&
            this[LRU_LIST].length) {
          this[LRU_LIST].forEach(hit => this[DISPOSE](hit.key, hit.value));
        }

        this[CACHE] = new Map(); // hash of items by key
        this[LRU_LIST] = new yallist(); // list of items in order of use recency
        this[LENGTH] = 0; // length of items in the list
      }

      dump () {
        return this[LRU_LIST].map(hit =>
          isStale(this, hit) ? false : {
            k: hit.key,
            v: hit.value,
            e: hit.now + (hit.maxAge || 0)
          }).toArray().filter(h => h)
      }

      dumpLru () {
        return this[LRU_LIST]
      }

      set (key, value, maxAge) {
        maxAge = maxAge || this[MAX_AGE];

        if (maxAge && typeof maxAge !== 'number')
          throw new TypeError('maxAge must be a number')

        const now = maxAge ? Date.now() : 0;
        const len = this[LENGTH_CALCULATOR](value, key);

        if (this[CACHE].has(key)) {
          if (len > this[MAX]) {
            del(this, this[CACHE].get(key));
            return false
          }

          const node = this[CACHE].get(key);
          const item = node.value;

          // dispose of the old one before overwriting
          // split out into 2 ifs for better coverage tracking
          if (this[DISPOSE]) {
            if (!this[NO_DISPOSE_ON_SET])
              this[DISPOSE](key, item.value);
          }

          item.now = now;
          item.maxAge = maxAge;
          item.value = value;
          this[LENGTH] += len - item.length;
          item.length = len;
          this.get(key);
          trim(this);
          return true
        }

        const hit = new Entry(key, value, len, now, maxAge);

        // oversized objects fall out of cache automatically.
        if (hit.length > this[MAX]) {
          if (this[DISPOSE])
            this[DISPOSE](key, value);

          return false
        }

        this[LENGTH] += hit.length;
        this[LRU_LIST].unshift(hit);
        this[CACHE].set(key, this[LRU_LIST].head);
        trim(this);
        return true
      }

      has (key) {
        if (!this[CACHE].has(key)) return false
        const hit = this[CACHE].get(key).value;
        return !isStale(this, hit)
      }

      get (key) {
        return get(this, key, true)
      }

      peek (key) {
        return get(this, key, false)
      }

      pop () {
        const node = this[LRU_LIST].tail;
        if (!node)
          return null

        del(this, node);
        return node.value
      }

      del (key) {
        del(this, this[CACHE].get(key));
      }

      load (arr) {
        // reset the cache
        this.reset();

        const now = Date.now();
        // A previous serialized cache has the most recent items first
        for (let l = arr.length - 1; l >= 0; l--) {
          const hit = arr[l];
          const expiresAt = hit.e || 0;
          if (expiresAt === 0)
            // the item was created without expiration in a non aged cache
            this.set(hit.k, hit.v);
          else {
            const maxAge = expiresAt - now;
            // dont add already expired items
            if (maxAge > 0) {
              this.set(hit.k, hit.v, maxAge);
            }
          }
        }
      }

      prune () {
        this[CACHE].forEach((value, key) => get(this, key, false));
      }
    }

    const get = (self, key, doUse) => {
      const node = self[CACHE].get(key);
      if (node) {
        const hit = node.value;
        if (isStale(self, hit)) {
          del(self, node);
          if (!self[ALLOW_STALE])
            return undefined
        } else {
          if (doUse) {
            if (self[UPDATE_AGE_ON_GET])
              node.value.now = Date.now();
            self[LRU_LIST].unshiftNode(node);
          }
        }
        return hit.value
      }
    };

    const isStale = (self, hit) => {
      if (!hit || (!hit.maxAge && !self[MAX_AGE]))
        return false

      const diff = Date.now() - hit.now;
      return hit.maxAge ? diff > hit.maxAge
        : self[MAX_AGE] && (diff > self[MAX_AGE])
    };

    const trim = self => {
      if (self[LENGTH] > self[MAX]) {
        for (let walker = self[LRU_LIST].tail;
          self[LENGTH] > self[MAX] && walker !== null;) {
          // We know that we're about to delete this one, and also
          // what the next least recently used key will be, so just
          // go ahead and set it now.
          const prev = walker.prev;
          del(self, walker);
          walker = prev;
        }
      }
    };

    const del = (self, node) => {
      if (node) {
        const hit = node.value;
        if (self[DISPOSE])
          self[DISPOSE](hit.key, hit.value);

        self[LENGTH] -= hit.length;
        self[CACHE].delete(hit.key);
        self[LRU_LIST].removeNode(node);
      }
    };

    class Entry {
      constructor (key, value, length, now, maxAge) {
        this.key = key;
        this.value = value;
        this.length = length;
        this.now = now;
        this.maxAge = maxAge || 0;
      }
    }

    const forEachStep = (self, fn, node, thisp) => {
      let hit = node.value;
      if (isStale(self, hit)) {
        del(self, node);
        if (!self[ALLOW_STALE])
          hit = undefined;
      }
      if (hit)
        fn.call(thisp, hit.value, hit.key, self);
    };

    var lruCache = LRUCache;

    /*
     * Copyright (c) 2019 Digital Bazaar, Inc. All rights reserved.
     */



    const MAX_ACTIVE_CONTEXTS = 10;

    var ResolvedContext_1 = class ResolvedContext {
      /**
       * Creates a ResolvedContext.
       *
       * @param document the context document.
       */
      constructor({document}) {
        this.document = document;
        // TODO: enable customization of processed context cache
        // TODO: limit based on size of processed contexts vs. number of them
        this.cache = new lruCache({max: MAX_ACTIVE_CONTEXTS});
      }

      getProcessed(activeCtx) {
        return this.cache.get(activeCtx);
      }

      setProcessed(activeCtx, processedCtx) {
        this.cache.set(activeCtx, processedCtx);
      }
    };

    /*
     * Copyright (c) 2019 Digital Bazaar, Inc. All rights reserved.
     */

    const {
      isArray: _isArray$4,
      isObject: _isObject$4,
      isString: _isString$4,
    } = types;
    const {
      asArray: _asArray$3
    } = util;
    const {prependBase: prependBase$1} = url;



    const MAX_CONTEXT_URLS = 10;

    var ContextResolver_1 = class ContextResolver {
      /**
       * Creates a ContextResolver.
       *
       * @param sharedCache a shared LRU cache with `get` and `set` APIs.
       */
      constructor({sharedCache}) {
        this.perOpCache = new Map();
        this.sharedCache = sharedCache;
      }

      async resolve({
        activeCtx, context, documentLoader, base, cycles = new Set()
      }) {
        // process `@context`
        if(context && _isObject$4(context) && context['@context']) {
          context = context['@context'];
        }

        // context is one or more contexts
        context = _asArray$3(context);

        // resolve each context in the array
        const allResolved = [];
        for(const ctx of context) {
          if(_isString$4(ctx)) {
            // see if `ctx` has been resolved before...
            let resolved = this._get(ctx);
            if(!resolved) {
              // not resolved yet, resolve
              resolved = await this._resolveRemoteContext(
                {activeCtx, url: ctx, documentLoader, base, cycles});
            }

            // add to output and continue
            if(_isArray$4(resolved)) {
              allResolved.push(...resolved);
            } else {
              allResolved.push(resolved);
            }
            continue;
          }
          if(ctx === null) {
            // handle `null` context, nothing to cache
            allResolved.push(new ResolvedContext_1({document: null}));
            continue;
          }
          if(!_isObject$4(ctx)) {
            _throwInvalidLocalContext(context);
          }
          // context is an object, get/create `ResolvedContext` for it
          const key = JSON.stringify(ctx);
          let resolved = this._get(key);
          if(!resolved) {
            // create a new static `ResolvedContext` and cache it
            resolved = new ResolvedContext_1({document: ctx});
            this._cacheResolvedContext({key, resolved, tag: 'static'});
          }
          allResolved.push(resolved);
        }

        return allResolved;
      }

      _get(key) {
        // get key from per operation cache; no `tag` is used with this cache so
        // any retrieved context will always be the same during a single operation
        let resolved = this.perOpCache.get(key);
        if(!resolved) {
          // see if the shared cache has a `static` entry for this URL
          const tagMap = this.sharedCache.get(key);
          if(tagMap) {
            resolved = tagMap.get('static');
            if(resolved) {
              this.perOpCache.set(key, resolved);
            }
          }
        }
        return resolved;
      }

      _cacheResolvedContext({key, resolved, tag}) {
        this.perOpCache.set(key, resolved);
        if(tag !== undefined) {
          let tagMap = this.sharedCache.get(key);
          if(!tagMap) {
            tagMap = new Map();
            this.sharedCache.set(key, tagMap);
          }
          tagMap.set(tag, resolved);
        }
        return resolved;
      }

      async _resolveRemoteContext({activeCtx, url, documentLoader, base, cycles}) {
        // resolve relative URL and fetch context
        url = prependBase$1(base, url);
        const {context, remoteDoc} = await this._fetchContext(
          {activeCtx, url, documentLoader, cycles});

        // update base according to remote document and resolve any relative URLs
        base = remoteDoc.documentUrl || url;
        _resolveContextUrls({context, base});

        // resolve, cache, and return context
        const resolved = await this.resolve(
          {activeCtx, context, documentLoader, base, cycles});
        this._cacheResolvedContext({key: url, resolved, tag: remoteDoc.tag});
        return resolved;
      }

      async _fetchContext({activeCtx, url, documentLoader, cycles}) {
        // check for max context URLs fetched during a resolve operation
        if(cycles.size > MAX_CONTEXT_URLS) {
          throw new JsonLdError_1(
            'Maximum number of @context URLs exceeded.',
            'jsonld.ContextUrlError',
            {
              code: activeCtx.processingMode === 'json-ld-1.0' ?
                'loading remote context failed' :
                'context overflow',
              max: MAX_CONTEXT_URLS
            });
        }

        // check for context URL cycle
        // shortcut to avoid extra work that would eventually hit the max above
        if(cycles.has(url)) {
          throw new JsonLdError_1(
            'Cyclical @context URLs detected.',
            'jsonld.ContextUrlError',
            {
              code: activeCtx.processingMode === 'json-ld-1.0' ?
                'recursive context inclusion' :
                'context overflow',
              url
            });
        }

        // track cycles
        cycles.add(url);

        let context;
        let remoteDoc;

        try {
          remoteDoc = await documentLoader(url);
          context = remoteDoc.document || null;
          // parse string context as JSON
          if(_isString$4(context)) {
            context = JSON.parse(context);
          }
        } catch(e) {
          throw new JsonLdError_1(
            'Dereferencing a URL did not result in a valid JSON-LD object. ' +
            'Possible causes are an inaccessible URL perhaps due to ' +
            'a same-origin policy (ensure the server uses CORS if you are ' +
            'using client-side JavaScript), too many redirects, a ' +
            'non-JSON response, or more than one HTTP Link Header was ' +
            'provided for a remote context.',
            'jsonld.InvalidUrl',
            {code: 'loading remote context failed', url, cause: e});
        }

        // ensure ctx is an object
        if(!_isObject$4(context)) {
          throw new JsonLdError_1(
            'Dereferencing a URL did not result in a JSON object. The ' +
            'response was valid JSON, but it was not a JSON object.',
            'jsonld.InvalidUrl', {code: 'invalid remote context', url});
        }

        // use empty context if no @context key is present
        if(!('@context' in context)) {
          context = {'@context': {}};
        } else {
          context = {'@context': context['@context']};
        }

        // append @context URL to context if given
        if(remoteDoc.contextUrl) {
          if(!_isArray$4(context['@context'])) {
            context['@context'] = [context['@context']];
          }
          context['@context'].push(remoteDoc.contextUrl);
        }

        return {context, remoteDoc};
      }
    };

    function _throwInvalidLocalContext(ctx) {
      throw new JsonLdError_1(
        'Invalid JSON-LD syntax; @context must be an object.',
        'jsonld.SyntaxError', {
          code: 'invalid local context', context: ctx
        });
    }

    /**
     * Resolve all relative `@context` URLs in the given context by inline
     * replacing them with absolute URLs.
     *
     * @param context the context.
     * @param base the base IRI to use to resolve relative IRIs.
     */
    function _resolveContextUrls({context, base}) {
      if(!context) {
        return;
      }

      const ctx = context['@context'];

      if(_isString$4(ctx)) {
        context['@context'] = prependBase$1(base, ctx);
        return;
      }

      if(_isArray$4(ctx)) {
        for(let i = 0; i < ctx.length; ++i) {
          const element = ctx[i];
          if(_isString$4(element)) {
            ctx[i] = prependBase$1(base, element);
            continue;
          }
          if(_isObject$4(element)) {
            _resolveContextUrls({context: {'@context': element}, base});
          }
        }
        return;
      }

      if(!_isObject$4(ctx)) {
        // no @context URLs can be found in non-object
        return;
      }

      // ctx is an object, resolve any context URLs in terms
      for(const term in ctx) {
        _resolveContextUrls({context: ctx[term], base});
      }
    }

    /*
     * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.
     */

    // TODO: move `NQuads` to its own package
    var NQuads = rdfCanonize.NQuads;

    /*
     * Copyright (c) 2017-2019 Digital Bazaar, Inc. All rights reserved.
     */




    const {
      isArray: _isArray$3,
      isObject: _isObject$3,
      isString: _isString$3,
      isUndefined: _isUndefined$2
    } = types;

    const {
      isAbsolute: _isAbsoluteIri$2,
      isRelative: _isRelativeIri,
      prependBase
    } = url;

    const {
      asArray: _asArray$2,
      compareShortestLeast: _compareShortestLeast$1
    } = util;

    const INITIAL_CONTEXT_CACHE = new Map();
    const INITIAL_CONTEXT_CACHE_MAX_SIZE = 10000;
    const KEYWORD_PATTERN = /^@[a-zA-Z]+$/;

    const api$7 = {};
    var context = api$7;

    /**
     * Processes a local context and returns a new active context.
     *
     * @param activeCtx the current active context.
     * @param localCtx the local context to process.
     * @param options the context processing options.
     * @param propagate `true` if `false`, retains any previously defined term,
     *   which can be rolled back when the descending into a new node object.
     * @param overrideProtected `false` allows protected terms to be modified.
     *
     * @return a Promise that resolves to the new active context.
     */
    api$7.process = async ({
      activeCtx, localCtx, options,
      propagate = true,
      overrideProtected = false,
      cycles = new Set()
    }) => {
      // normalize local context to an array of @context objects
      if(_isObject$3(localCtx) && '@context' in localCtx &&
        _isArray$3(localCtx['@context'])) {
        localCtx = localCtx['@context'];
      }
      const ctxs = _asArray$2(localCtx);

      // no contexts in array, return current active context w/o changes
      if(ctxs.length === 0) {
        return activeCtx;
      }

      // resolve contexts
      const resolved = await options.contextResolver.resolve({
        activeCtx,
        context: localCtx,
        documentLoader: options.documentLoader,
        base: options.base
      });

      // override propagate if first resolved context has `@propagate`
      if(_isObject$3(resolved[0].document) &&
        typeof resolved[0].document['@propagate'] === 'boolean') {
        // retrieve early, error checking done later
        propagate = resolved[0].document['@propagate'];
      }

      // process each context in order, update active context
      // on each iteration to ensure proper caching
      let rval = activeCtx;

      // track the previous context
      // if not propagating, make sure rval has a previous context
      if(!propagate && !rval.previousContext) {
        // clone `rval` context before updating
        rval = rval.clone();
        rval.previousContext = activeCtx;
      }

      for(const resolvedContext of resolved) {
        let {document: ctx} = resolvedContext;

        // update active context to one computed from last iteration
        activeCtx = rval;

        // reset to initial context
        if(ctx === null) {
          // We can't nullify if there are protected terms and we're
          // not allowing overrides (e.g. processing a property term scoped context)
          if(!overrideProtected &&
            Object.keys(activeCtx.protected).length !== 0) {
            const protectedMode = (options && options.protectedMode) || 'error';
            if(protectedMode === 'error') {
              throw new JsonLdError_1(
                'Tried to nullify a context with protected terms outside of ' +
                'a term definition.',
                'jsonld.SyntaxError',
                {code: 'invalid context nullification'});
            } else if(protectedMode === 'warn') {
              // FIXME: remove logging and use a handler
              console.warn('WARNING: invalid context nullification');

              // get processed context from cache if available
              const processed = resolvedContext.getProcessed(activeCtx);
              if(processed) {
                rval = activeCtx = processed;
                continue;
              }

              const oldActiveCtx = activeCtx;
              // copy all protected term definitions to fresh initial context
              rval = activeCtx = api$7.getInitialContext(options).clone();
              for(const [term, _protected] of
                Object.entries(oldActiveCtx.protected)) {
                if(_protected) {
                  activeCtx.mappings[term] =
                    util.clone(oldActiveCtx.mappings[term]);
                }
              }
              activeCtx.protected = util.clone(oldActiveCtx.protected);

              // cache processed result
              resolvedContext.setProcessed(oldActiveCtx, rval);
              continue;
            }
            throw new JsonLdError_1(
              'Invalid protectedMode.',
              'jsonld.SyntaxError',
              {code: 'invalid protected mode', context: localCtx, protectedMode});
          }
          rval = activeCtx = api$7.getInitialContext(options).clone();
          continue;
        }

        // get processed context from cache if available
        const processed = resolvedContext.getProcessed(activeCtx);
        if(processed) {
          rval = activeCtx = processed;
          continue;
        }

        // dereference @context key if present
        if(_isObject$3(ctx) && '@context' in ctx) {
          ctx = ctx['@context'];
        }

        // context must be an object by now, all URLs retrieved before this call
        if(!_isObject$3(ctx)) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; @context must be an object.',
            'jsonld.SyntaxError', {code: 'invalid local context', context: ctx});
        }

        // TODO: there is likely a `previousContext` cloning optimization that
        // could be applied here (no need to copy it under certain conditions)

        // clone context before updating it
        rval = rval.clone();

        // define context mappings for keys in local context
        const defined = new Map();

        // handle @version
        if('@version' in ctx) {
          if(ctx['@version'] !== 1.1) {
            throw new JsonLdError_1(
              'Unsupported JSON-LD version: ' + ctx['@version'],
              'jsonld.UnsupportedVersion',
              {code: 'invalid @version value', context: ctx});
          }
          if(activeCtx.processingMode &&
            activeCtx.processingMode === 'json-ld-1.0') {
            throw new JsonLdError_1(
              '@version: ' + ctx['@version'] + ' not compatible with ' +
              activeCtx.processingMode,
              'jsonld.ProcessingModeConflict',
              {code: 'processing mode conflict', context: ctx});
          }
          rval.processingMode = 'json-ld-1.1';
          rval['@version'] = ctx['@version'];
          defined.set('@version', true);
        }

        // if not set explicitly, set processingMode to "json-ld-1.1"
        rval.processingMode =
          rval.processingMode || activeCtx.processingMode;

        // handle @base
        if('@base' in ctx) {
          let base = ctx['@base'];

          if(base === null || _isAbsoluteIri$2(base)) ; else if(_isRelativeIri(base)) {
            base = prependBase(rval['@base'], base);
          } else {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; the value of "@base" in a ' +
              '@context must be an absolute IRI, a relative IRI, or null.',
              'jsonld.SyntaxError', {code: 'invalid base IRI', context: ctx});
          }

          rval['@base'] = base;
          defined.set('@base', true);
        }

        // handle @vocab
        if('@vocab' in ctx) {
          const value = ctx['@vocab'];
          if(value === null) {
            delete rval['@vocab'];
          } else if(!_isString$3(value)) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; the value of "@vocab" in a ' +
              '@context must be a string or null.',
              'jsonld.SyntaxError', {code: 'invalid vocab mapping', context: ctx});
          } else if(!_isAbsoluteIri$2(value) && api$7.processingMode(rval, 1.0)) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; the value of "@vocab" in a ' +
              '@context must be an absolute IRI.',
              'jsonld.SyntaxError', {code: 'invalid vocab mapping', context: ctx});
          } else {
            rval['@vocab'] = _expandIri$3(rval, value, {vocab: true, base: true},
              undefined, undefined, options);
          }
          defined.set('@vocab', true);
        }

        // handle @language
        if('@language' in ctx) {
          const value = ctx['@language'];
          if(value === null) {
            delete rval['@language'];
          } else if(!_isString$3(value)) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; the value of "@language" in a ' +
              '@context must be a string or null.',
              'jsonld.SyntaxError',
              {code: 'invalid default language', context: ctx});
          } else {
            rval['@language'] = value.toLowerCase();
          }
          defined.set('@language', true);
        }

        // handle @direction
        if('@direction' in ctx) {
          const value = ctx['@direction'];
          if(activeCtx.processingMode === 'json-ld-1.0') {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; @direction not compatible with ' +
              activeCtx.processingMode,
              'jsonld.SyntaxError',
              {code: 'invalid context member', context: ctx});
          }
          if(value === null) {
            delete rval['@direction'];
          } else if(value !== 'ltr' && value !== 'rtl') {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; the value of "@direction" in a ' +
              '@context must be null, "ltr", or "rtl".',
              'jsonld.SyntaxError',
              {code: 'invalid base direction', context: ctx});
          } else {
            rval['@direction'] = value;
          }
          defined.set('@direction', true);
        }

        // handle @propagate
        // note: we've already extracted it, here we just do error checking
        if('@propagate' in ctx) {
          const value = ctx['@propagate'];
          if(activeCtx.processingMode === 'json-ld-1.0') {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; @propagate not compatible with ' +
              activeCtx.processingMode,
              'jsonld.SyntaxError',
              {code: 'invalid context entry', context: ctx});
          }
          if(typeof value !== 'boolean') {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; @propagate value must be a boolean.',
              'jsonld.SyntaxError',
              {code: 'invalid @propagate value', context: localCtx});
          }
          defined.set('@propagate', true);
        }

        // handle @import
        if('@import' in ctx) {
          const value = ctx['@import'];
          if(activeCtx.processingMode === 'json-ld-1.0') {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; @import not compatible with ' +
              activeCtx.processingMode,
              'jsonld.SyntaxError',
              {code: 'invalid context entry', context: ctx});
          }
          if(!_isString$3(value)) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; @import must be a string.',
              'jsonld.SyntaxError',
              {code: 'invalid @import value', context: localCtx});
          }

          // resolve contexts
          const resolvedImport = await options.contextResolver.resolve({
            activeCtx,
            context: value,
            documentLoader: options.documentLoader,
            base: options.base
          });
          if(resolvedImport.length !== 1) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; @import must reference a single context.',
              'jsonld.SyntaxError',
              {code: 'invalid remote context', context: localCtx});
          }
          const processedImport = resolvedImport[0].getProcessed(activeCtx);
          if(processedImport) {
            // Note: if the same context were used in this active context
            // as a reference context, then processed_input might not
            // be a dict.
            ctx = processedImport;
          } else {
            const importCtx = resolvedImport[0].document;
            if('@import' in importCtx) {
              throw new JsonLdError_1(
                'Invalid JSON-LD syntax: ' +
                'imported context must not include @import.',
                'jsonld.SyntaxError',
                {code: 'invalid context entry', context: localCtx});
            }

            // merge ctx into importCtx and replace rval with the result
            for(const key in importCtx) {
              if(!ctx.hasOwnProperty(key)) {
                ctx[key] = importCtx[key];
              }
            }

            // Note: this could potenially conflict if the import
            // were used in the same active context as a referenced
            // context and an import. In this case, we
            // could override the cached result, but seems unlikely.
            resolvedImport[0].setProcessed(activeCtx, ctx);
          }

          defined.set('@import', true);
        }

        // handle @protected; determine whether this sub-context is declaring
        // all its terms to be "protected" (exceptions can be made on a
        // per-definition basis)
        defined.set('@protected', ctx['@protected'] || false);

        // process all other keys
        for(const key in ctx) {
          api$7.createTermDefinition({
            activeCtx: rval,
            localCtx: ctx,
            term: key,
            defined,
            options,
            overrideProtected
          });

          if(_isObject$3(ctx[key]) && '@context' in ctx[key]) {
            const keyCtx = ctx[key]['@context'];
            let process = true;
            if(_isString$3(keyCtx)) {
              const url = prependBase(options.base, keyCtx);
              // track processed contexts to avoid scoped context recursion
              if(cycles.has(url)) {
                process = false;
              } else {
                cycles.add(url);
              }
            }
            // parse context to validate
            if(process) {
              try {
                await api$7.process({
                  activeCtx: rval.clone(),
                  localCtx: ctx[key]['@context'],
                  overrideProtected: true,
                  options,
                  cycles
                });
              } catch(e) {
                throw new JsonLdError_1(
                  'Invalid JSON-LD syntax; invalid scoped context.',
                  'jsonld.SyntaxError',
                  {
                    code: 'invalid scoped context',
                    context: ctx[key]['@context'],
                    term: key
                  });
              }
            }
          }
        }

        // cache processed result
        resolvedContext.setProcessed(activeCtx, rval);
      }

      return rval;
    };

    /**
     * Creates a term definition during context processing.
     *
     * @param activeCtx the current active context.
     * @param localCtx the local context being processed.
     * @param term the term in the local context to define the mapping for.
     * @param defined a map of defining/defined keys to detect cycles and prevent
     *          double definitions.
     * @param {Object} [options] - creation options.
     * @param {string} [options.protectedMode="error"] - "error" to throw error
     *   on `@protected` constraint violation, "warn" to allow violations and
     *   signal a warning.
     * @param overrideProtected `false` allows protected terms to be modified.
     */
    api$7.createTermDefinition = ({
      activeCtx,
      localCtx,
      term,
      defined,
      options,
      overrideProtected = false,
    }) => {
      if(defined.has(term)) {
        // term already defined
        if(defined.get(term)) {
          return;
        }
        // cycle detected
        throw new JsonLdError_1(
          'Cyclical context definition detected.',
          'jsonld.CyclicalContext',
          {code: 'cyclic IRI mapping', context: localCtx, term});
      }

      // now defining term
      defined.set(term, false);

      // get context term value
      let value;
      if(localCtx.hasOwnProperty(term)) {
        value = localCtx[term];
      }

      if(term === '@type' &&
         _isObject$3(value) &&
         (value['@container'] || '@set') === '@set' &&
         api$7.processingMode(activeCtx, 1.1)) {

        const validKeys = ['@container', '@id', '@protected'];
        const keys = Object.keys(value);
        if(keys.length === 0 || keys.some(k => !validKeys.includes(k))) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; keywords cannot be overridden.',
            'jsonld.SyntaxError',
            {code: 'keyword redefinition', context: localCtx, term});
        }
      } else if(api$7.isKeyword(term)) {
        throw new JsonLdError_1(
          'Invalid JSON-LD syntax; keywords cannot be overridden.',
          'jsonld.SyntaxError',
          {code: 'keyword redefinition', context: localCtx, term});
      } else if(term.match(KEYWORD_PATTERN)) {
        // FIXME: remove logging and use a handler
        console.warn('WARNING: terms beginning with "@" are reserved' +
          ' for future use and ignored', {term});
        return;
      } else if(term === '') {
        throw new JsonLdError_1(
          'Invalid JSON-LD syntax; a term cannot be an empty string.',
          'jsonld.SyntaxError',
          {code: 'invalid term definition', context: localCtx});
      }

      // keep reference to previous mapping for potential `@protected` check
      const previousMapping = activeCtx.mappings.get(term);

      // remove old mapping
      if(activeCtx.mappings.has(term)) {
        activeCtx.mappings.delete(term);
      }

      // convert short-hand value to object w/@id
      let simpleTerm = false;
      if(_isString$3(value) || value === null) {
        simpleTerm = true;
        value = {'@id': value};
      }

      if(!_isObject$3(value)) {
        throw new JsonLdError_1(
          'Invalid JSON-LD syntax; @context term values must be ' +
          'strings or objects.',
          'jsonld.SyntaxError',
          {code: 'invalid term definition', context: localCtx});
      }

      // create new mapping
      const mapping = {};
      activeCtx.mappings.set(term, mapping);
      mapping.reverse = false;

      // make sure term definition only has expected keywords
      const validKeys = ['@container', '@id', '@language', '@reverse', '@type'];

      // JSON-LD 1.1 support
      if(api$7.processingMode(activeCtx, 1.1)) {
        validKeys.push(
          '@context', '@direction', '@index', '@nest', '@prefix', '@protected');
      }

      for(const kw in value) {
        if(!validKeys.includes(kw)) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; a term definition must not contain ' + kw,
            'jsonld.SyntaxError',
            {code: 'invalid term definition', context: localCtx});
        }
      }

      // always compute whether term has a colon as an optimization for
      // _compactIri
      const colon = term.indexOf(':');
      mapping._termHasColon = (colon > 0);

      if('@reverse' in value) {
        if('@id' in value) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; a @reverse term definition must not ' +
            'contain @id.', 'jsonld.SyntaxError',
            {code: 'invalid reverse property', context: localCtx});
        }
        if('@nest' in value) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; a @reverse term definition must not ' +
            'contain @nest.', 'jsonld.SyntaxError',
            {code: 'invalid reverse property', context: localCtx});
        }
        const reverse = value['@reverse'];
        if(!_isString$3(reverse)) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; a @context @reverse value must be a string.',
            'jsonld.SyntaxError', {code: 'invalid IRI mapping', context: localCtx});
        }

        if(!api$7.isKeyword(reverse) && reverse.match(KEYWORD_PATTERN)) {
          // FIXME: remove logging and use a handler
          console.warn('WARNING: values beginning with "@" are reserved' +
            ' for future use and ignored', {reverse});
          if(previousMapping) {
            activeCtx.mappings.set(term, previousMapping);
          } else {
            activeCtx.mappings.delete(term);
          }
          return;
        }

        // expand and add @id mapping
        const id = _expandIri$3(
          activeCtx, reverse, {vocab: true, base: false}, localCtx, defined,
          options);
        if(!_isAbsoluteIri$2(id)) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; a @context @reverse value must be an ' +
            'absolute IRI or a blank node identifier.',
            'jsonld.SyntaxError', {code: 'invalid IRI mapping', context: localCtx});
        }

        mapping['@id'] = id;
        mapping.reverse = true;
      } else if('@id' in value) {
        let id = value['@id'];
        if(id && !_isString$3(id)) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; a @context @id value must be an array ' +
            'of strings or a string.',
            'jsonld.SyntaxError', {code: 'invalid IRI mapping', context: localCtx});
        }
        if(id === null) {
          // reserve a null term, which may be protected
          mapping['@id'] = null;
        } else if(!api$7.isKeyword(id) && id.match(KEYWORD_PATTERN)) {
          // FIXME: remove logging and use a handler
          console.warn('WARNING: values beginning with "@" are reserved' +
            ' for future use and ignored', {id});
          if(previousMapping) {
            activeCtx.mappings.set(term, previousMapping);
          } else {
            activeCtx.mappings.delete(term);
          }
          return;
        } else if(id !== term) {
          // expand and add @id mapping
          id = _expandIri$3(
            activeCtx, id, {vocab: true, base: false}, localCtx, defined, options);
          if(!_isAbsoluteIri$2(id) && !api$7.isKeyword(id)) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; a @context @id value must be an ' +
              'absolute IRI, a blank node identifier, or a keyword.',
              'jsonld.SyntaxError',
              {code: 'invalid IRI mapping', context: localCtx});
          }

          // if term has the form of an IRI it must map the same
          if(term.match(/(?::[^:])|\//)) {
            const termDefined = new Map(defined).set(term, true);
            const termIri = _expandIri$3(
              activeCtx, term, {vocab: true, base: false},
              localCtx, termDefined, options);
            if(termIri !== id) {
              throw new JsonLdError_1(
                'Invalid JSON-LD syntax; term in form of IRI must ' +
                'expand to definition.',
                'jsonld.SyntaxError',
                {code: 'invalid IRI mapping', context: localCtx});
            }
          }

          mapping['@id'] = id;
          // indicate if this term may be used as a compact IRI prefix
          mapping._prefix = (simpleTerm &&
            !mapping._termHasColon &&
            id.match(/[:\/\?#\[\]@]$/));
        }
      }

      if(!('@id' in mapping)) {
        // see if the term has a prefix
        if(mapping._termHasColon) {
          const prefix = term.substr(0, colon);
          if(localCtx.hasOwnProperty(prefix)) {
            // define parent prefix
            api$7.createTermDefinition({
              activeCtx, localCtx, term: prefix, defined, options
            });
          }

          if(activeCtx.mappings.has(prefix)) {
            // set @id based on prefix parent
            const suffix = term.substr(colon + 1);
            mapping['@id'] = activeCtx.mappings.get(prefix)['@id'] + suffix;
          } else {
            // term is an absolute IRI
            mapping['@id'] = term;
          }
        } else if(term === '@type') {
          // Special case, were we've previously determined that container is @set
          mapping['@id'] = term;
        } else {
          // non-IRIs *must* define @ids if @vocab is not available
          if(!('@vocab' in activeCtx)) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; @context terms must define an @id.',
              'jsonld.SyntaxError',
              {code: 'invalid IRI mapping', context: localCtx, term});
          }
          // prepend vocab to term
          mapping['@id'] = activeCtx['@vocab'] + term;
        }
      }

      // Handle term protection
      if(value['@protected'] === true ||
        (defined.get('@protected') === true && value['@protected'] !== false)) {
        activeCtx.protected[term] = true;
        mapping.protected = true;
      }

      // IRI mapping now defined
      defined.set(term, true);

      if('@type' in value) {
        let type = value['@type'];
        if(!_isString$3(type)) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; an @context @type value must be a string.',
            'jsonld.SyntaxError',
            {code: 'invalid type mapping', context: localCtx});
        }

        if((type === '@json' || type === '@none')) {
          if(api$7.processingMode(activeCtx, 1.0)) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; an @context @type value must not be ' +
              `"${type}" in JSON-LD 1.0 mode.`,
              'jsonld.SyntaxError',
              {code: 'invalid type mapping', context: localCtx});
          }
        } else if(type !== '@id' && type !== '@vocab') {
          // expand @type to full IRI
          type = _expandIri$3(
            activeCtx, type, {vocab: true, base: false}, localCtx, defined,
            options);
          if(!_isAbsoluteIri$2(type)) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; an @context @type value must be an ' +
              'absolute IRI.',
              'jsonld.SyntaxError',
              {code: 'invalid type mapping', context: localCtx});
          }
          if(type.indexOf('_:') === 0) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; an @context @type value must be an IRI, ' +
              'not a blank node identifier.',
              'jsonld.SyntaxError',
              {code: 'invalid type mapping', context: localCtx});
          }
        }

        // add @type to mapping
        mapping['@type'] = type;
      }

      if('@container' in value) {
        // normalize container to an array form
        const container = _isString$3(value['@container']) ?
          [value['@container']] : (value['@container'] || []);
        const validContainers = ['@list', '@set', '@index', '@language'];
        let isValid = true;
        const hasSet = container.includes('@set');

        // JSON-LD 1.1 support
        if(api$7.processingMode(activeCtx, 1.1)) {
          validContainers.push('@graph', '@id', '@type');

          // check container length
          if(container.includes('@list')) {
            if(container.length !== 1) {
              throw new JsonLdError_1(
                'Invalid JSON-LD syntax; @context @container with @list must ' +
                'have no other values',
                'jsonld.SyntaxError',
                {code: 'invalid container mapping', context: localCtx});
            }
          } else if(container.includes('@graph')) {
            if(container.some(key =>
              key !== '@graph' && key !== '@id' && key !== '@index' &&
              key !== '@set')) {
              throw new JsonLdError_1(
                'Invalid JSON-LD syntax; @context @container with @graph must ' +
                'have no other values other than @id, @index, and @set',
                'jsonld.SyntaxError',
                {code: 'invalid container mapping', context: localCtx});
            }
          } else {
            // otherwise, container may also include @set
            isValid &= container.length <= (hasSet ? 2 : 1);
          }

          if(container.includes('@type')) {
            // If mapping does not have an @type,
            // set it to @id
            mapping['@type'] = mapping['@type'] || '@id';

            // type mapping must be either @id or @vocab
            if(!['@id', '@vocab'].includes(mapping['@type'])) {
              throw new JsonLdError_1(
                'Invalid JSON-LD syntax; container: @type requires @type to be ' +
                '@id or @vocab.',
                'jsonld.SyntaxError',
                {code: 'invalid type mapping', context: localCtx});
            }
          }
        } else {
          // in JSON-LD 1.0, container must not be an array (it must be a string,
          // which is one of the validContainers)
          isValid &= !_isArray$3(value['@container']);

          // check container length
          isValid &= container.length <= 1;
        }

        // check against valid containers
        isValid &= container.every(c => validContainers.includes(c));

        // @set not allowed with @list
        isValid &= !(hasSet && container.includes('@list'));

        if(!isValid) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; @context @container value must be ' +
            'one of the following: ' + validContainers.join(', '),
            'jsonld.SyntaxError',
            {code: 'invalid container mapping', context: localCtx});
        }

        if(mapping.reverse &&
          !container.every(c => ['@index', '@set'].includes(c))) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; @context @container value for a @reverse ' +
            'type definition must be @index or @set.', 'jsonld.SyntaxError',
            {code: 'invalid reverse property', context: localCtx});
        }

        // add @container to mapping
        mapping['@container'] = container;
      }

      // property indexing
      if('@index' in value) {
        if(!('@container' in value) || !mapping['@container'].includes('@index')) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; @index without @index in @container: ' +
            `"${value['@index']}" on term "${term}".`, 'jsonld.SyntaxError',
            {code: 'invalid term definition', context: localCtx});
        }
        if(!_isString$3(value['@index']) || value['@index'].indexOf('@') === 0) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; @index must expand to an IRI: ' +
            `"${value['@index']}" on term "${term}".`, 'jsonld.SyntaxError',
            {code: 'invalid term definition', context: localCtx});
        }
        mapping['@index'] = value['@index'];
      }

      // scoped contexts
      if('@context' in value) {
        mapping['@context'] = value['@context'];
      }

      if('@language' in value && !('@type' in value)) {
        let language = value['@language'];
        if(language !== null && !_isString$3(language)) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; @context @language value must be ' +
            'a string or null.', 'jsonld.SyntaxError',
            {code: 'invalid language mapping', context: localCtx});
        }

        // add @language to mapping
        if(language !== null) {
          language = language.toLowerCase();
        }
        mapping['@language'] = language;
      }

      // term may be used as a prefix
      if('@prefix' in value) {
        if(term.match(/:|\//)) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; @context @prefix used on a compact IRI term',
            'jsonld.SyntaxError',
            {code: 'invalid term definition', context: localCtx});
        }
        if(api$7.isKeyword(mapping['@id'])) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; keywords may not be used as prefixes',
            'jsonld.SyntaxError',
            {code: 'invalid term definition', context: localCtx});
        }
        if(typeof value['@prefix'] === 'boolean') {
          mapping._prefix = value['@prefix'] === true;
        } else {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; @context value for @prefix must be boolean',
            'jsonld.SyntaxError',
            {code: 'invalid @prefix value', context: localCtx});
        }
      }

      if('@direction' in value) {
        const direction = value['@direction'];
        if(direction !== null && direction !== 'ltr' && direction !== 'rtl') {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; @direction value must be ' +
            'null, "ltr", or "rtl".',
            'jsonld.SyntaxError',
            {code: 'invalid base direction', context: localCtx});
        }
        mapping['@direction'] = direction;
      }

      if('@nest' in value) {
        const nest = value['@nest'];
        if(!_isString$3(nest) || (nest !== '@nest' && nest.indexOf('@') === 0)) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; @context @nest value must be ' +
            'a string which is not a keyword other than @nest.',
            'jsonld.SyntaxError',
            {code: 'invalid @nest value', context: localCtx});
        }
        mapping['@nest'] = nest;
      }

      // disallow aliasing @context and @preserve
      const id = mapping['@id'];
      if(id === '@context' || id === '@preserve') {
        throw new JsonLdError_1(
          'Invalid JSON-LD syntax; @context and @preserve cannot be aliased.',
          'jsonld.SyntaxError', {code: 'invalid keyword alias', context: localCtx});
      }

      // Check for overriding protected terms
      if(previousMapping && previousMapping.protected && !overrideProtected) {
        // force new term to continue to be protected and see if the mappings would
        // be equal
        activeCtx.protected[term] = true;
        mapping.protected = true;
        if(!_deepCompare(previousMapping, mapping)) {
          const protectedMode = (options && options.protectedMode) || 'error';
          if(protectedMode === 'error') {
            throw new JsonLdError_1(
              `Invalid JSON-LD syntax; tried to redefine "${term}" which is a ` +
              'protected term.',
              'jsonld.SyntaxError',
              {code: 'protected term redefinition', context: localCtx, term});
          } else if(protectedMode === 'warn') {
            // FIXME: remove logging and use a handler
            console.warn('WARNING: protected term redefinition', {term});
            return;
          }
          throw new JsonLdError_1(
            'Invalid protectedMode.',
            'jsonld.SyntaxError',
            {code: 'invalid protected mode', context: localCtx, term,
              protectedMode});
        }
      }
    };

    /**
     * Expands a string to a full IRI. The string may be a term, a prefix, a
     * relative IRI, or an absolute IRI. The associated absolute IRI will be
     * returned.
     *
     * @param activeCtx the current active context.
     * @param value the string to expand.
     * @param relativeTo options for how to resolve relative IRIs:
     *          base: true to resolve against the base IRI, false not to.
     *          vocab: true to concatenate after @vocab, false not to.
     * @param {Object} [options] - processing options.
     *
     * @return the expanded value.
     */
    api$7.expandIri = (activeCtx, value, relativeTo, options) => {
      return _expandIri$3(activeCtx, value, relativeTo, undefined, undefined,
        options);
    };

    /**
     * Expands a string to a full IRI. The string may be a term, a prefix, a
     * relative IRI, or an absolute IRI. The associated absolute IRI will be
     * returned.
     *
     * @param activeCtx the current active context.
     * @param value the string to expand.
     * @param relativeTo options for how to resolve relative IRIs:
     *          base: true to resolve against the base IRI, false not to.
     *          vocab: true to concatenate after @vocab, false not to.
     * @param localCtx the local context being processed (only given if called
     *          during context processing).
     * @param defined a map for tracking cycles in context definitions (only given
     *          if called during context processing).
     * @param {Object} [options] - processing options.
     *
     * @return the expanded value.
     */
    function _expandIri$3(activeCtx, value, relativeTo, localCtx, defined, options) {
      // already expanded
      if(value === null || !_isString$3(value) || api$7.isKeyword(value)) {
        return value;
      }

      // ignore non-keyword things that look like a keyword
      if(value.match(KEYWORD_PATTERN)) {
        return null;
      }

      // define term dependency if not defined
      if(localCtx && localCtx.hasOwnProperty(value) &&
        defined.get(value) !== true) {
        api$7.createTermDefinition({
          activeCtx, localCtx, term: value, defined, options
        });
      }

      relativeTo = relativeTo || {};
      if(relativeTo.vocab) {
        const mapping = activeCtx.mappings.get(value);

        // value is explicitly ignored with a null mapping
        if(mapping === null) {
          return null;
        }

        if(_isObject$3(mapping) && '@id' in mapping) {
          // value is a term
          return mapping['@id'];
        }
      }

      // split value into prefix:suffix
      const colon = value.indexOf(':');
      if(colon > 0) {
        const prefix = value.substr(0, colon);
        const suffix = value.substr(colon + 1);

        // do not expand blank nodes (prefix of '_') or already-absolute
        // IRIs (suffix of '//')
        if(prefix === '_' || suffix.indexOf('//') === 0) {
          return value;
        }

        // prefix dependency not defined, define it
        if(localCtx && localCtx.hasOwnProperty(prefix)) {
          api$7.createTermDefinition({
            activeCtx, localCtx, term: prefix, defined, options
          });
        }

        // use mapping if prefix is defined
        const mapping = activeCtx.mappings.get(prefix);
        if(mapping && mapping._prefix) {
          return mapping['@id'] + suffix;
        }

        // already absolute IRI
        if(_isAbsoluteIri$2(value)) {
          return value;
        }
      }

      // prepend vocab
      if(relativeTo.vocab && '@vocab' in activeCtx) {
        return activeCtx['@vocab'] + value;
      }

      // prepend base
      if(relativeTo.base && '@base' in activeCtx) {
        if(activeCtx['@base']) {
          // The null case preserves value as potentially relative
          return prependBase(prependBase(options.base, activeCtx['@base']), value);
        }
      } else if(relativeTo.base) {
        return prependBase(options.base, value);
      }

      return value;
    }

    /**
     * Gets the initial context.
     *
     * @param options the options to use:
     *          [base] the document base IRI.
     *
     * @return the initial context.
     */
    api$7.getInitialContext = options => {
      const key = JSON.stringify({processingMode: options.processingMode});
      const cached = INITIAL_CONTEXT_CACHE.get(key);
      if(cached) {
        return cached;
      }

      const initialContext = {
        processingMode: options.processingMode,
        mappings: new Map(),
        inverse: null,
        getInverse: _createInverseContext,
        clone: _cloneActiveContext,
        revertToPreviousContext: _revertToPreviousContext,
        protected: {}
      };
      // TODO: consider using LRU cache instead
      if(INITIAL_CONTEXT_CACHE.size === INITIAL_CONTEXT_CACHE_MAX_SIZE) {
        // clear whole cache -- assumes scenario where the cache fills means
        // the cache isn't being used very efficiently anyway
        INITIAL_CONTEXT_CACHE.clear();
      }
      INITIAL_CONTEXT_CACHE.set(key, initialContext);
      return initialContext;

      /**
       * Generates an inverse context for use in the compaction algorithm, if
       * not already generated for the given active context.
       *
       * @return the inverse context.
       */
      function _createInverseContext() {
        const activeCtx = this;

        // lazily create inverse
        if(activeCtx.inverse) {
          return activeCtx.inverse;
        }
        const inverse = activeCtx.inverse = {};

        // variables for building fast CURIE map
        const fastCurieMap = activeCtx.fastCurieMap = {};
        const irisToTerms = {};

        // handle default language
        const defaultLanguage = (activeCtx['@language'] || '@none').toLowerCase();

        // handle default direction
        const defaultDirection = activeCtx['@direction'];

        // create term selections for each mapping in the context, ordered by
        // shortest and then lexicographically least
        const mappings = activeCtx.mappings;
        const terms = [...mappings.keys()].sort(_compareShortestLeast$1);
        for(const term of terms) {
          const mapping = mappings.get(term);
          if(mapping === null) {
            continue;
          }

          let container = mapping['@container'] || '@none';
          container = [].concat(container).sort().join('');

          if(mapping['@id'] === null) {
            continue;
          }
          // iterate over every IRI in the mapping
          const ids = _asArray$2(mapping['@id']);
          for(const iri of ids) {
            let entry = inverse[iri];
            const isKeyword = api$7.isKeyword(iri);

            if(!entry) {
              // initialize entry
              inverse[iri] = entry = {};

              if(!isKeyword && !mapping._termHasColon) {
                // init IRI to term map and fast CURIE prefixes
                irisToTerms[iri] = [term];
                const fastCurieEntry = {iri, terms: irisToTerms[iri]};
                if(iri[0] in fastCurieMap) {
                  fastCurieMap[iri[0]].push(fastCurieEntry);
                } else {
                  fastCurieMap[iri[0]] = [fastCurieEntry];
                }
              }
            } else if(!isKeyword && !mapping._termHasColon) {
              // add IRI to term match
              irisToTerms[iri].push(term);
            }

            // add new entry
            if(!entry[container]) {
              entry[container] = {
                '@language': {},
                '@type': {},
                '@any': {}
              };
            }
            entry = entry[container];
            _addPreferredTerm(term, entry['@any'], '@none');

            if(mapping.reverse) {
              // term is preferred for values using @reverse
              _addPreferredTerm(term, entry['@type'], '@reverse');
            } else if(mapping['@type'] === '@none') {
              _addPreferredTerm(term, entry['@any'], '@none');
              _addPreferredTerm(term, entry['@language'], '@none');
              _addPreferredTerm(term, entry['@type'], '@none');
            } else if('@type' in mapping) {
              // term is preferred for values using specific type
              _addPreferredTerm(term, entry['@type'], mapping['@type']);
            } else if('@language' in mapping && '@direction' in mapping) {
              // term is preferred for values using specific language and direction
              const language = mapping['@language'];
              const direction = mapping['@direction'];
              if(language && direction) {
                _addPreferredTerm(term, entry['@language'],
                  `${language}_${direction}`.toLowerCase());
              } else if(language) {
                _addPreferredTerm(term, entry['@language'], language.toLowerCase());
              } else if(direction) {
                _addPreferredTerm(term, entry['@language'], `_${direction}`);
              } else {
                _addPreferredTerm(term, entry['@language'], '@null');
              }
            } else if('@language' in mapping) {
              _addPreferredTerm(term, entry['@language'],
                (mapping['@language'] || '@null').toLowerCase());
            } else if('@direction' in mapping) {
              if(mapping['@direction']) {
                _addPreferredTerm(term, entry['@language'],
                  `_${mapping['@direction']}`);
              } else {
                _addPreferredTerm(term, entry['@language'], '@none');
              }
            } else if(defaultDirection) {
              _addPreferredTerm(term, entry['@language'], `_${defaultDirection}`);
              _addPreferredTerm(term, entry['@language'], '@none');
              _addPreferredTerm(term, entry['@type'], '@none');
            } else {
              // add entries for no type and no language
              _addPreferredTerm(term, entry['@language'], defaultLanguage);
              _addPreferredTerm(term, entry['@language'], '@none');
              _addPreferredTerm(term, entry['@type'], '@none');
            }
          }
        }

        // build fast CURIE map
        for(const key in fastCurieMap) {
          _buildIriMap(fastCurieMap, key, 1);
        }

        return inverse;
      }

      /**
       * Runs a recursive algorithm to build a lookup map for quickly finding
       * potential CURIEs.
       *
       * @param iriMap the map to build.
       * @param key the current key in the map to work on.
       * @param idx the index into the IRI to compare.
       */
      function _buildIriMap(iriMap, key, idx) {
        const entries = iriMap[key];
        const next = iriMap[key] = {};

        let iri;
        let letter;
        for(const entry of entries) {
          iri = entry.iri;
          if(idx >= iri.length) {
            letter = '';
          } else {
            letter = iri[idx];
          }
          if(letter in next) {
            next[letter].push(entry);
          } else {
            next[letter] = [entry];
          }
        }

        for(const key in next) {
          if(key === '') {
            continue;
          }
          _buildIriMap(next, key, idx + 1);
        }
      }

      /**
       * Adds the term for the given entry if not already added.
       *
       * @param term the term to add.
       * @param entry the inverse context typeOrLanguage entry to add to.
       * @param typeOrLanguageValue the key in the entry to add to.
       */
      function _addPreferredTerm(term, entry, typeOrLanguageValue) {
        if(!entry.hasOwnProperty(typeOrLanguageValue)) {
          entry[typeOrLanguageValue] = term;
        }
      }

      /**
       * Clones an active context, creating a child active context.
       *
       * @return a clone (child) of the active context.
       */
      function _cloneActiveContext() {
        const child = {};
        child.mappings = util.clone(this.mappings);
        child.clone = this.clone;
        child.inverse = null;
        child.getInverse = this.getInverse;
        child.protected = util.clone(this.protected);
        if(this.previousContext) {
          child.previousContext = this.previousContext.clone();
        }
        child.revertToPreviousContext = this.revertToPreviousContext;
        if('@base' in this) {
          child['@base'] = this['@base'];
        }
        if('@language' in this) {
          child['@language'] = this['@language'];
        }
        if('@vocab' in this) {
          child['@vocab'] = this['@vocab'];
        }
        return child;
      }

      /**
       * Reverts any type-scoped context in this active context to the previous
       * context.
       */
      function _revertToPreviousContext() {
        if(!this.previousContext) {
          return this;
        }
        return this.previousContext.clone();
      }
    };

    /**
     * Gets the value for the given active context key and type, null if none is
     * set or undefined if none is set and type is '@context'.
     *
     * @param ctx the active context.
     * @param key the context key.
     * @param [type] the type of value to get (eg: '@id', '@type'), if not
     *          specified gets the entire entry for a key, null if not found.
     *
     * @return the value, null, or undefined.
     */
    api$7.getContextValue = (ctx, key, type) => {
      // invalid key
      if(key === null) {
        if(type === '@context') {
          return undefined;
        }
        return null;
      }

      // get specific entry information
      if(ctx.mappings.has(key)) {
        const entry = ctx.mappings.get(key);

        if(_isUndefined$2(type)) {
          // return whole entry
          return entry;
        }
        if(entry.hasOwnProperty(type)) {
          // return entry value for type
          return entry[type];
        }
      }

      // get default language
      if(type === '@language' && type in ctx) {
        return ctx[type];
      }

      // get default direction
      if(type === '@direction' && type in ctx) {
        return ctx[type];
      }

      if(type === '@context') {
        return undefined;
      }
      return null;
    };

    /**
     * Processing Mode check.
     *
     * @param activeCtx the current active context.
     * @param version the string or numeric version to check.
     *
     * @return boolean.
     */
    api$7.processingMode = (activeCtx, version) => {
      if(version.toString() >= '1.1') {
        return !activeCtx.processingMode ||
          activeCtx.processingMode >= 'json-ld-' + version.toString();
      } else {
        return activeCtx.processingMode === 'json-ld-1.0';
      }
    };

    /**
     * Returns whether or not the given value is a keyword.
     *
     * @param v the value to check.
     *
     * @return true if the value is a keyword, false if not.
     */
    api$7.isKeyword = v => {
      if(!_isString$3(v) || v[0] !== '@') {
        return false;
      }
      switch(v) {
        case '@base':
        case '@container':
        case '@context':
        case '@default':
        case '@direction':
        case '@embed':
        case '@explicit':
        case '@graph':
        case '@id':
        case '@included':
        case '@index':
        case '@json':
        case '@language':
        case '@list':
        case '@nest':
        case '@none':
        case '@omitDefault':
        case '@prefix':
        case '@preserve':
        case '@protected':
        case '@requireAll':
        case '@reverse':
        case '@set':
        case '@type':
        case '@value':
        case '@version':
        case '@vocab':
          return true;
      }
      return false;
    };

    function _deepCompare(x1, x2) {
      // compare `null` or primitive types directly
      if((!(x1 && typeof x1 === 'object')) ||
         (!(x2 && typeof x2 === 'object'))) {
        return x1 === x2;
      }
      // x1 and x2 are objects (also potentially arrays)
      const x1Array = Array.isArray(x1);
      if(x1Array !== Array.isArray(x2)) {
        return false;
      }
      if(x1Array) {
        if(x1.length !== x2.length) {
          return false;
        }
        for(let i = 0; i < x1.length; ++i) {
          if(!_deepCompare(x1[i], x2[i])) {
            return false;
          }
        }
        return true;
      }
      // x1 and x2 are non-array objects
      const k1s = Object.keys(x1);
      const k2s = Object.keys(x2);
      if(k1s.length !== k2s.length) {
        return false;
      }
      for(const k1 in x1) {
        let v1 = x1[k1];
        let v2 = x2[k1];
        // special case: `@container` can be in any order
        if(k1 === '@container') {
          if(Array.isArray(v1) && Array.isArray(v2)) {
            v1 = v1.slice().sort();
            v2 = v2.slice().sort();
          }
        }
        if(!_deepCompare(v1, v2)) {
          return false;
        }
      }
      return true;
    }

    /*
     * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.
     */



    const {
      isArray: _isArray$2,
      isObject: _isObject$2,
      isEmptyObject: _isEmptyObject,
      isString: _isString$2,
      isUndefined: _isUndefined$1
    } = types;

    const {
      isList: _isList$1,
      isValue: _isValue$1,
      isGraph: _isGraph$1,
      isSubject: _isSubject
    } = graphTypes;

    const {
      expandIri: _expandIri$2,
      getContextValue: _getContextValue$1,
      isKeyword: _isKeyword$1,
      process: _processContext$2,
      processingMode: _processingMode$2
    } = context;

    const {
      isAbsolute: _isAbsoluteIri$1
    } = url;

    const {
      addValue: _addValue$1,
      asArray: _asArray$1,
      getValues: _getValues,
      validateTypeValue: _validateTypeValue
    } = util;

    const api$6 = {};
    var expand$1 = api$6;
    const REGEX_BCP47$1 = /^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;

    /**
     * Recursively expands an element using the given context. Any context in
     * the element will be removed. All context URLs must have been retrieved
     * before calling this method.
     *
     * @param activeCtx the context to use.
     * @param activeProperty the property for the element, null for none.
     * @param element the element to expand.
     * @param options the expansion options.
     * @param insideList true if the element is a list, false if not.
     * @param insideIndex true if the element is inside an index container,
     *          false if not.
     * @param typeScopedContext an optional type-scoped active context for
     *          expanding values of nodes that were expressed according to
     *          a type-scoped context.
     * @param expansionMap(info) a function that can be used to custom map
     *          unmappable values (or to throw an error when they are detected);
     *          if this function returns `undefined` then the default behavior
     *          will be used.
     *
     * @return a Promise that resolves to the expanded value.
     */
    api$6.expand = async ({
      activeCtx,
      activeProperty = null,
      element,
      options = {},
      insideList = false,
      insideIndex = false,
      typeScopedContext = null,
      expansionMap = () => undefined
    }) => {
      // nothing to expand
      if(element === null || element === undefined) {
        return null;
      }

      // disable framing if activeProperty is @default
      if(activeProperty === '@default') {
        options = Object.assign({}, options, {isFrame: false});
      }

      if(!_isArray$2(element) && !_isObject$2(element)) {
        // drop free-floating scalars that are not in lists unless custom mapped
        if(!insideList && (activeProperty === null ||
          _expandIri$2(activeCtx, activeProperty, {vocab: true},
            options) === '@graph')) {
          const mapped = await expansionMap({
            unmappedValue: element,
            activeCtx,
            activeProperty,
            options,
            insideList
          });
          if(mapped === undefined) {
            return null;
          }
          return mapped;
        }

        // expand element according to value expansion rules
        return _expandValue({activeCtx, activeProperty, value: element, options});
      }

      // recursively expand array
      if(_isArray$2(element)) {
        let rval = [];
        const container = _getContextValue$1(
          activeCtx, activeProperty, '@container') || [];
        insideList = insideList || container.includes('@list');
        for(let i = 0; i < element.length; ++i) {
          // expand element
          let e = await api$6.expand({
            activeCtx,
            activeProperty,
            element: element[i],
            options,
            expansionMap,
            insideIndex,
            typeScopedContext
          });
          if(insideList && _isArray$2(e)) {
            e = {'@list': e};
          }

          if(e === null) {
            e = await expansionMap({
              unmappedValue: element[i],
              activeCtx,
              activeProperty,
              parent: element,
              index: i,
              options,
              expandedParent: rval,
              insideList
            });
            if(e === undefined) {
              continue;
            }
          }

          if(_isArray$2(e)) {
            rval = rval.concat(e);
          } else {
            rval.push(e);
          }
        }
        return rval;
      }

      // recursively expand object:

      // first, expand the active property
      const expandedActiveProperty = _expandIri$2(
        activeCtx, activeProperty, {vocab: true}, options);

      // Get any property-scoped context for activeProperty
      const propertyScopedCtx =
        _getContextValue$1(activeCtx, activeProperty, '@context');

      // second, determine if any type-scoped context should be reverted; it
      // should only be reverted when the following are all true:
      // 1. `element` is not a value or subject reference
      // 2. `insideIndex` is false
      typeScopedContext = typeScopedContext ||
        (activeCtx.previousContext ? activeCtx : null);
      let keys = Object.keys(element).sort();
      let mustRevert = !insideIndex;
      if(mustRevert && typeScopedContext && keys.length <= 2 &&
        !keys.includes('@context')) {
        for(const key of keys) {
          const expandedProperty = _expandIri$2(
            typeScopedContext, key, {vocab: true}, options);
          if(expandedProperty === '@value') {
            // value found, ensure type-scoped context is used to expand it
            mustRevert = false;
            activeCtx = typeScopedContext;
            break;
          }
          if(expandedProperty === '@id' && keys.length === 1) {
            // subject reference found, do not revert
            mustRevert = false;
            break;
          }
        }
      }

      if(mustRevert) {
        // revert type scoped context
        activeCtx = activeCtx.revertToPreviousContext();
      }

      // apply property-scoped context after reverting term-scoped context
      if(!_isUndefined$1(propertyScopedCtx)) {
        activeCtx = await _processContext$2({
          activeCtx,
          localCtx: propertyScopedCtx,
          propagate: true,
          overrideProtected: true,
          options
        });
      }

      // if element has a context, process it
      if('@context' in element) {
        activeCtx = await _processContext$2(
          {activeCtx, localCtx: element['@context'], options});
      }

      // set the type-scoped context to the context on input, for use later
      typeScopedContext = activeCtx;

      // Remember the first key found expanding to @type
      let typeKey = null;

      // look for scoped contexts on `@type`
      for(const key of keys) {
        const expandedProperty = _expandIri$2(activeCtx, key, {vocab: true}, options);
        if(expandedProperty === '@type') {
          // set scoped contexts from @type
          // avoid sorting if possible
          typeKey = typeKey || key;
          const value = element[key];
          const types =
            Array.isArray(value) ?
              (value.length > 1 ? value.slice().sort() : value) : [value];
          for(const type of types) {
            const ctx = _getContextValue$1(typeScopedContext, type, '@context');
            if(!_isUndefined$1(ctx)) {
              activeCtx = await _processContext$2({
                activeCtx,
                localCtx: ctx,
                options,
                propagate: false
              });
            }
          }
        }
      }

      // process each key and value in element, ignoring @nest content
      let rval = {};
      await _expandObject({
        activeCtx,
        activeProperty,
        expandedActiveProperty,
        element,
        expandedParent: rval,
        options,
        insideList,
        typeKey,
        typeScopedContext,
        expansionMap});

      // get property count on expanded output
      keys = Object.keys(rval);
      let count = keys.length;

      if('@value' in rval) {
        // @value must only have @language or @type
        if('@type' in rval && ('@language' in rval || '@direction' in rval)) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; an element containing "@value" may not ' +
            'contain both "@type" and either "@language" or "@direction".',
            'jsonld.SyntaxError', {code: 'invalid value object', element: rval});
        }
        let validCount = count - 1;
        if('@type' in rval) {
          validCount -= 1;
        }
        if('@index' in rval) {
          validCount -= 1;
        }
        if('@language' in rval) {
          validCount -= 1;
        }
        if('@direction' in rval) {
          validCount -= 1;
        }
        if(validCount !== 0) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; an element containing "@value" may only ' +
            'have an "@index" property and either "@type" ' +
            'or either or both "@language" or "@direction".',
            'jsonld.SyntaxError', {code: 'invalid value object', element: rval});
        }
        const values = rval['@value'] === null ? [] : _asArray$1(rval['@value']);
        const types = _getValues(rval, '@type');

        // drop null @values unless custom mapped
        if(_processingMode$2(activeCtx, 1.1) && types.includes('@json') &&
          types.length === 1) ; else if(values.length === 0) {
          const mapped = await expansionMap({
            unmappedValue: rval,
            activeCtx,
            activeProperty,
            element,
            options,
            insideList
          });
          if(mapped !== undefined) {
            rval = mapped;
          } else {
            rval = null;
          }
        } else if(!values.every(v => (_isString$2(v) || _isEmptyObject(v))) &&
          '@language' in rval) {
          // if @language is present, @value must be a string
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; only strings may be language-tagged.',
            'jsonld.SyntaxError',
            {code: 'invalid language-tagged value', element: rval});
        } else if(!types.every(t =>
          (_isAbsoluteIri$1(t) && !(_isString$2(t) && t.indexOf('_:') === 0) ||
          _isEmptyObject(t)))) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; an element containing "@value" and "@type" ' +
            'must have an absolute IRI for the value of "@type".',
            'jsonld.SyntaxError', {code: 'invalid typed value', element: rval});
        }
      } else if('@type' in rval && !_isArray$2(rval['@type'])) {
        // convert @type to an array
        rval['@type'] = [rval['@type']];
      } else if('@set' in rval || '@list' in rval) {
        // handle @set and @list
        if(count > 1 && !(count === 2 && '@index' in rval)) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; if an element has the property "@set" ' +
            'or "@list", then it can have at most one other property that is ' +
            '"@index".', 'jsonld.SyntaxError',
            {code: 'invalid set or list object', element: rval});
        }
        // optimize away @set
        if('@set' in rval) {
          rval = rval['@set'];
          keys = Object.keys(rval);
          count = keys.length;
        }
      } else if(count === 1 && '@language' in rval) {
        // drop objects with only @language unless custom mapped
        const mapped = await expansionMap(rval, {
          unmappedValue: rval,
          activeCtx,
          activeProperty,
          element,
          options,
          insideList
        });
        if(mapped !== undefined) {
          rval = mapped;
        } else {
          rval = null;
        }
      }

      // drop certain top-level objects that do not occur in lists, unless custom
      // mapped
      if(_isObject$2(rval) &&
        !options.keepFreeFloatingNodes && !insideList &&
        (activeProperty === null || expandedActiveProperty === '@graph')) {
        // drop empty object, top-level @value/@list, or object with only @id
        if(count === 0 || '@value' in rval || '@list' in rval ||
          (count === 1 && '@id' in rval)) {
          const mapped = await expansionMap({
            unmappedValue: rval,
            activeCtx,
            activeProperty,
            element,
            options,
            insideList
          });
          if(mapped !== undefined) {
            rval = mapped;
          } else {
            rval = null;
          }
        }
      }

      return rval;
    };

    /**
     * Expand each key and value of element adding to result
     *
     * @param activeCtx the context to use.
     * @param activeProperty the property for the element.
     * @param expandedActiveProperty the expansion of activeProperty
     * @param element the element to expand.
     * @param expandedParent the expanded result into which to add values.
     * @param options the expansion options.
     * @param insideList true if the element is a list, false if not.
     * @param typeKey first key found expanding to @type.
     * @param typeScopedContext the context before reverting.
     * @param expansionMap(info) a function that can be used to custom map
     *          unmappable values (or to throw an error when they are detected);
     *          if this function returns `undefined` then the default behavior
     *          will be used.
     */
    async function _expandObject({
      activeCtx,
      activeProperty,
      expandedActiveProperty,
      element,
      expandedParent,
      options = {},
      insideList,
      typeKey,
      typeScopedContext,
      expansionMap
    }) {
      const keys = Object.keys(element).sort();
      const nests = [];
      let unexpandedValue;

      // Figure out if this is the type for a JSON literal
      const isJsonType = element[typeKey] &&
        _expandIri$2(activeCtx,
          (_isArray$2(element[typeKey]) ? element[typeKey][0] : element[typeKey]),
          {vocab: true}, options) === '@json';

      for(const key of keys) {
        let value = element[key];
        let expandedValue;

        // skip @context
        if(key === '@context') {
          continue;
        }

        // expand property
        let expandedProperty = _expandIri$2(activeCtx, key, {vocab: true}, options);

        // drop non-absolute IRI keys that aren't keywords unless custom mapped
        if(expandedProperty === null ||
          !(_isAbsoluteIri$1(expandedProperty) || _isKeyword$1(expandedProperty))) {
          // TODO: use `await` to support async
          expandedProperty = expansionMap({
            unmappedProperty: key,
            activeCtx,
            activeProperty,
            parent: element,
            options,
            insideList,
            value,
            expandedParent
          });
          if(expandedProperty === undefined) {
            continue;
          }
        }

        if(_isKeyword$1(expandedProperty)) {
          if(expandedActiveProperty === '@reverse') {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; a keyword cannot be used as a @reverse ' +
              'property.', 'jsonld.SyntaxError',
              {code: 'invalid reverse property map', value});
          }
          if(expandedProperty in expandedParent &&
             expandedProperty !== '@included' &&
             expandedProperty !== '@type') {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; colliding keywords detected.',
              'jsonld.SyntaxError',
              {code: 'colliding keywords', keyword: expandedProperty});
          }
        }

        // syntax error if @id is not a string
        if(expandedProperty === '@id') {
          if(!_isString$2(value)) {
            if(!options.isFrame) {
              throw new JsonLdError_1(
                'Invalid JSON-LD syntax; "@id" value must a string.',
                'jsonld.SyntaxError', {code: 'invalid @id value', value});
            }
            if(_isObject$2(value)) {
              // empty object is a wildcard
              if(!_isEmptyObject(value)) {
                throw new JsonLdError_1(
                  'Invalid JSON-LD syntax; "@id" value an empty object or array ' +
                  'of strings, if framing',
                  'jsonld.SyntaxError', {code: 'invalid @id value', value});
              }
            } else if(_isArray$2(value)) {
              if(!value.every(v => _isString$2(v))) {
                throw new JsonLdError_1(
                  'Invalid JSON-LD syntax; "@id" value an empty object or array ' +
                  'of strings, if framing',
                  'jsonld.SyntaxError', {code: 'invalid @id value', value});
              }
            } else {
              throw new JsonLdError_1(
                'Invalid JSON-LD syntax; "@id" value an empty object or array ' +
                'of strings, if framing',
                'jsonld.SyntaxError', {code: 'invalid @id value', value});
            }
          }

          _addValue$1(
            expandedParent, '@id',
            _asArray$1(value).map(v =>
              _isString$2(v) ? _expandIri$2(activeCtx, v, {base: true}, options) : v),
            {propertyIsArray: options.isFrame});
          continue;
        }

        if(expandedProperty === '@type') {
          // if framing, can be a default object, but need to expand
          // key to determine that
          if(_isObject$2(value)) {
            value = Object.fromEntries(Object.entries(value).map(([k, v]) => [
              _expandIri$2(typeScopedContext, k, {vocab: true}),
              _asArray$1(v).map(vv =>
                _expandIri$2(typeScopedContext, vv, {base: true, vocab: true})
              )
            ]));
          }
          _validateTypeValue(value, options.isFrame);
          _addValue$1(
            expandedParent, '@type',
            _asArray$1(value).map(v =>
              _isString$2(v) ?
                _expandIri$2(typeScopedContext, v,
                  {base: true, vocab: true}, options) : v),
            {propertyIsArray: options.isFrame});
          continue;
        }

        // Included blocks are treated as an array of separate object nodes sharing
        // the same referencing active_property.
        // For 1.0, it is skipped as are other unknown keywords
        if(expandedProperty === '@included' && _processingMode$2(activeCtx, 1.1)) {
          const includedResult = _asArray$1(await api$6.expand({
            activeCtx,
            activeProperty,
            element: value,
            options,
            expansionMap
          }));

          // Expanded values must be node objects
          if(!includedResult.every(v => _isSubject(v))) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; ' +
              'values of @included must expand to node objects.',
              'jsonld.SyntaxError', {code: 'invalid @included value', value});
          }

          _addValue$1(
            expandedParent, '@included', includedResult, {propertyIsArray: true});
          continue;
        }

        // @graph must be an array or an object
        if(expandedProperty === '@graph' &&
          !(_isObject$2(value) || _isArray$2(value))) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; "@graph" value must not be an ' +
            'object or an array.',
            'jsonld.SyntaxError', {code: 'invalid @graph value', value});
        }

        if(expandedProperty === '@value') {
          // capture value for later
          // "colliding keywords" check prevents this from being set twice
          unexpandedValue = value;
          if(isJsonType && _processingMode$2(activeCtx, 1.1)) {
            // no coercion to array, and retain all values
            expandedParent['@value'] = value;
          } else {
            _addValue$1(
              expandedParent, '@value', value, {propertyIsArray: options.isFrame});
          }
          continue;
        }

        // @language must be a string
        // it should match BCP47
        if(expandedProperty === '@language') {
          if(value === null) {
            // drop null @language values, they expand as if they didn't exist
            continue;
          }
          if(!_isString$2(value) && !options.isFrame) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; "@language" value must be a string.',
              'jsonld.SyntaxError',
              {code: 'invalid language-tagged string', value});
          }
          // ensure language value is lowercase
          value = _asArray$1(value).map(v => _isString$2(v) ? v.toLowerCase() : v);

          // ensure language tag matches BCP47
          for(const lang of value) {
            if(_isString$2(lang) && !lang.match(REGEX_BCP47$1)) {
              console.warn(`@language must be valid BCP47: ${lang}`);
            }
          }

          _addValue$1(
            expandedParent, '@language', value, {propertyIsArray: options.isFrame});
          continue;
        }

        // @direction must be "ltr" or "rtl"
        if(expandedProperty === '@direction') {
          if(!_isString$2(value) && !options.isFrame) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; "@direction" value must be a string.',
              'jsonld.SyntaxError',
              {code: 'invalid base direction', value});
          }

          value = _asArray$1(value);

          // ensure direction is "ltr" or "rtl"
          for(const dir of value) {
            if(_isString$2(dir) && dir !== 'ltr' && dir !== 'rtl') {
              throw new JsonLdError_1(
                'Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',
                'jsonld.SyntaxError',
                {code: 'invalid base direction', value});
            }
          }

          _addValue$1(
            expandedParent, '@direction', value,
            {propertyIsArray: options.isFrame});
          continue;
        }

        // @index must be a string
        if(expandedProperty === '@index') {
          if(!_isString$2(value)) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; "@index" value must be a string.',
              'jsonld.SyntaxError',
              {code: 'invalid @index value', value});
          }
          _addValue$1(expandedParent, '@index', value);
          continue;
        }

        // @reverse must be an object
        if(expandedProperty === '@reverse') {
          if(!_isObject$2(value)) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; "@reverse" value must be an object.',
              'jsonld.SyntaxError', {code: 'invalid @reverse value', value});
          }

          expandedValue = await api$6.expand({
            activeCtx,
            activeProperty:
            '@reverse',
            element: value,
            options,
            expansionMap
          });
          // properties double-reversed
          if('@reverse' in expandedValue) {
            for(const property in expandedValue['@reverse']) {
              _addValue$1(
                expandedParent, property, expandedValue['@reverse'][property],
                {propertyIsArray: true});
            }
          }

          // FIXME: can this be merged with code below to simplify?
          // merge in all reversed properties
          let reverseMap = expandedParent['@reverse'] || null;
          for(const property in expandedValue) {
            if(property === '@reverse') {
              continue;
            }
            if(reverseMap === null) {
              reverseMap = expandedParent['@reverse'] = {};
            }
            _addValue$1(reverseMap, property, [], {propertyIsArray: true});
            const items = expandedValue[property];
            for(let ii = 0; ii < items.length; ++ii) {
              const item = items[ii];
              if(_isValue$1(item) || _isList$1(item)) {
                throw new JsonLdError_1(
                  'Invalid JSON-LD syntax; "@reverse" value must not be a ' +
                  '@value or an @list.', 'jsonld.SyntaxError',
                  {code: 'invalid reverse property value', value: expandedValue});
              }
              _addValue$1(reverseMap, property, item, {propertyIsArray: true});
            }
          }

          continue;
        }

        // nested keys
        if(expandedProperty === '@nest') {
          nests.push(key);
          continue;
        }

        // use potential scoped context for key
        let termCtx = activeCtx;
        const ctx = _getContextValue$1(activeCtx, key, '@context');
        if(!_isUndefined$1(ctx)) {
          termCtx = await _processContext$2({
            activeCtx,
            localCtx: ctx,
            propagate: true,
            overrideProtected: true,
            options
          });
        }

        const container = _getContextValue$1(termCtx, key, '@container') || [];

        if(container.includes('@language') && _isObject$2(value)) {
          const direction = _getContextValue$1(termCtx, key, '@direction');
          // handle language map container (skip if value is not an object)
          expandedValue = _expandLanguageMap(termCtx, value, direction, options);
        } else if(container.includes('@index') && _isObject$2(value)) {
          // handle index container (skip if value is not an object)
          const asGraph = container.includes('@graph');
          const indexKey = _getContextValue$1(termCtx, key, '@index') || '@index';
          const propertyIndex = indexKey !== '@index' &&
            _expandIri$2(activeCtx, indexKey, {vocab: true}, options);

          expandedValue = await _expandIndexMap({
            activeCtx: termCtx,
            options,
            activeProperty: key,
            value,
            expansionMap,
            asGraph,
            indexKey,
            propertyIndex
          });
        } else if(container.includes('@id') && _isObject$2(value)) {
          // handle id container (skip if value is not an object)
          const asGraph = container.includes('@graph');
          expandedValue = await _expandIndexMap({
            activeCtx: termCtx,
            options,
            activeProperty: key,
            value,
            expansionMap,
            asGraph,
            indexKey: '@id'
          });
        } else if(container.includes('@type') && _isObject$2(value)) {
          // handle type container (skip if value is not an object)
          expandedValue = await _expandIndexMap({
            // since container is `@type`, revert type scoped context when expanding
            activeCtx: termCtx.revertToPreviousContext(),
            options,
            activeProperty: key,
            value,
            expansionMap,
            asGraph: false,
            indexKey: '@type'
          });
        } else {
          // recurse into @list or @set
          const isList = (expandedProperty === '@list');
          if(isList || expandedProperty === '@set') {
            let nextActiveProperty = activeProperty;
            if(isList && expandedActiveProperty === '@graph') {
              nextActiveProperty = null;
            }
            expandedValue = await api$6.expand({
              activeCtx: termCtx,
              activeProperty: nextActiveProperty,
              element: value,
              options,
              insideList: isList,
              expansionMap
            });
          } else if(
            _getContextValue$1(activeCtx, key, '@type') === '@json') {
            expandedValue = {
              '@type': '@json',
              '@value': value
            };
          } else {
            // recursively expand value with key as new active property
            expandedValue = await api$6.expand({
              activeCtx: termCtx,
              activeProperty: key,
              element: value,
              options,
              insideList: false,
              expansionMap
            });
          }
        }

        // drop null values if property is not @value
        if(expandedValue === null && expandedProperty !== '@value') {
          // TODO: use `await` to support async
          expandedValue = expansionMap({
            unmappedValue: value,
            expandedProperty,
            activeCtx: termCtx,
            activeProperty,
            parent: element,
            options,
            insideList,
            key,
            expandedParent
          });
          if(expandedValue === undefined) {
            continue;
          }
        }

        // convert expanded value to @list if container specifies it
        if(expandedProperty !== '@list' && !_isList$1(expandedValue) &&
          container.includes('@list')) {
          // ensure expanded value in @list is an array
          expandedValue = {'@list': _asArray$1(expandedValue)};
        }

        // convert expanded value to @graph if container specifies it
        // and value is not, itself, a graph
        // index cases handled above
        if(container.includes('@graph') &&
          !container.some(key => key === '@id' || key === '@index')) {
          // ensure expanded values are arrays
          expandedValue = _asArray$1(expandedValue)
            .map(v => ({'@graph': _asArray$1(v)}));
        }

        // FIXME: can this be merged with code above to simplify?
        // merge in reverse properties
        if(termCtx.mappings.has(key) && termCtx.mappings.get(key).reverse) {
          const reverseMap =
            expandedParent['@reverse'] = expandedParent['@reverse'] || {};
          expandedValue = _asArray$1(expandedValue);
          for(let ii = 0; ii < expandedValue.length; ++ii) {
            const item = expandedValue[ii];
            if(_isValue$1(item) || _isList$1(item)) {
              throw new JsonLdError_1(
                'Invalid JSON-LD syntax; "@reverse" value must not be a ' +
                '@value or an @list.', 'jsonld.SyntaxError',
                {code: 'invalid reverse property value', value: expandedValue});
            }
            _addValue$1(reverseMap, expandedProperty, item, {propertyIsArray: true});
          }
          continue;
        }

        // add value for property
        // special keywords handled above
        _addValue$1(expandedParent, expandedProperty, expandedValue, {
          propertyIsArray: true
        });
      }

      // @value must not be an object or an array (unless framing) or if @type is
      // @json
      if('@value' in expandedParent) {
        if(expandedParent['@type'] === '@json' && _processingMode$2(activeCtx, 1.1)) ; else if((_isObject$2(unexpandedValue) || _isArray$2(unexpandedValue)) &&
          !options.isFrame) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; "@value" value must not be an ' +
            'object or an array.',
            'jsonld.SyntaxError',
            {code: 'invalid value object value', value: unexpandedValue});
        }
      }

      // expand each nested key
      for(const key of nests) {
        const nestedValues = _isArray$2(element[key]) ? element[key] : [element[key]];
        for(const nv of nestedValues) {
          if(!_isObject$2(nv) || Object.keys(nv).some(k =>
            _expandIri$2(activeCtx, k, {vocab: true}, options) === '@value')) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; nested value must be a node object.',
              'jsonld.SyntaxError',
              {code: 'invalid @nest value', value: nv});
          }
          await _expandObject({
            activeCtx,
            activeProperty,
            expandedActiveProperty,
            element: nv,
            expandedParent,
            options,
            insideList,
            typeScopedContext,
            typeKey,
            expansionMap});
        }
      }
    }

    /**
     * Expands the given value by using the coercion and keyword rules in the
     * given context.
     *
     * @param activeCtx the active context to use.
     * @param activeProperty the active property the value is associated with.
     * @param value the value to expand.
     * @param {Object} [options] - processing options.
     *
     * @return the expanded value.
     */
    function _expandValue({activeCtx, activeProperty, value, options}) {
      // nothing to expand
      if(value === null || value === undefined) {
        return null;
      }

      // special-case expand @id and @type (skips '@id' expansion)
      const expandedProperty = _expandIri$2(
        activeCtx, activeProperty, {vocab: true}, options);
      if(expandedProperty === '@id') {
        return _expandIri$2(activeCtx, value, {base: true}, options);
      } else if(expandedProperty === '@type') {
        return _expandIri$2(activeCtx, value, {vocab: true, base: true}, options);
      }

      // get type definition from context
      const type = _getContextValue$1(activeCtx, activeProperty, '@type');

      // do @id expansion (automatic for @graph)
      if((type === '@id' || expandedProperty === '@graph') && _isString$2(value)) {
        return {'@id': _expandIri$2(activeCtx, value, {base: true}, options)};
      }
      // do @id expansion w/vocab
      if(type === '@vocab' && _isString$2(value)) {
        return {
          '@id': _expandIri$2(activeCtx, value, {vocab: true, base: true}, options)
        };
      }

      // do not expand keyword values
      if(_isKeyword$1(expandedProperty)) {
        return value;
      }

      const rval = {};

      if(type && !['@id', '@vocab', '@none'].includes(type)) {
        // other type
        rval['@type'] = type;
      } else if(_isString$2(value)) {
        // check for language tagging for strings
        const language = _getContextValue$1(activeCtx, activeProperty, '@language');
        if(language !== null) {
          rval['@language'] = language;
        }
        const direction = _getContextValue$1(activeCtx, activeProperty, '@direction');
        if(direction !== null) {
          rval['@direction'] = direction;
        }
      }
      // do conversion of values that aren't basic JSON types to strings
      if(!['boolean', 'number', 'string'].includes(typeof value)) {
        value = value.toString();
      }
      rval['@value'] = value;

      return rval;
    }

    /**
     * Expands a language map.
     *
     * @param activeCtx the active context to use.
     * @param languageMap the language map to expand.
     * @param direction the direction to apply to values.
     * @param {Object} [options] - processing options.
     *
     * @return the expanded language map.
     */
    function _expandLanguageMap(activeCtx, languageMap, direction, options) {
      const rval = [];
      const keys = Object.keys(languageMap).sort();
      for(const key of keys) {
        const expandedKey = _expandIri$2(activeCtx, key, {vocab: true}, options);
        let val = languageMap[key];
        if(!_isArray$2(val)) {
          val = [val];
        }
        for(const item of val) {
          if(item === null) {
            // null values are allowed (8.5) but ignored (3.1)
            continue;
          }
          if(!_isString$2(item)) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; language map values must be strings.',
              'jsonld.SyntaxError',
              {code: 'invalid language map value', languageMap});
          }
          const val = {'@value': item};
          if(expandedKey !== '@none') {
            val['@language'] = key.toLowerCase();
          }
          if(direction) {
            val['@direction'] = direction;
          }
          rval.push(val);
        }
      }
      return rval;
    }

    async function _expandIndexMap(
      {activeCtx, options, activeProperty, value, expansionMap, asGraph,
        indexKey, propertyIndex}) {
      const rval = [];
      const keys = Object.keys(value).sort();
      const isTypeIndex = indexKey === '@type';
      for(let key of keys) {
        // if indexKey is @type, there may be a context defined for it
        if(isTypeIndex) {
          const ctx = _getContextValue$1(activeCtx, key, '@context');
          if(!_isUndefined$1(ctx)) {
            activeCtx = await _processContext$2({
              activeCtx,
              localCtx: ctx,
              propagate: false,
              options
            });
          }
        }

        let val = value[key];
        if(!_isArray$2(val)) {
          val = [val];
        }

        val = await api$6.expand({
          activeCtx,
          activeProperty,
          element: val,
          options,
          insideList: false,
          insideIndex: true,
          expansionMap
        });

        // expand for @type, but also for @none
        let expandedKey;
        if(propertyIndex) {
          if(key === '@none') {
            expandedKey = '@none';
          } else {
            expandedKey = _expandValue(
              {activeCtx, activeProperty: indexKey, value: key, options});
          }
        } else {
          expandedKey = _expandIri$2(activeCtx, key, {vocab: true}, options);
        }

        if(indexKey === '@id') {
          // expand document relative
          key = _expandIri$2(activeCtx, key, {base: true}, options);
        } else if(isTypeIndex) {
          key = expandedKey;
        }

        for(let item of val) {
          // If this is also a @graph container, turn items into graphs
          if(asGraph && !_isGraph$1(item)) {
            item = {'@graph': [item]};
          }
          if(indexKey === '@type') {
            if(expandedKey === '@none') ; else if(item['@type']) {
              item['@type'] = [key].concat(item['@type']);
            } else {
              item['@type'] = [key];
            }
          } else if(_isValue$1(item) &&
            !['@language', '@type', '@index'].includes(indexKey)) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; Attempt to add illegal key to value ' +
              `object: "${indexKey}".`,
              'jsonld.SyntaxError',
              {code: 'invalid value object', value: item});
          } else if(propertyIndex) {
            // index is a property to be expanded, and values interpreted for that
            // property
            if(expandedKey !== '@none') {
              // expand key as a value
              _addValue$1(item, propertyIndex, expandedKey, {
                propertyIsArray: true,
                prependValue: true
              });
            }
          } else if(expandedKey !== '@none' && !(indexKey in item)) {
            item[indexKey] = key;
          }
          rval.push(item);
        }
      }
      return rval;
    }

    /*
     * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.
     */

    const {isKeyword: isKeyword$2} = context;





    const api$5 = {};
    var nodeMap = api$5;

    /**
     * Creates a merged JSON-LD node map (node ID => node).
     *
     * @param input the expanded JSON-LD to create a node map of.
     * @param [options] the options to use:
     *          [issuer] a jsonld.IdentifierIssuer to use to label blank nodes.
     *
     * @return the node map.
     */
    api$5.createMergedNodeMap = (input, options) => {
      options = options || {};

      // produce a map of all subjects and name each bnode
      const issuer = options.issuer || new util.IdentifierIssuer('_:b');
      const graphs = {'@default': {}};
      api$5.createNodeMap(input, graphs, '@default', issuer);

      // add all non-default graphs to default graph
      return api$5.mergeNodeMaps(graphs);
    };

    /**
     * Recursively flattens the subjects in the given JSON-LD expanded input
     * into a node map.
     *
     * @param input the JSON-LD expanded input.
     * @param graphs a map of graph name to subject map.
     * @param graph the name of the current graph.
     * @param issuer the blank node identifier issuer.
     * @param name the name assigned to the current input if it is a bnode.
     * @param list the list to append to, null for none.
     */
    api$5.createNodeMap = (input, graphs, graph, issuer, name, list) => {
      // recurse through array
      if(types.isArray(input)) {
        for(const node of input) {
          api$5.createNodeMap(node, graphs, graph, issuer, undefined, list);
        }
        return;
      }

      // add non-object to list
      if(!types.isObject(input)) {
        if(list) {
          list.push(input);
        }
        return;
      }

      // add values to list
      if(graphTypes.isValue(input)) {
        if('@type' in input) {
          let type = input['@type'];
          // rename @type blank node
          if(type.indexOf('_:') === 0) {
            input['@type'] = type = issuer.getId(type);
          }
        }
        if(list) {
          list.push(input);
        }
        return;
      } else if(list && graphTypes.isList(input)) {
        const _list = [];
        api$5.createNodeMap(input['@list'], graphs, graph, issuer, name, _list);
        list.push({'@list': _list});
        return;
      }

      // Note: At this point, input must be a subject.

      // spec requires @type to be named first, so assign names early
      if('@type' in input) {
        const types = input['@type'];
        for(const type of types) {
          if(type.indexOf('_:') === 0) {
            issuer.getId(type);
          }
        }
      }

      // get name for subject
      if(types.isUndefined(name)) {
        name = graphTypes.isBlankNode(input) ?
          issuer.getId(input['@id']) : input['@id'];
      }

      // add subject reference to list
      if(list) {
        list.push({'@id': name});
      }

      // create new subject or merge into existing one
      const subjects = graphs[graph];
      const subject = subjects[name] = subjects[name] || {};
      subject['@id'] = name;
      const properties = Object.keys(input).sort();
      for(let property of properties) {
        // skip @id
        if(property === '@id') {
          continue;
        }

        // handle reverse properties
        if(property === '@reverse') {
          const referencedNode = {'@id': name};
          const reverseMap = input['@reverse'];
          for(const reverseProperty in reverseMap) {
            const items = reverseMap[reverseProperty];
            for(const item of items) {
              let itemName = item['@id'];
              if(graphTypes.isBlankNode(item)) {
                itemName = issuer.getId(itemName);
              }
              api$5.createNodeMap(item, graphs, graph, issuer, itemName);
              util.addValue(
                subjects[itemName], reverseProperty, referencedNode,
                {propertyIsArray: true, allowDuplicate: false});
            }
          }
          continue;
        }

        // recurse into graph
        if(property === '@graph') {
          // add graph subjects map entry
          if(!(name in graphs)) {
            graphs[name] = {};
          }
          api$5.createNodeMap(input[property], graphs, name, issuer);
          continue;
        }

        // recurse into included
        if(property === '@included') {
          api$5.createNodeMap(input[property], graphs, graph, issuer);
          continue;
        }

        // copy non-@type keywords
        if(property !== '@type' && isKeyword$2(property)) {
          if(property === '@index' && property in subject &&
            (input[property] !== subject[property] ||
            input[property]['@id'] !== subject[property]['@id'])) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; conflicting @index property detected.',
              'jsonld.SyntaxError',
              {code: 'conflicting indexes', subject});
          }
          subject[property] = input[property];
          continue;
        }

        // iterate over objects
        const objects = input[property];

        // if property is a bnode, assign it a new id
        if(property.indexOf('_:') === 0) {
          property = issuer.getId(property);
        }

        // ensure property is added for empty arrays
        if(objects.length === 0) {
          util.addValue(subject, property, [], {propertyIsArray: true});
          continue;
        }
        for(let o of objects) {
          if(property === '@type') {
            // rename @type blank nodes
            o = (o.indexOf('_:') === 0) ? issuer.getId(o) : o;
          }

          // handle embedded subject or subject reference
          if(graphTypes.isSubject(o) || graphTypes.isSubjectReference(o)) {
            // skip null @id
            if('@id' in o && !o['@id']) {
              continue;
            }

            // relabel blank node @id
            const id = graphTypes.isBlankNode(o) ?
              issuer.getId(o['@id']) : o['@id'];

            // add reference and recurse
            util.addValue(
              subject, property, {'@id': id},
              {propertyIsArray: true, allowDuplicate: false});
            api$5.createNodeMap(o, graphs, graph, issuer, id);
          } else if(graphTypes.isValue(o)) {
            util.addValue(
              subject, property, o,
              {propertyIsArray: true, allowDuplicate: false});
          } else if(graphTypes.isList(o)) {
            // handle @list
            const _list = [];
            api$5.createNodeMap(o['@list'], graphs, graph, issuer, name, _list);
            o = {'@list': _list};
            util.addValue(
              subject, property, o,
              {propertyIsArray: true, allowDuplicate: false});
          } else {
            // handle @value
            api$5.createNodeMap(o, graphs, graph, issuer, name);
            util.addValue(
              subject, property, o, {propertyIsArray: true, allowDuplicate: false});
          }
        }
      }
    };

    /**
     * Merge separate named graphs into a single merged graph including
     * all nodes from the default graph and named graphs.
     *
     * @param graphs a map of graph name to subject map.
     *
     * @return the merged graph map.
     */
    api$5.mergeNodeMapGraphs = graphs => {
      const merged = {};
      for(const name of Object.keys(graphs).sort()) {
        for(const id of Object.keys(graphs[name]).sort()) {
          const node = graphs[name][id];
          if(!(id in merged)) {
            merged[id] = {'@id': id};
          }
          const mergedNode = merged[id];

          for(const property of Object.keys(node).sort()) {
            if(isKeyword$2(property) && property !== '@type') {
              // copy keywords
              mergedNode[property] = util.clone(node[property]);
            } else {
              // merge objects
              for(const value of node[property]) {
                util.addValue(
                  mergedNode, property, util.clone(value),
                  {propertyIsArray: true, allowDuplicate: false});
              }
            }
          }
        }
      }

      return merged;
    };

    api$5.mergeNodeMaps = graphs => {
      // add all non-default graphs to default graph
      const defaultGraph = graphs['@default'];
      const graphNames = Object.keys(graphs).sort();
      for(const graphName of graphNames) {
        if(graphName === '@default') {
          continue;
        }
        const nodeMap = graphs[graphName];
        let subject = defaultGraph[graphName];
        if(!subject) {
          defaultGraph[graphName] = subject = {
            '@id': graphName,
            '@graph': []
          };
        } else if(!('@graph' in subject)) {
          subject['@graph'] = [];
        }
        const graph = subject['@graph'];
        for(const id of Object.keys(nodeMap).sort()) {
          const node = nodeMap[id];
          // only add full subjects
          if(!graphTypes.isSubjectReference(node)) {
            graph.push(node);
          }
        }
      }
      return defaultGraph;
    };

    /*
     * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.
     */

    const {
      isSubjectReference: _isSubjectReference$2
    } = graphTypes;

    const {
      createMergedNodeMap: _createMergedNodeMap$1
    } = nodeMap;

    const api$4 = {};
    var flatten = api$4;

    /**
     * Performs JSON-LD flattening.
     *
     * @param input the expanded JSON-LD to flatten.
     *
     * @return the flattened output.
     */
    api$4.flatten = input => {
      const defaultGraph = _createMergedNodeMap$1(input);

      // produce flattened output
      const flattened = [];
      const keys = Object.keys(defaultGraph).sort();
      for(let ki = 0; ki < keys.length; ++ki) {
        const node = defaultGraph[keys[ki]];
        // only add full subjects to top-level
        if(!_isSubjectReference$2(node)) {
          flattened.push(node);
        }
      }
      return flattened;
    };

    /*
     * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.
     */






    // constants
    const {
      // RDF,
      RDF_LIST,
      RDF_FIRST: RDF_FIRST$1,
      RDF_REST: RDF_REST$1,
      RDF_NIL: RDF_NIL$1,
      RDF_TYPE: RDF_TYPE$1,
      // RDF_PLAIN_LITERAL,
      // RDF_XML_LITERAL,
      RDF_JSON_LITERAL: RDF_JSON_LITERAL$1,
      // RDF_OBJECT,
      // RDF_LANGSTRING,

      // XSD,
      XSD_BOOLEAN: XSD_BOOLEAN$1,
      XSD_DOUBLE: XSD_DOUBLE$1,
      XSD_INTEGER: XSD_INTEGER$1,
      XSD_STRING: XSD_STRING$1,
    } = constants;

    const REGEX_BCP47 = /^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;

    const api$3 = {};
    var fromRdf = api$3;

    /**
     * Converts an RDF dataset to JSON-LD.
     *
     * @param dataset the RDF dataset.
     * @param options the RDF serialization options.
     *
     * @return a Promise that resolves to the JSON-LD output.
     */
    api$3.fromRDF = async (
      dataset,
      {
        useRdfType = false,
        useNativeTypes = false,
        rdfDirection = null
      }
    ) => {
      const defaultGraph = {};
      const graphMap = {'@default': defaultGraph};
      const referencedOnce = {};

      for(const quad of dataset) {
        // TODO: change 'name' to 'graph'
        const name = (quad.graph.termType === 'DefaultGraph') ?
          '@default' : quad.graph.value;
        if(!(name in graphMap)) {
          graphMap[name] = {};
        }
        if(name !== '@default' && !(name in defaultGraph)) {
          defaultGraph[name] = {'@id': name};
        }

        const nodeMap = graphMap[name];

        // get subject, predicate, object
        const s = quad.subject.value;
        const p = quad.predicate.value;
        const o = quad.object;

        if(!(s in nodeMap)) {
          nodeMap[s] = {'@id': s};
        }
        const node = nodeMap[s];

        const objectIsNode = o.termType.endsWith('Node');
        if(objectIsNode && !(o.value in nodeMap)) {
          nodeMap[o.value] = {'@id': o.value};
        }

        if(p === RDF_TYPE$1 && !useRdfType && objectIsNode) {
          util.addValue(node, '@type', o.value, {propertyIsArray: true});
          continue;
        }

        const value = _RDFToObject(o, useNativeTypes, rdfDirection);
        util.addValue(node, p, value, {propertyIsArray: true});

        // object may be an RDF list/partial list node but we can't know easily
        // until all triples are read
        if(objectIsNode) {
          if(o.value === RDF_NIL$1) {
            // track rdf:nil uniquely per graph
            const object = nodeMap[o.value];
            if(!('usages' in object)) {
              object.usages = [];
            }
            object.usages.push({
              node,
              property: p,
              value
            });
          } else if(o.value in referencedOnce) {
            // object referenced more than once
            referencedOnce[o.value] = false;
          } else {
            // keep track of single reference
            referencedOnce[o.value] = {
              node,
              property: p,
              value
            };
          }
        }
      }

      /*
      for(let name in dataset) {
        const graph = dataset[name];
        if(!(name in graphMap)) {
          graphMap[name] = {};
        }
        if(name !== '@default' && !(name in defaultGraph)) {
          defaultGraph[name] = {'@id': name};
        }
        const nodeMap = graphMap[name];
        for(let ti = 0; ti < graph.length; ++ti) {
          const triple = graph[ti];

          // get subject, predicate, object
          const s = triple.subject.value;
          const p = triple.predicate.value;
          const o = triple.object;

          if(!(s in nodeMap)) {
            nodeMap[s] = {'@id': s};
          }
          const node = nodeMap[s];

          const objectIsId = (o.type === 'IRI' || o.type === 'blank node');
          if(objectIsId && !(o.value in nodeMap)) {
            nodeMap[o.value] = {'@id': o.value};
          }

          if(p === RDF_TYPE && !useRdfType && objectIsId) {
            util.addValue(node, '@type', o.value, {propertyIsArray: true});
            continue;
          }

          const value = _RDFToObject(o, useNativeTypes);
          util.addValue(node, p, value, {propertyIsArray: true});

          // object may be an RDF list/partial list node but we can't know easily
          // until all triples are read
          if(objectIsId) {
            if(o.value === RDF_NIL) {
              // track rdf:nil uniquely per graph
              const object = nodeMap[o.value];
              if(!('usages' in object)) {
                object.usages = [];
              }
              object.usages.push({
                node: node,
                property: p,
                value: value
              });
            } else if(o.value in referencedOnce) {
              // object referenced more than once
              referencedOnce[o.value] = false;
            } else {
              // keep track of single reference
              referencedOnce[o.value] = {
                node: node,
                property: p,
                value: value
              };
            }
          }
        }
      }*/

      // convert linked lists to @list arrays
      for(const name in graphMap) {
        const graphObject = graphMap[name];

        // no @lists to be converted, continue
        if(!(RDF_NIL$1 in graphObject)) {
          continue;
        }

        // iterate backwards through each RDF list
        const nil = graphObject[RDF_NIL$1];
        if(!nil.usages) {
          continue;
        }
        for(let usage of nil.usages) {
          let node = usage.node;
          let property = usage.property;
          let head = usage.value;
          const list = [];
          const listNodes = [];

          // ensure node is a well-formed list node; it must:
          // 1. Be referenced only once.
          // 2. Have an array for rdf:first that has 1 item.
          // 3. Have an array for rdf:rest that has 1 item.
          // 4. Have no keys other than: @id, rdf:first, rdf:rest, and,
          //   optionally, @type where the value is rdf:List.
          let nodeKeyCount = Object.keys(node).length;
          while(property === RDF_REST$1 &&
            types.isObject(referencedOnce[node['@id']]) &&
            types.isArray(node[RDF_FIRST$1]) && node[RDF_FIRST$1].length === 1 &&
            types.isArray(node[RDF_REST$1]) && node[RDF_REST$1].length === 1 &&
            (nodeKeyCount === 3 ||
              (nodeKeyCount === 4 && types.isArray(node['@type']) &&
              node['@type'].length === 1 && node['@type'][0] === RDF_LIST))) {
            list.push(node[RDF_FIRST$1][0]);
            listNodes.push(node['@id']);

            // get next node, moving backwards through list
            usage = referencedOnce[node['@id']];
            node = usage.node;
            property = usage.property;
            head = usage.value;
            nodeKeyCount = Object.keys(node).length;

            // if node is not a blank node, then list head found
            if(!graphTypes.isBlankNode(node)) {
              break;
            }
          }

          // transform list into @list object
          delete head['@id'];
          head['@list'] = list.reverse();
          for(const listNode of listNodes) {
            delete graphObject[listNode];
          }
        }

        delete nil.usages;
      }

      const result = [];
      const subjects = Object.keys(defaultGraph).sort();
      for(const subject of subjects) {
        const node = defaultGraph[subject];
        if(subject in graphMap) {
          const graph = node['@graph'] = [];
          const graphObject = graphMap[subject];
          const graphSubjects = Object.keys(graphObject).sort();
          for(const graphSubject of graphSubjects) {
            const node = graphObject[graphSubject];
            // only add full subjects to top-level
            if(!graphTypes.isSubjectReference(node)) {
              graph.push(node);
            }
          }
        }
        // only add full subjects to top-level
        if(!graphTypes.isSubjectReference(node)) {
          result.push(node);
        }
      }

      return result;
    };

    /**
     * Converts an RDF triple object to a JSON-LD object.
     *
     * @param o the RDF triple object to convert.
     * @param useNativeTypes true to output native types, false not to.
     *
     * @return the JSON-LD object.
     */
    function _RDFToObject(o, useNativeTypes, rdfDirection) {
      // convert NamedNode/BlankNode object to JSON-LD
      if(o.termType.endsWith('Node')) {
        return {'@id': o.value};
      }

      // convert literal to JSON-LD
      const rval = {'@value': o.value};

      // add language
      if(o.language) {
        rval['@language'] = o.language;
      } else {
        let type = o.datatype.value;
        if(!type) {
          type = XSD_STRING$1;
        }
        if(type === RDF_JSON_LITERAL$1) {
          type = '@json';
          try {
            rval['@value'] = JSON.parse(rval['@value']);
          } catch(e) {
            throw new JsonLdError_1(
              'JSON literal could not be parsed.',
              'jsonld.InvalidJsonLiteral',
              {code: 'invalid JSON literal', value: rval['@value'], cause: e});
          }
        }
        // use native types for certain xsd types
        if(useNativeTypes) {
          if(type === XSD_BOOLEAN$1) {
            if(rval['@value'] === 'true') {
              rval['@value'] = true;
            } else if(rval['@value'] === 'false') {
              rval['@value'] = false;
            }
          } else if(types.isNumeric(rval['@value'])) {
            if(type === XSD_INTEGER$1) {
              const i = parseInt(rval['@value'], 10);
              if(i.toFixed(0) === rval['@value']) {
                rval['@value'] = i;
              }
            } else if(type === XSD_DOUBLE$1) {
              rval['@value'] = parseFloat(rval['@value']);
            }
          }
          // do not add native type
          if(![XSD_BOOLEAN$1, XSD_INTEGER$1, XSD_DOUBLE$1, XSD_STRING$1].includes(type)) {
            rval['@type'] = type;
          }
        } else if(rdfDirection === 'i18n-datatype' &&
          type.startsWith('https://www.w3.org/ns/i18n#')) {
          const [, language, direction] = type.split(/[#_]/);
          if(language.length > 0) {
            rval['@language'] = language;
            if(!language.match(REGEX_BCP47)) {
              console.warn(`@language must be valid BCP47: ${language}`);
            }
          }
          rval['@direction'] = direction;
        } else if(type !== XSD_STRING$1) {
          rval['@type'] = type;
        }
      }

      return rval;
    }

    /* jshint esversion: 6 */

    var canonicalize = function serialize (object) {
      if (object === null || typeof object !== 'object' || object.toJSON != null) {
        return JSON.stringify(object);
      }

      if (Array.isArray(object)) {
        return '[' + object.reduce((t, cv, ci) => {
          const comma = ci === 0 ? '' : ',';
          const value = cv === undefined || typeof cv === 'symbol' ? null : cv;
          return t + comma + serialize(value);
        }, '') + ']';
      }

      return '{' + Object.keys(object).sort().reduce((t, cv, ci) => {
        if (object[cv] === undefined ||
            typeof object[cv] === 'symbol') {
          return t;
        }
        const comma = t.length === 0 ? '' : ',';
        return t + comma + serialize(cv) + ':' + serialize(object[cv]);
      }, '') + '}';
    };

    /*
     * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.
     */

    const {createNodeMap} = nodeMap;
    const {isKeyword: isKeyword$1} = context;





    const {
      // RDF,
      // RDF_LIST,
      RDF_FIRST,
      RDF_REST,
      RDF_NIL,
      RDF_TYPE,
      // RDF_PLAIN_LITERAL,
      // RDF_XML_LITERAL,
      RDF_JSON_LITERAL,
      // RDF_OBJECT,
      RDF_LANGSTRING,

      // XSD,
      XSD_BOOLEAN,
      XSD_DOUBLE,
      XSD_INTEGER,
      XSD_STRING,
    } = constants;

    const {
      isAbsolute: _isAbsoluteIri
    } = url;

    const api$2 = {};
    var toRdf = api$2;

    /**
     * Outputs an RDF dataset for the expanded JSON-LD input.
     *
     * @param input the expanded JSON-LD input.
     * @param options the RDF serialization options.
     *
     * @return the RDF dataset.
     */
    api$2.toRDF = (input, options) => {
      // create node map for default graph (and any named graphs)
      const issuer = new util.IdentifierIssuer('_:b');
      const nodeMap = {'@default': {}};
      createNodeMap(input, nodeMap, '@default', issuer);

      const dataset = [];
      const graphNames = Object.keys(nodeMap).sort();
      for(const graphName of graphNames) {
        let graphTerm;
        if(graphName === '@default') {
          graphTerm = {termType: 'DefaultGraph', value: ''};
        } else if(_isAbsoluteIri(graphName)) {
          if(graphName.startsWith('_:')) {
            graphTerm = {termType: 'BlankNode'};
          } else {
            graphTerm = {termType: 'NamedNode'};
          }
          graphTerm.value = graphName;
        } else {
          // skip relative IRIs (not valid RDF)
          continue;
        }
        _graphToRDF(dataset, nodeMap[graphName], graphTerm, issuer, options);
      }

      return dataset;
    };

    /**
     * Adds RDF quads for a particular graph to the given dataset.
     *
     * @param dataset the dataset to append RDF quads to.
     * @param graph the graph to create RDF quads for.
     * @param graphTerm the graph term for each quad.
     * @param issuer a IdentifierIssuer for assigning blank node names.
     * @param options the RDF serialization options.
     *
     * @return the array of RDF triples for the given graph.
     */
    function _graphToRDF(dataset, graph, graphTerm, issuer, options) {
      const ids = Object.keys(graph).sort();
      for(const id of ids) {
        const node = graph[id];
        const properties = Object.keys(node).sort();
        for(let property of properties) {
          const items = node[property];
          if(property === '@type') {
            property = RDF_TYPE;
          } else if(isKeyword$1(property)) {
            continue;
          }

          for(const item of items) {
            // RDF subject
            const subject = {
              termType: id.startsWith('_:') ? 'BlankNode' : 'NamedNode',
              value: id
            };

            // skip relative IRI subjects (not valid RDF)
            if(!_isAbsoluteIri(id)) {
              continue;
            }

            // RDF predicate
            const predicate = {
              termType: property.startsWith('_:') ? 'BlankNode' : 'NamedNode',
              value: property
            };

            // skip relative IRI predicates (not valid RDF)
            if(!_isAbsoluteIri(property)) {
              continue;
            }

            // skip blank node predicates unless producing generalized RDF
            if(predicate.termType === 'BlankNode' &&
              !options.produceGeneralizedRdf) {
              continue;
            }

            // convert list, value or node object to triple
            const object =
              _objectToRDF(item, issuer, dataset, graphTerm, options.rdfDirection);
            // skip null objects (they are relative IRIs)
            if(object) {
              dataset.push({
                subject,
                predicate,
                object,
                graph: graphTerm
              });
            }
          }
        }
      }
    }

    /**
     * Converts a @list value into linked list of blank node RDF quads
     * (an RDF collection).
     *
     * @param list the @list value.
     * @param issuer a IdentifierIssuer for assigning blank node names.
     * @param dataset the array of quads to append to.
     * @param graphTerm the graph term for each quad.
     *
     * @return the head of the list.
     */
    function _listToRDF(list, issuer, dataset, graphTerm, rdfDirection) {
      const first = {termType: 'NamedNode', value: RDF_FIRST};
      const rest = {termType: 'NamedNode', value: RDF_REST};
      const nil = {termType: 'NamedNode', value: RDF_NIL};

      const last = list.pop();
      // Result is the head of the list
      const result = last ? {termType: 'BlankNode', value: issuer.getId()} : nil;
      let subject = result;

      for(const item of list) {
        const object = _objectToRDF(item, issuer, dataset, graphTerm, rdfDirection);
        const next = {termType: 'BlankNode', value: issuer.getId()};
        dataset.push({
          subject,
          predicate: first,
          object,
          graph: graphTerm
        });
        dataset.push({
          subject,
          predicate: rest,
          object: next,
          graph: graphTerm
        });
        subject = next;
      }

      // Tail of list
      if(last) {
        const object = _objectToRDF(last, issuer, dataset, graphTerm, rdfDirection);
        dataset.push({
          subject,
          predicate: first,
          object,
          graph: graphTerm
        });
        dataset.push({
          subject,
          predicate: rest,
          object: nil,
          graph: graphTerm
        });
      }

      return result;
    }

    /**
     * Converts a JSON-LD value object to an RDF literal or a JSON-LD string,
     * node object to an RDF resource, or adds a list.
     *
     * @param item the JSON-LD value or node object.
     * @param issuer a IdentifierIssuer for assigning blank node names.
     * @param dataset the dataset to append RDF quads to.
     * @param graphTerm the graph term for each quad.
     *
     * @return the RDF literal or RDF resource.
     */
    function _objectToRDF(item, issuer, dataset, graphTerm, rdfDirection) {
      const object = {};

      // convert value object to RDF
      if(graphTypes.isValue(item)) {
        object.termType = 'Literal';
        object.value = undefined;
        object.datatype = {
          termType: 'NamedNode'
        };
        let value = item['@value'];
        const datatype = item['@type'] || null;

        // convert to XSD/JSON datatypes as appropriate
        if(datatype === '@json') {
          object.value = canonicalize(value);
          object.datatype.value = RDF_JSON_LITERAL;
        } else if(types.isBoolean(value)) {
          object.value = value.toString();
          object.datatype.value = datatype || XSD_BOOLEAN;
        } else if(types.isDouble(value) || datatype === XSD_DOUBLE) {
          if(!types.isDouble(value)) {
            value = parseFloat(value);
          }
          // canonical double representation
          object.value = value.toExponential(15).replace(/(\d)0*e\+?/, '$1E');
          object.datatype.value = datatype || XSD_DOUBLE;
        } else if(types.isNumber(value)) {
          object.value = value.toFixed(0);
          object.datatype.value = datatype || XSD_INTEGER;
        } else if(rdfDirection === 'i18n-datatype' &&
          '@direction' in item) {
          const datatype = 'https://www.w3.org/ns/i18n#' +
            (item['@language'] || '') +
            `_${item['@direction']}`;
          object.datatype.value = datatype;
          object.value = value;
        } else if('@language' in item) {
          object.value = value;
          object.datatype.value = datatype || RDF_LANGSTRING;
          object.language = item['@language'];
        } else {
          object.value = value;
          object.datatype.value = datatype || XSD_STRING;
        }
      } else if(graphTypes.isList(item)) {
        const _list =
          _listToRDF(item['@list'], issuer, dataset, graphTerm, rdfDirection);
        object.termType = _list.termType;
        object.value = _list.value;
      } else {
        // convert string/node object to RDF
        const id = types.isObject(item) ? item['@id'] : item;
        object.termType = id.startsWith('_:') ? 'BlankNode' : 'NamedNode';
        object.value = id;
      }

      // skip relative IRIs, not valid RDF
      if(object.termType === 'NamedNode' && !_isAbsoluteIri(object.value)) {
        return null;
      }

      return object;
    }

    /*
     * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.
     */

    const {isKeyword} = context;





    const {
      createNodeMap: _createNodeMap$1,
      mergeNodeMapGraphs: _mergeNodeMapGraphs
    } = nodeMap;

    const api$1 = {};
    var frame = api$1;

    /**
     * Performs JSON-LD `merged` framing.
     *
     * @param input the expanded JSON-LD to frame.
     * @param frame the expanded JSON-LD frame to use.
     * @param options the framing options.
     *
     * @return the framed output.
     */
    api$1.frameMergedOrDefault = (input, frame, options) => {
      // create framing state
      const state = {
        options,
        embedded: false,
        graph: '@default',
        graphMap: {'@default': {}},
        subjectStack: [],
        link: {},
        bnodeMap: {}
      };

      // produce a map of all graphs and name each bnode
      // FIXME: currently uses subjects from @merged graph only
      const issuer = new util.IdentifierIssuer('_:b');
      _createNodeMap$1(input, state.graphMap, '@default', issuer);
      if(options.merged) {
        state.graphMap['@merged'] = _mergeNodeMapGraphs(state.graphMap);
        state.graph = '@merged';
      }
      state.subjects = state.graphMap[state.graph];

      // frame the subjects
      const framed = [];
      api$1.frame(state, Object.keys(state.subjects).sort(), frame, framed);

      // If pruning blank nodes, find those to prune
      if(options.pruneBlankNodeIdentifiers) {
        // remove all blank nodes appearing only once, done in compaction
        options.bnodesToClear =
          Object.keys(state.bnodeMap).filter(id => state.bnodeMap[id].length === 1);
      }

      // remove @preserve from results
      options.link = {};
      return _cleanupPreserve(framed, options);
    };

    /**
     * Frames subjects according to the given frame.
     *
     * @param state the current framing state.
     * @param subjects the subjects to filter.
     * @param frame the frame.
     * @param parent the parent subject or top-level array.
     * @param property the parent property, initialized to null.
     */
    api$1.frame = (state, subjects, frame, parent, property = null) => {
      // validate the frame
      _validateFrame(frame);
      frame = frame[0];

      // get flags for current frame
      const options = state.options;
      const flags = {
        embed: _getFrameFlag(frame, options, 'embed'),
        explicit: _getFrameFlag(frame, options, 'explicit'),
        requireAll: _getFrameFlag(frame, options, 'requireAll')
      };

      // get link for current graph
      if(!state.link.hasOwnProperty(state.graph)) {
        state.link[state.graph] = {};
      }
      const link = state.link[state.graph];

      // filter out subjects that match the frame
      const matches = _filterSubjects(state, subjects, frame, flags);

      // add matches to output
      const ids = Object.keys(matches).sort();
      for(const id of ids) {
        const subject = matches[id];

        /* Note: In order to treat each top-level match as a compartmentalized
        result, clear the unique embedded subjects map when the property is null,
        which only occurs at the top-level. */
        if(property === null) {
          state.uniqueEmbeds = {[state.graph]: {}};
        } else {
          state.uniqueEmbeds[state.graph] = state.uniqueEmbeds[state.graph] || {};
        }

        if(flags.embed === '@link' && id in link) {
          // TODO: may want to also match an existing linked subject against
          // the current frame ... so different frames could produce different
          // subjects that are only shared in-memory when the frames are the same

          // add existing linked subject
          _addFrameOutput(parent, property, link[id]);
          continue;
        }

        // start output for subject
        const output = {'@id': id};
        if(id.indexOf('_:') === 0) {
          util.addValue(state.bnodeMap, id, output, {propertyIsArray: true});
        }
        link[id] = output;

        // validate @embed
        if((flags.embed === '@first' || flags.embed === '@last') && state.is11) {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; invalid value of @embed.',
            'jsonld.SyntaxError', {code: 'invalid @embed value', frame});
        }

        if(!state.embedded && state.uniqueEmbeds[state.graph].hasOwnProperty(id)) {
          // skip adding this node object to the top level, as it was
          // already included in another node object
          continue;
        }

        // if embed is @never or if a circular reference would be created by an
        // embed, the subject cannot be embedded, just add the reference;
        // note that a circular reference won't occur when the embed flag is
        // `@link` as the above check will short-circuit before reaching this point
        if(state.embedded &&
          (flags.embed === '@never' ||
          _createsCircularReference(subject, state.graph, state.subjectStack))) {
          _addFrameOutput(parent, property, output);
          continue;
        }

        // if only the first (or once) should be embedded
        if(state.embedded &&
           (flags.embed == '@first' || flags.embed == '@once') &&
           state.uniqueEmbeds[state.graph].hasOwnProperty(id)) {
          _addFrameOutput(parent, property, output);
          continue;
        }

        // if only the last match should be embedded
        if(flags.embed === '@last') {
          // remove any existing embed
          if(id in state.uniqueEmbeds[state.graph]) {
            _removeEmbed(state, id);
          }
        }

        state.uniqueEmbeds[state.graph][id] = {parent, property};

        // push matching subject onto stack to enable circular embed checks
        state.subjectStack.push({subject, graph: state.graph});

        // subject is also the name of a graph
        if(id in state.graphMap) {
          let recurse = false;
          let subframe = null;
          if(!('@graph' in frame)) {
            recurse = state.graph !== '@merged';
            subframe = {};
          } else {
            subframe = frame['@graph'][0];
            recurse = !(id === '@merged' || id === '@default');
            if(!types.isObject(subframe)) {
              subframe = {};
            }
          }

          if(recurse) {
            // recurse into graph
            api$1.frame(
              {...state, graph: id, embedded: false},
              Object.keys(state.graphMap[id]).sort(), [subframe], output, '@graph');
          }
        }

        // if frame has @included, recurse over its sub-frame
        if('@included' in frame) {
          api$1.frame(
            {...state, embedded: false},
            subjects, frame['@included'], output, '@included');
        }

        // iterate over subject properties
        for(const prop of Object.keys(subject).sort()) {
          // copy keywords to output
          if(isKeyword(prop)) {
            output[prop] = util.clone(subject[prop]);

            if(prop === '@type') {
              // count bnode values of @type
              for(const type of subject['@type']) {
                if(type.indexOf('_:') === 0) {
                  util.addValue(
                    state.bnodeMap, type, output, {propertyIsArray: true});
                }
              }
            }
            continue;
          }

          // explicit is on and property isn't in the frame, skip processing
          if(flags.explicit && !(prop in frame)) {
            continue;
          }

          // add objects
          for(const o of subject[prop]) {
            const subframe = (prop in frame ?
              frame[prop] : _createImplicitFrame(flags));

            // recurse into list
            if(graphTypes.isList(o)) {
              const subframe =
                (frame[prop] && frame[prop][0] && frame[prop][0]['@list']) ?
                  frame[prop][0]['@list'] :
                  _createImplicitFrame(flags);

              // add empty list
              const list = {'@list': []};
              _addFrameOutput(output, prop, list);

              // add list objects
              const src = o['@list'];
              for(const oo of src) {
                if(graphTypes.isSubjectReference(oo)) {
                  // recurse into subject reference
                  api$1.frame(
                    {...state, embedded: true},
                    [oo['@id']], subframe, list, '@list');
                } else {
                  // include other values automatically
                  _addFrameOutput(list, '@list', util.clone(oo));
                }
              }
            } else if(graphTypes.isSubjectReference(o)) {
              // recurse into subject reference
              api$1.frame(
                {...state, embedded: true},
                [o['@id']], subframe, output, prop);
            } else if(_valueMatch(subframe[0], o)) {
              // include other values, if they match
              _addFrameOutput(output, prop, util.clone(o));
            }
          }
        }

        // handle defaults
        for(const prop of Object.keys(frame).sort()) {
          // skip keywords
          if(prop === '@type') {
            if(!types.isObject(frame[prop][0]) ||
               !('@default' in frame[prop][0])) {
              continue;
            }
            // allow through default types
          } else if(isKeyword(prop)) {
            continue;
          }

          // if omit default is off, then include default values for properties
          // that appear in the next frame but are not in the matching subject
          const next = frame[prop][0] || {};
          const omitDefaultOn = _getFrameFlag(next, options, 'omitDefault');
          if(!omitDefaultOn && !(prop in output)) {
            let preserve = '@null';
            if('@default' in next) {
              preserve = util.clone(next['@default']);
            }
            if(!types.isArray(preserve)) {
              preserve = [preserve];
            }
            output[prop] = [{'@preserve': preserve}];
          }
        }

        // if embed reverse values by finding nodes having this subject as a value
        // of the associated property
        for(const reverseProp of Object.keys(frame['@reverse'] || {}).sort()) {
          const subframe = frame['@reverse'][reverseProp];
          for(const subject of Object.keys(state.subjects)) {
            const nodeValues =
              util.getValues(state.subjects[subject], reverseProp);
            if(nodeValues.some(v => v['@id'] === id)) {
              // node has property referencing this subject, recurse
              output['@reverse'] = output['@reverse'] || {};
              util.addValue(
                output['@reverse'], reverseProp, [], {propertyIsArray: true});
              api$1.frame(
                {...state, embedded: true},
                [subject], subframe, output['@reverse'][reverseProp],
                property);
            }
          }
        }

        // add output to parent
        _addFrameOutput(parent, property, output);

        // pop matching subject from circular ref-checking stack
        state.subjectStack.pop();
      }
    };

    /**
     * Replace `@null` with `null`, removing it from arrays.
     *
     * @param input the framed, compacted output.
     * @param options the framing options used.
     *
     * @return the resulting output.
     */
    api$1.cleanupNull = (input, options) => {
      // recurse through arrays
      if(types.isArray(input)) {
        const noNulls = input.map(v => api$1.cleanupNull(v, options));
        return noNulls.filter(v => v); // removes nulls from array
      }

      if(input === '@null') {
        return null;
      }

      if(types.isObject(input)) {
        // handle in-memory linked nodes
        if('@id' in input) {
          const id = input['@id'];
          if(options.link.hasOwnProperty(id)) {
            const idx = options.link[id].indexOf(input);
            if(idx !== -1) {
              // already visited
              return options.link[id][idx];
            }
            // prevent circular visitation
            options.link[id].push(input);
          } else {
            // prevent circular visitation
            options.link[id] = [input];
          }
        }

        for(const key in input) {
          input[key] = api$1.cleanupNull(input[key], options);
        }
      }
      return input;
    };

    /**
     * Creates an implicit frame when recursing through subject matches. If
     * a frame doesn't have an explicit frame for a particular property, then
     * a wildcard child frame will be created that uses the same flags that the
     * parent frame used.
     *
     * @param flags the current framing flags.
     *
     * @return the implicit frame.
     */
    function _createImplicitFrame(flags) {
      const frame = {};
      for(const key in flags) {
        if(flags[key] !== undefined) {
          frame['@' + key] = [flags[key]];
        }
      }
      return [frame];
    }

    /**
     * Checks the current subject stack to see if embedding the given subject
     * would cause a circular reference.
     *
     * @param subjectToEmbed the subject to embed.
     * @param graph the graph the subject to embed is in.
     * @param subjectStack the current stack of subjects.
     *
     * @return true if a circular reference would be created, false if not.
     */
    function _createsCircularReference(subjectToEmbed, graph, subjectStack) {
      for(let i = subjectStack.length - 1; i >= 0; --i) {
        const subject = subjectStack[i];
        if(subject.graph === graph &&
          subject.subject['@id'] === subjectToEmbed['@id']) {
          return true;
        }
      }
      return false;
    }

    /**
     * Gets the frame flag value for the given flag name.
     *
     * @param frame the frame.
     * @param options the framing options.
     * @param name the flag name.
     *
     * @return the flag value.
     */
    function _getFrameFlag(frame, options, name) {
      const flag = '@' + name;
      let rval = (flag in frame ? frame[flag][0] : options[name]);
      if(name === 'embed') {
        // default is "@last"
        // backwards-compatibility support for "embed" maps:
        // true => "@last"
        // false => "@never"
        if(rval === true) {
          rval = '@once';
        } else if(rval === false) {
          rval = '@never';
        } else if(rval !== '@always' && rval !== '@never' && rval !== '@link' &&
          rval !== '@first' && rval !== '@last' && rval !== '@once') {
          throw new JsonLdError_1(
            'Invalid JSON-LD syntax; invalid value of @embed.',
            'jsonld.SyntaxError', {code: 'invalid @embed value', frame});
        }
      }
      return rval;
    }

    /**
     * Validates a JSON-LD frame, throwing an exception if the frame is invalid.
     *
     * @param frame the frame to validate.
     */
    function _validateFrame(frame) {
      if(!types.isArray(frame) || frame.length !== 1 || !types.isObject(frame[0])) {
        throw new JsonLdError_1(
          'Invalid JSON-LD syntax; a JSON-LD frame must be a single object.',
          'jsonld.SyntaxError', {frame});
      }

      if('@id' in frame[0]) {
        for(const id of util.asArray(frame[0]['@id'])) {
          // @id must be wildcard or an IRI
          if(!(types.isObject(id) || url.isAbsolute(id)) ||
            (types.isString(id) && id.indexOf('_:') === 0)) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; invalid @id in frame.',
              'jsonld.SyntaxError', {code: 'invalid frame', frame});
          }
        }
      }

      if('@type' in frame[0]) {
        for(const type of util.asArray(frame[0]['@type'])) {
          // @id must be wildcard or an IRI
          if(!(types.isObject(type) || url.isAbsolute(type)) ||
            (types.isString(type) && type.indexOf('_:') === 0)) {
            throw new JsonLdError_1(
              'Invalid JSON-LD syntax; invalid @type in frame.',
              'jsonld.SyntaxError', {code: 'invalid frame', frame});
          }
        }
      }
    }

    /**
     * Returns a map of all of the subjects that match a parsed frame.
     *
     * @param state the current framing state.
     * @param subjects the set of subjects to filter.
     * @param frame the parsed frame.
     * @param flags the frame flags.
     *
     * @return all of the matched subjects.
     */
    function _filterSubjects(state, subjects, frame, flags) {
      // filter subjects in @id order
      const rval = {};
      for(const id of subjects) {
        const subject = state.graphMap[state.graph][id];
        if(_filterSubject(state, subject, frame, flags)) {
          rval[id] = subject;
        }
      }
      return rval;
    }

    /**
     * Returns true if the given subject matches the given frame.
     *
     * Matches either based on explicit type inclusion where the node has any
     * type listed in the frame. If the frame has empty types defined matches
     * nodes not having a @type. If the frame has a type of {} defined matches
     * nodes having any type defined.
     *
     * Otherwise, does duck typing, where the node must have all of the
     * properties defined in the frame.
     *
     * @param state the current framing state.
     * @param subject the subject to check.
     * @param frame the frame to check.
     * @param flags the frame flags.
     *
     * @return true if the subject matches, false if not.
     */
    function _filterSubject(state, subject, frame, flags) {
      // check ducktype
      let wildcard = true;
      let matchesSome = false;

      for(const key in frame) {
        let matchThis = false;
        const nodeValues = util.getValues(subject, key);
        const isEmpty = util.getValues(frame, key).length === 0;

        if(key === '@id') {
          // match on no @id or any matching @id, including wildcard
          if(types.isEmptyObject(frame['@id'][0] || {})) {
            matchThis = true;
          } else if(frame['@id'].length >= 0) {
            matchThis = frame['@id'].includes(nodeValues[0]);
          }
          if(!flags.requireAll) {
            return matchThis;
          }
        } else if(key === '@type') {
          // check @type (object value means 'any' type,
          // fall through to ducktyping)
          wildcard = false;
          if(isEmpty) {
            if(nodeValues.length > 0) {
              // don't match on no @type
              return false;
            }
            matchThis = true;
          } else if(frame['@type'].length === 1 &&
            types.isEmptyObject(frame['@type'][0])) {
            // match on wildcard @type if there is a type
            matchThis = nodeValues.length > 0;
          } else {
            // match on a specific @type
            for(const type of frame['@type']) {
              if(types.isObject(type) && '@default' in type) {
                // match on default object
                matchThis = true;
              } else {
                matchThis = matchThis || nodeValues.some(tt => tt === type);
              }
            }
          }
          if(!flags.requireAll) {
            return matchThis;
          }
        } else if(isKeyword(key)) {
          continue;
        } else {
          // Force a copy of this frame entry so it can be manipulated
          const thisFrame = util.getValues(frame, key)[0];
          let hasDefault = false;
          if(thisFrame) {
            _validateFrame([thisFrame]);
            hasDefault = '@default' in thisFrame;
          }

          // no longer a wildcard pattern if frame has any non-keyword properties
          wildcard = false;

          // skip, but allow match if node has no value for property, and frame has
          // a default value
          if(nodeValues.length === 0 && hasDefault) {
            continue;
          }

          // if frame value is empty, don't match if subject has any value
          if(nodeValues.length > 0 && isEmpty) {
            return false;
          }

          if(thisFrame === undefined) {
            // node does not match if values is not empty and the value of property
            // in frame is match none.
            if(nodeValues.length > 0) {
              return false;
            }
            matchThis = true;
          } else {
            if(graphTypes.isList(thisFrame)) {
              const listValue = thisFrame['@list'][0];
              if(graphTypes.isList(nodeValues[0])) {
                const nodeListValues = nodeValues[0]['@list'];

                if(graphTypes.isValue(listValue)) {
                  // match on any matching value
                  matchThis = nodeListValues.some(lv => _valueMatch(listValue, lv));
                } else if(graphTypes.isSubject(listValue) ||
                  graphTypes.isSubjectReference(listValue)) {
                  matchThis = nodeListValues.some(lv => _nodeMatch(
                    state, listValue, lv, flags));
                }
              }
            } else if(graphTypes.isValue(thisFrame)) {
              matchThis = nodeValues.some(nv => _valueMatch(thisFrame, nv));
            } else if(graphTypes.isSubjectReference(thisFrame)) {
              matchThis =
                nodeValues.some(nv => _nodeMatch(state, thisFrame, nv, flags));
            } else if(types.isObject(thisFrame)) {
              matchThis = nodeValues.length > 0;
            } else {
              matchThis = false;
            }
          }
        }

        // all non-defaulted values must match if requireAll is set
        if(!matchThis && flags.requireAll) {
          return false;
        }

        matchesSome = matchesSome || matchThis;
      }

      // return true if wildcard or subject matches some properties
      return wildcard || matchesSome;
    }

    /**
     * Removes an existing embed.
     *
     * @param state the current framing state.
     * @param id the @id of the embed to remove.
     */
    function _removeEmbed(state, id) {
      // get existing embed
      const embeds = state.uniqueEmbeds[state.graph];
      const embed = embeds[id];
      const parent = embed.parent;
      const property = embed.property;

      // create reference to replace embed
      const subject = {'@id': id};

      // remove existing embed
      if(types.isArray(parent)) {
        // replace subject with reference
        for(let i = 0; i < parent.length; ++i) {
          if(util.compareValues(parent[i], subject)) {
            parent[i] = subject;
            break;
          }
        }
      } else {
        // replace subject with reference
        const useArray = types.isArray(parent[property]);
        util.removeValue(parent, property, subject, {propertyIsArray: useArray});
        util.addValue(parent, property, subject, {propertyIsArray: useArray});
      }

      // recursively remove dependent dangling embeds
      const removeDependents = id => {
        // get embed keys as a separate array to enable deleting keys in map
        const ids = Object.keys(embeds);
        for(const next of ids) {
          if(next in embeds && types.isObject(embeds[next].parent) &&
            embeds[next].parent['@id'] === id) {
            delete embeds[next];
            removeDependents(next);
          }
        }
      };
      removeDependents(id);
    }

    /**
     * Removes the @preserve keywords from expanded result of framing.
     *
     * @param input the framed, framed output.
     * @param options the framing options used.
     *
     * @return the resulting output.
     */
    function _cleanupPreserve(input, options) {
      // recurse through arrays
      if(types.isArray(input)) {
        return input.map(value => _cleanupPreserve(value, options));
      }

      if(types.isObject(input)) {
        // remove @preserve
        if('@preserve' in input) {
          return input['@preserve'][0];
        }

        // skip @values
        if(graphTypes.isValue(input)) {
          return input;
        }

        // recurse through @lists
        if(graphTypes.isList(input)) {
          input['@list'] = _cleanupPreserve(input['@list'], options);
          return input;
        }

        // handle in-memory linked nodes
        if('@id' in input) {
          const id = input['@id'];
          if(options.link.hasOwnProperty(id)) {
            const idx = options.link[id].indexOf(input);
            if(idx !== -1) {
              // already visited
              return options.link[id][idx];
            }
            // prevent circular visitation
            options.link[id].push(input);
          } else {
            // prevent circular visitation
            options.link[id] = [input];
          }
        }

        // recurse through properties
        for(const prop in input) {
          // potentially remove the id, if it is an unreference bnode
          if(prop === '@id' && options.bnodesToClear.includes(input[prop])) {
            delete input['@id'];
            continue;
          }

          input[prop] = _cleanupPreserve(input[prop], options);
        }
      }
      return input;
    }

    /**
     * Adds framing output to the given parent.
     *
     * @param parent the parent to add to.
     * @param property the parent property.
     * @param output the output to add.
     */
    function _addFrameOutput(parent, property, output) {
      if(types.isObject(parent)) {
        util.addValue(parent, property, output, {propertyIsArray: true});
      } else {
        parent.push(output);
      }
    }

    /**
     * Node matches if it is a node, and matches the pattern as a frame.
     *
     * @param state the current framing state.
     * @param pattern used to match value
     * @param value to check
     * @param flags the frame flags.
     */
    function _nodeMatch(state, pattern, value, flags) {
      if(!('@id' in value)) {
        return false;
      }
      const nodeObject = state.subjects[value['@id']];
      return nodeObject && _filterSubject(state, nodeObject, pattern, flags);
    }

    /**
     * Value matches if it is a value and matches the value pattern
     *
     * * `pattern` is empty
     * * @values are the same, or `pattern[@value]` is a wildcard, and
     * * @types are the same or `value[@type]` is not null
     *   and `pattern[@type]` is `{}`, or `value[@type]` is null
     *   and `pattern[@type]` is null or `[]`, and
     * * @languages are the same or `value[@language]` is not null
     *   and `pattern[@language]` is `{}`, or `value[@language]` is null
     *   and `pattern[@language]` is null or `[]`.
     *
     * @param pattern used to match value
     * @param value to check
     */
    function _valueMatch(pattern, value) {
      const v1 = value['@value'];
      const t1 = value['@type'];
      const l1 = value['@language'];
      const v2 = pattern['@value'] ?
        (types.isArray(pattern['@value']) ?
          pattern['@value'] : [pattern['@value']]) :
        [];
      const t2 = pattern['@type'] ?
        (types.isArray(pattern['@type']) ?
          pattern['@type'] : [pattern['@type']]) :
        [];
      const l2 = pattern['@language'] ?
        (types.isArray(pattern['@language']) ?
          pattern['@language'] : [pattern['@language']]) :
        [];

      if(v2.length === 0 && t2.length === 0 && l2.length === 0) {
        return true;
      }
      if(!(v2.includes(v1) || types.isEmptyObject(v2[0]))) {
        return false;
      }
      if(!(!t1 && t2.length === 0 || t2.includes(t1) || t1 &&
        types.isEmptyObject(t2[0]))) {
        return false;
      }
      if(!(!l1 && l2.length === 0 || l2.includes(l1) || l1 &&
        types.isEmptyObject(l2[0]))) {
        return false;
      }
      return true;
    }

    /*
     * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.
     */



    const {
      isArray: _isArray$1,
      isObject: _isObject$1,
      isString: _isString$1,
      isUndefined: _isUndefined
    } = types;

    const {
      isList: _isList,
      isValue: _isValue,
      isGraph: _isGraph,
      isSimpleGraph: _isSimpleGraph,
      isSubjectReference: _isSubjectReference$1
    } = graphTypes;

    const {
      expandIri: _expandIri$1,
      getContextValue: _getContextValue,
      isKeyword: _isKeyword,
      process: _processContext$1,
      processingMode: _processingMode$1
    } = context;

    const {
      removeBase: _removeBase,
      prependBase: _prependBase
    } = url;

    const {
      addValue: _addValue,
      asArray: _asArray,
      compareShortestLeast: _compareShortestLeast
    } = util;

    const api = {};
    var compact = api;

    /**
     * Recursively compacts an element using the given active context. All values
     * must be in expanded form before this method is called.
     *
     * @param activeCtx the active context to use.
     * @param activeProperty the compacted property associated with the element
     *          to compact, null for none.
     * @param element the element to compact.
     * @param options the compaction options.
     * @param compactionMap the compaction map to use.
     *
     * @return a promise that resolves to the compacted value.
     */
    api.compact = async ({
      activeCtx,
      activeProperty = null,
      element,
      options = {},
      compactionMap = () => undefined
    }) => {
      // recursively compact array
      if(_isArray$1(element)) {
        let rval = [];
        for(let i = 0; i < element.length; ++i) {
          // compact, dropping any null values unless custom mapped
          let compacted = await api.compact({
            activeCtx,
            activeProperty,
            element: element[i],
            options,
            compactionMap
          });
          if(compacted === null) {
            compacted = await compactionMap({
              unmappedValue: element[i],
              activeCtx,
              activeProperty,
              parent: element,
              index: i,
              options
            });
            if(compacted === undefined) {
              continue;
            }
          }
          rval.push(compacted);
        }
        if(options.compactArrays && rval.length === 1) {
          // use single element if no container is specified
          const container = _getContextValue(
            activeCtx, activeProperty, '@container') || [];
          if(container.length === 0) {
            rval = rval[0];
          }
        }
        return rval;
      }

      // use any scoped context on activeProperty
      const ctx = _getContextValue(activeCtx, activeProperty, '@context');
      if(!_isUndefined(ctx)) {
        activeCtx = await _processContext$1({
          activeCtx,
          localCtx: ctx,
          propagate: true,
          overrideProtected: true,
          options
        });
      }

      // recursively compact object
      if(_isObject$1(element)) {
        if(options.link && '@id' in element &&
          options.link.hasOwnProperty(element['@id'])) {
          // check for a linked element to reuse
          const linked = options.link[element['@id']];
          for(let i = 0; i < linked.length; ++i) {
            if(linked[i].expanded === element) {
              return linked[i].compacted;
            }
          }
        }

        // do value compaction on @values and subject references
        if(_isValue(element) || _isSubjectReference$1(element)) {
          const rval =
            api.compactValue({activeCtx, activeProperty, value: element, options});
          if(options.link && _isSubjectReference$1(element)) {
            // store linked element
            if(!(options.link.hasOwnProperty(element['@id']))) {
              options.link[element['@id']] = [];
            }
            options.link[element['@id']].push({expanded: element, compacted: rval});
          }
          return rval;
        }

        // if expanded property is @list and we're contained within a list
        // container, recursively compact this item to an array
        if(_isList(element)) {
          const container = _getContextValue(
            activeCtx, activeProperty, '@container') || [];
          if(container.includes('@list')) {
            return api.compact({
              activeCtx,
              activeProperty,
              element: element['@list'],
              options,
              compactionMap
            });
          }
        }

        // FIXME: avoid misuse of active property as an expanded property?
        const insideReverse = (activeProperty === '@reverse');

        const rval = {};

        // original context before applying property-scoped and local contexts
        const inputCtx = activeCtx;

        // revert to previous context, if there is one,
        // and element is not a value object or a node reference
        if(!_isValue(element) && !_isSubjectReference$1(element)) {
          activeCtx = activeCtx.revertToPreviousContext();
        }

        // apply property-scoped context after reverting term-scoped context
        const propertyScopedCtx =
          _getContextValue(inputCtx, activeProperty, '@context');
        if(!_isUndefined(propertyScopedCtx)) {
          activeCtx = await _processContext$1({
            activeCtx,
            localCtx: propertyScopedCtx,
            propagate: true,
            overrideProtected: true,
            options
          });
        }

        if(options.link && '@id' in element) {
          // store linked element
          if(!options.link.hasOwnProperty(element['@id'])) {
            options.link[element['@id']] = [];
          }
          options.link[element['@id']].push({expanded: element, compacted: rval});
        }

        // apply any context defined on an alias of @type
        // if key is @type and any compacted value is a term having a local
        // context, overlay that context
        let types = element['@type'] || [];
        if(types.length > 1) {
          types = Array.from(types).sort();
        }
        // find all type-scoped contexts based on current context, prior to
        // updating it
        const typeContext = activeCtx;
        for(const type of types) {
          const compactedType = api.compactIri(
            {activeCtx: typeContext, iri: type, relativeTo: {vocab: true}});

          // Use any type-scoped context defined on this value
          const ctx = _getContextValue(inputCtx, compactedType, '@context');
          if(!_isUndefined(ctx)) {
            activeCtx = await _processContext$1({
              activeCtx,
              localCtx: ctx,
              options,
              propagate: false
            });
          }
        }

        // process element keys in order
        const keys = Object.keys(element).sort();
        for(const expandedProperty of keys) {
          const expandedValue = element[expandedProperty];

          // compact @id
          if(expandedProperty === '@id') {
            let compactedValue = _asArray(expandedValue).map(
              expandedIri => api.compactIri({
                activeCtx,
                iri: expandedIri,
                relativeTo: {vocab: false},
                base: options.base
              }));
            if(compactedValue.length === 1) {
              compactedValue = compactedValue[0];
            }

            // use keyword alias and add value
            const alias = api.compactIri(
              {activeCtx, iri: '@id', relativeTo: {vocab: true}});

            rval[alias] = compactedValue;
            continue;
          }

          // compact @type(s)
          if(expandedProperty === '@type') {
            // resolve type values against previous context
            let compactedValue = _asArray(expandedValue).map(
              expandedIri => api.compactIri({
                activeCtx: inputCtx,
                iri: expandedIri,
                relativeTo: {vocab: true}
              }));
            if(compactedValue.length === 1) {
              compactedValue = compactedValue[0];
            }

            // use keyword alias and add value
            const alias = api.compactIri(
              {activeCtx, iri: '@type', relativeTo: {vocab: true}});
            const container = _getContextValue(
              activeCtx, alias, '@container') || [];

            // treat as array for @type if @container includes @set
            const typeAsSet =
              container.includes('@set') &&
              _processingMode$1(activeCtx, 1.1);
            const isArray =
              typeAsSet || (_isArray$1(compactedValue) && expandedValue.length === 0);
            _addValue(rval, alias, compactedValue, {propertyIsArray: isArray});
            continue;
          }

          // handle @reverse
          if(expandedProperty === '@reverse') {
            // recursively compact expanded value
            const compactedValue = await api.compact({
              activeCtx,
              activeProperty: '@reverse',
              element: expandedValue,
              options,
              compactionMap
            });

            // handle double-reversed properties
            for(const compactedProperty in compactedValue) {
              if(activeCtx.mappings.has(compactedProperty) &&
                activeCtx.mappings.get(compactedProperty).reverse) {
                const value = compactedValue[compactedProperty];
                const container = _getContextValue(
                  activeCtx, compactedProperty, '@container') || [];
                const useArray = (
                  container.includes('@set') || !options.compactArrays);
                _addValue(
                  rval, compactedProperty, value, {propertyIsArray: useArray});
                delete compactedValue[compactedProperty];
              }
            }

            if(Object.keys(compactedValue).length > 0) {
              // use keyword alias and add value
              const alias = api.compactIri({
                activeCtx,
                iri: expandedProperty,
                relativeTo: {vocab: true}
              });
              _addValue(rval, alias, compactedValue);
            }

            continue;
          }

          if(expandedProperty === '@preserve') {
            // compact using activeProperty
            const compactedValue = await api.compact({
              activeCtx,
              activeProperty,
              element: expandedValue,
              options,
              compactionMap
            });

            if(!(_isArray$1(compactedValue) && compactedValue.length === 0)) {
              _addValue(rval, expandedProperty, compactedValue);
            }
            continue;
          }

          // handle @index property
          if(expandedProperty === '@index') {
            // drop @index if inside an @index container
            const container = _getContextValue(
              activeCtx, activeProperty, '@container') || [];
            if(container.includes('@index')) {
              continue;
            }

            // use keyword alias and add value
            const alias = api.compactIri({
              activeCtx,
              iri: expandedProperty,
              relativeTo: {vocab: true}
            });
            _addValue(rval, alias, expandedValue);
            continue;
          }

          // skip array processing for keywords that aren't
          // @graph, @list, or @included
          if(expandedProperty !== '@graph' && expandedProperty !== '@list' &&
            expandedProperty !== '@included' &&
            _isKeyword(expandedProperty)) {
            // use keyword alias and add value as is
            const alias = api.compactIri({
              activeCtx,
              iri: expandedProperty,
              relativeTo: {vocab: true}
            });
            _addValue(rval, alias, expandedValue);
            continue;
          }

          // Note: expanded value must be an array due to expansion algorithm.
          if(!_isArray$1(expandedValue)) {
            throw new JsonLdError_1(
              'JSON-LD expansion error; expanded value must be an array.',
              'jsonld.SyntaxError');
          }

          // preserve empty arrays
          if(expandedValue.length === 0) {
            const itemActiveProperty = api.compactIri({
              activeCtx,
              iri: expandedProperty,
              value: expandedValue,
              relativeTo: {vocab: true},
              reverse: insideReverse
            });
            const nestProperty = activeCtx.mappings.has(itemActiveProperty) ?
              activeCtx.mappings.get(itemActiveProperty)['@nest'] : null;
            let nestResult = rval;
            if(nestProperty) {
              _checkNestProperty(activeCtx, nestProperty, options);
              if(!_isObject$1(rval[nestProperty])) {
                rval[nestProperty] = {};
              }
              nestResult = rval[nestProperty];
            }
            _addValue(
              nestResult, itemActiveProperty, expandedValue, {
                propertyIsArray: true
              });
          }

          // recusively process array values
          for(const expandedItem of expandedValue) {
            // compact property and get container type
            const itemActiveProperty = api.compactIri({
              activeCtx,
              iri: expandedProperty,
              value: expandedItem,
              relativeTo: {vocab: true},
              reverse: insideReverse
            });

            // if itemActiveProperty is a @nest property, add values to nestResult,
            // otherwise rval
            const nestProperty = activeCtx.mappings.has(itemActiveProperty) ?
              activeCtx.mappings.get(itemActiveProperty)['@nest'] : null;
            let nestResult = rval;
            if(nestProperty) {
              _checkNestProperty(activeCtx, nestProperty, options);
              if(!_isObject$1(rval[nestProperty])) {
                rval[nestProperty] = {};
              }
              nestResult = rval[nestProperty];
            }

            const container = _getContextValue(
              activeCtx, itemActiveProperty, '@container') || [];

            // get simple @graph or @list value if appropriate
            const isGraph = _isGraph(expandedItem);
            const isList = _isList(expandedItem);
            let inner;
            if(isList) {
              inner = expandedItem['@list'];
            } else if(isGraph) {
              inner = expandedItem['@graph'];
            }

            // recursively compact expanded item
            let compactedItem = await api.compact({
              activeCtx,
              activeProperty: itemActiveProperty,
              element: (isList || isGraph) ? inner : expandedItem,
              options,
              compactionMap
            });

            // handle @list
            if(isList) {
              // ensure @list value is an array
              if(!_isArray$1(compactedItem)) {
                compactedItem = [compactedItem];
              }

              if(!container.includes('@list')) {
                // wrap using @list alias
                compactedItem = {
                  [api.compactIri({
                    activeCtx,
                    iri: '@list',
                    relativeTo: {vocab: true}
                  })]: compactedItem
                };

                // include @index from expanded @list, if any
                if('@index' in expandedItem) {
                  compactedItem[api.compactIri({
                    activeCtx,
                    iri: '@index',
                    relativeTo: {vocab: true}
                  })] = expandedItem['@index'];
                }
              } else {
                _addValue(nestResult, itemActiveProperty, compactedItem, {
                  valueIsArray: true,
                  allowDuplicate: true
                });
                continue;
              }
            }

            // Graph object compaction cases
            if(isGraph) {
              if(container.includes('@graph') && (container.includes('@id') ||
                container.includes('@index') && _isSimpleGraph(expandedItem))) {
                // get or create the map object
                let mapObject;
                if(nestResult.hasOwnProperty(itemActiveProperty)) {
                  mapObject = nestResult[itemActiveProperty];
                } else {
                  nestResult[itemActiveProperty] = mapObject = {};
                }

                // index on @id or @index or alias of @none
                const key = (container.includes('@id') ?
                  expandedItem['@id'] : expandedItem['@index']) ||
                  api.compactIri({activeCtx, iri: '@none',
                    relativeTo: {vocab: true}});
                // add compactedItem to map, using value of `@id` or a new blank
                // node identifier

                _addValue(
                  mapObject, key, compactedItem, {
                    propertyIsArray:
                      (!options.compactArrays || container.includes('@set'))
                  });
              } else if(container.includes('@graph') &&
                _isSimpleGraph(expandedItem)) {
                // container includes @graph but not @id or @index and value is a
                // simple graph object add compact value
                // if compactedItem contains multiple values, it is wrapped in
                // `@included`
                if(_isArray$1(compactedItem) && compactedItem.length > 1) {
                  compactedItem = {'@included': compactedItem};
                }
                _addValue(
                  nestResult, itemActiveProperty, compactedItem, {
                    propertyIsArray:
                      (!options.compactArrays || container.includes('@set'))
                  });
              } else {
                // wrap using @graph alias, remove array if only one item and
                // compactArrays not set
                if(_isArray$1(compactedItem) && compactedItem.length === 1 &&
                  options.compactArrays) {
                  compactedItem = compactedItem[0];
                }
                compactedItem = {
                  [api.compactIri({
                    activeCtx,
                    iri: '@graph',
                    relativeTo: {vocab: true}
                  })]: compactedItem
                };

                // include @id from expanded graph, if any
                if('@id' in expandedItem) {
                  compactedItem[api.compactIri({
                    activeCtx,
                    iri: '@id',
                    relativeTo: {vocab: true}
                  })] = expandedItem['@id'];
                }

                // include @index from expanded graph, if any
                if('@index' in expandedItem) {
                  compactedItem[api.compactIri({
                    activeCtx,
                    iri: '@index',
                    relativeTo: {vocab: true}
                  })] = expandedItem['@index'];
                }
                _addValue(
                  nestResult, itemActiveProperty, compactedItem, {
                    propertyIsArray:
                      (!options.compactArrays || container.includes('@set'))
                  });
              }
            } else if(container.includes('@language') ||
              container.includes('@index') || container.includes('@id') ||
              container.includes('@type')) {
              // handle language and index maps
              // get or create the map object
              let mapObject;
              if(nestResult.hasOwnProperty(itemActiveProperty)) {
                mapObject = nestResult[itemActiveProperty];
              } else {
                nestResult[itemActiveProperty] = mapObject = {};
              }

              let key;
              if(container.includes('@language')) {
              // if container is a language map, simplify compacted value to
              // a simple string
                if(_isValue(compactedItem)) {
                  compactedItem = compactedItem['@value'];
                }
                key = expandedItem['@language'];
              } else if(container.includes('@index')) {
                const indexKey = _getContextValue(
                  activeCtx, itemActiveProperty, '@index') || '@index';
                const containerKey = api.compactIri(
                  {activeCtx, iri: indexKey, relativeTo: {vocab: true}});
                if(indexKey === '@index') {
                  key = expandedItem['@index'];
                  delete compactedItem[containerKey];
                } else {
                  let others;
                  [key, ...others] = _asArray(compactedItem[indexKey] || []);
                  if(!_isString$1(key)) {
                    // Will use @none if it isn't a string.
                    key = null;
                  } else {
                    switch(others.length) {
                      case 0:
                        delete compactedItem[indexKey];
                        break;
                      case 1:
                        compactedItem[indexKey] = others[0];
                        break;
                      default:
                        compactedItem[indexKey] = others;
                        break;
                    }
                  }
                }
              } else if(container.includes('@id')) {
                const idKey = api.compactIri({activeCtx, iri: '@id',
                  relativeTo: {vocab: true}});
                key = compactedItem[idKey];
                delete compactedItem[idKey];
              } else if(container.includes('@type')) {
                const typeKey = api.compactIri({
                  activeCtx,
                  iri: '@type',
                  relativeTo: {vocab: true}
                });
                let types;
                [key, ...types] = _asArray(compactedItem[typeKey] || []);
                switch(types.length) {
                  case 0:
                    delete compactedItem[typeKey];
                    break;
                  case 1:
                    compactedItem[typeKey] = types[0];
                    break;
                  default:
                    compactedItem[typeKey] = types;
                    break;
                }

                // If compactedItem contains a single entry
                // whose key maps to @id, recompact without @type
                if(Object.keys(compactedItem).length === 1 &&
                  '@id' in expandedItem) {
                  compactedItem = await api.compact({
                    activeCtx,
                    activeProperty: itemActiveProperty,
                    element: {'@id': expandedItem['@id']},
                    options,
                    compactionMap
                  });
                }
              }

              // if compacting this value which has no key, index on @none
              if(!key) {
                key = api.compactIri({activeCtx, iri: '@none',
                  relativeTo: {vocab: true}});
              }
              // add compact value to map object using key from expanded value
              // based on the container type
              _addValue(
                mapObject, key, compactedItem, {
                  propertyIsArray: container.includes('@set')
                });
            } else {
              // use an array if: compactArrays flag is false,
              // @container is @set or @list , value is an empty
              // array, or key is @graph
              const isArray = (!options.compactArrays ||
                container.includes('@set') || container.includes('@list') ||
                (_isArray$1(compactedItem) && compactedItem.length === 0) ||
                expandedProperty === '@list' || expandedProperty === '@graph');

              // add compact value
              _addValue(
                nestResult, itemActiveProperty, compactedItem,
                {propertyIsArray: isArray});
            }
          }
        }

        return rval;
      }

      // only primitives remain which are already compact
      return element;
    };

    /**
     * Compacts an IRI or keyword into a term or prefix if it can be. If the
     * IRI has an associated value it may be passed.
     *
     * @param activeCtx the active context to use.
     * @param iri the IRI to compact.
     * @param value the value to check or null.
     * @param relativeTo options for how to compact IRIs:
     *          vocab: true to split after @vocab, false not to.
     * @param reverse true if a reverse property is being compacted, false if not.
     * @param base the absolute URL to use for compacting document-relative IRIs.
     *
     * @return the compacted term, prefix, keyword alias, or the original IRI.
     */
    api.compactIri = ({
      activeCtx,
      iri,
      value = null,
      relativeTo = {vocab: false},
      reverse = false,
      base = null
    }) => {
      // can't compact null
      if(iri === null) {
        return iri;
      }

      // if context is from a property term scoped context composed with a
      // type-scoped context, then use the previous context instead
      if(activeCtx.isPropertyTermScoped && activeCtx.previousContext) {
        activeCtx = activeCtx.previousContext;
      }

      const inverseCtx = activeCtx.getInverse();

      // if term is a keyword, it may be compacted to a simple alias
      if(_isKeyword(iri) &&
        iri in inverseCtx &&
        '@none' in inverseCtx[iri] &&
        '@type' in inverseCtx[iri]['@none'] &&
        '@none' in inverseCtx[iri]['@none']['@type']) {
        return inverseCtx[iri]['@none']['@type']['@none'];
      }

      // use inverse context to pick a term if iri is relative to vocab
      if(relativeTo.vocab && iri in inverseCtx) {
        const defaultLanguage = activeCtx['@language'] || '@none';

        // prefer @index if available in value
        const containers = [];
        if(_isObject$1(value) && '@index' in value && !('@graph' in value)) {
          containers.push('@index', '@index@set');
        }

        // if value is a preserve object, use its value
        if(_isObject$1(value) && '@preserve' in value) {
          value = value['@preserve'][0];
        }

        // prefer most specific container including @graph, prefering @set
        // variations
        if(_isGraph(value)) {
          // favor indexmap if the graph is indexed
          if('@index' in value) {
            containers.push(
              '@graph@index', '@graph@index@set', '@index', '@index@set');
          }
          // favor idmap if the graph is has an @id
          if('@id' in value) {
            containers.push(
              '@graph@id', '@graph@id@set');
          }
          containers.push('@graph', '@graph@set', '@set');
          // allow indexmap if the graph is not indexed
          if(!('@index' in value)) {
            containers.push(
              '@graph@index', '@graph@index@set', '@index', '@index@set');
          }
          // allow idmap if the graph does not have an @id
          if(!('@id' in value)) {
            containers.push('@graph@id', '@graph@id@set');
          }
        } else if(_isObject$1(value) && !_isValue(value)) {
          containers.push('@id', '@id@set', '@type', '@set@type');
        }

        // defaults for term selection based on type/language
        let typeOrLanguage = '@language';
        let typeOrLanguageValue = '@null';

        if(reverse) {
          typeOrLanguage = '@type';
          typeOrLanguageValue = '@reverse';
          containers.push('@set');
        } else if(_isList(value)) {
          // choose the most specific term that works for all elements in @list
          // only select @list containers if @index is NOT in value
          if(!('@index' in value)) {
            containers.push('@list');
          }
          const list = value['@list'];
          if(list.length === 0) {
            // any empty list can be matched against any term that uses the
            // @list container regardless of @type or @language
            typeOrLanguage = '@any';
            typeOrLanguageValue = '@none';
          } else {
            let commonLanguage = (list.length === 0) ? defaultLanguage : null;
            let commonType = null;
            for(let i = 0; i < list.length; ++i) {
              const item = list[i];
              let itemLanguage = '@none';
              let itemType = '@none';
              if(_isValue(item)) {
                if('@direction' in item) {
                  const lang = (item['@language'] || '').toLowerCase();
                  const dir = item['@direction'];
                  itemLanguage = `${lang}_${dir}`;
                } else if('@language' in item) {
                  itemLanguage = item['@language'].toLowerCase();
                } else if('@type' in item) {
                  itemType = item['@type'];
                } else {
                  // plain literal
                  itemLanguage = '@null';
                }
              } else {
                itemType = '@id';
              }
              if(commonLanguage === null) {
                commonLanguage = itemLanguage;
              } else if(itemLanguage !== commonLanguage && _isValue(item)) {
                commonLanguage = '@none';
              }
              if(commonType === null) {
                commonType = itemType;
              } else if(itemType !== commonType) {
                commonType = '@none';
              }
              // there are different languages and types in the list, so choose
              // the most generic term, no need to keep iterating the list
              if(commonLanguage === '@none' && commonType === '@none') {
                break;
              }
            }
            commonLanguage = commonLanguage || '@none';
            commonType = commonType || '@none';
            if(commonType !== '@none') {
              typeOrLanguage = '@type';
              typeOrLanguageValue = commonType;
            } else {
              typeOrLanguageValue = commonLanguage;
            }
          }
        } else {
          if(_isValue(value)) {
            if('@language' in value && !('@index' in value)) {
              containers.push('@language', '@language@set');
              typeOrLanguageValue = value['@language'];
              const dir = value['@direction'];
              if(dir) {
                typeOrLanguageValue = `${typeOrLanguageValue}_${dir}`;
              }
            } else if('@direction' in value && !('@index' in value)) {
              typeOrLanguageValue = `_${value['@direction']}`;
            } else if('@type' in value) {
              typeOrLanguage = '@type';
              typeOrLanguageValue = value['@type'];
            }
          } else {
            typeOrLanguage = '@type';
            typeOrLanguageValue = '@id';
          }
          containers.push('@set');
        }

        // do term selection
        containers.push('@none');

        // an index map can be used to index values using @none, so add as a low
        // priority
        if(_isObject$1(value) && !('@index' in value)) {
          // allow indexing even if no @index present
          containers.push('@index', '@index@set');
        }

        // values without type or language can use @language map
        if(_isValue(value) && Object.keys(value).length === 1) {
          // allow indexing even if no @index present
          containers.push('@language', '@language@set');
        }

        const term = _selectTerm(
          activeCtx, iri, value, containers, typeOrLanguage, typeOrLanguageValue);
        if(term !== null) {
          return term;
        }
      }

      // no term match, use @vocab if available
      if(relativeTo.vocab) {
        if('@vocab' in activeCtx) {
          // determine if vocab is a prefix of the iri
          const vocab = activeCtx['@vocab'];
          if(iri.indexOf(vocab) === 0 && iri !== vocab) {
            // use suffix as relative iri if it is not a term in the active context
            const suffix = iri.substr(vocab.length);
            if(!activeCtx.mappings.has(suffix)) {
              return suffix;
            }
          }
        }
      }

      // no term or @vocab match, check for possible CURIEs
      let choice = null;
      // TODO: make FastCurieMap a class with a method to do this lookup
      const partialMatches = [];
      let iriMap = activeCtx.fastCurieMap;
      // check for partial matches of against `iri`, which means look until
      // iri.length - 1, not full length
      const maxPartialLength = iri.length - 1;
      for(let i = 0; i < maxPartialLength && iri[i] in iriMap; ++i) {
        iriMap = iriMap[iri[i]];
        if('' in iriMap) {
          partialMatches.push(iriMap[''][0]);
        }
      }
      // check partial matches in reverse order to prefer longest ones first
      for(let i = partialMatches.length - 1; i >= 0; --i) {
        const entry = partialMatches[i];
        const terms = entry.terms;
        for(const term of terms) {
          // a CURIE is usable if:
          // 1. it has no mapping, OR
          // 2. value is null, which means we're not compacting an @value, AND
          //   the mapping matches the IRI
          const curie = term + ':' + iri.substr(entry.iri.length);
          const isUsableCurie = (activeCtx.mappings.get(term)._prefix &&
            (!activeCtx.mappings.has(curie) ||
            (value === null && activeCtx.mappings.get(curie)['@id'] === iri)));

          // select curie if it is shorter or the same length but lexicographically
          // less than the current choice
          if(isUsableCurie && (choice === null ||
            _compareShortestLeast(curie, choice) < 0)) {
            choice = curie;
          }
        }
      }

      // return chosen curie
      if(choice !== null) {
        return choice;
      }

      // If iri could be confused with a compact IRI using a term in this context,
      // signal an error
      for(const [term, td] of activeCtx.mappings) {
        if(td && td._prefix && iri.startsWith(term + ':')) {
          throw new JsonLdError_1(
            `Absolute IRI "${iri}" confused with prefix "${term}".`,
            'jsonld.SyntaxError',
            {code: 'IRI confused with prefix', context: activeCtx});
        }
      }

      // compact IRI relative to base
      if(!relativeTo.vocab) {
        if('@base' in activeCtx) {
          if(!activeCtx['@base']) {
            // The None case preserves rval as potentially relative
            return iri;
          } else {
            return _removeBase(_prependBase(base, activeCtx['@base']), iri);
          }
        } else {
          return _removeBase(base, iri);
        }
      }

      // return IRI as is
      return iri;
    };

    /**
     * Performs value compaction on an object with '@value' or '@id' as the only
     * property.
     *
     * @param activeCtx the active context.
     * @param activeProperty the active property that points to the value.
     * @param value the value to compact.
     * @param {Object} [options] - processing options.
     *
     * @return the compaction result.
     */
    api.compactValue = ({activeCtx, activeProperty, value, options}) => {
      // value is a @value
      if(_isValue(value)) {
        // get context rules
        const type = _getContextValue(activeCtx, activeProperty, '@type');
        const language = _getContextValue(activeCtx, activeProperty, '@language');
        const direction = _getContextValue(activeCtx, activeProperty, '@direction');
        const container =
          _getContextValue(activeCtx, activeProperty, '@container') || [];

        // whether or not the value has an @index that must be preserved
        const preserveIndex = '@index' in value && !container.includes('@index');

        // if there's no @index to preserve ...
        if(!preserveIndex && type !== '@none') {
          // matching @type or @language specified in context, compact value
          if(value['@type'] === type) {
            return value['@value'];
          }
          if('@language' in value && value['@language'] === language &&
             '@direction' in value && value['@direction'] === direction) {
            return value['@value'];
          }
          if('@language' in value && value['@language'] === language) {
            return value['@value'];
          }
          if('@direction' in value && value['@direction'] === direction) {
            return value['@value'];
          }
        }

        // return just the value of @value if all are true:
        // 1. @value is the only key or @index isn't being preserved
        // 2. there is no default language or @value is not a string or
        //   the key has a mapping with a null @language
        const keyCount = Object.keys(value).length;
        const isValueOnlyKey = (keyCount === 1 ||
          (keyCount === 2 && '@index' in value && !preserveIndex));
        const hasDefaultLanguage = ('@language' in activeCtx);
        const isValueString = _isString$1(value['@value']);
        const hasNullMapping = (activeCtx.mappings.has(activeProperty) &&
          activeCtx.mappings.get(activeProperty)['@language'] === null);
        if(isValueOnlyKey &&
          type !== '@none' &&
          (!hasDefaultLanguage || !isValueString || hasNullMapping)) {
          return value['@value'];
        }

        const rval = {};

        // preserve @index
        if(preserveIndex) {
          rval[api.compactIri({
            activeCtx,
            iri: '@index',
            relativeTo: {vocab: true}
          })] = value['@index'];
        }

        if('@type' in value) {
          // compact @type IRI
          rval[api.compactIri({
            activeCtx,
            iri: '@type',
            relativeTo: {vocab: true}
          })] = api.compactIri(
            {activeCtx, iri: value['@type'], relativeTo: {vocab: true}});
        } else if('@language' in value) {
          // alias @language
          rval[api.compactIri({
            activeCtx,
            iri: '@language',
            relativeTo: {vocab: true}
          })] = value['@language'];
        }

        if('@direction' in value) {
          // alias @direction
          rval[api.compactIri({
            activeCtx,
            iri: '@direction',
            relativeTo: {vocab: true}
          })] = value['@direction'];
        }

        // alias @value
        rval[api.compactIri({
          activeCtx,
          iri: '@value',
          relativeTo: {vocab: true}
        })] = value['@value'];

        return rval;
      }

      // value is a subject reference
      const expandedProperty = _expandIri$1(activeCtx, activeProperty, {vocab: true},
        options);
      const type = _getContextValue(activeCtx, activeProperty, '@type');
      const compacted = api.compactIri({
        activeCtx,
        iri: value['@id'],
        relativeTo: {vocab: type === '@vocab'},
        base: options.base});

      // compact to scalar
      if(type === '@id' || type === '@vocab' || expandedProperty === '@graph') {
        return compacted;
      }

      return {
        [api.compactIri({
          activeCtx,
          iri: '@id',
          relativeTo: {vocab: true}
        })]: compacted
      };
    };

    /**
     * Picks the preferred compaction term from the given inverse context entry.
     *
     * @param activeCtx the active context.
     * @param iri the IRI to pick the term for.
     * @param value the value to pick the term for.
     * @param containers the preferred containers.
     * @param typeOrLanguage either '@type' or '@language'.
     * @param typeOrLanguageValue the preferred value for '@type' or '@language'.
     *
     * @return the preferred term.
     */
    function _selectTerm(
      activeCtx, iri, value, containers, typeOrLanguage, typeOrLanguageValue) {
      if(typeOrLanguageValue === null) {
        typeOrLanguageValue = '@null';
      }

      // preferences for the value of @type or @language
      const prefs = [];

      // determine prefs for @id based on whether or not value compacts to a term
      if((typeOrLanguageValue === '@id' || typeOrLanguageValue === '@reverse') &&
        _isObject$1(value) && '@id' in value) {
        // prefer @reverse first
        if(typeOrLanguageValue === '@reverse') {
          prefs.push('@reverse');
        }
        // try to compact value to a term
        const term = api.compactIri(
          {activeCtx, iri: value['@id'], relativeTo: {vocab: true}});
        if(activeCtx.mappings.has(term) &&
          activeCtx.mappings.get(term) &&
          activeCtx.mappings.get(term)['@id'] === value['@id']) {
          // prefer @vocab
          prefs.push.apply(prefs, ['@vocab', '@id']);
        } else {
          // prefer @id
          prefs.push.apply(prefs, ['@id', '@vocab']);
        }
      } else {
        prefs.push(typeOrLanguageValue);

        // consider direction only
        const langDir = prefs.find(el => el.includes('_'));
        if(langDir) {
          // consider _dir portion
          prefs.push(langDir.replace(/^[^_]+_/, '_'));
        }
      }
      prefs.push('@none');

      const containerMap = activeCtx.inverse[iri];
      for(const container of containers) {
        // if container not available in the map, continue
        if(!(container in containerMap)) {
          continue;
        }

        const typeOrLanguageValueMap = containerMap[container][typeOrLanguage];
        for(const pref of prefs) {
          // if type/language option not available in the map, continue
          if(!(pref in typeOrLanguageValueMap)) {
            continue;
          }

          // select term
          return typeOrLanguageValueMap[pref];
        }
      }

      return null;
    }

    /**
     * The value of `@nest` in the term definition must either be `@nest`, or a term
     * which resolves to `@nest`.
     *
     * @param activeCtx the active context.
     * @param nestProperty a term in the active context or `@nest`.
     * @param {Object} [options] - processing options.
     */
    function _checkNestProperty(activeCtx, nestProperty, options) {
      if(_expandIri$1(activeCtx, nestProperty, {vocab: true}, options) !== '@nest') {
        throw new JsonLdError_1(
          'JSON-LD compact error; nested property must have an @nest value ' +
          'resolving to @nest.',
          'jsonld.SyntaxError', {code: 'invalid @nest value'});
      }
    }

    /*
     * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.
     */

    var JsonLdProcessor = jsonld => {
      class JsonLdProcessor {
        toString() {
          return '[object JsonLdProcessor]';
        }
      }
      Object.defineProperty(JsonLdProcessor, 'prototype', {
        writable: false,
        enumerable: false
      });
      Object.defineProperty(JsonLdProcessor.prototype, 'constructor', {
        writable: true,
        enumerable: false,
        configurable: true,
        value: JsonLdProcessor
      });

      // The Web IDL test harness will check the number of parameters defined in
      // the functions below. The number of parameters must exactly match the
      // required (non-optional) parameters of the JsonLdProcessor interface as
      // defined here:
      // https://www.w3.org/TR/json-ld-api/#the-jsonldprocessor-interface

      JsonLdProcessor.compact = function(input, ctx) {
        if(arguments.length < 2) {
          return Promise.reject(
            new TypeError('Could not compact, too few arguments.'));
        }
        return jsonld.compact(input, ctx);
      };
      JsonLdProcessor.expand = function(input) {
        if(arguments.length < 1) {
          return Promise.reject(
            new TypeError('Could not expand, too few arguments.'));
        }
        return jsonld.expand(input);
      };
      JsonLdProcessor.flatten = function(input) {
        if(arguments.length < 1) {
          return Promise.reject(
            new TypeError('Could not flatten, too few arguments.'));
        }
        return jsonld.flatten(input);
      };

      return JsonLdProcessor;
    };

    /**
     * A JavaScript implementation of the JSON-LD API.
     *
     * @author Dave Longley
     *
     * @license BSD 3-Clause License
     * Copyright (c) 2011-2019 Digital Bazaar, Inc.
     * All rights reserved.
     *
     * Redistribution and use in source and binary forms, with or without
     * modification, are permitted provided that the following conditions are met:
     *
     * Redistributions of source code must retain the above copyright notice,
     * this list of conditions and the following disclaimer.
     *
     * Redistributions in binary form must reproduce the above copyright
     * notice, this list of conditions and the following disclaimer in the
     * documentation and/or other materials provided with the distribution.
     *
     * Neither the name of the Digital Bazaar, Inc. nor the names of its
     * contributors may be used to endorse or promote products derived from
     * this software without specific prior written permission.
     *
     * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
     * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
     * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
     * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
     * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
     * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
     * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
     * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
     * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
     * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
     * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     */

    const IdentifierIssuer = util.IdentifierIssuer;




    const {expand: _expand} = expand$1;
    const {flatten: _flatten} = flatten;
    const {fromRDF: _fromRDF} = fromRdf;
    const {toRDF: _toRDF} = toRdf;

    const {
      frameMergedOrDefault: _frameMergedOrDefault,
      cleanupNull: _cleanupNull
    } = frame;

    const {
      isArray: _isArray,
      isObject: _isObject,
      isString: _isString
    } = types;

    const {
      isSubjectReference: _isSubjectReference,
    } = graphTypes;

    const {
      expandIri: _expandIri,
      getInitialContext: _getInitialContext,
      process: _processContext,
      processingMode: _processingMode
    } = context;

    const {
      compact: _compact,
      compactIri: _compactIri
    } = compact;

    const {
      createNodeMap: _createNodeMap,
      createMergedNodeMap: _createMergedNodeMap,
      mergeNodeMaps: _mergeNodeMaps
    } = nodeMap;

    /* eslint-disable indent */
    // attaches jsonld API to the given object
    const wrapper = function(jsonld) {

    /** Registered RDF dataset parsers hashed by content-type. */
    const _rdfParsers = {};

    // resolved context cache
    // TODO: consider basing max on context size rather than number
    const RESOLVED_CONTEXT_CACHE_MAX_SIZE = 100;
    const _resolvedContextCache = new lruCache({max: RESOLVED_CONTEXT_CACHE_MAX_SIZE});

    /* Core API */

    /**
     * Performs JSON-LD compaction.
     *
     * @param input the JSON-LD input to compact.
     * @param ctx the context to compact with.
     * @param [options] options to use:
     *          [base] the base IRI to use.
     *          [compactArrays] true to compact arrays to single values when
     *            appropriate, false not to (default: true).
     *          [compactToRelative] true to compact IRIs to be relative to document
     *            base, false to keep absolute (default: true)
     *          [graph] true to always output a top-level graph (default: false).
     *          [expandContext] a context to expand with.
     *          [skipExpansion] true to assume the input is expanded and skip
     *            expansion, false not to, defaults to false.
     *          [documentLoader(url, options)] the document loader.
     *          [expansionMap(info)] a function that can be used to custom map
     *            unmappable values (or to throw an error when they are detected);
     *            if this function returns `undefined` then the default behavior
     *            will be used.
     *          [framing] true if compaction is occuring during a framing operation.
     *          [compactionMap(info)] a function that can be used to custom map
     *            unmappable values (or to throw an error when they are detected);
     *            if this function returns `undefined` then the default behavior
     *            will be used.
     *          [contextResolver] internal use only.
     *
     * @return a Promise that resolves to the compacted output.
     */
    jsonld.compact = async function(input, ctx, options) {
      if(arguments.length < 2) {
        throw new TypeError('Could not compact, too few arguments.');
      }

      if(ctx === null) {
        throw new JsonLdError_1(
          'The compaction context must not be null.',
          'jsonld.CompactError', {code: 'invalid local context'});
      }

      // nothing to compact
      if(input === null) {
        return null;
      }

      // set default options
      options = _setDefaults(options, {
        base: _isString(input) ? input : '',
        compactArrays: true,
        compactToRelative: true,
        graph: false,
        skipExpansion: false,
        link: false,
        issuer: new IdentifierIssuer('_:b'),
        contextResolver: new ContextResolver_1(
          {sharedCache: _resolvedContextCache})
      });
      if(options.link) {
        // force skip expansion when linking, "link" is not part of the public
        // API, it should only be called from framing
        options.skipExpansion = true;
      }
      if(!options.compactToRelative) {
        delete options.base;
      }

      // expand input
      let expanded;
      if(options.skipExpansion) {
        expanded = input;
      } else {
        expanded = await jsonld.expand(input, options);
      }

      // process context
      const activeCtx = await jsonld.processContext(
        _getInitialContext(options), ctx, options);

      // do compaction
      let compacted = await _compact({
        activeCtx,
        element: expanded,
        options,
        compactionMap: options.compactionMap
      });

      // perform clean up
      if(options.compactArrays && !options.graph && _isArray(compacted)) {
        if(compacted.length === 1) {
          // simplify to a single item
          compacted = compacted[0];
        } else if(compacted.length === 0) {
          // simplify to an empty object
          compacted = {};
        }
      } else if(options.graph && _isObject(compacted)) {
        // always use array if graph option is on
        compacted = [compacted];
      }

      // follow @context key
      if(_isObject(ctx) && '@context' in ctx) {
        ctx = ctx['@context'];
      }

      // build output context
      ctx = util.clone(ctx);
      if(!_isArray(ctx)) {
        ctx = [ctx];
      }
      // remove empty contexts
      const tmp = ctx;
      ctx = [];
      for(let i = 0; i < tmp.length; ++i) {
        if(!_isObject(tmp[i]) || Object.keys(tmp[i]).length > 0) {
          ctx.push(tmp[i]);
        }
      }

      // remove array if only one context
      const hasContext = (ctx.length > 0);
      if(ctx.length === 1) {
        ctx = ctx[0];
      }

      // add context and/or @graph
      if(_isArray(compacted)) {
        // use '@graph' keyword
        const graphAlias = _compactIri({
          activeCtx, iri: '@graph', relativeTo: {vocab: true}
        });
        const graph = compacted;
        compacted = {};
        if(hasContext) {
          compacted['@context'] = ctx;
        }
        compacted[graphAlias] = graph;
      } else if(_isObject(compacted) && hasContext) {
        // reorder keys so @context is first
        const graph = compacted;
        compacted = {'@context': ctx};
        for(const key in graph) {
          compacted[key] = graph[key];
        }
      }

      return compacted;
    };

    /**
     * Performs JSON-LD expansion.
     *
     * @param input the JSON-LD input to expand.
     * @param [options] the options to use:
     *          [base] the base IRI to use.
     *          [expandContext] a context to expand with.
     *          [keepFreeFloatingNodes] true to keep free-floating nodes,
     *            false not to, defaults to false.
     *          [documentLoader(url, options)] the document loader.
     *          [expansionMap(info)] a function that can be used to custom map
     *            unmappable values (or to throw an error when they are detected);
     *            if this function returns `undefined` then the default behavior
     *            will be used.
     *          [contextResolver] internal use only.
     *
     * @return a Promise that resolves to the expanded output.
     */
    jsonld.expand = async function(input, options) {
      if(arguments.length < 1) {
        throw new TypeError('Could not expand, too few arguments.');
      }

      // set default options
      options = _setDefaults(options, {
        keepFreeFloatingNodes: false,
        contextResolver: new ContextResolver_1(
          {sharedCache: _resolvedContextCache})
      });
      if(options.expansionMap === false) {
        options.expansionMap = undefined;
      }

      // build set of objects that may have @contexts to resolve
      const toResolve = {};

      // build set of contexts to process prior to expansion
      const contextsToProcess = [];

      // if an `expandContext` has been given ensure it gets resolved
      if('expandContext' in options) {
        const expandContext = util.clone(options.expandContext);
        if(_isObject(expandContext) && '@context' in expandContext) {
          toResolve.expandContext = expandContext;
        } else {
          toResolve.expandContext = {'@context': expandContext};
        }
        contextsToProcess.push(toResolve.expandContext);
      }

      // if input is a string, attempt to dereference remote document
      let defaultBase;
      if(!_isString(input)) {
        // input is not a URL, do not need to retrieve it first
        toResolve.input = util.clone(input);
      } else {
        // load remote doc
        const remoteDoc = await jsonld.get(input, options);
        defaultBase = remoteDoc.documentUrl;
        toResolve.input = remoteDoc.document;
        if(remoteDoc.contextUrl) {
          // context included in HTTP link header and must be resolved
          toResolve.remoteContext = {'@context': remoteDoc.contextUrl};
          contextsToProcess.push(toResolve.remoteContext);
        }
      }

      // set default base
      if(!('base' in options)) {
        options.base = defaultBase || '';
      }

      // process any additional contexts
      let activeCtx = _getInitialContext(options);
      for(const localCtx of contextsToProcess) {
        activeCtx = await _processContext({activeCtx, localCtx, options});
      }

      // expand resolved input
      let expanded = await _expand({
        activeCtx,
        element: toResolve.input,
        options,
        expansionMap: options.expansionMap
      });

      // optimize away @graph with no other properties
      if(_isObject(expanded) && ('@graph' in expanded) &&
        Object.keys(expanded).length === 1) {
        expanded = expanded['@graph'];
      } else if(expanded === null) {
        expanded = [];
      }

      // normalize to an array
      if(!_isArray(expanded)) {
        expanded = [expanded];
      }

      return expanded;
    };

    /**
     * Performs JSON-LD flattening.
     *
     * @param input the JSON-LD to flatten.
     * @param ctx the context to use to compact the flattened output, or null.
     * @param [options] the options to use:
     *          [base] the base IRI to use.
     *          [expandContext] a context to expand with.
     *          [documentLoader(url, options)] the document loader.
     *          [contextResolver] internal use only.
     *
     * @return a Promise that resolves to the flattened output.
     */
    jsonld.flatten = async function(input, ctx, options) {
      if(arguments.length < 1) {
        return new TypeError('Could not flatten, too few arguments.');
      }

      if(typeof ctx === 'function') {
        ctx = null;
      } else {
        ctx = ctx || null;
      }

      // set default options
      options = _setDefaults(options, {
        base: _isString(input) ? input : '',
        contextResolver: new ContextResolver_1(
          {sharedCache: _resolvedContextCache})
      });

      // expand input
      const expanded = await jsonld.expand(input, options);

      // do flattening
      const flattened = _flatten(expanded);

      if(ctx === null) {
        // no compaction required
        return flattened;
      }

      // compact result (force @graph option to true, skip expansion)
      options.graph = true;
      options.skipExpansion = true;
      const compacted = await jsonld.compact(flattened, ctx, options);

      return compacted;
    };

    /**
     * Performs JSON-LD framing.
     *
     * @param input the JSON-LD input to frame.
     * @param frame the JSON-LD frame to use.
     * @param [options] the framing options.
     *          [base] the base IRI to use.
     *          [expandContext] a context to expand with.
     *          [embed] default @embed flag: '@last', '@always', '@never', '@link'
     *            (default: '@last').
     *          [explicit] default @explicit flag (default: false).
     *          [requireAll] default @requireAll flag (default: true).
     *          [omitDefault] default @omitDefault flag (default: false).
     *          [documentLoader(url, options)] the document loader.
     *          [contextResolver] internal use only.
     *
     * @return a Promise that resolves to the framed output.
     */
    jsonld.frame = async function(input, frame, options) {
      if(arguments.length < 2) {
        throw new TypeError('Could not frame, too few arguments.');
      }

      // set default options
      options = _setDefaults(options, {
        base: _isString(input) ? input : '',
        embed: '@once',
        explicit: false,
        requireAll: false,
        omitDefault: false,
        bnodesToClear: [],
        contextResolver: new ContextResolver_1(
          {sharedCache: _resolvedContextCache})
      });

      // if frame is a string, attempt to dereference remote document
      if(_isString(frame)) {
        // load remote doc
        const remoteDoc = await jsonld.get(frame, options);
        frame = remoteDoc.document;

        if(remoteDoc.contextUrl) {
          // inject link header @context into frame
          let ctx = frame['@context'];
          if(!ctx) {
            ctx = remoteDoc.contextUrl;
          } else if(_isArray(ctx)) {
            ctx.push(remoteDoc.contextUrl);
          } else {
            ctx = [ctx, remoteDoc.contextUrl];
          }
          frame['@context'] = ctx;
        }
      }

      const frameContext = frame ? frame['@context'] || {} : {};

      // process context
      const activeCtx = await jsonld.processContext(
        _getInitialContext(options), frameContext, options);

      // mode specific defaults
      if(!options.hasOwnProperty('omitGraph')) {
        options.omitGraph = _processingMode(activeCtx, 1.1);
      }
      if(!options.hasOwnProperty('pruneBlankNodeIdentifiers')) {
        options.pruneBlankNodeIdentifiers = _processingMode(activeCtx, 1.1);
      }

      // expand input
      const expanded = await jsonld.expand(input, options);

      // expand frame
      const opts = {...options};
      opts.isFrame = true;
      opts.keepFreeFloatingNodes = true;
      const expandedFrame = await jsonld.expand(frame, opts);

      // if the unexpanded frame includes a key expanding to @graph, frame the
      // default graph, otherwise, the merged graph
      const frameKeys = Object.keys(frame)
        .map(key => _expandIri(activeCtx, key, {vocab: true}));
      opts.merged = !frameKeys.includes('@graph');
      opts.is11 = _processingMode(activeCtx, 1.1);

      // do framing
      const framed = _frameMergedOrDefault(expanded, expandedFrame, opts);

      opts.graph = !options.omitGraph;
      opts.skipExpansion = true;
      opts.link = {};
      opts.framing = true;
      let compacted = await jsonld.compact(framed, frameContext, opts);

      // replace @null with null, compacting arrays
      opts.link = {};
      compacted = _cleanupNull(compacted, opts);

      return compacted;
    };

    /**
     * **Experimental**
     *
     * Links a JSON-LD document's nodes in memory.
     *
     * @param input the JSON-LD document to link.
     * @param [ctx] the JSON-LD context to apply.
     * @param [options] the options to use:
     *          [base] the base IRI to use.
     *          [expandContext] a context to expand with.
     *          [documentLoader(url, options)] the document loader.
     *          [contextResolver] internal use only.
     *
     * @return a Promise that resolves to the linked output.
     */
    jsonld.link = async function(input, ctx, options) {
      // API matches running frame with a wildcard frame and embed: '@link'
      // get arguments
      const frame = {};
      if(ctx) {
        frame['@context'] = ctx;
      }
      frame['@embed'] = '@link';
      return jsonld.frame(input, frame, options);
    };

    /**
     * Performs RDF dataset normalization on the given input. The input is JSON-LD
     * unless the 'inputFormat' option is used. The output is an RDF dataset
     * unless the 'format' option is used.
     *
     * @param input the input to normalize as JSON-LD or as a format specified by
     *          the 'inputFormat' option.
     * @param [options] the options to use:
     *          [algorithm] the normalization algorithm to use, `URDNA2015` or
     *            `URGNA2012` (default: `URDNA2015`).
     *          [base] the base IRI to use.
     *          [expandContext] a context to expand with.
     *          [skipExpansion] true to assume the input is expanded and skip
     *            expansion, false not to, defaults to false.
     *          [inputFormat] the format if input is not JSON-LD:
     *            'application/n-quads' for N-Quads.
     *          [format] the format if output is a string:
     *            'application/n-quads' for N-Quads.
     *          [documentLoader(url, options)] the document loader.
     *          [useNative] true to use a native canonize algorithm
     *          [contextResolver] internal use only.
     *
     * @return a Promise that resolves to the normalized output.
     */
    jsonld.normalize = jsonld.canonize = async function(input, options) {
      if(arguments.length < 1) {
        throw new TypeError('Could not canonize, too few arguments.');
      }

      // set default options
      options = _setDefaults(options, {
        base: _isString(input) ? input : '',
        algorithm: 'URDNA2015',
        skipExpansion: false,
        contextResolver: new ContextResolver_1(
          {sharedCache: _resolvedContextCache})
      });
      if('inputFormat' in options) {
        if(options.inputFormat !== 'application/n-quads' &&
          options.inputFormat !== 'application/nquads') {
          throw new JsonLdError_1(
            'Unknown canonicalization input format.',
            'jsonld.CanonizeError');
        }
        // TODO: `await` for async parsers
        const parsedInput = NQuads.parse(input);

        // do canonicalization
        return rdfCanonize.canonize(parsedInput, options);
      }

      // convert to RDF dataset then do normalization
      const opts = {...options};
      delete opts.format;
      opts.produceGeneralizedRdf = false;
      const dataset = await jsonld.toRDF(input, opts);

      // do canonicalization
      return rdfCanonize.canonize(dataset, options);
    };

    /**
     * Converts an RDF dataset to JSON-LD.
     *
     * @param dataset a serialized string of RDF in a format specified by the
     *          format option or an RDF dataset to convert.
     * @param [options] the options to use:
     *          [format] the format if dataset param must first be parsed:
     *            'application/n-quads' for N-Quads (default).
     *          [rdfParser] a custom RDF-parser to use to parse the dataset.
     *          [useRdfType] true to use rdf:type, false to use @type
     *            (default: false).
     *          [useNativeTypes] true to convert XSD types into native types
     *            (boolean, integer, double), false not to (default: false).
     *
     * @return a Promise that resolves to the JSON-LD document.
     */
    jsonld.fromRDF = async function(dataset, options) {
      if(arguments.length < 1) {
        throw new TypeError('Could not convert from RDF, too few arguments.');
      }

      // set default options
      options = _setDefaults(options, {
        format: _isString(dataset) ? 'application/n-quads' : undefined
      });

      const {format} = options;
      let {rdfParser} = options;

      // handle special format
      if(format) {
        // check supported formats
        rdfParser = rdfParser || _rdfParsers[format];
        if(!rdfParser) {
          throw new JsonLdError_1(
            'Unknown input format.',
            'jsonld.UnknownFormat', {format});
        }
      } else {
        // no-op parser, assume dataset already parsed
        rdfParser = () => dataset;
      }

      // rdfParser must be synchronous or return a promise, no callback support
      const parsedDataset = await rdfParser(dataset);
      return _fromRDF(parsedDataset, options);
    };

    /**
     * Outputs the RDF dataset found in the given JSON-LD object.
     *
     * @param input the JSON-LD input.
     * @param [options] the options to use:
     *          [base] the base IRI to use.
     *          [expandContext] a context to expand with.
     *          [skipExpansion] true to assume the input is expanded and skip
     *            expansion, false not to, defaults to false.
     *          [format] the format to use to output a string:
     *            'application/n-quads' for N-Quads.
     *          [produceGeneralizedRdf] true to output generalized RDF, false
     *            to produce only standard RDF (default: false).
     *          [documentLoader(url, options)] the document loader.
     *          [contextResolver] internal use only.
     *
     * @return a Promise that resolves to the RDF dataset.
     */
    jsonld.toRDF = async function(input, options) {
      if(arguments.length < 1) {
        throw new TypeError('Could not convert to RDF, too few arguments.');
      }

      // set default options
      options = _setDefaults(options, {
        base: _isString(input) ? input : '',
        skipExpansion: false,
        contextResolver: new ContextResolver_1(
          {sharedCache: _resolvedContextCache})
      });

      // TODO: support toRDF custom map?
      let expanded;
      if(options.skipExpansion) {
        expanded = input;
      } else {
        // expand input
        expanded = await jsonld.expand(input, options);
      }

      // output RDF dataset
      const dataset = _toRDF(expanded, options);
      if(options.format) {
        if(options.format === 'application/n-quads' ||
          options.format === 'application/nquads') {
          return NQuads.serialize(dataset);
        }
        throw new JsonLdError_1(
          'Unknown output format.',
          'jsonld.UnknownFormat', {format: options.format});
      }

      return dataset;
    };

    /**
     * **Experimental**
     *
     * Recursively flattens the nodes in the given JSON-LD input into a merged
     * map of node ID => node. All graphs will be merged into the default graph.
     *
     * @param input the JSON-LD input.
     * @param [options] the options to use:
     *          [base] the base IRI to use.
     *          [expandContext] a context to expand with.
     *          [issuer] a jsonld.IdentifierIssuer to use to label blank nodes.
     *          [documentLoader(url, options)] the document loader.
     *          [contextResolver] internal use only.
     *
     * @return a Promise that resolves to the merged node map.
     */
    jsonld.createNodeMap = async function(input, options) {
      if(arguments.length < 1) {
        throw new TypeError('Could not create node map, too few arguments.');
      }

      // set default options
      options = _setDefaults(options, {
        base: _isString(input) ? input : '',
        contextResolver: new ContextResolver_1(
          {sharedCache: _resolvedContextCache})
      });

      // expand input
      const expanded = await jsonld.expand(input, options);

      return _createMergedNodeMap(expanded, options);
    };

    /**
     * **Experimental**
     *
     * Merges two or more JSON-LD documents into a single flattened document.
     *
     * @param docs the JSON-LD documents to merge together.
     * @param ctx the context to use to compact the merged result, or null.
     * @param [options] the options to use:
     *          [base] the base IRI to use.
     *          [expandContext] a context to expand with.
     *          [issuer] a jsonld.IdentifierIssuer to use to label blank nodes.
     *          [mergeNodes] true to merge properties for nodes with the same ID,
     *            false to ignore new properties for nodes with the same ID once
     *            the ID has been defined; note that this may not prevent merging
     *            new properties where a node is in the `object` position
     *            (default: true).
     *          [documentLoader(url, options)] the document loader.
     *          [contextResolver] internal use only.
     *
     * @return a Promise that resolves to the merged output.
     */
    jsonld.merge = async function(docs, ctx, options) {
      if(arguments.length < 1) {
        throw new TypeError('Could not merge, too few arguments.');
      }
      if(!_isArray(docs)) {
        throw new TypeError('Could not merge, "docs" must be an array.');
      }

      if(typeof ctx === 'function') {
        ctx = null;
      } else {
        ctx = ctx || null;
      }

      // set default options
      options = _setDefaults(options, {
        contextResolver: new ContextResolver_1(
          {sharedCache: _resolvedContextCache})
      });

      // expand all documents
      const expanded = await Promise.all(docs.map(doc => {
        const opts = {...options};
        return jsonld.expand(doc, opts);
      }));

      let mergeNodes = true;
      if('mergeNodes' in options) {
        mergeNodes = options.mergeNodes;
      }

      const issuer = options.issuer || new IdentifierIssuer('_:b');
      const graphs = {'@default': {}};

      for(let i = 0; i < expanded.length; ++i) {
        // uniquely relabel blank nodes
        const doc = util.relabelBlankNodes(expanded[i], {
          issuer: new IdentifierIssuer('_:b' + i + '-')
        });

        // add nodes to the shared node map graphs if merging nodes, to a
        // separate graph set if not
        const _graphs = (mergeNodes || i === 0) ? graphs : {'@default': {}};
        _createNodeMap(doc, _graphs, '@default', issuer);

        if(_graphs !== graphs) {
          // merge document graphs but don't merge existing nodes
          for(const graphName in _graphs) {
            const _nodeMap = _graphs[graphName];
            if(!(graphName in graphs)) {
              graphs[graphName] = _nodeMap;
              continue;
            }
            const nodeMap = graphs[graphName];
            for(const key in _nodeMap) {
              if(!(key in nodeMap)) {
                nodeMap[key] = _nodeMap[key];
              }
            }
          }
        }
      }

      // add all non-default graphs to default graph
      const defaultGraph = _mergeNodeMaps(graphs);

      // produce flattened output
      const flattened = [];
      const keys = Object.keys(defaultGraph).sort();
      for(let ki = 0; ki < keys.length; ++ki) {
        const node = defaultGraph[keys[ki]];
        // only add full subjects to top-level
        if(!_isSubjectReference(node)) {
          flattened.push(node);
        }
      }

      if(ctx === null) {
        return flattened;
      }

      // compact result (force @graph option to true, skip expansion)
      options.graph = true;
      options.skipExpansion = true;
      const compacted = await jsonld.compact(flattened, ctx, options);

      return compacted;
    };

    /**
     * The default document loader for external documents.
     *
     * @param url the URL to load.
     *
     * @return a promise that resolves to the remote document.
     */
    Object.defineProperty(jsonld, 'documentLoader', {
      get: () => jsonld._documentLoader,
      set: v => jsonld._documentLoader = v
    });
    // default document loader not implemented
    jsonld.documentLoader = async url => {
      throw new JsonLdError_1(
        'Could not retrieve a JSON-LD document from the URL. URL ' +
        'dereferencing not implemented.', 'jsonld.LoadDocumentError',
        {code: 'loading document failed', url});
    };

    /**
     * Gets a remote JSON-LD document using the default document loader or
     * one given in the passed options.
     *
     * @param url the URL to fetch.
     * @param [options] the options to use:
     *          [documentLoader] the document loader to use.
     *
     * @return a Promise that resolves to the retrieved remote document.
     */
    jsonld.get = async function(url, options) {
      let load;
      if(typeof options.documentLoader === 'function') {
        load = options.documentLoader;
      } else {
        load = jsonld.documentLoader;
      }

      const remoteDoc = await load(url);

      try {
        if(!remoteDoc.document) {
          throw new JsonLdError_1(
            'No remote document found at the given URL.',
            'jsonld.NullRemoteDocument');
        }
        if(_isString(remoteDoc.document)) {
          remoteDoc.document = JSON.parse(remoteDoc.document);
        }
      } catch(e) {
        throw new JsonLdError_1(
          'Could not retrieve a JSON-LD document from the URL.',
          'jsonld.LoadDocumentError', {
            code: 'loading document failed',
            cause: e,
            remoteDoc
          });
      }

      return remoteDoc;
    };

    /**
     * Processes a local context, resolving any URLs as necessary, and returns a
     * new active context.
     *
     * @param activeCtx the current active context.
     * @param localCtx the local context to process.
     * @param [options] the options to use:
     *          [documentLoader(url, options)] the document loader.
     *          [contextResolver] internal use only.
     *
     * @return a Promise that resolves to the new active context.
     */
    jsonld.processContext = async function(
      activeCtx, localCtx, options) {
      // set default options
      options = _setDefaults(options, {
        base: '',
        contextResolver: new ContextResolver_1(
          {sharedCache: _resolvedContextCache})
      });

      // return initial context early for null context
      if(localCtx === null) {
        return _getInitialContext(options);
      }

      // get URLs in localCtx
      localCtx = util.clone(localCtx);
      if(!(_isObject(localCtx) && '@context' in localCtx)) {
        localCtx = {'@context': localCtx};
      }

      return _processContext({activeCtx, localCtx, options});
    };

    // backwards compatibility
    jsonld.getContextValue = context.getContextValue;

    /**
     * Document loaders.
     */
    jsonld.documentLoaders = {};

    /**
     * Assigns the default document loader for external document URLs to a built-in
     * default. Supported types currently include: 'xhr' and 'node'.
     *
     * @param type the type to set.
     * @param [params] the parameters required to use the document loader.
     */
    jsonld.useDocumentLoader = function(type) {
      if(!(type in jsonld.documentLoaders)) {
        throw new JsonLdError_1(
          'Unknown document loader type: "' + type + '"',
          'jsonld.UnknownDocumentLoader',
          {type});
      }

      // set document loader
      jsonld.documentLoader = jsonld.documentLoaders[type].apply(
        jsonld, Array.prototype.slice.call(arguments, 1));
    };

    /**
     * Registers an RDF dataset parser by content-type, for use with
     * jsonld.fromRDF. An RDF dataset parser will always be given one parameter,
     * a string of input. An RDF dataset parser can be synchronous or
     * asynchronous (by returning a promise).
     *
     * @param contentType the content-type for the parser.
     * @param parser(input) the parser function (takes a string as a parameter
     *          and either returns an RDF dataset or a Promise that resolves to one.
     */
    jsonld.registerRDFParser = function(contentType, parser) {
      _rdfParsers[contentType] = parser;
    };

    /**
     * Unregisters an RDF dataset parser by content-type.
     *
     * @param contentType the content-type for the parser.
     */
    jsonld.unregisterRDFParser = function(contentType) {
      delete _rdfParsers[contentType];
    };

    // register the N-Quads RDF parser
    jsonld.registerRDFParser('application/n-quads', NQuads.parse);
    jsonld.registerRDFParser('application/nquads', NQuads.parse);

    /* URL API */
    jsonld.url = url;

    /* Utility API */
    jsonld.util = util;
    // backwards compatibility
    Object.assign(jsonld, util);

    // reexpose API as jsonld.promises for backwards compatability
    jsonld.promises = jsonld;

    // backwards compatibility
    jsonld.RequestQueue = RequestQueue_1;

    /* WebIDL API */
    jsonld.JsonLdProcessor = JsonLdProcessor(jsonld);

    platformBrowser.setupGlobals(jsonld);
    platformBrowser.setupDocumentLoaders(jsonld);

    function _setDefaults(options, {
      documentLoader = jsonld.documentLoader,
      ...defaults
    }) {
      return Object.assign({}, {documentLoader}, defaults, options);
    }

    // end of jsonld API `wrapper` factory
    return jsonld;
    };

    // external APIs:

    // used to generate a new jsonld API instance
    const factory = function() {
      return wrapper(function() {
        return factory();
      });
    };

    // wrap the main jsonld API instance
    wrapper(factory);
    // export API
    var jsonld = factory;

    var umap = _ => ({
      // About: get: _.get.bind(_)
      // It looks like WebKit/Safari didn't optimize bind at all,
      // so that using bind slows it down by 60%.
      // Firefox and Chrome are just fine in both cases,
      // so let's use the approach that works fast everywhere 👍
      get: key => _.get(key),
      set: (key, value) => (_.set(key, value), value)
    });

    const attr = /([^\s\\>"'=]+)\s*=\s*(['"]?)$/;
    const empty = /^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;
    const node = /<[a-z][^>]+$/i;
    const notNode = />[^<>]*$/;
    const selfClosing = /<([a-z]+[a-z0-9:._-]*)([^>]*?)(\/>)/ig;
    const trimEnd = /\s+$/;

    const isNode = (template, i) => (
        0 < i-- && (
        node.test(template[i]) || (
          !notNode.test(template[i]) && isNode(template, i)
        )
      )
    );

    const regular = (original, name, extra) => empty.test(name) ?
                      original : `<${name}${extra.replace(trimEnd,'')}></${name}>`;

    var instrument = (template, prefix, svg) => {
      const text = [];
      const {length} = template;
      for (let i = 1; i < length; i++) {
        const chunk = template[i - 1];
        text.push(attr.test(chunk) && isNode(template, i) ?
          chunk.replace(
            attr,
            (_, $1, $2) => `${prefix}${i - 1}=${$2 || '"'}${$1}${$2 ? '' : '"'}`
          ) :
          `${chunk}<!--${prefix}${i - 1}-->`
        );
      }
      text.push(template[length - 1]);
      const output = text.join('').trim();
      return svg ? output : output.replace(selfClosing, regular);
    };

    const {isArray: isArray$1} = Array;
    const {indexOf, slice} = [];

    const ELEMENT_NODE = 1;
    const nodeType = 111;

    const remove = ({firstChild, lastChild}) => {
      const range = document.createRange();
      range.setStartAfter(firstChild);
      range.setEndAfter(lastChild);
      range.deleteContents();
      return firstChild;
    };

    const diffable = (node, operation) => node.nodeType === nodeType ?
      ((1 / operation) < 0 ?
        (operation ? remove(node) : node.lastChild) :
        (operation ? node.valueOf() : node.firstChild)) :
      node
    ;

    const persistent = fragment => {
      const {childNodes} = fragment;
      const {length} = childNodes;
      if (length < 2)
        return length ? childNodes[0] : fragment;
      const nodes = slice.call(childNodes, 0);
      const firstChild = nodes[0];
      const lastChild = nodes[length - 1];
      return {
        ELEMENT_NODE,
        nodeType,
        firstChild,
        lastChild,
        valueOf() {
          if (childNodes.length !== length) {
            let i = 0;
            while (i < length)
              fragment.appendChild(nodes[i++]);
          }
          return fragment;
        }
      };
    };

    /**
     * ISC License
     *
     * Copyright (c) 2020, Andrea Giammarchi, @WebReflection
     *
     * Permission to use, copy, modify, and/or distribute this software for any
     * purpose with or without fee is hereby granted, provided that the above
     * copyright notice and this permission notice appear in all copies.
     *
     * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
     * REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
     * AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
     * INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
     * LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
     * OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
     * PERFORMANCE OF THIS SOFTWARE.
     */

    /**
     * @param {Node} parentNode The container where children live
     * @param {Node[]} a The list of current/live children
     * @param {Node[]} b The list of future children
     * @param {(entry: Node, action: number) => Node} get
     * The callback invoked per each entry related DOM operation.
     * @param {Node} [before] The optional node used as anchor to insert before.
     * @returns {Node[]} The same list of future children.
     */
    var udomdiff = (parentNode, a, b, get, before) => {
      const bLength = b.length;
      let aEnd = a.length;
      let bEnd = bLength;
      let aStart = 0;
      let bStart = 0;
      let map = null;
      while (aStart < aEnd || bStart < bEnd) {
        // append head, tail, or nodes in between: fast path
        if (aEnd === aStart) {
          // we could be in a situation where the rest of nodes that
          // need to be added are not at the end, and in such case
          // the node to `insertBefore`, if the index is more than 0
          // must be retrieved, otherwise it's gonna be the first item.
          const node = bEnd < bLength ?
            (bStart ?
              (get(b[bStart - 1], -0).nextSibling) :
              get(b[bEnd - bStart], 0)) :
            before;
          while (bStart < bEnd)
            parentNode.insertBefore(get(b[bStart++], 1), node);
        }
        // remove head or tail: fast path
        else if (bEnd === bStart) {
          while (aStart < aEnd) {
            // remove the node only if it's unknown or not live
            if (!map || !map.has(a[aStart]))
              parentNode.removeChild(get(a[aStart], -1));
            aStart++;
          }
        }
        // same node: fast path
        else if (a[aStart] === b[bStart]) {
          aStart++;
          bStart++;
        }
        // same tail: fast path
        else if (a[aEnd - 1] === b[bEnd - 1]) {
          aEnd--;
          bEnd--;
        }
        // The once here single last swap "fast path" has been removed in v1.1.0
        // https://github.com/WebReflection/udomdiff/blob/single-final-swap/esm/index.js#L69-L85
        // reverse swap: also fast path
        else if (
          a[aStart] === b[bEnd - 1] &&
          b[bStart] === a[aEnd - 1]
        ) {
          // this is a "shrink" operation that could happen in these cases:
          // [1, 2, 3, 4, 5]
          // [1, 4, 3, 2, 5]
          // or asymmetric too
          // [1, 2, 3, 4, 5]
          // [1, 2, 3, 5, 6, 4]
          const node = get(a[--aEnd], -1).nextSibling;
          parentNode.insertBefore(
            get(b[bStart++], 1),
            get(a[aStart++], -1).nextSibling
          );
          parentNode.insertBefore(get(b[--bEnd], 1), node);
          // mark the future index as identical (yeah, it's dirty, but cheap 👍)
          // The main reason to do this, is that when a[aEnd] will be reached,
          // the loop will likely be on the fast path, as identical to b[bEnd].
          // In the best case scenario, the next loop will skip the tail,
          // but in the worst one, this node will be considered as already
          // processed, bailing out pretty quickly from the map index check
          a[aEnd] = b[bEnd];
        }
        // map based fallback, "slow" path
        else {
          // the map requires an O(bEnd - bStart) operation once
          // to store all future nodes indexes for later purposes.
          // In the worst case scenario, this is a full O(N) cost,
          // and such scenario happens at least when all nodes are different,
          // but also if both first and last items of the lists are different
          if (!map) {
            map = new Map;
            let i = bStart;
            while (i < bEnd)
              map.set(b[i], i++);
          }
          // if it's a future node, hence it needs some handling
          if (map.has(a[aStart])) {
            // grab the index of such node, 'cause it might have been processed
            const index = map.get(a[aStart]);
            // if it's not already processed, look on demand for the next LCS
            if (bStart < index && index < bEnd) {
              let i = aStart;
              // counts the amount of nodes that are the same in the future
              let sequence = 1;
              while (++i < aEnd && i < bEnd && map.get(a[i]) === (index + sequence))
                sequence++;
              // effort decision here: if the sequence is longer than replaces
              // needed to reach such sequence, which would brings again this loop
              // to the fast path, prepend the difference before a sequence,
              // and move only the future list index forward, so that aStart
              // and bStart will be aligned again, hence on the fast path.
              // An example considering aStart and bStart are both 0:
              // a: [1, 2, 3, 4]
              // b: [7, 1, 2, 3, 6]
              // this would place 7 before 1 and, from that time on, 1, 2, and 3
              // will be processed at zero cost
              if (sequence > (index - bStart)) {
                const node = get(a[aStart], 0);
                while (bStart < index)
                  parentNode.insertBefore(get(b[bStart++], 1), node);
              }
              // if the effort wasn't good enough, fallback to a replace,
              // moving both source and target indexes forward, hoping that some
              // similar node will be found later on, to go back to the fast path
              else {
                parentNode.replaceChild(
                  get(b[bStart++], 1),
                  get(a[aStart++], -1)
                );
              }
            }
            // otherwise move the source forward, 'cause there's nothing to do
            else
              aStart++;
          }
          // this node has no meaning in the future list, so it's more than safe
          // to remove it, and check the next live node out instead, meaning
          // that only the live list index should be forwarded
          else
            parentNode.removeChild(get(a[aStart++], -1));
        }
      }
      return b;
    };

    const aria = node => values => {
      for (const key in values) {
        const name = key === 'role' ? key : `aria-${key}`;
        const value = values[key];
        if (value == null)
          node.removeAttribute(name);
        else
          node.setAttribute(name, value);
      }
    };

    const attribute = (node, name) => {
      let oldValue, orphan = true;
      const attributeNode = document.createAttributeNS(null, name);
      return newValue => {
        if (oldValue !== newValue) {
          oldValue = newValue;
          if (oldValue == null) {
            if (!orphan) {
              node.removeAttributeNode(attributeNode);
              orphan = true;
            }
          }
          else {
            const value = newValue;
            if (value == null) {
              if (!orphan)
                node.removeAttributeNode(attributeNode);
                orphan = true;
            }
            else {
              attributeNode.value = value;
              if (orphan) {
                node.setAttributeNodeNS(attributeNode);
                orphan = false;
              }
            }
          }
        }
      };
    };

    const boolean = (node, key, oldValue) => newValue => {
      if (oldValue !== !!newValue) {
        // when IE won't be around anymore ...
        // node.toggleAttribute(key, oldValue = !!newValue);
        if ((oldValue = !!newValue))
          node.setAttribute(key, '');
        else
          node.removeAttribute(key);
      }
    };

    const data = ({dataset}) => values => {
      for (const key in values) {
        const value = values[key];
        if (value == null)
          delete dataset[key];
        else
          dataset[key] = value;
      }
    };

    const event = (node, name) => {
      let oldValue, lower, type = name.slice(2);
      if (!(name in node) && (lower = name.toLowerCase()) in node)
        type = lower.slice(2);
      return newValue => {
        const info = isArray$1(newValue) ? newValue : [newValue, false];
        if (oldValue !== info[0]) {
          if (oldValue)
            node.removeEventListener(type, oldValue, info[1]);
          if (oldValue = info[0])
            node.addEventListener(type, oldValue, info[1]);
        }
      };
    };

    const ref = node => {
      let oldValue;
      return value => {
        if (oldValue !== value) {
          oldValue = value;
          if (typeof value === 'function')
            value(node);
          else
            value.current = node;
        }
      };
    };

    const setter = (node, key) => key === 'dataset' ?
      data(node) :
      value => {
        node[key] = value;
      };

    const text = node => {
      let oldValue;
      return newValue => {
        if (oldValue != newValue) {
          oldValue = newValue;
          node.textContent = newValue == null ? '' : newValue;
        }
      };
    };

    // from a generic path, retrieves the exact targeted node
    const reducePath = ({childNodes}, i) => childNodes[i];

    // this helper avoid code bloat around handleAnything() callback
    const diff = (comment, oldNodes, newNodes) => udomdiff(
      comment.parentNode,
      // TODO: there is a possible edge case where a node has been
      //       removed manually, or it was a keyed one, attached
      //       to a shared reference between renders.
      //       In this case udomdiff might fail at removing such node
      //       as its parent won't be the expected one.
      //       The best way to avoid this issue is to filter oldNodes
      //       in search of those not live, or not in the current parent
      //       anymore, but this would require both a change to uwire,
      //       exposing a parentNode from the firstChild, as example,
      //       but also a filter per each diff that should exclude nodes
      //       that are not in there, penalizing performance quite a lot.
      //       As this has been also a potential issue with domdiff,
      //       and both lighterhtml and hyperHTML might fail with this
      //       very specific edge case, I might as well document this possible
      //       "diffing shenanigan" and call it a day.
      oldNodes,
      newNodes,
      diffable,
      comment
    );

    // if an interpolation represents a comment, the whole
    // diffing will be related to such comment.
    // This helper is in charge of understanding how the new
    // content for such interpolation/hole should be updated
    const handleAnything = comment => {
      let oldValue, text, nodes = [];
      const anyContent = newValue => {
        switch (typeof newValue) {
          // primitives are handled as text content
          case 'string':
          case 'number':
          case 'boolean':
            if (oldValue !== newValue) {
              oldValue = newValue;
              if (!text)
                text = document.createTextNode('');
              text.data = newValue;
              nodes = diff(comment, nodes, [text]);
            }
            break;
          // null, and undefined are used to cleanup previous content
          case 'object':
          case 'undefined':
            if (newValue == null) {
              if (oldValue != newValue) {
                oldValue = newValue;
                nodes = diff(comment, nodes, []);
              }
              break;
            }
            // arrays and nodes have a special treatment
            if (isArray$1(newValue)) {
              oldValue = newValue;
              // arrays can be used to cleanup, if empty
              if (newValue.length === 0)
                nodes = diff(comment, nodes, []);
              // or diffed, if these contains nodes or "wires"
              else if (typeof newValue[0] === 'object')
                nodes = diff(comment, nodes, newValue);
              // in all other cases the content is stringified as is
              else
                anyContent(String(newValue));
              break;
            }
            // if the new value is a DOM node, or a wire, and it's
            // different from the one already live, then it's diffed.
            // if the node is a fragment, it's appended once via its childNodes
            // There is no `else` here, meaning if the content
            // is not expected one, nothing happens, as easy as that.
            if (oldValue !== newValue && 'ELEMENT_NODE' in newValue) {
              oldValue = newValue;
              nodes = diff(
                comment,
                nodes,
                newValue.nodeType === 11 ?
                  slice.call(newValue.childNodes) :
                  [newValue]
              );
            }
            break;
          case 'function':
            anyContent(newValue(comment));
            break;
        }
      };
      return anyContent;
    };

    // attributes can be:
    //  * ref=${...}      for hooks and other purposes
    //  * aria=${...}     for aria attributes
    //  * ?boolean=${...} for boolean attributes
    //  * .dataset=${...} for dataset related attributes
    //  * .setter=${...}  for Custom Elements setters or nodes with setters
    //                    such as buttons, details, options, select, etc
    //  * @event=${...}   to explicitly handle event listeners
    //  * onevent=${...}  to automatically handle event listeners
    //  * generic=${...}  to handle an attribute just like an attribute
    const handleAttribute = (node, name/*, svg*/) => {
      switch (name[0]) {
        case '?': return boolean(node, name.slice(1), false);
        case '.': return setter(node, name.slice(1));
        case '@': return event(node, 'on' + name.slice(1));
        case 'o': if (name[1] === 'n') return event(node, name);
      }

      switch (name) {
        case 'ref': return ref(node);
        case 'aria': return aria(node);
      }

      return attribute(node, name/*, svg*/);
    };

    // each mapped update carries the update type and its path
    // the type is either node, attribute, or text, while
    // the path is how to retrieve the related node to update.
    // In the attribute case, the attribute name is also carried along.
    function handlers(options) {
      const {type, path} = options;
      const node = path.reduceRight(reducePath, this);
      return type === 'node' ?
        handleAnything(node) :
        (type === 'attr' ?
          handleAttribute(node, options.name/*, options.svg*/) :
          text(node));
    }

    /*! (c) Andrea Giammarchi - ISC */
    var createContent = (function (document) {  var FRAGMENT = 'fragment';
      var TEMPLATE = 'template';
      var HAS_CONTENT = 'content' in create(TEMPLATE);

      var createHTML = HAS_CONTENT ?
        function (html) {
          var template = create(TEMPLATE);
          template.innerHTML = html;
          return template.content;
        } :
        function (html) {
          var content = create(FRAGMENT);
          var template = create(TEMPLATE);
          var childNodes = null;
          if (/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(html)) {
            var selector = RegExp.$1;
            template.innerHTML = '<table>' + html + '</table>';
            childNodes = template.querySelectorAll(selector);
          } else {
            template.innerHTML = html;
            childNodes = template.childNodes;
          }
          append(content, childNodes);
          return content;
        };

      return function createContent(markup, type) {
        return (type === 'svg' ? createSVG : createHTML)(markup);
      };

      function append(root, childNodes) {
        var length = childNodes.length;
        while (length--)
          root.appendChild(childNodes[0]);
      }

      function create(element) {
        return element === FRAGMENT ?
          document.createDocumentFragment() :
          document.createElementNS('http://www.w3.org/1999/xhtml', element);
      }

      // it could use createElementNS when hasNode is there
      // but this fallback is equally fast and easier to maintain
      // it is also battle tested already in all IE
      function createSVG(svg) {
        var content = create(FRAGMENT);
        var template = create('div');
        template.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg">' + svg + '</svg>';
        append(content, template.firstChild.childNodes);
        return content;
      }

    }(document));

    // this "hack" tells the library if the browser is IE11 or old Edge
    const isImportNodeLengthWrong = document.importNode.length != 1;

    // IE11 and old Edge discard empty nodes when cloning, potentially
    // resulting in broken paths to find updates. The workaround here
    // is to import once, upfront, the fragment that will be cloned
    // later on, so that paths are retrieved from one already parsed,
    // hence without missing child nodes once re-cloned.
    const createFragment = isImportNodeLengthWrong ?
      (text, type, normalize) => document.importNode(
        createContent(text, type, normalize),
        true
      ) :
      createContent;

    // IE11 and old Edge have a different createTreeWalker signature that
    // has been deprecated in other browsers. This export is needed only
    // to guarantee the TreeWalker doesn't show warnings and, ultimately, works
    const createWalker = isImportNodeLengthWrong ?
      fragment => document.createTreeWalker(fragment, 1 | 128, null, false) :
      fragment => document.createTreeWalker(fragment, 1 | 128);

    // from a fragment container, create an array of indexes
    // related to its child nodes, so that it's possible
    // to retrieve later on exact node via reducePath
    const createPath = node => {
      const path = [];
      let {parentNode} = node;
      while (parentNode) {
        path.push(indexOf.call(parentNode.childNodes, node));
        node = parentNode;
        parentNode = node.parentNode;
      }
      return path;
    };

    // the prefix is used to identify either comments, attributes, or nodes
    // that contain the related unique id. In the attribute cases
    // isµX="attribute-name" will be used to map current X update to that
    // attribute name, while comments will be like <!--isµX-->, to map
    // the update to that specific comment node, hence its parent.
    // style and textarea will have <!--isµX--> text content, and are handled
    // directly through text-only updates.
    const prefix = 'isµ';

    // Template Literals are unique per scope and static, meaning a template
    // should be parsed once, and once only, as it will always represent the same
    // content, within the exact same amount of updates each time.
    // This cache relates each template to its unique content and updates.
    const cache$1 = umap(new WeakMap);

    // a RegExp that helps checking nodes that cannot contain comments
    const textOnly = /^(?:plaintext|script|style|textarea|title|xmp)$/i;

    const createCache = () => ({
      stack: [],    // each template gets a stack for each interpolation "hole"

      entry: null,  // each entry contains details, such as:
                    //  * the template that is representing
                    //  * the type of node it represents (html or svg)
                    //  * the content fragment with all nodes
                    //  * the list of updates per each node (template holes)
                    //  * the "wired" node or fragment that will get updates
                    // if the template or type are different from the previous one
                    // the entry gets re-created each time

      wire: null    // each rendered node represent some wired content and
                    // this reference to the latest one. If different, the node
                    // will be cleaned up and the new "wire" will be appended
    });

    // the entry stored in the rendered node cache, and per each "hole"
    const createEntry = (type, template) => {
      const {content, updates} = mapUpdates(type, template);
      return {type, template, content, updates, wire: null};
    };

    // a template is instrumented to be able to retrieve where updates are needed.
    // Each unique template becomes a fragment, cloned once per each other
    // operation based on the same template, i.e. data => html`<p>${data}</p>`
    const mapTemplate = (type, template) => {
      const text = instrument(template, prefix, type === 'svg');
      const content = createFragment(text, type);
      // once instrumented and reproduced as fragment, it's crawled
      // to find out where each update is in the fragment tree
      const tw = createWalker(content);
      const nodes = [];
      const length = template.length - 1;
      let i = 0;
      // updates are searched via unique names, linearly increased across the tree
      // <div isµ0="attr" isµ1="other"><!--isµ2--><style><!--isµ3--</style></div>
      let search = `${prefix}${i}`;
      while (i < length) {
        const node = tw.nextNode();
        // if not all updates are bound but there's nothing else to crawl
        // it means that there is something wrong with the template.
        if (!node)
          throw `bad template: ${text}`;
        // if the current node is a comment, and it contains isµX
        // it means the update should take care of any content
        if (node.nodeType === 8) {
          // The only comments to be considered are those
          // which content is exactly the same as the searched one.
          if (node.data === search) {
            nodes.push({type: 'node', path: createPath(node)});
            search = `${prefix}${++i}`;
          }
        }
        else {
          // if the node is not a comment, loop through all its attributes
          // named isµX and relate attribute updates to this node and the
          // attribute name, retrieved through node.getAttribute("isµX")
          // the isµX attribute will be removed as irrelevant for the layout
          // let svg = -1;
          while (node.hasAttribute(search)) {
            nodes.push({
              type: 'attr',
              path: createPath(node),
              name: node.getAttribute(search),
              //svg: svg < 0 ? (svg = ('ownerSVGElement' in node ? 1 : 0)) : svg
            });
            node.removeAttribute(search);
            search = `${prefix}${++i}`;
          }
          // if the node was a style, textarea, or others, check its content
          // and if it is <!--isµX--> then update tex-only this node
          if (
            textOnly.test(node.tagName) &&
            node.textContent.trim() === `<!--${search}-->`
          ){
            node.textContent = '';
            nodes.push({type: 'text', path: createPath(node)});
            search = `${prefix}${++i}`;
          }
        }
      }
      // once all nodes to update, or their attributes, are known, the content
      // will be cloned in the future to represent the template, and all updates
      // related to such content retrieved right away without needing to re-crawl
      // the exact same template, and its content, more than once.
      return {content, nodes};
    };

    // if a template is unknown, perform the previous mapping, otherwise grab
    // its details such as the fragment with all nodes, and updates info.
    const mapUpdates = (type, template) => {
      const {content, nodes} = (
        cache$1.get(template) ||
        cache$1.set(template, mapTemplate(type, template))
      );
      // clone deeply the fragment
      const fragment = document.importNode(content, true);
      // and relate an update handler per each node that needs one
      const updates = nodes.map(handlers, fragment);
      // return the fragment and all updates to use within its nodes
      return {content: fragment, updates};
    };

    // as html and svg can be nested calls, but no parent node is known
    // until rendered somewhere, the unroll operation is needed to
    // discover what to do with each interpolation, which will result
    // into an update operation.
    const unroll = (info, {type, template, values}) => {
      const {length} = values;
      // interpolations can contain holes and arrays, so these need
      // to be recursively discovered
      unrollValues(info, values, length);
      let {entry} = info;
      // if the cache entry is either null or different from the template
      // and the type this unroll should resolve, create a new entry
      // assigning a new content fragment and the list of updates.
      if (!entry || (entry.template !== template || entry.type !== type))
        info.entry = (entry = createEntry(type, template));
      const {content, updates, wire} = entry;
      // even if the fragment and its nodes is not live yet,
      // it is already possible to update via interpolations values.
      for (let i = 0; i < length; i++)
        updates[i](values[i]);
      // if the entry was new, or representing a different template or type,
      // create a new persistent entity to use during diffing.
      // This is simply a DOM node, when the template has a single container,
      // as in `<p></p>`, or a "wire" in `<p></p><p></p>` and similar cases.
      return wire || (entry.wire = persistent(content));
    };

    // the stack retains, per each interpolation value, the cache
    // related to each interpolation value, or null, if the render
    // was conditional and the value is not special (Array or Hole)
    const unrollValues = ({stack}, values, length) => {
      for (let i = 0; i < length; i++) {
        const hole = values[i];
        // each Hole gets unrolled and re-assigned as value
        // so that domdiff will deal with a node/wire, not with a hole
        if (hole instanceof Hole)
          values[i] = unroll(
            stack[i] || (stack[i] = createCache()),
            hole
          );
        // arrays are recursively resolved so that each entry will contain
        // also a DOM node or a wire, hence it can be diffed if/when needed
        else if (isArray$1(hole))
          unrollValues(
            stack[i] || (stack[i] = createCache()),
            hole,
            hole.length
          );
        // if the value is nothing special, the stack doesn't need to retain data
        // this is useful also to cleanup previously retained data, if the value
        // was a Hole, or an Array, but not anymore, i.e.:
        // const update = content => html`<div>${content}</div>`;
        // update(listOfItems); update(null); update(html`hole`)
        else
          stack[i] = null;
      }
      if (length < stack.length)
        stack.splice(length);
    };

    /**
     * Holds all details wrappers needed to render the content further on.
     * @constructor
     * @param {string} type The hole type, either `html` or `svg`.
     * @param {string[]} template The template literals used to the define the content.
     * @param {Array} values Zero, one, or more interpolated values to render.
     */
    function Hole(type, template, values) {
      this.type = type;
      this.template = template;
      this.values = values;
    }

    const {create, defineProperties: defineProperties$1} = Object;

    // both `html` and `svg` template literal tags are polluted
    // with a `for(ref[, id])` and a `node` tag too
    const tag$1 = type => {
      // both `html` and `svg` tags have their own cache
      const keyed = umap(new WeakMap);
      // keyed operations always re-use the same cache and unroll
      // the template and its interpolations right away
      const fixed = cache => (template, ...values) => unroll(
        cache,
        {type, template, values}
      );
      return defineProperties$1(
        // non keyed operations are recognized as instance of Hole
        // during the "unroll", recursively resolved and updated
        (template, ...values) => new Hole(type, template, values),
        {
          for: {
            // keyed operations need a reference object, usually the parent node
            // which is showing keyed results, and optionally a unique id per each
            // related node, handy with JSON results and mutable list of objects
            // that usually carry a unique identifier
            value(ref, id) {
              const memo = keyed.get(ref) || keyed.set(ref, create(null));
              return memo[id] || (memo[id] = fixed(createCache()));
            }
          },
          node: {
            // it is possible to create one-off content out of the box via node tag
            // this might return the single created node, or a fragment with all
            // nodes present at the root level and, of course, their child nodes
            value: (template, ...values) => unroll(
              createCache(),
              {type, template, values}
            ).valueOf()
          }
        }
      );
    };

    // each rendered node gets its own cache
    const cache = umap(new WeakMap);

    // rendering means understanding what `html` or `svg` tags returned
    // and it relates a specific node to its own unique cache.
    // Each time the content to render changes, the node is cleaned up
    // and the new new content is appended, and if such content is a Hole
    // then it's "unrolled" to resolve all its inner nodes.
    const render$1 = (where, what) => {
      const hole = typeof what === 'function' ? what() : what;
      const info = cache.get(where) || cache.set(where, createCache());
      const wire = hole instanceof Hole ? unroll(info, hole) : hole;
      if (wire !== info.wire) {
        info.wire = wire;
        where.textContent = '';
        // valueOf() simply returns the node itself, but in case it was a "wire"
        // it will eventually re-append all nodes to its fragment so that such
        // fragment can be re-appended many times in a meaningful way
        // (wires are basically persistent fragments facades with special behavior)
        where.appendChild(wire.valueOf());
      }
      return where;
    };

    const html$1 = tag$1('html');
    const svg = tag$1('svg');

    const {isArray} = Array;

    const sync = (values, i) => {
      const resolved = [];
      for (const {length} = values; i < length; i++)
        resolved.push(isArray(values[i]) ? sync(values[i], 0) : values[i]);
      return Promise.all(resolved);
    };

    /**
     * Returns a template literal tag abe to resolve, recursively, any possible
     * asynchronous interpolation.
     * @param {function} tag a template literal tag.
     * @returns {function} a template literal tag that resolves interpolations
     *                     before passing these to the initial template literal.
     */
    var asyncTag = tag => {
      function invoke(template, values) {
        return tag.apply(this, [template].concat(values));
      }
      return function (template) {
        return sync(arguments, 1).then(invoke.bind(this, template));
      };
    };

    const {defineProperties} = Object;

    const tag = original => {
      const wrap = umap(new WeakMap);
      return defineProperties(
        asyncTag(original),
        {
          for: {
            value(ref, id) {
              const tag = original.for(ref, id);
              return wrap.get(tag) || wrap.set(tag, asyncTag(tag));
            }
          },
          node: {
            value: asyncTag(original.node)
          }
        }
      );
    };

    const html = tag(html$1);
    tag(svg);

    const render = (where, what) => {
      const hole = typeof what === 'function' ? what() : what;
      return Promise.resolve(hole).then(what => render$1(where, what));
    };

    /*
     * quantize.js Copyright 2008 Nick Rabinowitz
     * Ported to node.js by Olivier Lesnicki
     * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
     */
    // fill out a couple protovis dependencies
    /*
     * Block below copied from Protovis: http://mbostock.github.com/protovis/
     * Copyright 2010 Stanford Visualization Group
     * Licensed under the BSD License: http://www.opensource.org/licenses/bsd-license.php
     */
    if (!pv) {
        var pv = {
            map: function(array, f) {
                var o = {};
                return f ? array.map(function(d, i) {
                    o.index = i;
                    return f.call(o, d);
                }) : array.slice();
            },
            naturalOrder: function(a, b) {
                return (a < b) ? -1 : ((a > b) ? 1 : 0);
            },
            sum: function(array, f) {
                var o = {};
                return array.reduce(f ? function(p, d, i) {
                    o.index = i;
                    return p + f.call(o, d);
                } : function(p, d) {
                    return p + d;
                }, 0);
            },
            max: function(array, f) {
                return Math.max.apply(null, f ? pv.map(array, f) : array);
            }
        };
    }

    /**
     * Basic Javascript port of the MMCQ (modified median cut quantization)
     * algorithm from the Leptonica library (http://www.leptonica.com/).
     * Returns a color map you can use to map original pixels to the reduced
     * palette. Still a work in progress.
     * 
     * @author Nick Rabinowitz
     * @example
     
    // array of pixels as [R,G,B] arrays
    var myPixels = [[190,197,190], [202,204,200], [207,214,210], [211,214,211], [205,207,207]
                    // etc
                    ];
    var maxColors = 4;
     
    var cmap = MMCQ.quantize(myPixels, maxColors);
    var newPalette = cmap.palette();
    var newPixels = myPixels.map(function(p) { 
        return cmap.map(p); 
    });
     
     */
    var MMCQ = (function() {
        // private constants
        var sigbits = 5,
            rshift = 8 - sigbits,
            maxIterations = 1000,
            fractByPopulations = 0.75;

        // get reduced-space color index for a pixel

        function getColorIndex(r, g, b) {
            return (r << (2 * sigbits)) + (g << sigbits) + b;
        }

        // Simple priority queue

        function PQueue(comparator) {
            var contents = [],
                sorted = false;

            function sort() {
                contents.sort(comparator);
                sorted = true;
            }

            return {
                push: function(o) {
                    contents.push(o);
                    sorted = false;
                },
                peek: function(index) {
                    if (!sorted) sort();
                    if (index === undefined) index = contents.length - 1;
                    return contents[index];
                },
                pop: function() {
                    if (!sorted) sort();
                    return contents.pop();
                },
                size: function() {
                    return contents.length;
                },
                map: function(f) {
                    return contents.map(f);
                },
                debug: function() {
                    if (!sorted) sort();
                    return contents;
                }
            };
        }

        // 3d color space box

        function VBox(r1, r2, g1, g2, b1, b2, histo) {
            var vbox = this;
            vbox.r1 = r1;
            vbox.r2 = r2;
            vbox.g1 = g1;
            vbox.g2 = g2;
            vbox.b1 = b1;
            vbox.b2 = b2;
            vbox.histo = histo;
        }
        VBox.prototype = {
            volume: function(force) {
                var vbox = this;
                if (!vbox._volume || force) {
                    vbox._volume = ((vbox.r2 - vbox.r1 + 1) * (vbox.g2 - vbox.g1 + 1) * (vbox.b2 - vbox.b1 + 1));
                }
                return vbox._volume;
            },
            count: function(force) {
                var vbox = this,
                    histo = vbox.histo;
                if (!vbox._count_set || force) {
                    var npix = 0,
                        i, j, k, index;
                    for (i = vbox.r1; i <= vbox.r2; i++) {
                        for (j = vbox.g1; j <= vbox.g2; j++) {
                            for (k = vbox.b1; k <= vbox.b2; k++) {
                                index = getColorIndex(i, j, k);
                                npix += (histo[index] || 0);
                            }
                        }
                    }
                    vbox._count = npix;
                    vbox._count_set = true;
                }
                return vbox._count;
            },
            copy: function() {
                var vbox = this;
                return new VBox(vbox.r1, vbox.r2, vbox.g1, vbox.g2, vbox.b1, vbox.b2, vbox.histo);
            },
            avg: function(force) {
                var vbox = this,
                    histo = vbox.histo;
                if (!vbox._avg || force) {
                    var ntot = 0,
                        mult = 1 << (8 - sigbits),
                        rsum = 0,
                        gsum = 0,
                        bsum = 0,
                        hval,
                        i, j, k, histoindex;
                    for (i = vbox.r1; i <= vbox.r2; i++) {
                        for (j = vbox.g1; j <= vbox.g2; j++) {
                            for (k = vbox.b1; k <= vbox.b2; k++) {
                                histoindex = getColorIndex(i, j, k);
                                hval = histo[histoindex] || 0;
                                ntot += hval;
                                rsum += (hval * (i + 0.5) * mult);
                                gsum += (hval * (j + 0.5) * mult);
                                bsum += (hval * (k + 0.5) * mult);
                            }
                        }
                    }
                    if (ntot) {
                        vbox._avg = [~~(rsum / ntot), ~~ (gsum / ntot), ~~ (bsum / ntot)];
                    } else {
                        //console.log('empty box');
                        vbox._avg = [~~(mult * (vbox.r1 + vbox.r2 + 1) / 2), ~~ (mult * (vbox.g1 + vbox.g2 + 1) / 2), ~~ (mult * (vbox.b1 + vbox.b2 + 1) / 2)];
                    }
                }
                return vbox._avg;
            },
            contains: function(pixel) {
                var vbox = this,
                    rval = pixel[0] >> rshift;
                gval = pixel[1] >> rshift;
                bval = pixel[2] >> rshift;
                return (rval >= vbox.r1 && rval <= vbox.r2 &&
                    gval >= vbox.g1 && gval <= vbox.g2 &&
                    bval >= vbox.b1 && bval <= vbox.b2);
            }
        };

        // Color map

        function CMap() {
            this.vboxes = new PQueue(function(a, b) {
                return pv.naturalOrder(
                    a.vbox.count() * a.vbox.volume(),
                    b.vbox.count() * b.vbox.volume()
                )
            });    }
        CMap.prototype = {
            push: function(vbox) {
                this.vboxes.push({
                    vbox: vbox,
                    color: vbox.avg()
                });
            },
            palette: function() {
                return this.vboxes.map(function(vb) {
                    return vb.color
                });
            },
            size: function() {
                return this.vboxes.size();
            },
            map: function(color) {
                var vboxes = this.vboxes;
                for (var i = 0; i < vboxes.size(); i++) {
                    if (vboxes.peek(i).vbox.contains(color)) {
                        return vboxes.peek(i).color;
                    }
                }
                return this.nearest(color);
            },
            nearest: function(color) {
                var vboxes = this.vboxes,
                    d1, d2, pColor;
                for (var i = 0; i < vboxes.size(); i++) {
                    d2 = Math.sqrt(
                        Math.pow(color[0] - vboxes.peek(i).color[0], 2) +
                        Math.pow(color[1] - vboxes.peek(i).color[1], 2) +
                        Math.pow(color[2] - vboxes.peek(i).color[2], 2)
                    );
                    if (d2 < d1 || d1 === undefined) {
                        d1 = d2;
                        pColor = vboxes.peek(i).color;
                    }
                }
                return pColor;
            },
            forcebw: function() {
                // XXX: won't  work yet
                var vboxes = this.vboxes;
                vboxes.sort(function(a, b) {
                    return pv.naturalOrder(pv.sum(a.color), pv.sum(b.color))
                });

                // force darkest color to black if everything < 5
                var lowest = vboxes[0].color;
                if (lowest[0] < 5 && lowest[1] < 5 && lowest[2] < 5)
                    vboxes[0].color = [0, 0, 0];

                // force lightest color to white if everything > 251
                var idx = vboxes.length - 1,
                    highest = vboxes[idx].color;
                if (highest[0] > 251 && highest[1] > 251 && highest[2] > 251)
                    vboxes[idx].color = [255, 255, 255];
            }
        };

        // histo (1-d array, giving the number of pixels in
        // each quantized region of color space), or null on error

        function getHisto(pixels) {
            var histosize = 1 << (3 * sigbits),
                histo = new Array(histosize),
                index, rval, gval, bval;
            pixels.forEach(function(pixel) {
                rval = pixel[0] >> rshift;
                gval = pixel[1] >> rshift;
                bval = pixel[2] >> rshift;
                index = getColorIndex(rval, gval, bval);
                histo[index] = (histo[index] || 0) + 1;
            });
            return histo;
        }

        function vboxFromPixels(pixels, histo) {
            var rmin = 1000000,
                rmax = 0,
                gmin = 1000000,
                gmax = 0,
                bmin = 1000000,
                bmax = 0,
                rval, gval, bval;
            // find min/max
            pixels.forEach(function(pixel) {
                rval = pixel[0] >> rshift;
                gval = pixel[1] >> rshift;
                bval = pixel[2] >> rshift;
                if (rval < rmin) rmin = rval;
                else if (rval > rmax) rmax = rval;
                if (gval < gmin) gmin = gval;
                else if (gval > gmax) gmax = gval;
                if (bval < bmin) bmin = bval;
                else if (bval > bmax) bmax = bval;
            });
            return new VBox(rmin, rmax, gmin, gmax, bmin, bmax, histo);
        }

        function medianCutApply(histo, vbox) {
            if (!vbox.count()) return;

            var rw = vbox.r2 - vbox.r1 + 1,
                gw = vbox.g2 - vbox.g1 + 1,
                bw = vbox.b2 - vbox.b1 + 1,
                maxw = pv.max([rw, gw, bw]);
            // only one pixel, no split
            if (vbox.count() == 1) {
                return [vbox.copy()]
            }
            /* Find the partial sum arrays along the selected axis. */
            var total = 0,
                partialsum = [],
                lookaheadsum = [],
                i, j, k, sum, index;
            if (maxw == rw) {
                for (i = vbox.r1; i <= vbox.r2; i++) {
                    sum = 0;
                    for (j = vbox.g1; j <= vbox.g2; j++) {
                        for (k = vbox.b1; k <= vbox.b2; k++) {
                            index = getColorIndex(i, j, k);
                            sum += (histo[index] || 0);
                        }
                    }
                    total += sum;
                    partialsum[i] = total;
                }
            } else if (maxw == gw) {
                for (i = vbox.g1; i <= vbox.g2; i++) {
                    sum = 0;
                    for (j = vbox.r1; j <= vbox.r2; j++) {
                        for (k = vbox.b1; k <= vbox.b2; k++) {
                            index = getColorIndex(j, i, k);
                            sum += (histo[index] || 0);
                        }
                    }
                    total += sum;
                    partialsum[i] = total;
                }
            } else { /* maxw == bw */
                for (i = vbox.b1; i <= vbox.b2; i++) {
                    sum = 0;
                    for (j = vbox.r1; j <= vbox.r2; j++) {
                        for (k = vbox.g1; k <= vbox.g2; k++) {
                            index = getColorIndex(j, k, i);
                            sum += (histo[index] || 0);
                        }
                    }
                    total += sum;
                    partialsum[i] = total;
                }
            }
            partialsum.forEach(function(d, i) {
                lookaheadsum[i] = total - d;
            });

            function doCut(color) {
                var dim1 = color + '1',
                    dim2 = color + '2',
                    left, right, vbox1, vbox2, d2, count2 = 0;
                for (i = vbox[dim1]; i <= vbox[dim2]; i++) {
                    if (partialsum[i] > total / 2) {
                        vbox1 = vbox.copy();
                        vbox2 = vbox.copy();
                        left = i - vbox[dim1];
                        right = vbox[dim2] - i;
                        if (left <= right)
                            d2 = Math.min(vbox[dim2] - 1, ~~ (i + right / 2));
                        else d2 = Math.max(vbox[dim1], ~~ (i - 1 - left / 2));
                        // avoid 0-count boxes
                        while (!partialsum[d2]) d2++;
                        count2 = lookaheadsum[d2];
                        while (!count2 && partialsum[d2 - 1]) count2 = lookaheadsum[--d2];
                        // set dimensions
                        vbox1[dim2] = d2;
                        vbox2[dim1] = vbox1[dim2] + 1;
                        // console.log('vbox counts:', vbox.count(), vbox1.count(), vbox2.count());
                        return [vbox1, vbox2];
                    }
                }

            }
            // determine the cut planes
            return maxw == rw ? doCut('r') :
                maxw == gw ? doCut('g') :
                doCut('b');
        }

        function quantize(pixels, maxcolors) {
            // short-circuit
            if (!pixels.length || maxcolors < 2 || maxcolors > 256) {
                // console.log('wrong number of maxcolors');
                return false;
            }

            // XXX: check color content and convert to grayscale if insufficient

            var histo = getHisto(pixels);
            histo.forEach(function() {
            });

            // get the beginning vbox from the colors
            var vbox = vboxFromPixels(pixels, histo),
                pq = new PQueue(function(a, b) {
                    return pv.naturalOrder(a.count(), b.count())
                });
            pq.push(vbox);

            // inner function to do the iteration

            function iter(lh, target) {
                var ncolors = 1,
                    niters = 0,
                    vbox;
                while (niters < maxIterations) {
                    vbox = lh.pop();
                    if (!vbox.count()) { /* just put it back */
                        lh.push(vbox);
                        niters++;
                        continue;
                    }
                    // do the cut
                    var vboxes = medianCutApply(histo, vbox),
                        vbox1 = vboxes[0],
                        vbox2 = vboxes[1];

                    if (!vbox1) {
                        // console.log("vbox1 not defined; shouldn't happen!");
                        return;
                    }
                    lh.push(vbox1);
                    if (vbox2) { /* vbox2 can be null */
                        lh.push(vbox2);
                        ncolors++;
                    }
                    if (ncolors >= target) return;
                    if (niters++ > maxIterations) {
                        // console.log("infinite loop; perhaps too few pixels!");
                        return;
                    }
                }
            }

            // first set of colors, sorted by population
            iter(pq, fractByPopulations * maxcolors);
            // console.log(pq.size(), pq.debug().length, pq.debug().slice());

            // Re-sort by the product of pixel occupancy times the size in color space.
            var pq2 = new PQueue(function(a, b) {
                return pv.naturalOrder(a.count() * a.volume(), b.count() * b.volume())
            });
            while (pq.size()) {
                pq2.push(pq.pop());
            }

            // next set - generate the median cuts using the (npix * vol) sorting.
            iter(pq2, maxcolors - pq2.size());

            // calculate the actual colors
            var cmap = new CMap();
            while (pq2.size()) {
                cmap.push(pq2.pop());
            }

            return cmap;
        }

        return {
            quantize: quantize
        }
    })();

    var quantize = MMCQ.quantize;

    function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
      try {
        var info = gen[key](arg);
        var value = info.value;
      } catch (error) {
        reject(error);
        return;
      }

      if (info.done) {
        resolve(value);
      } else {
        Promise.resolve(value).then(_next, _throw);
      }
    }

    function _asyncToGenerator(fn) {
      return function () {
        var self = this,
            args = arguments;
        return new Promise(function (resolve, reject) {
          var gen = fn.apply(self, args);

          function _next(value) {
            asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
          }

          function _throw(err) {
            asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
          }

          _next(undefined);
        });
      };
    }

    function _extends() {
      _extends = Object.assign || function (target) {
        for (var i = 1; i < arguments.length; i++) {
          var source = arguments[i];

          for (var key in source) {
            if (Object.prototype.hasOwnProperty.call(source, key)) {
              target[key] = source[key];
            }
          }
        }

        return target;
      };

      return _extends.apply(this, arguments);
    }

    function _taggedTemplateLiteralLoose(strings, raw) {
      if (!raw) {
        raw = strings.slice(0);
      }

      strings.raw = raw;
      return strings;
    }

    function peg$subclass(t, r) {
      function e() {
        this.constructor = t;
      }

      e.prototype = r.prototype, t.prototype = new e();
    }

    function peg$SyntaxError(t, r, e, n) {
      this.message = t, this.expected = r, this.found = e, this.location = n, this.name = "SyntaxError", "function" == typeof Error.captureStackTrace && Error.captureStackTrace(this, peg$SyntaxError);
    }

    function peg$parse(t, r) {
      r = void 0 !== r ? r : {};

      var e,
          n = {},
          u = {
        turtleDoc: qe
      },
          s = qe,
          a = function a(t) {
        var r = vn.toJSON();
        return r["@graph"] = [], t.filter(t => Array.isArray(t)).forEach(t => {
          t.forEach(t => {
            r["@graph"].push(t);
          });
        }), 1 === r["@graph"].length && (Object.assign(r, r["@graph"][0]), delete r["@graph"]), r;
      },
          c = ".",
          o = ke(".", !1),
          f = function f(t) {
        return t;
      },
          i = "#",
          h = ke("#", !1),
          l = /^[^\n]/,
          A = Be(["\n"], !0, !1),
          p = "\n",
          d = ke("\n", !1),
          g = function g(t) {
        return t.join("");
      },
          v = "@prefix",
          w = ke("@prefix", !1),
          b = function b(t, r) {
        return vn.addPrefix("" === t ? "0" : t, r), {};
      },
          C = "@base",
          x = ke("@base", !1),
          F = function F(t) {
        return vn.addBase(t), {};
      },
          y = /^[Bb]/,
          m = Be(["B", "b"], !1, !1),
          S = /^[Aa]/,
          j = Be(["A", "a"], !1, !1),
          E = /^[Ss]/,
          I = Be(["S", "s"], !1, !1),
          $ = /^[Ee]/,
          D = Be(["E", "e"], !1, !1),
          L = /^[Pp]/,
          M = Be(["P", "p"], !1, !1),
          R = /^[Rr]/,
          X = Be(["R", "r"], !1, !1),
          O = /^[Ff]/,
          P = Be(["F", "f"], !1, !1),
          z = /^[Ii]/,
          Z = Be(["I", "i"], !1, !1),
          _ = /^[Xx]/,
          k = Be(["X", "x"], !1, !1),
          B = function B(t, r) {
        var e = {};
        return "string" == typeof t && "[]" !== t ? e["@id"] = t : "object" == typeof t && Object.assign(e, t), r && Object.assign(e, r), [e];
      },
          U = function U(t, r) {
        var e = {};
        return t && Object.assign(e, t), r && Object.assign(e, r), [e];
      },
          J = ";",
          N = ke(";", !1),
          T = function T(t, r, e, n) {
        var u = {};
        return u[e] = n, u;
      },
          q = function q(t, r, e) {
        return e;
      },
          G = function G(t, r, e) {
        var n = {};
        return e.unshift(function (t, r) {
          var e = {};
          return e[t] = r, e;
        }(t, r)), e.forEach(t => {
          t && Object.keys(t).forEach(r => {
            t[r].forEach(t => {
              "@type" === r && void 0 !== t["@id"] && (t = t["@id"]), void 0 === n[r] ? n[r] = t : Array.isArray(n[r]) ? n[r].push(t) : n[r] = [n[r], t];
            });
          });
        }), n;
      },
          H = ",",
          K = ke(",", !1),
          Q = function Q(t, r) {
        return r;
      },
          V = function V(t, r) {
        return r.unshift(t), r;
      },
          W = "a",
          Y = ke("a", !1),
          tt = function tt() {
        return "@type";
      },
          rt = function rt(t) {
        return wn(t, !0);
      },
          et = function et(t) {
        return wn(t, !1);
      },
          nt = function nt(t) {
        return "[]" === t ? {} : {
          "@id": t
        };
      },
          ut = function ut(t) {
        return {
          "@id": t
        };
      },
          st = "[",
          at = ke("[", !1),
          ct = "]",
          ot = ke("]", !1),
          ft = "(",
          it = ke("(", !1),
          ht = ")",
          lt = ke(")", !1),
          At = function At(t) {
        return {
          "@list": t
        };
      },
          pt = function pt(t, r) {
        return {
          "@value": t,
          "@language": r
        };
      },
          dt = "^^",
          gt = ke("^^", !1),
          vt = function vt(t, r) {
        if ("http://www.w3.org/2001/XMLSchema#boolean" === r && "true" === t) return !0;
        if ("http://www.w3.org/2001/XMLSchema#boolean" === r && "false" === t) return !1;
        if ("http://www.w3.org/2001/XMLSchema#integer" === r) return parseInt(t);
        if ("http://www.w3.org/2001/XMLSchema#double" === r) return parseFloat(t);
        var e = vn.resolve(r, !0);

        if (e) {
          var _n = r.split(":")[0];
          if ("http://www.w3.org/2001/XMLSchema#boolean" === e && "true" === t) return vn.decrement(_n), !0;
          if ("http://www.w3.org/2001/XMLSchema#boolean" === e && "false" === t) return vn.decrement(_n), !1;
          if ("http://www.w3.org/2001/XMLSchema#integer" === e) return vn.decrement(_n), parseInt(t);
          if ("http://www.w3.org/2001/XMLSchema#double" === e) return vn.decrement(_n), parseFloat(t);
        }

        return {
          "@value": t,
          "@type": r
        };
      },
          wt = "true",
          bt = ke("true", !1),
          Ct = function Ct() {
        return !0;
      },
          xt = "false",
          Ft = ke("false", !1),
          yt = function yt() {
        return !1;
      },
          mt = function mt(t) {
        return t + ":";
      },
          St = "<",
          jt = ke("<", !1),
          Et = /^[^\0- <>"{}|\^`\\]/,
          It = Be([["\0", " "], "<", ">", '"', "{", "}", "|", "^", "`", "\\"], !0, !1),
          $t = ">",
          Dt = ke(">", !1),
          Lt = function Lt(t) {
        var r = t.map(t => 65536 <= t.codePointAt(0) && t.codePointAt(0) <= 983039 ? "a" : 1 === t.length ? t : 6 === t.length ? String.fromCharCode("0x" + t.substring(2)) : 10 === t.length ? String.fromCodePoint("0x" + t.substring(2)) : t).join("");

        if (r.match(/^[^\u0000-\u0020<>"{}|^`\\]*$/)) {
          var e = t.join("");

          try {
            return vn.resolve(e);
          } catch (t) {
            _e("Invalid IRIREF " + e);
          }
        } else _e("Invalid IRIREF " + t.join("") + " / " + r);
      },
          Mt = ":",
          Rt = ke(":", !1),
          Xt = function Xt(t) {
        return t = t || "0", !1 === vn.hasPrefix(t) && _e("undefined prefix " + t), t;
      },
          Ot = function Ot(t) {
        return t || "";
      },
          Pt = function Pt(t, r) {
        return vn.increment(t), vn.resolve(t + ":" + r);
      },
          zt = "_:",
          Zt = ke("_:", !1),
          _t = /^[0-9]/,
          kt = Be([["0", "9"]], !1, !1),
          Bt = "@",
          Ut = ke("@", !1),
          Jt = /^[a-zA-Z]/,
          Nt = Be([["a", "z"], ["A", "Z"]], !1, !1),
          Tt = "-",
          qt = ke("-", !1),
          Gt = /^[a-zA-Z0-9]/,
          Ht = Be([["a", "z"], ["A", "Z"], ["0", "9"]], !1, !1),
          Kt = function Kt(t, r) {
        return "-" + r.join("");
      },
          Qt = function Qt(t, r) {
        return t.join("") + r.join("");
      },
          Vt = /^[+\-]/,
          Wt = Be(["+", "-"], !1, !1),
          Yt = function Yt(t) {
        return parseInt(t);
      },
          tr = function tr(t) {
        return {
          "@value": t,
          "@type": "http://www.w3.org/2001/XMLSchema#decimal"
        };
      },
          rr = function rr(t) {
        return {
          "@value": t,
          "@type": "http://www.w3.org/2001/XMLSchema#double"
        };
      },
          er = /^[eE]/,
          nr = Be(["e", "E"], !1, !1),
          ur = '"',
          sr = ke('"', !1),
          ar = /^[^"\\\n\r]/,
          cr = Be(['"', "\\", "\n", "\r"], !0, !1),
          or = "'",
          fr = ke("'", !1),
          ir = /^[^'\\\n\r]/,
          hr = Be(["'", "\\", "\n", "\r"], !0, !1),
          lr = "'''",
          Ar = ke("'''", !1),
          pr = /^[^'\\]/,
          dr = Be(["'", "\\"], !0, !1),
          gr = "''",
          vr = ke("''", !1),
          wr = function wr(t, r) {
        return "''" + r.join("");
      },
          br = function br(t, r) {
        return "'" + r.join("");
      },
          Cr = function Cr(t, r) {
        return t.join("") + r.join("");
      },
          xr = '"""',
          Fr = ke('"""', !1),
          yr = /^[^"\\]/,
          mr = Be(['"', "\\"], !0, !1),
          Sr = '""',
          jr = ke('""', !1),
          Er = function Er(t, r) {
        return '""' + r.join("");
      },
          Ir = function Ir(t, r) {
        return '"' + r.join("");
      },
          $r = "\\U",
          Dr = ke("\\U", !1),
          Lr = function Lr(t) {
        return String.fromCodePoint(parseInt(t.join(""), 16));
      },
          Mr = "\\u",
          Rr = ke("\\u", !1),
          Xr = function Xr(t) {
        return String.fromCharCode(parseInt(t.join(""), 16));
      },
          Or = "\\t",
          Pr = ke("\\t", !1),
          zr = function zr() {
        return "\t";
      },
          Zr = "\\b",
          _r = ke("\\b", !1),
          kr = function kr() {
        return "\b";
      },
          Br = "\\n",
          Ur = ke("\\n", !1),
          Jr = function Jr() {
        return "\n";
      },
          Nr = "\\r",
          Tr = ke("\\r", !1),
          qr = function qr() {
        return "\r";
      },
          Gr = "\\f",
          Hr = ke("\\f", !1),
          Kr = function Kr() {
        return "\f";
      },
          Qr = '\\"',
          Vr = ke('\\"', !1),
          Wr = function Wr() {
        return '"';
      },
          Yr = "\\'",
          te = ke("\\'", !1),
          re = function re() {
        return "'";
      },
          ee = "\\\\",
          ne = ke("\\\\", !1),
          ue = function ue() {
        return "\\";
      },
          se = /^[ \t\r\n]/,
          ae = Be([" ", "\t", "\r", "\n"], !1, !1),
          ce = function ce() {
        return "[]";
      },
          oe = /^[\uD800-\uDBFF]/,
          fe = Be([["\ud800", "\udbff"]], !1, !1),
          ie = /^[\uDC00-\uDFFF]/,
          he = Be([["\udc00", "\udfff"]], !1, !1),
          le = function le(t, r) {
        return t + r;
      },
          Ae = /^[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
          pe = Be([["A", "Z"], ["a", "z"], ["À", "Ö"], ["Ø", "ö"], ["ø", "˿"], ["Ͱ", "ͽ"], ["Ϳ", "῿"], ["‌", "‍"], ["⁰", "↏"], ["Ⰰ", "⿯"], ["、", "퟿"], ["豈", "﷏"], ["ﷰ", "�"]], !1, !1),
          de = "_",
          ge = ke("_", !1),
          ve = "·",
          we = ke("·", !1),
          be = /^[\u0300-\u036F]/,
          Ce = Be([["̀", "ͯ"]], !1, !1),
          xe = /^[\u203F-\u2040]/,
          Fe = Be([["‿", "⁀"]], !1, !1),
          ye = function ye(t, r, e, n) {
        return e.join("") + n.join("");
      },
          me = function me(t, r, e) {
        return t + r.join("") + e.join("");
      },
          Se = "%",
          je = ke("%", !1),
          Ee = /^[0-9A-Fa-f]/,
          Ie = Be([["0", "9"], ["A", "F"], ["a", "f"]], !1, !1),
          $e = "\\",
          De = ke("\\", !1),
          Le = /^[_~.!$&'()*+,;=\/?#@%\-]/,
          Me = Be(["_", "~", ".", "!", "$", "&", "'", "(", ")", "*", "+", ",", ";", "=", "/", "?", "#", "@", "%", "-"], !1, !1),
          Re = 0,
          Xe = 0,
          Oe = [{
        line: 1,
        column: 1
      }],
          Pe = 0,
          ze = [];

      if ("startRule" in r) {
        if (!(r.startRule in u)) throw new Error("Can't start parsing from rule \"" + r.startRule + '".');
        s = u[r.startRule];
      }

      function _e(t, r) {
        throw function (t, r) {
          return new peg$SyntaxError(t, null, null, r);
        }(t, r = void 0 !== r ? r : Je(Xe, Re));
      }

      function ke(t, r) {
        return {
          type: "literal",
          text: t,
          ignoreCase: r
        };
      }

      function Be(t, r, e) {
        return {
          type: "class",
          parts: t,
          inverted: r,
          ignoreCase: e
        };
      }

      function Ue(r) {
        var e,
            n = Oe[r];
        if (n) return n;

        for (e = r - 1; !Oe[e];) {
          e--;
        }

        for (n = {
          line: (n = Oe[e]).line,
          column: n.column
        }; e < r;) {
          10 === t.charCodeAt(e) ? (n.line++, n.column = 1) : n.column++, e++;
        }

        return Oe[r] = n, n;
      }

      function Je(t, r) {
        var e = Ue(t),
            n = Ue(r);
        return {
          start: {
            offset: t,
            line: e.line,
            column: e.column
          },
          end: {
            offset: r,
            line: n.line,
            column: n.column
          }
        };
      }

      function Ne(t) {
        Re < Pe || (Re > Pe && (Pe = Re, ze = []), ze.push(t));
      }

      function Te(t, r, e) {
        return new peg$SyntaxError(peg$SyntaxError.buildMessage(t, r), t, r, e);
      }

      function qe() {
        var t, r, e, u;

        for (t = Re, r = [], e = Ge(); e !== n;) {
          r.push(e), e = Ge();
        }

        if (r !== n) {
          for (e = [], u = He(); u !== n;) {
            e.push(u), u = He();
          }

          e !== n ? (Xe = t, t = r = a(r)) : (Re = t, t = n);
        } else Re = t, t = n;

        return t;
      }

      function Ge() {
        var r, e, u, s;
        if ((r = function () {
          var r;
          (r = function () {
            var r, e, u, s, a, f, i, h, l;

            for (r = Re, e = [], u = He(); u !== n;) {
              e.push(u), u = He();
            }

            if (e !== n) {
              if (t.substr(Re, 7) === v ? (u = v, Re += 7) : (u = n,  Ne(w)), u !== n) {
                for (s = [], a = He(); a !== n;) {
                  s.push(a), a = He();
                }

                if (s !== n) {
                  if ((a = an()) !== n) {
                    for (f = [], i = He(); i !== n;) {
                      f.push(i), i = He();
                    }

                    if (f !== n) {
                      if ((i = un()) !== n) {
                        for (h = [], l = He(); l !== n;) {
                          h.push(l), l = He();
                        }

                        h !== n ? (46 === t.charCodeAt(Re) ? (l = c, Re++) : (l = n,  Ne(o)), l !== n ? (Xe = r, e = b(a, i), r = e) : (Re = r, r = n)) : (Re = r, r = n);
                      } else Re = r, r = n;
                    } else Re = r, r = n;
                  } else Re = r, r = n;
                } else Re = r, r = n;
              } else Re = r, r = n;
            } else Re = r, r = n;
            return r;
          }()) === n && (r = function () {
            var r, e, u, s, a, f, i;
            r = Re, e = [], u = He();

            for (; u !== n;) {
              e.push(u), u = He();
            }

            if (e !== n) {
              if (t.substr(Re, 5) === C ? (u = C, Re += 5) : (u = n,  Ne(x)), u !== n) {
                for (s = [], a = He(); a !== n;) {
                  s.push(a), a = He();
                }

                if (s !== n) {
                  if ((a = un()) !== n) {
                    for (f = [], i = He(); i !== n;) {
                      f.push(i), i = He();
                    }

                    f !== n ? (46 === t.charCodeAt(Re) ? (i = c, Re++) : (i = n,  Ne(o)), i !== n ? (Xe = r, e = F(a), r = e) : (Re = r, r = n)) : (Re = r, r = n);
                  } else Re = r, r = n;
                } else Re = r, r = n;
              } else Re = r, r = n;
            } else Re = r, r = n;
            return r;
          }()) === n && (r = function () {
            var r, e, u, s, a, c, o, f, i, h, l, A;
            r = Re, e = [], u = He();

            for (; u !== n;) {
              e.push(u), u = He();
            }

            if (e !== n) {
              if (L.test(t.charAt(Re)) ? (u = t.charAt(Re), Re++) : (u = n,  Ne(M)), u !== n) {
                if (R.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(X)), s !== n) {
                  if ($.test(t.charAt(Re)) ? (a = t.charAt(Re), Re++) : (a = n,  Ne(D)), a !== n) {
                    if (O.test(t.charAt(Re)) ? (c = t.charAt(Re), Re++) : (c = n,  Ne(P)), c !== n) {
                      if (z.test(t.charAt(Re)) ? (o = t.charAt(Re), Re++) : (o = n,  Ne(Z)), o !== n) {
                        if (_.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(k)), f !== n) {
                          for (i = [], h = He(); h !== n;) {
                            i.push(h), h = He();
                          }

                          if (i !== n) {
                            if ((h = an()) !== n) {
                              for (l = [], A = He(); A !== n;) {
                                l.push(A), A = He();
                              }

                              l !== n && (A = un()) !== n ? (Xe = r, e = b(h, A), r = e) : (Re = r, r = n);
                            } else Re = r, r = n;
                          } else Re = r, r = n;
                        } else Re = r, r = n;
                      } else Re = r, r = n;
                    } else Re = r, r = n;
                  } else Re = r, r = n;
                } else Re = r, r = n;
              } else Re = r, r = n;
            } else Re = r, r = n;
            return r;
          }()) === n && (r = function () {
            var r, e, u, s, a, c, o, f;
            r = Re, e = [], u = He();

            for (; u !== n;) {
              e.push(u), u = He();
            }

            if (e !== n) {
              if (y.test(t.charAt(Re)) ? (u = t.charAt(Re), Re++) : (u = n,  Ne(m)), u !== n) {
                if (S.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(j)), s !== n) {
                  if (E.test(t.charAt(Re)) ? (a = t.charAt(Re), Re++) : (a = n,  Ne(I)), a !== n) {
                    if ($.test(t.charAt(Re)) ? (c = t.charAt(Re), Re++) : (c = n,  Ne(D)), c !== n) {
                      for (o = [], f = He(); f !== n;) {
                        o.push(f), f = He();
                      }

                      o !== n && (f = un()) !== n ? (Xe = r, e = F(f), r = e) : (Re = r, r = n);
                    } else Re = r, r = n;
                  } else Re = r, r = n;
                } else Re = r, r = n;
              } else Re = r, r = n;
            } else Re = r, r = n;
            return r;
          }());
          return r;
        }()) === n) if (r = Re, (e = function () {
          var t, r, e;
          t = Re, (r = function () {
            var t, r;
            return t = Re, (r = tn()) !== n && (Xe = t, r = rt(r)), (t = r) === n && (t = nn()) === n && (t = en()), t;
          }()) !== n && (e = Ke()) !== n ? (Xe = t, r = B(r, e), t = r) : (Re = t, t = n);
          t === n && (t = Re, (r = Ye()) !== n ? ((e = Ke()) === n && (e = null), e !== n ? (Xe = t, r = U(r, e), t = r) : (Re = t, t = n)) : (Re = t, t = n));
          return t;
        }()) !== n) {
          for (u = [], s = He(); s !== n;) {
            u.push(s), s = He();
          }

          u !== n ? (46 === t.charCodeAt(Re) ? (s = c, Re++) : (s = n,  Ne(o)), s !== n ? (Xe = r, r = e = f(e)) : (Re = r, r = n)) : (Re = r, r = n);
        } else Re = r, r = n;
        return r;
      }

      function He() {
        var r;
        return (r = function () {
          var r;
          se.test(t.charAt(Re)) ? (r = t.charAt(Re), Re++) : (r = n,  Ne(ae));
          return r;
        }()) === n && (r = function () {
          var r, e, u, s;

          if (r = Re, 35 === t.charCodeAt(Re) ? (e = i, Re++) : (e = n,  Ne(h)), e !== n) {
            for (u = [], l.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(A)); s !== n;) {
              u.push(s), l.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(A));
            }

            u !== n ? (10 === t.charCodeAt(Re) ? (s = p, Re++) : (s = n,  Ne(d)), s !== n ? (Xe = r, r = e = g(u)) : (Re = r, r = n)) : (Re = r, r = n);
          } else Re = r, r = n;

          return r;
        }()), r;
      }

      function Ke() {
        var r, e, u, s, a, c, o, f, i, h;
        if (r = Re, (e = Ve()) !== n) {
          if ((u = Qe()) !== n) {
            for (s = [], a = Re, c = [], o = He(); o !== n;) {
              c.push(o), o = He();
            }

            for (c !== n ? (59 === t.charCodeAt(Re) ? (o = J, Re++) : (o = n,  Ne(N)), o !== n ? (f = Re, (i = Ve()) !== n && (h = Qe()) !== n ? (Xe = f, f = i = T(e, u, i, h)) : (Re = f, f = n), f === n && (f = null), f !== n ? (Xe = a, a = c = q(e, u, f)) : (Re = a, a = n)) : (Re = a, a = n)) : (Re = a, a = n); a !== n;) {
              for (s.push(a), a = Re, c = [], o = He(); o !== n;) {
                c.push(o), o = He();
              }

              c !== n ? (59 === t.charCodeAt(Re) ? (o = J, Re++) : (o = n,  Ne(N)), o !== n ? (f = Re, (i = Ve()) !== n && (h = Qe()) !== n ? (Xe = f, f = i = T(e, u, i, h)) : (Re = f, f = n), f === n && (f = null), f !== n ? (Xe = a, a = c = q(e, u, f)) : (Re = a, a = n)) : (Re = a, a = n)) : (Re = a, a = n);
            }

            s !== n ? (Xe = r, r = e = G(e, u, s)) : (Re = r, r = n);
          } else Re = r, r = n;
        } else Re = r, r = n;
        return r;
      }

      function Qe() {
        var r, e, u, s, a, c, o;

        if (r = Re, (e = We()) !== n) {
          for (u = [], s = Re, a = [], c = He(); c !== n;) {
            a.push(c), c = He();
          }

          for (a !== n ? (44 === t.charCodeAt(Re) ? (c = H, Re++) : (c = n,  Ne(K)), c !== n && (o = We()) !== n ? (Xe = s, s = a = Q(e, o)) : (Re = s, s = n)) : (Re = s, s = n); s !== n;) {
            for (u.push(s), s = Re, a = [], c = He(); c !== n;) {
              a.push(c), c = He();
            }

            a !== n ? (44 === t.charCodeAt(Re) ? (c = H, Re++) : (c = n,  Ne(K)), c !== n && (o = We()) !== n ? (Xe = s, s = a = Q(e, o)) : (Re = s, s = n)) : (Re = s, s = n);
          }

          u !== n ? (Xe = r, r = e = V(e, u)) : (Re = r, r = n);
        } else Re = r, r = n;

        return r;
      }

      function Ve() {
        var r, e, u;

        if (r = Re, (e = function () {
          var t, r, e;
          t = Re, r = [], e = He();

          for (; e !== n;) {
            r.push(e), e = He();
          }

          r !== n && (e = en()) !== n ? (Xe = t, r = f(e), t = r) : (Re = t, t = n);
          return t;
        }()) !== n && (Xe = r, e = f(e)), (r = e) === n) {
          for (r = Re, e = [], u = He(); u !== n;) {
            e.push(u), u = He();
          }

          e !== n ? (97 === t.charCodeAt(Re) ? (u = W, Re++) : (u = n,  Ne(Y)), u !== n ? (Xe = r, r = e = tt()) : (Re = r, r = n)) : (Re = r, r = n);
        }

        return r;
      }

      function We() {
        var r, e;
        return (r = function () {
          var r;
          (r = function () {
            var r, e, u, s, a, c, o;

            for (r = Re, e = [], u = He(); u !== n;) {
              e.push(u), u = He();
            }

            if (e !== n) {
              if ((u = rn()) !== n) {
                for (s = [], a = He(); a !== n;) {
                  s.push(a), a = He();
                }

                s !== n && (a = function () {
                  var r, e, u, s, a, c, o, f;

                  if (r = Re, 64 === t.charCodeAt(Re) ? (e = Bt, Re++) : (e = n,  Ne(Ut)), e !== n) {
                    if (u = [], Jt.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(Nt)), s !== n) for (; s !== n;) {
                      u.push(s), Jt.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(Nt));
                    } else u = n;

                    if (u !== n) {
                      if (s = [], a = Re, 45 === t.charCodeAt(Re) ? (c = Tt, Re++) : (c = n,  Ne(qt)), c !== n) {
                        if (o = [], Gt.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(Ht)), f !== n) for (; f !== n;) {
                          o.push(f), Gt.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(Ht));
                        } else o = n;
                        o !== n ? (Xe = a, c = Kt(u, o), a = c) : (Re = a, a = n);
                      } else Re = a, a = n;

                      for (; a !== n;) {
                        if (s.push(a), a = Re, 45 === t.charCodeAt(Re) ? (c = Tt, Re++) : (c = n,  Ne(qt)), c !== n) {
                          if (o = [], Gt.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(Ht)), f !== n) for (; f !== n;) {
                            o.push(f), Gt.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(Ht));
                          } else o = n;
                          o !== n ? (Xe = a, c = Kt(u, o), a = c) : (Re = a, a = n);
                        } else Re = a, a = n;
                      }

                      s !== n ? (Xe = r, e = Qt(u, s), r = e) : (Re = r, r = n);
                    } else Re = r, r = n;
                  } else Re = r, r = n;

                  return r;
                }()) !== n ? (Xe = r, e = pt(u, a), r = e) : (Re = r, r = n);
              } else Re = r, r = n;
            } else Re = r, r = n;

            if (r === n) {
              for (r = Re, e = [], u = He(); u !== n;) {
                e.push(u), u = He();
              }

              if (e !== n) {
                if ((u = rn()) !== n) {
                  for (s = [], a = He(); a !== n;) {
                    s.push(a), a = He();
                  }

                  if (s !== n) {
                    if (t.substr(Re, 2) === dt ? (a = dt, Re += 2) : (a = n,  Ne(gt)), a !== n) {
                      for (c = [], o = He(); o !== n;) {
                        c.push(o), o = He();
                      }

                      c !== n && (o = en()) !== n ? (Xe = r, e = vt(u, o), r = e) : (Re = r, r = n);
                    } else Re = r, r = n;
                  } else Re = r, r = n;
                } else Re = r, r = n;
              } else Re = r, r = n;

              if (r === n) {
                for (r = Re, e = [], u = He(); u !== n;) {
                  e.push(u), u = He();
                }

                e !== n && (u = rn()) !== n ? (Xe = r, e = f(u), r = e) : (Re = r, r = n);
              }
            }

            return r;
          }()) === n && (r = function () {
            var r, e, u;
            r = Re, e = [], u = He();

            for (; u !== n;) {
              e.push(u), u = He();
            }

            e !== n ? ((u = function () {
              var r, e, u, s, a, f, i, h, l;
              r = Re, e = Re, u = Re, Vt.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(Wt));
              s === n && (s = null);

              if (s !== n) {
                if (a = Re, f = [], _t.test(t.charAt(Re)) ? (i = t.charAt(Re), Re++) : (i = n,  Ne(kt)), i !== n) for (; i !== n;) {
                  f.push(i), _t.test(t.charAt(Re)) ? (i = t.charAt(Re), Re++) : (i = n,  Ne(kt));
                } else f = n;
                if (f !== n) {
                  if (46 === t.charCodeAt(Re) ? (i = c, Re++) : (i = n,  Ne(o)), i !== n) {
                    for (h = [], _t.test(t.charAt(Re)) ? (l = t.charAt(Re), Re++) : (l = n,  Ne(kt)); l !== n;) {
                      h.push(l), _t.test(t.charAt(Re)) ? (l = t.charAt(Re), Re++) : (l = n,  Ne(kt));
                    }

                    h !== n && (l = cn()) !== n ? a = f = [f, i, h, l] : (Re = a, a = n);
                  } else Re = a, a = n;
                } else Re = a, a = n;

                if (a === n) {
                  if (a = Re, 46 === t.charCodeAt(Re) ? (f = c, Re++) : (f = n,  Ne(o)), f !== n) {
                    if (i = [], _t.test(t.charAt(Re)) ? (h = t.charAt(Re), Re++) : (h = n,  Ne(kt)), h !== n) for (; h !== n;) {
                      i.push(h), _t.test(t.charAt(Re)) ? (h = t.charAt(Re), Re++) : (h = n,  Ne(kt));
                    } else i = n;
                    i !== n && (h = cn()) !== n ? a = f = [f, i, h] : (Re = a, a = n);
                  } else Re = a, a = n;

                  if (a === n) {
                    if (a = Re, f = [], _t.test(t.charAt(Re)) ? (i = t.charAt(Re), Re++) : (i = n,  Ne(kt)), i !== n) for (; i !== n;) {
                      f.push(i), _t.test(t.charAt(Re)) ? (i = t.charAt(Re), Re++) : (i = n,  Ne(kt));
                    } else f = n;
                    f !== n && (i = cn()) !== n ? a = f = [f, i] : (Re = a, a = n);
                  }
                }

                a !== n ? u = s = [s, a] : (Re = u, u = n);
              } else Re = u, u = n;

              e = u !== n ? t.substring(e, Re) : u;
              e !== n && (Xe = r, e = rr(e));
              return r = e;
            }()) === n && (u = function () {
              var r, e, u, s, a, f, i, h;
              r = Re, e = Re, u = Re, Vt.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(Wt));
              s === n && (s = null);

              if (s !== n) {
                for (a = [], _t.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(kt)); f !== n;) {
                  a.push(f), _t.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(kt));
                }

                if (a !== n) {
                  if (46 === t.charCodeAt(Re) ? (f = c, Re++) : (f = n,  Ne(o)), f !== n) {
                    if (i = [], _t.test(t.charAt(Re)) ? (h = t.charAt(Re), Re++) : (h = n,  Ne(kt)), h !== n) for (; h !== n;) {
                      i.push(h), _t.test(t.charAt(Re)) ? (h = t.charAt(Re), Re++) : (h = n,  Ne(kt));
                    } else i = n;
                    i !== n ? u = s = [s, a, f, i] : (Re = u, u = n);
                  } else Re = u, u = n;
                } else Re = u, u = n;
              } else Re = u, u = n;

              e = u !== n ? t.substring(e, Re) : u;
              e !== n && (Xe = r, e = tr(e));
              return r = e;
            }()) === n && (u = function () {
              var r, e, u, s, a, c;
              r = Re, e = Re, u = Re, Vt.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(Wt));
              s === n && (s = null);

              if (s !== n) {
                if (a = [], _t.test(t.charAt(Re)) ? (c = t.charAt(Re), Re++) : (c = n,  Ne(kt)), c !== n) for (; c !== n;) {
                  a.push(c), _t.test(t.charAt(Re)) ? (c = t.charAt(Re), Re++) : (c = n,  Ne(kt));
                } else a = n;
                a !== n ? u = s = [s, a] : (Re = u, u = n);
              } else Re = u, u = n;

              e = u !== n ? t.substring(e, Re) : u;
              e !== n && (Xe = r, e = Yt(e));
              return r = e;
            }()), u !== n ? (Xe = r, e = f(u), r = e) : (Re = r, r = n)) : (Re = r, r = n);
            return r;
          }()) === n && (r = function () {
            var r, e, u;
            r = Re, e = [], u = He();

            for (; u !== n;) {
              e.push(u), u = He();
            }

            e !== n ? (t.substr(Re, 4) === wt ? (u = wt, Re += 4) : (u = n,  Ne(bt)), u !== n ? (Xe = r, e = Ct(), r = e) : (Re = r, r = n)) : (Re = r, r = n);

            if (r === n) {
              for (r = Re, e = [], u = He(); u !== n;) {
                e.push(u), u = He();
              }

              e !== n ? (t.substr(Re, 5) === xt ? (u = xt, Re += 5) : (u = n,  Ne(Ft)), u !== n ? (Xe = r, e = yt(), r = e) : (Re = r, r = n)) : (Re = r, r = n);
            }

            return r;
          }());
          return r;
        }()) === n && (r = Re, (e = tn()) !== n && (Xe = r, e = et(e)), (r = e) === n && (r = Re, (e = nn()) !== n && (Xe = r, e = nt(e)), (r = e) === n && (r = Re, (e = Ye()) !== n && (Xe = r, e = f(e)), (r = e) === n && (r = Re, (e = en()) !== n && (Xe = r, e = ut(e)), r = e)))), r;
      }

      function Ye() {
        var r, e, u, s, a, c;

        for (r = Re, e = [], u = He(); u !== n;) {
          e.push(u), u = He();
        }

        if (e !== n) {
          if (91 === t.charCodeAt(Re) ? (u = st, Re++) : (u = n,  Ne(at)), u !== n) {
            if ((s = Ke()) !== n) {
              for (a = [], c = He(); c !== n;) {
                a.push(c), c = He();
              }

              a !== n ? (93 === t.charCodeAt(Re) ? (c = ct, Re++) : (c = n,  Ne(ot)), c !== n ? (Xe = r, r = e = f(s)) : (Re = r, r = n)) : (Re = r, r = n);
            } else Re = r, r = n;
          } else Re = r, r = n;
        } else Re = r, r = n;
        return r;
      }

      function tn() {
        var r, e, u, s, a, c;

        for (r = Re, e = [], u = He(); u !== n;) {
          e.push(u), u = He();
        }

        if (e !== n) {
          if (40 === t.charCodeAt(Re) ? (u = ft, Re++) : (u = n,  Ne(it)), u !== n) {
            for (s = [], a = We(); a !== n;) {
              s.push(a), a = We();
            }

            if (s !== n) {
              for (a = [], c = He(); c !== n;) {
                a.push(c), c = He();
              }

              a !== n ? (41 === t.charCodeAt(Re) ? (c = ht, Re++) : (c = n,  Ne(lt)), c !== n ? (Xe = r, r = e = At(s)) : (Re = r, r = n)) : (Re = r, r = n);
            } else Re = r, r = n;
          } else Re = r, r = n;
        } else Re = r, r = n;
        return r;
      }

      function rn() {
        var r, e, u;

        for (r = Re, e = [], u = He(); u !== n;) {
          e.push(u), u = He();
        }

        return e !== n ? ((u = function () {
          var r, e, u, s, a, c, o, f;
          r = Re, t.substr(Re, 3) === lr ? (e = lr, Re += 3) : (e = n,  Ne(Ar));

          if (e !== n) {
            for (u = [], pr.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(dr)), s === n && (s = fn()) === n && (s = on()); s !== n;) {
              u.push(s), pr.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(dr)), s === n && (s = fn()) === n && (s = on());
            }

            if (u !== n) {
              if (s = [], a = Re, t.substr(Re, 2) === gr ? (c = gr, Re += 2) : (c = n,  Ne(vr)), c !== n) {
                if (o = [], pr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(dr)), f === n && (f = fn()) === n && (f = on()), f !== n) for (; f !== n;) {
                  o.push(f), pr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(dr)), f === n && (f = fn()) === n && (f = on());
                } else o = n;
                o !== n ? (Xe = a, c = wr(u, o), a = c) : (Re = a, a = n);
              } else Re = a, a = n;

              if (a === n) if (a = Re, 39 === t.charCodeAt(Re) ? (c = or, Re++) : (c = n,  Ne(fr)), c !== n) {
                if (o = [], pr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(dr)), f === n && (f = fn()) === n && (f = on()), f !== n) for (; f !== n;) {
                  o.push(f), pr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(dr)), f === n && (f = fn()) === n && (f = on());
                } else o = n;
                o !== n ? (Xe = a, c = br(u, o), a = c) : (Re = a, a = n);
              } else Re = a, a = n;

              for (; a !== n;) {
                if (s.push(a), a = Re, t.substr(Re, 2) === gr ? (c = gr, Re += 2) : (c = n,  Ne(vr)), c !== n) {
                  if (o = [], pr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(dr)), f === n && (f = fn()) === n && (f = on()), f !== n) for (; f !== n;) {
                    o.push(f), pr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(dr)), f === n && (f = fn()) === n && (f = on());
                  } else o = n;
                  o !== n ? (Xe = a, c = wr(u, o), a = c) : (Re = a, a = n);
                } else Re = a, a = n;

                if (a === n) if (a = Re, 39 === t.charCodeAt(Re) ? (c = or, Re++) : (c = n,  Ne(fr)), c !== n) {
                  if (o = [], pr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(dr)), f === n && (f = fn()) === n && (f = on()), f !== n) for (; f !== n;) {
                    o.push(f), pr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(dr)), f === n && (f = fn()) === n && (f = on());
                  } else o = n;
                  o !== n ? (Xe = a, c = br(u, o), a = c) : (Re = a, a = n);
                } else Re = a, a = n;
              }

              s !== n ? (t.substr(Re, 3) === lr ? (a = lr, Re += 3) : (a = n,  Ne(Ar)), a !== n ? (Xe = r, e = Cr(u, s), r = e) : (Re = r, r = n)) : (Re = r, r = n);
            } else Re = r, r = n;
          } else Re = r, r = n;

          return r;
        }()) === n && (u = function () {
          var r, e, u, s, a, c, o, f;
          r = Re, t.substr(Re, 3) === xr ? (e = xr, Re += 3) : (e = n,  Ne(Fr));

          if (e !== n) {
            for (u = [], yr.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(mr)), s === n && (s = fn()) === n && (s = on()); s !== n;) {
              u.push(s), yr.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(mr)), s === n && (s = fn()) === n && (s = on());
            }

            if (u !== n) {
              if (s = [], a = Re, t.substr(Re, 2) === Sr ? (c = Sr, Re += 2) : (c = n,  Ne(jr)), c !== n) {
                if (o = [], yr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(mr)), f === n && (f = fn()) === n && (f = on()), f !== n) for (; f !== n;) {
                  o.push(f), yr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(mr)), f === n && (f = fn()) === n && (f = on());
                } else o = n;
                o !== n ? (Xe = a, c = Er(u, o), a = c) : (Re = a, a = n);
              } else Re = a, a = n;

              if (a === n) if (a = Re, 34 === t.charCodeAt(Re) ? (c = ur, Re++) : (c = n,  Ne(sr)), c !== n) {
                if (o = [], yr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(mr)), f === n && (f = fn()) === n && (f = on()), f !== n) for (; f !== n;) {
                  o.push(f), yr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(mr)), f === n && (f = fn()) === n && (f = on());
                } else o = n;
                o !== n ? (Xe = a, c = Ir(u, o), a = c) : (Re = a, a = n);
              } else Re = a, a = n;

              for (; a !== n;) {
                if (s.push(a), a = Re, t.substr(Re, 2) === Sr ? (c = Sr, Re += 2) : (c = n,  Ne(jr)), c !== n) {
                  if (o = [], yr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(mr)), f === n && (f = fn()) === n && (f = on()), f !== n) for (; f !== n;) {
                    o.push(f), yr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(mr)), f === n && (f = fn()) === n && (f = on());
                  } else o = n;
                  o !== n ? (Xe = a, c = Er(u, o), a = c) : (Re = a, a = n);
                } else Re = a, a = n;

                if (a === n) if (a = Re, 34 === t.charCodeAt(Re) ? (c = ur, Re++) : (c = n,  Ne(sr)), c !== n) {
                  if (o = [], yr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(mr)), f === n && (f = fn()) === n && (f = on()), f !== n) for (; f !== n;) {
                    o.push(f), yr.test(t.charAt(Re)) ? (f = t.charAt(Re), Re++) : (f = n,  Ne(mr)), f === n && (f = fn()) === n && (f = on());
                  } else o = n;
                  o !== n ? (Xe = a, c = Ir(u, o), a = c) : (Re = a, a = n);
                } else Re = a, a = n;
              }

              s !== n ? (t.substr(Re, 3) === xr ? (a = xr, Re += 3) : (a = n,  Ne(Fr)), a !== n ? (Xe = r, e = Cr(u, s), r = e) : (Re = r, r = n)) : (Re = r, r = n);
            } else Re = r, r = n;
          } else Re = r, r = n;

          return r;
        }()) === n && (u = function () {
          var r, e, u, s;
          r = Re, 39 === t.charCodeAt(Re) ? (e = or, Re++) : (e = n,  Ne(fr));

          if (e !== n) {
            for (u = [], ir.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(hr)), s === n && (s = fn()) === n && (s = on()); s !== n;) {
              u.push(s), ir.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(hr)), s === n && (s = fn()) === n && (s = on());
            }

            u !== n ? (39 === t.charCodeAt(Re) ? (s = or, Re++) : (s = n,  Ne(fr)), s !== n ? (Xe = r, e = g(u), r = e) : (Re = r, r = n)) : (Re = r, r = n);
          } else Re = r, r = n;

          return r;
        }()) === n && (u = function () {
          var r, e, u, s;
          r = Re, 34 === t.charCodeAt(Re) ? (e = ur, Re++) : (e = n,  Ne(sr));

          if (e !== n) {
            for (u = [], ar.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(cr)), s === n && (s = fn()) === n && (s = on()); s !== n;) {
              u.push(s), ar.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(cr)), s === n && (s = fn()) === n && (s = on());
            }

            u !== n ? (34 === t.charCodeAt(Re) ? (s = ur, Re++) : (s = n,  Ne(sr)), s !== n ? (Xe = r, e = g(u), r = e) : (Re = r, r = n)) : (Re = r, r = n);
          } else Re = r, r = n;

          return r;
        }()), u !== n ? (Xe = r, r = e = f(u)) : (Re = r, r = n)) : (Re = r, r = n), r;
      }

      function en() {
        var r, e, u;

        for (r = Re, e = [], u = He(); u !== n;) {
          e.push(u), u = He();
        }

        if (e !== n && (u = un()) !== n ? (Xe = r, r = e = f(u)) : (Re = r, r = n), r === n) {
          for (r = Re, e = [], u = He(); u !== n;) {
            e.push(u), u = He();
          }

          e !== n && (u = function () {
            var r, e;
            (r = function () {
              var r, e, u;
              return r = Re, (e = sn()) !== n && (u = function () {
                var r, e, u, s, a, f, i, h;

                if (r = Re, (e = ln()) === n && (58 === t.charCodeAt(Re) ? (e = Mt, Re++) : (e = n,  Ne(Rt)), e === n && (_t.test(t.charAt(Re)) ? (e = t.charAt(Re), Re++) : (e = n,  Ne(kt)), e === n && (e = dn()))), e !== n) {
                  for (u = [], (s = An()) === n && (58 === t.charCodeAt(Re) ? (s = Mt, Re++) : (s = n,  Ne(Rt)), s === n && (s = dn())); s !== n;) {
                    u.push(s), (s = An()) === n && (58 === t.charCodeAt(Re) ? (s = Mt, Re++) : (s = n,  Ne(Rt)), s === n && (s = dn()));
                  }

                  if (u !== n) {
                    if (s = [], a = Re, f = [], 46 === t.charCodeAt(Re) ? (i = c, Re++) : (i = n,  Ne(o)), i !== n) for (; i !== n;) {
                      f.push(i), 46 === t.charCodeAt(Re) ? (i = c, Re++) : (i = n,  Ne(o));
                    } else f = n;

                    if (f !== n) {
                      if (i = [], (h = An()) === n && (58 === t.charCodeAt(Re) ? (h = Mt, Re++) : (h = n,  Ne(Rt)), h === n && (h = dn())), h !== n) for (; h !== n;) {
                        i.push(h), (h = An()) === n && (58 === t.charCodeAt(Re) ? (h = Mt, Re++) : (h = n,  Ne(Rt)), h === n && (h = dn()));
                      } else i = n;
                      i !== n ? (Xe = a, f = ye(e, u, f, i), a = f) : (Re = a, a = n);
                    } else Re = a, a = n;

                    for (; a !== n;) {
                      if (s.push(a), a = Re, f = [], 46 === t.charCodeAt(Re) ? (i = c, Re++) : (i = n,  Ne(o)), i !== n) for (; i !== n;) {
                        f.push(i), 46 === t.charCodeAt(Re) ? (i = c, Re++) : (i = n,  Ne(o));
                      } else f = n;

                      if (f !== n) {
                        if (i = [], (h = An()) === n && (58 === t.charCodeAt(Re) ? (h = Mt, Re++) : (h = n,  Ne(Rt)), h === n && (h = dn())), h !== n) for (; h !== n;) {
                          i.push(h), (h = An()) === n && (58 === t.charCodeAt(Re) ? (h = Mt, Re++) : (h = n,  Ne(Rt)), h === n && (h = dn()));
                        } else i = n;
                        i !== n ? (Xe = a, f = ye(e, u, f, i), a = f) : (Re = a, a = n);
                      } else Re = a, a = n;
                    }

                    s !== n ? (Xe = r, e = me(e, u, s), r = e) : (Re = r, r = n);
                  } else Re = r, r = n;
                } else Re = r, r = n;

                return r;
              }()) !== n ? (Xe = r, e = Pt(e, u), r = e) : (Re = r, r = n), r;
            }()) === n && (r = Re, (e = sn()) !== n && (Xe = r, e = mt(e)), r = e);
            return r;
          }()) !== n ? (Xe = r, r = e = f(u)) : (Re = r, r = n);
        }

        return r;
      }

      function nn() {
        var r, e, u;

        for (r = Re, e = [], u = He(); u !== n;) {
          e.push(u), u = He();
        }

        if (e !== n && (u = function () {
          var r, e, u, s, a, f, i, h, l, A;
          r = Re, e = Re, t.substr(Re, 2) === zt ? (u = zt, Re += 2) : (u = n,  Ne(Zt));
          if (u !== n) {
            if ((s = ln()) === n && (_t.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(kt))), s !== n) {
              for (a = [], f = An(); f !== n;) {
                a.push(f), f = An();
              }

              if (a !== n) {
                if (f = [], i = Re, h = [], 46 === t.charCodeAt(Re) ? (l = c, Re++) : (l = n,  Ne(o)), l !== n) for (; l !== n;) {
                  h.push(l), 46 === t.charCodeAt(Re) ? (l = c, Re++) : (l = n,  Ne(o));
                } else h = n;

                if (h !== n) {
                  if (l = [], (A = An()) !== n) for (; A !== n;) {
                    l.push(A), A = An();
                  } else l = n;
                  l !== n ? i = h = [h, l] : (Re = i, i = n);
                } else Re = i, i = n;

                for (; i !== n;) {
                  if (f.push(i), i = Re, h = [], 46 === t.charCodeAt(Re) ? (l = c, Re++) : (l = n,  Ne(o)), l !== n) for (; l !== n;) {
                    h.push(l), 46 === t.charCodeAt(Re) ? (l = c, Re++) : (l = n,  Ne(o));
                  } else h = n;

                  if (h !== n) {
                    if (l = [], (A = An()) !== n) for (; A !== n;) {
                      l.push(A), A = An();
                    } else l = n;
                    l !== n ? i = h = [h, l] : (Re = i, i = n);
                  } else Re = i, i = n;
                }

                f !== n ? e = u = [u, s, a, f] : (Re = e, e = n);
              } else Re = e, e = n;
            } else Re = e, e = n;
          } else Re = e, e = n;
          r = e !== n ? t.substring(r, Re) : e;
          return r;
        }()) !== n ? (Xe = r, r = e = f(u)) : (Re = r, r = n), r === n) {
          for (r = Re, e = [], u = He(); u !== n;) {
            e.push(u), u = He();
          }

          e !== n && (u = function () {
            var r, e, u, s;
            r = Re, 91 === t.charCodeAt(Re) ? (e = st, Re++) : (e = n,  Ne(at));

            if (e !== n) {
              for (u = [], s = He(); s !== n;) {
                u.push(s), s = He();
              }

              u !== n ? (93 === t.charCodeAt(Re) ? (s = ct, Re++) : (s = n,  Ne(ot)), s !== n ? (Xe = r, e = ce(), r = e) : (Re = r, r = n)) : (Re = r, r = n);
            } else Re = r, r = n;

            return r;
          }()) !== n ? (Xe = r, r = e = f(u)) : (Re = r, r = n);
        }

        return r;
      }

      function un() {
        var r, e, u, s;

        if (r = Re, 60 === t.charCodeAt(Re) ? (e = St, Re++) : (e = n,  Ne(jt)), e !== n) {
          for (u = [], Et.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(It)), s === n && (s = on()); s !== n;) {
            u.push(s), Et.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(It)), s === n && (s = on());
          }

          u !== n ? (62 === t.charCodeAt(Re) ? (s = $t, Re++) : (s = n,  Ne(Dt)), s !== n ? (Xe = r, r = e = Lt(u)) : (Re = r, r = n)) : (Re = r, r = n);
        } else Re = r, r = n;

        return r;
      }

      function sn() {
        var r, e, u;
        return r = Re, (e = pn()) === n && (e = null), e !== n ? (58 === t.charCodeAt(Re) ? (u = Mt, Re++) : (u = n,  Ne(Rt)), u !== n ? (Xe = r, r = e = Xt(e)) : (Re = r, r = n)) : (Re = r, r = n), r;
      }

      function an() {
        var r, e, u;
        return r = Re, (e = pn()) === n && (e = null), e !== n ? (58 === t.charCodeAt(Re) ? (u = Mt, Re++) : (u = n,  Ne(Rt)), u !== n ? (Xe = r, r = e = Ot(e)) : (Re = r, r = n)) : (Re = r, r = n), r;
      }

      function cn() {
        var r, e, u, s, a, c;
        if (r = Re, e = Re, er.test(t.charAt(Re)) ? (u = t.charAt(Re), Re++) : (u = n,  Ne(nr)), u !== n) {
          if (Vt.test(t.charAt(Re)) ? (s = t.charAt(Re), Re++) : (s = n,  Ne(Wt)), s === n && (s = null), s !== n) {
            if (a = [], _t.test(t.charAt(Re)) ? (c = t.charAt(Re), Re++) : (c = n,  Ne(kt)), c !== n) for (; c !== n;) {
              a.push(c), _t.test(t.charAt(Re)) ? (c = t.charAt(Re), Re++) : (c = n,  Ne(kt));
            } else a = n;
            a !== n ? e = u = [u, s, a] : (Re = e, e = n);
          } else Re = e, e = n;
        } else Re = e, e = n;
        return r = e !== n ? t.substring(r, Re) : e;
      }

      function on() {
        var r, e, u, s, a, c, o, f, i, h, l;
        return r = Re, t.substr(Re, 2) === $r ? (e = $r, Re += 2) : (e = n,  Ne(Dr)), e !== n ? (u = Re, (s = gn()) !== n && (a = gn()) !== n && (c = gn()) !== n && (o = gn()) !== n && (f = gn()) !== n && (i = gn()) !== n && (h = gn()) !== n && (l = gn()) !== n ? u = s = [s, a, c, o, f, i, h, l] : (Re = u, u = n), u !== n ? (Xe = r, r = e = Lr(u)) : (Re = r, r = n)) : (Re = r, r = n), r === n && (r = Re, t.substr(Re, 2) === Mr ? (e = Mr, Re += 2) : (e = n,  Ne(Rr)), e !== n ? (u = Re, (s = gn()) !== n && (a = gn()) !== n && (c = gn()) !== n && (o = gn()) !== n ? u = s = [s, a, c, o] : (Re = u, u = n), u !== n ? (Xe = r, r = e = Xr(u)) : (Re = r, r = n)) : (Re = r, r = n)), r;
      }

      function fn() {
        var r, e;
        return r = Re, t.substr(Re, 2) === Or ? (e = Or, Re += 2) : (e = n,  Ne(Pr)), e !== n && (Xe = r, e = zr()), (r = e) === n && (r = Re, t.substr(Re, 2) === Zr ? (e = Zr, Re += 2) : (e = n,  Ne(_r)), e !== n && (Xe = r, e = kr()), (r = e) === n && (r = Re, t.substr(Re, 2) === Br ? (e = Br, Re += 2) : (e = n,  Ne(Ur)), e !== n && (Xe = r, e = Jr()), (r = e) === n && (r = Re, t.substr(Re, 2) === Nr ? (e = Nr, Re += 2) : (e = n,  Ne(Tr)), e !== n && (Xe = r, e = qr()), (r = e) === n && (r = Re, t.substr(Re, 2) === Gr ? (e = Gr, Re += 2) : (e = n,  Ne(Hr)), e !== n && (Xe = r, e = Kr()), (r = e) === n && (r = Re, t.substr(Re, 2) === Qr ? (e = Qr, Re += 2) : (e = n,  Ne(Vr)), e !== n && (Xe = r, e = Wr()), (r = e) === n && (r = Re, t.substr(Re, 2) === Yr ? (e = Yr, Re += 2) : (e = n,  Ne(te)), e !== n && (Xe = r, e = re()), (r = e) === n && (r = Re, t.substr(Re, 2) === ee ? (e = ee, Re += 2) : (e = n,  Ne(ne)), e !== n && (Xe = r, e = ue()), r = e))))))), r;
      }

      function hn() {
        var r, e, u;
        return r = Re, oe.test(t.charAt(Re)) ? (e = t.charAt(Re), Re++) : (e = n,  Ne(fe)), e !== n ? (ie.test(t.charAt(Re)) ? (u = t.charAt(Re), Re++) : (u = n,  Ne(he)), u !== n ? (Xe = r, r = e = le(e, u)) : (Re = r, r = n)) : (Re = r, r = n), r === n && (Ae.test(t.charAt(Re)) ? (r = t.charAt(Re), Re++) : (r = n,  Ne(pe))), r;
      }

      function ln() {
        var r;
        return (r = hn()) === n && (95 === t.charCodeAt(Re) ? (r = de, Re++) : (r = n,  Ne(ge))), r;
      }

      function An() {
        var r;
        return (r = ln()) === n && (45 === t.charCodeAt(Re) ? (r = Tt, Re++) : (r = n,  Ne(qt)), r === n && (_t.test(t.charAt(Re)) ? (r = t.charAt(Re), Re++) : (r = n,  Ne(kt)), r === n && (183 === t.charCodeAt(Re) ? (r = ve, Re++) : (r = n,  Ne(we)), r === n && (be.test(t.charAt(Re)) ? (r = t.charAt(Re), Re++) : (r = n,  Ne(Ce)), r === n && (xe.test(t.charAt(Re)) ? (r = t.charAt(Re), Re++) : (r = n,  Ne(Fe))))))), r;
      }

      function pn() {
        var r, e, u, s, a, f, i, h, l;

        if (r = Re, e = Re, (u = hn()) !== n) {
          for (s = [], a = An(); a !== n;) {
            s.push(a), a = An();
          }

          if (s !== n) {
            if (a = [], f = Re, i = [], 46 === t.charCodeAt(Re) ? (h = c, Re++) : (h = n,  Ne(o)), h !== n) for (; h !== n;) {
              i.push(h), 46 === t.charCodeAt(Re) ? (h = c, Re++) : (h = n,  Ne(o));
            } else i = n;

            if (i !== n) {
              if (h = [], (l = An()) !== n) for (; l !== n;) {
                h.push(l), l = An();
              } else h = n;
              h !== n ? f = i = [i, h] : (Re = f, f = n);
            } else Re = f, f = n;

            for (; f !== n;) {
              if (a.push(f), f = Re, i = [], 46 === t.charCodeAt(Re) ? (h = c, Re++) : (h = n,  Ne(o)), h !== n) for (; h !== n;) {
                i.push(h), 46 === t.charCodeAt(Re) ? (h = c, Re++) : (h = n,  Ne(o));
              } else i = n;

              if (i !== n) {
                if (h = [], (l = An()) !== n) for (; l !== n;) {
                  h.push(l), l = An();
                } else h = n;
                h !== n ? f = i = [i, h] : (Re = f, f = n);
              } else Re = f, f = n;
            }

            a !== n ? e = u = [u, s, a] : (Re = e, e = n);
          } else Re = e, e = n;
        } else Re = e, e = n;

        return r = e !== n ? t.substring(r, Re) : e;
      }

      function dn() {
        var r;
        return (r = function () {
          var r, e, u, s, a;
          r = Re, e = Re, 37 === t.charCodeAt(Re) ? (u = Se, Re++) : (u = n,  Ne(je));
          u !== n && (s = gn()) !== n && (a = gn()) !== n ? e = u = [u, s, a] : (Re = e, e = n);
          r = e !== n ? t.substring(r, Re) : e;
          return r;
        }()) === n && (r = function () {
          var r, e, u;
          r = Re, 92 === t.charCodeAt(Re) ? (e = $e, Re++) : (e = n,  Ne(De));
          e !== n ? (Le.test(t.charAt(Re)) ? (u = t.charAt(Re), Re++) : (u = n,  Ne(Me)), u !== n ? (Xe = r, e = f(u), r = e) : (Re = r, r = n)) : (Re = r, r = n);
          return r;
        }()), r;
      }

      function gn() {
        var r;
        return Ee.test(t.charAt(Re)) ? (r = t.charAt(Re), Re++) : (r = n,  Ne(Ie)), r;
      }

      var vn = {
        base: [],
        data: {},
        addBase: function addBase(t) {
          if (0 === vn.base.length) return void vn.base.push(t);
          var r = vn.base[vn.base.length - 1];
          r !== t && vn.base.push(new URL(t, r).toString());
        },
        addPrefix: function addPrefix(t, r) {
          var e = vn.data[t];
          void 0 === e ? vn.data[t] = [{
            uri: r,
            count: 0
          }] : e[e.length - 1].uri !== r && e.push({
            uri: r,
            count: 0
          });
        },
        hasPrefix: function hasPrefix(t) {
          return void 0 !== this.data[t];
        },
        resolve: function resolve(t, e) {
          var n = Object.keys(vn.data).find(r => 0 === t.indexOf(r + ":"));

          if (void 0 !== n) {
            var _r2 = vn.data[n];
            if (1 === _r2.length && !0 !== e) return t;
            var _u = _r2[_r2.length - 1].uri;
            return t.replace(n + ":", _u);
          }

          var u = 0 === vn.base.length ? r.baseIRI : vn.base[vn.base.length - 1];
          return !u || t.match(/^(http:|https:|urn:|file:)/) ? t : 0 === t.indexOf("//") && u ? u.split("//")[0] + t : new URL(t, u).toString();
        },
        increment: function increment(t) {
          var r = vn.data[t];
          void 0 !== r && r[r.length - 1].count++;
        },
        decrement: function decrement(t) {
          var r = vn.data[t];
          void 0 !== r && r[r.length - 1].count--;
        },
        toJSON: function toJSON() {
          var t = {};
          return vn.base.length > 0 && (void 0 === t["@context"] && (t["@context"] = {}), t["@context"]["@base"] = vn.base[0]), Object.keys(vn.data).forEach(r => {
            var e = vn.data[r][0];
            "http://www.w3.org/2001/XMLSchema#" === e.uri && e.count < 1 || (void 0 === t["@context"] && (t["@context"] = {}), t["@context"][r] = e.uri);
          }), t;
        }
      };

      function wn(t, r) {
        if (void 0 === t["@list"]) return t;
        if (!r && !t["@list"].find(t => void 0 !== t["@list"])) return t;
        if (0 === t["@list"].length) return {
          "@id": "http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"
        };
        var e = {},
            n = null;
        return t["@list"].forEach(t => {
          null === n ? n = e : (n["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"] = {}, n = n["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]), n["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"] = wn(t, !0), n["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"] = {
            "@id": "http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"
          };
        }), e;
      }

      if ((e = s()) !== n && Re === t.length) return e;
      throw e !== n && Re < t.length && Ne({
        type: "end"
      }), Te(ze, Pe < t.length ? t.charAt(Pe) : null, Pe < t.length ? Je(Pe, Pe + 1) : Je(Pe, Pe));
    }

    peg$subclass(peg$SyntaxError, Error), peg$SyntaxError.buildMessage = function (t, r) {
      var e = {
        literal: function literal(t) {
          return '"' + u(t.text) + '"';
        },
        class: function _class(t) {
          var r,
              e = "";

          for (r = 0; r < t.parts.length; r++) {
            e += t.parts[r] instanceof Array ? s(t.parts[r][0]) + "-" + s(t.parts[r][1]) : s(t.parts[r]);
          }

          return "[" + (t.inverted ? "^" : "") + e + "]";
        },
        any: function any(t) {
          return "any character";
        },
        end: function end(t) {
          return "end of input";
        },
        other: function other(t) {
          return t.description;
        }
      };

      function n(t) {
        return t.charCodeAt(0).toString(16).toUpperCase();
      }

      function u(t) {
        return t.replace(/\\/g, "\\\\").replace(/"/g, '\\"').replace(/\0/g, "\\0").replace(/\t/g, "\\t").replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/[\x00-\x0F]/g, function (t) {
          return "\\x0" + n(t);
        }).replace(/[\x10-\x1F\x7F-\x9F]/g, function (t) {
          return "\\x" + n(t);
        });
      }

      function s(t) {
        return t.replace(/\\/g, "\\\\").replace(/\]/g, "\\]").replace(/\^/g, "\\^").replace(/-/g, "\\-").replace(/\0/g, "\\0").replace(/\t/g, "\\t").replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/[\x00-\x0F]/g, function (t) {
          return "\\x0" + n(t);
        }).replace(/[\x10-\x1F\x7F-\x9F]/g, function (t) {
          return "\\x" + n(t);
        });
      }

      return "Expected " + function (t) {
        var r,
            n,
            u,
            s = new Array(t.length);

        for (r = 0; r < t.length; r++) {
          s[r] = (u = t[r], e[u.type](u));
        }

        if (s.sort(), s.length > 0) {
          for (r = 1, n = 1; r < s.length; r++) {
            s[r - 1] !== s[r] && (s[n] = s[r], n++);
          }

          s.length = n;
        }

        switch (s.length) {
          case 1:
            return s[0];

          case 2:
            return s[0] + " or " + s[1];

          default:
            return s.slice(0, -1).join(", ") + ", or " + s[s.length - 1];
        }
      }(t) + " but " + function (t) {
        return t ? '"' + u(t) + '"' : "end of input";
      }(r) + " found.";
    };
    var ttl2jsonld = peg$parse;

    var lastPart = text => {
      return text.split(/\:|\/|\,|\#/).pop();
    };

    var expand = (binding, context) => {
      var bindingSplit = binding.split(':');

      if (context[bindingSplit[0]]) {
        binding = context[bindingSplit[0]] + bindingSplit[1];
      }

      return binding;
    };

    var JsonLdProxy = function JsonLdProxy(data, context, extraCommands, defaultAlias) {
      if (extraCommands === void 0) {
        extraCommands = {};
      }

      if (defaultAlias === void 0) {
        defaultAlias = null;
      }

      if (typeof data !== 'object') return data;

      var convertProp = prop => {
        if (prop.toString().includes(':')) {
          var propSplit = prop.toString().split(':');

          if (context != null && context[propSplit[0]]) {
            prop = prop.toString().replace(propSplit[0] + ':', context[propSplit[0]]);
          }
        }

        return prop;
      };

      return new Proxy(data, {
        get(target, prop, receiver) {
          var _target$prop, _target$prop$;

          if (prop === '_proxyType') return 'JsonLdProxy';
          prop = convertProp(prop);
          if (prop === '$' && !('$' in extraCommands)) return target;
          if (prop === '_alias') return defaultAlias;

          if (prop === '_' && !('_' in extraCommands)) {
            var getFirst = thing => {
              var _ref, _thing$Id;

              return Array.isArray(thing) ? getFirst(thing[0]) : (_ref = (_thing$Id = thing == null ? void 0 : thing['@id']) != null ? _thing$Id : thing == null ? void 0 : thing['@value']) != null ? _ref : thing;
            };

            return JsonLdProxy(getFirst(target), context, extraCommands, defaultAlias);
          }

          if (prop === 'isProxy') return true;

          for (var [command, callback] of Object.entries(extraCommands)) {
            if (prop === command) return callback(target);
          }

          if (prop[0] === '*') {
            var lastPartToFind = prop.toString().substr(1);

            for (var key of Object.keys(target)) {
              if (lastPart(key) === lastPartToFind) {
                prop = key;
              }
            }
          }

          var isOurProperty = !Reflect.has({}, prop) && !Reflect.has([], prop) && Reflect.has(target, prop);

          if (defaultAlias && !prop.toString().includes(':') && !Reflect.has({}, prop) && !Reflect.has([], prop)) {
            var newProp = convertProp(defaultAlias + ':' + prop.toString());

            var _isOurProperty = !Reflect.has({}, newProp) && !Reflect.has([], newProp) && Reflect.has(target, newProp);

            if (_isOurProperty && Reflect.has(target, newProp)) {
              return JsonLdProxy(target[newProp], context, extraCommands, defaultAlias);
            }
          }

          if ((_target$prop = target[prop]) != null && (_target$prop$ = _target$prop[0]) != null && _target$prop$['@list'] && isOurProperty) {
            return JsonLdProxy(target[prop][0]['@list'], context, extraCommands, defaultAlias);
          }

          if (isOurProperty && target[prop]) {
            return JsonLdProxy(target[prop], context, extraCommands, defaultAlias);
          }

          if (['filter'].includes(prop.toString())) {
            var requestedMethod = Reflect.get(target, prop, receiver);
            return function () {
              for (var _len = arguments.length, input = new Array(_len), _key = 0; _key < _len; _key++) {
                input[_key] = arguments[_key];
              }

              return requestedMethod.apply(target.map(item => JsonLdProxy(item, context, extraCommands, defaultAlias)), input);
            };
          }

          return Reflect.get(target, prop, receiver);
        },

        set(target, prop, value) {
          prop = convertProp(prop);
          target[prop] = value;
          return true;
        }

      });
    };

    class TranslatedText extends Hole {
      constructor(type, template, values) {
        if (template === void 0) {
          template = [];
        }

        if (values === void 0) {
          values = [];
        }

        super(type, template, values);
        var text = type;
        var context = template;
        this.text = text;
        this.template = [text];
        this.values = [];
        this.context = context;
        this.type = 'html';
      }

      toString() {
        return this.text;
      }

    }

    function mixString(a, b, asCodeString) {
      if (asCodeString === void 0) {
        asCodeString = false;
      }

      var total = Math.max(a.length, b.length);
      var string = '';

      for (var part = 0; part < total; part++) {
        var valueString = '';

        if (typeof b[part] === 'object') {
          var keys = Object.keys(b[part]);
          valueString = asCodeString ? '{' + keys[0] + '}' : b[part][keys[0]];
        } else if (typeof b[part] === 'string') {
          valueString = b[part];
        }

        string += a[part] + valueString;
      }

      return string;
    }

    function I18n(_x, _x2, _x3, _x4) {
      return _I18n.apply(this, arguments);
    }

    function _I18n() {
      _I18n = _asyncToGenerator(function* (language, prefix, possibleLanguageCodes, skipImportLanguage) {
        if (prefix === void 0) {
          prefix = '';
        }

        if (skipImportLanguage === void 0) {
          skipImportLanguage = 'en';
        }

        var translations = {};
        translations[language] = {};

        if (possibleLanguageCodes.includes(language) && language !== skipImportLanguage) {
          try {
            var filePath = "/js/Translations/" + ((prefix ? prefix + '.' : '') + language) + ".js";
            translations[language] = (yield import(filePath)).Translations;
          } catch (exception) {
            console.info(exception);
          }
        }

        function Translate(context) {
          if (typeof context === 'string') {
            return function (strings) {
              for (var _len2 = arguments.length, values = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                values[_key2 - 1] = arguments[_key2];
              }

              var translatedText = Translate(strings, ...values);
              translatedText.context = context;
              return translatedText;
            };
          } else {
            var stringsToTranslate = context;

            for (var _len = arguments.length, values = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
              values[_key - 1] = arguments[_key];
            }

            var codeString = mixString(stringsToTranslate, values, true);

            if (typeof translations[language][codeString] === 'undefined') {
              return new TranslatedText(mixString(stringsToTranslate, values));
            } else {
              var translatedString = translations[language][codeString];
              var tokens = Object.assign({}, ...values);
              var replacements = translatedString.match(/{[a-zA-Z]*}/g);

              if (replacements) {
                replacements.forEach(replacement => {
                  var variableName = replacement.substr(1).substr(0, replacement.length - 2);
                  translatedString = translatedString.replace(replacement, tokens[variableName]);
                });
              }

              return new TranslatedText(translatedString);
            }
          }
        }

        Translate.constructor.prototype.direct = variable => {
          if (typeof translations[language][variable] === 'undefined') {
            return new TranslatedText(variable);
          } else {
            return new TranslatedText(translations[language][variable]);
          }
        };

        return Translate;
      });
      return _I18n.apply(this, arguments);
    }

    var languages = [["aa", "Afar"], ["ab", "Abkhazian"], ["ae", "Avestan"], ["af", "Afrikaans"], ["ak", "Akan"], ["am", "Amharic"], ["an", "Aragonese"], ["ar", "Arabic"], ["as", "Assamese"], ["av", "Avaric"], ["ay", "Aymara"], ["az", "Azerbaijani"], ["ba", "Bashkir"], ["be", "Belarusian"], ["bg", "Bulgarian"], ["bh", "Bihari languages"], ["bi", "Bislama"], ["bm", "Bambara"], ["bn", "Bengali, Bangla"], ["bo", "Tibetan"], ["br", "Breton"], ["bs", "Bosnian"], ["ca", "Catalan, Valencian"], ["ce", "Chechen"], ["ch", "Chamorro"], ["co", "Corsican"], ["cr", "Cree"], ["cs", "Czech"], ["cu", "Church Slavic, Church Slavonic, Old Bulgarian, Old Church Slavonic, Old Slavonic"], ["cv", "Chuvash"], ["cy", "Welsh"], ["da", "Danish"], ["de", "German"], ["dv", "Dhivehi, Divehi, Maldivian"], ["dz", "Dzongkha"], ["ee", "Ewe"], ["el", "Modern Greek (1453-)"], ["en", "English"], ["eo", "Esperanto"], ["es", "Spanish, Castilian"], ["et", "Estonian"], ["eu", "Basque"], ["fa", "Persian"], ["ff", "Fulah"], ["fi", "Finnish"], ["fj", "Fijian"], ["fo", "Faroese"], ["fr", "French"], ["fy", "Western Frisian"], ["ga", "Irish"], ["gd", "Scottish Gaelic, Gaelic"], ["gl", "Galician"], ["gn", "Guarani"], ["gu", "Gujarati"], ["gv", "Manx"], ["ha", "Hausa"], ["he", "Hebrew"], ["hi", "Hindi"], ["ho", "Hiri Motu"], ["hr", "Croatian"], ["ht", "Haitian, Haitian Creole"], ["hu", "Hungarian"], ["hy", "Armenian"], ["hz", "Herero"], ["ia", "Interlingua (International Auxiliary Language Association)"], ["id", "Indonesian"], ["ie", "Interlingue, Occidental"], ["ig", "Igbo"], ["ii", "Sichuan Yi, Nuosu"], ["ik", "Inupiaq"], ["in", "Indonesian"], ["io", "Ido"], ["is", "Icelandic"], ["it", "Italian"], ["iu", "Inuktitut"], ["iw", "Hebrew"], ["ja", "Japanese"], ["ji", "Yiddish"], ["jv", "Javanese"], ["jw", "Javanese"], ["ka", "Georgian"], ["kg", "Kongo"], ["ki", "Kikuyu, Gikuyu"], ["kj", "Kuanyama, Kwanyama"], ["kk", "Kazakh"], ["kl", "Kalaallisut, Greenlandic"], ["km", "Khmer, Central Khmer"], ["kn", "Kannada"], ["ko", "Korean"], ["kr", "Kanuri"], ["ks", "Kashmiri"], ["ku", "Kurdish"], ["kv", "Komi"], ["kw", "Cornish"], ["ky", "Kirghiz, Kyrgyz"], ["la", "Latin"], ["lb", "Luxembourgish, Letzeburgesch"], ["lg", "Ganda, Luganda"], ["li", "Limburgan, Limburger, Limburgish"], ["ln", "Lingala"], ["lo", "Lao"], ["lt", "Lithuanian"], ["lu", "Luba-Katanga"], ["lv", "Latvian"], ["mg", "Malagasy"], ["mh", "Marshallese"], ["mi", "Maori"], ["mk", "Macedonian"], ["ml", "Malayalam"], ["mn", "Mongolian"], ["mo", "Moldavian, Moldovan"], ["mr", "Marathi"], ["ms", "Malay (macrolanguage)"], ["mt", "Maltese"], ["my", "Burmese"], ["na", "Nauru"], ["nb", "Norwegian Bokmål"], ["nd", "North Ndebele"], ["ne", "Nepali (macrolanguage)"], ["ng", "Ndonga"], ["nl", "Dutch, Flemish"], ["nn", "Norwegian Nynorsk"], ["no", "Norwegian"], ["nr", "South Ndebele"], ["nv", "Navajo, Navaho"], ["ny", "Nyanja, Chewa, Chichewa"], ["oc", "Occitan (post 1500)"], ["oj", "Ojibwa"], ["om", "Oromo"], ["or", "Oriya (macrolanguage), Odia (macrolanguage)"], ["os", "Ossetian, Ossetic"], ["pa", "Panjabi, Punjabi"], ["pi", "Pali"], ["pl", "Polish"], ["ps", "Pushto, Pashto"], ["pt", "Portuguese"], ["qu", "Quechua"], ["rm", "Romansh"], ["rn", "Rundi"], ["ro", "Romanian, Moldavian, Moldovan"], ["ru", "Russian"], ["rw", "Kinyarwanda"], ["sa", "Sanskrit"], ["sc", "Sardinian"], ["sd", "Sindhi"], ["se", "Northern Sami"], ["sg", "Sango"], ["sh", "Serbo-Croatian"], ["si", "Sinhala, Sinhalese"], ["sk", "Slovak"], ["sl", "Slovenian"], ["sm", "Samoan"], ["sn", "Shona"], ["so", "Somali"], ["sq", "Albanian"], ["sr", "Serbian"], ["ss", "Swati"], ["st", "Southern Sotho"], ["su", "Sundanese"], ["sv", "Swedish"], ["sw", "Swahili (macrolanguage)"], ["ta", "Tamil"], ["te", "Telugu"], ["tg", "Tajik"], ["th", "Thai"], ["ti", "Tigrinya"], ["tk", "Turkmen"], ["tl", "Tagalog"], ["tn", "Tswana"], ["to", "Tonga (Tonga Islands)"], ["tr", "Turkish"], ["ts", "Tsonga"], ["tt", "Tatar"], ["tw", "Twi"], ["ty", "Tahitian"], ["ug", "Uighur, Uyghur"], ["uk", "Ukrainian"], ["ur", "Urdu"], ["uz", "Uzbek"], ["ve", "Venda"], ["vi", "Vietnamese"], ["vo", "Volapük"], ["wa", "Walloon"], ["wo", "Wolof"], ["xh", "Xhosa"], ["yi", "Yiddish"], ["yo", "Yoruba"], ["za", "Zhuang, Chuang"], ["zh", "Chinese"], ["zu", "Zulu"], ["aaa", "Ghotuo"], ["aab", "Alumu-Tesu"], ["aac", "Ari"], ["aad", "Amal"], ["aae", "Arbëreshë Albanian"], ["aaf", "Aranadan"], ["aag", "Ambrak"], ["aah", "Abu' Arapesh"], ["aai", "Arifama-Miniafia"], ["aak", "Ankave"], ["aal", "Afade"], ["aam", "Aramanik"], ["aan", "Anambé"], ["aao", "Algerian Saharan Arabic"], ["aap", "Pará Arára"], ["aaq", "Eastern Abnaki"], ["aas", "Aasáx"], ["aat", "Arvanitika Albanian"], ["aau", "Abau"], ["aav", "Austro-Asiatic languages"], ["aaw", "Solong"], ["aax", "Mandobo Atas"], ["aaz", "Amarasi"], ["aba", "Abé"], ["abb", "Bankon"], ["abc", "Ambala Ayta"], ["abd", "Manide"], ["abe", "Western Abnaki"], ["abf", "Abai Sungai"], ["abg", "Abaga"], ["abh", "Tajiki Arabic"], ["abi", "Abidji"], ["abj", "Aka-Bea"], ["abl", "Lampung Nyo"], ["abm", "Abanyom"], ["abn", "Abua"], ["abo", "Abon"], ["abp", "Abellen Ayta"], ["abq", "Abaza"], ["abr", "Abron"], ["abs", "Ambonese Malay"], ["abt", "Ambulas"], ["abu", "Abure"], ["abv", "Baharna Arabic"], ["abw", "Pal"], ["abx", "Inabaknon"], ["aby", "Aneme Wake"], ["abz", "Abui"], ["aca", "Achagua"], ["acb", "Áncá"], ["acd", "Gikyode"], ["ace", "Achinese"], ["acf", "Saint Lucian Creole French"], ["ach", "Acoli"], ["aci", "Aka-Cari"], ["ack", "Aka-Kora"], ["acl", "Akar-Bale"], ["acm", "Mesopotamian Arabic"], ["acn", "Achang"], ["acp", "Eastern Acipa"], ["acq", "Ta'izzi-Adeni Arabic"], ["acr", "Achi"], ["acs", "Acroá"], ["act", "Achterhoeks"], ["acu", "Achuar-Shiwiar"], ["acv", "Achumawi"], ["acw", "Hijazi Arabic"], ["acx", "Omani Arabic"], ["acy", "Cypriot Arabic"], ["acz", "Acheron"], ["ada", "Adangme"], ["adb", "Atauran"], ["add", "Lidzonka, Dzodinka"], ["ade", "Adele"], ["adf", "Dhofari Arabic"], ["adg", "Andegerebinha"], ["adh", "Adhola"], ["adi", "Adi"], ["adj", "Adioukrou"], ["adl", "Galo"], ["adn", "Adang"], ["ado", "Abu"], ["adp", "Adap"], ["adq", "Adangbe"], ["adr", "Adonara"], ["ads", "Adamorobe Sign Language"], ["adt", "Adnyamathanha"], ["adu", "Aduge"], ["adw", "Amundava"], ["adx", "Amdo Tibetan"], ["ady", "Adyghe, Adygei"], ["adz", "Adzera"], ["aea", "Areba"], ["aeb", "Tunisian Arabic"], ["aec", "Saidi Arabic"], ["aed", "Argentine Sign Language"], ["aee", "Northeast Pashai, Northeast Pashayi"], ["aek", "Haeke"], ["ael", "Ambele"], ["aem", "Arem"], ["aen", "Armenian Sign Language"], ["aeq", "Aer"], ["aer", "Eastern Arrernte"], ["aes", "Alsea"], ["aeu", "Akeu"], ["aew", "Ambakich"], ["aey", "Amele"], ["aez", "Aeka"], ["afa", "Afro-Asiatic languages"], ["afb", "Gulf Arabic"], ["afd", "Andai"], ["afe", "Putukwam"], ["afg", "Afghan Sign Language"], ["afh", "Afrihili"], ["afi", "Akrukay, Chini"], ["afk", "Nanubae"], ["afn", "Defaka"], ["afo", "Eloyi"], ["afp", "Tapei"], ["afs", "Afro-Seminole Creole"], ["aft", "Afitti"], ["afu", "Awutu"], ["afz", "Obokuitai"], ["aga", "Aguano"], ["agb", "Legbo"], ["agc", "Agatu"], ["agd", "Agarabi"], ["age", "Angal"], ["agf", "Arguni"], ["agg", "Angor"], ["agh", "Ngelima"], ["agi", "Agariya"], ["agj", "Argobba"], ["agk", "Isarog Agta"], ["agl", "Fembe"], ["agm", "Angaataha"], ["agn", "Agutaynen"], ["ago", "Tainae"], ["agp", "Paranan"], ["agq", "Aghem"], ["agr", "Aguaruna"], ["ags", "Esimbi"], ["agt", "Central Cagayan Agta"], ["agu", "Aguacateco"], ["agv", "Remontado Dumagat"], ["agw", "Kahua"], ["agx", "Aghul"], ["agy", "Southern Alta"], ["agz", "Mt. Iriga Agta"], ["aha", "Ahanta"], ["ahb", "Axamb"], ["ahg", "Qimant"], ["ahh", "Aghu"], ["ahi", "Tiagbamrin Aizi"], ["ahk", "Akha"], ["ahl", "Igo"], ["ahm", "Mobumrin Aizi"], ["ahn", "Àhàn"], ["aho", "Ahom"], ["ahp", "Aproumu Aizi"], ["ahr", "Ahirani"], ["ahs", "Ashe"], ["aht", "Ahtena"], ["aia", "Arosi"], ["aib", "Ainu (China)"], ["aic", "Ainbai"], ["aid", "Alngith"], ["aie", "Amara"], ["aif", "Agi"], ["aig", "Antigua and Barbuda Creole English"], ["aih", "Ai-Cham"], ["aii", "Assyrian Neo-Aramaic"], ["aij", "Lishanid Noshan"], ["aik", "Ake"], ["ail", "Aimele"], ["aim", "Aimol"], ["ain", "Ainu (Japan)"], ["aio", "Aiton"], ["aip", "Burumakok"], ["aiq", "Aimaq"], ["air", "Airoran"], ["ais", "Nataoran Amis"], ["ait", "Arikem"], ["aiw", "Aari"], ["aix", "Aighon"], ["aiy", "Ali"], ["aja", "Aja (South Sudan)"], ["ajg", "Aja (Benin)"], ["aji", "Ajië"], ["ajn", "Andajin"], ["ajp", "South Levantine Arabic"], ["ajt", "Judeo-Tunisian Arabic"], ["aju", "Judeo-Moroccan Arabic"], ["ajw", "Ajawa"], ["ajz", "Amri Karbi"], ["akb", "Batak Angkola"], ["akc", "Mpur"], ["akd", "Ukpet-Ehom"], ["ake", "Akawaio"], ["akf", "Akpa"], ["akg", "Anakalangu"], ["akh", "Angal Heneng"], ["aki", "Aiome"], ["akj", "Aka-Jeru"], ["akk", "Akkadian"], ["akl", "Aklanon"], ["akm", "Aka-Bo"], ["ako", "Akurio"], ["akp", "Siwu"], ["akq", "Ak"], ["akr", "Araki"], ["aks", "Akaselem"], ["akt", "Akolet"], ["aku", "Akum"], ["akv", "Akhvakh"], ["akw", "Akwa"], ["akx", "Aka-Kede"], ["aky", "Aka-Kol"], ["akz", "Alabama"], ["ala", "Alago"], ["alc", "Qawasqar"], ["ald", "Alladian"], ["ale", "Aleut"], ["alf", "Alege"], ["alg", "Algonquian languages"], ["alh", "Alawa"], ["ali", "Amaimon"], ["alj", "Alangan"], ["alk", "Alak"], ["all", "Allar"], ["alm", "Amblong"], ["aln", "Gheg Albanian"], ["alo", "Larike-Wakasihu"], ["alp", "Alune"], ["alq", "Algonquin"], ["alr", "Alutor"], ["als", "Tosk Albanian"], ["alt", "Southern Altai"], ["alu", "'Are'are"], ["alv", "Atlantic-Congo languages"], ["alw", "Alaba-K’abeena, Wanbasana"], ["alx", "Amol"], ["aly", "Alyawarr"], ["alz", "Alur"], ["ama", "Amanayé"], ["amb", "Ambo"], ["amc", "Amahuaca"], ["ame", "Yanesha'"], ["amf", "Hamer-Banna"], ["amg", "Amurdak"], ["ami", "Amis"], ["amj", "Amdang"], ["amk", "Ambai"], ["aml", "War-Jaintia"], ["amm", "Ama (Papua New Guinea)"], ["amn", "Amanab"], ["amo", "Amo"], ["amp", "Alamblak"], ["amq", "Amahai"], ["amr", "Amarakaeri"], ["ams", "Southern Amami-Oshima"], ["amt", "Amto"], ["amu", "Guerrero Amuzgo"], ["amv", "Ambelau"], ["amw", "Western Neo-Aramaic"], ["amx", "Anmatyerre"], ["amy", "Ami"], ["amz", "Atampaya"], ["ana", "Andaqui"], ["anb", "Andoa"], ["anc", "Ngas"], ["and", "Ansus"], ["ane", "Xârâcùù"], ["anf", "Animere"], ["ang", "Old English (ca. 450-1100)"], ["anh", "Nend"], ["ani", "Andi"], ["anj", "Anor"], ["ank", "Goemai"], ["anl", "Anu-Hkongso Chin"], ["anm", "Anal"], ["ann", "Obolo"], ["ano", "Andoque"], ["anp", "Angika"], ["anq", "Jarawa (India)"], ["anr", "Andh"], ["ans", "Anserma"], ["ant", "Antakarinya, Antikarinya"], ["anu", "Anuak"], ["anv", "Denya"], ["anw", "Anaang"], ["anx", "Andra-Hus"], ["any", "Anyin"], ["anz", "Anem"], ["aoa", "Angolar"], ["aob", "Abom"], ["aoc", "Pemon"], ["aod", "Andarum"], ["aoe", "Angal Enen"], ["aof", "Bragat"], ["aog", "Angoram"], ["aoh", "Arma"], ["aoi", "Anindilyakwa"], ["aoj", "Mufian"], ["aok", "Arhö"], ["aol", "Alor"], ["aom", "Ömie"], ["aon", "Bumbita Arapesh"], ["aor", "Aore"], ["aos", "Taikat"], ["aot", "Atong (India), A'tong"], ["aou", "A'ou"], ["aox", "Atorada"], ["aoz", "Uab Meto"], ["apa", "Apache languages"], ["apb", "Sa'a"], ["apc", "North Levantine Arabic"], ["apd", "Sudanese Arabic"], ["ape", "Bukiyip"], ["apf", "Pahanan Agta"], ["apg", "Ampanang"], ["aph", "Athpariya"], ["api", "Apiaká"], ["apj", "Jicarilla Apache"], ["apk", "Kiowa Apache"], ["apl", "Lipan Apache"], ["apm", "Mescalero-Chiricahua Apache"], ["apn", "Apinayé"], ["apo", "Ambul"], ["app", "Apma"], ["apq", "A-Pucikwar"], ["apr", "Arop-Lokep"], ["aps", "Arop-Sissano"], ["apt", "Apatani"], ["apu", "Apurinã"], ["apv", "Alapmunte"], ["apw", "Western Apache"], ["apx", "Aputai"], ["apy", "Apalaí"], ["apz", "Safeyoka"], ["aqa", "Alacalufan languages"], ["aqc", "Archi"], ["aqd", "Ampari Dogon"], ["aqg", "Arigidi"], ["aqk", "Aninka"], ["aql", "Algic languages"], ["aqm", "Atohwaim"], ["aqn", "Northern Alta"], ["aqp", "Atakapa"], ["aqr", "Arhâ"], ["aqt", "Angaité"], ["aqz", "Akuntsu"], ["arb", "Standard Arabic"], ["arc", "Official Aramaic (700-300 BCE), Imperial Aramaic (700-300 BCE)"], ["ard", "Arabana"], ["are", "Western Arrarnta"], ["arh", "Arhuaco"], ["ari", "Arikara"], ["arj", "Arapaso"], ["ark", "Arikapú"], ["arl", "Arabela"], ["arn", "Mapudungun, Mapuche"], ["aro", "Araona"], ["arp", "Arapaho"], ["arq", "Algerian Arabic"], ["arr", "Karo (Brazil)"], ["ars", "Najdi Arabic"], ["art", "Artificial languages"], ["aru", "Aruá (Amazonas State), Arawá"], ["arv", "Arbore"], ["arw", "Arawak"], ["arx", "Aruá (Rodonia State)"], ["ary", "Moroccan Arabic"], ["arz", "Egyptian Arabic"], ["asa", "Asu (Tanzania)"], ["asb", "Assiniboine"], ["asc", "Casuarina Coast Asmat"], ["asd", "Asas"], ["ase", "American Sign Language"], ["asf", "Auslan, Australian Sign Language"], ["asg", "Cishingini"], ["ash", "Abishira"], ["asi", "Buruwai"], ["asj", "Sari"], ["ask", "Ashkun"], ["asl", "Asilulu"], ["asn", "Xingú Asuriní"], ["aso", "Dano"], ["asp", "Algerian Sign Language"], ["asq", "Austrian Sign Language"], ["asr", "Asuri"], ["ass", "Ipulo"], ["ast", "Asturian, Asturleonese, Bable, Leonese"], ["asu", "Tocantins Asurini"], ["asv", "Asoa"], ["asw", "Australian Aborigines Sign Language"], ["asx", "Muratayak"], ["asy", "Yaosakor Asmat"], ["asz", "As"], ["ata", "Pele-Ata"], ["atb", "Zaiwa"], ["atc", "Atsahuaca"], ["atd", "Ata Manobo"], ["ate", "Atemble"], ["atg", "Ivbie North-Okpela-Arhe"], ["ath", "Athapascan languages"], ["ati", "Attié"], ["atj", "Atikamekw"], ["atk", "Ati"], ["atl", "Mt. Iraya Agta"], ["atm", "Ata"], ["atn", "Ashtiani"], ["ato", "Atong (Cameroon)"], ["atp", "Pudtol Atta"], ["atq", "Aralle-Tabulahan"], ["atr", "Waimiri-Atroari"], ["ats", "Gros Ventre"], ["att", "Pamplona Atta"], ["atu", "Reel"], ["atv", "Northern Altai"], ["atw", "Atsugewi"], ["atx", "Arutani"], ["aty", "Aneityum"], ["atz", "Arta"], ["aua", "Asumboa"], ["aub", "Alugu"], ["auc", "Waorani"], ["aud", "Anuta"], ["aue", "ǂKxʼauǁʼein"], ["auf", "Arauan languages"], ["aug", "Aguna"], ["auh", "Aushi"], ["aui", "Anuki"], ["auj", "Awjilah"], ["auk", "Heyo"], ["aul", "Aulua"], ["aum", "Asu (Nigeria)"], ["aun", "Molmo One"], ["auo", "Auyokawa"], ["aup", "Makayam"], ["auq", "Anus, Korur"], ["aur", "Aruek"], ["aus", "Australian languages"], ["aut", "Austral"], ["auu", "Auye"], ["auw", "Awyi"], ["aux", "Aurá"], ["auy", "Awiyaana"], ["auz", "Uzbeki Arabic"], ["avb", "Avau"], ["avd", "Alviri-Vidari"], ["avi", "Avikam"], ["avk", "Kotava"], ["avl", "Eastern Egyptian Bedawi Arabic"], ["avm", "Angkamuthi"], ["avn", "Avatime"], ["avo", "Agavotaguerra"], ["avs", "Aushiri"], ["avt", "Au"], ["avu", "Avokaya"], ["avv", "Avá-Canoeiro"], ["awa", "Awadhi"], ["awb", "Awa (Papua New Guinea)"], ["awc", "Cicipu"], ["awd", "Arawakan languages"], ["awe", "Awetí"], ["awg", "Anguthimri"], ["awh", "Awbono"], ["awi", "Aekyom"], ["awk", "Awabakal"], ["awm", "Arawum"], ["awn", "Awngi"], ["awo", "Awak"], ["awr", "Awera"], ["aws", "South Awyu"], ["awt", "Araweté"], ["awu", "Central Awyu"], ["awv", "Jair Awyu"], ["aww", "Awun"], ["awx", "Awara"], ["awy", "Edera Awyu"], ["axb", "Abipon"], ["axe", "Ayerrerenge"], ["axg", "Mato Grosso Arára"], ["axk", "Yaka (Central African Republic)"], ["axl", "Lower Southern Aranda"], ["axm", "Middle Armenian"], ["axx", "Xârâgurè"], ["aya", "Awar"], ["ayb", "Ayizo Gbe"], ["ayc", "Southern Aymara"], ["ayd", "Ayabadhu"], ["aye", "Ayere"], ["ayg", "Ginyanga"], ["ayh", "Hadrami Arabic"], ["ayi", "Leyigha"], ["ayk", "Akuku"], ["ayl", "Libyan Arabic"], ["ayn", "Sanaani Arabic"], ["ayo", "Ayoreo"], ["ayp", "North Mesopotamian Arabic"], ["ayq", "Ayi (Papua New Guinea)"], ["ayr", "Central Aymara"], ["ays", "Sorsogon Ayta"], ["ayt", "Magbukun Ayta"], ["ayu", "Ayu"], ["ayx", "Ayi (China)"], ["ayy", "Tayabas Ayta"], ["ayz", "Mai Brat"], ["aza", "Azha"], ["azb", "South Azerbaijani"], ["azc", "Uto-Aztecan languages"], ["azd", "Eastern Durango Nahuatl"], ["azg", "San Pedro Amuzgos Amuzgo"], ["azj", "North Azerbaijani"], ["azm", "Ipalapa Amuzgo"], ["azn", "Western Durango Nahuatl"], ["azo", "Awing"], ["azt", "Faire Atta"], ["azz", "Highland Puebla Nahuatl"], ["baa", "Babatana"], ["bab", "Bainouk-Gunyuño"], ["bac", "Badui"], ["bad", "Banda languages"], ["bae", "Baré"], ["baf", "Nubaca"], ["bag", "Tuki"], ["bah", "Bahamas Creole English"], ["bai", "Bamileke languages"], ["baj", "Barakai"], ["bal", "Baluchi"], ["ban", "Balinese"], ["bao", "Waimaha"], ["bap", "Bantawa"], ["bar", "Bavarian"], ["bas", "Basa (Cameroon)"], ["bat", "Baltic languages"], ["bau", "Bada (Nigeria)"], ["bav", "Vengo"], ["baw", "Bambili-Bambui"], ["bax", "Bamun"], ["bay", "Batuley"], ["baz", "Tunen"], ["bba", "Baatonum"], ["bbb", "Barai"], ["bbc", "Batak Toba"], ["bbd", "Bau"], ["bbe", "Bangba"], ["bbf", "Baibai"], ["bbg", "Barama"], ["bbh", "Bugan"], ["bbi", "Barombi"], ["bbj", "Ghomálá'"], ["bbk", "Babanki"], ["bbl", "Bats"], ["bbm", "Babango"], ["bbn", "Uneapa"], ["bbo", "Northern Bobo Madaré, Konabéré"], ["bbp", "West Central Banda"], ["bbq", "Bamali"], ["bbr", "Girawa"], ["bbs", "Bakpinka"], ["bbt", "Mburku"], ["bbu", "Kulung (Nigeria)"], ["bbv", "Karnai"], ["bbw", "Baba"], ["bbx", "Bubia"], ["bby", "Befang"], ["bbz", "Babalia Creole Arabic"], ["bca", "Central Bai"], ["bcb", "Bainouk-Samik"], ["bcc", "Southern Balochi"], ["bcd", "North Babar"], ["bce", "Bamenyam"], ["bcf", "Bamu"], ["bcg", "Baga Pokur"], ["bch", "Bariai"], ["bci", "Baoulé"], ["bcj", "Bardi"], ["bck", "Bunuba"], ["bcl", "Central Bikol"], ["bcm", "Bannoni"], ["bcn", "Bali (Nigeria)"], ["bco", "Kaluli"], ["bcp", "Bali (Democratic Republic of Congo)"], ["bcq", "Bench"], ["bcr", "Babine"], ["bcs", "Kohumono"], ["bct", "Bendi"], ["bcu", "Awad Bing"], ["bcv", "Shoo-Minda-Nye"], ["bcw", "Bana"], ["bcy", "Bacama"], ["bcz", "Bainouk-Gunyaamolo"], ["bda", "Bayot"], ["bdb", "Basap"], ["bdc", "Emberá-Baudó"], ["bdd", "Bunama"], ["bde", "Bade"], ["bdf", "Biage"], ["bdg", "Bonggi"], ["bdh", "Baka (South Sudan)"], ["bdi", "Burun"], ["bdj", "Bai (South Sudan), Bai"], ["bdk", "Budukh"], ["bdl", "Indonesian Bajau"], ["bdm", "Buduma"], ["bdn", "Baldemu"], ["bdo", "Morom"], ["bdp", "Bende"], ["bdq", "Bahnar"], ["bdr", "West Coast Bajau"], ["bds", "Burunge"], ["bdt", "Bokoto"], ["bdu", "Oroko"], ["bdv", "Bodo Parja"], ["bdw", "Baham"], ["bdx", "Budong-Budong"], ["bdy", "Bandjalang"], ["bdz", "Badeshi"], ["bea", "Beaver"], ["beb", "Bebele"], ["bec", "Iceve-Maci"], ["bed", "Bedoanas"], ["bee", "Byangsi"], ["bef", "Benabena"], ["beg", "Belait"], ["beh", "Biali"], ["bei", "Bekati'"], ["bej", "Beja, Bedawiyet"], ["bek", "Bebeli"], ["bem", "Bemba (Zambia)"], ["beo", "Beami"], ["bep", "Besoa"], ["beq", "Beembe"], ["ber", "Berber languages"], ["bes", "Besme"], ["bet", "Guiberoua Béte"], ["beu", "Blagar"], ["bev", "Daloa Bété"], ["bew", "Betawi"], ["bex", "Jur Modo"], ["bey", "Beli (Papua New Guinea)"], ["bez", "Bena (Tanzania)"], ["bfa", "Bari"], ["bfb", "Pauri Bareli"], ["bfc", "Panyi Bai, Northern Bai"], ["bfd", "Bafut"], ["bfe", "Betaf, Tena"], ["bff", "Bofi"], ["bfg", "Busang Kayan"], ["bfh", "Blafe"], ["bfi", "British Sign Language"], ["bfj", "Bafanji"], ["bfk", "Ban Khor Sign Language"], ["bfl", "Banda-Ndélé"], ["bfm", "Mmen"], ["bfn", "Bunak"], ["bfo", "Malba Birifor"], ["bfp", "Beba"], ["bfq", "Badaga"], ["bfr", "Bazigar"], ["bfs", "Southern Bai"], ["bft", "Balti"], ["bfu", "Gahri"], ["bfw", "Bondo"], ["bfx", "Bantayanon"], ["bfy", "Bagheli"], ["bfz", "Mahasu Pahari"], ["bga", "Gwamhi-Wuri"], ["bgb", "Bobongko"], ["bgc", "Haryanvi"], ["bgd", "Rathwi Bareli"], ["bge", "Bauria"], ["bgf", "Bangandu"], ["bgg", "Bugun"], ["bgi", "Giangan"], ["bgj", "Bangolan"], ["bgk", "Bit, Buxinhua"], ["bgl", "Bo (Laos)"], ["bgm", "Baga Mboteni"], ["bgn", "Western Balochi"], ["bgo", "Baga Koga"], ["bgp", "Eastern Balochi"], ["bgq", "Bagri"], ["bgr", "Bawm Chin"], ["bgs", "Tagabawa"], ["bgt", "Bughotu"], ["bgu", "Mbongno"], ["bgv", "Warkay-Bipim"], ["bgw", "Bhatri"], ["bgx", "Balkan Gagauz Turkish"], ["bgy", "Benggoi"], ["bgz", "Banggai"], ["bha", "Bharia"], ["bhb", "Bhili"], ["bhc", "Biga"], ["bhd", "Bhadrawahi"], ["bhe", "Bhaya"], ["bhf", "Odiai"], ["bhg", "Binandere"], ["bhh", "Bukharic"], ["bhi", "Bhilali"], ["bhj", "Bahing"], ["bhk", "Albay Bicolano"], ["bhl", "Bimin"], ["bhm", "Bathari"], ["bhn", "Bohtan Neo-Aramaic"], ["bho", "Bhojpuri"], ["bhp", "Bima"], ["bhq", "Tukang Besi South"], ["bhr", "Bara Malagasy"], ["bhs", "Buwal"], ["bht", "Bhattiyali"], ["bhu", "Bhunjia"], ["bhv", "Bahau"], ["bhw", "Biak"], ["bhx", "Bhalay"], ["bhy", "Bhele"], ["bhz", "Bada (Indonesia)"], ["bia", "Badimaya"], ["bib", "Bissa, Bisa"], ["bic", "Bikaru"], ["bid", "Bidiyo"], ["bie", "Bepour"], ["bif", "Biafada"], ["big", "Biangai"], ["bij", "Vaghat-Ya-Bijim-Legeri"], ["bik", "Bikol"], ["bil", "Bile"], ["bim", "Bimoba"], ["bin", "Bini, Edo"], ["bio", "Nai"], ["bip", "Bila"], ["biq", "Bipi"], ["bir", "Bisorio"], ["bit", "Berinomo"], ["biu", "Biete"], ["biv", "Southern Birifor"], ["biw", "Kol (Cameroon)"], ["bix", "Bijori"], ["biy", "Birhor"], ["biz", "Baloi"], ["bja", "Budza"], ["bjb", "Banggarla"], ["bjc", "Bariji"], ["bjd", "Bandjigali"], ["bje", "Biao-Jiao Mien"], ["bjf", "Barzani Jewish Neo-Aramaic"], ["bjg", "Bidyogo"], ["bjh", "Bahinemo"], ["bji", "Burji"], ["bjj", "Kanauji"], ["bjk", "Barok"], ["bjl", "Bulu (Papua New Guinea)"], ["bjm", "Bajelani"], ["bjn", "Banjar"], ["bjo", "Mid-Southern Banda"], ["bjp", "Fanamaket"], ["bjq", "Southern Betsimisaraka Malagasy"], ["bjr", "Binumarien"], ["bjs", "Bajan"], ["bjt", "Balanta-Ganja"], ["bju", "Busuu"], ["bjv", "Bedjond"], ["bjw", "Bakwé"], ["bjx", "Banao Itneg"], ["bjy", "Bayali"], ["bjz", "Baruga"], ["bka", "Kyak"], ["bkb", "Finallig"], ["bkc", "Baka (Cameroon)"], ["bkd", "Binukid, Talaandig"], ["bkf", "Beeke"], ["bkg", "Buraka"], ["bkh", "Bakoko"], ["bki", "Baki"], ["bkj", "Pande"], ["bkk", "Brokskat"], ["bkl", "Berik"], ["bkm", "Kom (Cameroon)"], ["bkn", "Bukitan"], ["bko", "Kwa'"], ["bkp", "Boko (Democratic Republic of Congo)"], ["bkq", "Bakairí"], ["bkr", "Bakumpai"], ["bks", "Northern Sorsoganon"], ["bkt", "Boloki"], ["bku", "Buhid"], ["bkv", "Bekwarra"], ["bkw", "Bekwel"], ["bkx", "Baikeno"], ["bky", "Bokyi"], ["bkz", "Bungku"], ["bla", "Siksika"], ["blb", "Bilua"], ["blc", "Bella Coola"], ["bld", "Bolango"], ["ble", "Balanta-Kentohe"], ["blf", "Buol"], ["blg", "Balau"], ["blh", "Kuwaa"], ["bli", "Bolia"], ["blj", "Bolongan"], ["blk", "Pa'o Karen, Pa'O"], ["bll", "Biloxi"], ["blm", "Beli (South Sudan)"], ["bln", "Southern Catanduanes Bikol"], ["blo", "Anii"], ["blp", "Blablanga"], ["blq", "Baluan-Pam"], ["blr", "Blang"], ["bls", "Balaesang"], ["blt", "Tai Dam"], ["blv", "Kibala, Bolo"], ["blw", "Balangao"], ["blx", "Mag-Indi Ayta"], ["bly", "Notre"], ["blz", "Balantak"], ["bma", "Lame"], ["bmb", "Bembe"], ["bmc", "Biem"], ["bmd", "Baga Manduri"], ["bme", "Limassa"], ["bmf", "Bom-Kim"], ["bmg", "Bamwe"], ["bmh", "Kein"], ["bmi", "Bagirmi"], ["bmj", "Bote-Majhi"], ["bmk", "Ghayavi"], ["bml", "Bomboli"], ["bmm", "Northern Betsimisaraka Malagasy"], ["bmn", "Bina (Papua New Guinea)"], ["bmo", "Bambalang"], ["bmp", "Bulgebi"], ["bmq", "Bomu"], ["bmr", "Muinane"], ["bms", "Bilma Kanuri"], ["bmt", "Biao Mon"], ["bmu", "Somba-Siawari"], ["bmv", "Bum"], ["bmw", "Bomwali"], ["bmx", "Baimak"], ["bmy", "Bemba (Democratic Republic of Congo)"], ["bmz", "Baramu"], ["bna", "Bonerate"], ["bnb", "Bookan"], ["bnc", "Bontok"], ["bnd", "Banda (Indonesia)"], ["bne", "Bintauna"], ["bnf", "Masiwang"], ["bng", "Benga"], ["bni", "Bangi"], ["bnj", "Eastern Tawbuid"], ["bnk", "Bierebo"], ["bnl", "Boon"], ["bnm", "Batanga"], ["bnn", "Bunun"], ["bno", "Bantoanon"], ["bnp", "Bola"], ["bnq", "Bantik"], ["bnr", "Butmas-Tur"], ["bns", "Bundeli"], ["bnt", "Bantu languages"], ["bnu", "Bentong"], ["bnv", "Bonerif, Beneraf, Edwas"], ["bnw", "Bisis"], ["bnx", "Bangubangu"], ["bny", "Bintulu"], ["bnz", "Beezen"], ["boa", "Bora"], ["bob", "Aweer"], ["boe", "Mundabli"], ["bof", "Bolon"], ["bog", "Bamako Sign Language"], ["boh", "Boma"], ["boi", "Barbareño"], ["boj", "Anjam"], ["bok", "Bonjo"], ["bol", "Bole"], ["bom", "Berom"], ["bon", "Bine"], ["boo", "Tiemacèwè Bozo"], ["bop", "Bonkiman"], ["boq", "Bogaya"], ["bor", "Borôro"], ["bot", "Bongo"], ["bou", "Bondei"], ["bov", "Tuwuli"], ["bow", "Rema"], ["box", "Buamu"], ["boy", "Bodo (Central African Republic)"], ["boz", "Tiéyaxo Bozo"], ["bpa", "Daakaka"], ["bpb", "Barbacoas"], ["bpd", "Banda-Banda"], ["bpe", "Bauni"], ["bpg", "Bonggo"], ["bph", "Botlikh"], ["bpi", "Bagupi"], ["bpj", "Binji"], ["bpk", "Orowe, 'Ôrôê"], ["bpl", "Broome Pearling Lugger Pidgin"], ["bpm", "Biyom"], ["bpn", "Dzao Min"], ["bpo", "Anasi"], ["bpp", "Kaure"], ["bpq", "Banda Malay"], ["bpr", "Koronadal Blaan"], ["bps", "Sarangani Blaan"], ["bpt", "Barrow Point"], ["bpu", "Bongu"], ["bpv", "Bian Marind"], ["bpw", "Bo (Papua New Guinea)"], ["bpx", "Palya Bareli"], ["bpy", "Bishnupriya"], ["bpz", "Bilba"], ["bqa", "Tchumbuli"], ["bqb", "Bagusa"], ["bqc", "Boko (Benin), Boo"], ["bqd", "Bung"], ["bqf", "Baga Kaloum"], ["bqg", "Bago-Kusuntu"], ["bqh", "Baima"], ["bqi", "Bakhtiari"], ["bqj", "Bandial"], ["bqk", "Banda-Mbrès"], ["bql", "Bilakura"], ["bqm", "Wumboko"], ["bqn", "Bulgarian Sign Language"], ["bqo", "Balo"], ["bqp", "Busa"], ["bqq", "Biritai"], ["bqr", "Burusu"], ["bqs", "Bosngun"], ["bqt", "Bamukumbit"], ["bqu", "Boguru"], ["bqv", "Koro Wachi, Begbere-Ejar"], ["bqw", "Buru (Nigeria)"], ["bqx", "Baangi"], ["bqy", "Bengkala Sign Language"], ["bqz", "Bakaka"], ["bra", "Braj"], ["brb", "Lave"], ["brc", "Berbice Creole Dutch"], ["brd", "Baraamu"], ["brf", "Bira"], ["brg", "Baure"], ["brh", "Brahui"], ["bri", "Mokpwe"], ["brj", "Bieria"], ["brk", "Birked"], ["brl", "Birwa"], ["brm", "Barambu"], ["brn", "Boruca"], ["bro", "Brokkat"], ["brp", "Barapasi"], ["brq", "Breri"], ["brr", "Birao"], ["brs", "Baras"], ["brt", "Bitare"], ["bru", "Eastern Bru"], ["brv", "Western Bru"], ["brw", "Bellari"], ["brx", "Bodo (India)"], ["bry", "Burui"], ["brz", "Bilbil"], ["bsa", "Abinomn"], ["bsb", "Brunei Bisaya"], ["bsc", "Bassari, Oniyan"], ["bse", "Wushi"], ["bsf", "Bauchi"], ["bsg", "Bashkardi"], ["bsh", "Kati"], ["bsi", "Bassossi"], ["bsj", "Bangwinji"], ["bsk", "Burushaski"], ["bsl", "Basa-Gumna"], ["bsm", "Busami"], ["bsn", "Barasana-Eduria"], ["bso", "Buso"], ["bsp", "Baga Sitemu"], ["bsq", "Bassa"], ["bsr", "Bassa-Kontagora"], ["bss", "Akoose"], ["bst", "Basketo"], ["bsu", "Bahonsuai"], ["bsv", "Baga Sobané"], ["bsw", "Baiso"], ["bsx", "Yangkam"], ["bsy", "Sabah Bisaya"], ["bta", "Bata"], ["btb", "Beti (Cameroon)"], ["btc", "Bati (Cameroon)"], ["btd", "Batak Dairi"], ["bte", "Gamo-Ningi"], ["btf", "Birgit"], ["btg", "Gagnoa Bété"], ["bth", "Biatah Bidayuh"], ["bti", "Burate"], ["btj", "Bacanese Malay"], ["btk", "Batak languages"], ["btl", "Bhatola"], ["btm", "Batak Mandailing"], ["btn", "Ratagnon"], ["bto", "Rinconada Bikol"], ["btp", "Budibud"], ["btq", "Batek"], ["btr", "Baetora"], ["bts", "Batak Simalungun"], ["btt", "Bete-Bendi"], ["btu", "Batu"], ["btv", "Bateri"], ["btw", "Butuanon"], ["btx", "Batak Karo"], ["bty", "Bobot"], ["btz", "Batak Alas-Kluet"], ["bua", "Buriat"], ["bub", "Bua"], ["buc", "Bushi"], ["bud", "Ntcham"], ["bue", "Beothuk"], ["buf", "Bushoong"], ["bug", "Buginese"], ["buh", "Younuo Bunu"], ["bui", "Bongili"], ["buj", "Basa-Gurmana"], ["buk", "Bugawac"], ["bum", "Bulu (Cameroon)"], ["bun", "Sherbro"], ["buo", "Terei"], ["bup", "Busoa"], ["buq", "Brem"], ["bus", "Bokobaru"], ["but", "Bungain"], ["buu", "Budu"], ["buv", "Bun"], ["buw", "Bubi"], ["bux", "Boghom"], ["buy", "Bullom So"], ["buz", "Bukwen"], ["bva", "Barein"], ["bvb", "Bube"], ["bvc", "Baelelea"], ["bvd", "Baeggu"], ["bve", "Berau Malay"], ["bvf", "Boor"], ["bvg", "Bonkeng"], ["bvh", "Bure"], ["bvi", "Belanda Viri"], ["bvj", "Baan"], ["bvk", "Bukat"], ["bvl", "Bolivian Sign Language"], ["bvm", "Bamunka"], ["bvn", "Buna"], ["bvo", "Bolgo"], ["bvp", "Bumang"], ["bvq", "Birri"], ["bvr", "Burarra"], ["bvt", "Bati (Indonesia)"], ["bvu", "Bukit Malay"], ["bvv", "Baniva"], ["bvw", "Boga"], ["bvx", "Dibole"], ["bvy", "Baybayanon"], ["bvz", "Bauzi"], ["bwa", "Bwatoo"], ["bwb", "Namosi-Naitasiri-Serua"], ["bwc", "Bwile"], ["bwd", "Bwaidoka"], ["bwe", "Bwe Karen"], ["bwf", "Boselewa"], ["bwg", "Barwe"], ["bwh", "Bishuo"], ["bwi", "Baniwa"], ["bwj", "Láá Láá Bwamu"], ["bwk", "Bauwaki"], ["bwl", "Bwela"], ["bwm", "Biwat"], ["bwn", "Wunai Bunu"], ["bwo", "Boro (Ethiopia), Borna (Ethiopia)"], ["bwp", "Mandobo Bawah"], ["bwq", "Southern Bobo Madaré"], ["bwr", "Bura-Pabir"], ["bws", "Bomboma"], ["bwt", "Bafaw-Balong"], ["bwu", "Buli (Ghana)"], ["bww", "Bwa"], ["bwx", "Bu-Nao Bunu"], ["bwy", "Cwi Bwamu"], ["bwz", "Bwisi"], ["bxa", "Tairaha"], ["bxb", "Belanda Bor"], ["bxc", "Molengue"], ["bxd", "Pela"], ["bxe", "Birale"], ["bxf", "Bilur, Minigir"], ["bxg", "Bangala"], ["bxh", "Buhutu"], ["bxi", "Pirlatapa"], ["bxj", "Bayungu"], ["bxk", "Bukusu, Lubukusu"], ["bxl", "Jalkunan"], ["bxm", "Mongolia Buriat"], ["bxn", "Burduna"], ["bxo", "Barikanchi"], ["bxp", "Bebil"], ["bxq", "Beele"], ["bxr", "Russia Buriat"], ["bxs", "Busam"], ["bxu", "China Buriat"], ["bxv", "Berakou"], ["bxw", "Bankagooma"], ["bxx", "Borna (Democratic Republic of Congo)"], ["bxz", "Binahari"], ["bya", "Batak"], ["byb", "Bikya"], ["byc", "Ubaghara"], ["byd", "Benyadu'"], ["bye", "Pouye"], ["byf", "Bete"], ["byg", "Baygo"], ["byh", "Bhujel"], ["byi", "Buyu"], ["byj", "Bina (Nigeria)"], ["byk", "Biao"], ["byl", "Bayono"], ["bym", "Bidjara"], ["byn", "Bilin, Blin"], ["byo", "Biyo"], ["byp", "Bumaji"], ["byq", "Basay"], ["byr", "Baruya, Yipma"], ["bys", "Burak"], ["byt", "Berti"], ["byv", "Medumba"], ["byw", "Belhariya"], ["byx", "Qaqet"], ["byy", "Buya"], ["byz", "Banaro"], ["bza", "Bandi"], ["bzb", "Andio"], ["bzc", "Southern Betsimisaraka Malagasy"], ["bzd", "Bribri"], ["bze", "Jenaama Bozo"], ["bzf", "Boikin"], ["bzg", "Babuza"], ["bzh", "Mapos Buang"], ["bzi", "Bisu"], ["bzj", "Belize Kriol English"], ["bzk", "Nicaragua Creole English"], ["bzl", "Boano (Sulawesi)"], ["bzm", "Bolondo"], ["bzn", "Boano (Maluku)"], ["bzo", "Bozaba"], ["bzp", "Kemberano"], ["bzq", "Buli (Indonesia)"], ["bzr", "Biri"], ["bzs", "Brazilian Sign Language"], ["bzt", "Brithenig"], ["bzu", "Burmeso"], ["bzv", "Naami"], ["bzw", "Basa (Nigeria)"], ["bzx", "Kɛlɛngaxo Bozo"], ["bzy", "Obanliku"], ["bzz", "Evant"], ["caa", "Chortí"], ["cab", "Garifuna"], ["cac", "Chuj"], ["cad", "Caddo"], ["cae", "Lehar, Laalaa"], ["caf", "Southern Carrier"], ["cag", "Nivaclé"], ["cah", "Cahuarano"], ["cai", "Central American Indian languages"], ["caj", "Chané"], ["cak", "Kaqchikel, Cakchiquel"], ["cal", "Carolinian"], ["cam", "Cemuhî"], ["can", "Chambri"], ["cao", "Chácobo"], ["cap", "Chipaya"], ["caq", "Car Nicobarese"], ["car", "Galibi Carib"], ["cas", "Tsimané"], ["cau", "Caucasian languages"], ["cav", "Cavineña"], ["caw", "Callawalla"], ["cax", "Chiquitano"], ["cay", "Cayuga"], ["caz", "Canichana"], ["cba", "Chibchan languages"], ["cbb", "Cabiyarí"], ["cbc", "Carapana"], ["cbd", "Carijona"], ["cbe", "Chipiajes"], ["cbg", "Chimila"], ["cbh", "Cagua"], ["cbi", "Chachi"], ["cbj", "Ede Cabe"], ["cbk", "Chavacano"], ["cbl", "Bualkhaw Chin"], ["cbn", "Nyahkur"], ["cbo", "Izora"], ["cbq", "Tsucuba, Cuba"], ["cbr", "Cashibo-Cacataibo"], ["cbs", "Cashinahua"], ["cbt", "Chayahuita"], ["cbu", "Candoshi-Shapra"], ["cbv", "Cacua"], ["cbw", "Kinabalian"], ["cby", "Carabayo"], ["cca", "Cauca"], ["ccc", "Chamicuro"], ["ccd", "Cafundo Creole"], ["cce", "Chopi"], ["ccg", "Samba Daka"], ["cch", "Atsam"], ["ccj", "Kasanga"], ["ccl", "Cutchi-Swahili"], ["ccm", "Malaccan Creole Malay"], ["ccn", "North Caucasian languages"], ["cco", "Comaltepec Chinantec"], ["ccp", "Chakma"], ["ccq", "Chaungtha"], ["ccr", "Cacaopera"], ["ccs", "South Caucasian languages"], ["cda", "Choni"], ["cdc", "Chadic languages"], ["cdd", "Caddoan languages"], ["cde", "Chenchu"], ["cdf", "Chiru"], ["cdg", "Chamari"], ["cdh", "Chambeali"], ["cdi", "Chodri"], ["cdj", "Churahi"], ["cdm", "Chepang"], ["cdn", "Chaudangsi"], ["cdo", "Min Dong Chinese"], ["cdr", "Cinda-Regi-Tiyal"], ["cds", "Chadian Sign Language"], ["cdy", "Chadong"], ["cdz", "Koda"], ["cea", "Lower Chehalis"], ["ceb", "Cebuano"], ["ceg", "Chamacoco"], ["cek", "Eastern Khumi Chin"], ["cel", "Celtic languages"], ["cen", "Cen"], ["cet", "Centúúm"], ["cey", "Ekai Chin"], ["cfa", "Dijim-Bwilim"], ["cfd", "Cara"], ["cfg", "Como Karim"], ["cfm", "Falam Chin"], ["cga", "Changriwa"], ["cgc", "Kagayanen"], ["cgg", "Chiga"], ["cgk", "Chocangacakha"], ["chb", "Chibcha"], ["chc", "Catawba"], ["chd", "Highland Oaxaca Chontal"], ["chf", "Tabasco Chontal"], ["chg", "Chagatai"], ["chh", "Chinook"], ["chj", "Ojitlán Chinantec"], ["chk", "Chuukese"], ["chl", "Cahuilla"], ["chm", "Mari (Russia)"], ["chn", "Chinook jargon"], ["cho", "Choctaw"], ["chp", "Chipewyan, Dene Suline"], ["chq", "Quiotepec Chinantec"], ["chr", "Cherokee"], ["cht", "Cholón"], ["chw", "Chuwabu"], ["chx", "Chantyal"], ["chy", "Cheyenne"], ["chz", "Ozumacín Chinantec"], ["cia", "Cia-Cia"], ["cib", "Ci Gbe"], ["cic", "Chickasaw"], ["cid", "Chimariko"], ["cie", "Cineni"], ["cih", "Chinali"], ["cik", "Chitkuli Kinnauri"], ["cim", "Cimbrian"], ["cin", "Cinta Larga"], ["cip", "Chiapanec"], ["cir", "Tiri, Haméa, Méa"], ["ciw", "Chippewa"], ["ciy", "Chaima"], ["cja", "Western Cham"], ["cje", "Chru"], ["cjh", "Upper Chehalis"], ["cji", "Chamalal"], ["cjk", "Chokwe"], ["cjm", "Eastern Cham"], ["cjn", "Chenapian"], ["cjo", "Ashéninka Pajonal"], ["cjp", "Cabécar"], ["cjr", "Chorotega"], ["cjs", "Shor"], ["cjv", "Chuave"], ["cjy", "Jinyu Chinese"], ["cka", "Khumi Awa Chin"], ["ckb", "Central Kurdish"], ["ckh", "Chak"], ["ckl", "Cibak"], ["ckm", "Chakavian"], ["ckn", "Kaang Chin"], ["cko", "Anufo"], ["ckq", "Kajakse"], ["ckr", "Kairak"], ["cks", "Tayo"], ["ckt", "Chukot"], ["cku", "Koasati"], ["ckv", "Kavalan"], ["ckx", "Caka"], ["cky", "Cakfem-Mushere"], ["ckz", "Cakchiquel-Quiché Mixed Language"], ["cla", "Ron"], ["clc", "Chilcotin"], ["cld", "Chaldean Neo-Aramaic"], ["cle", "Lealao Chinantec"], ["clh", "Chilisso"], ["cli", "Chakali"], ["clj", "Laitu Chin"], ["clk", "Idu-Mishmi"], ["cll", "Chala"], ["clm", "Clallam"], ["clo", "Lowland Oaxaca Chontal"], ["clt", "Lautu Chin"], ["clu", "Caluyanun"], ["clw", "Chulym"], ["cly", "Eastern Highland Chatino"], ["cma", "Maa"], ["cmc", "Chamic languages"], ["cme", "Cerma"], ["cmg", "Classical Mongolian"], ["cmi", "Emberá-Chamí"], ["cmk", "Chimakum"], ["cml", "Campalagian"], ["cmm", "Michigamea"], ["cmn", "Mandarin Chinese"], ["cmo", "Central Mnong"], ["cmr", "Mro-Khimi Chin"], ["cms", "Messapic"], ["cmt", "Camtho"], ["cna", "Changthang"], ["cnb", "Chinbon Chin"], ["cnc", "Côông"], ["cng", "Northern Qiang"], ["cnh", "Hakha Chin, Haka Chin"], ["cni", "Asháninka"], ["cnk", "Khumi Chin"], ["cnl", "Lalana Chinantec"], ["cno", "Con"], ["cnp", "Northern Ping Chinese, Northern Pinghua"], ["cnr", "Montenegrin"], ["cns", "Central Asmat"], ["cnt", "Tepetotutla Chinantec"], ["cnu", "Chenoua"], ["cnw", "Ngawn Chin"], ["cnx", "Middle Cornish"], ["coa", "Cocos Islands Malay"], ["cob", "Chicomuceltec"], ["coc", "Cocopa"], ["cod", "Cocama-Cocamilla"], ["coe", "Koreguaje"], ["cof", "Colorado"], ["cog", "Chong"], ["coh", "Chonyi-Dzihana-Kauma, Chichonyi-Chidzihana-Chikauma"], ["coj", "Cochimi"], ["cok", "Santa Teresa Cora"], ["col", "Columbia-Wenatchi"], ["com", "Comanche"], ["con", "Cofán"], ["coo", "Comox"], ["cop", "Coptic"], ["coq", "Coquille"], ["cot", "Caquinte"], ["cou", "Wamey"], ["cov", "Cao Miao"], ["cow", "Cowlitz"], ["cox", "Nanti"], ["coy", "Coyaima"], ["coz", "Chochotec"], ["cpa", "Palantla Chinantec"], ["cpb", "Ucayali-Yurúa Ashéninka"], ["cpc", "Ajyíninka Apurucayali"], ["cpe", "English-based creoles and pidgins"], ["cpf", "French-based creoles and pidgins"], ["cpg", "Cappadocian Greek"], ["cpi", "Chinese Pidgin English"], ["cpn", "Cherepon"], ["cpo", "Kpeego"], ["cpp", "Portuguese-based creoles and pidgins"], ["cps", "Capiznon"], ["cpu", "Pichis Ashéninka"], ["cpx", "Pu-Xian Chinese"], ["cpy", "South Ucayali Ashéninka"], ["cqd", "Chuanqiandian Cluster Miao"], ["cqu", "Chilean Quechua"], ["cra", "Chara"], ["crb", "Island Carib"], ["crc", "Lonwolwol"], ["crd", "Coeur d'Alene"], ["crf", "Caramanta"], ["crg", "Michif"], ["crh", "Crimean Tatar, Crimean Turkish"], ["cri", "Sãotomense"], ["crj", "Southern East Cree"], ["crk", "Plains Cree"], ["crl", "Northern East Cree"], ["crm", "Moose Cree"], ["crn", "El Nayar Cora"], ["cro", "Crow"], ["crp", "Creoles and pidgins"], ["crq", "Iyo'wujwa Chorote"], ["crr", "Carolina Algonquian"], ["crs", "Seselwa Creole French"], ["crt", "Iyojwa'ja Chorote"], ["crv", "Chaura"], ["crw", "Chrau"], ["crx", "Carrier"], ["cry", "Cori"], ["crz", "Cruzeño"], ["csa", "Chiltepec Chinantec"], ["csb", "Kashubian"], ["csc", "Catalan Sign Language, Lengua de señas catalana, Llengua de Signes Catalana"], ["csd", "Chiangmai Sign Language"], ["cse", "Czech Sign Language"], ["csf", "Cuba Sign Language"], ["csg", "Chilean Sign Language"], ["csh", "Asho Chin"], ["csi", "Coast Miwok"], ["csj", "Songlai Chin"], ["csk", "Jola-Kasa"], ["csl", "Chinese Sign Language"], ["csm", "Central Sierra Miwok"], ["csn", "Colombian Sign Language"], ["cso", "Sochiapam Chinantec, Sochiapan Chinantec"], ["csp", "Southern Ping Chinese, Southern Pinghua"], ["csq", "Croatia Sign Language"], ["csr", "Costa Rican Sign Language"], ["css", "Southern Ohlone"], ["cst", "Northern Ohlone"], ["csu", "Central Sudanic languages"], ["csv", "Sumtu Chin"], ["csw", "Swampy Cree"], ["csx", "Cambodian Sign Language"], ["csy", "Siyin Chin"], ["csz", "Coos"], ["cta", "Tataltepec Chatino"], ["ctc", "Chetco"], ["ctd", "Tedim Chin"], ["cte", "Tepinapa Chinantec"], ["ctg", "Chittagonian"], ["cth", "Thaiphum Chin"], ["ctl", "Tlacoatzintepec Chinantec"], ["ctm", "Chitimacha"], ["ctn", "Chhintange"], ["cto", "Emberá-Catío"], ["ctp", "Western Highland Chatino"], ["cts", "Northern Catanduanes Bikol"], ["ctt", "Wayanad Chetti"], ["ctu", "Chol"], ["cty", "Moundadan Chetty"], ["ctz", "Zacatepec Chatino"], ["cua", "Cua"], ["cub", "Cubeo"], ["cuc", "Usila Chinantec"], ["cug", "Chungmboko, Cung"], ["cuh", "Chuka, Gichuka"], ["cui", "Cuiba"], ["cuj", "Mashco Piro"], ["cuk", "San Blas Kuna"], ["cul", "Culina, Kulina"], ["cum", "Cumeral"], ["cuo", "Cumanagoto"], ["cup", "Cupeño"], ["cuq", "Cun"], ["cur", "Chhulung"], ["cus", "Cushitic languages"], ["cut", "Teutila Cuicatec"], ["cuu", "Tai Ya"], ["cuv", "Cuvok"], ["cuw", "Chukwa"], ["cux", "Tepeuxila Cuicatec"], ["cuy", "Cuitlatec"], ["cvg", "Chug"], ["cvn", "Valle Nacional Chinantec"], ["cwa", "Kabwa"], ["cwb", "Maindo"], ["cwd", "Woods Cree"], ["cwe", "Kwere"], ["cwg", "Chewong, Cheq Wong"], ["cwt", "Kuwaataay"], ["cya", "Nopala Chatino"], ["cyb", "Cayubaba"], ["cyo", "Cuyonon"], ["czh", "Huizhou Chinese"], ["czk", "Knaanic"], ["czn", "Zenzontepec Chatino"], ["czo", "Min Zhong Chinese"], ["czt", "Zotung Chin"], ["daa", "Dangaléat"], ["dac", "Dambi"], ["dad", "Marik"], ["dae", "Duupa"], ["daf", "Dan"], ["dag", "Dagbani"], ["dah", "Gwahatike"], ["dai", "Day"], ["daj", "Dar Fur Daju"], ["dak", "Dakota"], ["dal", "Dahalo"], ["dam", "Damakawa"], ["dao", "Daai Chin"], ["dap", "Nisi (India)"], ["daq", "Dandami Maria"], ["dar", "Dargwa"], ["das", "Daho-Doo"], ["dau", "Dar Sila Daju"], ["dav", "Taita, Dawida"], ["daw", "Davawenyo"], ["dax", "Dayi"], ["day", "Land Dayak languages"], ["daz", "Dao"], ["dba", "Bangime"], ["dbb", "Deno"], ["dbd", "Dadiya"], ["dbe", "Dabe"], ["dbf", "Edopi"], ["dbg", "Dogul Dom Dogon"], ["dbi", "Doka"], ["dbj", "Ida'an"], ["dbl", "Dyirbal"], ["dbm", "Duguri"], ["dbn", "Duriankere"], ["dbo", "Dulbu"], ["dbp", "Duwai"], ["dbq", "Daba"], ["dbr", "Dabarre"], ["dbt", "Ben Tey Dogon"], ["dbu", "Bondum Dom Dogon"], ["dbv", "Dungu"], ["dbw", "Bankan Tey Dogon"], ["dby", "Dibiyaso"], ["dcc", "Deccan"], ["dcr", "Negerhollands"], ["dda", "Dadi Dadi"], ["ddd", "Dongotono"], ["dde", "Doondo"], ["ddg", "Fataluku"], ["ddi", "West Goodenough"], ["ddj", "Jaru"], ["ddn", "Dendi (Benin)"], ["ddo", "Dido"], ["ddr", "Dhudhuroa"], ["dds", "Donno So Dogon"], ["ddw", "Dawera-Daweloor"], ["dec", "Dagik"], ["ded", "Dedua"], ["dee", "Dewoin"], ["def", "Dezfuli"], ["deg", "Degema"], ["deh", "Dehwari"], ["dei", "Demisa"], ["dek", "Dek"], ["del", "Delaware"], ["dem", "Dem"], ["den", "Slave (Athapascan)"], ["dep", "Pidgin Delaware"], ["deq", "Dendi (Central African Republic)"], ["der", "Deori"], ["des", "Desano"], ["dev", "Domung"], ["dez", "Dengese"], ["dga", "Southern Dagaare"], ["dgb", "Bunoge Dogon"], ["dgc", "Casiguran Dumagat Agta"], ["dgd", "Dagaari Dioula"], ["dge", "Degenan"], ["dgg", "Doga"], ["dgh", "Dghwede"], ["dgi", "Northern Dagara"], ["dgk", "Dagba"], ["dgl", "Andaandi, Dongolawi"], ["dgn", "Dagoman"], ["dgo", "Dogri (individual language)"], ["dgr", "Dogrib, Tłı̨chǫ"], ["dgs", "Dogoso"], ["dgt", "Ndra'ngith"], ["dgu", "Degaru"], ["dgw", "Daungwurrung"], ["dgx", "Doghoro"], ["dgz", "Daga"], ["dha", "Dhanwar (India)"], ["dhd", "Dhundari"], ["dhg", "Dhangu-Djangu, Dhangu, Djangu"], ["dhi", "Dhimal"], ["dhl", "Dhalandji"], ["dhm", "Zemba"], ["dhn", "Dhanki"], ["dho", "Dhodia"], ["dhr", "Dhargari"], ["dhs", "Dhaiso"], ["dhu", "Dhurga"], ["dhv", "Dehu, Drehu"], ["dhw", "Dhanwar (Nepal)"], ["dhx", "Dhungaloo"], ["dia", "Dia"], ["dib", "South Central Dinka"], ["dic", "Lakota Dida"], ["did", "Didinga"], ["dif", "Dieri, Diyari"], ["dig", "Digo, Chidigo"], ["dih", "Kumiai"], ["dii", "Dimbong"], ["dij", "Dai"], ["dik", "Southwestern Dinka"], ["dil", "Dilling"], ["dim", "Dime"], ["din", "Dinka"], ["dio", "Dibo"], ["dip", "Northeastern Dinka"], ["diq", "Dimli (individual language)"], ["dir", "Dirim"], ["dis", "Dimasa"], ["dit", "Dirari"], ["diu", "Diriku"], ["diw", "Northwestern Dinka"], ["dix", "Dixon Reef"], ["diy", "Diuwe"], ["diz", "Ding"], ["dja", "Djadjawurrung"], ["djb", "Djinba"], ["djc", "Dar Daju Daju"], ["djd", "Djamindjung, Ngaliwurru"], ["dje", "Zarma"], ["djf", "Djangun"], ["dji", "Djinang"], ["djj", "Djeebbana"], ["djk", "Eastern Maroon Creole, Businenge Tongo, Nenge"], ["djl", "Djiwarli"], ["djm", "Jamsay Dogon"], ["djn", "Jawoyn, Djauan"], ["djo", "Jangkang"], ["djr", "Djambarrpuyngu"], ["dju", "Kapriman"], ["djw", "Djawi"], ["dka", "Dakpakha"], ["dkg", "Kadung"], ["dkk", "Dakka"], ["dkl", "Kolum So Dogon"], ["dkr", "Kuijau"], ["dks", "Southeastern Dinka"], ["dkx", "Mazagway"], ["dlg", "Dolgan"], ["dlk", "Dahalik"], ["dlm", "Dalmatian"], ["dln", "Darlong"], ["dma", "Duma"], ["dmb", "Mombo Dogon"], ["dmc", "Gavak"], ["dmd", "Madhi Madhi"], ["dme", "Dugwor"], ["dmf", "Medefaidrin"], ["dmg", "Upper Kinabatangan"], ["dmk", "Domaaki"], ["dml", "Dameli"], ["dmm", "Dama"], ["dmn", "Mande languages"], ["dmo", "Kemedzung"], ["dmr", "East Damar"], ["dms", "Dampelas"], ["dmu", "Dubu, Tebi"], ["dmv", "Dumpas"], ["dmw", "Mudburra"], ["dmx", "Dema"], ["dmy", "Demta, Sowari"], ["dna", "Upper Grand Valley Dani"], ["dnd", "Daonda"], ["dne", "Ndendeule"], ["dng", "Dungan"], ["dni", "Lower Grand Valley Dani"], ["dnj", "Dan"], ["dnk", "Dengka"], ["dnn", "Dzùùngoo"], ["dno", "Ndrulo, Northern Lendu"], ["dnr", "Danaru"], ["dnt", "Mid Grand Valley Dani"], ["dnu", "Danau"], ["dnv", "Danu"], ["dnw", "Western Dani"], ["dny", "Dení"], ["doa", "Dom"], ["dob", "Dobu"], ["doc", "Northern Dong"], ["doe", "Doe"], ["dof", "Domu"], ["doh", "Dong"], ["doi", "Dogri (macrolanguage)"], ["dok", "Dondo"], ["dol", "Doso"], ["don", "Toura (Papua New Guinea)"], ["doo", "Dongo"], ["dop", "Lukpa"], ["doq", "Dominican Sign Language"], ["dor", "Dori'o"], ["dos", "Dogosé"], ["dot", "Dass"], ["dov", "Dombe"], ["dow", "Doyayo"], ["dox", "Bussa"], ["doy", "Dompo"], ["doz", "Dorze"], ["dpp", "Papar"], ["dra", "Dravidian languages"], ["drb", "Dair"], ["drc", "Minderico"], ["drd", "Darmiya"], ["dre", "Dolpo"], ["drg", "Rungus"], ["drh", "Darkhat"], ["dri", "C'Lela"], ["drl", "Paakantyi"], ["drn", "West Damar"], ["dro", "Daro-Matu Melanau"], ["drq", "Dura"], ["drr", "Dororo"], ["drs", "Gedeo"], ["drt", "Drents"], ["dru", "Rukai"], ["drw", "Darwazi"], ["dry", "Darai"], ["dsb", "Lower Sorbian"], ["dse", "Dutch Sign Language"], ["dsh", "Daasanach"], ["dsi", "Disa"], ["dsl", "Danish Sign Language"], ["dsn", "Dusner"], ["dso", "Desiya"], ["dsq", "Tadaksahak"], ["dta", "Daur"], ["dtb", "Labuk-Kinabatangan Kadazan"], ["dtd", "Ditidaht"], ["dth", "Adithinngithigh"], ["dti", "Ana Tinga Dogon"], ["dtk", "Tene Kan Dogon"], ["dtm", "Tomo Kan Dogon"], ["dtn", "Daatsʼíin"], ["dto", "Tommo So Dogon"], ["dtp", "Kadazan Dusun, Central Dusun"], ["dtr", "Lotud"], ["dts", "Toro So Dogon"], ["dtt", "Toro Tegu Dogon"], ["dtu", "Tebul Ure Dogon"], ["dty", "Dotyali"], ["dua", "Duala"], ["dub", "Dubli"], ["duc", "Duna"], ["dud", "Hun-Saare"], ["due", "Umiray Dumaget Agta"], ["duf", "Dumbea, Drubea"], ["dug", "Duruma, Chiduruma"], ["duh", "Dungra Bhil"], ["dui", "Dumun"], ["duj", "Dhuwal"], ["duk", "Uyajitaya"], ["dul", "Alabat Island Agta"], ["dum", "Middle Dutch (ca. 1050-1350)"], ["dun", "Dusun Deyah"], ["duo", "Dupaninan Agta"], ["dup", "Duano"], ["duq", "Dusun Malang"], ["dur", "Dii"], ["dus", "Dumi"], ["duu", "Drung"], ["duv", "Duvle"], ["duw", "Dusun Witu"], ["dux", "Duungooma"], ["duy", "Dicamay Agta"], ["duz", "Duli-Gey"], ["dva", "Duau"], ["dwa", "Diri"], ["dwk", "Dawik Kui"], ["dwl", "Walo Kumbe Dogon"], ["dwr", "Dawro"], ["dws", "Dutton World Speedwords"], ["dwu", "Dhuwal"], ["dww", "Dawawa"], ["dwy", "Dhuwaya"], ["dwz", "Dewas Rai"], ["dya", "Dyan"], ["dyb", "Dyaberdyaber"], ["dyd", "Dyugun"], ["dyg", "Villa Viciosa Agta"], ["dyi", "Djimini Senoufo"], ["dym", "Yanda Dom Dogon"], ["dyn", "Dyangadi, Dhanggatti"], ["dyo", "Jola-Fonyi"], ["dyu", "Dyula"], ["dyy", "Djabugay, Dyaabugay"], ["dza", "Tunzu"], ["dzd", "Daza"], ["dze", "Djiwarli"], ["dzg", "Dazaga"], ["dzl", "Dzalakha"], ["dzn", "Dzando"], ["eaa", "Karenggapa"], ["ebc", "Beginci"], ["ebg", "Ebughu"], ["ebk", "Eastern Bontok"], ["ebo", "Teke-Ebo"], ["ebr", "Ebrié"], ["ebu", "Embu, Kiembu"], ["ecr", "Eteocretan"], ["ecs", "Ecuadorian Sign Language"], ["ecy", "Eteocypriot"], ["eee", "E"], ["efa", "Efai"], ["efe", "Efe"], ["efi", "Efik"], ["ega", "Ega"], ["egl", "Emilian"], ["ego", "Eggon"], ["egx", "Egyptian languages"], ["egy", "Egyptian (Ancient)"], ["ehs", "Miyakubo Sign Language"], ["ehu", "Ehueun"], ["eip", "Eipomek"], ["eit", "Eitiep"], ["eiv", "Askopan"], ["eja", "Ejamat"], ["eka", "Ekajuk"], ["ekc", "Eastern Karnic"], ["eke", "Ekit"], ["ekg", "Ekari"], ["eki", "Eki"], ["ekk", "Standard Estonian"], ["ekl", "Kol (Bangladesh), Kol"], ["ekm", "Elip"], ["eko", "Koti"], ["ekp", "Ekpeye"], ["ekr", "Yace"], ["eky", "Eastern Kayah"], ["ele", "Elepi"], ["elh", "El Hugeirat"], ["eli", "Nding"], ["elk", "Elkei"], ["elm", "Eleme"], ["elo", "El Molo"], ["elp", "Elpaputih"], ["elu", "Elu"], ["elx", "Elamite"], ["ema", "Emai-Iuleha-Ora"], ["emb", "Embaloh"], ["eme", "Emerillon"], ["emg", "Eastern Meohang"], ["emi", "Mussau-Emira"], ["emk", "Eastern Maninkakan"], ["emm", "Mamulique"], ["emn", "Eman"], ["emo", "Emok"], ["emp", "Northern Emberá"], ["emq", "Eastern Minyag"], ["ems", "Pacific Gulf Yupik"], ["emu", "Eastern Muria"], ["emw", "Emplawas"], ["emx", "Erromintxela"], ["emy", "Epigraphic Mayan"], ["emz", "Mbessa"], ["ena", "Apali"], ["enb", "Markweeta"], ["enc", "En"], ["end", "Ende"], ["enf", "Forest Enets"], ["enh", "Tundra Enets"], ["enl", "Enlhet"], ["enm", "Middle English (1100-1500)"], ["enn", "Engenni"], ["eno", "Enggano"], ["enq", "Enga"], ["enr", "Emumu, Emem"], ["enu", "Enu"], ["env", "Enwan (Edu State)"], ["enw", "Enwan (Akwa Ibom State)"], ["enx", "Enxet"], ["eot", "Beti (Côte d'Ivoire)"], ["epi", "Epie"], ["era", "Eravallan"], ["erg", "Sie"], ["erh", "Eruwa"], ["eri", "Ogea"], ["erk", "South Efate"], ["ero", "Horpa"], ["err", "Erre"], ["ers", "Ersu"], ["ert", "Eritai"], ["erw", "Erokwanas"], ["ese", "Ese Ejja"], ["esg", "Aheri Gondi"], ["esh", "Eshtehardi"], ["esi", "North Alaskan Inupiatun"], ["esk", "Northwest Alaska Inupiatun"], ["esl", "Egypt Sign Language"], ["esm", "Esuma"], ["esn", "Salvadoran Sign Language"], ["eso", "Estonian Sign Language"], ["esq", "Esselen"], ["ess", "Central Siberian Yupik"], ["esu", "Central Yupik"], ["esx", "Eskimo-Aleut languages"], ["esy", "Eskayan"], ["etb", "Etebi"], ["etc", "Etchemin"], ["eth", "Ethiopian Sign Language"], ["etn", "Eton (Vanuatu)"], ["eto", "Eton (Cameroon)"], ["etr", "Edolo"], ["ets", "Yekhee"], ["ett", "Etruscan"], ["etu", "Ejagham"], ["etx", "Eten"], ["etz", "Semimi"], ["euq", "Basque (family)"], ["eve", "Even"], ["evh", "Uvbie"], ["evn", "Evenki"], ["ewo", "Ewondo"], ["ext", "Extremaduran"], ["eya", "Eyak"], ["eyo", "Keiyo"], ["eza", "Ezaa"], ["eze", "Uzekwe"], ["faa", "Fasu"], ["fab", "Fa d'Ambu"], ["fad", "Wagi"], ["faf", "Fagani"], ["fag", "Finongan"], ["fah", "Baissa Fali"], ["fai", "Faiwol"], ["faj", "Faita"], ["fak", "Fang (Cameroon)"], ["fal", "South Fali"], ["fam", "Fam"], ["fan", "Fang (Equatorial Guinea)"], ["fap", "Paloor"], ["far", "Fataleka"], ["fat", "Fanti"], ["fau", "Fayu"], ["fax", "Fala"], ["fay", "Southwestern Fars"], ["faz", "Northwestern Fars"], ["fbl", "West Albay Bikol"], ["fcs", "Quebec Sign Language"], ["fer", "Feroge"], ["ffi", "Foia Foia"], ["ffm", "Maasina Fulfulde"], ["fgr", "Fongoro"], ["fia", "Nobiin"], ["fie", "Fyer"], ["fif", "Faifi"], ["fil", "Filipino, Pilipino"], ["fip", "Fipa"], ["fir", "Firan"], ["fit", "Tornedalen Finnish"], ["fiu", "Finno-Ugrian languages"], ["fiw", "Fiwaga"], ["fkk", "Kirya-Konzəl"], ["fkv", "Kven Finnish"], ["fla", "Kalispel-Pend d'Oreille"], ["flh", "Foau"], ["fli", "Fali"], ["fll", "North Fali"], ["fln", "Flinders Island"], ["flr", "Fuliiru"], ["fly", "Flaaitaal, Tsotsitaal"], ["fmp", "Fe'fe'"], ["fmu", "Far Western Muria"], ["fnb", "Fanbak"], ["fng", "Fanagalo"], ["fni", "Fania"], ["fod", "Foodo"], ["foi", "Foi"], ["fom", "Foma"], ["fon", "Fon"], ["for", "Fore"], ["fos", "Siraya"], ["fox", "Formosan languages"], ["fpe", "Fernando Po Creole English"], ["fqs", "Fas"], ["frc", "Cajun French"], ["frd", "Fordata"], ["frk", "Frankish"], ["frm", "Middle French (ca. 1400-1600)"], ["fro", "Old French (842-ca. 1400)"], ["frp", "Arpitan, Francoprovençal"], ["frq", "Forak"], ["frr", "Northern Frisian"], ["frs", "Eastern Frisian"], ["frt", "Fortsenal"], ["fse", "Finnish Sign Language"], ["fsl", "French Sign Language"], ["fss", "Finland-Swedish Sign Language, finlandssvenskt teckenspråk, suomenruotsalainen viittomakieli"], ["fub", "Adamawa Fulfulde"], ["fuc", "Pulaar"], ["fud", "East Futuna"], ["fue", "Borgu Fulfulde"], ["fuf", "Pular"], ["fuh", "Western Niger Fulfulde"], ["fui", "Bagirmi Fulfulde"], ["fuj", "Ko"], ["fum", "Fum"], ["fun", "Fulniô"], ["fuq", "Central-Eastern Niger Fulfulde"], ["fur", "Friulian"], ["fut", "Futuna-Aniwa"], ["fuu", "Furu"], ["fuv", "Nigerian Fulfulde"], ["fuy", "Fuyug"], ["fvr", "Fur"], ["fwa", "Fwâi"], ["fwe", "Fwe"], ["gaa", "Ga"], ["gab", "Gabri"], ["gac", "Mixed Great Andamanese"], ["gad", "Gaddang"], ["gae", "Guarequena"], ["gaf", "Gende"], ["gag", "Gagauz"], ["gah", "Alekano"], ["gai", "Borei"], ["gaj", "Gadsup"], ["gak", "Gamkonora"], ["gal", "Galolen"], ["gam", "Kandawo"], ["gan", "Gan Chinese"], ["gao", "Gants"], ["gap", "Gal"], ["gaq", "Gata'"], ["gar", "Galeya"], ["gas", "Adiwasi Garasia"], ["gat", "Kenati"], ["gau", "Mudhili Gadaba"], ["gav", "Gabutamon"], ["gaw", "Nobonob"], ["gax", "Borana-Arsi-Guji Oromo"], ["gay", "Gayo"], ["gaz", "West Central Oromo"], ["gba", "Gbaya (Central African Republic)"], ["gbb", "Kaytetye"], ["gbc", "Garawa"], ["gbd", "Karajarri"], ["gbe", "Niksek"], ["gbf", "Gaikundi"], ["gbg", "Gbanziri"], ["gbh", "Defi Gbe"], ["gbi", "Galela"], ["gbj", "Bodo Gadaba"], ["gbk", "Gaddi"], ["gbl", "Gamit"], ["gbm", "Garhwali"], ["gbn", "Mo'da"], ["gbo", "Northern Grebo"], ["gbp", "Gbaya-Bossangoa"], ["gbq", "Gbaya-Bozoum"], ["gbr", "Gbagyi"], ["gbs", "Gbesi Gbe"], ["gbu", "Gagadu"], ["gbv", "Gbanu"], ["gbw", "Gabi-Gabi"], ["gbx", "Eastern Xwla Gbe"], ["gby", "Gbari"], ["gbz", "Zoroastrian Dari"], ["gcc", "Mali"], ["gcd", "Ganggalida"], ["gce", "Galice"], ["gcf", "Guadeloupean Creole French"], ["gcl", "Grenadian Creole English"], ["gcn", "Gaina"], ["gcr", "Guianese Creole French"], ["gct", "Colonia Tovar German"], ["gda", "Gade Lohar"], ["gdb", "Pottangi Ollar Gadaba"], ["gdc", "Gugu Badhun"], ["gdd", "Gedaged"], ["gde", "Gude"], ["gdf", "Guduf-Gava"], ["gdg", "Ga'dang"], ["gdh", "Gadjerawang, Gajirrabeng"], ["gdi", "Gundi"], ["gdj", "Gurdjar"], ["gdk", "Gadang"], ["gdl", "Dirasha"], ["gdm", "Laal"], ["gdn", "Umanakaina"], ["gdo", "Ghodoberi"], ["gdq", "Mehri"], ["gdr", "Wipi"], ["gds", "Ghandruk Sign Language"], ["gdt", "Kungardutyi"], ["gdu", "Gudu"], ["gdx", "Godwari"], ["gea", "Geruma"], ["geb", "Kire"], ["gec", "Gboloo Grebo"], ["ged", "Gade"], ["gef", "Gerai"], ["geg", "Gengle"], ["geh", "Hutterite German, Hutterisch"], ["gei", "Gebe"], ["gej", "Gen"], ["gek", "Ywom"], ["gel", "ut-Ma'in"], ["gem", "Germanic languages"], ["geq", "Geme"], ["ges", "Geser-Gorom"], ["gev", "Eviya"], ["gew", "Gera"], ["gex", "Garre"], ["gey", "Enya"], ["gez", "Geez"], ["gfk", "Patpatar"], ["gft", "Gafat"], ["gfx", "Mangetti Dune ǃXung"], ["gga", "Gao"], ["ggb", "Gbii"], ["ggd", "Gugadj"], ["gge", "Gurr-goni"], ["ggg", "Gurgula"], ["ggk", "Kungarakany"], ["ggl", "Ganglau"], ["ggn", "Eastern Gurung"], ["ggo", "Southern Gondi"], ["ggr", "Aghu Tharnggalu"], ["ggt", "Gitua"], ["ggu", "Gagu, Gban"], ["ggw", "Gogodala"], ["gha", "Ghadamès"], ["ghc", "Hiberno-Scottish Gaelic"], ["ghe", "Southern Ghale"], ["ghh", "Northern Ghale"], ["ghk", "Geko Karen"], ["ghl", "Ghulfan"], ["ghn", "Ghanongga"], ["gho", "Ghomara"], ["ghr", "Ghera"], ["ghs", "Guhu-Samane"], ["ght", "Kuke, Kutang Ghale"], ["gia", "Kija"], ["gib", "Gibanawa"], ["gic", "Gail"], ["gid", "Gidar"], ["gie", "Gaɓogbo, Guébie"], ["gig", "Goaria"], ["gih", "Githabul"], ["gii", "Girirra"], ["gil", "Gilbertese"], ["gim", "Gimi (Eastern Highlands)"], ["gin", "Hinukh"], ["gio", "Gelao"], ["gip", "Gimi (West New Britain)"], ["giq", "Green Gelao"], ["gir", "Red Gelao"], ["gis", "North Giziga"], ["git", "Gitxsan"], ["giu", "Mulao"], ["giw", "White Gelao"], ["gix", "Gilima"], ["giy", "Giyug"], ["giz", "South Giziga"], ["gji", "Geji"], ["gjk", "Kachi Koli"], ["gjm", "Gunditjmara"], ["gjn", "Gonja"], ["gjr", "Gurindji Kriol"], ["gju", "Gujari"], ["gka", "Guya"], ["gkd", "Magɨ (Madang Province)"], ["gke", "Ndai"], ["gkn", "Gokana"], ["gko", "Kok-Nar"], ["gkp", "Guinea Kpelle"], ["gku", "ǂUngkue"], ["glb", "Belning"], ["glc", "Bon Gula"], ["gld", "Nanai"], ["glh", "Northwest Pashai, Northwest Pashayi"], ["gli", "Guliguli"], ["glj", "Gula Iro"], ["glk", "Gilaki"], ["gll", "Garlali"], ["glo", "Galambu"], ["glr", "Glaro-Twabo"], ["glu", "Gula (Chad)"], ["glw", "Glavda"], ["gly", "Gule"], ["gma", "Gambera"], ["gmb", "Gula'alaa"], ["gmd", "Mághdì"], ["gme", "East Germanic languages"], ["gmg", "Magɨyi"], ["gmh", "Middle High German (ca. 1050-1500)"], ["gml", "Middle Low German"], ["gmm", "Gbaya-Mbodomo"], ["gmn", "Gimnime"], ["gmq", "North Germanic languages"], ["gmr", "Mirning, Mirniny"], ["gmu", "Gumalu"], ["gmv", "Gamo"], ["gmw", "West Germanic languages"], ["gmx", "Magoma"], ["gmy", "Mycenaean Greek"], ["gmz", "Mgbolizhia"], ["gna", "Kaansa"], ["gnb", "Gangte"], ["gnc", "Guanche"], ["gnd", "Zulgo-Gemzek"], ["gne", "Ganang"], ["gng", "Ngangam"], ["gnh", "Lere"], ["gni", "Gooniyandi"], ["gnj", "Ngen"], ["gnk", "ǁGana"], ["gnl", "Gangulu"], ["gnm", "Ginuman"], ["gnn", "Gumatj"], ["gno", "Northern Gondi"], ["gnq", "Gana"], ["gnr", "Gureng Gureng"], ["gnt", "Guntai"], ["gnu", "Gnau"], ["gnw", "Western Bolivian Guaraní"], ["gnz", "Ganzi"], ["goa", "Guro"], ["gob", "Playero"], ["goc", "Gorakor"], ["god", "Godié"], ["goe", "Gongduk"], ["gof", "Gofa"], ["gog", "Gogo"], ["goh", "Old High German (ca. 750-1050)"], ["goi", "Gobasi"], ["goj", "Gowlan"], ["gok", "Gowli"], ["gol", "Gola"], ["gom", "Goan Konkani"], ["gon", "Gondi"], ["goo", "Gone Dau"], ["gop", "Yeretuar"], ["goq", "Gorap"], ["gor", "Gorontalo"], ["gos", "Gronings"], ["got", "Gothic"], ["gou", "Gavar"], ["gow", "Gorowa"], ["gox", "Gobu"], ["goy", "Goundo"], ["goz", "Gozarkhani"], ["gpa", "Gupa-Abawa"], ["gpe", "Ghanaian Pidgin English"], ["gpn", "Taiap"], ["gqa", "Ga'anda"], ["gqi", "Guiqiong"], ["gqn", "Guana (Brazil)"], ["gqr", "Gor"], ["gqu", "Qau"], ["gra", "Rajput Garasia"], ["grb", "Grebo"], ["grc", "Ancient Greek (to 1453)"], ["grd", "Guruntum-Mbaaru"], ["grg", "Madi"], ["grh", "Gbiri-Niragu"], ["gri", "Ghari"], ["grj", "Southern Grebo"], ["grk", "Greek languages"], ["grm", "Kota Marudu Talantang"], ["gro", "Groma"], ["grq", "Gorovu"], ["grr", "Taznatit"], ["grs", "Gresi"], ["grt", "Garo"], ["gru", "Kistane"], ["grv", "Central Grebo"], ["grw", "Gweda"], ["grx", "Guriaso"], ["gry", "Barclayville Grebo"], ["grz", "Guramalum"], ["gse", "Ghanaian Sign Language"], ["gsg", "German Sign Language"], ["gsl", "Gusilay"], ["gsm", "Guatemalan Sign Language"], ["gsn", "Nema, Gusan"], ["gso", "Southwest Gbaya"], ["gsp", "Wasembo"], ["gss", "Greek Sign Language"], ["gsw", "Swiss German, Alemannic, Alsatian"], ["gta", "Guató"], ["gti", "Gbati-ri"], ["gtu", "Aghu-Tharnggala"], ["gua", "Shiki"], ["gub", "Guajajára"], ["guc", "Wayuu"], ["gud", "Yocoboué Dida"], ["gue", "Gurindji"], ["guf", "Gupapuyngu"], ["gug", "Paraguayan Guaraní"], ["guh", "Guahibo"], ["gui", "Eastern Bolivian Guaraní"], ["guk", "Gumuz"], ["gul", "Sea Island Creole English"], ["gum", "Guambiano"], ["gun", "Mbyá Guaraní"], ["guo", "Guayabero"], ["gup", "Gunwinggu"], ["guq", "Aché"], ["gur", "Farefare"], ["gus", "Guinean Sign Language"], ["gut", "Maléku Jaíka"], ["guu", "Yanomamö"], ["guv", "Gey"], ["guw", "Gun"], ["gux", "Gourmanchéma"], ["guz", "Gusii, Ekegusii"], ["gva", "Guana (Paraguay)"], ["gvc", "Guanano"], ["gve", "Duwet"], ["gvf", "Golin"], ["gvj", "Guajá"], ["gvl", "Gulay"], ["gvm", "Gurmana"], ["gvn", "Kuku-Yalanji"], ["gvo", "Gavião Do Jiparaná"], ["gvp", "Pará Gavião"], ["gvr", "Gurung"], ["gvs", "Gumawana"], ["gvy", "Guyani"], ["gwa", "Mbato"], ["gwb", "Gwa"], ["gwc", "Gawri, Kalami"], ["gwd", "Gawwada"], ["gwe", "Gweno"], ["gwf", "Gowro"], ["gwg", "Moo"], ["gwi", "Gwichʼin"], ["gwj", "ǀGwi"], ["gwm", "Awngthim"], ["gwn", "Gwandara"], ["gwr", "Gwere"], ["gwt", "Gawar-Bati"], ["gwu", "Guwamu"], ["gww", "Kwini"], ["gwx", "Gua"], ["gxx", "Wè Southern"], ["gya", "Northwest Gbaya"], ["gyb", "Garus"], ["gyd", "Kayardild"], ["gye", "Gyem"], ["gyf", "Gungabula"], ["gyg", "Gbayi"], ["gyi", "Gyele"], ["gyl", "Gayil"], ["gym", "Ngäbere"], ["gyn", "Guyanese Creole English"], ["gyo", "Gyalsumdo"], ["gyr", "Guarayu"], ["gyy", "Gunya"], ["gyz", "Geji, Gyaazi"], ["gza", "Ganza"], ["gzi", "Gazi"], ["gzn", "Gane"], ["haa", "Han"], ["hab", "Hanoi Sign Language"], ["hac", "Gurani"], ["had", "Hatam"], ["hae", "Eastern Oromo"], ["haf", "Haiphong Sign Language"], ["hag", "Hanga"], ["hah", "Hahon"], ["hai", "Haida"], ["haj", "Hajong"], ["hak", "Hakka Chinese"], ["hal", "Halang"], ["ham", "Hewa"], ["han", "Hangaza"], ["hao", "Hakö"], ["hap", "Hupla"], ["haq", "Ha"], ["har", "Harari"], ["has", "Haisla"], ["hav", "Havu"], ["haw", "Hawaiian"], ["hax", "Southern Haida"], ["hay", "Haya"], ["haz", "Hazaragi"], ["hba", "Hamba"], ["hbb", "Huba"], ["hbn", "Heiban"], ["hbo", "Ancient Hebrew"], ["hbu", "Habu"], ["hca", "Andaman Creole Hindi"], ["hch", "Huichol"], ["hdn", "Northern Haida"], ["hds", "Honduras Sign Language"], ["hdy", "Hadiyya"], ["hea", "Northern Qiandong Miao"], ["hed", "Herdé"], ["heg", "Helong"], ["heh", "Hehe"], ["hei", "Heiltsuk"], ["hem", "Hemba"], ["hgm", "Haiǁom"], ["hgw", "Haigwai"], ["hhi", "Hoia Hoia"], ["hhr", "Kerak"], ["hhy", "Hoyahoya"], ["hia", "Lamang"], ["hib", "Hibito"], ["hid", "Hidatsa"], ["hif", "Fiji Hindi"], ["hig", "Kamwe"], ["hih", "Pamosu"], ["hii", "Hinduri"], ["hij", "Hijuk"], ["hik", "Seit-Kaitetu"], ["hil", "Hiligaynon"], ["him", "Himachali languages, Western Pahari languages"], ["hio", "Tsoa"], ["hir", "Himarimã"], ["hit", "Hittite"], ["hiw", "Hiw"], ["hix", "Hixkaryána"], ["hji", "Haji"], ["hka", "Kahe"], ["hke", "Hunde"], ["hkh", "Khah, Poguli"], ["hkk", "Hunjara-Kaina Ke"], ["hkn", "Mel-Khaonh"], ["hks", "Hong Kong Sign Language, Heung Kong Sau Yue"], ["hla", "Halia"], ["hlb", "Halbi"], ["hld", "Halang Doan"], ["hle", "Hlersu"], ["hlt", "Matu Chin"], ["hlu", "Hieroglyphic Luwian"], ["hma", "Southern Mashan Hmong, Southern Mashan Miao"], ["hmb", "Humburi Senni Songhay"], ["hmc", "Central Huishui Hmong, Central Huishui Miao"], ["hmd", "Large Flowery Miao, A-hmaos, Da-Hua Miao"], ["hme", "Eastern Huishui Hmong, Eastern Huishui Miao"], ["hmf", "Hmong Don"], ["hmg", "Southwestern Guiyang Hmong"], ["hmh", "Southwestern Huishui Hmong, Southwestern Huishui Miao"], ["hmi", "Northern Huishui Hmong, Northern Huishui Miao"], ["hmj", "Ge, Gejia"], ["hmk", "Maek"], ["hml", "Luopohe Hmong, Luopohe Miao"], ["hmm", "Central Mashan Hmong, Central Mashan Miao"], ["hmn", "Hmong, Mong"], ["hmp", "Northern Mashan Hmong, Northern Mashan Miao"], ["hmq", "Eastern Qiandong Miao"], ["hmr", "Hmar"], ["hms", "Southern Qiandong Miao"], ["hmt", "Hamtai"], ["hmu", "Hamap"], ["hmv", "Hmong Dô"], ["hmw", "Western Mashan Hmong, Western Mashan Miao"], ["hmx", "Hmong-Mien languages"], ["hmy", "Southern Guiyang Hmong, Southern Guiyang Miao"], ["hmz", "Hmong Shua, Sinicized Miao"], ["hna", "Mina (Cameroon)"], ["hnd", "Southern Hindko"], ["hne", "Chhattisgarhi"], ["hng", "Hungu"], ["hnh", "ǁAni"], ["hni", "Hani"], ["hnj", "Hmong Njua, Mong Leng, Mong Njua"], ["hnn", "Hanunoo"], ["hno", "Northern Hindko"], ["hns", "Caribbean Hindustani"], ["hnu", "Hung"], ["hoa", "Hoava"], ["hob", "Mari (Madang Province)"], ["hoc", "Ho"], ["hod", "Holma"], ["hoe", "Horom"], ["hoh", "Hobyót"], ["hoi", "Holikachuk"], ["hoj", "Hadothi, Haroti"], ["hok", "Hokan languages"], ["hol", "Holu"], ["hom", "Homa"], ["hoo", "Holoholo"], ["hop", "Hopi"], ["hor", "Horo"], ["hos", "Ho Chi Minh City Sign Language"], ["hot", "Hote, Malê"], ["hov", "Hovongan"], ["how", "Honi"], ["hoy", "Holiya"], ["hoz", "Hozo"], ["hpo", "Hpon"], ["hps", "Hawai'i Sign Language (HSL), Hawai'i Pidgin Sign Language"], ["hra", "Hrangkhol"], ["hrc", "Niwer Mil"], ["hre", "Hre"], ["hrk", "Haruku"], ["hrm", "Horned Miao"], ["hro", "Haroi"], ["hrp", "Nhirrpi"], ["hrr", "Horuru"], ["hrt", "Hértevin"], ["hru", "Hruso"], ["hrw", "Warwar Feni"], ["hrx", "Hunsrik"], ["hrz", "Harzani"], ["hsb", "Upper Sorbian"], ["hsh", "Hungarian Sign Language"], ["hsl", "Hausa Sign Language"], ["hsn", "Xiang Chinese"], ["hss", "Harsusi"], ["hti", "Hoti"], ["hto", "Minica Huitoto"], ["hts", "Hadza"], ["htu", "Hitu"], ["htx", "Middle Hittite"], ["hub", "Huambisa"], ["huc", "ǂHua, ǂʼAmkhoe"], ["hud", "Huaulu"], ["hue", "San Francisco Del Mar Huave"], ["huf", "Humene"], ["hug", "Huachipaeri"], ["huh", "Huilliche"], ["hui", "Huli"], ["huj", "Northern Guiyang Hmong, Northern Guiyang Miao"], ["huk", "Hulung"], ["hul", "Hula"], ["hum", "Hungana"], ["huo", "Hu"], ["hup", "Hupa"], ["huq", "Tsat"], ["hur", "Halkomelem"], ["hus", "Huastec"], ["hut", "Humla"], ["huu", "Murui Huitoto"], ["huv", "San Mateo Del Mar Huave"], ["huw", "Hukumina"], ["hux", "Nüpode Huitoto"], ["huy", "Hulaulá"], ["huz", "Hunzib"], ["hvc", "Haitian Vodoun Culture Language"], ["hve", "San Dionisio Del Mar Huave"], ["hvk", "Haveke"], ["hvn", "Sabu"], ["hvv", "Santa María Del Mar Huave"], ["hwa", "Wané"], ["hwc", "Hawai'i Creole English, Hawai'i Pidgin"], ["hwo", "Hwana"], ["hya", "Hya"], ["hyw", "Western Armenian"], ["hyx", "Armenian (family)"], ["iai", "Iaai"], ["ian", "Iatmul"], ["iap", "Iapama"], ["iar", "Purari"], ["iba", "Iban"], ["ibb", "Ibibio"], ["ibd", "Iwaidja"], ["ibe", "Akpes"], ["ibg", "Ibanag"], ["ibh", "Bih"], ["ibi", "Ibilo"], ["ibl", "Ibaloi"], ["ibm", "Agoi"], ["ibn", "Ibino"], ["ibr", "Ibuoro"], ["ibu", "Ibu"], ["iby", "Ibani"], ["ica", "Ede Ica"], ["ich", "Etkywan"], ["icl", "Icelandic Sign Language"], ["icr", "Islander Creole English"], ["ida", "Idakho-Isukha-Tiriki, Luidakho-Luisukha-Lutirichi"], ["idb", "Indo-Portuguese"], ["idc", "Idon, Ajiya"], ["idd", "Ede Idaca"], ["ide", "Idere"], ["idi", "Idi"], ["idr", "Indri"], ["ids", "Idesa"], ["idt", "Idaté"], ["idu", "Idoma"], ["ifa", "Amganad Ifugao"], ["ifb", "Batad Ifugao, Ayangan Ifugao"], ["ife", "Ifè"], ["iff", "Ifo"], ["ifk", "Tuwali Ifugao"], ["ifm", "Teke-Fuumu"], ["ifu", "Mayoyao Ifugao"], ["ify", "Keley-I Kallahan"], ["igb", "Ebira"], ["ige", "Igede"], ["igg", "Igana"], ["igl", "Igala"], ["igm", "Kanggape"], ["ign", "Ignaciano"], ["igo", "Isebe"], ["igs", "Interglossa"], ["igw", "Igwe"], ["ihb", "Iha Based Pidgin"], ["ihi", "Ihievbe"], ["ihp", "Iha"], ["ihw", "Bidhawal"], ["iin", "Thiin"], ["iir", "Indo-Iranian languages"], ["ijc", "Izon"], ["ije", "Biseni"], ["ijj", "Ede Ije"], ["ijn", "Kalabari"], ["ijo", "Ijo languages"], ["ijs", "Southeast Ijo"], ["ike", "Eastern Canadian Inuktitut"], ["iki", "Iko"], ["ikk", "Ika"], ["ikl", "Ikulu"], ["iko", "Olulumo-Ikom"], ["ikp", "Ikpeshi"], ["ikr", "Ikaranggal"], ["iks", "Inuit Sign Language"], ["ikt", "Inuinnaqtun, Western Canadian Inuktitut"], ["ikv", "Iku-Gora-Ankwa"], ["ikw", "Ikwere"], ["ikx", "Ik"], ["ikz", "Ikizu"], ["ila", "Ile Ape"], ["ilb", "Ila"], ["ilg", "Garig-Ilgar"], ["ili", "Ili Turki"], ["ilk", "Ilongot"], ["ill", "Iranun"], ["ilm", "Iranun (Malaysia)"], ["ilo", "Iloko"], ["ilp", "Iranun (Philippines)"], ["ils", "International Sign"], ["ilu", "Ili'uun"], ["ilv", "Ilue"], ["ilw", "Talur"], ["ima", "Mala Malasar"], ["ime", "Imeraguen"], ["imi", "Anamgura"], ["iml", "Miluk"], ["imn", "Imonda"], ["imo", "Imbongu"], ["imr", "Imroing"], ["ims", "Marsian"], ["imy", "Milyan"], ["inb", "Inga"], ["inc", "Indic languages"], ["ine", "Indo-European languages"], ["ing", "Degexit'an"], ["inh", "Ingush"], ["inj", "Jungle Inga"], ["inl", "Indonesian Sign Language"], ["inm", "Minaean"], ["inn", "Isinai"], ["ino", "Inoke-Yate"], ["inp", "Iñapari"], ["ins", "Indian Sign Language"], ["int", "Intha"], ["inz", "Ineseño"], ["ior", "Inor"], ["iou", "Tuma-Irumu"], ["iow", "Iowa-Oto"], ["ipi", "Ipili"], ["ipo", "Ipiko"], ["iqu", "Iquito"], ["iqw", "Ikwo"], ["ira", "Iranian languages"], ["ire", "Iresim"], ["irh", "Irarutu"], ["iri", "Rigwe, Irigwe"], ["irk", "Iraqw"], ["irn", "Irántxe"], ["iro", "Iroquoian languages"], ["irr", "Ir"], ["iru", "Irula"], ["irx", "Kamberau"], ["iry", "Iraya"], ["isa", "Isabi"], ["isc", "Isconahua"], ["isd", "Isnag"], ["ise", "Italian Sign Language"], ["isg", "Irish Sign Language"], ["ish", "Esan"], ["isi", "Nkem-Nkum"], ["isk", "Ishkashimi"], ["ism", "Masimasi"], ["isn", "Isanzu"], ["iso", "Isoko"], ["isr", "Israeli Sign Language"], ["ist", "Istriot"], ["isu", "Isu (Menchum Division)"], ["itb", "Binongan Itneg"], ["itc", "Italic languages"], ["itd", "Southern Tidung"], ["ite", "Itene"], ["iti", "Inlaod Itneg"], ["itk", "Judeo-Italian"], ["itl", "Itelmen"], ["itm", "Itu Mbon Uzo"], ["ito", "Itonama"], ["itr", "Iteri"], ["its", "Isekiri"], ["itt", "Maeng Itneg"], ["itv", "Itawit"], ["itw", "Ito"], ["itx", "Itik"], ["ity", "Moyadan Itneg"], ["itz", "Itzá"], ["ium", "Iu Mien"], ["ivb", "Ibatan"], ["ivv", "Ivatan"], ["iwk", "I-Wak"], ["iwm", "Iwam"], ["iwo", "Iwur"], ["iws", "Sepik Iwam"], ["ixc", "Ixcatec"], ["ixl", "Ixil"], ["iya", "Iyayu"], ["iyo", "Mesaka"], ["iyx", "Yaka (Congo)"], ["izh", "Ingrian"], ["izi", "Izi-Ezaa-Ikwo-Mgbo"], ["izr", "Izere"], ["izz", "Izii"], ["jaa", "Jamamadí"], ["jab", "Hyam"], ["jac", "Popti', Jakalteko"], ["jad", "Jahanka"], ["jae", "Yabem"], ["jaf", "Jara"], ["jah", "Jah Hut"], ["jaj", "Zazao"], ["jak", "Jakun"], ["jal", "Yalahatan"], ["jam", "Jamaican Creole English"], ["jan", "Jandai"], ["jao", "Yanyuwa"], ["jaq", "Yaqay"], ["jar", "Jarawa (Nigeria)"], ["jas", "New Caledonian Javanese"], ["jat", "Jakati"], ["jau", "Yaur"], ["jax", "Jambi Malay"], ["jay", "Yan-nhangu, Nhangu"], ["jaz", "Jawe"], ["jbe", "Judeo-Berber"], ["jbi", "Badjiri"], ["jbj", "Arandai"], ["jbk", "Barikewa"], ["jbm", "Bijim"], ["jbn", "Nafusi"], ["jbo", "Lojban"], ["jbr", "Jofotek-Bromnya"], ["jbt", "Jabutí"], ["jbu", "Jukun Takum"], ["jbw", "Yawijibaya"], ["jcs", "Jamaican Country Sign Language"], ["jct", "Krymchak"], ["jda", "Jad"], ["jdg", "Jadgali"], ["jdt", "Judeo-Tat"], ["jeb", "Jebero"], ["jee", "Jerung"], ["jeg", "Jeng"], ["jeh", "Jeh"], ["jei", "Yei"], ["jek", "Jeri Kuo"], ["jel", "Yelmek"], ["jen", "Dza"], ["jer", "Jere"], ["jet", "Manem"], ["jeu", "Jonkor Bourmataguil"], ["jgb", "Ngbee"], ["jge", "Judeo-Georgian"], ["jgk", "Gwak"], ["jgo", "Ngomba"], ["jhi", "Jehai"], ["jhs", "Jhankot Sign Language"], ["jia", "Jina"], ["jib", "Jibu"], ["jic", "Tol"], ["jid", "Bu (Kaduna State)"], ["jie", "Jilbe"], ["jig", "Jingulu, Djingili"], ["jih", "sTodsde, Shangzhai"], ["jii", "Jiiddu"], ["jil", "Jilim"], ["jim", "Jimi (Cameroon)"], ["jio", "Jiamao"], ["jiq", "Guanyinqiao, Lavrung"], ["jit", "Jita"], ["jiu", "Youle Jinuo"], ["jiv", "Shuar"], ["jiy", "Buyuan Jinuo"], ["jje", "Jejueo"], ["jjr", "Bankal"], ["jka", "Kaera"], ["jkm", "Mobwa Karen"], ["jko", "Kubo"], ["jkp", "Paku Karen"], ["jkr", "Koro (India)"], ["jks", "Amami Koniya Sign Language"], ["jku", "Labir"], ["jle", "Ngile"], ["jls", "Jamaican Sign Language"], ["jma", "Dima"], ["jmb", "Zumbun"], ["jmc", "Machame"], ["jmd", "Yamdena"], ["jmi", "Jimi (Nigeria)"], ["jml", "Jumli"], ["jmn", "Makuri Naga"], ["jmr", "Kamara"], ["jms", "Mashi (Nigeria)"], ["jmw", "Mouwase"], ["jmx", "Western Juxtlahuaca Mixtec"], ["jna", "Jangshung"], ["jnd", "Jandavra"], ["jng", "Yangman"], ["jni", "Janji"], ["jnj", "Yemsa"], ["jnl", "Rawat"], ["jns", "Jaunsari"], ["job", "Joba"], ["jod", "Wojenaka"], ["jog", "Jogi"], ["jor", "Jorá"], ["jos", "Jordanian Sign Language"], ["jow", "Jowulu"], ["jpa", "Jewish Palestinian Aramaic"], ["jpr", "Judeo-Persian"], ["jpx", "Japanese (family)"], ["jqr", "Jaqaru"], ["jra", "Jarai"], ["jrb", "Judeo-Arabic"], ["jrr", "Jiru"], ["jrt", "Jakattoe"], ["jru", "Japrería"], ["jsl", "Japanese Sign Language"], ["jua", "Júma"], ["jub", "Wannu"], ["juc", "Jurchen"], ["jud", "Worodougou"], ["juh", "Hõne"], ["jui", "Ngadjuri"], ["juk", "Wapan"], ["jul", "Jirel"], ["jum", "Jumjum"], ["jun", "Juang"], ["juo", "Jiba"], ["jup", "Hupdë"], ["jur", "Jurúna"], ["jus", "Jumla Sign Language"], ["jut", "Jutish"], ["juu", "Ju"], ["juw", "Wãpha"], ["juy", "Juray"], ["jvd", "Javindo"], ["jvn", "Caribbean Javanese"], ["jwi", "Jwira-Pepesa"], ["jya", "Jiarong"], ["jye", "Judeo-Yemeni Arabic"], ["jyy", "Jaya"], ["kaa", "Kara-Kalpak, Karakalpak"], ["kab", "Kabyle"], ["kac", "Kachin, Jingpho"], ["kad", "Adara"], ["kae", "Ketangalan"], ["kaf", "Katso"], ["kag", "Kajaman"], ["kah", "Kara (Central African Republic)"], ["kai", "Karekare"], ["kaj", "Jju"], ["kak", "Kalanguya, Kayapa Kallahan"], ["kam", "Kamba (Kenya)"], ["kao", "Xaasongaxango"], ["kap", "Bezhta"], ["kaq", "Capanahua"], ["kar", "Karen languages"], ["kav", "Katukína"], ["kaw", "Kawi"], ["kax", "Kao"], ["kay", "Kamayurá"], ["kba", "Kalarko"], ["kbb", "Kaxuiâna"], ["kbc", "Kadiwéu"], ["kbd", "Kabardian"], ["kbe", "Kanju"], ["kbf", "Kakauhua"], ["kbg", "Khamba"], ["kbh", "Camsá"], ["kbi", "Kaptiau"], ["kbj", "Kari"], ["kbk", "Grass Koiari"], ["kbl", "Kanembu"], ["kbm", "Iwal"], ["kbn", "Kare (Central African Republic)"], ["kbo", "Keliko"], ["kbp", "Kabiyè"], ["kbq", "Kamano"], ["kbr", "Kafa"], ["kbs", "Kande"], ["kbt", "Abadi"], ["kbu", "Kabutra"], ["kbv", "Dera (Indonesia)"], ["kbw", "Kaiep"], ["kbx", "Ap Ma"], ["kby", "Manga Kanuri"], ["kbz", "Duhwa"], ["kca", "Khanty"], ["kcb", "Kawacha"], ["kcc", "Lubila"], ["kcd", "Ngkâlmpw Kanum"], ["kce", "Kaivi"], ["kcf", "Ukaan"], ["kcg", "Tyap"], ["kch", "Vono"], ["kci", "Kamantan"], ["kcj", "Kobiana"], ["kck", "Kalanga"], ["kcl", "Kela (Papua New Guinea), Kala"], ["kcm", "Gula (Central African Republic)"], ["kcn", "Nubi"], ["kco", "Kinalakna"], ["kcp", "Kanga"], ["kcq", "Kamo"], ["kcr", "Katla"], ["kcs", "Koenoem"], ["kct", "Kaian"], ["kcu", "Kami (Tanzania)"], ["kcv", "Kete"], ["kcw", "Kabwari"], ["kcx", "Kachama-Ganjule"], ["kcy", "Korandje"], ["kcz", "Konongo"], ["kda", "Worimi"], ["kdc", "Kutu"], ["kdd", "Yankunytjatjara"], ["kde", "Makonde"], ["kdf", "Mamusi"], ["kdg", "Seba"], ["kdh", "Tem"], ["kdi", "Kumam"], ["kdj", "Karamojong"], ["kdk", "Numèè, Kwényi"], ["kdl", "Tsikimba"], ["kdm", "Kagoma"], ["kdn", "Kunda"], ["kdo", "Kordofanian languages"], ["kdp", "Kaningdon-Nindem"], ["kdq", "Koch"], ["kdr", "Karaim"], ["kdt", "Kuy"], ["kdu", "Kadaru"], ["kdv", "Kado"], ["kdw", "Koneraw"], ["kdx", "Kam"], ["kdy", "Keder, Keijar"], ["kdz", "Kwaja"], ["kea", "Kabuverdianu"], ["keb", "Kélé"], ["kec", "Keiga"], ["ked", "Kerewe"], ["kee", "Eastern Keres"], ["kef", "Kpessi"], ["keg", "Tese"], ["keh", "Keak"], ["kei", "Kei"], ["kej", "Kadar"], ["kek", "Kekchí"], ["kel", "Kela (Democratic Republic of Congo)"], ["kem", "Kemak"], ["ken", "Kenyang"], ["keo", "Kakwa"], ["kep", "Kaikadi"], ["keq", "Kamar"], ["ker", "Kera"], ["kes", "Kugbo"], ["ket", "Ket"], ["keu", "Akebu"], ["kev", "Kanikkaran"], ["kew", "West Kewa"], ["kex", "Kukna"], ["key", "Kupia"], ["kez", "Kukele"], ["kfa", "Kodava"], ["kfb", "Northwestern Kolami"], ["kfc", "Konda-Dora"], ["kfd", "Korra Koraga"], ["kfe", "Kota (India)"], ["kff", "Koya"], ["kfg", "Kudiya"], ["kfh", "Kurichiya"], ["kfi", "Kannada Kurumba"], ["kfj", "Kemiehua"], ["kfk", "Kinnauri"], ["kfl", "Kung"], ["kfm", "Khunsari"], ["kfn", "Kuk"], ["kfo", "Koro (Côte d'Ivoire)"], ["kfp", "Korwa"], ["kfq", "Korku"], ["kfr", "Kachhi, Kutchi"], ["kfs", "Bilaspuri"], ["kft", "Kanjari"], ["kfu", "Katkari"], ["kfv", "Kurmukar"], ["kfw", "Kharam Naga"], ["kfx", "Kullu Pahari"], ["kfy", "Kumaoni"], ["kfz", "Koromfé"], ["kga", "Koyaga"], ["kgb", "Kawe"], ["kgc", "Kasseng"], ["kgd", "Kataang"], ["kge", "Komering"], ["kgf", "Kube"], ["kgg", "Kusunda"], ["kgh", "Upper Tanudan Kalinga"], ["kgi", "Selangor Sign Language"], ["kgj", "Gamale Kham"], ["kgk", "Kaiwá"], ["kgl", "Kunggari"], ["kgm", "Karipúna"], ["kgn", "Karingani"], ["kgo", "Krongo"], ["kgp", "Kaingang"], ["kgq", "Kamoro"], ["kgr", "Abun"], ["kgs", "Kumbainggar"], ["kgt", "Somyev"], ["kgu", "Kobol"], ["kgv", "Karas"], ["kgw", "Karon Dori"], ["kgx", "Kamaru"], ["kgy", "Kyerung"], ["kha", "Khasi"], ["khb", "Lü"], ["khc", "Tukang Besi North"], ["khd", "Bädi Kanum"], ["khe", "Korowai"], ["khf", "Khuen"], ["khg", "Khams Tibetan"], ["khh", "Kehu"], ["khi", "Khoisan languages"], ["khj", "Kuturmi"], ["khk", "Halh Mongolian"], ["khl", "Lusi"], ["khn", "Khandesi"], ["kho", "Khotanese, Sakan"], ["khp", "Kapori, Kapauri"], ["khq", "Koyra Chiini Songhay"], ["khr", "Kharia"], ["khs", "Kasua"], ["kht", "Khamti"], ["khu", "Nkhumbi"], ["khv", "Khvarshi"], ["khw", "Khowar"], ["khx", "Kanu"], ["khy", "Kele (Democratic Republic of Congo)"], ["khz", "Keapara"], ["kia", "Kim"], ["kib", "Koalib"], ["kic", "Kickapoo"], ["kid", "Koshin"], ["kie", "Kibet"], ["kif", "Eastern Parbate Kham"], ["kig", "Kimaama, Kimaghima"], ["kih", "Kilmeri"], ["kii", "Kitsai"], ["kij", "Kilivila"], ["kil", "Kariya"], ["kim", "Karagas"], ["kio", "Kiowa"], ["kip", "Sheshi Kham"], ["kiq", "Kosadle, Kosare"], ["kis", "Kis"], ["kit", "Agob"], ["kiu", "Kirmanjki (individual language)"], ["kiv", "Kimbu"], ["kiw", "Northeast Kiwai"], ["kix", "Khiamniungan Naga"], ["kiy", "Kirikiri"], ["kiz", "Kisi"], ["kja", "Mlap"], ["kjb", "Q'anjob'al, Kanjobal"], ["kjc", "Coastal Konjo"], ["kjd", "Southern Kiwai"], ["kje", "Kisar"], ["kjf", "Khalaj [Indo-Iranian]"], ["kjg", "Khmu"], ["kjh", "Khakas"], ["kji", "Zabana"], ["kjj", "Khinalugh"], ["kjk", "Highland Konjo"], ["kjl", "Western Parbate Kham"], ["kjm", "Kháng"], ["kjn", "Kunjen"], ["kjo", "Harijan Kinnauri"], ["kjp", "Pwo Eastern Karen"], ["kjq", "Western Keres"], ["kjr", "Kurudu"], ["kjs", "East Kewa"], ["kjt", "Phrae Pwo Karen"], ["kju", "Kashaya"], ["kjv", "Kaikavian Literary Language"], ["kjx", "Ramopa"], ["kjy", "Erave"], ["kjz", "Bumthangkha"], ["kka", "Kakanda"], ["kkb", "Kwerisa"], ["kkc", "Odoodee"], ["kkd", "Kinuku"], ["kke", "Kakabe"], ["kkf", "Kalaktang Monpa"], ["kkg", "Mabaka Valley Kalinga"], ["kkh", "Khün"], ["kki", "Kagulu"], ["kkj", "Kako"], ["kkk", "Kokota"], ["kkl", "Kosarek Yale"], ["kkm", "Kiong"], ["kkn", "Kon Keu"], ["kko", "Karko"], ["kkp", "Gugubera, Koko-Bera"], ["kkq", "Kaeku"], ["kkr", "Kir-Balar"], ["kks", "Giiwo"], ["kkt", "Koi"], ["kku", "Tumi"], ["kkv", "Kangean"], ["kkw", "Teke-Kukuya"], ["kkx", "Kohin"], ["kky", "Guugu Yimidhirr, Guguyimidjir"], ["kkz", "Kaska"], ["kla", "Klamath-Modoc"], ["klb", "Kiliwa"], ["klc", "Kolbila"], ["kld", "Gamilaraay"], ["kle", "Kulung (Nepal)"], ["klf", "Kendeje"], ["klg", "Tagakaulo"], ["klh", "Weliki"], ["kli", "Kalumpang"], ["klj", "Khalaj"], ["klk", "Kono (Nigeria)"], ["kll", "Kagan Kalagan"], ["klm", "Migum"], ["kln", "Kalenjin"], ["klo", "Kapya"], ["klp", "Kamasa"], ["klq", "Rumu"], ["klr", "Khaling"], ["kls", "Kalasha"], ["klt", "Nukna"], ["klu", "Klao"], ["klv", "Maskelynes"], ["klw", "Tado, Lindu"], ["klx", "Koluwawa"], ["kly", "Kalao"], ["klz", "Kabola"], ["kma", "Konni"], ["kmb", "Kimbundu"], ["kmc", "Southern Dong"], ["kmd", "Majukayang Kalinga"], ["kme", "Bakole"], ["kmf", "Kare (Papua New Guinea)"], ["kmg", "Kâte"], ["kmh", "Kalam"], ["kmi", "Kami (Nigeria)"], ["kmj", "Kumarbhag Paharia"], ["kmk", "Limos Kalinga"], ["kml", "Tanudan Kalinga"], ["kmm", "Kom (India)"], ["kmn", "Awtuw"], ["kmo", "Kwoma"], ["kmp", "Gimme"], ["kmq", "Kwama"], ["kmr", "Northern Kurdish"], ["kms", "Kamasau"], ["kmt", "Kemtuik"], ["kmu", "Kanite"], ["kmv", "Karipúna Creole French"], ["kmw", "Komo (Democratic Republic of Congo)"], ["kmx", "Waboda"], ["kmy", "Koma"], ["kmz", "Khorasani Turkish"], ["kna", "Dera (Nigeria)"], ["knb", "Lubuagan Kalinga"], ["knc", "Central Kanuri"], ["knd", "Konda"], ["kne", "Kankanaey"], ["knf", "Mankanya"], ["kng", "Koongo"], ["kni", "Kanufi"], ["knj", "Western Kanjobal"], ["knk", "Kuranko"], ["knl", "Keninjal"], ["knm", "Kanamarí"], ["knn", "Konkani (individual language)"], ["kno", "Kono (Sierra Leone)"], ["knp", "Kwanja"], ["knq", "Kintaq"], ["knr", "Kaningra"], ["kns", "Kensiu"], ["knt", "Panoan Katukína"], ["knu", "Kono (Guinea)"], ["knv", "Tabo"], ["knw", "Kung-Ekoka"], ["knx", "Kendayan, Salako"], ["kny", "Kanyok"], ["knz", "Kalamsé"], ["koa", "Konomala"], ["koc", "Kpati"], ["kod", "Kodi"], ["koe", "Kacipo-Bale Suri"], ["kof", "Kubi"], ["kog", "Cogui, Kogi"], ["koh", "Koyo"], ["koi", "Komi-Permyak"], ["koj", "Sara Dunjo"], ["kok", "Konkani (macrolanguage)"], ["kol", "Kol (Papua New Guinea)"], ["koo", "Konzo"], ["kop", "Waube"], ["koq", "Kota (Gabon)"], ["kos", "Kosraean"], ["kot", "Lagwan"], ["kou", "Koke"], ["kov", "Kudu-Camo"], ["kow", "Kugama"], ["kox", "Coxima"], ["koy", "Koyukon"], ["koz", "Korak"], ["kpa", "Kutto"], ["kpb", "Mullu Kurumba"], ["kpc", "Curripaco"], ["kpd", "Koba"], ["kpe", "Kpelle"], ["kpf", "Komba"], ["kpg", "Kapingamarangi"], ["kph", "Kplang"], ["kpi", "Kofei"], ["kpj", "Karajá"], ["kpk", "Kpan"], ["kpl", "Kpala"], ["kpm", "Koho"], ["kpn", "Kepkiriwát"], ["kpo", "Ikposo"], ["kpp", "Paku Karen"], ["kpq", "Korupun-Sela"], ["kpr", "Korafe-Yegha"], ["kps", "Tehit"], ["kpt", "Karata"], ["kpu", "Kafoa"], ["kpv", "Komi-Zyrian"], ["kpw", "Kobon"], ["kpx", "Mountain Koiali"], ["kpy", "Koryak"], ["kpz", "Kupsabiny"], ["kqa", "Mum"], ["kqb", "Kovai"], ["kqc", "Doromu-Koki"], ["kqd", "Koy Sanjaq Surat"], ["kqe", "Kalagan"], ["kqf", "Kakabai"], ["kqg", "Khe"], ["kqh", "Kisankasa"], ["kqi", "Koitabu"], ["kqj", "Koromira"], ["kqk", "Kotafon Gbe"], ["kql", "Kyenele"], ["kqm", "Khisa"], ["kqn", "Kaonde"], ["kqo", "Eastern Krahn"], ["kqp", "Kimré"], ["kqq", "Krenak"], ["kqr", "Kimaragang"], ["kqs", "Northern Kissi"], ["kqt", "Klias River Kadazan"], ["kqu", "Seroa"], ["kqv", "Okolod"], ["kqw", "Kandas"], ["kqx", "Mser"], ["kqy", "Koorete"], ["kqz", "Korana"], ["kra", "Kumhali"], ["krb", "Karkin"], ["krc", "Karachay-Balkar"], ["krd", "Kairui-Midiki"], ["kre", "Panará"], ["krf", "Koro (Vanuatu)"], ["krh", "Kurama"], ["kri", "Krio"], ["krj", "Kinaray-A"], ["krk", "Kerek"], ["krl", "Karelian"], ["krm", "Krim"], ["krn", "Sapo"], ["kro", "Kru languages"], ["krp", "Korop"], ["krr", "Krung"], ["krs", "Gbaya (Sudan)"], ["krt", "Tumari Kanuri"], ["kru", "Kurukh"], ["krv", "Kavet"], ["krw", "Western Krahn"], ["krx", "Karon"], ["kry", "Kryts"], ["krz", "Sota Kanum"], ["ksa", "Shuwa-Zamani"], ["ksb", "Shambala"], ["ksc", "Southern Kalinga"], ["ksd", "Kuanua"], ["kse", "Kuni"], ["ksf", "Bafia"], ["ksg", "Kusaghe"], ["ksh", "Kölsch"], ["ksi", "Krisa, I'saka"], ["ksj", "Uare"], ["ksk", "Kansa"], ["ksl", "Kumalu"], ["ksm", "Kumba"], ["ksn", "Kasiguranin"], ["kso", "Kofa"], ["ksp", "Kaba"], ["ksq", "Kwaami"], ["ksr", "Borong"], ["kss", "Southern Kisi"], ["kst", "Winyé"], ["ksu", "Khamyang"], ["ksv", "Kusu"], ["ksw", "S'gaw Karen"], ["ksx", "Kedang"], ["ksy", "Kharia Thar"], ["ksz", "Kodaku"], ["kta", "Katua"], ["ktb", "Kambaata"], ["ktc", "Kholok"], ["ktd", "Kokata, Kukatha"], ["kte", "Nubri"], ["ktf", "Kwami"], ["ktg", "Kalkutung"], ["kth", "Karanga"], ["kti", "North Muyu"], ["ktj", "Plapo Krumen"], ["ktk", "Kaniet"], ["ktl", "Koroshi"], ["ktm", "Kurti"], ["ktn", "Karitiâna"], ["kto", "Kuot"], ["ktp", "Kaduo"], ["ktq", "Katabaga"], ["ktr", "Kota Marudu Tinagas"], ["kts", "South Muyu"], ["ktt", "Ketum"], ["ktu", "Kituba (Democratic Republic of Congo)"], ["ktv", "Eastern Katu"], ["ktw", "Kato"], ["ktx", "Kaxararí"], ["kty", "Kango (Bas-Uélé District)"], ["ktz", "Juǀʼhoan, Juǀʼhoansi"], ["kub", "Kutep"], ["kuc", "Kwinsu"], ["kud", "'Auhelawa"], ["kue", "Kuman (Papua New Guinea)"], ["kuf", "Western Katu"], ["kug", "Kupa"], ["kuh", "Kushi"], ["kui", "Kuikúro-Kalapálo, Kalapalo"], ["kuj", "Kuria"], ["kuk", "Kepo'"], ["kul", "Kulere"], ["kum", "Kumyk"], ["kun", "Kunama"], ["kuo", "Kumukio"], ["kup", "Kunimaipa"], ["kuq", "Karipuna"], ["kus", "Kusaal"], ["kut", "Kutenai"], ["kuu", "Upper Kuskokwim"], ["kuv", "Kur"], ["kuw", "Kpagua"], ["kux", "Kukatja"], ["kuy", "Kuuku-Ya'u"], ["kuz", "Kunza"], ["kva", "Bagvalal"], ["kvb", "Kubu"], ["kvc", "Kove"], ["kvd", "Kui (Indonesia)"], ["kve", "Kalabakan"], ["kvf", "Kabalai"], ["kvg", "Kuni-Boazi"], ["kvh", "Komodo"], ["kvi", "Kwang"], ["kvj", "Psikye"], ["kvk", "Korean Sign Language"], ["kvl", "Kayaw"], ["kvm", "Kendem"], ["kvn", "Border Kuna"], ["kvo", "Dobel"], ["kvp", "Kompane"], ["kvq", "Geba Karen"], ["kvr", "Kerinci"], ["kvs", "Kunggara"], ["kvt", "Lahta Karen, Lahta"], ["kvu", "Yinbaw Karen"], ["kvv", "Kola"], ["kvw", "Wersing"], ["kvx", "Parkari Koli"], ["kvy", "Yintale Karen, Yintale"], ["kvz", "Tsakwambo, Tsaukambo"], ["kwa", "Dâw"], ["kwb", "Kwa"], ["kwc", "Likwala"], ["kwd", "Kwaio"], ["kwe", "Kwerba"], ["kwf", "Kwara'ae"], ["kwg", "Sara Kaba Deme"], ["kwh", "Kowiai"], ["kwi", "Awa-Cuaiquer"], ["kwj", "Kwanga"], ["kwk", "Kwakiutl"], ["kwl", "Kofyar"], ["kwm", "Kwambi"], ["kwn", "Kwangali"], ["kwo", "Kwomtari"], ["kwp", "Kodia"], ["kwq", "Kwak"], ["kwr", "Kwer"], ["kws", "Kwese"], ["kwt", "Kwesten"], ["kwu", "Kwakum"], ["kwv", "Sara Kaba Náà"], ["kww", "Kwinti"], ["kwx", "Khirwar"], ["kwy", "San Salvador Kongo"], ["kwz", "Kwadi"], ["kxa", "Kairiru"], ["kxb", "Krobu"], ["kxc", "Konso, Khonso"], ["kxd", "Brunei"], ["kxe", "Kakihum"], ["kxf", "Manumanaw Karen, Manumanaw"], ["kxh", "Karo (Ethiopia)"], ["kxi", "Keningau Murut"], ["kxj", "Kulfa"], ["kxk", "Zayein Karen"], ["kxl", "Nepali Kurux"], ["kxm", "Northern Khmer"], ["kxn", "Kanowit-Tanjong Melanau"], ["kxo", "Kanoé"], ["kxp", "Wadiyara Koli"], ["kxq", "Smärky Kanum"], ["kxr", "Koro (Papua New Guinea)"], ["kxs", "Kangjia"], ["kxt", "Koiwat"], ["kxu", "Kui (India)"], ["kxv", "Kuvi"], ["kxw", "Konai"], ["kxx", "Likuba"], ["kxy", "Kayong"], ["kxz", "Kerewo"], ["kya", "Kwaya"], ["kyb", "Butbut Kalinga"], ["kyc", "Kyaka"], ["kyd", "Karey"], ["kye", "Krache"], ["kyf", "Kouya"], ["kyg", "Keyagana"], ["kyh", "Karok"], ["kyi", "Kiput"], ["kyj", "Karao"], ["kyk", "Kamayo"], ["kyl", "Kalapuya"], ["kym", "Kpatili"], ["kyn", "Northern Binukidnon"], ["kyo", "Kelon"], ["kyp", "Kang"], ["kyq", "Kenga"], ["kyr", "Kuruáya"], ["kys", "Baram Kayan"], ["kyt", "Kayagar"], ["kyu", "Western Kayah"], ["kyv", "Kayort"], ["kyw", "Kudmali"], ["kyx", "Rapoisi"], ["kyy", "Kambaira"], ["kyz", "Kayabí"], ["kza", "Western Karaboro"], ["kzb", "Kaibobo"], ["kzc", "Bondoukou Kulango"], ["kzd", "Kadai"], ["kze", "Kosena"], ["kzf", "Da'a Kaili"], ["kzg", "Kikai"], ["kzh", "Kenuzi-Dongola"], ["kzi", "Kelabit"], ["kzj", "Coastal Kadazan"], ["kzk", "Kazukuru"], ["kzl", "Kayeli"], ["kzm", "Kais"], ["kzn", "Kokola"], ["kzo", "Kaningi"], ["kzp", "Kaidipang"], ["kzq", "Kaike"], ["kzr", "Karang"], ["kzs", "Sugut Dusun"], ["kzt", "Tambunan Dusun"], ["kzu", "Kayupulau"], ["kzv", "Komyandaret"], ["kzw", "Karirí-Xocó"], ["kzx", "Kamarian"], ["kzy", "Kango (Tshopo District)"], ["kzz", "Kalabra"], ["laa", "Southern Subanen"], ["lab", "Linear A"], ["lac", "Lacandon"], ["lad", "Ladino"], ["lae", "Pattani"], ["laf", "Lafofa"], ["lag", "Langi"], ["lah", "Lahnda"], ["lai", "Lambya"], ["laj", "Lango (Uganda)"], ["lak", "Laka (Nigeria)"], ["lal", "Lalia"], ["lam", "Lamba"], ["lan", "Laru"], ["lap", "Laka (Chad)"], ["laq", "Qabiao"], ["lar", "Larteh"], ["las", "Lama (Togo)"], ["lau", "Laba"], ["law", "Lauje"], ["lax", "Tiwa"], ["lay", "Lama Bai"], ["laz", "Aribwatsa"], ["lba", "Lui"], ["lbb", "Label"], ["lbc", "Lakkia"], ["lbe", "Lak"], ["lbf", "Tinani"], ["lbg", "Laopang"], ["lbi", "La'bi"], ["lbj", "Ladakhi"], ["lbk", "Central Bontok"], ["lbl", "Libon Bikol"], ["lbm", "Lodhi"], ["lbn", "Rmeet"], ["lbo", "Laven"], ["lbq", "Wampar"], ["lbr", "Lohorung"], ["lbs", "Libyan Sign Language"], ["lbt", "Lachi"], ["lbu", "Labu"], ["lbv", "Lavatbura-Lamusong"], ["lbw", "Tolaki"], ["lbx", "Lawangan"], ["lby", "Lamalama, Lamu-Lamu"], ["lbz", "Lardil"], ["lcc", "Legenyem"], ["lcd", "Lola"], ["lce", "Loncong, Sekak"], ["lcf", "Lubu"], ["lch", "Luchazi"], ["lcl", "Lisela"], ["lcm", "Tungag"], ["lcp", "Western Lawa"], ["lcq", "Luhu"], ["lcs", "Lisabata-Nuniali"], ["lda", "Kla-Dan"], ["ldb", "Dũya"], ["ldd", "Luri"], ["ldg", "Lenyima"], ["ldh", "Lamja-Dengsa-Tola"], ["ldi", "Laari"], ["ldj", "Lemoro"], ["ldk", "Leelau"], ["ldl", "Kaan"], ["ldm", "Landoma"], ["ldn", "Láadan"], ["ldo", "Loo"], ["ldp", "Tso"], ["ldq", "Lufu"], ["lea", "Lega-Shabunda"], ["leb", "Lala-Bisa"], ["lec", "Leco"], ["led", "Lendu"], ["lee", "Lyélé"], ["lef", "Lelemi"], ["leg", "Lengua"], ["leh", "Lenje"], ["lei", "Lemio"], ["lej", "Lengola"], ["lek", "Leipon"], ["lel", "Lele (Democratic Republic of Congo)"], ["lem", "Nomaande"], ["len", "Lenca"], ["leo", "Leti (Cameroon)"], ["lep", "Lepcha"], ["leq", "Lembena"], ["ler", "Lenkau"], ["les", "Lese"], ["let", "Lesing-Gelimi, Amio-Gelimi"], ["leu", "Kara (Papua New Guinea)"], ["lev", "Lamma"], ["lew", "Ledo Kaili"], ["lex", "Luang"], ["ley", "Lemolang"], ["lez", "Lezghian"], ["lfa", "Lefa"], ["lfn", "Lingua Franca Nova"], ["lga", "Lungga"], ["lgb", "Laghu"], ["lgg", "Lugbara"], ["lgh", "Laghuu"], ["lgi", "Lengilu"], ["lgk", "Lingarak, Neverver"], ["lgl", "Wala"], ["lgm", "Lega-Mwenga"], ["lgn", "T'apo, Opuuo"], ["lgq", "Logba"], ["lgr", "Lengo"], ["lgt", "Pahi"], ["lgu", "Longgu"], ["lgz", "Ligenza"], ["lha", "Laha (Viet Nam)"], ["lhh", "Laha (Indonesia)"], ["lhi", "Lahu Shi"], ["lhl", "Lahul Lohar"], ["lhm", "Lhomi"], ["lhn", "Lahanan"], ["lhp", "Lhokpu"], ["lhs", "Mlahsö"], ["lht", "Lo-Toga"], ["lhu", "Lahu"], ["lia", "West-Central Limba"], ["lib", "Likum"], ["lic", "Hlai"], ["lid", "Nyindrou"], ["lie", "Likila"], ["lif", "Limbu"], ["lig", "Ligbi"], ["lih", "Lihir"], ["lii", "Lingkhim"], ["lij", "Ligurian"], ["lik", "Lika"], ["lil", "Lillooet"], ["lio", "Liki"], ["lip", "Sekpele"], ["liq", "Libido"], ["lir", "Liberian English"], ["lis", "Lisu"], ["liu", "Logorik"], ["liv", "Liv"], ["liw", "Col"], ["lix", "Liabuku"], ["liy", "Banda-Bambari"], ["liz", "Libinza"], ["lja", "Golpa"], ["lje", "Rampi"], ["lji", "Laiyolo"], ["ljl", "Li'o"], ["ljp", "Lampung Api"], ["ljw", "Yirandali"], ["ljx", "Yuru"], ["lka", "Lakalei"], ["lkb", "Kabras, Lukabaras"], ["lkc", "Kucong"], ["lkd", "Lakondê"], ["lke", "Kenyi"], ["lkh", "Lakha"], ["lki", "Laki"], ["lkj", "Remun"], ["lkl", "Laeko-Libuat"], ["lkm", "Kalaamaya"], ["lkn", "Lakon, Vure"], ["lko", "Khayo, Olukhayo"], ["lkr", "Päri"], ["lks", "Kisa, Olushisa"], ["lkt", "Lakota"], ["lku", "Kungkari"], ["lky", "Lokoya"], ["lla", "Lala-Roba"], ["llb", "Lolo"], ["llc", "Lele (Guinea)"], ["lld", "Ladin"], ["lle", "Lele (Papua New Guinea)"], ["llf", "Hermit"], ["llg", "Lole"], ["llh", "Lamu"], ["lli", "Teke-Laali"], ["llj", "Ladji Ladji"], ["llk", "Lelak"], ["lll", "Lilau"], ["llm", "Lasalimu"], ["lln", "Lele (Chad)"], ["llo", "Khlor"], ["llp", "North Efate"], ["llq", "Lolak"], ["lls", "Lithuanian Sign Language"], ["llu", "Lau"], ["llx", "Lauan"], ["lma", "East Limba"], ["lmb", "Merei"], ["lmc", "Limilngan"], ["lmd", "Lumun"], ["lme", "Pévé"], ["lmf", "South Lembata"], ["lmg", "Lamogai"], ["lmh", "Lambichhong"], ["lmi", "Lombi"], ["lmj", "West Lembata"], ["lmk", "Lamkang"], ["lml", "Hano"], ["lmm", "Lamam"], ["lmn", "Lambadi"], ["lmo", "Lombard"], ["lmp", "Limbum"], ["lmq", "Lamatuka"], ["lmr", "Lamalera"], ["lmu", "Lamenu"], ["lmv", "Lomaiviti"], ["lmw", "Lake Miwok"], ["lmx", "Laimbue"], ["lmy", "Lamboya"], ["lmz", "Lumbee"], ["lna", "Langbashe"], ["lnb", "Mbalanhu"], ["lnd", "Lundayeh, Lun Bawang"], ["lng", "Langobardic"], ["lnh", "Lanoh"], ["lni", "Daantanai'"], ["lnj", "Leningitij"], ["lnl", "South Central Banda"], ["lnm", "Langam"], ["lnn", "Lorediakarkar"], ["lno", "Lango (South Sudan)"], ["lns", "Lamnso'"], ["lnu", "Longuda"], ["lnw", "Lanima"], ["lnz", "Lonzo"], ["loa", "Loloda"], ["lob", "Lobi"], ["loc", "Inonhan"], ["loe", "Saluan"], ["lof", "Logol"], ["log", "Logo"], ["loh", "Narim"], ["loi", "Loma (Côte d'Ivoire)"], ["loj", "Lou"], ["lok", "Loko"], ["lol", "Mongo"], ["lom", "Loma (Liberia)"], ["lon", "Malawi Lomwe"], ["loo", "Lombo"], ["lop", "Lopa"], ["loq", "Lobala"], ["lor", "Téén"], ["los", "Loniu"], ["lot", "Otuho"], ["lou", "Louisiana Creole"], ["lov", "Lopi"], ["low", "Tampias Lobu"], ["lox", "Loun"], ["loy", "Loke"], ["loz", "Lozi"], ["lpa", "Lelepa"], ["lpe", "Lepki"], ["lpn", "Long Phuri Naga"], ["lpo", "Lipo"], ["lpx", "Lopit"], ["lra", "Rara Bakati'"], ["lrc", "Northern Luri"], ["lre", "Laurentian"], ["lrg", "Laragia"], ["lri", "Marachi, Olumarachi"], ["lrk", "Loarki"], ["lrl", "Lari"], ["lrm", "Marama, Olumarama"], ["lrn", "Lorang"], ["lro", "Laro"], ["lrr", "Southern Yamphu"], ["lrt", "Larantuka Malay"], ["lrv", "Larevat"], ["lrz", "Lemerig"], ["lsa", "Lasgerdi"], ["lsb", "Burundian Sign Language, Langue des Signes Burundaise"], ["lsd", "Lishana Deni"], ["lse", "Lusengo"], ["lsg", "Lyons Sign Language"], ["lsh", "Lish"], ["lsi", "Lashi"], ["lsl", "Latvian Sign Language"], ["lsm", "Saamia, Olusamia"], ["lsn", "Tibetan Sign Language"], ["lso", "Laos Sign Language"], ["lsp", "Panamanian Sign Language, Lengua de Señas Panameñas"], ["lsr", "Aruop"], ["lss", "Lasi"], ["lst", "Trinidad and Tobago Sign Language"], ["lsv", "Sivia Sign Language"], ["lsy", "Mauritian Sign Language"], ["ltc", "Late Middle Chinese"], ["ltg", "Latgalian"], ["lth", "Thur"], ["lti", "Leti (Indonesia)"], ["ltn", "Latundê"], ["lto", "Tsotso, Olutsotso"], ["lts", "Tachoni, Lutachoni"], ["ltu", "Latu"], ["lua", "Luba-Lulua"], ["luc", "Aringa"], ["lud", "Ludian"], ["lue", "Luvale"], ["luf", "Laua"], ["lui", "Luiseno"], ["luj", "Luna"], ["luk", "Lunanakha"], ["lul", "Olu'bo"], ["lum", "Luimbi"], ["lun", "Lunda"], ["luo", "Luo (Kenya and Tanzania), Dholuo"], ["lup", "Lumbu"], ["luq", "Lucumi"], ["lur", "Laura"], ["lus", "Lushai"], ["lut", "Lushootseed"], ["luu", "Lumba-Yakkha"], ["luv", "Luwati"], ["luw", "Luo (Cameroon)"], ["luy", "Luyia, Oluluyia"], ["luz", "Southern Luri"], ["lva", "Maku'a"], ["lvi", "Lavi"], ["lvk", "Lavukaleve"], ["lvs", "Standard Latvian"], ["lvu", "Levuka"], ["lwa", "Lwalu"], ["lwe", "Lewo Eleng"], ["lwg", "Wanga, Oluwanga"], ["lwh", "White Lachi"], ["lwl", "Eastern Lawa"], ["lwm", "Laomian"], ["lwo", "Luwo"], ["lws", "Malawian Sign Language"], ["lwt", "Lewotobi"], ["lwu", "Lawu"], ["lww", "Lewo"], ["lxm", "Lakurumau"], ["lya", "Layakha"], ["lyg", "Lyngngam"], ["lyn", "Luyana"], ["lzh", "Literary Chinese"], ["lzl", "Litzlitz"], ["lzn", "Leinong Naga"], ["lzz", "Laz"], ["maa", "San Jerónimo Tecóatl Mazatec"], ["mab", "Yutanduchi Mixtec"], ["mad", "Madurese"], ["mae", "Bo-Rukul"], ["maf", "Mafa"], ["mag", "Magahi"], ["mai", "Maithili"], ["maj", "Jalapa De Díaz Mazatec"], ["mak", "Makasar"], ["mam", "Mam"], ["man", "Mandingo, Manding"], ["map", "Austronesian languages"], ["maq", "Chiquihuitlán Mazatec"], ["mas", "Masai"], ["mat", "San Francisco Matlatzinca"], ["mau", "Huautla Mazatec"], ["mav", "Sateré-Mawé"], ["maw", "Mampruli"], ["max", "North Moluccan Malay"], ["maz", "Central Mazahua"], ["mba", "Higaonon"], ["mbb", "Western Bukidnon Manobo"], ["mbc", "Macushi"], ["mbd", "Dibabawon Manobo"], ["mbe", "Molale"], ["mbf", "Baba Malay"], ["mbh", "Mangseng"], ["mbi", "Ilianen Manobo"], ["mbj", "Nadëb"], ["mbk", "Malol"], ["mbl", "Maxakalí"], ["mbm", "Ombamba"], ["mbn", "Macaguán"], ["mbo", "Mbo (Cameroon)"], ["mbp", "Malayo"], ["mbq", "Maisin"], ["mbr", "Nukak Makú"], ["mbs", "Sarangani Manobo"], ["mbt", "Matigsalug Manobo"], ["mbu", "Mbula-Bwazza"], ["mbv", "Mbulungish"], ["mbw", "Maring"], ["mbx", "Mari (East Sepik Province)"], ["mby", "Memoni"], ["mbz", "Amoltepec Mixtec"], ["mca", "Maca"], ["mcb", "Machiguenga"], ["mcc", "Bitur"], ["mcd", "Sharanahua"], ["mce", "Itundujia Mixtec"], ["mcf", "Matsés"], ["mcg", "Mapoyo"], ["mch", "Maquiritari"], ["mci", "Mese"], ["mcj", "Mvanip"], ["mck", "Mbunda"], ["mcl", "Macaguaje"], ["mcm", "Malaccan Creole Portuguese"], ["mcn", "Masana"], ["mco", "Coatlán Mixe"], ["mcp", "Makaa"], ["mcq", "Ese"], ["mcr", "Menya"], ["mcs", "Mambai"], ["mct", "Mengisa"], ["mcu", "Cameroon Mambila"], ["mcv", "Minanibai"], ["mcw", "Mawa (Chad)"], ["mcx", "Mpiemo"], ["mcy", "South Watut"], ["mcz", "Mawan"], ["mda", "Mada (Nigeria)"], ["mdb", "Morigi"], ["mdc", "Male (Papua New Guinea)"], ["mdd", "Mbum"], ["mde", "Maba (Chad)"], ["mdf", "Moksha"], ["mdg", "Massalat"], ["mdh", "Maguindanaon"], ["mdi", "Mamvu"], ["mdj", "Mangbetu"], ["mdk", "Mangbutu"], ["mdl", "Maltese Sign Language"], ["mdm", "Mayogo"], ["mdn", "Mbati"], ["mdp", "Mbala"], ["mdq", "Mbole"], ["mdr", "Mandar"], ["mds", "Maria (Papua New Guinea)"], ["mdt", "Mbere"], ["mdu", "Mboko"], ["mdv", "Santa Lucía Monteverde Mixtec"], ["mdw", "Mbosi"], ["mdx", "Dizin"], ["mdy", "Male (Ethiopia)"], ["mdz", "Suruí Do Pará"], ["mea", "Menka"], ["meb", "Ikobi"], ["mec", "Marra"], ["med", "Melpa"], ["mee", "Mengen"], ["mef", "Megam"], ["meg", "Mea"], ["meh", "Southwestern Tlaxiaco Mixtec"], ["mei", "Midob"], ["mej", "Meyah"], ["mek", "Mekeo"], ["mel", "Central Melanau"], ["mem", "Mangala"], ["men", "Mende (Sierra Leone)"], ["meo", "Kedah Malay"], ["mep", "Miriwoong"], ["meq", "Merey"], ["mer", "Meru"], ["mes", "Masmaje"], ["met", "Mato"], ["meu", "Motu"], ["mev", "Mano"], ["mew", "Maaka"], ["mey", "Hassaniyya"], ["mez", "Menominee"], ["mfa", "Pattani Malay"], ["mfb", "Bangka"], ["mfc", "Mba"], ["mfd", "Mendankwe-Nkwen"], ["mfe", "Morisyen"], ["mff", "Naki"], ["mfg", "Mogofin"], ["mfh", "Matal"], ["mfi", "Wandala"], ["mfj", "Mefele"], ["mfk", "North Mofu"], ["mfl", "Putai"], ["mfm", "Marghi South"], ["mfn", "Cross River Mbembe"], ["mfo", "Mbe"], ["mfp", "Makassar Malay"], ["mfq", "Moba"], ["mfr", "Marrithiyel"], ["mfs", "Mexican Sign Language"], ["mft", "Mokerang"], ["mfu", "Mbwela"], ["mfv", "Mandjak"], ["mfw", "Mulaha"], ["mfx", "Melo"], ["mfy", "Mayo"], ["mfz", "Mabaan"], ["mga", "Middle Irish (900-1200)"], ["mgb", "Mararit"], ["mgc", "Morokodo"], ["mgd", "Moru"], ["mge", "Mango"], ["mgf", "Maklew"], ["mgg", "Mpumpong"], ["mgh", "Makhuwa-Meetto"], ["mgi", "Lijili"], ["mgj", "Abureni"], ["mgk", "Mawes"], ["mgl", "Maleu-Kilenge"], ["mgm", "Mambae"], ["mgn", "Mbangi"], ["mgo", "Meta'"], ["mgp", "Eastern Magar"], ["mgq", "Malila"], ["mgr", "Mambwe-Lungu"], ["mgs", "Manda (Tanzania)"], ["mgt", "Mongol"], ["mgu", "Mailu"], ["mgv", "Matengo"], ["mgw", "Matumbi"], ["mgx", "Omati"], ["mgy", "Mbunga"], ["mgz", "Mbugwe"], ["mha", "Manda (India)"], ["mhb", "Mahongwe"], ["mhc", "Mocho"], ["mhd", "Mbugu"], ["mhe", "Besisi, Mah Meri"], ["mhf", "Mamaa"], ["mhg", "Margu"], ["mhh", "Maskoy Pidgin"], ["mhi", "Ma'di"], ["mhj", "Mogholi"], ["mhk", "Mungaka"], ["mhl", "Mauwake"], ["mhm", "Makhuwa-Moniga"], ["mhn", "Mócheno"], ["mho", "Mashi (Zambia)"], ["mhp", "Balinese Malay"], ["mhq", "Mandan"], ["mhr", "Eastern Mari"], ["mhs", "Buru (Indonesia)"], ["mht", "Mandahuaca"], ["mhu", "Digaro-Mishmi, Darang Deng"], ["mhw", "Mbukushu"], ["mhx", "Maru, Lhaovo"], ["mhy", "Ma'anyan"], ["mhz", "Mor (Mor Islands)"], ["mia", "Miami"], ["mib", "Atatláhuca Mixtec"], ["mic", "Mi'kmaq, Micmac"], ["mid", "Mandaic"], ["mie", "Ocotepec Mixtec"], ["mif", "Mofu-Gudur"], ["mig", "San Miguel El Grande Mixtec"], ["mih", "Chayuco Mixtec"], ["mii", "Chigmecatitlán Mixtec"], ["mij", "Abar, Mungbam"], ["mik", "Mikasuki"], ["mil", "Peñoles Mixtec"], ["mim", "Alacatlatzala Mixtec"], ["min", "Minangkabau"], ["mio", "Pinotepa Nacional Mixtec"], ["mip", "Apasco-Apoala Mixtec"], ["miq", "Mískito"], ["mir", "Isthmus Mixe"], ["mis", "Uncoded languages"], ["mit", "Southern Puebla Mixtec"], ["miu", "Cacaloxtepec Mixtec"], ["miw", "Akoye"], ["mix", "Mixtepec Mixtec"], ["miy", "Ayutla Mixtec"], ["miz", "Coatzospan Mixtec"], ["mja", "Mahei"], ["mjb", "Makalero"], ["mjc", "San Juan Colorado Mixtec"], ["mjd", "Northwest Maidu"], ["mje", "Muskum"], ["mjg", "Tu"], ["mjh", "Mwera (Nyasa)"], ["mji", "Kim Mun"], ["mjj", "Mawak"], ["mjk", "Matukar"], ["mjl", "Mandeali"], ["mjm", "Medebur"], ["mjn", "Ma (Papua New Guinea)"], ["mjo", "Malankuravan"], ["mjp", "Malapandaram"], ["mjq", "Malaryan"], ["mjr", "Malavedan"], ["mjs", "Miship"], ["mjt", "Sauria Paharia"], ["mju", "Manna-Dora"], ["mjv", "Mannan"], ["mjw", "Karbi"], ["mjx", "Mahali"], ["mjy", "Mahican"], ["mjz", "Majhi"], ["mka", "Mbre"], ["mkb", "Mal Paharia"], ["mkc", "Siliput"], ["mke", "Mawchi"], ["mkf", "Miya"], ["mkg", "Mak (China)"], ["mkh", "Mon-Khmer languages"], ["mki", "Dhatki"], ["mkj", "Mokilese"], ["mkk", "Byep"], ["mkl", "Mokole"], ["mkm", "Moklen"], ["mkn", "Kupang Malay"], ["mko", "Mingang Doso"], ["mkp", "Moikodi"], ["mkq", "Bay Miwok"], ["mkr", "Malas"], ["mks", "Silacayoapan Mixtec"], ["mkt", "Vamale"], ["mku", "Konyanka Maninka"], ["mkv", "Mafea"], ["mkw", "Kituba (Congo)"], ["mkx", "Kinamiging Manobo"], ["mky", "East Makian"], ["mkz", "Makasae"], ["mla", "Malo"], ["mlb", "Mbule"], ["mlc", "Cao Lan"], ["mld", "Malakhel"], ["mle", "Manambu"], ["mlf", "Mal"], ["mlh", "Mape"], ["mli", "Malimpung"], ["mlj", "Miltu"], ["mlk", "Ilwana, Kiwilwana"], ["mll", "Malua Bay"], ["mlm", "Mulam"], ["mln", "Malango"], ["mlo", "Mlomp"], ["mlp", "Bargam"], ["mlq", "Western Maninkakan"], ["mlr", "Vame"], ["mls", "Masalit"], ["mlu", "To'abaita"], ["mlv", "Motlav, Mwotlap"], ["mlw", "Moloko"], ["mlx", "Malfaxal, Naha'ai"], ["mlz", "Malaynon"], ["mma", "Mama"], ["mmb", "Momina"], ["mmc", "Michoacán Mazahua"], ["mmd", "Maonan"], ["mme", "Mae"], ["mmf", "Mundat"], ["mmg", "North Ambrym"], ["mmh", "Mehináku"], ["mmi", "Musar"], ["mmj", "Majhwar"], ["mmk", "Mukha-Dora"], ["mml", "Man Met"], ["mmm", "Maii"], ["mmn", "Mamanwa"], ["mmo", "Mangga Buang"], ["mmp", "Siawi"], ["mmq", "Musak"], ["mmr", "Western Xiangxi Miao"], ["mmt", "Malalamai"], ["mmu", "Mmaala"], ["mmv", "Miriti"], ["mmw", "Emae"], ["mmx", "Madak"], ["mmy", "Migaama"], ["mmz", "Mabaale"], ["mna", "Mbula"], ["mnb", "Muna"], ["mnc", "Manchu"], ["mnd", "Mondé"], ["mne", "Naba"], ["mnf", "Mundani"], ["mng", "Eastern Mnong"], ["mnh", "Mono (Democratic Republic of Congo)"], ["mni", "Manipuri"], ["mnj", "Munji"], ["mnk", "Mandinka"], ["mnl", "Tiale"], ["mnm", "Mapena"], ["mnn", "Southern Mnong"], ["mno", "Manobo languages"], ["mnp", "Min Bei Chinese"], ["mnq", "Minriq"], ["mnr", "Mono (USA)"], ["mns", "Mansi"], ["mnt", "Maykulan"], ["mnu", "Mer"], ["mnv", "Rennell-Bellona"], ["mnw", "Mon"], ["mnx", "Manikion"], ["mny", "Manyawa"], ["mnz", "Moni"], ["moa", "Mwan"], ["moc", "Mocoví"], ["mod", "Mobilian"], ["moe", "Innu, Montagnais"], ["mof", "Mohegan-Montauk-Narragansett"], ["mog", "Mongondow"], ["moh", "Mohawk"], ["moi", "Mboi"], ["moj", "Monzombo"], ["mok", "Morori"], ["mom", "Mangue"], ["moo", "Monom"], ["mop", "Mopán Maya"], ["moq", "Mor (Bomberai Peninsula)"], ["mor", "Moro"], ["mos", "Mossi"], ["mot", "Barí"], ["mou", "Mogum"], ["mov", "Mohave"], ["mow", "Moi (Congo)"], ["mox", "Molima"], ["moy", "Shekkacho"], ["moz", "Mukulu, Gergiko"], ["mpa", "Mpoto"], ["mpb", "Malak Malak, Mullukmulluk"], ["mpc", "Mangarrayi"], ["mpd", "Machinere"], ["mpe", "Majang"], ["mpg", "Marba"], ["mph", "Maung"], ["mpi", "Mpade"], ["mpj", "Martu Wangka, Wangkajunga"], ["mpk", "Mbara (Chad)"], ["mpl", "Middle Watut"], ["mpm", "Yosondúa Mixtec"], ["mpn", "Mindiri"], ["mpo", "Miu"], ["mpp", "Migabac"], ["mpq", "Matís"], ["mpr", "Vangunu"], ["mps", "Dadibi"], ["mpt", "Mian"], ["mpu", "Makuráp"], ["mpv", "Mungkip"], ["mpw", "Mapidian"], ["mpx", "Misima-Panaeati"], ["mpy", "Mapia"], ["mpz", "Mpi"], ["mqa", "Maba (Indonesia)"], ["mqb", "Mbuko"], ["mqc", "Mangole"], ["mqe", "Matepi"], ["mqf", "Momuna"], ["mqg", "Kota Bangun Kutai Malay"], ["mqh", "Tlazoyaltepec Mixtec"], ["mqi", "Mariri"], ["mqj", "Mamasa"], ["mqk", "Rajah Kabunsuwan Manobo"], ["mql", "Mbelime"], ["mqm", "South Marquesan"], ["mqn", "Moronene"], ["mqo", "Modole"], ["mqp", "Manipa"], ["mqq", "Minokok"], ["mqr", "Mander"], ["mqs", "West Makian"], ["mqt", "Mok"], ["mqu", "Mandari"], ["mqv", "Mosimo"], ["mqw", "Murupi"], ["mqx", "Mamuju"], ["mqy", "Manggarai"], ["mqz", "Pano"], ["mra", "Mlabri"], ["mrb", "Marino"], ["mrc", "Maricopa"], ["mrd", "Western Magar"], ["mre", "Martha's Vineyard Sign Language"], ["mrf", "Elseng"], ["mrg", "Mising"], ["mrh", "Mara Chin"], ["mrj", "Western Mari"], ["mrk", "Hmwaveke"], ["mrl", "Mortlockese"], ["mrm", "Merlav, Mwerlap"], ["mrn", "Cheke Holo"], ["mro", "Mru"], ["mrp", "Morouas"], ["mrq", "North Marquesan"], ["mrr", "Maria (India)"], ["mrs", "Maragus"], ["mrt", "Marghi Central"], ["mru", "Mono (Cameroon)"], ["mrv", "Mangareva"], ["mrw", "Maranao"], ["mrx", "Maremgi, Dineor"], ["mry", "Mandaya"], ["mrz", "Marind"], ["msb", "Masbatenyo"], ["msc", "Sankaran Maninka"], ["msd", "Yucatec Maya Sign Language"], ["mse", "Musey"], ["msf", "Mekwei"], ["msg", "Moraid"], ["msh", "Masikoro Malagasy"], ["msi", "Sabah Malay"], ["msj", "Ma (Democratic Republic of Congo)"], ["msk", "Mansaka"], ["msl", "Molof, Poule"], ["msm", "Agusan Manobo"], ["msn", "Vurës"], ["mso", "Mombum"], ["msp", "Maritsauá"], ["msq", "Caac"], ["msr", "Mongolian Sign Language"], ["mss", "West Masela"], ["mst", "Cataelano Mandaya"], ["msu", "Musom"], ["msv", "Maslam"], ["msw", "Mansoanka"], ["msx", "Moresada"], ["msy", "Aruamu"], ["msz", "Momare"], ["mta", "Cotabato Manobo"], ["mtb", "Anyin Morofo"], ["mtc", "Munit"], ["mtd", "Mualang"], ["mte", "Mono (Solomon Islands)"], ["mtf", "Murik (Papua New Guinea)"], ["mtg", "Una"], ["mth", "Munggui"], ["mti", "Maiwa (Papua New Guinea)"], ["mtj", "Moskona"], ["mtk", "Mbe'"], ["mtl", "Montol"], ["mtm", "Mator"], ["mtn", "Matagalpa"], ["mto", "Totontepec Mixe"], ["mtp", "Wichí Lhamtés Nocten"], ["mtq", "Muong"], ["mtr", "Mewari"], ["mts", "Yora"], ["mtt", "Mota"], ["mtu", "Tututepec Mixtec"], ["mtv", "Asaro'o"], ["mtw", "Southern Binukidnon"], ["mtx", "Tidaá Mixtec"], ["mty", "Nabi"], ["mua", "Mundang"], ["mub", "Mubi"], ["muc", "Ajumbu"], ["mud", "Mednyj Aleut"], ["mue", "Media Lengua"], ["mug", "Musgu"], ["muh", "Mündü"], ["mui", "Musi"], ["muj", "Mabire"], ["muk", "Mugom"], ["mul", "Multiple languages"], ["mum", "Maiwala"], ["mun", "Munda languages"], ["muo", "Nyong"], ["mup", "Malvi"], ["muq", "Eastern Xiangxi Miao"], ["mur", "Murle"], ["mus", "Creek"], ["mut", "Western Muria"], ["muu", "Yaaku"], ["muv", "Muthuvan"], ["mux", "Bo-Ung"], ["muy", "Muyang"], ["muz", "Mursi"], ["mva", "Manam"], ["mvb", "Mattole"], ["mvd", "Mamboru"], ["mve", "Marwari (Pakistan)"], ["mvf", "Peripheral Mongolian"], ["mvg", "Yucuañe Mixtec"], ["mvh", "Mulgi"], ["mvi", "Miyako"], ["mvk", "Mekmek"], ["mvl", "Mbara (Australia)"], ["mvm", "Muya"], ["mvn", "Minaveha"], ["mvo", "Marovo"], ["mvp", "Duri"], ["mvq", "Moere"], ["mvr", "Marau"], ["mvs", "Massep"], ["mvt", "Mpotovoro"], ["mvu", "Marfa"], ["mvv", "Tagal Murut"], ["mvw", "Machinga"], ["mvx", "Meoswar"], ["mvy", "Indus Kohistani"], ["mvz", "Mesqan"], ["mwa", "Mwatebu"], ["mwb", "Juwal"], ["mwc", "Are"], ["mwd", "Mudbura"], ["mwe", "Mwera (Chimwera)"], ["mwf", "Murrinh-Patha"], ["mwg", "Aiklep"], ["mwh", "Mouk-Aria"], ["mwi", "Labo, Ninde"], ["mwj", "Maligo"], ["mwk", "Kita Maninkakan"], ["mwl", "Mirandese"], ["mwm", "Sar"], ["mwn", "Nyamwanga"], ["mwo", "Central Maewo"], ["mwp", "Kala Lagaw Ya"], ["mwq", "Mün Chin"], ["mwr", "Marwari"], ["mws", "Mwimbi-Muthambi"], ["mwt", "Moken"], ["mwu", "Mittu"], ["mwv", "Mentawai"], ["mww", "Hmong Daw"], ["mwx", "Mediak"], ["mwy", "Mosiro"], ["mwz", "Moingi"], ["mxa", "Northwest Oaxaca Mixtec"], ["mxb", "Tezoatlán Mixtec"], ["mxc", "Manyika"], ["mxd", "Modang"], ["mxe", "Mele-Fila"], ["mxf", "Malgbe"], ["mxg", "Mbangala"], ["mxh", "Mvuba"], ["mxi", "Mozarabic"], ["mxj", "Miju-Mishmi, Geman Deng"], ["mxk", "Monumbo"], ["mxl", "Maxi Gbe"], ["mxm", "Meramera"], ["mxn", "Moi (Indonesia)"], ["mxo", "Mbowe"], ["mxp", "Tlahuitoltepec Mixe"], ["mxq", "Juquila Mixe"], ["mxr", "Murik (Malaysia)"], ["mxs", "Huitepec Mixtec"], ["mxt", "Jamiltepec Mixtec"], ["mxu", "Mada (Cameroon)"], ["mxv", "Metlatónoc Mixtec"], ["mxw", "Namo"], ["mxx", "Mahou, Mawukakan"], ["mxy", "Southeastern Nochixtlán Mixtec"], ["mxz", "Central Masela"], ["myb", "Mbay"], ["myc", "Mayeka"], ["myd", "Maramba"], ["mye", "Myene"], ["myf", "Bambassi"], ["myg", "Manta"], ["myh", "Makah"], ["myi", "Mina (India)"], ["myj", "Mangayat"], ["myk", "Mamara Senoufo"], ["myl", "Moma"], ["mym", "Me'en"], ["myn", "Mayan languages"], ["myo", "Anfillo"], ["myp", "Pirahã"], ["myq", "Forest Maninka"], ["myr", "Muniche"], ["mys", "Mesmes"], ["myt", "Sangab Mandaya"], ["myu", "Mundurukú"], ["myv", "Erzya"], ["myw", "Muyuw"], ["myx", "Masaaba"], ["myy", "Macuna"], ["myz", "Classical Mandaic"], ["mza", "Santa María Zacatepec Mixtec"], ["mzb", "Tumzabt"], ["mzc", "Madagascar Sign Language"], ["mzd", "Malimba"], ["mze", "Morawa"], ["mzg", "Monastic Sign Language"], ["mzh", "Wichí Lhamtés Güisnay"], ["mzi", "Ixcatlán Mazatec"], ["mzj", "Manya"], ["mzk", "Nigeria Mambila"], ["mzl", "Mazatlán Mixe"], ["mzm", "Mumuye"], ["mzn", "Mazanderani"], ["mzo", "Matipuhy"], ["mzp", "Movima"], ["mzq", "Mori Atas"], ["mzr", "Marúbo"], ["mzs", "Macanese"], ["mzt", "Mintil"], ["mzu", "Inapang"], ["mzv", "Manza"], ["mzw", "Deg"], ["mzx", "Mawayana"], ["mzy", "Mozambican Sign Language"], ["mzz", "Maiadomu"], ["naa", "Namla"], ["nab", "Southern Nambikuára"], ["nac", "Narak"], ["nad", "Nijadali"], ["nae", "Naka'ela"], ["naf", "Nabak"], ["nag", "Naga Pidgin"], ["nah", "Nahuatl languages"], ["nai", "North American Indian languages"], ["naj", "Nalu"], ["nak", "Nakanai"], ["nal", "Nalik"], ["nam", "Ngan'gityemerri"], ["nan", "Min Nan Chinese"], ["nao", "Naaba"], ["nap", "Neapolitan"], ["naq", "Khoekhoe, Nama (Namibia)"], ["nar", "Iguta"], ["nas", "Naasioi"], ["nat", "Ca̱hungwa̱rya̱, Hungworo"], ["naw", "Nawuri"], ["nax", "Nakwi"], ["nay", "Ngarrindjeri"], ["naz", "Coatepec Nahuatl"], ["nba", "Nyemba"], ["nbb", "Ndoe"], ["nbc", "Chang Naga"], ["nbd", "Ngbinda"], ["nbe", "Konyak Naga"], ["nbf", "Naxi"], ["nbg", "Nagarchal"], ["nbh", "Ngamo"], ["nbi", "Mao Naga"], ["nbj", "Ngarinyman"], ["nbk", "Nake"], ["nbm", "Ngbaka Ma'bo"], ["nbn", "Kuri"], ["nbo", "Nkukoli"], ["nbp", "Nnam"], ["nbq", "Nggem"], ["nbr", "Numana"], ["nbs", "Namibian Sign Language"], ["nbt", "Na"], ["nbu", "Rongmei Naga"], ["nbv", "Ngamambo"], ["nbw", "Southern Ngbandi"], ["nbx", "Ngura"], ["nby", "Ningera"], ["nca", "Iyo"], ["ncb", "Central Nicobarese"], ["ncc", "Ponam"], ["ncd", "Nachering"], ["nce", "Yale"], ["ncf", "Notsi"], ["ncg", "Nisga'a"], ["nch", "Central Huasteca Nahuatl"], ["nci", "Classical Nahuatl"], ["ncj", "Northern Puebla Nahuatl"], ["nck", "Na-kara"], ["ncl", "Michoacán Nahuatl"], ["ncm", "Nambo"], ["ncn", "Nauna"], ["nco", "Sibe"], ["ncp", "Ndaktup"], ["ncq", "Northern Katang"], ["ncr", "Ncane"], ["ncs", "Nicaraguan Sign Language"], ["nct", "Chothe Naga"], ["ncu", "Chumburung"], ["ncx", "Central Puebla Nahuatl"], ["ncz", "Natchez"], ["nda", "Ndasa"], ["ndb", "Kenswei Nsei"], ["ndc", "Ndau"], ["ndd", "Nde-Nsele-Nta"], ["ndf", "Nadruvian"], ["ndg", "Ndengereko"], ["ndh", "Ndali"], ["ndi", "Samba Leko"], ["ndj", "Ndamba"], ["ndk", "Ndaka"], ["ndl", "Ndolo"], ["ndm", "Ndam"], ["ndn", "Ngundi"], ["ndp", "Ndo"], ["ndq", "Ndombe"], ["ndr", "Ndoola"], ["nds", "Low German, Low Saxon"], ["ndt", "Ndunga"], ["ndu", "Dugun"], ["ndv", "Ndut"], ["ndw", "Ndobo"], ["ndx", "Nduga"], ["ndy", "Lutos"], ["ndz", "Ndogo"], ["nea", "Eastern Ngad'a"], ["neb", "Toura (Côte d'Ivoire)"], ["nec", "Nedebang"], ["ned", "Nde-Gbite"], ["nee", "Nêlêmwa-Nixumwak"], ["nef", "Nefamese"], ["neg", "Negidal"], ["neh", "Nyenkha"], ["nei", "Neo-Hittite"], ["nej", "Neko"], ["nek", "Neku"], ["nem", "Nemi"], ["nen", "Nengone"], ["neo", "Ná-Meo"], ["neq", "North Central Mixe"], ["ner", "Yahadian"], ["nes", "Bhoti Kinnauri"], ["net", "Nete"], ["neu", "Neo"], ["nev", "Nyaheun"], ["new", "Newari, Nepal Bhasa"], ["nex", "Neme"], ["ney", "Neyo"], ["nez", "Nez Perce"], ["nfa", "Dhao"], ["nfd", "Ahwai"], ["nfl", "Ayiwo, Äiwoo"], ["nfr", "Nafaanra"], ["nfu", "Mfumte"], ["nga", "Ngbaka"], ["ngb", "Northern Ngbandi"], ["ngc", "Ngombe (Democratic Republic of Congo)"], ["ngd", "Ngando (Central African Republic)"], ["nge", "Ngemba"], ["ngf", "Trans-New Guinea languages"], ["ngg", "Ngbaka Manza"], ["ngh", "Nǁng"], ["ngi", "Ngizim"], ["ngj", "Ngie"], ["ngk", "Dalabon"], ["ngl", "Lomwe"], ["ngm", "Ngatik Men's Creole"], ["ngn", "Ngwo"], ["ngo", "Ngoni"], ["ngp", "Ngulu"], ["ngq", "Ngurimi, Ngoreme"], ["ngr", "Engdewu"], ["ngs", "Gvoko"], ["ngt", "Kriang, Ngeq"], ["ngu", "Guerrero Nahuatl"], ["ngv", "Nagumi"], ["ngw", "Ngwaba"], ["ngx", "Nggwahyi"], ["ngy", "Tibea"], ["ngz", "Ngungwel"], ["nha", "Nhanda"], ["nhb", "Beng"], ["nhc", "Tabasco Nahuatl"], ["nhd", "Chiripá, Ava Guaraní"], ["nhe", "Eastern Huasteca Nahuatl"], ["nhf", "Nhuwala"], ["nhg", "Tetelcingo Nahuatl"], ["nhh", "Nahari"], ["nhi", "Zacatlán-Ahuacatlán-Tepetzintla Nahuatl"], ["nhk", "Isthmus-Cosoleacaque Nahuatl"], ["nhm", "Morelos Nahuatl"], ["nhn", "Central Nahuatl"], ["nho", "Takuu"], ["nhp", "Isthmus-Pajapan Nahuatl"], ["nhq", "Huaxcaleca Nahuatl"], ["nhr", "Naro"], ["nht", "Ometepec Nahuatl"], ["nhu", "Noone"], ["nhv", "Temascaltepec Nahuatl"], ["nhw", "Western Huasteca Nahuatl"], ["nhx", "Isthmus-Mecayapan Nahuatl"], ["nhy", "Northern Oaxaca Nahuatl"], ["nhz", "Santa María La Alta Nahuatl"], ["nia", "Nias"], ["nib", "Nakame"], ["nic", "Niger-Kordofanian languages"], ["nid", "Ngandi"], ["nie", "Niellim"], ["nif", "Nek"], ["nig", "Ngalakgan"], ["nih", "Nyiha (Tanzania)"], ["nii", "Nii"], ["nij", "Ngaju"], ["nik", "Southern Nicobarese"], ["nil", "Nila"], ["nim", "Nilamba"], ["nin", "Ninzo"], ["nio", "Nganasan"], ["niq", "Nandi"], ["nir", "Nimboran"], ["nis", "Nimi"], ["nit", "Southeastern Kolami"], ["niu", "Niuean"], ["niv", "Gilyak"], ["niw", "Nimo"], ["nix", "Hema"], ["niy", "Ngiti"], ["niz", "Ningil"], ["nja", "Nzanyi"], ["njb", "Nocte Naga"], ["njd", "Ndonde Hamba"], ["njh", "Lotha Naga"], ["nji", "Gudanji"], ["njj", "Njen"], ["njl", "Njalgulgule"], ["njm", "Angami Naga"], ["njn", "Liangmai Naga"], ["njo", "Ao Naga"], ["njr", "Njerep"], ["njs", "Nisa"], ["njt", "Ndyuka-Trio Pidgin"], ["nju", "Ngadjunmaya"], ["njx", "Kunyi"], ["njy", "Njyem"], ["njz", "Nyishi"], ["nka", "Nkoya"], ["nkb", "Khoibu Naga"], ["nkc", "Nkongho"], ["nkd", "Koireng"], ["nke", "Duke"], ["nkf", "Inpui Naga"], ["nkg", "Nekgini"], ["nkh", "Khezha Naga"], ["nki", "Thangal Naga"], ["nkj", "Nakai"], ["nkk", "Nokuku"], ["nkm", "Namat"], ["nkn", "Nkangala"], ["nko", "Nkonya"], ["nkp", "Niuatoputapu"], ["nkq", "Nkami"], ["nkr", "Nukuoro"], ["nks", "North Asmat"], ["nkt", "Nyika (Tanzania)"], ["nku", "Bouna Kulango"], ["nkv", "Nyika (Malawi and Zambia)"], ["nkw", "Nkutu"], ["nkx", "Nkoroo"], ["nkz", "Nkari"], ["nla", "Ngombale"], ["nlc", "Nalca"], ["nle", "East Nyala"], ["nlg", "Gela"], ["nli", "Grangali"], ["nlj", "Nyali"], ["nlk", "Ninia Yali"], ["nll", "Nihali"], ["nlm", "Mankiyali"], ["nln", "Durango Nahuatl"], ["nlo", "Ngul"], ["nlq", "Lao Naga"], ["nlr", "Ngarla"], ["nlu", "Nchumbulu"], ["nlv", "Orizaba Nahuatl"], ["nlw", "Walangama"], ["nlx", "Nahali"], ["nly", "Nyamal"], ["nlz", "Nalögo"], ["nma", "Maram Naga"], ["nmb", "Big Nambas, V'ënen Taut"], ["nmc", "Ngam"], ["nmd", "Ndumu"], ["nme", "Mzieme Naga"], ["nmf", "Tangkhul Naga (India)"], ["nmg", "Kwasio"], ["nmh", "Monsang Naga"], ["nmi", "Nyam"], ["nmj", "Ngombe (Central African Republic)"], ["nmk", "Namakura"], ["nml", "Ndemli"], ["nmm", "Manangba"], ["nmn", "ǃXóõ"], ["nmo", "Moyon Naga"], ["nmp", "Nimanbur"], ["nmq", "Nambya"], ["nmr", "Nimbari"], ["nms", "Letemboi"], ["nmt", "Namonuito"], ["nmu", "Northeast Maidu"], ["nmv", "Ngamini"], ["nmw", "Nimoa, Rifao"], ["nmx", "Nama (Papua New Guinea)"], ["nmy", "Namuyi"], ["nmz", "Nawdm"], ["nna", "Nyangumarta"], ["nnb", "Nande"], ["nnc", "Nancere"], ["nnd", "West Ambae"], ["nne", "Ngandyera"], ["nnf", "Ngaing"], ["nng", "Maring Naga"], ["nnh", "Ngiemboon"], ["nni", "North Nuaulu"], ["nnj", "Nyangatom"], ["nnk", "Nankina"], ["nnl", "Northern Rengma Naga"], ["nnm", "Namia"], ["nnn", "Ngete"], ["nnp", "Wancho Naga"], ["nnq", "Ngindo"], ["nnr", "Narungga"], ["nns", "Ningye"], ["nnt", "Nanticoke"], ["nnu", "Dwang"], ["nnv", "Nugunu (Australia)"], ["nnw", "Southern Nuni"], ["nnx", "Ngong"], ["nny", "Nyangga"], ["nnz", "Nda'nda'"], ["noa", "Woun Meu"], ["noc", "Nuk"], ["nod", "Northern Thai"], ["noe", "Nimadi"], ["nof", "Nomane"], ["nog", "Nogai"], ["noh", "Nomu"], ["noi", "Noiri"], ["noj", "Nonuya"], ["nok", "Nooksack"], ["nol", "Nomlaki"], ["nom", "Nocamán"], ["non", "Old Norse"], ["noo", "Nootka"], ["nop", "Numanggang"], ["noq", "Ngongo"], ["nos", "Eastern Nisu"], ["not", "Nomatsiguenga"], ["nou", "Ewage-Notu"], ["nov", "Novial"], ["now", "Nyambo"], ["noy", "Noy"], ["noz", "Nayi"], ["npa", "Nar Phu"], ["npb", "Nupbikha"], ["npg", "Ponyo-Gongwang Naga"], ["nph", "Phom Naga"], ["npi", "Nepali (individual language)"], ["npl", "Southeastern Puebla Nahuatl"], ["npn", "Mondropolon"], ["npo", "Pochuri Naga"], ["nps", "Nipsan"], ["npu", "Puimei Naga"], ["npx", "Noipx"], ["npy", "Napu"], ["nqg", "Southern Nago"], ["nqk", "Kura Ede Nago"], ["nql", "Ngendelengo"], ["nqm", "Ndom"], ["nqn", "Nen"], ["nqo", "N'Ko, N’Ko"], ["nqq", "Kyan-Karyaw Naga"], ["nqt", "Nteng"], ["nqy", "Akyaung Ari Naga"], ["nra", "Ngom"], ["nrb", "Nara"], ["nrc", "Noric"], ["nre", "Southern Rengma Naga"], ["nrf", "Jèrriais, Guernésiais"], ["nrg", "Narango"], ["nri", "Chokri Naga"], ["nrk", "Ngarla"], ["nrl", "Ngarluma"], ["nrm", "Narom"], ["nrn", "Norn"], ["nrp", "North Picene"], ["nrr", "Norra, Nora"], ["nrt", "Northern Kalapuya"], ["nru", "Narua"], ["nrx", "Ngurmbur"], ["nrz", "Lala"], ["nsa", "Sangtam Naga"], ["nsb", "Lower Nossob"], ["nsc", "Nshi"], ["nsd", "Southern Nisu"], ["nse", "Nsenga"], ["nsf", "Northwestern Nisu"], ["nsg", "Ngasa"], ["nsh", "Ngoshie"], ["nsi", "Nigerian Sign Language"], ["nsk", "Naskapi"], ["nsl", "Norwegian Sign Language"], ["nsm", "Sumi Naga"], ["nsn", "Nehan"], ["nso", "Pedi, Northern Sotho, Sepedi"], ["nsp", "Nepalese Sign Language"], ["nsq", "Northern Sierra Miwok"], ["nsr", "Maritime Sign Language"], ["nss", "Nali"], ["nst", "Tase Naga"], ["nsu", "Sierra Negra Nahuatl"], ["nsv", "Southwestern Nisu"], ["nsw", "Navut"], ["nsx", "Nsongo"], ["nsy", "Nasal"], ["nsz", "Nisenan"], ["ntd", "Northern Tidung"], ["nte", "Nathembo"], ["ntg", "Ngantangarra"], ["nti", "Natioro"], ["ntj", "Ngaanyatjarra"], ["ntk", "Ikoma-Nata-Isenye"], ["ntm", "Nateni"], ["nto", "Ntomba"], ["ntp", "Northern Tepehuan"], ["ntr", "Delo"], ["nts", "Natagaimas"], ["ntu", "Natügu"], ["ntw", "Nottoway"], ["ntx", "Tangkhul Naga (Myanmar)"], ["nty", "Mantsi"], ["ntz", "Natanzi"], ["nua", "Yuanga"], ["nub", "Nubian languages"], ["nuc", "Nukuini"], ["nud", "Ngala"], ["nue", "Ngundu"], ["nuf", "Nusu"], ["nug", "Nungali"], ["nuh", "Ndunda"], ["nui", "Ngumbi"], ["nuj", "Nyole"], ["nuk", "Nuu-chah-nulth, Nuuchahnulth"], ["nul", "Nusa Laut"], ["num", "Niuafo'ou"], ["nun", "Anong"], ["nuo", "Nguôn"], ["nup", "Nupe-Nupe-Tako"], ["nuq", "Nukumanu"], ["nur", "Nukuria"], ["nus", "Nuer"], ["nut", "Nung (Viet Nam)"], ["nuu", "Ngbundu"], ["nuv", "Northern Nuni"], ["nuw", "Nguluwan"], ["nux", "Mehek"], ["nuy", "Nunggubuyu"], ["nuz", "Tlamacazapa Nahuatl"], ["nvh", "Nasarian"], ["nvm", "Namiae"], ["nvo", "Nyokon"], ["nwa", "Nawathinehena"], ["nwb", "Nyabwa"], ["nwc", "Classical Newari, Classical Nepal Bhasa, Old Newari"], ["nwe", "Ngwe"], ["nwg", "Ngayawung"], ["nwi", "Southwest Tanna"], ["nwm", "Nyamusa-Molo"], ["nwo", "Nauo"], ["nwr", "Nawaru"], ["nwx", "Middle Newar"], ["nwy", "Nottoway-Meherrin"], ["nxa", "Nauete"], ["nxd", "Ngando (Democratic Republic of Congo)"], ["nxe", "Nage"], ["nxg", "Ngad'a"], ["nxi", "Nindi"], ["nxk", "Koki Naga"], ["nxl", "South Nuaulu"], ["nxm", "Numidian"], ["nxn", "Ngawun"], ["nxo", "Ndambomo"], ["nxq", "Naxi"], ["nxr", "Ninggerum"], ["nxu", "Narau"], ["nxx", "Nafri"], ["nyb", "Nyangbo"], ["nyc", "Nyanga-li"], ["nyd", "Nyore, Olunyole"], ["nye", "Nyengo"], ["nyf", "Giryama, Kigiryama"], ["nyg", "Nyindu"], ["nyh", "Nyikina"], ["nyi", "Ama (Sudan)"], ["nyj", "Nyanga"], ["nyk", "Nyaneka"], ["nyl", "Nyeu"], ["nym", "Nyamwezi"], ["nyn", "Nyankole"], ["nyo", "Nyoro"], ["nyp", "Nyang'i"], ["nyq", "Nayini"], ["nyr", "Nyiha (Malawi)"], ["nys", "Nyungar"], ["nyt", "Nyawaygi"], ["nyu", "Nyungwe"], ["nyv", "Nyulnyul"], ["nyw", "Nyaw"], ["nyx", "Nganyaywana"], ["nyy", "Nyakyusa-Ngonde"], ["nza", "Tigon Mbembe"], ["nzb", "Njebi"], ["nzd", "Nzadi"], ["nzi", "Nzima"], ["nzk", "Nzakara"], ["nzm", "Zeme Naga"], ["nzs", "New Zealand Sign Language"], ["nzu", "Teke-Nzikou"], ["nzy", "Nzakambay"], ["nzz", "Nanga Dama Dogon"], ["oaa", "Orok"], ["oac", "Oroch"], ["oar", "Old Aramaic (up to 700 BCE), Ancient Aramaic (up to 700 BCE)"], ["oav", "Old Avar"], ["obi", "Obispeño"], ["obk", "Southern Bontok"], ["obl", "Oblo"], ["obm", "Moabite"], ["obo", "Obo Manobo"], ["obr", "Old Burmese"], ["obt", "Old Breton"], ["obu", "Obulom"], ["oca", "Ocaina"], ["och", "Old Chinese"], ["ocm", "Old Cham"], ["oco", "Old Cornish"], ["ocu", "Atzingo Matlatzinca"], ["oda", "Odut"], ["odk", "Od"], ["odt", "Old Dutch"], ["odu", "Odual"], ["ofo", "Ofo"], ["ofs", "Old Frisian"], ["ofu", "Efutop"], ["ogb", "Ogbia"], ["ogc", "Ogbah"], ["oge", "Old Georgian"], ["ogg", "Ogbogolo"], ["ogo", "Khana"], ["ogu", "Ogbronuagum"], ["oht", "Old Hittite"], ["ohu", "Old Hungarian"], ["oia", "Oirata"], ["oin", "Inebu One"], ["ojb", "Northwestern Ojibwa"], ["ojc", "Central Ojibwa"], ["ojg", "Eastern Ojibwa"], ["ojp", "Old Japanese"], ["ojs", "Severn Ojibwa"], ["ojv", "Ontong Java"], ["ojw", "Western Ojibwa"], ["oka", "Okanagan"], ["okb", "Okobo"], ["okc", "Kobo"], ["okd", "Okodia"], ["oke", "Okpe (Southwestern Edo)"], ["okg", "Koko Babangk"], ["okh", "Koresh-e Rostam"], ["oki", "Okiek"], ["okj", "Oko-Juwoi"], ["okk", "Kwamtim One"], ["okl", "Old Kentish Sign Language"], ["okm", "Middle Korean (10th-16th cent.)"], ["okn", "Oki-No-Erabu"], ["oko", "Old Korean (3rd-9th cent.)"], ["okr", "Kirike"], ["oks", "Oko-Eni-Osayen"], ["oku", "Oku"], ["okv", "Orokaiva"], ["okx", "Okpe (Northwestern Edo)"], ["okz", "Old Khmer"], ["ola", "Walungge"], ["old", "Mochi"], ["ole", "Olekha"], ["olk", "Olkol"], ["olm", "Oloma"], ["olo", "Livvi"], ["olr", "Olrat"], ["olt", "Old Lithuanian"], ["olu", "Kuvale"], ["oma", "Omaha-Ponca"], ["omb", "East Ambae"], ["omc", "Mochica"], ["ome", "Omejes"], ["omg", "Omagua"], ["omi", "Omi"], ["omk", "Omok"], ["oml", "Ombo"], ["omn", "Minoan"], ["omo", "Utarmbung"], ["omp", "Old Manipuri"], ["omq", "Oto-Manguean languages"], ["omr", "Old Marathi"], ["omt", "Omotik"], ["omu", "Omurano"], ["omv", "Omotic languages"], ["omw", "South Tairora"], ["omx", "Old Mon"], ["omy", "Old Malay"], ["ona", "Ona"], ["onb", "Lingao"], ["one", "Oneida"], ["ong", "Olo"], ["oni", "Onin"], ["onj", "Onjob"], ["onk", "Kabore One"], ["onn", "Onobasulu"], ["ono", "Onondaga"], ["onp", "Sartang"], ["onr", "Northern One"], ["ons", "Ono"], ["ont", "Ontenu"], ["onu", "Unua"], ["onw", "Old Nubian"], ["onx", "Onin Based Pidgin"], ["ood", "Tohono O'odham"], ["oog", "Ong"], ["oon", "Önge"], ["oor", "Oorlams"], ["oos", "Old Ossetic"], ["opa", "Okpamheri"], ["opk", "Kopkaka"], ["opm", "Oksapmin"], ["opo", "Opao"], ["opt", "Opata"], ["opy", "Ofayé"], ["ora", "Oroha"], ["orc", "Orma"], ["ore", "Orejón"], ["org", "Oring"], ["orh", "Oroqen"], ["orn", "Orang Kanaq"], ["oro", "Orokolo"], ["orr", "Oruma"], ["ors", "Orang Seletar"], ["ort", "Adivasi Oriya"], ["oru", "Ormuri"], ["orv", "Old Russian"], ["orw", "Oro Win"], ["orx", "Oro"], ["ory", "Odia (individual language), Oriya (individual language)"], ["orz", "Ormu"], ["osa", "Osage"], ["osc", "Oscan"], ["osi", "Osing"], ["osn", "Old Sundanese"], ["oso", "Ososo"], ["osp", "Old Spanish"], ["ost", "Osatu"], ["osu", "Southern One"], ["osx", "Old Saxon"], ["ota", "Ottoman Turkish (1500-1928)"], ["otb", "Old Tibetan"], ["otd", "Ot Danum"], ["ote", "Mezquital Otomi"], ["oti", "Oti"], ["otk", "Old Turkish"], ["otl", "Tilapa Otomi"], ["otm", "Eastern Highland Otomi"], ["otn", "Tenango Otomi"], ["oto", "Otomian languages"], ["otq", "Querétaro Otomi"], ["otr", "Otoro"], ["ots", "Estado de México Otomi"], ["ott", "Temoaya Otomi"], ["otu", "Otuke"], ["otw", "Ottawa"], ["otx", "Texcatepec Otomi"], ["oty", "Old Tamil"], ["otz", "Ixtenco Otomi"], ["oua", "Tagargrent"], ["oub", "Glio-Oubi"], ["oue", "Oune"], ["oui", "Old Uighur"], ["oum", "Ouma"], ["oun", "ǃOǃung"], ["ovd", "Elfdalian, Övdalian"], ["owi", "Owiniga"], ["owl", "Old Welsh"], ["oyb", "Oy"], ["oyd", "Oyda"], ["oym", "Wayampi"], ["oyy", "Oya'oya"], ["ozm", "Koonzime"], ["paa", "Papuan languages"], ["pab", "Parecís"], ["pac", "Pacoh"], ["pad", "Paumarí"], ["pae", "Pagibete"], ["paf", "Paranawát"], ["pag", "Pangasinan"], ["pah", "Tenharim"], ["pai", "Pe"], ["pak", "Parakanã"], ["pal", "Pahlavi"], ["pam", "Pampanga, Kapampangan"], ["pao", "Northern Paiute"], ["pap", "Papiamento"], ["paq", "Parya"], ["par", "Panamint, Timbisha"], ["pas", "Papasena"], ["pat", "Papitalai"], ["pau", "Palauan"], ["pav", "Pakaásnovos"], ["paw", "Pawnee"], ["pax", "Pankararé"], ["pay", "Pech"], ["paz", "Pankararú"], ["pbb", "Páez"], ["pbc", "Patamona"], ["pbe", "Mezontla Popoloca"], ["pbf", "Coyotepec Popoloca"], ["pbg", "Paraujano"], ["pbh", "E'ñapa Woromaipu"], ["pbi", "Parkwa"], ["pbl", "Mak (Nigeria)"], ["pbm", "Puebla Mazatec"], ["pbn", "Kpasam"], ["pbo", "Papel"], ["pbp", "Badyara"], ["pbr", "Pangwa"], ["pbs", "Central Pame"], ["pbt", "Southern Pashto"], ["pbu", "Northern Pashto"], ["pbv", "Pnar"], ["pby", "Pyu (Papua New Guinea)"], ["pbz", "Palu"], ["pca", "Santa Inés Ahuatempan Popoloca"], ["pcb", "Pear"], ["pcc", "Bouyei"], ["pcd", "Picard"], ["pce", "Ruching Palaung"], ["pcf", "Paliyan"], ["pcg", "Paniya"], ["pch", "Pardhan"], ["pci", "Duruwa"], ["pcj", "Parenga"], ["pck", "Paite Chin"], ["pcl", "Pardhi"], ["pcm", "Nigerian Pidgin"], ["pcn", "Piti"], ["pcp", "Pacahuara"], ["pcr", "Panang"], ["pcw", "Pyapun"], ["pda", "Anam"], ["pdc", "Pennsylvania German"], ["pdi", "Pa Di"], ["pdn", "Podena, Fedan"], ["pdo", "Padoe"], ["pdt", "Plautdietsch"], ["pdu", "Kayan"], ["pea", "Peranakan Indonesian"], ["peb", "Eastern Pomo"], ["ped", "Mala (Papua New Guinea)"], ["pee", "Taje"], ["pef", "Northeastern Pomo"], ["peg", "Pengo"], ["peh", "Bonan"], ["pei", "Chichimeca-Jonaz"], ["pej", "Northern Pomo"], ["pek", "Penchal"], ["pel", "Pekal"], ["pem", "Phende"], ["peo", "Old Persian (ca. 600-400 B.C.)"], ["pep", "Kunja"], ["peq", "Southern Pomo"], ["pes", "Iranian Persian"], ["pev", "Pémono"], ["pex", "Petats"], ["pey", "Petjo"], ["pez", "Eastern Penan"], ["pfa", "Pááfang"], ["pfe", "Pere"], ["pfl", "Pfaelzisch"], ["pga", "Sudanese Creole Arabic"], ["pgd", "Gāndhārī"], ["pgg", "Pangwali"], ["pgi", "Pagi"], ["pgk", "Rerep"], ["pgl", "Primitive Irish"], ["pgn", "Paelignian"], ["pgs", "Pangseng"], ["pgu", "Pagu"], ["pgy", "Pongyong"], ["pgz", "Papua New Guinean Sign Language"], ["pha", "Pa-Hng"], ["phd", "Phudagi"], ["phg", "Phuong"], ["phh", "Phukha"], ["phi", "Philippine languages"], ["phk", "Phake"], ["phl", "Phalura, Palula"], ["phm", "Phimbi"], ["phn", "Phoenician"], ["pho", "Phunoi"], ["phq", "Phana'"], ["phr", "Pahari-Potwari"], ["pht", "Phu Thai"], ["phu", "Phuan"], ["phv", "Pahlavani"], ["phw", "Phangduwali"], ["pia", "Pima Bajo"], ["pib", "Yine"], ["pic", "Pinji"], ["pid", "Piaroa"], ["pie", "Piro"], ["pif", "Pingelapese"], ["pig", "Pisabo"], ["pih", "Pitcairn-Norfolk"], ["pii", "Pini"], ["pij", "Pijao"], ["pil", "Yom"], ["pim", "Powhatan"], ["pin", "Piame"], ["pio", "Piapoco"], ["pip", "Pero"], ["pir", "Piratapuyo"], ["pis", "Pijin"], ["pit", "Pitta Pitta"], ["piu", "Pintupi-Luritja"], ["piv", "Pileni, Vaeakau-Taumako"], ["piw", "Pimbwe"], ["pix", "Piu"], ["piy", "Piya-Kwonci"], ["piz", "Pije"], ["pjt", "Pitjantjatjara"], ["pka", "Ardhamāgadhī Prākrit"], ["pkb", "Pokomo, Kipfokomo"], ["pkc", "Paekche"], ["pkg", "Pak-Tong"], ["pkh", "Pankhu"], ["pkn", "Pakanha"], ["pko", "Pökoot"], ["pkp", "Pukapuka"], ["pkr", "Attapady Kurumba"], ["pks", "Pakistan Sign Language"], ["pkt", "Maleng"], ["pku", "Paku"], ["pla", "Miani"], ["plb", "Polonombauk"], ["plc", "Central Palawano"], ["pld", "Polari"], ["ple", "Palu'e"], ["plf", "Central Malayo-Polynesian languages"], ["plg", "Pilagá"], ["plh", "Paulohi"], ["plj", "Polci"], ["plk", "Kohistani Shina"], ["pll", "Shwe Palaung"], ["pln", "Palenquero"], ["plo", "Oluta Popoluca"], ["plp", "Palpa"], ["plq", "Palaic"], ["plr", "Palaka Senoufo"], ["pls", "San Marcos Tlacoyalco Popoloca, San Marcos Tlalcoyalco Popoloca"], ["plt", "Plateau Malagasy"], ["plu", "Palikúr"], ["plv", "Southwest Palawano"], ["plw", "Brooke's Point Palawano"], ["ply", "Bolyu"], ["plz", "Paluan"], ["pma", "Paama"], ["pmb", "Pambia"], ["pmc", "Palumata"], ["pmd", "Pallanganmiddang"], ["pme", "Pwaamei"], ["pmf", "Pamona"], ["pmh", "Māhārāṣṭri Prākrit"], ["pmi", "Northern Pumi"], ["pmj", "Southern Pumi"], ["pmk", "Pamlico"], ["pml", "Lingua Franca"], ["pmm", "Pomo"], ["pmn", "Pam"], ["pmo", "Pom"], ["pmq", "Northern Pame"], ["pmr", "Paynamar"], ["pms", "Piemontese"], ["pmt", "Tuamotuan"], ["pmu", "Mirpur Panjabi"], ["pmw", "Plains Miwok"], ["pmx", "Poumei Naga"], ["pmy", "Papuan Malay"], ["pmz", "Southern Pame"], ["pna", "Punan Bah-Biau"], ["pnb", "Western Panjabi"], ["pnc", "Pannei"], ["pnd", "Mpinda"], ["pne", "Western Penan"], ["png", "Pangu, Pongu"], ["pnh", "Penrhyn"], ["pni", "Aoheng"], ["pnj", "Pinjarup"], ["pnk", "Paunaka"], ["pnl", "Paleni"], ["pnm", "Punan Batu 1"], ["pnn", "Pinai-Hagahai"], ["pno", "Panobo"], ["pnp", "Pancana"], ["pnq", "Pana (Burkina Faso)"], ["pnr", "Panim"], ["pns", "Ponosakan"], ["pnt", "Pontic"], ["pnu", "Jiongnai Bunu"], ["pnv", "Pinigura"], ["pnw", "Banyjima, Panytyima"], ["pnx", "Phong-Kniang"], ["pny", "Pinyin"], ["pnz", "Pana (Central African Republic)"], ["poc", "Poqomam"], ["pod", "Ponares"], ["poe", "San Juan Atzingo Popoloca"], ["pof", "Poke"], ["pog", "Potiguára"], ["poh", "Poqomchi'"], ["poi", "Highland Popoluca"], ["pok", "Pokangá"], ["pom", "Southeastern Pomo"], ["pon", "Pohnpeian"], ["poo", "Central Pomo"], ["pop", "Pwapwâ"], ["poq", "Texistepec Popoluca"], ["pos", "Sayula Popoluca"], ["pot", "Potawatomi"], ["pov", "Upper Guinea Crioulo"], ["pow", "San Felipe Otlaltepec Popoloca"], ["pox", "Polabian"], ["poy", "Pogolo"], ["poz", "Malayo-Polynesian languages"], ["ppa", "Pao"], ["ppe", "Papi"], ["ppi", "Paipai"], ["ppk", "Uma"], ["ppl", "Pipil, Nicarao"], ["ppm", "Papuma"], ["ppn", "Papapana"], ["ppo", "Folopa"], ["ppp", "Pelende"], ["ppq", "Pei"], ["ppr", "Piru"], ["pps", "San Luís Temalacayuca Popoloca"], ["ppt", "Pare"], ["ppu", "Papora"], ["pqa", "Pa'a"], ["pqe", "Eastern Malayo-Polynesian languages"], ["pqm", "Malecite-Passamaquoddy"], ["pqw", "Western Malayo-Polynesian languages"], ["pra", "Prakrit languages"], ["prb", "Lua'"], ["prc", "Parachi"], ["prd", "Parsi-Dari"], ["pre", "Principense"], ["prf", "Paranan"], ["prg", "Prussian"], ["prh", "Porohanon"], ["pri", "Paicî"], ["prk", "Parauk"], ["prl", "Peruvian Sign Language"], ["prm", "Kibiri"], ["prn", "Prasuni"], ["pro", "Old Provençal (to 1500), Old Occitan (to 1500)"], ["prp", "Parsi"], ["prq", "Ashéninka Perené"], ["prr", "Puri"], ["prs", "Dari, Afghan Persian"], ["prt", "Phai"], ["pru", "Puragi"], ["prw", "Parawen"], ["prx", "Purik"], ["pry", "Pray 3"], ["prz", "Providencia Sign Language"], ["psa", "Asue Awyu"], ["psc", "Persian Sign Language"], ["psd", "Plains Indian Sign Language"], ["pse", "Central Malay"], ["psg", "Penang Sign Language"], ["psh", "Southwest Pashai, Southwest Pashayi"], ["psi", "Southeast Pashai, Southeast Pashayi"], ["psl", "Puerto Rican Sign Language"], ["psm", "Pauserna"], ["psn", "Panasuan"], ["pso", "Polish Sign Language"], ["psp", "Philippine Sign Language"], ["psq", "Pasi"], ["psr", "Portuguese Sign Language"], ["pss", "Kaulong"], ["pst", "Central Pashto"], ["psu", "Sauraseni Prākrit"], ["psw", "Port Sandwich"], ["psy", "Piscataway"], ["pta", "Pai Tavytera"], ["pth", "Pataxó Hã-Ha-Hãe"], ["pti", "Pindiini, Wangkatha"], ["ptn", "Patani"], ["pto", "Zo'é"], ["ptp", "Patep"], ["ptq", "Pattapu"], ["ptr", "Piamatsina"], ["ptt", "Enrekang"], ["ptu", "Bambam"], ["ptv", "Port Vato"], ["ptw", "Pentlatch"], ["pty", "Pathiya"], ["pua", "Western Highland Purepecha"], ["pub", "Purum"], ["puc", "Punan Merap"], ["pud", "Punan Aput"], ["pue", "Puelche"], ["puf", "Punan Merah"], ["pug", "Phuie"], ["pui", "Puinave"], ["puj", "Punan Tubu"], ["puk", "Pu Ko"], ["pum", "Puma"], ["puo", "Puoc"], ["pup", "Pulabu"], ["puq", "Puquina"], ["pur", "Puruborá"], ["put", "Putoh"], ["puu", "Punu"], ["puw", "Puluwatese"], ["pux", "Puare"], ["puy", "Purisimeño"], ["puz", "Purum Naga"], ["pwa", "Pawaia"], ["pwb", "Panawa"], ["pwg", "Gapapaiwa"], ["pwi", "Patwin"], ["pwm", "Molbog"], ["pwn", "Paiwan"], ["pwo", "Pwo Western Karen"], ["pwr", "Powari"], ["pww", "Pwo Northern Karen"], ["pxm", "Quetzaltepec Mixe"], ["pye", "Pye Krumen"], ["pym", "Fyam"], ["pyn", "Poyanáwa"], ["pys", "Paraguayan Sign Language, Lengua de Señas del Paraguay"], ["pyu", "Puyuma"], ["pyx", "Pyu (Myanmar)"], ["pyy", "Pyen"], ["pzn", "Para Naga"], ["qaa..qtz", "Private use"], ["qua", "Quapaw"], ["qub", "Huallaga Huánuco Quechua"], ["quc", "K'iche', Quiché"], ["qud", "Calderón Highland Quichua"], ["quf", "Lambayeque Quechua"], ["qug", "Chimborazo Highland Quichua"], ["quh", "South Bolivian Quechua"], ["qui", "Quileute"], ["quk", "Chachapoyas Quechua"], ["qul", "North Bolivian Quechua"], ["qum", "Sipacapense"], ["qun", "Quinault"], ["qup", "Southern Pastaza Quechua"], ["quq", "Quinqui"], ["qur", "Yanahuanca Pasco Quechua"], ["qus", "Santiago del Estero Quichua"], ["quv", "Sacapulteco"], ["quw", "Tena Lowland Quichua"], ["qux", "Yauyos Quechua"], ["quy", "Ayacucho Quechua"], ["quz", "Cusco Quechua"], ["qva", "Ambo-Pasco Quechua"], ["qvc", "Cajamarca Quechua"], ["qve", "Eastern Apurímac Quechua"], ["qvh", "Huamalíes-Dos de Mayo Huánuco Quechua"], ["qvi", "Imbabura Highland Quichua"], ["qvj", "Loja Highland Quichua"], ["qvl", "Cajatambo North Lima Quechua"], ["qvm", "Margos-Yarowilca-Lauricocha Quechua"], ["qvn", "North Junín Quechua"], ["qvo", "Napo Lowland Quechua"], ["qvp", "Pacaraos Quechua"], ["qvs", "San Martín Quechua"], ["qvw", "Huaylla Wanca Quechua"], ["qvy", "Queyu"], ["qvz", "Northern Pastaza Quichua"], ["qwa", "Corongo Ancash Quechua"], ["qwc", "Classical Quechua"], ["qwe", "Quechuan (family)"], ["qwh", "Huaylas Ancash Quechua"], ["qwm", "Kuman (Russia)"], ["qws", "Sihuas Ancash Quechua"], ["qwt", "Kwalhioqua-Tlatskanai"], ["qxa", "Chiquián Ancash Quechua"], ["qxc", "Chincha Quechua"], ["qxh", "Panao Huánuco Quechua"], ["qxl", "Salasaca Highland Quichua"], ["qxn", "Northern Conchucos Ancash Quechua"], ["qxo", "Southern Conchucos Ancash Quechua"], ["qxp", "Puno Quechua"], ["qxq", "Qashqa'i"], ["qxr", "Cañar Highland Quichua"], ["qxs", "Southern Qiang"], ["qxt", "Santa Ana de Tusi Pasco Quechua"], ["qxu", "Arequipa-La Unión Quechua"], ["qxw", "Jauja Wanca Quechua"], ["qya", "Quenya"], ["qyp", "Quiripi"], ["raa", "Dungmali"], ["rab", "Camling"], ["rac", "Rasawa"], ["rad", "Rade"], ["raf", "Western Meohang"], ["rag", "Logooli, Lulogooli"], ["rah", "Rabha"], ["rai", "Ramoaaina"], ["raj", "Rajasthani"], ["rak", "Tulu-Bohuai"], ["ral", "Ralte"], ["ram", "Canela"], ["ran", "Riantana"], ["rao", "Rao"], ["rap", "Rapanui"], ["raq", "Saam"], ["rar", "Rarotongan, Cook Islands Maori"], ["ras", "Tegali"], ["rat", "Razajerdi"], ["rau", "Raute"], ["rav", "Sampang"], ["raw", "Rawang"], ["rax", "Rang"], ["ray", "Rapa"], ["raz", "Rahambuu"], ["rbb", "Rumai Palaung"], ["rbk", "Northern Bontok"], ["rbl", "Miraya Bikol"], ["rbp", "Barababaraba"], ["rcf", "Réunion Creole French"], ["rdb", "Rudbari"], ["rea", "Rerau"], ["reb", "Rembong"], ["ree", "Rejang Kayan"], ["reg", "Kara (Tanzania)"], ["rei", "Reli"], ["rej", "Rejang"], ["rel", "Rendille"], ["rem", "Remo"], ["ren", "Rengao"], ["rer", "Rer Bare"], ["res", "Reshe"], ["ret", "Retta"], ["rey", "Reyesano"], ["rga", "Roria"], ["rge", "Romano-Greek"], ["rgk", "Rangkas"], ["rgn", "Romagnol"], ["rgr", "Resígaro"], ["rgs", "Southern Roglai"], ["rgu", "Ringgou"], ["rhg", "Rohingya"], ["rhp", "Yahang"], ["ria", "Riang (India)"], ["rie", "Rien"], ["rif", "Tarifit"], ["ril", "Riang Lang, Riang (Myanmar)"], ["rim", "Nyaturu"], ["rin", "Nungu"], ["rir", "Ribun"], ["rit", "Ritharrngu"], ["riu", "Riung"], ["rjg", "Rajong"], ["rji", "Raji"], ["rjs", "Rajbanshi"], ["rka", "Kraol"], ["rkb", "Rikbaktsa"], ["rkh", "Rakahanga-Manihiki"], ["rki", "Rakhine"], ["rkm", "Marka"], ["rkt", "Rangpuri, Kamta"], ["rkw", "Arakwal"], ["rma", "Rama"], ["rmb", "Rembarrnga"], ["rmc", "Carpathian Romani"], ["rmd", "Traveller Danish"], ["rme", "Angloromani"], ["rmf", "Kalo Finnish Romani"], ["rmg", "Traveller Norwegian"], ["rmh", "Murkim"], ["rmi", "Lomavren"], ["rmk", "Romkun"], ["rml", "Baltic Romani"], ["rmm", "Roma"], ["rmn", "Balkan Romani"], ["rmo", "Sinte Romani"], ["rmp", "Rempi"], ["rmq", "Caló"], ["rmr", "Caló"], ["rms", "Romanian Sign Language"], ["rmt", "Domari"], ["rmu", "Tavringer Romani"], ["rmv", "Romanova"], ["rmw", "Welsh Romani"], ["rmx", "Romam"], ["rmy", "Vlax Romani"], ["rmz", "Marma"], ["rna", "Runa"], ["rnd", "Ruund"], ["rng", "Ronga"], ["rnl", "Ranglong"], ["rnn", "Roon"], ["rnp", "Rongpo"], ["rnr", "Nari Nari"], ["rnw", "Rungwa"], ["roa", "Romance languages"], ["rob", "Tae'"], ["roc", "Cacgia Roglai"], ["rod", "Rogo"], ["roe", "Ronji"], ["rof", "Rombo"], ["rog", "Northern Roglai"], ["rol", "Romblomanon"], ["rom", "Romany"], ["roo", "Rotokas"], ["rop", "Kriol"], ["ror", "Rongga"], ["rou", "Runga"], ["row", "Dela-Oenale"], ["rpn", "Repanbitip"], ["rpt", "Rapting"], ["rri", "Ririo"], ["rro", "Waima"], ["rrt", "Arritinngithigh"], ["rsb", "Romano-Serbian"], ["rsi", "Rennellese Sign Language"], ["rsl", "Russian Sign Language"], ["rsm", "Miriwoong Sign Language"], ["rtc", "Rungtu Chin"], ["rth", "Ratahan"], ["rtm", "Rotuman"], ["rts", "Yurats"], ["rtw", "Rathawi"], ["rub", "Gungu"], ["ruc", "Ruuli"], ["rue", "Rusyn"], ["ruf", "Luguru"], ["rug", "Roviana"], ["ruh", "Ruga"], ["rui", "Rufiji"], ["ruk", "Che"], ["ruo", "Istro Romanian"], ["rup", "Macedo-Romanian, Aromanian, Arumanian"], ["ruq", "Megleno Romanian"], ["rut", "Rutul"], ["ruu", "Lanas Lobu"], ["ruy", "Mala (Nigeria)"], ["ruz", "Ruma"], ["rwa", "Rawo"], ["rwk", "Rwa"], ["rwl", "Ruwila"], ["rwm", "Amba (Uganda)"], ["rwo", "Rawa"], ["rwr", "Marwari (India)"], ["rxd", "Ngardi"], ["rxw", "Karuwali, Garuwali"], ["ryn", "Northern Amami-Oshima"], ["rys", "Yaeyama"], ["ryu", "Central Okinawan"], ["rzh", "Rāziḥī"], ["saa", "Saba"], ["sab", "Buglere"], ["sac", "Meskwaki"], ["sad", "Sandawe"], ["sae", "Sabanê"], ["saf", "Safaliba"], ["sah", "Yakut"], ["sai", "South American Indian languages"], ["saj", "Sahu"], ["sak", "Sake"], ["sal", "Salishan languages"], ["sam", "Samaritan Aramaic"], ["sao", "Sause"], ["sap", "Sanapaná"], ["saq", "Samburu"], ["sar", "Saraveca"], ["sas", "Sasak"], ["sat", "Santali"], ["sau", "Saleman"], ["sav", "Saafi-Saafi"], ["saw", "Sawi"], ["sax", "Sa"], ["say", "Saya"], ["saz", "Saurashtra"], ["sba", "Ngambay"], ["sbb", "Simbo"], ["sbc", "Kele (Papua New Guinea)"], ["sbd", "Southern Samo"], ["sbe", "Saliba"], ["sbf", "Chabu, Shabo"], ["sbg", "Seget"], ["sbh", "Sori-Harengan"], ["sbi", "Seti"], ["sbj", "Surbakhal"], ["sbk", "Safwa"], ["sbl", "Botolan Sambal"], ["sbm", "Sagala"], ["sbn", "Sindhi Bhil"], ["sbo", "Sabüm"], ["sbp", "Sangu (Tanzania)"], ["sbq", "Sileibi"], ["sbr", "Sembakung Murut"], ["sbs", "Subiya"], ["sbt", "Kimki"], ["sbu", "Stod Bhoti"], ["sbv", "Sabine"], ["sbw", "Simba"], ["sbx", "Seberuang"], ["sby", "Soli"], ["sbz", "Sara Kaba"], ["sca", "Sansu"], ["scb", "Chut"], ["sce", "Dongxiang"], ["scf", "San Miguel Creole French"], ["scg", "Sanggau"], ["sch", "Sakachep"], ["sci", "Sri Lankan Creole Malay"], ["sck", "Sadri"], ["scl", "Shina"], ["scn", "Sicilian"], ["sco", "Scots"], ["scp", "Hyolmo, Helambu Sherpa"], ["scq", "Sa'och"], ["scs", "North Slavey"], ["sct", "Southern Katang"], ["scu", "Shumcho"], ["scv", "Sheni"], ["scw", "Sha"], ["scx", "Sicel"], ["sda", "Toraja-Sa'dan"], ["sdb", "Shabak"], ["sdc", "Sassarese Sardinian"], ["sde", "Surubu"], ["sdf", "Sarli"], ["sdg", "Savi"], ["sdh", "Southern Kurdish"], ["sdj", "Suundi"], ["sdk", "Sos Kundi"], ["sdl", "Saudi Arabian Sign Language"], ["sdm", "Semandang"], ["sdn", "Gallurese Sardinian"], ["sdo", "Bukar-Sadung Bidayuh"], ["sdp", "Sherdukpen"], ["sdq", "Semandang"], ["sdr", "Oraon Sadri"], ["sds", "Sened"], ["sdt", "Shuadit"], ["sdu", "Sarudu"], ["sdv", "Eastern Sudanic languages"], ["sdx", "Sibu Melanau"], ["sdz", "Sallands"], ["sea", "Semai"], ["seb", "Shempire Senoufo"], ["sec", "Sechelt"], ["sed", "Sedang"], ["see", "Seneca"], ["sef", "Cebaara Senoufo"], ["seg", "Segeju"], ["seh", "Sena"], ["sei", "Seri"], ["sej", "Sene"], ["sek", "Sekani"], ["sel", "Selkup"], ["sem", "Semitic languages"], ["sen", "Nanerigé Sénoufo"], ["seo", "Suarmin"], ["sep", "Sìcìté Sénoufo"], ["seq", "Senara Sénoufo"], ["ser", "Serrano"], ["ses", "Koyraboro Senni Songhai"], ["set", "Sentani"], ["seu", "Serui-Laut"], ["sev", "Nyarafolo Senoufo"], ["sew", "Sewa Bay"], ["sey", "Secoya"], ["sez", "Senthang Chin"], ["sfb", "Langue des signes de Belgique Francophone, French Belgian Sign Language"], ["sfe", "Eastern Subanen"], ["sfm", "Small Flowery Miao"], ["sfs", "South African Sign Language"], ["sfw", "Sehwi"], ["sga", "Old Irish (to 900)"], ["sgb", "Mag-antsi Ayta"], ["sgc", "Kipsigis"], ["sgd", "Surigaonon"], ["sge", "Segai"], ["sgg", "Swiss-German Sign Language"], ["sgh", "Shughni"], ["sgi", "Suga"], ["sgj", "Surgujia"], ["sgk", "Sangkong"], ["sgl", "Sanglechi-Ishkashimi"], ["sgm", "Singa"], ["sgn", "Sign languages"], ["sgo", "Songa"], ["sgp", "Singpho"], ["sgr", "Sangisari"], ["sgs", "Samogitian"], ["sgt", "Brokpake"], ["sgu", "Salas"], ["sgw", "Sebat Bet Gurage"], ["sgx", "Sierra Leone Sign Language"], ["sgy", "Sanglechi"], ["sgz", "Sursurunga"], ["sha", "Shall-Zwall"], ["shb", "Ninam"], ["shc", "Sonde"], ["shd", "Kundal Shahi"], ["she", "Sheko"], ["shg", "Shua"], ["shh", "Shoshoni"], ["shi", "Tachelhit"], ["shj", "Shatt"], ["shk", "Shilluk"], ["shl", "Shendu"], ["shm", "Shahrudi"], ["shn", "Shan"], ["sho", "Shanga"], ["shp", "Shipibo-Conibo"], ["shq", "Sala"], ["shr", "Shi"], ["shs", "Shuswap"], ["sht", "Shasta"], ["shu", "Chadian Arabic"], ["shv", "Shehri"], ["shw", "Shwai"], ["shx", "She"], ["shy", "Tachawit"], ["shz", "Syenara Senoufo"], ["sia", "Akkala Sami"], ["sib", "Sebop"], ["sid", "Sidamo"], ["sie", "Simaa"], ["sif", "Siamou"], ["sig", "Paasaal"], ["sih", "Zire, Sîshëë"], ["sii", "Shom Peng"], ["sij", "Numbami"], ["sik", "Sikiana"], ["sil", "Tumulung Sisaala"], ["sim", "Mende (Papua New Guinea)"], ["sio", "Siouan languages"], ["sip", "Sikkimese"], ["siq", "Sonia"], ["sir", "Siri"], ["sis", "Siuslaw"], ["sit", "Sino-Tibetan languages"], ["siu", "Sinagen"], ["siv", "Sumariup"], ["siw", "Siwai"], ["six", "Sumau"], ["siy", "Sivandi"], ["siz", "Siwi"], ["sja", "Epena"], ["sjb", "Sajau Basap"], ["sjd", "Kildin Sami"], ["sje", "Pite Sami"], ["sjg", "Assangori"], ["sjk", "Kemi Sami"], ["sjl", "Sajalong, Miji"], ["sjm", "Mapun"], ["sjn", "Sindarin"], ["sjo", "Xibe"], ["sjp", "Surjapuri"], ["sjr", "Siar-Lak"], ["sjs", "Senhaja De Srair"], ["sjt", "Ter Sami"], ["sju", "Ume Sami"], ["sjw", "Shawnee"], ["ska", "Skagit"], ["skb", "Saek"], ["skc", "Ma Manda"], ["skd", "Southern Sierra Miwok"], ["ske", "Seke (Vanuatu)"], ["skf", "Sakirabiá"], ["skg", "Sakalava Malagasy"], ["skh", "Sikule"], ["ski", "Sika"], ["skj", "Seke (Nepal)"], ["skk", "Sok"], ["skm", "Kutong"], ["skn", "Kolibugan Subanon"], ["sko", "Seko Tengah"], ["skp", "Sekapan"], ["skq", "Sininkere"], ["skr", "Saraiki, Seraiki"], ["sks", "Maia"], ["skt", "Sakata"], ["sku", "Sakao"], ["skv", "Skou"], ["skw", "Skepi Creole Dutch"], ["skx", "Seko Padang"], ["sky", "Sikaiana"], ["skz", "Sekar"], ["sla", "Slavic languages"], ["slc", "Sáliba"], ["sld", "Sissala"], ["sle", "Sholaga"], ["slf", "Swiss-Italian Sign Language"], ["slg", "Selungai Murut"], ["slh", "Southern Puget Sound Salish"], ["sli", "Lower Silesian"], ["slj", "Salumá"], ["sll", "Salt-Yui"], ["slm", "Pangutaran Sama"], ["sln", "Salinan"], ["slp", "Lamaholot"], ["slq", "Salchuq"], ["slr", "Salar"], ["sls", "Singapore Sign Language"], ["slt", "Sila"], ["slu", "Selaru"], ["slw", "Sialum"], ["slx", "Salampasu"], ["sly", "Selayar"], ["slz", "Ma'ya"], ["sma", "Southern Sami"], ["smb", "Simbari"], ["smc", "Som"], ["smd", "Sama"], ["smf", "Auwe"], ["smg", "Simbali"], ["smh", "Samei"], ["smi", "Sami languages"], ["smj", "Lule Sami"], ["smk", "Bolinao"], ["sml", "Central Sama"], ["smm", "Musasa"], ["smn", "Inari Sami"], ["smp", "Samaritan"], ["smq", "Samo"], ["smr", "Simeulue"], ["sms", "Skolt Sami"], ["smt", "Simte"], ["smu", "Somray"], ["smv", "Samvedi"], ["smw", "Sumbawa"], ["smx", "Samba"], ["smy", "Semnani"], ["smz", "Simeku"], ["snb", "Sebuyau"], ["snc", "Sinaugoro"], ["sne", "Bau Bidayuh"], ["snf", "Noon"], ["sng", "Sanga (Democratic Republic of Congo)"], ["snh", "Shinabo"], ["sni", "Sensi"], ["snj", "Riverain Sango"], ["snk", "Soninke"], ["snl", "Sangil"], ["snm", "Southern Ma'di"], ["snn", "Siona"], ["sno", "Snohomish"], ["snp", "Siane"], ["snq", "Sangu (Gabon)"], ["snr", "Sihan"], ["sns", "South West Bay, Nahavaq"], ["snu", "Senggi, Viid"], ["snv", "Sa'ban"], ["snw", "Selee"], ["snx", "Sam"], ["sny", "Saniyo-Hiyewe"], ["snz", "Kou"], ["soa", "Thai Song"], ["sob", "Sobei"], ["soc", "So (Democratic Republic of Congo)"], ["sod", "Songoora"], ["soe", "Songomeno"], ["sog", "Sogdian"], ["soh", "Aka"], ["soi", "Sonha"], ["soj", "Soi"], ["sok", "Sokoro"], ["sol", "Solos"], ["son", "Songhai languages"], ["soo", "Songo"], ["sop", "Songe"], ["soq", "Kanasi"], ["sor", "Somrai"], ["sos", "Seeku"], ["sou", "Southern Thai"], ["sov", "Sonsorol"], ["sow", "Sowanda"], ["sox", "Swo"], ["soy", "Miyobe"], ["soz", "Temi"], ["spb", "Sepa (Indonesia)"], ["spc", "Sapé"], ["spd", "Saep"], ["spe", "Sepa (Papua New Guinea)"], ["spg", "Sian"], ["spi", "Saponi"], ["spk", "Sengo"], ["spl", "Selepet"], ["spm", "Akukem"], ["spn", "Sanapaná"], ["spo", "Spokane"], ["spp", "Supyire Senoufo"], ["spq", "Loreto-Ucayali Spanish"], ["spr", "Saparua"], ["sps", "Saposa"], ["spt", "Spiti Bhoti"], ["spu", "Sapuan"], ["spv", "Sambalpuri, Kosli"], ["spx", "South Picene"], ["spy", "Sabaot"], ["sqa", "Shama-Sambuga"], ["sqh", "Shau"], ["sqj", "Albanian languages"], ["sqk", "Albanian Sign Language"], ["sqm", "Suma"], ["sqn", "Susquehannock"], ["sqo", "Sorkhei"], ["sqq", "Sou"], ["sqr", "Siculo Arabic"], ["sqs", "Sri Lankan Sign Language"], ["sqt", "Soqotri"], ["squ", "Squamish"], ["sqx", "Kufr Qassem Sign Language (KQSL)"], ["sra", "Saruga"], ["srb", "Sora"], ["src", "Logudorese Sardinian"], ["sre", "Sara"], ["srf", "Nafi"], ["srg", "Sulod"], ["srh", "Sarikoli"], ["sri", "Siriano"], ["srk", "Serudung Murut"], ["srl", "Isirawa"], ["srm", "Saramaccan"], ["srn", "Sranan Tongo"], ["sro", "Campidanese Sardinian"], ["srq", "Sirionó"], ["srr", "Serer"], ["srs", "Sarsi"], ["srt", "Sauri"], ["sru", "Suruí"], ["srv", "Southern Sorsoganon"], ["srw", "Serua"], ["srx", "Sirmauri"], ["sry", "Sera"], ["srz", "Shahmirzadi"], ["ssa", "Nilo-Saharan languages"], ["ssb", "Southern Sama"], ["ssc", "Suba-Simbiti"], ["ssd", "Siroi"], ["sse", "Balangingi, Bangingih Sama"], ["ssf", "Thao"], ["ssg", "Seimat"], ["ssh", "Shihhi Arabic"], ["ssi", "Sansi"], ["ssj", "Sausi"], ["ssk", "Sunam"], ["ssl", "Western Sisaala"], ["ssm", "Semnam"], ["ssn", "Waata"], ["sso", "Sissano"], ["ssp", "Spanish Sign Language"], ["ssq", "So'a"], ["ssr", "Swiss-French Sign Language"], ["sss", "Sô"], ["sst", "Sinasina"], ["ssu", "Susuami"], ["ssv", "Shark Bay"], ["ssx", "Samberigi"], ["ssy", "Saho"], ["ssz", "Sengseng"], ["sta", "Settla"], ["stb", "Northern Subanen"], ["std", "Sentinel"], ["ste", "Liana-Seti"], ["stf", "Seta"], ["stg", "Trieng"], ["sth", "Shelta"], ["sti", "Bulo Stieng"], ["stj", "Matya Samo"], ["stk", "Arammba"], ["stl", "Stellingwerfs"], ["stm", "Setaman"], ["stn", "Owa"], ["sto", "Stoney"], ["stp", "Southeastern Tepehuan"], ["stq", "Saterfriesisch"], ["str", "Straits Salish"], ["sts", "Shumashti"], ["stt", "Budeh Stieng"], ["stu", "Samtao"], ["stv", "Silt'e"], ["stw", "Satawalese"], ["sty", "Siberian Tatar"], ["sua", "Sulka"], ["sub", "Suku"], ["suc", "Western Subanon"], ["sue", "Suena"], ["sug", "Suganga"], ["sui", "Suki"], ["suj", "Shubi"], ["suk", "Sukuma"], ["sul", "Surigaonon"], ["sum", "Sumo-Mayangna"], ["suo", "Bouni"], ["suq", "Tirmaga-Chai Suri, Suri"], ["sur", "Mwaghavul"], ["sus", "Susu"], ["sut", "Subtiaba"], ["suv", "Puroik"], ["suw", "Sumbwa"], ["sux", "Sumerian"], ["suy", "Suyá"], ["suz", "Sunwar"], ["sva", "Svan"], ["svb", "Ulau-Suain"], ["svc", "Vincentian Creole English"], ["sve", "Serili"], ["svk", "Slovakian Sign Language"], ["svm", "Slavomolisano"], ["svr", "Savara"], ["svs", "Savosavo"], ["svx", "Skalvian"], ["swb", "Maore Comorian"], ["swc", "Congo Swahili"], ["swf", "Sere"], ["swg", "Swabian"], ["swh", "Swahili (individual language), Kiswahili"], ["swi", "Sui"], ["swj", "Sira"], ["swk", "Malawi Sena"], ["swl", "Swedish Sign Language"], ["swm", "Samosa"], ["swn", "Sawknah"], ["swo", "Shanenawa"], ["swp", "Suau"], ["swq", "Sharwa"], ["swr", "Saweru"], ["sws", "Seluwasan"], ["swt", "Sawila"], ["swu", "Suwawa"], ["swv", "Shekhawati"], ["sww", "Sowa"], ["swx", "Suruahá"], ["swy", "Sarua"], ["sxb", "Suba"], ["sxc", "Sicanian"], ["sxe", "Sighu"], ["sxg", "Shuhi, Shixing"], ["sxk", "Southern Kalapuya"], ["sxl", "Selian"], ["sxm", "Samre"], ["sxn", "Sangir"], ["sxo", "Sorothaptic"], ["sxr", "Saaroa"], ["sxs", "Sasaru"], ["sxu", "Upper Saxon"], ["sxw", "Saxwe Gbe"], ["sya", "Siang"], ["syb", "Central Subanen"], ["syc", "Classical Syriac"], ["syd", "Samoyedic languages"], ["syi", "Seki"], ["syk", "Sukur"], ["syl", "Sylheti"], ["sym", "Maya Samo"], ["syn", "Senaya"], ["syo", "Suoy"], ["syr", "Syriac"], ["sys", "Sinyar"], ["syw", "Kagate"], ["syx", "Samay"], ["syy", "Al-Sayyid Bedouin Sign Language"], ["sza", "Semelai"], ["szb", "Ngalum"], ["szc", "Semaq Beri"], ["szd", "Seru"], ["sze", "Seze"], ["szg", "Sengele"], ["szl", "Silesian"], ["szn", "Sula"], ["szp", "Suabo"], ["szs", "Solomon Islands Sign Language"], ["szv", "Isu (Fako Division)"], ["szw", "Sawai"], ["szy", "Sakizaya"], ["taa", "Lower Tanana"], ["tab", "Tabassaran"], ["tac", "Lowland Tarahumara"], ["tad", "Tause"], ["tae", "Tariana"], ["taf", "Tapirapé"], ["tag", "Tagoi"], ["tai", "Tai languages"], ["taj", "Eastern Tamang"], ["tak", "Tala"], ["tal", "Tal"], ["tan", "Tangale"], ["tao", "Yami"], ["tap", "Taabwa"], ["taq", "Tamasheq"], ["tar", "Central Tarahumara"], ["tas", "Tay Boi"], ["tau", "Upper Tanana"], ["tav", "Tatuyo"], ["taw", "Tai"], ["tax", "Tamki"], ["tay", "Atayal"], ["taz", "Tocho"], ["tba", "Aikanã"], ["tbb", "Tapeba"], ["tbc", "Takia"], ["tbd", "Kaki Ae"], ["tbe", "Tanimbili"], ["tbf", "Mandara"], ["tbg", "North Tairora"], ["tbh", "Dharawal, Thurawal"], ["tbi", "Gaam"], ["tbj", "Tiang"], ["tbk", "Calamian Tagbanwa"], ["tbl", "Tboli"], ["tbm", "Tagbu"], ["tbn", "Barro Negro Tunebo"], ["tbo", "Tawala"], ["tbp", "Taworta, Diebroud"], ["tbq", "Tibeto-Burman languages"], ["tbr", "Tumtum"], ["tbs", "Tanguat"], ["tbt", "Tembo (Kitembo)"], ["tbu", "Tubar"], ["tbv", "Tobo"], ["tbw", "Tagbanwa"], ["tbx", "Kapin"], ["tby", "Tabaru"], ["tbz", "Ditammari"], ["tca", "Ticuna"], ["tcb", "Tanacross"], ["tcc", "Datooga"], ["tcd", "Tafi"], ["tce", "Southern Tutchone"], ["tcf", "Malinaltepec Me'phaa, Malinaltepec Tlapanec"], ["tcg", "Tamagario"], ["tch", "Turks And Caicos Creole English"], ["tci", "Wára"], ["tck", "Tchitchege"], ["tcl", "Taman (Myanmar)"], ["tcm", "Tanahmerah"], ["tcn", "Tichurong"], ["tco", "Taungyo"], ["tcp", "Tawr Chin"], ["tcq", "Kaiy"], ["tcs", "Torres Strait Creole, Yumplatok"], ["tct", "T'en"], ["tcu", "Southeastern Tarahumara"], ["tcw", "Tecpatlán Totonac"], ["tcx", "Toda"], ["tcy", "Tulu"], ["tcz", "Thado Chin"], ["tda", "Tagdal"], ["tdb", "Panchpargania"], ["tdc", "Emberá-Tadó"], ["tdd", "Tai Nüa"], ["tde", "Tiranige Diga Dogon"], ["tdf", "Talieng"], ["tdg", "Western Tamang"], ["tdh", "Thulung"], ["tdi", "Tomadino"], ["tdj", "Tajio"], ["tdk", "Tambas"], ["tdl", "Sur"], ["tdm", "Taruma"], ["tdn", "Tondano"], ["tdo", "Teme"], ["tdq", "Tita"], ["tdr", "Todrah"], ["tds", "Doutai"], ["tdt", "Tetun Dili"], ["tdu", "Tempasuk Dusun"], ["tdv", "Toro"], ["tdx", "Tandroy-Mahafaly Malagasy"], ["tdy", "Tadyawan"], ["tea", "Temiar"], ["teb", "Tetete"], ["tec", "Terik"], ["ted", "Tepo Krumen"], ["tee", "Huehuetla Tepehua"], ["tef", "Teressa"], ["teg", "Teke-Tege"], ["teh", "Tehuelche"], ["tei", "Torricelli"], ["tek", "Ibali Teke"], ["tem", "Timne"], ["ten", "Tama (Colombia)"], ["teo", "Teso"], ["tep", "Tepecano"], ["teq", "Temein"], ["ter", "Tereno"], ["tes", "Tengger"], ["tet", "Tetum"], ["teu", "Soo"], ["tev", "Teor"], ["tew", "Tewa (USA)"], ["tex", "Tennet"], ["tey", "Tulishi"], ["tez", "Tetserret"], ["tfi", "Tofin Gbe"], ["tfn", "Tanaina"], ["tfo", "Tefaro"], ["tfr", "Teribe"], ["tft", "Ternate"], ["tga", "Sagalla"], ["tgb", "Tobilung"], ["tgc", "Tigak"], ["tgd", "Ciwogai"], ["tge", "Eastern Gorkha Tamang"], ["tgf", "Chalikha"], ["tgg", "Tangga"], ["tgh", "Tobagonian Creole English"], ["tgi", "Lawunuia"], ["tgj", "Tagin"], ["tgn", "Tandaganon"], ["tgo", "Sudest"], ["tgp", "Tangoa"], ["tgq", "Tring"], ["tgr", "Tareng"], ["tgs", "Nume"], ["tgt", "Central Tagbanwa"], ["tgu", "Tanggu"], ["tgv", "Tingui-Boto"], ["tgw", "Tagwana Senoufo"], ["tgx", "Tagish"], ["tgy", "Togoyo"], ["tgz", "Tagalaka"], ["thc", "Tai Hang Tong"], ["thd", "Kuuk Thaayorre, Thayore"], ["the", "Chitwania Tharu"], ["thf", "Thangmi"], ["thh", "Northern Tarahumara"], ["thi", "Tai Long"], ["thk", "Tharaka, Kitharaka"], ["thl", "Dangaura Tharu"], ["thm", "Aheu"], ["thn", "Thachanadan"], ["thp", "Thompson"], ["thq", "Kochila Tharu"], ["thr", "Rana Tharu"], ["ths", "Thakali"], ["tht", "Tahltan"], ["thu", "Thuri"], ["thv", "Tahaggart Tamahaq"], ["thw", "Thudam"], ["thx", "The"], ["thy", "Tha"], ["thz", "Tayart Tamajeq"], ["tia", "Tidikelt Tamazight"], ["tic", "Tira"], ["tid", "Tidong"], ["tie", "Tingal"], ["tif", "Tifal"], ["tig", "Tigre"], ["tih", "Timugon Murut"], ["tii", "Tiene"], ["tij", "Tilung"], ["tik", "Tikar"], ["til", "Tillamook"], ["tim", "Timbe"], ["tin", "Tindi"], ["tio", "Teop"], ["tip", "Trimuris"], ["tiq", "Tiéfo"], ["tis", "Masadiit Itneg"], ["tit", "Tinigua"], ["tiu", "Adasen"], ["tiv", "Tiv"], ["tiw", "Tiwi"], ["tix", "Southern Tiwa"], ["tiy", "Tiruray"], ["tiz", "Tai Hongjin"], ["tja", "Tajuasohn"], ["tjg", "Tunjung"], ["tji", "Northern Tujia"], ["tjj", "Tjungundji"], ["tjl", "Tai Laing"], ["tjm", "Timucua"], ["tjn", "Tonjon"], ["tjo", "Temacine Tamazight"], ["tjp", "Tjupany"], ["tjs", "Southern Tujia"], ["tju", "Tjurruru"], ["tjw", "Djabwurrung"], ["tka", "Truká"], ["tkb", "Buksa"], ["tkd", "Tukudede"], ["tke", "Takwane"], ["tkf", "Tukumanféd"], ["tkg", "Tesaka Malagasy"], ["tkk", "Takpa"], ["tkl", "Tokelau"], ["tkm", "Takelma"], ["tkn", "Toku-No-Shima"], ["tkp", "Tikopia"], ["tkq", "Tee"], ["tkr", "Tsakhur"], ["tks", "Takestani"], ["tkt", "Kathoriya Tharu"], ["tku", "Upper Necaxa Totonac"], ["tkv", "Mur Pano"], ["tkw", "Teanu"], ["tkx", "Tangko"], ["tkz", "Takua"], ["tla", "Southwestern Tepehuan"], ["tlb", "Tobelo"], ["tlc", "Yecuatla Totonac"], ["tld", "Talaud"], ["tlf", "Telefol"], ["tlg", "Tofanma"], ["tlh", "Klingon, tlhIngan Hol"], ["tli", "Tlingit"], ["tlj", "Talinga-Bwisi"], ["tlk", "Taloki"], ["tll", "Tetela"], ["tlm", "Tolomako"], ["tln", "Talondo'"], ["tlo", "Talodi"], ["tlp", "Filomena Mata-Coahuitlán Totonac"], ["tlq", "Tai Loi"], ["tlr", "Talise"], ["tls", "Tambotalo"], ["tlt", "Sou Nama, Teluti"], ["tlu", "Tulehu"], ["tlv", "Taliabu"], ["tlw", "South Wemale"], ["tlx", "Khehek"], ["tly", "Talysh"], ["tma", "Tama (Chad)"], ["tmb", "Katbol, Avava"], ["tmc", "Tumak"], ["tmd", "Haruai"], ["tme", "Tremembé"], ["tmf", "Toba-Maskoy"], ["tmg", "Ternateño"], ["tmh", "Tamashek"], ["tmi", "Tutuba"], ["tmj", "Samarokena"], ["tmk", "Northwestern Tamang"], ["tml", "Tamnim Citak"], ["tmm", "Tai Thanh"], ["tmn", "Taman (Indonesia)"], ["tmo", "Temoq"], ["tmp", "Tai Mène"], ["tmq", "Tumleo"], ["tmr", "Jewish Babylonian Aramaic (ca. 200-1200 CE)"], ["tms", "Tima"], ["tmt", "Tasmate"], ["tmu", "Iau"], ["tmv", "Tembo (Motembo)"], ["tmw", "Temuan"], ["tmy", "Tami"], ["tmz", "Tamanaku"], ["tna", "Tacana"], ["tnb", "Western Tunebo"], ["tnc", "Tanimuca-Retuarã"], ["tnd", "Angosturas Tunebo"], ["tne", "Tinoc Kallahan"], ["tnf", "Tangshewi"], ["tng", "Tobanga"], ["tnh", "Maiani"], ["tni", "Tandia"], ["tnk", "Kwamera"], ["tnl", "Lenakel"], ["tnm", "Tabla"], ["tnn", "North Tanna"], ["tno", "Toromono"], ["tnp", "Whitesands"], ["tnq", "Taino"], ["tnr", "Ménik"], ["tns", "Tenis"], ["tnt", "Tontemboan"], ["tnu", "Tay Khang"], ["tnv", "Tangchangya"], ["tnw", "Tonsawang"], ["tnx", "Tanema"], ["tny", "Tongwe"], ["tnz", "Ten'edn"], ["tob", "Toba"], ["toc", "Coyutla Totonac"], ["tod", "Toma"], ["toe", "Tomedes"], ["tof", "Gizrra"], ["tog", "Tonga (Nyasa)"], ["toh", "Gitonga"], ["toi", "Tonga (Zambia)"], ["toj", "Tojolabal"], ["tol", "Tolowa"], ["tom", "Tombulu"], ["too", "Xicotepec De Juárez Totonac"], ["top", "Papantla Totonac"], ["toq", "Toposa"], ["tor", "Togbo-Vara Banda"], ["tos", "Highland Totonac"], ["tou", "Tho"], ["tov", "Upper Taromi"], ["tow", "Jemez"], ["tox", "Tobian"], ["toy", "Topoiyo"], ["toz", "To"], ["tpa", "Taupota"], ["tpc", "Azoyú Me'phaa, Azoyú Tlapanec"], ["tpe", "Tippera"], ["tpf", "Tarpia"], ["tpg", "Kula"], ["tpi", "Tok Pisin"], ["tpj", "Tapieté"], ["tpk", "Tupinikin"], ["tpl", "Tlacoapa Me'phaa, Tlacoapa Tlapanec"], ["tpm", "Tampulma"], ["tpn", "Tupinambá"], ["tpo", "Tai Pao"], ["tpp", "Pisaflores Tepehua"], ["tpq", "Tukpa"], ["tpr", "Tuparí"], ["tpt", "Tlachichilco Tepehua"], ["tpu", "Tampuan"], ["tpv", "Tanapag"], ["tpw", "Tupí"], ["tpx", "Acatepec Me'phaa, Acatepec Tlapanec"], ["tpy", "Trumai"], ["tpz", "Tinputz"], ["tqb", "Tembé"], ["tql", "Lehali"], ["tqm", "Turumsa"], ["tqn", "Tenino"], ["tqo", "Toaripi"], ["tqp", "Tomoip"], ["tqq", "Tunni"], ["tqr", "Torona"], ["tqt", "Western Totonac"], ["tqu", "Touo"], ["tqw", "Tonkawa"], ["tra", "Tirahi"], ["trb", "Terebu"], ["trc", "Copala Triqui"], ["trd", "Turi"], ["tre", "East Tarangan"], ["trf", "Trinidadian Creole English"], ["trg", "Lishán Didán"], ["trh", "Turaka"], ["tri", "Trió"], ["trj", "Toram"], ["trk", "Turkic languages"], ["trl", "Traveller Scottish"], ["trm", "Tregami"], ["trn", "Trinitario"], ["tro", "Tarao Naga"], ["trp", "Kok Borok"], ["trq", "San Martín Itunyoso Triqui"], ["trr", "Taushiro"], ["trs", "Chicahuaxtla Triqui"], ["trt", "Tunggare"], ["tru", "Turoyo, Surayt"], ["trv", "Taroko"], ["trw", "Torwali"], ["trx", "Tringgus-Sembaan Bidayuh"], ["try", "Turung"], ["trz", "Torá"], ["tsa", "Tsaangi"], ["tsb", "Tsamai"], ["tsc", "Tswa"], ["tsd", "Tsakonian"], ["tse", "Tunisian Sign Language"], ["tsf", "Southwestern Tamang"], ["tsg", "Tausug"], ["tsh", "Tsuvan"], ["tsi", "Tsimshian"], ["tsj", "Tshangla"], ["tsk", "Tseku"], ["tsl", "Ts'ün-Lao"], ["tsm", "Turkish Sign Language, Türk İşaret Dili"], ["tsp", "Northern Toussian"], ["tsq", "Thai Sign Language"], ["tsr", "Akei"], ["tss", "Taiwan Sign Language"], ["tst", "Tondi Songway Kiini"], ["tsu", "Tsou"], ["tsv", "Tsogo"], ["tsw", "Tsishingini"], ["tsx", "Mubami"], ["tsy", "Tebul Sign Language"], ["tsz", "Purepecha"], ["tta", "Tutelo"], ["ttb", "Gaa"], ["ttc", "Tektiteko"], ["ttd", "Tauade"], ["tte", "Bwanabwana"], ["ttf", "Tuotomb"], ["ttg", "Tutong"], ["tth", "Upper Ta'oih"], ["tti", "Tobati"], ["ttj", "Tooro"], ["ttk", "Totoro"], ["ttl", "Totela"], ["ttm", "Northern Tutchone"], ["ttn", "Towei"], ["tto", "Lower Ta'oih"], ["ttp", "Tombelala"], ["ttq", "Tawallammat Tamajaq"], ["ttr", "Tera"], ["tts", "Northeastern Thai"], ["ttt", "Muslim Tat"], ["ttu", "Torau"], ["ttv", "Titan"], ["ttw", "Long Wat"], ["tty", "Sikaritai"], ["ttz", "Tsum"], ["tua", "Wiarumus"], ["tub", "Tübatulabal"], ["tuc", "Mutu"], ["tud", "Tuxá"], ["tue", "Tuyuca"], ["tuf", "Central Tunebo"], ["tug", "Tunia"], ["tuh", "Taulil"], ["tui", "Tupuri"], ["tuj", "Tugutil"], ["tul", "Tula"], ["tum", "Tumbuka"], ["tun", "Tunica"], ["tuo", "Tucano"], ["tup", "Tupi languages"], ["tuq", "Tedaga"], ["tus", "Tuscarora"], ["tut", "Altaic languages"], ["tuu", "Tututni"], ["tuv", "Turkana"], ["tuw", "Tungus languages"], ["tux", "Tuxináwa"], ["tuy", "Tugen"], ["tuz", "Turka"], ["tva", "Vaghua"], ["tvd", "Tsuvadi"], ["tve", "Te'un"], ["tvk", "Southeast Ambrym"], ["tvl", "Tuvalu"], ["tvm", "Tela-Masbuar"], ["tvn", "Tavoyan"], ["tvo", "Tidore"], ["tvs", "Taveta"], ["tvt", "Tutsa Naga"], ["tvu", "Tunen"], ["tvw", "Sedoa"], ["tvx", "Taivoan"], ["tvy", "Timor Pidgin"], ["twa", "Twana"], ["twb", "Western Tawbuid"], ["twc", "Teshenawa"], ["twd", "Twents"], ["twe", "Tewa (Indonesia)"], ["twf", "Northern Tiwa"], ["twg", "Tereweng"], ["twh", "Tai Dón"], ["twl", "Tawara"], ["twm", "Tawang Monpa"], ["twn", "Twendi"], ["two", "Tswapong"], ["twp", "Ere"], ["twq", "Tasawaq"], ["twr", "Southwestern Tarahumara"], ["twt", "Turiwára"], ["twu", "Termanu"], ["tww", "Tuwari"], ["twx", "Tewe"], ["twy", "Tawoyan"], ["txa", "Tombonuo"], ["txb", "Tokharian B"], ["txc", "Tsetsaut"], ["txe", "Totoli"], ["txg", "Tangut"], ["txh", "Thracian"], ["txi", "Ikpeng"], ["txj", "Tarjumo"], ["txm", "Tomini"], ["txn", "West Tarangan"], ["txo", "Toto"], ["txq", "Tii"], ["txr", "Tartessian"], ["txs", "Tonsea"], ["txt", "Citak"], ["txu", "Kayapó"], ["txx", "Tatana"], ["txy", "Tanosy Malagasy"], ["tya", "Tauya"], ["tye", "Kyanga"], ["tyh", "O'du"], ["tyi", "Teke-Tsaayi"], ["tyj", "Tai Do, Tai Yo"], ["tyl", "Thu Lao"], ["tyn", "Kombai"], ["typ", "Thaypan"], ["tyr", "Tai Daeng"], ["tys", "Tày Sa Pa"], ["tyt", "Tày Tac"], ["tyu", "Kua"], ["tyv", "Tuvinian"], ["tyx", "Teke-Tyee"], ["tyy", "Tiyaa"], ["tyz", "Tày"], ["tza", "Tanzanian Sign Language"], ["tzh", "Tzeltal"], ["tzj", "Tz'utujil"], ["tzl", "Talossan"], ["tzm", "Central Atlas Tamazight"], ["tzn", "Tugun"], ["tzo", "Tzotzil"], ["tzx", "Tabriak"], ["uam", "Uamué"], ["uan", "Kuan"], ["uar", "Tairuma"], ["uba", "Ubang"], ["ubi", "Ubi"], ["ubl", "Buhi'non Bikol"], ["ubr", "Ubir"], ["ubu", "Umbu-Ungu"], ["uby", "Ubykh"], ["uda", "Uda"], ["ude", "Udihe"], ["udg", "Muduga"], ["udi", "Udi"], ["udj", "Ujir"], ["udl", "Wuzlam"], ["udm", "Udmurt"], ["udu", "Uduk"], ["ues", "Kioko"], ["ufi", "Ufim"], ["uga", "Ugaritic"], ["ugb", "Kuku-Ugbanh"], ["uge", "Ughele"], ["ugn", "Ugandan Sign Language"], ["ugo", "Ugong"], ["ugy", "Uruguayan Sign Language"], ["uha", "Uhami"], ["uhn", "Damal"], ["uis", "Uisai"], ["uiv", "Iyive"], ["uji", "Tanjijili"], ["uka", "Kaburi"], ["ukg", "Ukuriguma"], ["ukh", "Ukhwejo"], ["uki", "Kui (India)"], ["ukk", "Muak Sa-aak"], ["ukl", "Ukrainian Sign Language"], ["ukp", "Ukpe-Bayobiri"], ["ukq", "Ukwa"], ["uks", "Urubú-Kaapor Sign Language, Kaapor Sign Language"], ["uku", "Ukue"], ["ukv", "Kuku"], ["ukw", "Ukwuani-Aboh-Ndoni"], ["uky", "Kuuk-Yak"], ["ula", "Fungwa"], ["ulb", "Ulukwumi"], ["ulc", "Ulch"], ["ule", "Lule"], ["ulf", "Usku, Afra"], ["uli", "Ulithian"], ["ulk", "Meriam Mir"], ["ull", "Ullatan"], ["ulm", "Ulumanda'"], ["uln", "Unserdeutsch"], ["ulu", "Uma' Lung"], ["ulw", "Ulwa"], ["uma", "Umatilla"], ["umb", "Umbundu"], ["umc", "Marrucinian"], ["umd", "Umbindhamu"], ["umg", "Morrobalama, Umbuygamu"], ["umi", "Ukit"], ["umm", "Umon"], ["umn", "Makyan Naga"], ["umo", "Umotína"], ["ump", "Umpila"], ["umr", "Umbugarla"], ["ums", "Pendau"], ["umu", "Munsee"], ["una", "North Watut"], ["und", "Undetermined"], ["une", "Uneme"], ["ung", "Ngarinyin"], ["uni", "Uni"], ["unk", "Enawené-Nawé"], ["unm", "Unami"], ["unn", "Kurnai"], ["unp", "Worora"], ["unr", "Mundari"], ["unu", "Unubahe"], ["unx", "Munda"], ["unz", "Unde Kaili"], ["uok", "Uokha"], ["upi", "Umeda"], ["upv", "Uripiv-Wala-Rano-Atchin"], ["ura", "Urarina"], ["urb", "Urubú-Kaapor, Kaapor"], ["urc", "Urningangg"], ["ure", "Uru"], ["urf", "Uradhi"], ["urg", "Urigina"], ["urh", "Urhobo"], ["uri", "Urim"], ["urj", "Uralic languages"], ["urk", "Urak Lawoi'"], ["url", "Urali"], ["urm", "Urapmin"], ["urn", "Uruangnirin"], ["uro", "Ura (Papua New Guinea)"], ["urp", "Uru-Pa-In"], ["urr", "Lehalurup, Löyöp"], ["urt", "Urat"], ["uru", "Urumi"], ["urv", "Uruava"], ["urw", "Sop"], ["urx", "Urimo"], ["ury", "Orya"], ["urz", "Uru-Eu-Wau-Wau"], ["usa", "Usarufa"], ["ush", "Ushojo"], ["usi", "Usui"], ["usk", "Usaghade"], ["usp", "Uspanteco"], ["uss", "us-Saare"], ["usu", "Uya"], ["uta", "Otank"], ["ute", "Ute-Southern Paiute"], ["uth", "ut-Hun"], ["utp", "Amba (Solomon Islands)"], ["utr", "Etulo"], ["utu", "Utu"], ["uum", "Urum"], ["uun", "Kulon-Pazeh"], ["uur", "Ura (Vanuatu)"], ["uuu", "U"], ["uve", "West Uvean, Fagauvea"], ["uvh", "Uri"], ["uvl", "Lote"], ["uwa", "Kuku-Uwanh"], ["uya", "Doko-Uyanga"], ["uzn", "Northern Uzbek"], ["uzs", "Southern Uzbek"], ["vaa", "Vaagri Booli"], ["vae", "Vale"], ["vaf", "Vafsi"], ["vag", "Vagla"], ["vah", "Varhadi-Nagpuri"], ["vai", "Vai"], ["vaj", "Sekele, Northwestern ǃKung, Vasekele"], ["val", "Vehes"], ["vam", "Vanimo"], ["van", "Valman"], ["vao", "Vao"], ["vap", "Vaiphei"], ["var", "Huarijio"], ["vas", "Vasavi"], ["vau", "Vanuma"], ["vav", "Varli"], ["vay", "Wayu"], ["vbb", "Southeast Babar"], ["vbk", "Southwestern Bontok"], ["vec", "Venetian"], ["ved", "Veddah"], ["vel", "Veluws"], ["vem", "Vemgo-Mabas"], ["veo", "Ventureño"], ["vep", "Veps"], ["ver", "Mom Jango"], ["vgr", "Vaghri"], ["vgt", "Vlaamse Gebarentaal, Flemish Sign Language"], ["vic", "Virgin Islands Creole English"], ["vid", "Vidunda"], ["vif", "Vili"], ["vig", "Viemo"], ["vil", "Vilela"], ["vin", "Vinza"], ["vis", "Vishavan"], ["vit", "Viti"], ["viv", "Iduna"], ["vka", "Kariyarra"], ["vki", "Ija-Zuba"], ["vkj", "Kujarge"], ["vkk", "Kaur"], ["vkl", "Kulisusu"], ["vkm", "Kamakan"], ["vkn", "Koro Nulu"], ["vko", "Kodeoha"], ["vkp", "Korlai Creole Portuguese"], ["vkt", "Tenggarong Kutai Malay"], ["vku", "Kurrama"], ["vkz", "Koro Zuba"], ["vlp", "Valpei"], ["vls", "Vlaams"], ["vma", "Martuyhunira"], ["vmb", "Barbaram"], ["vmc", "Juxtlahuaca Mixtec"], ["vmd", "Mudu Koraga"], ["vme", "East Masela"], ["vmf", "Mainfränkisch"], ["vmg", "Lungalunga"], ["vmh", "Maraghei"], ["vmi", "Miwa"], ["vmj", "Ixtayutla Mixtec"], ["vmk", "Makhuwa-Shirima"], ["vml", "Malgana"], ["vmm", "Mitlatongo Mixtec"], ["vmp", "Soyaltepec Mazatec"], ["vmq", "Soyaltepec Mixtec"], ["vmr", "Marenje"], ["vms", "Moksela"], ["vmu", "Muluridyi"], ["vmv", "Valley Maidu"], ["vmw", "Makhuwa"], ["vmx", "Tamazola Mixtec"], ["vmy", "Ayautla Mazatec"], ["vmz", "Mazatlán Mazatec"], ["vnk", "Vano, Lovono"], ["vnm", "Vinmavis, Neve'ei"], ["vnp", "Vunapu"], ["vor", "Voro"], ["vot", "Votic"], ["vra", "Vera'a"], ["vro", "Võro"], ["vrs", "Varisi"], ["vrt", "Burmbar, Banam Bay"], ["vsi", "Moldova Sign Language"], ["vsl", "Venezuelan Sign Language"], ["vsv", "Valencian Sign Language, Llengua de signes valenciana"], ["vto", "Vitou"], ["vum", "Vumbu"], ["vun", "Vunjo"], ["vut", "Vute"], ["vwa", "Awa (China)"], ["waa", "Walla Walla"], ["wab", "Wab"], ["wac", "Wasco-Wishram"], ["wad", "Wamesa, Wondama"], ["wae", "Walser"], ["waf", "Wakoná"], ["wag", "Wa'ema"], ["wah", "Watubela"], ["wai", "Wares"], ["waj", "Waffa"], ["wak", "Wakashan languages"], ["wal", "Wolaytta, Wolaitta"], ["wam", "Wampanoag"], ["wan", "Wan"], ["wao", "Wappo"], ["wap", "Wapishana"], ["waq", "Wagiman"], ["war", "Waray (Philippines)"], ["was", "Washo"], ["wat", "Kaninuwa"], ["wau", "Waurá"], ["wav", "Waka"], ["waw", "Waiwai"], ["wax", "Watam, Marangis"], ["way", "Wayana"], ["waz", "Wampur"], ["wba", "Warao"], ["wbb", "Wabo"], ["wbe", "Waritai"], ["wbf", "Wara"], ["wbh", "Wanda"], ["wbi", "Vwanji"], ["wbj", "Alagwa"], ["wbk", "Waigali"], ["wbl", "Wakhi"], ["wbm", "Wa"], ["wbp", "Warlpiri"], ["wbq", "Waddar"], ["wbr", "Wagdi"], ["wbs", "West Bengal Sign Language"], ["wbt", "Warnman"], ["wbv", "Wajarri"], ["wbw", "Woi"], ["wca", "Yanomámi"], ["wci", "Waci Gbe"], ["wdd", "Wandji"], ["wdg", "Wadaginam"], ["wdj", "Wadjiginy"], ["wdk", "Wadikali"], ["wdu", "Wadjigu"], ["wdy", "Wadjabangayi"], ["wea", "Wewaw"], ["wec", "Wè Western"], ["wed", "Wedau"], ["weg", "Wergaia"], ["weh", "Weh"], ["wei", "Kiunum"], ["wem", "Weme Gbe"], ["wen", "Sorbian languages"], ["weo", "Wemale"], ["wep", "Westphalien"], ["wer", "Weri"], ["wes", "Cameroon Pidgin"], ["wet", "Perai"], ["weu", "Rawngtu Chin"], ["wew", "Wejewa"], ["wfg", "Yafi, Zorop"], ["wga", "Wagaya"], ["wgb", "Wagawaga"], ["wgg", "Wangkangurru, Wangganguru"], ["wgi", "Wahgi"], ["wgo", "Waigeo"], ["wgu", "Wirangu"], ["wgw", "Wagawaga"], ["wgy", "Warrgamay"], ["wha", "Sou Upaa, Manusela"], ["whg", "North Wahgi"], ["whk", "Wahau Kenyah"], ["whu", "Wahau Kayan"], ["wib", "Southern Toussian"], ["wic", "Wichita"], ["wie", "Wik-Epa"], ["wif", "Wik-Keyangan"], ["wig", "Wik Ngathan"], ["wih", "Wik-Me'anha"], ["wii", "Minidien"], ["wij", "Wik-Iiyanh"], ["wik", "Wikalkan"], ["wil", "Wilawila"], ["wim", "Wik-Mungkan"], ["win", "Ho-Chunk"], ["wir", "Wiraféd"], ["wit", "Wintu"], ["wiu", "Wiru"], ["wiv", "Vitu"], ["wiw", "Wirangu"], ["wiy", "Wiyot"], ["wja", "Waja"], ["wji", "Warji"], ["wka", "Kw'adza"], ["wkb", "Kumbaran"], ["wkd", "Wakde, Mo"], ["wkl", "Kalanadi"], ["wkr", "Keerray-Woorroong"], ["wku", "Kunduvadi"], ["wkw", "Wakawaka"], ["wky", "Wangkayutyuru"], ["wla", "Walio"], ["wlc", "Mwali Comorian"], ["wle", "Wolane"], ["wlg", "Kunbarlang"], ["wlh", "Welaun"], ["wli", "Waioli"], ["wlk", "Wailaki"], ["wll", "Wali (Sudan)"], ["wlm", "Middle Welsh"], ["wlo", "Wolio"], ["wlr", "Wailapa"], ["wls", "Wallisian"], ["wlu", "Wuliwuli"], ["wlv", "Wichí Lhamtés Vejoz"], ["wlw", "Walak"], ["wlx", "Wali (Ghana)"], ["wly", "Waling"], ["wma", "Mawa (Nigeria)"], ["wmb", "Wambaya"], ["wmc", "Wamas"], ["wmd", "Mamaindé"], ["wme", "Wambule"], ["wmg", "Western Minyag"], ["wmh", "Waima'a"], ["wmi", "Wamin"], ["wmm", "Maiwa (Indonesia)"], ["wmn", "Waamwang"], ["wmo", "Wom (Papua New Guinea)"], ["wms", "Wambon"], ["wmt", "Walmajarri"], ["wmw", "Mwani"], ["wmx", "Womo"], ["wnb", "Wanambre"], ["wnc", "Wantoat"], ["wnd", "Wandarang"], ["wne", "Waneci"], ["wng", "Wanggom"], ["wni", "Ndzwani Comorian"], ["wnk", "Wanukaka"], ["wnm", "Wanggamala"], ["wnn", "Wunumara"], ["wno", "Wano"], ["wnp", "Wanap"], ["wnu", "Usan"], ["wnw", "Wintu"], ["wny", "Wanyi, Waanyi"], ["woa", "Kuwema, Tyaraity"], ["wob", "Wè Northern"], ["woc", "Wogeo"], ["wod", "Wolani"], ["woe", "Woleaian"], ["wof", "Gambian Wolof"], ["wog", "Wogamusin"], ["woi", "Kamang"], ["wok", "Longto"], ["wom", "Wom (Nigeria)"], ["won", "Wongo"], ["woo", "Manombai"], ["wor", "Woria"], ["wos", "Hanga Hundi"], ["wow", "Wawonii"], ["woy", "Weyto"], ["wpc", "Maco"], ["wra", "Warapu"], ["wrb", "Waluwarra, Warluwara"], ["wrd", "Warduji"], ["wrg", "Warungu, Gudjal"], ["wrh", "Wiradjuri"], ["wri", "Wariyangga"], ["wrk", "Garrwa"], ["wrl", "Warlmanpa"], ["wrm", "Warumungu"], ["wrn", "Warnang"], ["wro", "Worrorra"], ["wrp", "Waropen"], ["wrr", "Wardaman"], ["wrs", "Waris"], ["wru", "Waru"], ["wrv", "Waruna"], ["wrw", "Gugu Warra"], ["wrx", "Wae Rana"], ["wry", "Merwari"], ["wrz", "Waray (Australia)"], ["wsa", "Warembori"], ["wsg", "Adilabad Gondi"], ["wsi", "Wusi"], ["wsk", "Waskia"], ["wsr", "Owenia"], ["wss", "Wasa"], ["wsu", "Wasu"], ["wsv", "Wotapuri-Katarqalai"], ["wtf", "Watiwa"], ["wth", "Wathawurrung"], ["wti", "Berta"], ["wtk", "Watakataui"], ["wtm", "Mewati"], ["wtw", "Wotu"], ["wua", "Wikngenchera"], ["wub", "Wunambal"], ["wud", "Wudu"], ["wuh", "Wutunhua"], ["wul", "Silimo"], ["wum", "Wumbvu"], ["wun", "Bungu"], ["wur", "Wurrugu"], ["wut", "Wutung"], ["wuu", "Wu Chinese"], ["wuv", "Wuvulu-Aua"], ["wux", "Wulna"], ["wuy", "Wauyai"], ["wwa", "Waama"], ["wwb", "Wakabunga"], ["wwo", "Wetamut, Dorig"], ["wwr", "Warrwa"], ["www", "Wawa"], ["wxa", "Waxianghua"], ["wxw", "Wardandi"], ["wya", "Wyandot"], ["wyb", "Wangaaybuwan-Ngiyambaa"], ["wyi", "Woiwurrung"], ["wym", "Wymysorys"], ["wyr", "Wayoró"], ["wyy", "Western Fijian"], ["xaa", "Andalusian Arabic"], ["xab", "Sambe"], ["xac", "Kachari"], ["xad", "Adai"], ["xae", "Aequian"], ["xag", "Aghwan"], ["xai", "Kaimbé"], ["xaj", "Ararandewára"], ["xak", "Máku"], ["xal", "Kalmyk, Oirat"], ["xam", "ǀXam"], ["xan", "Xamtanga"], ["xao", "Khao"], ["xap", "Apalachee"], ["xaq", "Aquitanian"], ["xar", "Karami"], ["xas", "Kamas"], ["xat", "Katawixi"], ["xau", "Kauwera"], ["xav", "Xavánte"], ["xaw", "Kawaiisu"], ["xay", "Kayan Mahakam"], ["xba", "Kamba (Brazil)"], ["xbb", "Lower Burdekin"], ["xbc", "Bactrian"], ["xbd", "Bindal"], ["xbe", "Bigambal"], ["xbg", "Bunganditj"], ["xbi", "Kombio"], ["xbj", "Birrpayi"], ["xbm", "Middle Breton"], ["xbn", "Kenaboi"], ["xbo", "Bolgarian"], ["xbp", "Bibbulman"], ["xbr", "Kambera"], ["xbw", "Kambiwá"], ["xbx", "Kabixí"], ["xby", "Batjala, Batyala"], ["xcb", "Cumbric"], ["xcc", "Camunic"], ["xce", "Celtiberian"], ["xcg", "Cisalpine Gaulish"], ["xch", "Chemakum, Chimakum"], ["xcl", "Classical Armenian"], ["xcm", "Comecrudo"], ["xcn", "Cotoname"], ["xco", "Chorasmian"], ["xcr", "Carian"], ["xct", "Classical Tibetan"], ["xcu", "Curonian"], ["xcv", "Chuvantsy"], ["xcw", "Coahuilteco"], ["xcy", "Cayuse"], ["xda", "Darkinyung"], ["xdc", "Dacian"], ["xdk", "Dharuk"], ["xdm", "Edomite"], ["xdo", "Kwandu"], ["xdy", "Malayic Dayak"], ["xeb", "Eblan"], ["xed", "Hdi"], ["xeg", "ǁXegwi"], ["xel", "Kelo"], ["xem", "Kembayan"], ["xep", "Epi-Olmec"], ["xer", "Xerénte"], ["xes", "Kesawai"], ["xet", "Xetá"], ["xeu", "Keoru-Ahia"], ["xfa", "Faliscan"], ["xga", "Galatian"], ["xgb", "Gbin"], ["xgd", "Gudang"], ["xgf", "Gabrielino-Fernandeño"], ["xgg", "Goreng"], ["xgi", "Garingbal"], ["xgl", "Galindan"], ["xgm", "Dharumbal, Guwinmal"], ["xgn", "Mongolian languages"], ["xgr", "Garza"], ["xgu", "Unggumi"], ["xgw", "Guwa"], ["xha", "Harami"], ["xhc", "Hunnic"], ["xhd", "Hadrami"], ["xhe", "Khetrani"], ["xhr", "Hernican"], ["xht", "Hattic"], ["xhu", "Hurrian"], ["xhv", "Khua"], ["xia", "Xiandao"], ["xib", "Iberian"], ["xii", "Xiri"], ["xil", "Illyrian"], ["xin", "Xinca"], ["xip", "Xipináwa"], ["xir", "Xiriâna"], ["xis", "Kisan"], ["xiv", "Indus Valley Language"], ["xiy", "Xipaya"], ["xjb", "Minjungbal"], ["xjt", "Jaitmatang"], ["xka", "Kalkoti"], ["xkb", "Northern Nago"], ["xkc", "Kho'ini"], ["xkd", "Mendalam Kayan"], ["xke", "Kereho"], ["xkf", "Khengkha"], ["xkg", "Kagoro"], ["xkh", "Karahawyana"], ["xki", "Kenyan Sign Language"], ["xkj", "Kajali"], ["xkk", "Kaco'"], ["xkl", "Mainstream Kenyah"], ["xkn", "Kayan River Kayan"], ["xko", "Kiorr"], ["xkp", "Kabatei"], ["xkq", "Koroni"], ["xkr", "Xakriabá"], ["xks", "Kumbewaha"], ["xkt", "Kantosi"], ["xku", "Kaamba"], ["xkv", "Kgalagadi"], ["xkw", "Kembra"], ["xkx", "Karore"], ["xky", "Uma' Lasan"], ["xkz", "Kurtokha"], ["xla", "Kamula"], ["xlb", "Loup B"], ["xlc", "Lycian"], ["xld", "Lydian"], ["xle", "Lemnian"], ["xlg", "Ligurian (Ancient)"], ["xli", "Liburnian"], ["xln", "Alanic"], ["xlo", "Loup A"], ["xlp", "Lepontic"], ["xls", "Lusitanian"], ["xlu", "Cuneiform Luwian"], ["xly", "Elymian"], ["xma", "Mushungulu"], ["xmb", "Mbonga"], ["xmc", "Makhuwa-Marrevone"], ["xmd", "Mbudum"], ["xme", "Median"], ["xmf", "Mingrelian"], ["xmg", "Mengaka"], ["xmh", "Kugu-Muminh"], ["xmj", "Majera"], ["xmk", "Ancient Macedonian"], ["xml", "Malaysian Sign Language"], ["xmm", "Manado Malay"], ["xmn", "Manichaean Middle Persian"], ["xmo", "Morerebi"], ["xmp", "Kuku-Mu'inh"], ["xmq", "Kuku-Mangk"], ["xmr", "Meroitic"], ["xms", "Moroccan Sign Language"], ["xmt", "Matbat"], ["xmu", "Kamu"], ["xmv", "Antankarana Malagasy, Tankarana Malagasy"], ["xmw", "Tsimihety Malagasy"], ["xmx", "Maden"], ["xmy", "Mayaguduna"], ["xmz", "Mori Bawah"], ["xna", "Ancient North Arabian"], ["xnb", "Kanakanabu"], ["xnd", "Na-Dene languages"], ["xng", "Middle Mongolian"], ["xnh", "Kuanhua"], ["xni", "Ngarigu"], ["xnj", "Ngoni (Tanzania)"], ["xnk", "Nganakarti"], ["xnm", "Ngumbarl"], ["xnn", "Northern Kankanay"], ["xno", "Anglo-Norman"], ["xnq", "Ngoni (Mozambique)"], ["xnr", "Kangri"], ["xns", "Kanashi"], ["xnt", "Narragansett"], ["xnu", "Nukunul"], ["xny", "Nyiyaparli"], ["xnz", "Kenzi, Mattoki"], ["xoc", "O'chi'chi'"], ["xod", "Kokoda"], ["xog", "Soga"], ["xoi", "Kominimung"], ["xok", "Xokleng"], ["xom", "Komo (Sudan)"], ["xon", "Konkomba"], ["xoo", "Xukurú"], ["xop", "Kopar"], ["xor", "Korubo"], ["xow", "Kowaki"], ["xpa", "Pirriya"], ["xpb", "Northeastern Tasmanian, Pyemmairrener"], ["xpc", "Pecheneg"], ["xpd", "Oyster Bay Tasmanian"], ["xpe", "Liberia Kpelle"], ["xpf", "Southeast Tasmanian, Nuenonne"], ["xpg", "Phrygian"], ["xph", "North Midlands Tasmanian, Tyerrenoterpanner"], ["xpi", "Pictish"], ["xpj", "Mpalitjanh"], ["xpk", "Kulina Pano"], ["xpl", "Port Sorell Tasmanian"], ["xpm", "Pumpokol"], ["xpn", "Kapinawá"], ["xpo", "Pochutec"], ["xpp", "Puyo-Paekche"], ["xpq", "Mohegan-Pequot"], ["xpr", "Parthian"], ["xps", "Pisidian"], ["xpt", "Punthamara"], ["xpu", "Punic"], ["xpv", "Northern Tasmanian, Tommeginne"], ["xpw", "Northwestern Tasmanian, Peerapper"], ["xpx", "Southwestern Tasmanian, Toogee"], ["xpy", "Puyo"], ["xpz", "Bruny Island Tasmanian"], ["xqa", "Karakhanid"], ["xqt", "Qatabanian"], ["xra", "Krahô"], ["xrb", "Eastern Karaboro"], ["xrd", "Gundungurra"], ["xre", "Kreye"], ["xrg", "Minang"], ["xri", "Krikati-Timbira"], ["xrm", "Armazic"], ["xrn", "Arin"], ["xrq", "Karranga"], ["xrr", "Raetic"], ["xrt", "Aranama-Tamique"], ["xru", "Marriammu"], ["xrw", "Karawa"], ["xsa", "Sabaean"], ["xsb", "Sambal"], ["xsc", "Scythian"], ["xsd", "Sidetic"], ["xse", "Sempan"], ["xsh", "Shamang"], ["xsi", "Sio"], ["xsj", "Subi"], ["xsl", "South Slavey"], ["xsm", "Kasem"], ["xsn", "Sanga (Nigeria)"], ["xso", "Solano"], ["xsp", "Silopi"], ["xsq", "Makhuwa-Saka"], ["xsr", "Sherpa"], ["xss", "Assan"], ["xsu", "Sanumá"], ["xsv", "Sudovian"], ["xsy", "Saisiyat"], ["xta", "Alcozauca Mixtec"], ["xtb", "Chazumba Mixtec"], ["xtc", "Katcha-Kadugli-Miri"], ["xtd", "Diuxi-Tilantongo Mixtec"], ["xte", "Ketengban"], ["xtg", "Transalpine Gaulish"], ["xth", "Yitha Yitha"], ["xti", "Sinicahua Mixtec"], ["xtj", "San Juan Teita Mixtec"], ["xtl", "Tijaltepec Mixtec"], ["xtm", "Magdalena Peñasco Mixtec"], ["xtn", "Northern Tlaxiaco Mixtec"], ["xto", "Tokharian A"], ["xtp", "San Miguel Piedras Mixtec"], ["xtq", "Tumshuqese"], ["xtr", "Early Tripuri"], ["xts", "Sindihui Mixtec"], ["xtt", "Tacahua Mixtec"], ["xtu", "Cuyamecalco Mixtec"], ["xtv", "Thawa"], ["xtw", "Tawandê"], ["xty", "Yoloxochitl Mixtec"], ["xtz", "Tasmanian"], ["xua", "Alu Kurumba"], ["xub", "Betta Kurumba"], ["xud", "Umiida"], ["xug", "Kunigami"], ["xuj", "Jennu Kurumba"], ["xul", "Ngunawal, Nunukul"], ["xum", "Umbrian"], ["xun", "Unggaranggu"], ["xuo", "Kuo"], ["xup", "Upper Umpqua"], ["xur", "Urartian"], ["xut", "Kuthant"], ["xuu", "Kxoe, Khwedam"], ["xve", "Venetic"], ["xvi", "Kamviri"], ["xvn", "Vandalic"], ["xvo", "Volscian"], ["xvs", "Vestinian"], ["xwa", "Kwaza"], ["xwc", "Woccon"], ["xwd", "Wadi Wadi"], ["xwe", "Xwela Gbe"], ["xwg", "Kwegu"], ["xwj", "Wajuk"], ["xwk", "Wangkumara"], ["xwl", "Western Xwla Gbe"], ["xwo", "Written Oirat"], ["xwr", "Kwerba Mamberamo"], ["xwt", "Wotjobaluk"], ["xww", "Wemba Wemba"], ["xxb", "Boro (Ghana)"], ["xxk", "Ke'o"], ["xxm", "Minkin"], ["xxr", "Koropó"], ["xxt", "Tambora"], ["xya", "Yaygir"], ["xyb", "Yandjibara"], ["xyj", "Mayi-Yapi"], ["xyk", "Mayi-Kulan"], ["xyl", "Yalakalore"], ["xyt", "Mayi-Thakurti"], ["xyy", "Yorta Yorta"], ["xzh", "Zhang-Zhung"], ["xzm", "Zemgalian"], ["xzp", "Ancient Zapotec"], ["yaa", "Yaminahua"], ["yab", "Yuhup"], ["yac", "Pass Valley Yali"], ["yad", "Yagua"], ["yae", "Pumé"], ["yaf", "Yaka (Democratic Republic of Congo)"], ["yag", "Yámana"], ["yah", "Yazgulyam"], ["yai", "Yagnobi"], ["yaj", "Banda-Yangere"], ["yak", "Yakama"], ["yal", "Yalunka"], ["yam", "Yamba"], ["yan", "Mayangna"], ["yao", "Yao"], ["yap", "Yapese"], ["yaq", "Yaqui"], ["yar", "Yabarana"], ["yas", "Nugunu (Cameroon)"], ["yat", "Yambeta"], ["yau", "Yuwana"], ["yav", "Yangben"], ["yaw", "Yawalapití"], ["yax", "Yauma"], ["yay", "Agwagwune"], ["yaz", "Lokaa"], ["yba", "Yala"], ["ybb", "Yemba"], ["ybd", "Yangbye"], ["ybe", "West Yugur"], ["ybh", "Yakha"], ["ybi", "Yamphu"], ["ybj", "Hasha"], ["ybk", "Bokha"], ["ybl", "Yukuben"], ["ybm", "Yaben"], ["ybn", "Yabaâna"], ["ybo", "Yabong"], ["ybx", "Yawiyo"], ["yby", "Yaweyuha"], ["ych", "Chesu"], ["ycl", "Lolopo"], ["ycn", "Yucuna"], ["ycp", "Chepya"], ["yda", "Yanda"], ["ydd", "Eastern Yiddish"], ["yde", "Yangum Dey"], ["ydg", "Yidgha"], ["ydk", "Yoidik"], ["yds", "Yiddish Sign Language"], ["yea", "Ravula"], ["yec", "Yeniche"], ["yee", "Yimas"], ["yei", "Yeni"], ["yej", "Yevanic"], ["yel", "Yela"], ["yen", "Yendang"], ["yer", "Tarok"], ["yes", "Nyankpa"], ["yet", "Yetfa"], ["yeu", "Yerukula"], ["yev", "Yapunda"], ["yey", "Yeyi"], ["yga", "Malyangapa"], ["ygi", "Yiningayi"], ["ygl", "Yangum Gel"], ["ygm", "Yagomi"], ["ygp", "Gepo"], ["ygr", "Yagaria"], ["ygs", "Yolŋu Sign Language"], ["ygu", "Yugul"], ["ygw", "Yagwoia"], ["yha", "Baha Buyang"], ["yhd", "Judeo-Iraqi Arabic"], ["yhl", "Hlepho Phowa"], ["yhs", "Yan-nhaŋu Sign Language"], ["yia", "Yinggarda"], ["yif", "Ache"], ["yig", "Wusa Nasu"], ["yih", "Western Yiddish"], ["yii", "Yidiny"], ["yij", "Yindjibarndi"], ["yik", "Dongshanba Lalo"], ["yil", "Yindjilandji"], ["yim", "Yimchungru Naga"], ["yin", "Riang Lai, Yinchia"], ["yip", "Pholo"], ["yiq", "Miqie"], ["yir", "North Awyu"], ["yis", "Yis"], ["yit", "Eastern Lalu"], ["yiu", "Awu"], ["yiv", "Northern Nisu"], ["yix", "Axi Yi"], ["yiy", "Yir Yoront"], ["yiz", "Azhe"], ["yka", "Yakan"], ["ykg", "Northern Yukaghir"], ["yki", "Yoke"], ["ykk", "Yakaikeke"], ["ykl", "Khlula"], ["ykm", "Kap"], ["ykn", "Kua-nsi"], ["yko", "Yasa"], ["ykr", "Yekora"], ["ykt", "Kathu"], ["yku", "Kuamasi"], ["yky", "Yakoma"], ["yla", "Yaul"], ["ylb", "Yaleba"], ["yle", "Yele"], ["ylg", "Yelogu"], ["yli", "Angguruk Yali"], ["yll", "Yil"], ["ylm", "Limi"], ["yln", "Langnian Buyang"], ["ylo", "Naluo Yi"], ["ylr", "Yalarnnga"], ["ylu", "Aribwaung"], ["yly", "Nyâlayu, Nyelâyu"], ["yma", "Yamphe"], ["ymb", "Yambes"], ["ymc", "Southern Muji"], ["ymd", "Muda"], ["yme", "Yameo"], ["ymg", "Yamongeri"], ["ymh", "Mili"], ["ymi", "Moji"], ["ymk", "Makwe"], ["yml", "Iamalele"], ["ymm", "Maay"], ["ymn", "Yamna, Sunum"], ["ymo", "Yangum Mon"], ["ymp", "Yamap"], ["ymq", "Qila Muji"], ["ymr", "Malasar"], ["yms", "Mysian"], ["ymt", "Mator-Taygi-Karagas"], ["ymx", "Northern Muji"], ["ymz", "Muzi"], ["yna", "Aluo"], ["ynd", "Yandruwandha"], ["yne", "Lang'e"], ["yng", "Yango"], ["ynh", "Yangho"], ["ynk", "Naukan Yupik"], ["ynl", "Yangulam"], ["ynn", "Yana"], ["yno", "Yong"], ["ynq", "Yendang"], ["yns", "Yansi"], ["ynu", "Yahuna"], ["yob", "Yoba"], ["yog", "Yogad"], ["yoi", "Yonaguni"], ["yok", "Yokuts"], ["yol", "Yola"], ["yom", "Yombe"], ["yon", "Yongkom"], ["yos", "Yos"], ["yot", "Yotti"], ["yox", "Yoron"], ["yoy", "Yoy"], ["ypa", "Phala"], ["ypb", "Labo Phowa"], ["ypg", "Phola"], ["yph", "Phupha"], ["ypk", "Yupik languages"], ["ypm", "Phuma"], ["ypn", "Ani Phowa"], ["ypo", "Alo Phola"], ["ypp", "Phupa"], ["ypz", "Phuza"], ["yra", "Yerakai"], ["yrb", "Yareba"], ["yre", "Yaouré"], ["yri", "Yarí"], ["yrk", "Nenets"], ["yrl", "Nhengatu"], ["yrm", "Yirrk-Mel"], ["yrn", "Yerong"], ["yro", "Yaroamë"], ["yrs", "Yarsun"], ["yrw", "Yarawata"], ["yry", "Yarluyandi"], ["ysc", "Yassic"], ["ysd", "Samatao"], ["ysg", "Sonaga"], ["ysl", "Yugoslavian Sign Language"], ["ysm", "Myanmar Sign Language"], ["ysn", "Sani"], ["yso", "Nisi (China)"], ["ysp", "Southern Lolopo"], ["ysr", "Sirenik Yupik"], ["yss", "Yessan-Mayo"], ["ysy", "Sanie"], ["yta", "Talu"], ["ytl", "Tanglang"], ["ytp", "Thopho"], ["ytw", "Yout Wam"], ["yty", "Yatay"], ["yua", "Yucateco, Yucatec Maya"], ["yub", "Yugambal"], ["yuc", "Yuchi"], ["yud", "Judeo-Tripolitanian Arabic"], ["yue", "Yue Chinese, Cantonese"], ["yuf", "Havasupai-Walapai-Yavapai"], ["yug", "Yug"], ["yui", "Yurutí"], ["yuj", "Karkar-Yuri"], ["yuk", "Yuki"], ["yul", "Yulu"], ["yum", "Quechan"], ["yun", "Bena (Nigeria)"], ["yup", "Yukpa"], ["yuq", "Yuqui"], ["yur", "Yurok"], ["yut", "Yopno"], ["yuu", "Yugh"], ["yuw", "Yau (Morobe Province)"], ["yux", "Southern Yukaghir"], ["yuy", "East Yugur"], ["yuz", "Yuracare"], ["yva", "Yawa"], ["yvt", "Yavitero"], ["ywa", "Kalou"], ["ywg", "Yinhawangka"], ["ywl", "Western Lalu"], ["ywn", "Yawanawa"], ["ywq", "Wuding-Luquan Yi"], ["ywr", "Yawuru"], ["ywt", "Xishanba Lalo, Central Lalo"], ["ywu", "Wumeng Nasu"], ["yww", "Yawarawarga"], ["yxa", "Mayawali"], ["yxg", "Yagara"], ["yxl", "Yardliyawarra"], ["yxm", "Yinwum"], ["yxu", "Yuyu"], ["yxy", "Yabula Yabula"], ["yyr", "Yir Yoront"], ["yyu", "Yau (Sandaun Province)"], ["yyz", "Ayizi"], ["yzg", "E'ma Buyang"], ["yzk", "Zokhuo"], ["zaa", "Sierra de Juárez Zapotec"], ["zab", "Western Tlacolula Valley Zapotec, San Juan Guelavía Zapotec"], ["zac", "Ocotlán Zapotec"], ["zad", "Cajonos Zapotec"], ["zae", "Yareni Zapotec"], ["zaf", "Ayoquesco Zapotec"], ["zag", "Zaghawa"], ["zah", "Zangwal"], ["zai", "Isthmus Zapotec"], ["zaj", "Zaramo"], ["zak", "Zanaki"], ["zal", "Zauzou"], ["zam", "Miahuatlán Zapotec"], ["zao", "Ozolotepec Zapotec"], ["zap", "Zapotec"], ["zaq", "Aloápam Zapotec"], ["zar", "Rincón Zapotec"], ["zas", "Santo Domingo Albarradas Zapotec"], ["zat", "Tabaa Zapotec"], ["zau", "Zangskari"], ["zav", "Yatzachi Zapotec"], ["zaw", "Mitla Zapotec"], ["zax", "Xadani Zapotec"], ["zay", "Zayse-Zergulla, Zaysete"], ["zaz", "Zari"], ["zba", "Balaibalan"], ["zbc", "Central Berawan"], ["zbe", "East Berawan"], ["zbl", "Blissymbols, Bliss, Blissymbolics"], ["zbt", "Batui"], ["zbu", "Bu (Bauchi State)"], ["zbw", "West Berawan"], ["zca", "Coatecas Altas Zapotec"], ["zch", "Central Hongshuihe Zhuang"], ["zdj", "Ngazidja Comorian"], ["zea", "Zeeuws"], ["zeg", "Zenag"], ["zeh", "Eastern Hongshuihe Zhuang"], ["zen", "Zenaga"], ["zga", "Kinga"], ["zgb", "Guibei Zhuang"], ["zgh", "Standard Moroccan Tamazight"], ["zgm", "Minz Zhuang"], ["zgn", "Guibian Zhuang"], ["zgr", "Magori"], ["zhb", "Zhaba"], ["zhd", "Dai Zhuang"], ["zhi", "Zhire"], ["zhn", "Nong Zhuang"], ["zhw", "Zhoa"], ["zhx", "Chinese (family)"], ["zia", "Zia"], ["zib", "Zimbabwe Sign Language"], ["zik", "Zimakani"], ["zil", "Zialo"], ["zim", "Mesme"], ["zin", "Zinza"], ["zir", "Ziriya"], ["ziw", "Zigula"], ["ziz", "Zizilivakan"], ["zka", "Kaimbulawa"], ["zkb", "Koibal"], ["zkd", "Kadu"], ["zkg", "Koguryo"], ["zkh", "Khorezmian"], ["zkk", "Karankawa"], ["zkn", "Kanan"], ["zko", "Kott"], ["zkp", "São Paulo Kaingáng"], ["zkr", "Zakhring"], ["zkt", "Kitan"], ["zku", "Kaurna"], ["zkv", "Krevinian"], ["zkz", "Khazar"], ["zla", "Zula"], ["zle", "East Slavic languages"], ["zlj", "Liujiang Zhuang"], ["zlm", "Malay (individual language)"], ["zln", "Lianshan Zhuang"], ["zlq", "Liuqian Zhuang"], ["zls", "South Slavic languages"], ["zlw", "West Slavic languages"], ["zma", "Manda (Australia)"], ["zmb", "Zimba"], ["zmc", "Margany"], ["zmd", "Maridan"], ["zme", "Mangerr"], ["zmf", "Mfinu"], ["zmg", "Marti Ke"], ["zmh", "Makolkol"], ["zmi", "Negeri Sembilan Malay"], ["zmj", "Maridjabin"], ["zmk", "Mandandanyi"], ["zml", "Matngala"], ["zmm", "Marimanindji, Marramaninyshi"], ["zmn", "Mbangwe"], ["zmo", "Molo"], ["zmp", "Mpuono"], ["zmq", "Mituku"], ["zmr", "Maranunggu"], ["zms", "Mbesa"], ["zmt", "Maringarr"], ["zmu", "Muruwari"], ["zmv", "Mbariman-Gudhinma"], ["zmw", "Mbo (Democratic Republic of Congo)"], ["zmx", "Bomitaba"], ["zmy", "Mariyedi"], ["zmz", "Mbandja"], ["zna", "Zan Gula"], ["znd", "Zande languages"], ["zne", "Zande (individual language)"], ["zng", "Mang"], ["znk", "Manangkari"], ["zns", "Mangas"], ["zoc", "Copainalá Zoque"], ["zoh", "Chimalapa Zoque"], ["zom", "Zou"], ["zoo", "Asunción Mixtepec Zapotec"], ["zoq", "Tabasco Zoque"], ["zor", "Rayón Zoque"], ["zos", "Francisco León Zoque"], ["zpa", "Lachiguiri Zapotec"], ["zpb", "Yautepec Zapotec"], ["zpc", "Choapan Zapotec"], ["zpd", "Southeastern Ixtlán Zapotec"], ["zpe", "Petapa Zapotec"], ["zpf", "San Pedro Quiatoni Zapotec"], ["zpg", "Guevea De Humboldt Zapotec"], ["zph", "Totomachapan Zapotec"], ["zpi", "Santa María Quiegolani Zapotec"], ["zpj", "Quiavicuzas Zapotec"], ["zpk", "Tlacolulita Zapotec"], ["zpl", "Lachixío Zapotec"], ["zpm", "Mixtepec Zapotec"], ["zpn", "Santa Inés Yatzechi Zapotec"], ["zpo", "Amatlán Zapotec"], ["zpp", "El Alto Zapotec"], ["zpq", "Zoogocho Zapotec"], ["zpr", "Santiago Xanica Zapotec"], ["zps", "Coatlán Zapotec"], ["zpt", "San Vicente Coatlán Zapotec"], ["zpu", "Yalálag Zapotec"], ["zpv", "Chichicapan Zapotec"], ["zpw", "Zaniza Zapotec"], ["zpx", "San Baltazar Loxicha Zapotec"], ["zpy", "Mazaltepec Zapotec"], ["zpz", "Texmelucan Zapotec"], ["zqe", "Qiubei Zhuang"], ["zra", "Kara (Korea)"], ["zrg", "Mirgan"], ["zrn", "Zerenkel"], ["zro", "Záparo"], ["zrp", "Zarphatic"], ["zrs", "Mairasi"], ["zsa", "Sarasira"], ["zsk", "Kaskean"], ["zsl", "Zambian Sign Language"], ["zsm", "Standard Malay"], ["zsr", "Southern Rincon Zapotec"], ["zsu", "Sukurum"], ["zte", "Elotepec Zapotec"], ["ztg", "Xanaguía Zapotec"], ["ztl", "Lapaguía-Guivini Zapotec"], ["ztm", "San Agustín Mixtepec Zapotec"], ["ztn", "Santa Catarina Albarradas Zapotec"], ["ztp", "Loxicha Zapotec"], ["ztq", "Quioquitani-Quierí Zapotec"], ["zts", "Tilquiapan Zapotec"], ["ztt", "Tejalapan Zapotec"], ["ztu", "Güilá Zapotec"], ["ztx", "Zaachila Zapotec"], ["zty", "Yatee Zapotec"], ["zua", "Zeem"], ["zuh", "Tokano"], ["zum", "Kumzari"], ["zun", "Zuni"], ["zuy", "Zumaya"], ["zwa", "Zay"], ["zxx", "No linguistic content, Not applicable"], ["zyb", "Yongbei Zhuang"], ["zyg", "Yang Zhuang"], ["zyj", "Youjiang Zhuang"], ["zyn", "Yongnan Zhuang"], ["zyp", "Zyphe Chin"], ["zza", "Zaza, Dimili, Dimli (macrolanguage), Kirdki, Kirmanjki (macrolanguage), Zazaki"], ["zzj", "Zuojiang Zhuang"]];

    var getLanguageLabel = /*#__PURE__*/function () {
      var _ref = /*#__PURE__*/_asyncToGenerator(function* (langCode) {
        var langCodeParts = langCode.split('-');
        var testParts = [];
        var testers = [];

        for (var langCodePart of langCodeParts) {
          testParts.push(langCodePart);
          testers.push(testParts.join('-'));
        }

        testers.reverse();
        var languageLabel = '';

        var _loop = function _loop(tester) {
          if (!languageLabel) {
            var _languages$find$, _languages$find;

            languageLabel = (_languages$find$ = (_languages$find = languages.find(language => language[0].startsWith(tester))) == null ? void 0 : _languages$find[1]) != null ? _languages$find$ : '';
          }
        };

        for (var tester of testers) {
          _loop(tester);
        }

        var scriptMapping = {
          'latn': t.direct('Latin').toString(),
          'cyrl': t.direct('Cyrillic').toString()
        };
        var hasScript = '';

        var _loop2 = function _loop2(script) {
          if (langCodeParts.some(item => item.toLowerCase() === script)) {
            hasScript = "" + scriptMapping[script.toLowerCase()];
          }
        };

        for (var script of Object.keys(scriptMapping)) {
          _loop2(script);
        }

        return (languageLabel + " " + hasScript).trim();
      });

      return function getLanguageLabel(_x) {
        return _ref.apply(this, arguments);
      };
    }();
    var filterLanguages = /*#__PURE__*/function () {
      var _ref2 = /*#__PURE__*/_asyncToGenerator(function* (search) {
        if (!search) return [];
        return languages.filter(language => language[1].toLowerCase().includes(search.toLowerCase()));
      });

      return function filterLanguages(_x2) {
        return _ref2.apply(this, arguments);
      };
    }();
    var langCodesToObject = /*#__PURE__*/function () {
      var _ref3 = /*#__PURE__*/_asyncToGenerator(function* (langCodes) {
        var languages = {};

        for (var langCode of langCodes) {
          languages[langCode] = yield getLanguageLabel(langCode);
        }

        return languages;
      });

      return function langCodesToObject(_x3) {
        return _ref3.apply(this, arguments);
      };
    }();
    var currentUiLanguage = 'en';
    var currentL10nLanguage;
    var uiLanguages = {
      'en': 'English'
    };
    var l10nLanguages = {
      'en': 'English'
    };
    var requiredL10nLanguages = [];
    class LanguageService extends EventTarget {
      constructor() {
        super();
        this.ready = false;
      }

      init(rdfForm) {
        var _this = this;

        return _asyncToGenerator(function* () {
          yield _this.setUiLanguage('en');

          _this.dispatchEvent(new CustomEvent('indexing-languages', {
            detail: {
              languages
            }
          }));

          var continueInit = /*#__PURE__*/function () {
            var _ref4 = _asyncToGenerator(function* () {
              var _JSON$parse, _JSON$parse2, _rdfForm$getAttribute;

              var usedLanguages = yield _this.extractUsedLanguages(rdfForm.formData.proxy);
              var defaultLanguages = (_JSON$parse = JSON.parse(rdfForm.getAttribute('languages'))) != null ? _JSON$parse : usedLanguages.length ? yield langCodesToObject(usedLanguages) : {};
              var parsedLanguages = JSON.parse(rdfForm.getAttribute('l10n-languages'));
              _this.l10nLanguages = Object.assign({}, parsedLanguages, defaultLanguages);

              if (rdfForm.getAttribute('required-l10n-languages')) {
                requiredL10nLanguages = rdfForm.getAttribute('required-l10n-languages').split(',');
              }

              if (rdfForm.getAttribute('selected-l10n-language') && rdfForm.getAttribute('selected-l10n-language').toLowerCase() in _this.l10nLanguages) {
                _this.l10nLanguage = rdfForm.getAttribute('selected-l10n-language').toLowerCase();
              }

              _this.uiLanguages = (_JSON$parse2 = JSON.parse(rdfForm.getAttribute('ui-languages'))) != null ? _JSON$parse2 : {};
              yield _this.setUiLanguage((_rdfForm$getAttribute = rdfForm.getAttribute('selected-language')) != null ? _rdfForm$getAttribute : 'en');
              _this.ready = true;

              _this.dispatchEvent(new CustomEvent('ready'));
            });

            return function continueInit() {
              return _ref4.apply(this, arguments);
            };
          }();

          rdfForm.formData.ready ? continueInit() : rdfForm.formData.addEventListener('ready', continueInit, {
            once: true
          });
        })();
      }

      get requiredL10nLanguages() {
        return requiredL10nLanguages;
      }

      get uiLanguage() {
        return currentUiLanguage;
      }

      setUiLanguage(languageCode) {
        var _this2 = this;

        return _asyncToGenerator(function* () {
          currentUiLanguage = languageCode;
          t = yield I18n(languageCode, 'RdfForm', Object.keys(_this2.uiLanguages), 'en');

          _this2.dispatchEvent(new CustomEvent('language-change'));
        })();
      }

      set l10nLanguage(langCode) {
        currentL10nLanguage = langCode;
        this.dispatchEvent(new CustomEvent('l10n-change', {
          detail: langCode
        }));
      }

      get l10nLanguage() {
        return currentL10nLanguage;
      }

      set l10nLanguages(languages) {
        var oldLanguageCodes = Object.keys(l10nLanguages);
        var newLanguageCodes = Object.keys(languages);
        var languageCodesToAdd = newLanguageCodes.filter(x => !oldLanguageCodes.includes(x));
        var languageCodesToDelete = oldLanguageCodes.filter(x => !newLanguageCodes.includes(x));

        if (languageCodesToDelete.includes(currentL10nLanguage)) {
          currentL10nLanguage = newLanguageCodes[0];
        }

        for (var langCode of languageCodesToAdd) {
          this.dispatchEvent(new CustomEvent('this.added', {
            detail: langCode
          }));
        }

        for (var _langCode of languageCodesToDelete) {
          this.dispatchEvent(new CustomEvent('this.removed', {
            detail: _langCode
          }));
        }

        l10nLanguages = languages;

        if (!currentL10nLanguage) {
          currentL10nLanguage = Object.keys(l10nLanguages)[0];
        }
      }

      get l10nLanguages() {
        return l10nLanguages;
      }

      set uiLanguages(languages) {
        uiLanguages = languages;
      }

      get uiLanguages() {
        return uiLanguages;
      }

      multilingualValue(values, type) {
        var _ref5, _ref6, _currentLanguageMatch;

        if (type === void 0) {
          type = 'ui';
        }

        if (!Array.isArray(values)) values = [values];
        var currentLanguageMatch = values.find(value => value['@language'] === (type === 'ui' ? this.uiLanguage : this.l10nLanguage));
        var fallbackNoLanguageMatch = values.find(value => !value['@language']);
        return (_ref5 = (_ref6 = (_currentLanguageMatch = currentLanguageMatch == null ? void 0 : currentLanguageMatch['@value']) != null ? _currentLanguageMatch : fallbackNoLanguageMatch == null ? void 0 : fallbackNoLanguageMatch['@value']) != null ? _ref6 : currentLanguageMatch == null ? void 0 : currentLanguageMatch['@id']) != null ? _ref5 : fallbackNoLanguageMatch == null ? void 0 : fallbackNoLanguageMatch['@id'];
      }

      extractUsedLanguages(jsonLd) {
        var languageCodes = new Set();

        var process = thing => {
          if (!thing) return;
          var iterateble = Array.isArray(thing) ? thing.entries() : Object.entries(thing);

          for (var [key, value] of iterateble) {
            if (key === '@language') languageCodes.add(value);
            if (typeof value !== 'string') process(value);
          }
        };

        process(jsonLd);
        return [...languageCodes.values()];
      }

    }
    var Language = /*#__PURE__*/new LanguageService();
    var t;

    var applyProxy = function applyProxy(url, proxy) {
      if (proxy === void 0) {
        proxy = null;
      }

      url = url.replace('http:', location.protocol);
      if (proxy && !url.startsWith('/') && !url.startsWith('blob')) url = proxy + url;
      return url;
    };

    var only = function only() {
      for (var _len = arguments.length, type = new Array(_len), _key = 0; _key < _len; _key++) {
        type[_key] = arguments[_key];
      }

      return item => {
        var _item$Type;

        return (_item$Type = item['@type']) == null ? void 0 : _item$Type.some(rdfClass => type.includes(lastPart(rdfClass)));
      };
    };
    class FormDefinition extends EventTarget {
      constructor(form) {
        super();
        this.sourceDefinitionCompacted = {};
        this.context = {
          form: null
        };
        this.ready = false;
        this.chain = new Map();
        this.chainReferences = new Map();
        this.ontology = [];
        this.form = form;
        this.formUrl = this.form.getAttribute('form');
        if (!this.formUrl) throw new Error('No data attribute "form" was found on the custom element.');
        this.init();
      }

      init() {
        var _this = this;

        return _asyncToGenerator(function* () {
          var _this$form$getAttribu;

          var proxy = (_this$form$getAttribu = _this.form.getAttribute('proxy')) != null ? _this$form$getAttribu : '';
          _this.roles = _this.form.getAttribute('roles') ? _this.form.getAttribute('roles').split(',') : [];
          var definitionResponse = yield fetch(applyProxy(_this.formUrl, proxy));
          var definitionTurtle = yield definitionResponse.text();
          _this.sourceDefinitionCompacted = ttl2jsonld(definitionTurtle);
          Object.assign(_this.context, _this.sourceDefinitionCompacted['@context']);
          if (!_this.context.form) throw new Error('The prefix form was not found in the form definition.');
          if (!_this.sourceDefinitionCompacted['@graph']) throw new Error('Missing fields inside form definition');
          _this.sourceDefinitionExpanded = JsonLdProxy(yield jsonld.expand(_this.sourceDefinitionCompacted), _this.context, {
            '_': value => Language.multilingualValue(value, 'ui')
          });
          yield _this.resolveSubForms(_this.sourceDefinitionExpanded);
          if (!_this.info) throw new Error('The form definition did not define a form itself.');
          var ontologyCompacted = yield fetch(applyProxy(_this.context.form, proxy)).then( /*#__PURE__*/function () {
            var _ref = _asyncToGenerator(function* (response) {
              return ttl2jsonld(yield response.text());
            });

            return function (_x) {
              return _ref.apply(this, arguments);
            };
          }());
          Object.assign(_this.context, ontologyCompacted['@context']);
          _this.ontology = JsonLdProxy(yield jsonld.expand(ontologyCompacted), _this.context);
          _this.chain = _this.createChain();
          _this.ready = true;

          _this.dispatchEvent(new CustomEvent('ready'));
        })();
      }

      get prefix() {
        return this.context.form;
      }

      get info() {
        return this.sourceDefinitionExpanded.find(only('Form'));
      }

      get fieldsToRemove() {
        var _this$form$getAttribu2, _map, _this$info$formRemov, _this$info$formRemov2;

        var formRemovals = JSON.parse((_this$form$getAttribu2 = this.form.getAttribute('fields-to-remove')) != null ? _this$form$getAttribu2 : '[]');
        return (_map = [...((_this$info$formRemov = (_this$info$formRemov2 = this.info['form:remove']) == null ? void 0 : _this$info$formRemov2.map(item => item._)) != null ? _this$info$formRemov : []), ...formRemovals].map(collapsed => expand(collapsed, this.context))) != null ? _map : [];
      }

      get fields() {
        return this.sourceDefinitionExpanded.filter(only('Field')).filter(field => !this.fieldsToRemove.includes(field['@id']));
      }

      get elements() {
        return this.sourceDefinitionExpanded.filter(only('Field', 'Container', 'UiComponent')).filter(field => !this.fieldsToRemove.includes(field['@id']));
      }

      resolveSubForms(formDefinition) {
        var _this2 = this;

        return _asyncToGenerator(function* () {
          var _this2$form$getAttrib;

          var proxy = (_this2$form$getAttrib = _this2.form.getAttribute('proxy')) != null ? _this2$form$getAttrib : '';
          var fields = formDefinition.filter(only('Field'));

          for (var field of fields) {
            var subformUrl = field['form:subform'];
            if ((subformUrl == null ? void 0 : subformUrl.length) > 1) throw new Error('Multiple sub forms were found for one field.');

            if (subformUrl) {
              var subformResponse = yield fetch(applyProxy(subformUrl._, proxy));
              var subformTurtle = yield subformResponse.text();
              var subformDefinitionCompacted = ttl2jsonld(subformTurtle);
              var subformDefinitionExpanded = JsonLdProxy(yield jsonld.expand(subformDefinitionCompacted), subformDefinitionCompacted['@context'], {
                '_': value => Language.multilingualValue(value, 'ui')
              });
              yield _this2.resolveSubForms(subformDefinitionExpanded);
              Object.assign(_this2.context, subformDefinitionCompacted['@context']);

              for (var subFormfield of subformDefinitionExpanded) {
                var _field$formOrder;

                if (field['form:container']) {
                  subFormfield['form:container'] = field['form:container'].$;
                }

                if ((_field$formOrder = field['form:order']) != null && _field$formOrder._) {
                  var _field$formOrder$_, _field$formOrder2, _subFormfield$formOr;

                  subFormfield['form:order'] = [{
                    '@value': ((_field$formOrder$_ = (_field$formOrder2 = field['form:order']) == null ? void 0 : _field$formOrder2._) != null ? _field$formOrder$_ : 0) + parseFloat('0.' + ((_subFormfield$formOr = subFormfield['form:order']) == null ? void 0 : _subFormfield$formOr._))
                  }];
                }
              }

              var fieldIndex = formDefinition.map(field => field.$).indexOf(field.$);
              formDefinition.$.splice(fieldIndex, 1, ...subformDefinitionExpanded.map(field => field.$));
            }
          }

          return formDefinition;
        })();
      }

      applyFieldAccessRoles(fields) {
        return fields.filter(field => {
          if (field['form:access']) {
            return this.roles.some(userRole => field['form:access'].map(role => role['@id']).includes(userRole));
          }

          return true;
        });
      }

      createChain() {
        var _this3 = this;

        var recursiveChainCreator = fields => {
          var chain = new Map();
          fields.sort((a, b) => {
            var _a$formOrder$_, _a$formOrder, _b$formOrder$_, _b$formOrder;

            return ((_a$formOrder$_ = (_a$formOrder = a['form:order']) == null ? void 0 : _a$formOrder._) != null ? _a$formOrder$_ : 0) - ((_b$formOrder$_ = (_b$formOrder = b['form:order']) == null ? void 0 : _b$formOrder._) != null ? _b$formOrder$_ : 0);
          });

          var _loop = function _loop(field) {
            var _field$formWidget;

            var fieldBindings = _this3.getBindingsOfField(field);

            var children = [];

            if (((_field$formWidget = field['form:widget']) == null ? void 0 : _field$formWidget._) === 'group' || lastPart(field['@type'][0]) === 'Container') {
              var _field$formWidget2;

              var nestingType = ((_field$formWidget2 = field['form:widget']) == null ? void 0 : _field$formWidget2._) === 'group' ? 'group' : 'container';
              children = _this3.applyFieldAccessRoles(_this3.elements.filter(innerField => {
                var _innerField$;

                return (innerField == null ? void 0 : (_innerField$ = innerField["form:" + nestingType]) == null ? void 0 : _innerField$._) === lastPart(field['@id']);
              }));
            }

            chain.set(fieldBindings.length ? fieldBindings : field.$, [field, recursiveChainCreator(children)]);
          };

          for (var field of fields) {
            _loop(field);
          }

          return chain;
        };

        var firstLevelFields = this.applyFieldAccessRoles(this.elements.filter(field => !field['form:group'] && !field['form:container']));
        return recursiveChainCreator(firstLevelFields);
      }

      getBindingsOfField(field) {
        var _this4 = this;

        var bindings = [];

        var _loop2 = function _loop2(fieldProperty, propertySetting) {
          var fieldMetaProperties = _this4.ontology.find(predicate => lastPart(predicate == null ? void 0 : predicate['@id']) === lastPart(fieldProperty));

          if (fieldMetaProperties && fieldMetaProperties['form:isBindingProperty'] && Array.isArray(propertySetting)) {
            bindings.push(...propertySetting.$.flatMap(item => item['@id']));
          }
        };

        for (var [fieldProperty, propertySetting] of Object.entries(field)) {
          _loop2(fieldProperty, propertySetting);
        }

        return bindings;
      }

    }

    var isFetchable = string => {
      return string.startsWith('http') || string.startsWith('blob') || string.substr(0, 1) === '/';
    };

    class RdfFormData extends EventTarget {
      constructor(form) {
        super();
        this.ready = false;
        this.proxy = {
          $: null
        };
        this.form = form;
        this.formDefinition = this.form.formDefinition;
        this.dataAsTextOrUrl = this.form.getAttribute('data');
        this.formDefinition.addEventListener('ready', () => this.init(), {
          once: true
        });
      }

      init() {
        var _this = this;

        return _asyncToGenerator(function* () {
          var _this$form$getAttribu, _this$sourceData;

          var proxy = (_this$form$getAttribu = _this.form.getAttribute('proxy')) != null ? _this$form$getAttribu : '';
          var dataText;
          if (!_this.dataAsTextOrUrl) _this.sourceData = [];

          if (_this.dataAsTextOrUrl && isFetchable(_this.dataAsTextOrUrl)) {
            var dataResponse = yield fetch(applyProxy(_this.dataAsTextOrUrl, proxy));
            dataText = yield dataResponse.text();
          } else {
            dataText = _this.dataAsTextOrUrl;
          }

          try {
            _this.sourceDataCompacted = JSON.parse(dataText);
          } catch (e) {
            _this.sourceDataCompacted = ttl2jsonld(dataText);
          }

          _this.sourceData = yield jsonld.expand(_this.sourceDataCompacted);
          if (Array.isArray(_this.sourceData)) _this.sourceData = _this.sourceData.pop();
          if (!_this.sourceData) _this.sourceData = {};
          if (!((_this$sourceData = _this.sourceData) != null && _this$sourceData['@type'])) _this.sourceData['@type'] = _this.formDefinition.info['form:binding'].map(rdfClass => rdfClass['@id']);

          _this.createProxy();

          _this.ready = true;

          _this.dispatchEvent(new CustomEvent('ready'));
        })();
      }

      get context() {
        var _this$sourceDataCompa;

        return Object.assign({}, this.formDefinition.context, (_this$sourceDataCompa = this.sourceDataCompacted) == null ? void 0 : _this$sourceDataCompa['@context']);
      }

      createProxy() {
        var context = this.context;
        this.proxy = JsonLdProxy(this.sourceData, context, {
          '_': value => Language.multilingualValue(value, 'l10n')
        });
      }

    }

    var faPencilAlt = {
      prefix: 'fas',
      iconName: 'pencil-alt',
      icon: [512, 512, [], "f303", "M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"]
    };
    var faCheck = {
      prefix: 'fas',
      iconName: 'check',
      icon: [512, 512, [], "f00c", "M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"]
    };
    var faReply = {
      prefix: 'fas',
      iconName: 'reply',
      icon: [512, 512, [], "f3e5", "M8.309 189.836L184.313 37.851C199.719 24.546 224 35.347 224 56.015v80.053c160.629 1.839 288 34.032 288 186.258 0 61.441-39.581 122.309-83.333 154.132-13.653 9.931-33.111-2.533-28.077-18.631 45.344-145.012-21.507-183.51-176.59-185.742V360c0 20.7-24.3 31.453-39.687 18.164l-176.004-152c-11.071-9.562-11.086-26.753 0-36.328z"]
    };
    var faTimes = {
      prefix: 'fas',
      iconName: 'times',
      icon: [352, 512, [], "f00d", "M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]
    };
    var faPlus = {
      prefix: 'fas',
      iconName: 'plus',
      icon: [448, 512, [], "f067", "M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]
    };
    var faLanguage = {
      prefix: 'fas',
      iconName: 'language',
      icon: [640, 512, [], "f1ab", "M152.1 236.2c-3.5-12.1-7.8-33.2-7.8-33.2h-.5s-4.3 21.1-7.8 33.2l-11.1 37.5H163zM616 96H336v320h280c13.3 0 24-10.7 24-24V120c0-13.3-10.7-24-24-24zm-24 120c0 6.6-5.4 12-12 12h-11.4c-6.9 23.6-21.7 47.4-42.7 69.9 8.4 6.4 17.1 12.5 26.1 18 5.5 3.4 7.3 10.5 4.1 16.2l-7.9 13.9c-3.4 5.9-10.9 7.8-16.7 4.3-12.6-7.8-24.5-16.1-35.4-24.9-10.9 8.7-22.7 17.1-35.4 24.9-5.8 3.5-13.3 1.6-16.7-4.3l-7.9-13.9c-3.2-5.6-1.4-12.8 4.2-16.2 9.3-5.7 18-11.7 26.1-18-7.9-8.4-14.9-17-21-25.7-4-5.7-2.2-13.6 3.7-17.1l6.5-3.9 7.3-4.3c5.4-3.2 12.4-1.7 16 3.4 5 7 10.8 14 17.4 20.9 13.5-14.2 23.8-28.9 30-43.2H412c-6.6 0-12-5.4-12-12v-16c0-6.6 5.4-12 12-12h64v-16c0-6.6 5.4-12 12-12h16c6.6 0 12 5.4 12 12v16h64c6.6 0 12 5.4 12 12zM0 120v272c0 13.3 10.7 24 24 24h280V96H24c-13.3 0-24 10.7-24 24zm58.9 216.1L116.4 167c1.7-4.9 6.2-8.1 11.4-8.1h32.5c5.1 0 9.7 3.3 11.4 8.1l57.5 169.1c2.6 7.8-3.1 15.9-11.4 15.9h-22.9a12 12 0 0 1-11.5-8.6l-9.4-31.9h-60.2l-9.1 31.8c-1.5 5.1-6.2 8.7-11.5 8.7H70.3c-8.2 0-14-8.1-11.4-15.9z"]
    };
    var faGlobe = {
      prefix: 'fas',
      iconName: 'globe',
      icon: [496, 512, [], "f0ac", "M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"]
    };

    var kebabize = str => {
      if (str.split('').every(letter => letter.toUpperCase() === letter)) return str.toLowerCase();
      return str.split('').map((letter, index) => {
        return letter.toUpperCase() === letter ? "" + (index !== 0 ? '-' : '') + letter.toLowerCase() : letter;
      }).join('');
    };

    var attributesDiff = function attributesDiff(attributes, callback) {
      if (callback === void 0) {
        callback = null;
      }

      return node => {
        for (var key of Object.keys(attributes)) {
          if (attributes[key]) {
            var attributeValue = Array.isArray(attributes[key]) ? attributes[key].join(' ') : attributes[key];
            if (typeof attributeValue !== 'string' || attributeValue.trim()) node.setAttribute(key, attributeValue);
          } else {
            node.removeAttribute(key);
          }
        }

        if (callback) {
          callback(node);
          callback = null;
        }
      };
    };

    /*!
     * Font Awesome Free 5.15.1 by @fontawesome - https://fontawesome.com
     * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
     */
    function _classCallCheck(instance, Constructor) {
      if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
      }
    }

    function _defineProperties(target, props) {
      for (var i = 0; i < props.length; i++) {
        var descriptor = props[i];
        descriptor.enumerable = descriptor.enumerable || false;
        descriptor.configurable = true;
        if ("value" in descriptor) descriptor.writable = true;
        Object.defineProperty(target, descriptor.key, descriptor);
      }
    }

    function _createClass(Constructor, protoProps, staticProps) {
      if (protoProps) _defineProperties(Constructor.prototype, protoProps);
      if (staticProps) _defineProperties(Constructor, staticProps);
      return Constructor;
    }

    function _defineProperty(obj, key, value) {
      if (key in obj) {
        Object.defineProperty(obj, key, {
          value: value,
          enumerable: true,
          configurable: true,
          writable: true
        });
      } else {
        obj[key] = value;
      }

      return obj;
    }

    function _objectSpread(target) {
      for (var i = 1; i < arguments.length; i++) {
        var source = arguments[i] != null ? arguments[i] : {};
        var ownKeys = Object.keys(source);

        if (typeof Object.getOwnPropertySymbols === 'function') {
          ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {
            return Object.getOwnPropertyDescriptor(source, sym).enumerable;
          }));
        }

        ownKeys.forEach(function (key) {
          _defineProperty(target, key, source[key]);
        });
      }

      return target;
    }

    function _slicedToArray(arr, i) {
      return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();
    }

    function _arrayWithHoles(arr) {
      if (Array.isArray(arr)) return arr;
    }

    function _iterableToArrayLimit(arr, i) {
      var _arr = [];
      var _n = true;
      var _d = false;
      var _e = undefined;

      try {
        for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
          _arr.push(_s.value);

          if (i && _arr.length === i) break;
        }
      } catch (err) {
        _d = true;
        _e = err;
      } finally {
        try {
          if (!_n && _i["return"] != null) _i["return"]();
        } finally {
          if (_d) throw _e;
        }
      }

      return _arr;
    }

    function _nonIterableRest() {
      throw new TypeError("Invalid attempt to destructure non-iterable instance");
    }

    var noop = function noop() {};

    var _WINDOW = {};
    var _DOCUMENT = {};
    var _MUTATION_OBSERVER = null;
    var _PERFORMANCE = {
      mark: noop,
      measure: noop
    };

    try {
      if (typeof window !== 'undefined') _WINDOW = window;
      if (typeof document !== 'undefined') _DOCUMENT = document;
      if (typeof MutationObserver !== 'undefined') _MUTATION_OBSERVER = MutationObserver;
      if (typeof performance !== 'undefined') _PERFORMANCE = performance;
    } catch (e) {}

    var WINDOW = _WINDOW;
    var DOCUMENT = _DOCUMENT;
    var IS_DOM = !!DOCUMENT.documentElement && !!DOCUMENT.head && typeof DOCUMENT.addEventListener === 'function' && typeof DOCUMENT.createElement === 'function';
    var NAMESPACE_IDENTIFIER = '___FONT_AWESOME___';
    var DEFAULT_FAMILY_PREFIX = 'fa';
    var DEFAULT_REPLACEMENT_CLASS = 'svg-inline--fa';
    var DATA_FA_I2SVG = 'data-fa-i2svg';

    var DUOTONE_CLASSES = {
      GROUP: 'group',
      SWAP_OPACITY: 'swap-opacity',
      PRIMARY: 'primary',
      SECONDARY: 'secondary'
    };
    var initial = WINDOW.FontAwesomeConfig || {};

    function getAttrConfig(attr) {
      var element = DOCUMENT.querySelector('script[' + attr + ']');

      if (element) {
        return element.getAttribute(attr);
      }
    }

    function coerce(val) {
      // Getting an empty string will occur if the attribute is set on the HTML tag but without a value
      // We'll assume that this is an indication that it should be toggled to true
      // For example <script data-search-pseudo-elements src="..."></script>
      if (val === '') return true;
      if (val === 'false') return false;
      if (val === 'true') return true;
      return val;
    }

    if (DOCUMENT && typeof DOCUMENT.querySelector === 'function') {
      var attrs = [['data-family-prefix', 'familyPrefix'], ['data-replacement-class', 'replacementClass'], ['data-auto-replace-svg', 'autoReplaceSvg'], ['data-auto-add-css', 'autoAddCss'], ['data-auto-a11y', 'autoA11y'], ['data-search-pseudo-elements', 'searchPseudoElements'], ['data-observe-mutations', 'observeMutations'], ['data-mutate-approach', 'mutateApproach'], ['data-keep-original-source', 'keepOriginalSource'], ['data-measure-performance', 'measurePerformance'], ['data-show-missing-icons', 'showMissingIcons']];
      attrs.forEach(function (_ref) {
        var _ref2 = _slicedToArray(_ref, 2),
            attr = _ref2[0],
            key = _ref2[1];

        var val = coerce(getAttrConfig(attr));

        if (val !== undefined && val !== null) {
          initial[key] = val;
        }
      });
    }

    var _default = {
      familyPrefix: DEFAULT_FAMILY_PREFIX,
      replacementClass: DEFAULT_REPLACEMENT_CLASS,
      autoReplaceSvg: true,
      autoAddCss: true,
      autoA11y: true,
      searchPseudoElements: false,
      observeMutations: true,
      mutateApproach: 'async',
      keepOriginalSource: true,
      measurePerformance: false,
      showMissingIcons: true
    };

    var _config = /*#__PURE__*/_objectSpread({}, _default, initial);

    if (!_config.autoReplaceSvg) _config.observeMutations = false;

    var config = /*#__PURE__*/_objectSpread({}, _config);

    WINDOW.FontAwesomeConfig = config;
    var w = WINDOW || {};
    if (!w[NAMESPACE_IDENTIFIER]) w[NAMESPACE_IDENTIFIER] = {};
    if (!w[NAMESPACE_IDENTIFIER].styles) w[NAMESPACE_IDENTIFIER].styles = {};
    if (!w[NAMESPACE_IDENTIFIER].hooks) w[NAMESPACE_IDENTIFIER].hooks = {};
    if (!w[NAMESPACE_IDENTIFIER].shims) w[NAMESPACE_IDENTIFIER].shims = [];
    var namespace = w[NAMESPACE_IDENTIFIER];
    var functions = [];

    var listener = function listener() {
      DOCUMENT.removeEventListener('DOMContentLoaded', listener);
      loaded = 1;
      functions.map(function (fn) {
        return fn();
      });
    };

    var loaded = false;

    if (IS_DOM) {
      loaded = /*#__PURE__*/(DOCUMENT.documentElement.doScroll ? /^loaded|^c/ : /^loaded|^i|^c/).test(DOCUMENT.readyState);
      if (!loaded) DOCUMENT.addEventListener('DOMContentLoaded', listener);
    }
    typeof setImmediate === 'undefined' ? setTimeout : setImmediate;
    var meaninglessTransform = {
      size: 16,
      x: 0,
      y: 0,
      rotate: 0,
      flipX: false,
      flipY: false
    };

    function insertCss(css) {
      if (!css || !IS_DOM) {
        return;
      }

      var style = DOCUMENT.createElement('style');
      style.setAttribute('type', 'text/css');
      style.innerHTML = css;
      var headChildren = DOCUMENT.head.childNodes;
      var beforeChild = null;

      for (var i = headChildren.length - 1; i > -1; i--) {
        var child = headChildren[i];
        var tagName = (child.tagName || '').toUpperCase();

        if (['STYLE', 'LINK'].indexOf(tagName) > -1) {
          beforeChild = child;
        }
      }

      DOCUMENT.head.insertBefore(style, beforeChild);
      return css;
    }

    var idPool = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';

    function nextUniqueId() {
      var size = 12;
      var id = '';

      while (size-- > 0) {
        id += idPool[Math.random() * 62 | 0];
      }

      return id;
    }

    function htmlEscape(str) {
      return "".concat(str).replace(/&/g, '&amp;').replace(/"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    }

    function joinAttributes(attributes) {
      return Object.keys(attributes || {}).reduce(function (acc, attributeName) {
        return acc + "".concat(attributeName, "=\"").concat(htmlEscape(attributes[attributeName]), "\" ");
      }, '').trim();
    }

    function joinStyles(styles) {
      return Object.keys(styles || {}).reduce(function (acc, styleName) {
        return acc + "".concat(styleName, ": ").concat(styles[styleName], ";");
      }, '');
    }

    function transformIsMeaningful(transform) {
      return transform.size !== meaninglessTransform.size || transform.x !== meaninglessTransform.x || transform.y !== meaninglessTransform.y || transform.rotate !== meaninglessTransform.rotate || transform.flipX || transform.flipY;
    }

    function transformForSvg(_ref) {
      var transform = _ref.transform,
          containerWidth = _ref.containerWidth,
          iconWidth = _ref.iconWidth;
      var outer = {
        transform: "translate(".concat(containerWidth / 2, " 256)")
      };
      var innerTranslate = "translate(".concat(transform.x * 32, ", ").concat(transform.y * 32, ") ");
      var innerScale = "scale(".concat(transform.size / 16 * (transform.flipX ? -1 : 1), ", ").concat(transform.size / 16 * (transform.flipY ? -1 : 1), ") ");
      var innerRotate = "rotate(".concat(transform.rotate, " 0 0)");
      var inner = {
        transform: "".concat(innerTranslate, " ").concat(innerScale, " ").concat(innerRotate)
      };
      var path = {
        transform: "translate(".concat(iconWidth / 2 * -1, " -256)")
      };
      return {
        outer: outer,
        inner: inner,
        path: path
      };
    }

    var ALL_SPACE = {
      x: 0,
      y: 0,
      width: '100%',
      height: '100%'
    };

    function fillBlack(abstract) {
      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

      if (abstract.attributes && (abstract.attributes.fill || force)) {
        abstract.attributes.fill = 'black';
      }

      return abstract;
    }

    function deGroup(abstract) {
      if (abstract.tag === 'g') {
        return abstract.children;
      } else {
        return [abstract];
      }
    }

    function makeIconMasking(_ref) {
      var children = _ref.children,
          attributes = _ref.attributes,
          main = _ref.main,
          mask = _ref.mask,
          explicitMaskId = _ref.maskId,
          transform = _ref.transform;
      var mainWidth = main.width,
          mainPath = main.icon;
      var maskWidth = mask.width,
          maskPath = mask.icon;
      var trans = transformForSvg({
        transform: transform,
        containerWidth: maskWidth,
        iconWidth: mainWidth
      });
      var maskRect = {
        tag: 'rect',
        attributes: _objectSpread({}, ALL_SPACE, {
          fill: 'white'
        })
      };
      var maskInnerGroupChildrenMixin = mainPath.children ? {
        children: mainPath.children.map(fillBlack)
      } : {};
      var maskInnerGroup = {
        tag: 'g',
        attributes: _objectSpread({}, trans.inner),
        children: [fillBlack(_objectSpread({
          tag: mainPath.tag,
          attributes: _objectSpread({}, mainPath.attributes, trans.path)
        }, maskInnerGroupChildrenMixin))]
      };
      var maskOuterGroup = {
        tag: 'g',
        attributes: _objectSpread({}, trans.outer),
        children: [maskInnerGroup]
      };
      var maskId = "mask-".concat(explicitMaskId || nextUniqueId());
      var clipId = "clip-".concat(explicitMaskId || nextUniqueId());
      var maskTag = {
        tag: 'mask',
        attributes: _objectSpread({}, ALL_SPACE, {
          id: maskId,
          maskUnits: 'userSpaceOnUse',
          maskContentUnits: 'userSpaceOnUse'
        }),
        children: [maskRect, maskOuterGroup]
      };
      var defs = {
        tag: 'defs',
        children: [{
          tag: 'clipPath',
          attributes: {
            id: clipId
          },
          children: deGroup(maskPath)
        }, maskTag]
      };
      children.push(defs, {
        tag: 'rect',
        attributes: _objectSpread({
          fill: 'currentColor',
          'clip-path': "url(#".concat(clipId, ")"),
          mask: "url(#".concat(maskId, ")")
        }, ALL_SPACE)
      });
      return {
        children: children,
        attributes: attributes
      };
    }

    function makeIconStandard(_ref) {
      var children = _ref.children,
          attributes = _ref.attributes,
          main = _ref.main,
          transform = _ref.transform,
          styles = _ref.styles;
      var styleString = joinStyles(styles);

      if (styleString.length > 0) {
        attributes['style'] = styleString;
      }

      if (transformIsMeaningful(transform)) {
        var trans = transformForSvg({
          transform: transform,
          containerWidth: main.width,
          iconWidth: main.width
        });
        children.push({
          tag: 'g',
          attributes: _objectSpread({}, trans.outer),
          children: [{
            tag: 'g',
            attributes: _objectSpread({}, trans.inner),
            children: [{
              tag: main.icon.tag,
              children: main.icon.children,
              attributes: _objectSpread({}, main.icon.attributes, trans.path)
            }]
          }]
        });
      } else {
        children.push(main.icon);
      }

      return {
        children: children,
        attributes: attributes
      };
    }

    function asIcon(_ref) {
      var children = _ref.children,
          main = _ref.main,
          mask = _ref.mask,
          attributes = _ref.attributes,
          styles = _ref.styles,
          transform = _ref.transform;

      if (transformIsMeaningful(transform) && main.found && !mask.found) {
        var width = main.width,
            height = main.height;
        var offset = {
          x: width / height / 2,
          y: 0.5
        };
        attributes['style'] = joinStyles(_objectSpread({}, styles, {
          'transform-origin': "".concat(offset.x + transform.x / 16, "em ").concat(offset.y + transform.y / 16, "em")
        }));
      }

      return [{
        tag: 'svg',
        attributes: attributes,
        children: children
      }];
    }

    function asSymbol(_ref) {
      var prefix = _ref.prefix,
          iconName = _ref.iconName,
          children = _ref.children,
          attributes = _ref.attributes,
          symbol = _ref.symbol;
      var id = symbol === true ? "".concat(prefix, "-").concat(config.familyPrefix, "-").concat(iconName) : symbol;
      return [{
        tag: 'svg',
        attributes: {
          style: 'display: none;'
        },
        children: [{
          tag: 'symbol',
          attributes: _objectSpread({}, attributes, {
            id: id
          }),
          children: children
        }]
      }];
    }

    function makeInlineSvgAbstract(params) {
      var _params$icons = params.icons,
          main = _params$icons.main,
          mask = _params$icons.mask,
          prefix = params.prefix,
          iconName = params.iconName,
          transform = params.transform,
          symbol = params.symbol,
          title = params.title,
          maskId = params.maskId,
          titleId = params.titleId,
          extra = params.extra,
          _params$watchable = params.watchable,
          watchable = _params$watchable === void 0 ? false : _params$watchable;

      var _ref = mask.found ? mask : main,
          width = _ref.width,
          height = _ref.height;

      var isUploadedIcon = prefix === 'fak';
      var widthClass = isUploadedIcon ? '' : "fa-w-".concat(Math.ceil(width / height * 16));
      var attrClass = [config.replacementClass, iconName ? "".concat(config.familyPrefix, "-").concat(iconName) : '', widthClass].filter(function (c) {
        return extra.classes.indexOf(c) === -1;
      }).filter(function (c) {
        return c !== '' || !!c;
      }).concat(extra.classes).join(' ');
      var content = {
        children: [],
        attributes: _objectSpread({}, extra.attributes, {
          'data-prefix': prefix,
          'data-icon': iconName,
          'class': attrClass,
          'role': extra.attributes.role || 'img',
          'xmlns': 'http://www.w3.org/2000/svg',
          'viewBox': "0 0 ".concat(width, " ").concat(height)
        })
      };
      var uploadedIconWidthStyle = isUploadedIcon && !~extra.classes.indexOf('fa-fw') ? {
        width: "".concat(width / height * 16 * 0.0625, "em")
      } : {};

      if (watchable) {
        content.attributes[DATA_FA_I2SVG] = '';
      }

      if (title) content.children.push({
        tag: 'title',
        attributes: {
          id: content.attributes['aria-labelledby'] || "title-".concat(titleId || nextUniqueId())
        },
        children: [title]
      });

      var args = _objectSpread({}, content, {
        prefix: prefix,
        iconName: iconName,
        main: main,
        mask: mask,
        maskId: maskId,
        transform: transform,
        symbol: symbol,
        styles: _objectSpread({}, uploadedIconWidthStyle, extra.styles)
      });

      var _ref2 = mask.found && main.found ? makeIconMasking(args) : makeIconStandard(args),
          children = _ref2.children,
          attributes = _ref2.attributes;

      args.children = children;
      args.attributes = attributes;

      if (symbol) {
        return asSymbol(args);
      } else {
        return asIcon(args);
      }
    }
    /**
     * Internal helper to bind a function known to have 4 arguments
     * to a given context.
     */

    var bindInternal4 = function bindInternal4(func, thisContext) {
      return function (a, b, c, d) {
        return func.call(thisContext, a, b, c, d);
      };
    };
    /**
     * # Reduce
     *
     * A fast object `.reduce()` implementation.
     *
     * @param  {Object}   subject      The object to reduce over.
     * @param  {Function} fn           The reducer function.
     * @param  {mixed}    initialValue The initial value for the reducer, defaults to subject[0].
     * @param  {Object}   thisContext  The context for the reducer.
     * @return {mixed}                 The final result.
     */


    var reduce = function fastReduceObject(subject, fn, initialValue, thisContext) {
      var keys = Object.keys(subject),
          length = keys.length,
          iterator = thisContext !== undefined ? bindInternal4(fn, thisContext) : fn,
          i,
          key,
          result;

      if (initialValue === undefined) {
        i = 1;
        result = subject[keys[0]];
      } else {
        i = 0;
        result = initialValue;
      }

      for (; i < length; i++) {
        key = keys[i];
        result = iterator(result, subject[key], key, subject);
      }

      return result;
    };

    function defineIcons(prefix, icons) {
      var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      var _params$skipHooks = params.skipHooks,
          skipHooks = _params$skipHooks === void 0 ? false : _params$skipHooks;
      var normalized = Object.keys(icons).reduce(function (acc, iconName) {
        var icon = icons[iconName];
        var expanded = !!icon.icon;

        if (expanded) {
          acc[icon.iconName] = icon.icon;
        } else {
          acc[iconName] = icon;
        }

        return acc;
      }, {});

      if (typeof namespace.hooks.addPack === 'function' && !skipHooks) {
        namespace.hooks.addPack(prefix, normalized);
      } else {
        namespace.styles[prefix] = _objectSpread({}, namespace.styles[prefix] || {}, normalized);
      }
      /**
       * Font Awesome 4 used the prefix of `fa` for all icons. With the introduction
       * of new styles we needed to differentiate between them. Prefix `fa` is now an alias
       * for `fas` so we'll easy the upgrade process for our users by automatically defining
       * this as well.
       */


      if (prefix === 'fas') {
        defineIcons('fa', icons);
      }
    }

    var styles = namespace.styles,
        shims = namespace.shims;

    var build = function build() {
      var lookup = function lookup(reducer) {
        return reduce(styles, function (o, style, prefix) {
          o[prefix] = reduce(style, reducer, {});
          return o;
        }, {});
      };

      lookup(function (acc, icon, iconName) {
        if (icon[3]) {
          acc[icon[3]] = iconName;
        }

        return acc;
      });
      lookup(function (acc, icon, iconName) {
        var ligatures = icon[2];
        acc[iconName] = iconName;
        ligatures.forEach(function (ligature) {
          acc[ligature] = iconName;
        });
        return acc;
      });
      var hasRegular = ('far' in styles);
      reduce(shims, function (acc, shim) {
        var oldName = shim[0];
        var prefix = shim[1];
        var iconName = shim[2];

        if (prefix === 'far' && !hasRegular) {
          prefix = 'fas';
        }

        acc[oldName] = {
          prefix: prefix,
          iconName: iconName
        };
        return acc;
      }, {});
    };

    build();

    function iconFromMapping(mapping, prefix, iconName) {
      if (mapping && mapping[prefix] && mapping[prefix][iconName]) {
        return {
          prefix: prefix,
          iconName: iconName,
          icon: mapping[prefix][iconName]
        };
      }
    }

    function toHtml(abstractNodes) {
      var tag = abstractNodes.tag,
          _abstractNodes$attrib = abstractNodes.attributes,
          attributes = _abstractNodes$attrib === void 0 ? {} : _abstractNodes$attrib,
          _abstractNodes$childr = abstractNodes.children,
          children = _abstractNodes$childr === void 0 ? [] : _abstractNodes$childr;

      if (typeof abstractNodes === 'string') {
        return htmlEscape(abstractNodes);
      } else {
        return "<".concat(tag, " ").concat(joinAttributes(attributes), ">").concat(children.map(toHtml).join(''), "</").concat(tag, ">");
      }
    }

    function MissingIcon(error) {
      this.name = 'MissingIcon';
      this.message = error || 'Icon unavailable';
      this.stack = new Error().stack;
    }

    MissingIcon.prototype = /*#__PURE__*/Object.create(Error.prototype);
    MissingIcon.prototype.constructor = MissingIcon;

    function asFoundIcon(icon) {
      var width = icon[0];
      var height = icon[1];

      var _icon$slice = icon.slice(4),
          _icon$slice2 = _slicedToArray(_icon$slice, 1),
          vectorData = _icon$slice2[0];

      var element = null;

      if (Array.isArray(vectorData)) {
        element = {
          tag: 'g',
          attributes: {
            class: "".concat(config.familyPrefix, "-").concat(DUOTONE_CLASSES.GROUP)
          },
          children: [{
            tag: 'path',
            attributes: {
              class: "".concat(config.familyPrefix, "-").concat(DUOTONE_CLASSES.SECONDARY),
              fill: 'currentColor',
              d: vectorData[0]
            }
          }, {
            tag: 'path',
            attributes: {
              class: "".concat(config.familyPrefix, "-").concat(DUOTONE_CLASSES.PRIMARY),
              fill: 'currentColor',
              d: vectorData[1]
            }
          }]
        };
      } else {
        element = {
          tag: 'path',
          attributes: {
            fill: 'currentColor',
            d: vectorData
          }
        };
      }

      return {
        found: true,
        width: width,
        height: height,
        icon: element
      };
    }
    var baseStyles = "svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: \"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)\";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: \"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)\";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: \"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)\";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: \"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)\";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: \"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)\";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: \"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)\";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}";

    function css() {
      var dfp = DEFAULT_FAMILY_PREFIX;
      var drc = DEFAULT_REPLACEMENT_CLASS;
      var fp = config.familyPrefix;
      var rc = config.replacementClass;
      var s = baseStyles;

      if (fp !== dfp || rc !== drc) {
        var dPatt = new RegExp("\\.".concat(dfp, "\\-"), 'g');
        var customPropPatt = new RegExp("\\--".concat(dfp, "\\-"), 'g');
        var rPatt = new RegExp("\\.".concat(drc), 'g');
        s = s.replace(dPatt, ".".concat(fp, "-")).replace(customPropPatt, "--".concat(fp, "-")).replace(rPatt, ".".concat(rc));
      }

      return s;
    }

    var Library = /*#__PURE__*/function () {
      function Library() {
        _classCallCheck(this, Library);

        this.definitions = {};
      }

      _createClass(Library, [{
        key: "add",
        value: function add() {
          var _this = this;

          for (var _len = arguments.length, definitions = new Array(_len), _key = 0; _key < _len; _key++) {
            definitions[_key] = arguments[_key];
          }

          var additions = definitions.reduce(this._pullDefinitions, {});
          Object.keys(additions).forEach(function (key) {
            _this.definitions[key] = _objectSpread({}, _this.definitions[key] || {}, additions[key]);
            defineIcons(key, additions[key]);
            build();
          });
        }
      }, {
        key: "reset",
        value: function reset() {
          this.definitions = {};
        }
      }, {
        key: "_pullDefinitions",
        value: function _pullDefinitions(additions, definition) {
          var normalized = definition.prefix && definition.iconName && definition.icon ? {
            0: definition
          } : definition;
          Object.keys(normalized).map(function (key) {
            var _normalized$key = normalized[key],
                prefix = _normalized$key.prefix,
                iconName = _normalized$key.iconName,
                icon = _normalized$key.icon;
            if (!additions[prefix]) additions[prefix] = {};
            additions[prefix][iconName] = icon;
          });
          return additions;
        }
      }]);

      return Library;
    }();

    function ensureCss() {
      if (config.autoAddCss && !_cssInserted) {
        insertCss(css());
        _cssInserted = true;
      }
    }

    function apiObject(val, abstractCreator) {
      Object.defineProperty(val, 'abstract', {
        get: abstractCreator
      });
      Object.defineProperty(val, 'html', {
        get: function get() {
          return val.abstract.map(function (a) {
            return toHtml(a);
          });
        }
      });
      Object.defineProperty(val, 'node', {
        get: function get() {
          if (!IS_DOM) return;
          var container = DOCUMENT.createElement('div');
          container.innerHTML = val.html;
          return container.children;
        }
      });
      return val;
    }

    function findIconDefinition(iconLookup) {
      var _iconLookup$prefix = iconLookup.prefix,
          prefix = _iconLookup$prefix === void 0 ? 'fa' : _iconLookup$prefix,
          iconName = iconLookup.iconName;
      if (!iconName) return;
      return iconFromMapping(library.definitions, prefix, iconName) || iconFromMapping(namespace.styles, prefix, iconName);
    }

    function resolveIcons(next) {
      return function (maybeIconDefinition) {
        var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        var iconDefinition = (maybeIconDefinition || {}).icon ? maybeIconDefinition : findIconDefinition(maybeIconDefinition || {});
        var mask = params.mask;

        if (mask) {
          mask = (mask || {}).icon ? mask : findIconDefinition(mask || {});
        }

        return next(iconDefinition, _objectSpread({}, params, {
          mask: mask
        }));
      };
    }

    var library = /*#__PURE__*/new Library();
    var _cssInserted = false;
    var icon = /*#__PURE__*/resolveIcons(function (iconDefinition) {
      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var _params$transform = params.transform,
          transform = _params$transform === void 0 ? meaninglessTransform : _params$transform,
          _params$symbol = params.symbol,
          symbol = _params$symbol === void 0 ? false : _params$symbol,
          _params$mask = params.mask,
          mask = _params$mask === void 0 ? null : _params$mask,
          _params$maskId = params.maskId,
          maskId = _params$maskId === void 0 ? null : _params$maskId,
          _params$title = params.title,
          title = _params$title === void 0 ? null : _params$title,
          _params$titleId = params.titleId,
          titleId = _params$titleId === void 0 ? null : _params$titleId,
          _params$classes = params.classes,
          classes = _params$classes === void 0 ? [] : _params$classes,
          _params$attributes = params.attributes,
          attributes = _params$attributes === void 0 ? {} : _params$attributes,
          _params$styles = params.styles,
          styles = _params$styles === void 0 ? {} : _params$styles;
      if (!iconDefinition) return;
      var prefix = iconDefinition.prefix,
          iconName = iconDefinition.iconName,
          icon = iconDefinition.icon;
      return apiObject(_objectSpread({
        type: 'icon'
      }, iconDefinition), function () {
        ensureCss();

        if (config.autoA11y) {
          if (title) {
            attributes['aria-labelledby'] = "".concat(config.replacementClass, "-title-").concat(titleId || nextUniqueId());
          } else {
            attributes['aria-hidden'] = 'true';
            attributes['focusable'] = 'false';
          }
        }

        return makeInlineSvgAbstract({
          icons: {
            main: asFoundIcon(icon),
            mask: mask ? asFoundIcon(mask.icon) : {
              found: false,
              width: null,
              height: null,
              icon: {}
            }
          },
          prefix: prefix,
          iconName: iconName,
          transform: _objectSpread({}, meaninglessTransform, transform),
          symbol: symbol,
          title: title,
          maskId: maskId,
          titleId: titleId,
          extra: {
            attributes: attributes,
            styles: styles,
            classes: classes
          }
        });
      });
    });

    class FaIcon extends Hole {
      constructor(icon) {
        super('svg', [icon], []);
      }

    }

    function fa(iconInput) {
      return new FaIcon(icon(iconInput).html[0]);
    }

    function debounce(func, wait, immediate) {
      if (immediate === void 0) {
        immediate = false;
      }

      var timeout;
      return function () {
        var context = this,
            args = arguments;

        var later = function later() {
          timeout = null;
          if (!immediate) func.apply(context, args);
        };

        var callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow) func.apply(context, args);
      };
    }

    var _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14, _templateObject15, _templateObject16, _templateObject17, _templateObject18, _templateObject19, _templateObject20, _templateObject21, _templateObject22, _templateObject23, _templateObject24, _templateObject25, _templateObject26, _templateObject27, _templateObject28, _templateObject29, _templateObject30;
    class ElementBase extends EventTarget {
      constructor() {
        var _definition$formBind, _this$definition$form, _this$definition$form2, _this$definition$form3, _this$definition$form4, _this$definition$form5, _this$definition$form6, _this$definition$form7, _this$definition$form8, _this$definition$form9, _this$definition$form10;

        super();
        this.jsonldKey = 'value';

        this.render = () => null;

        this.suggestions = [];
        this.children = [];
        this.attributes = {
          type: 'input',
          class: [],
          disabled: null,
          readonly: null,
          placeholder: null,
          required: null,
          multiple: null,
          rows: null,
          open: null
        };
        this.wrapperAttributes = {
          open: false,
          class: ['form-element']
        };
        this.labelAttributes = {
          class: ['label']
        };
        this.options = [];

        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }

        var [definition, bindings, value, itemValues, parentValues, render, parent, index, children] = args;
        this.definition = definition;
        this.bindings = bindings;
        this.mainBinding = (_definition$formBind = definition['form:binding']) == null ? void 0 : _definition$formBind._;
        this.parentValues = parentValues;
        this.itemValues = itemValues;
        this.value = value;
        this.render = render;
        this.parent = parent;
        this.index = index;
        this.children = children;
        this.debouncedRender = debounce(this.render.bind(this), 300);

        if (this.definition['form:jsonLdKey']) {
          this.jsonldKey = this.definition['form:jsonLdKey']._;
        }

        if ((_this$definition$form = this.definition['form:placeholder']) != null && _this$definition$form._) this.attributes.placeholder = (_this$definition$form2 = this.definition['form:placeholder']) == null ? void 0 : _this$definition$form2._;
        if (((_this$definition$form3 = this.definition['form:required']) == null ? void 0 : _this$definition$form3._) === true) this.attributes.required = true;
        if (((_this$definition$form4 = this.definition['form:multiple']) == null ? void 0 : _this$definition$form4._) === true) this.attributes.multiple = true;
        if (((_this$definition$form5 = this.definition['form:readonly']) == null ? void 0 : _this$definition$form5._) === true) this.attributes.readonly = true;
        if (((_this$definition$form6 = this.definition['form:disabled']) == null ? void 0 : _this$definition$form6._) === true) this.attributes.disabled = true;
        if (((_this$definition$form7 = this.definition['form:open']) == null ? void 0 : _this$definition$form7._) !== undefined) this.wrapperAttributes.open = this.definition['form:open']._;
        if (((_this$definition$form8 = this.definition['form:rows']) == null ? void 0 : _this$definition$form8._) !== undefined) this.attributes.rows = parseInt(this.definition['form:rows']._);
        if ((_this$definition$form9 = this.definition['form:cssClass']) != null && _this$definition$form9._) this.wrapperAttributes.class.push(this.definition['form:cssClass']._);
        if (!((_this$definition$form10 = this.definition['form:label']) != null && _this$definition$form10._)) this.wrapperAttributes.class.push('no-label');

        if (this.definition['form:option']) {
          this.options.push(...this.definition['form:option'].map(option => {
            var _option$formLabel, _option$formImage, _option$formValue;

            return {
              label: (_option$formLabel = option['form:label']) == null ? void 0 : _option$formLabel._,
              image: (_option$formImage = option['form:image']) == null ? void 0 : _option$formImage._,
              uri: (_option$formValue = option['form:value']) == null ? void 0 : _option$formValue._,
              jsonldKey: Object.keys(option['form:value'][0])[0].substr(1)
            };
          }));
        }

        this.addEventListener('destroy', () => {
          this.destroy();
        }, {
          once: true
        });
      }

      destroy() {
        return _asyncToGenerator(function* () {})();
      }

      get proxy() {
        var _this$form$proxy, _this$form;

        return (_this$form$proxy = (_this$form = this.form) == null ? void 0 : _this$form.proxy) != null ? _this$form$proxy : '';
      }

      get t() {
        var _this$form2;

        return (_this$form2 = this.form) == null ? void 0 : _this$form2.t;
      }

      get form() {
        var pointer = this;

        while (pointer.parent) {
          pointer = pointer.parent;
        }

        return pointer.registry ? pointer : null;
      }

      on(event) {
        if (['keyup', 'change'].includes(event.type)) {
          if (!this.value) this.addItem();

          if (this.value) {
            this.value["@" + this.jsonldKey] = event.target.value;
            this.dispatchChange();
          }
        }
      }

      dispatchChange() {
        this.form.dispatchEvent(new CustomEvent('fieldchange', {
          detail: {
            value: this.value,
            field: this,
            proxy: this.form.formData.proxy,
            expanded: this.form.formData.proxy.$
          }
        }));
      }

      get removable() {
        var _this$definition, _this$definition$form11, _this$value, _this$parent, _this$parent$definiti, _this$parent$definiti2, _this$definition2, _this$definition2$for, _this$definition3, _this$definition3$for;

        if (((_this$definition = this.definition) == null ? void 0 : (_this$definition$form11 = _this$definition['form:removable']) == null ? void 0 : _this$definition$form11._) === false) return false;
        var hasValue = (_this$value = this.value) == null ? void 0 : _this$value._;
        var parentIsGroup = this.parent instanceof ElementBase ? ((_this$parent = this.parent) == null ? void 0 : (_this$parent$definiti = _this$parent.definition) == null ? void 0 : (_this$parent$definiti2 = _this$parent$definiti['form:widget']) == null ? void 0 : _this$parent$definiti2._) === 'group' : false;
        var isGroup = ((_this$definition2 = this.definition) == null ? void 0 : (_this$definition2$for = _this$definition2['form:widget']) == null ? void 0 : _this$definition2$for._) === 'group';
        var isRequired = (_this$definition3 = this.definition) == null ? void 0 : (_this$definition3$for = _this$definition3['form:required']) == null ? void 0 : _this$definition3$for._;
        return !isRequired && hasValue && !parentIsGroup || isGroup;
      }

      get languages() {
        var _this$parentValues;

        return Language.extractUsedLanguages((_this$parentValues = this.parentValues) == null ? void 0 : _this$parentValues[this.mainBinding]);
      }

      addItem() {
        var _this$definition$form12;

        if (this.bindings.length > 1) {
          if (!this.parentValues[this.mainBinding]) this.parentValues[this.mainBinding] = [];
          var emptyObject = {};

          for (var binding of this.bindings) {
            emptyObject[binding] = [];
          }

          emptyObject[this.mainBinding].push({});
          this.parentValues.push(emptyObject);
          this.itemValues = emptyObject;
          this.value = emptyObject[this.mainBinding][0];
        } else if (((_this$definition$form12 = this.definition['form:widget']) == null ? void 0 : _this$definition$form12._) === 'group') {
          var _this$parentValues$th, _this$parentValues$th2, _this$parentValues2;

          if (!this.parentValues[this.mainBinding]) {
            this.parentValues[this.mainBinding] = [{
              '@list': [{}]
            }];
          }

          var firstItem = (_this$parentValues$th = this.parentValues[this.mainBinding]) == null ? void 0 : (_this$parentValues$th2 = _this$parentValues$th[0]) == null ? void 0 : _this$parentValues$th2.$;
          var clone = JSON.parse(JSON.stringify(firstItem));

          for (var [_field, values] of Object.entries(clone)) {
            if (values != null && values[0]['@id']) values[0]['@id'] = null;
            if (values != null && values[0]['@value']) values[0]['@value'] = '';
            if (values != null && values[0]['@language']) values[0]['@value'] = Language.l10nLanguage;
          }

          (_this$parentValues2 = this.parentValues) == null ? void 0 : _this$parentValues2[this.mainBinding].push(clone);
          this.value = clone;
        } else {
          var _this$definition$form13, _this$parentValues3, _this$parentValues4;

          var value = {
            ["@" + this.jsonldKey]: null
          };
          if (this.languages.length || ((_this$definition$form13 = this.definition['form:translatable']) == null ? void 0 : _this$definition$form13._) === 'always') value['@language'] = Language.l10nLanguage;
          if (!((_this$parentValues3 = this.parentValues) != null && _this$parentValues3[this.mainBinding])) this.parentValues[this.mainBinding] = [];
          (_this$parentValues4 = this.parentValues) == null ? void 0 : _this$parentValues4[this.mainBinding].push(value);
          this.value = value;
        }
      }

      removeItem() {
        if (this.bindings.length > 1) {
          var valueArray = this.parentValues.$;

          if (valueArray) {
            var index = valueArray.indexOf(this.itemValues.$);
            valueArray.splice(index, 1);
          }
        } else {
          var _this$parentValues$th3, _this$definition$form14;

          var _valueArray = (_this$parentValues$th3 = this.parentValues[(_this$definition$form14 = this.definition['form:binding']) == null ? void 0 : _this$definition$form14._]) == null ? void 0 : _this$parentValues$th3.$;

          if (_valueArray) {
            var _index = _valueArray.indexOf(this.value.$);

            _valueArray.splice(_index, 1);
          }
        }
      }

      wrapperDisplay(innerTemplates) {
        if (innerTemplates === void 0) {
          innerTemplates = [];
        }

        return this.wrapper(innerTemplates, true);
      }

      itemDisplay(childTemplates) {
        if (childTemplates === void 0) {
          childTemplates = [];
        }

        return html(_templateObject || (_templateObject = _taggedTemplateLiteralLoose(["\n    <div class=\"item\">\n      ", "\n      ", "\n    </div>"])), this.valueDisplay(), childTemplates);
      }

      valueDisplay() {
        var _this$value2;

        return html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteralLoose(["", ""])), (_this$value2 = this.value) == null ? void 0 : _this$value2._);
      }

      wrapper(innerTemplates, isDisplayOnly) {
        var _this = this;

        return _asyncToGenerator(function* () {
          var _this$definition$form15, _this$definition$form16;

          if (innerTemplates === void 0) {
            innerTemplates = [];
          }

          if (isDisplayOnly === void 0) {
            isDisplayOnly = false;
          }

          var type = kebabize(_this.constructor.name);
          var shouldShowEmpty = ((_this$definition$form15 = _this.definition['form:translatable']) == null ? void 0 : _this$definition$form15._) === 'always' && !Language.l10nLanguage;
          return html(_templateObject3 || (_templateObject3 = _taggedTemplateLiteralLoose(["\n    ", ""])), !shouldShowEmpty && (!isDisplayOnly || innerTemplates.length > 0) ? html(_templateObject4 || (_templateObject4 = _taggedTemplateLiteralLoose(["\n    <div ref=", " name=", " type=\"", "\">\n    ", "\n    ", "\n      ", "\n    </div>\n    "])), attributesDiff(_this.wrapperAttributes), kebabize(lastPart(_this.definition['@id'])), type, _this.label(), innerTemplates.length ? html(_templateObject5 || (_templateObject5 = _taggedTemplateLiteralLoose(["\n      <div class=\"items\">\n        ", "\n        ", "\n      </div>\n    "])), _this.description(), innerTemplates) : '', (_this$definition$form16 = _this.definition['form:multiple']) != null && _this$definition$form16._ && !isDisplayOnly ? html(_templateObject6 || (_templateObject6 = _taggedTemplateLiteralLoose(["<div>", "</div>"])), _this.addButton()) : html(_templateObject7 || (_templateObject7 = _taggedTemplateLiteralLoose([""])))) : html(_templateObject8 || (_templateObject8 = _taggedTemplateLiteralLoose([""]))));
        })();
      }

      description() {
        var _this$definition$form17, _this$definition$form18;

        return (_this$definition$form17 = this.definition['form:description']) != null && _this$definition$form17._ ? html(_templateObject9 || (_templateObject9 = _taggedTemplateLiteralLoose(["<p class=\"description\">", "</p>"])), (_this$definition$form18 = this.definition['form:description']) == null ? void 0 : _this$definition$form18._) : null;
      }

      item(childTemplates) {
        if (childTemplates === void 0) {
          childTemplates = [];
        }

        return html(_templateObject10 || (_templateObject10 = _taggedTemplateLiteralLoose(["\n    <div class=\"item\">\n      ", "\n      ", "\n      ", "\n    </div>"])), this.input(), this.removeButton(), childTemplates);
      }

      addButton() {
        var _this2 = this;

        return html(_templateObject11 || (_templateObject11 = _taggedTemplateLiteralLoose(["<button type=\"button\" class=\"button add primary\" onclick=\"", "\">\n      ", "\n    </button>"])), /*#__PURE__*/_asyncToGenerator(function* () {
          yield _this2.addItem();

          _this2.render();
        }), fa(faPlus));
      }

      removeButton() {
        return this.removable ? html(_templateObject12 || (_templateObject12 = _taggedTemplateLiteralLoose(["<button type=\"button\" class=\"button remove danger\" onclick=\"", "\">\n      ", "\n    </button>"])), () => {
          this.removeItem();
          this.render();
        }, fa(faTimes)) : html(_templateObject13 || (_templateObject13 = _taggedTemplateLiteralLoose([""])));
      }

      input() {
        var _this$value$_, _this$value3;

        return html(_templateObject14 || (_templateObject14 = _taggedTemplateLiteralLoose(["\n      <input \n        ref=", " \n        .value=", " \n        onchange=", "\n        onkeyup=", "\n      />\n    "])), attributesDiff(this.attributes), (_this$value$_ = (_this$value3 = this.value) == null ? void 0 : _this$value3._) != null ? _this$value$_ : '', event => this.on(event), event => this.on(event));
      }

      disableLanguage() {
        var values = this.parentValues[this.mainBinding];

        if (values) {
          values.splice(1);
          delete values[0]['@language'];
        }
      }

      enableLanguage() {
        if (!this.parentValues[this.mainBinding]) this.parentValues[this.mainBinding] = this.parentValues[this.mainBinding] = [];
        var values = this.parentValues[this.mainBinding];

        if (values.length) {
          for (var value of values) {
            value['@language'] = Language.l10nLanguage;
            if (value['@value']) value['@value'] = value['@value'].toString();
          }
        } else {
          values.push({
            '@language': Language.l10nLanguage
          });
        }
      }

      label() {
        var _this3 = this;

        return _asyncToGenerator(function* () {
          var _this3$form, _this3$definition$for, _this3$definition$for3, _this3$definition$for4, _this3$definition$for5, _this3$definition$for6, _this3$definition$for7;

          var languageLabel = '';
          var isDisplayOnly = (_this3$form = _this3.form) == null ? void 0 : _this3$form.getAttribute('display');

          if ((_this3$definition$for = _this3.definition['form:translatable']) != null && _this3$definition$for._) {
            var _this3$parentValues, _this3$parentValues2, _this3$definition$for2;

            var applicableValues = (_this3$parentValues = _this3.parentValues) != null && _this3$parentValues[_this3.mainBinding] ? [..._this3.parentValues[_this3.mainBinding].values()].filter(value => !value['@language'] || value['@language'] === Language.l10nLanguage) : [];
            var hasLanguageValues = (_this3$parentValues2 = _this3.parentValues) != null && _this3$parentValues2[_this3.mainBinding] ? [..._this3.parentValues[_this3.mainBinding].values()].filter(item => item['@language']) : [];
            var language = hasLanguageValues.length ? Language.l10nLanguage : '';

            if (language) {
              languageLabel = "(" + Language.l10nLanguages[language] + ")";
            } else if (applicableValues.length === 0 && ((_this3$definition$for2 = _this3.definition['form:translatable']) == null ? void 0 : _this3$definition$for2._) === 'always') {
              languageLabel = "(" + Language.l10nLanguages[Language.l10nLanguage] + ")";
            }
          }

          var disableLanguage = () => {
            _this3.disableLanguage();

            _this3.render();
          };

          var enableLanguage = () => {
            _this3.enableLanguage();

            _this3.render();
          };

          return (_this3$definition$for3 = _this3.definition['form:label']) != null && _this3$definition$for3._ ? html(_templateObject15 || (_templateObject15 = _taggedTemplateLiteralLoose(["\n      <label ref=", ">\n        ", "", "\n        <small>&nbsp;<em>\n        ", "\n        ", "\n        ", "\n        </em></small>\n      </label>\n    "])), attributesDiff(_this3.labelAttributes), _this3.definition['form:label']._, isDisplayOnly ? ':' : '', languageLabel && !isDisplayOnly ? html(_templateObject16 || (_templateObject16 = _taggedTemplateLiteralLoose(["", ""])), languageLabel) : html(_templateObject17 || (_templateObject17 = _taggedTemplateLiteralLoose([""]))), _this3.languages.length && (_this3$definition$for4 = _this3.definition['form:translatable']) != null && _this3$definition$for4._ && ((_this3$definition$for5 = _this3.definition['form:translatable']) == null ? void 0 : _this3$definition$for5._) !== 'always' && languageLabel ? html(_templateObject18 || (_templateObject18 = _taggedTemplateLiteralLoose(["<span title=", " class=\"icon-button disable-language\" onclick=", ">", "</span>"])), _this3.t.direct('Disable translations for this field').toString(), disableLanguage, fa(faTimes)) : html(_templateObject19 || (_templateObject19 = _taggedTemplateLiteralLoose([""]))), (_this3$definition$for6 = _this3.definition['form:translatable']) != null && _this3$definition$for6._ && (_this3$definition$for7 = _this3.definition['form:translatable']) != null && _this3$definition$for7._ && !languageLabel ? html(_templateObject20 || (_templateObject20 = _taggedTemplateLiteralLoose(["<span title=", " class=\"icon-button enable-language\" onclick=", ">", "</span>"])), _this3.t.direct('Enable translations for this field').toString(), enableLanguage, fa(faLanguage)) : html(_templateObject21 || (_templateObject21 = _taggedTemplateLiteralLoose([""])))) : html(_templateObject22 || (_templateObject22 = _taggedTemplateLiteralLoose([""])));
        })();
      }

      referenceLabel(uri, meta) {
        var _this4 = this;

        return _asyncToGenerator(function* () {
          var _meta, _this4$value, _meta2, _meta3, _meta4, _meta5, _meta6, _meta7;

          if (!meta) {
            var subject = lastPart(uri).replace(/_|-/g, ' ');
            meta = {
              label: subject
            };
          }

          return html(_templateObject23 || (_templateObject23 = _taggedTemplateLiteralLoose(["\n      <div class=\"reference-label\">\n        ", "\n      </div>\n    "])), ((_meta = meta) == null ? void 0 : _meta.label) === false ? html(_templateObject24 || (_templateObject24 = _taggedTemplateLiteralLoose(["<span class=\"reference-loading\" title=", ">", "</span>"])), _this4.t.direct("Could not load data").toString(), (_this4$value = _this4.value) == null ? void 0 : _this4$value._) : html(_templateObject25 || (_templateObject25 = _taggedTemplateLiteralLoose(["\n          ", "\n          ", "\n        "])), (_meta2 = meta) != null && _meta2.thumbnail ? html(_templateObject26 || (_templateObject26 = _taggedTemplateLiteralLoose(["<div class=\"image\"><img src=\"", "\"></div>"])), "//images.weserv.nl/?url=" + ((_meta3 = meta) == null ? void 0 : _meta3.thumbnail) + "&default=" + ((_meta4 = meta) == null ? void 0 : _meta4.thumbnail) + "&w=100&h=100") : '', (_meta5 = meta) != null && _meta5.label ? isFetchable(uri) ? html(_templateObject27 || (_templateObject27 = _taggedTemplateLiteralLoose(["<a href=\"", "\" target=\"_blank\">", "</a>"])), uri, (_meta6 = meta) == null ? void 0 : _meta6.label) : html(_templateObject28 || (_templateObject28 = _taggedTemplateLiteralLoose(["<span class=\"reference-text\">", "</span>"])), (_meta7 = meta) == null ? void 0 : _meta7.label) : html(_templateObject29 || (_templateObject29 = _taggedTemplateLiteralLoose(["<span class=\"reference-loading\">", "</span>"])), _this4.t(_templateObject30 || (_templateObject30 = _taggedTemplateLiteralLoose(["Loading..."]))))));
        })();
      }

    }

    var _templateObject$1;
    class Checkbox extends ElementBase {
      on(event) {
        var _this = this;

        return _asyncToGenerator(function* () {
          if (['click'].includes(event.type)) {
            var _this$definition$form;

            if (!_this.value) yield _this.addItem();
            _this.value["@" + _this.jsonldKey] = (_this$definition$form = _this.definition['form:translatable']) != null && _this$definition$form._ && _this.value['@language'] ? event.target.checked.toString() : event.target.checked;

            _this.dispatchChange();

            _this.render();
          }
        })();
      }

      disableLanguage() {
        var _values$;

        super.disableLanguage();
        var values = this.parentValues[this.mainBinding];

        if (values != null && (_values$ = values[0]) != null && _values$['@value']) {
          values[0]['@value'] = values[0]['@value'] === 'true';
        }
      }

      input() {
        var _this$value, _this$value2;

        var checked = ((_this$value = this.value) == null ? void 0 : _this$value._) === true || ((_this$value2 = this.value) == null ? void 0 : _this$value2._) === 'true';
        return html(_templateObject$1 || (_templateObject$1 = _taggedTemplateLiteralLoose(["\n    <label class=\"switch\">\n      <input\n        onclick=", "\n        type=\"checkbox\"\n        .checked=\"", "\"\n      >\n      <span class=\"slider\"></span>\n    </label>\n    "])), event => this.on(event), checked);
      }

      get removable() {
        var _this$definition, _this$definition$form2, _this$value3, _this$parent, _this$parent$definiti, _this$parent$definiti2, _this$definition2, _this$definition2$for, _this$definition3, _this$definition3$for;

        if (((_this$definition = this.definition) == null ? void 0 : (_this$definition$form2 = _this$definition['form:removable']) == null ? void 0 : _this$definition$form2._) === false) return false;
        var hasValue = (_this$value3 = this.value) == null ? void 0 : _this$value3._;
        var parentIsGroup = this.parent instanceof ElementBase ? ((_this$parent = this.parent) == null ? void 0 : (_this$parent$definiti = _this$parent.definition) == null ? void 0 : (_this$parent$definiti2 = _this$parent$definiti['form:widget']) == null ? void 0 : _this$parent$definiti2._) === 'group' : false;
        var isGroup = ((_this$definition2 = this.definition) == null ? void 0 : (_this$definition2$for = _this$definition2['form:widget']) == null ? void 0 : _this$definition2$for._) === 'group';
        var isRequired = (_this$definition3 = this.definition) == null ? void 0 : (_this$definition3$for = _this$definition3['form:required']) == null ? void 0 : _this$definition3$for._;
        return !isRequired && hasValue && (!parentIsGroup || isGroup);
      }

    }

    class Color extends ElementBase {
      constructor() {
        super(...arguments);
        this.attributes.type = 'color';
      }

    }

    var _templateObject$2;
    class Container extends ElementBase {
      input() {
        return html(_templateObject$2 || (_templateObject$2 = _taggedTemplateLiteralLoose([""])));
      }

    }

    class Date$1 extends ElementBase {
      constructor() {
        super(...arguments);
        this.attributes.type = 'date';
      }

    }

    var _templateObject$3, _templateObject2$1, _templateObject3$1, _templateObject4$1, _templateObject5$1;
    class Details extends ElementBase {
      constructor() {
        var _this$parentValues, _this$parentValues$th;

        super(...arguments);
        var childValues = [...this.children.values()].flatMap(_ref => {
          var _fieldDefinition$form, _this$parentValues$ch;

          var [fieldDefinition] = _ref;
          var childBinding = (_fieldDefinition$form = fieldDefinition['form:binding']) == null ? void 0 : _fieldDefinition$form._;

          if (childBinding && (_this$parentValues$ch = this.parentValues[childBinding]) != null && _this$parentValues$ch._) {
            var _this$parentValues$ch2;

            return (_this$parentValues$ch2 = this.parentValues[childBinding]) == null ? void 0 : _this$parentValues$ch2.$;
          }
        }).filter(item => item);

        if (!('open' in this.wrapperAttributes) && (this.mainBinding && (_this$parentValues = this.parentValues) != null && (_this$parentValues$th = _this$parentValues[this.mainBinding]) != null && _this$parentValues$th.length || !this.mainBinding && childValues.length)) {
          this.wrapperAttributes.open = true;
        }
      }

      input() {
        return html(_templateObject$3 || (_templateObject$3 = _taggedTemplateLiteralLoose([""])));
      }

      wrapper(innerTemplates, isDisplayOnly) {
        var _this = this;

        return _asyncToGenerator(function* () {
          if (innerTemplates === void 0) {
            innerTemplates = [];
          }

          if (isDisplayOnly === void 0) {
            isDisplayOnly = false;
          }

          if (isDisplayOnly) {
            var resolvedInnerTemplates = yield Promise.all(innerTemplates);
            var tester = document.createElement('div');
            yield render(tester, html(_templateObject2$1 || (_templateObject2$1 = _taggedTemplateLiteralLoose(["", ""])), resolvedInnerTemplates));
            var text = tester.innerText.replace(/\n|\r/g, '').trim();
            if (text === '') return html(_templateObject3$1 || (_templateObject3$1 = _taggedTemplateLiteralLoose([""])));
          }

          var toggle = () => {
            _this.wrapperAttributes.open = !_this.wrapperAttributes.open;
          };

          var type = kebabize(_this.constructor.name);
          return html(_templateObject4$1 || (_templateObject4$1 = _taggedTemplateLiteralLoose(["\n    <details ref=", " type=\"", "\">\n      <summary onclick=", ">", "</summary>\n      ", "\n    </div>"])), attributesDiff(_this.wrapperAttributes), type, toggle, _this.label(), innerTemplates.length ? html(_templateObject5$1 || (_templateObject5$1 = _taggedTemplateLiteralLoose(["\n        <div class=\"items\">\n          ", "\n        </div>\n      "])), innerTemplates) : '');
        })();
      }

    }

    var Comunica$1=/*#__PURE__*/function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports;}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n});},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0});},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e){r.d(n,i,function(t){return e[t];}.bind(null,i));}return n;},r.n=function(e){var t=e&&e.__esModule?function(){return e.default;}:function(){return e;};return r.d(t,"a",t),t;},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t);},r.p="",r(r.s=190);}([function(e,t,r){(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),void 0!==e&&e.env.COMUNICA_DEBUG||(Error.stackTraceLimit=!1),i(r(92),t),i(r(194),t),i(r(195),t),i(r(196),t),i(r(93),t),i(r(197),t);}).call(this,r(8));},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(94),t),i(r(111),t),i(r(217),t),i(r(95),t);},function(e,t,r){e.exports=i;var n=r(22).EventEmitter;function i(){n.call(this);}r(12)(i,n),i.Readable=r(71),i.Writable=r(224),i.Duplex=r(225),i.Transform=r(226),i.PassThrough=r(227),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause();}function a(){r.readable&&r.resume&&r.resume();}r.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(r.on("end",o),r.on("close",u));var s=!1;function o(){s||(s=!0,e.end());}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy());}function c(e){if(l(),0===n.listenerCount(this,"error"))throw e;}function l(){r.removeListener("data",i),e.removeListener("drain",a),r.removeListener("end",o),r.removeListener("close",u),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),e.removeListener("close",l);}return r.on("error",c),e.on("error",c),r.on("end",l),r.on("close",l),e.on("close",l),e.emit("pipe",r),e;};},function(e,t,r){r.r(t),r.d(t,"scheduleTask",function(){return s;}),r.d(t,"getTaskScheduler",function(){return o;}),r.d(t,"setTaskScheduler",function(){return u;}),r.d(t,"INIT",function(){return c;}),r.d(t,"OPEN",function(){return l;}),r.d(t,"CLOSING",function(){return h;}),r.d(t,"CLOSED",function(){return d;}),r.d(t,"ENDED",function(){return p;}),r.d(t,"DESTROYED",function(){return f;}),r.d(t,"AsyncIterator",function(){return g;}),r.d(t,"EmptyIterator",function(){return _;}),r.d(t,"SingletonIterator",function(){return v;}),r.d(t,"ArrayIterator",function(){return w;}),r.d(t,"IntegerIterator",function(){return S;}),r.d(t,"BufferedIterator",function(){return T;}),r.d(t,"TransformIterator",function(){return E;}),r.d(t,"SimpleTransformIterator",function(){return R;}),r.d(t,"MultiTransformIterator",function(){return I;}),r.d(t,"UnionIterator",function(){return N;}),r.d(t,"ClonedIterator",function(){return C;}),r.d(t,"wrap",function(){return j;}),r.d(t,"empty",function(){return k;}),r.d(t,"single",function(){return L;}),r.d(t,"fromArray",function(){return M;}),r.d(t,"union",function(){return F;}),r.d(t,"range",function(){return B;});var n=r(22);var i=Promise.resolve(void 0);var a=function(){var e="function"==typeof queueMicrotask?queueMicrotask:e=>i.then(e);if("undefined"==typeof window)return e;var t=0;return r=>{++t<100?e(r):setTimeout(r,t=0);};}();function s(e){a(e);}function o(){return a;}function u(e){a=e;}var c=1,l=2,h=4,d=8,p=16,f=32;class g extends n.EventEmitter{constructor(e){if(e===void 0){e=l;}super(),this._readable=!1,this._state=e,this.on("newListener",m);}_changeState(e,t){if(t===void 0){t=!1;}var r=e>this._state&&this._state<p;return r&&(this._state=e,e===p&&(t?a(()=>this.emit("end")):this.emit("end"))),r;}read(){return null;}forEach(e,t){this.on("data",t?e.bind(t):e);}close(){this._changeState(d)&&this._endAsync();}destroy(e){this.done||this._destroy(e,t=>{(e=e||t)&&this.emit("error",e),this._end(!0);});}_destroy(e,t){t();}_end(e){if(e===void 0){e=!1;}this._changeState(e?f:p)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"));}_endAsync(){a(()=>this._end());}get readable(){return this._readable;}set readable(e){e=Boolean(e)&&!this.done,this._readable!==e&&(this._readable=e,e&&a(()=>this.emit("readable")));}get closed(){return this._state>=h;}get ended(){return this._state===p;}get destroyed(){return this._state===f;}get done(){return this._state>=p;}toString(){var e=this._toStringDetails();return "["+this.constructor.name+(e?" "+e:"")+"]";}_toStringDetails(){return "";}getProperty(e,t){var r=this._properties;if(!t)return r&&r[e];if(r&&e in r)a(()=>t(r[e]));else {var _r2;(_r2=this._propertyCallbacks)||(this._propertyCallbacks=_r2=Object.create(null)),e in _r2?_r2[e].push(t):_r2[e]=[t];}}setProperty(e,t){(this._properties||(this._properties=Object.create(null)))[e]=t;var r=this._propertyCallbacks||{},n=r[e];if(n){for(e in delete r[e],a(()=>{for(var _e2 of n){_e2(t);}}),r){return;}delete this._propertyCallbacks;}}getProperties(){var e=this._properties,t={};for(var _r3 in e){t[_r3]=e[_r3];}return t;}setProperties(e){for(var _t2 in e){this.setProperty(_t2,e[_t2]);}}copyProperties(e,t){var _this=this;var _loop=function _loop(_r4){e.getProperty(_r4,e=>_this.setProperty(_r4,e));};for(var _r4 of t){_loop(_r4);}}transform(e){return new R(this,e);}map(e,t){return this.transform({map:t?e.bind(t):e});}filter(e,t){return this.transform({filter:t?e.bind(t):e});}prepend(e){return this.transform({prepend:e});}append(e){return this.transform({append:e});}surround(e,t){return this.transform({prepend:e,append:t});}skip(e){return this.transform({offset:e});}take(e){return this.transform({limit:e});}range(e,t){return this.transform({offset:e,limit:Math.max(t-e+1,0)});}clone(){return new C(this);}}function m(e){"data"===e&&(this.removeListener("newListener",m),b(this,"readable",y),this.readable&&a(()=>y.call(this)));}function y(){var e;for(;0!==this.listenerCount("data")&&null!==(e=this.read());){this.emit("data",e);}0!==this.listenerCount("data")||this.done||(this.removeListener("readable",y),b(this,"newListener",m));}function b(e,t,r){e.listeners(t).includes(r)||e.on(t,r);}class _ extends g{constructor(){super(),this._changeState(p,!0);}}class v extends g{constructor(e){super(),this._item=e,null===e?this.close():this.readable=!0;}read(){var e=this._item;return this._item=null,this.close(),e;}_toStringDetails(){return null===this._item?"":"("+this._item+")";}}class w extends g{constructor(e,_temp){var{autoStart:t=!0}=_temp===void 0?{}:_temp;super();var r=e?[...e]:[];!1!==t&&0===r.length?this.close():(this.readable=!0,this._buffer=r);}read(){var e=null;var t=this._buffer;return t&&(0!==t.length&&(e=t.shift()),0===t.length&&(delete this._buffer,this.close())),e;}_toStringDetails(){return "("+(this._buffer&&this._buffer.length||0)+")";}_destroy(e,t){delete this._buffer,t();}}class S extends g{constructor(_temp2){var{start:e=0,step:t=1,end:r}=_temp2===void 0?{}:_temp2;super(),Number.isFinite(e)&&(e=Math.trunc(e)),this._next=e,Number.isFinite(t)&&(t=Math.trunc(t)),this._step=t;var n=t>=0,i=n?1/0:-1/0;Number.isFinite(r)?r=Math.trunc(r):r!==-i&&(r=i),this._last=r,!Number.isFinite(e)||(n?e>r:e<r)?this.close():this.readable=!0;}read(){if(this.closed)return null;var e=this._next,t=this._step,r=this._last,n=this._next+=t;return (t>=0?n>r:n<r)&&this.close(),e;}_toStringDetails(){return "("+this._next+"..."+this._last+")";}}class T extends g{constructor(_temp3){var{maxBufferSize:e=4,autoStart:t=!0}=_temp3===void 0?{}:_temp3;super(c),this._buffer=[],this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=e,a(()=>this._init(t));}get maxBufferSize(){return this._maxBufferSize;}set maxBufferSize(e){e!==1/0&&(e=Number.isFinite(e)?Math.max(Math.trunc(e),1):4),this._maxBufferSize!==e&&(this._maxBufferSize=e,this._state===l&&this._fillBuffer());}_init(e){var t=!1;this._reading=!0,this._begin(()=>{if(t)throw new Error("done callback called multiple times");t=!0,this._reading=!1,this._changeState(l),e?this._fillBufferAsync():this.readable=!0;});}_begin(e){e();}read(){if(this.done)return null;var e=this._buffer;var t;return 0!==e.length?t=e.shift():(t=null,this.readable=!1),!this._reading&&e.length<this._maxBufferSize&&(this.closed?e.length||this._endAsync():this._fillBufferAsync()),t;}_read(e,t){t();}_push(e){this.done||(this._pushedCount++,this._buffer.push(e),this.readable=!0);}_fillBuffer(){var e;this._reading||(this.closed?this._completeClose():(e=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(e,()=>{if(!e)throw new Error("done callback called multiple times");e=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync());})));}_fillBufferAsync(){this._reading||(this._reading=!0,a(()=>{this._reading=!1,this._fillBuffer();}));}close(){this._reading?this._changeState(h):this._completeClose();}_completeClose(){this._changeState(d)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.length||this._endAsync();}));}_destroy(e,t){this._buffer=[],t();}_flush(e){e();}_toStringDetails(){var e=this._buffer,{length:t}=e;return "{"+(t?"next: "+e[0]+", ":"")+"buffer: "+t+"}";}}class E extends T{constructor(e,t){if(t===void 0){t=e||{};}super(t),this._boundPush=e=>this._push(e),H(e)||(e=t.source),this._sourceStarted=!1!==t.autoStart,U(e)?this.source=e:e&&(this._createSource=V(e)?()=>e:e,this._sourceStarted&&this._loadSourceAsync()),this._optional=Boolean(t.optional),this._destroySource=!1!==t.destroySource;}get source(){return q(this._createSource)&&this._loadSourceAsync(),this._source;}set source(e){var t=this._source=this._validateSource(e);t._destination=this,t.done?this.close():(t.on("end",O),t.on("readable",A),t.on("error",x));}_loadSourceAsync(){q(this._createSource)&&(Promise.resolve(this._createSource()).then(e=>{delete this._createSource,this.source=e,this._fillBuffer();},e=>this.emit("error",e)),this._createSource=null);}_validateSource(e,t){if(t===void 0){t=!1;}if(this._source||void 0!==this._createSource)throw new Error("The source cannot be changed after it has been set");if(!e||!q(e.read)||!q(e.on))throw new Error("Invalid source: "+e);if(!t&&e._destination)throw new Error("The source already has a destination");return e;}read(){return this._sourceStarted||(this._sourceStarted=!0),super.read();}_read(e,t){var r=()=>{this._pushedCount<e&&!this.closed?a(()=>this._readAndTransform(r,t)):t();};this._readAndTransform(r,t);}_readAndTransform(e,t){var r;var n=this.source;!n||n.done||null===(r=n.read())?t():this._optional?this._optionalTransform(r,e):this._transform(r,e,this._boundPush);}_optionalTransform(e,t){var r=this._pushedCount;this._transform(e,()=>{r===this._pushedCount&&this._push(e),t();},this._boundPush);}_transform(e,t,r){r(e),t();}_closeWhenDone(){this.close();}_end(e){var t=this._source;t&&(t.removeListener("end",O),t.removeListener("error",x),t.removeListener("readable",A),delete t._destination,this._destroySource&&t.destroy()),super._end(e);}}function x(e){this._destination.emit("error",e);}function O(){this._destination._closeWhenDone();}function A(){!1!==this._destination._sourceStarted&&this._destination._fillBuffer();}class R extends E{constructor(e,t){if(super(e,t),this._offset=0,this._limit=1/0,this._filter=e=>!0,t=t||(H(e)?null:e)){var _e3=q(t)?t:t.transform,{limit:_r5,offset:_n,filter:_i,map:_a,prepend:_s,append:_o}=t;_n===1/0||_r5===-1/0?this._limit=0:(Number.isFinite(_n)&&(this._offset=Math.max(Math.trunc(_n),0)),Number.isFinite(_r5)&&(this._limit=Math.max(Math.trunc(_r5),0)),q(_i)&&(this._filter=_i),q(_a)&&(this._map=_a),this._transform=q(_e3)?_e3:null),_s&&(this._prepender=U(_s)?_s:M(_s)),_o&&(this._appender=U(_o)?_o:M(_o));}}_read(e,t){var r=()=>this._readAndTransformSimple(e,n,t);function n(){a(r);}this._readAndTransformSimple(e,n,t);}_readAndTransformSimple(e,t,r){var n;var{source:i}=this;if(i&&!i.done){for(0===this._limit&&this.close();!this.closed&&this._pushedCount<e&&null!==(n=i.read());){if(!this._filter(n)||0!==this._offset&&this._offset--)continue;var _e4=void 0===this._map?n:this._map(n);if(null===_e4)this._optional&&this._push(n);else {if(q(this._transform))return void(this._optional?this._optionalTransform(_e4,t):this._transform(_e4,t,this._boundPush));this._push(_e4);}0==--this._limit&&this.close();}r();}else r();}_begin(e){this._insert(this._prepender,e),delete this._prepender;}_flush(e){this._insert(this._appender,e),delete this._appender;}_insert(e,t){var r=e=>this._push(e);!e||e.done?t():(e.on("data",r),e.on("end",function n(){e.removeListener("data",r),e.removeListener("end",n),t();}));}}class I extends E{constructor(e,t){if(super(e,t),this._transformerQueue=[],t){var _e5=q(t)?t:t.multiTransform;_e5&&(this._createTransformer=_e5);}}_read(e,t){var r=this._transformerQueue,n=this._optional;var i,a;for(;(i=r[0])&&i.transformer.done;){n&&null!==i.item&&(e--,this._push(i.item)),r.shift();var{transformer:_t3}=i;_t3.removeListener("end",A),_t3.removeListener("readable",A),_t3.removeListener("error",x);}var{source:s}=this;for(;s&&!s.done&&r.length<this.maxBufferSize&&(a=s.read(),null!==a);){var _e6=this._createTransformer(a)||new _();_e6._destination=this,_e6.on("end",A),_e6.on("readable",A),_e6.on("error",x),r.push({transformer:_e6,item:a});}if(i=r[0],i){var{transformer:_t4}=i;for(;e-->0&&null!==(a=_t4.read());){this._push(a),n&&(i.item=null);}}else s&&s.done&&this.close();t();}_createTransformer(e){return new v(e);}_closeWhenDone(){this._transformerQueue.length||this.close();}}class N extends T{constructor(e,t){if(t===void 0){t={};}super(t),this._sources=[],this._currentSource=-1;var r=!1!==t.autoStart;if(U(e))e.on("error",e=>this.emit("error",e)),this._pending={sources:e},r&&this._loadSources();else if(Array.isArray(e)&&e.length>0)for(var _t5 of e){this._addSource(_t5);}else r&&this.close();}_loadSources(){var e=this._pending.sources;delete this._pending.sources,e.done?(delete this._pending,this.close()):(e.on("data",e=>{this._addSource(e),this._fillBufferAsync();}),e.on("end",()=>{delete this._pending,this._fillBuffer();}));}_addSource(e){e.done||(this._sources.push(e),e._destination=this,e.on("error",x),e.on("readable",A),e.on("end",P));}_removeEmptySources(){this._sources=this._sources.filter((e,t)=>(e.done&&t<=this._currentSource&&this._currentSource--,!e.done)),this._fillBuffer();}_read(e,t){var r;(null===(r=this._pending)||void 0===r?void 0:r.sources)&&this._loadSources();var n,i=0;for(;i!==(i=e);){for(var _t6=0;_t6<this._sources.length&&e>0;_t6++){this._currentSource=(this._currentSource+1)%this._sources.length;null!==(n=this._sources[this._currentSource].read())&&(e--,this._push(n));}}this._pending||0!==this._sources.length||this.close(),t();}}function P(){this._destination._removeEmptySources();}class C extends E{constructor(e){super(e,{autoStart:!1}),this._readPosition=0,this._reading=!1;}_init(){}close(){g.prototype.close.call(this);}get source(){return super.source;}set source(e){var t=this._source=this._validateSource(e),r=t&&t._destination||(t._destination=new D(t));r.endsAt(0)?this.close():(r.register(this),null!==r.readAt(0)&&(this.readable=!0));var n=this._propertyCallbacks;for(var _e7 in n){var _t7=n[_e7];for(var _r6 of _t7){this._getSourceProperty(_e7,_r6);}}}_validateSource(e,t){var r=e&&e._destination;return super._validateSource(e,!r||r instanceof D);}getProperty(e,t){var{source:r}=this,n=this._properties,i=n&&e in n;if(!t)return i?n&&n[e]:r&&r.getProperty(e);super.getProperty(e,t),r&&!i&&this._getSourceProperty(e,t);}_getSourceProperty(e,t){this.source.getProperty(e,r=>{this._properties&&e in this._properties||t(r);});}getProperties(){var e=this.source?this.source.getProperties():{},t=this._properties;for(var _r7 in t){e[_r7]=t[_r7];}return e;}_toStringDetails(){return "{source: "+(this.source?this.source.toString():"none")+"}";}read(){var e=this.source;var t=null;if(!this.done&&e){var _r8=e._destination;null!==(t=_r8.readAt(this._readPosition))?this._readPosition++:this.readable=!1,_r8.endsAt(this._readPosition)&&this.close();}return t;}_end(e){var t=this.source,r=null==t?void 0:t._destination;r&&r.unregister(this),T.prototype._end.call(this,e);}}class D{constructor(e){if(this._clones=null,this._history=[],this._source=e,!e.done){var _t8=()=>{for(var _e8 of this._clones){_e8.readable=!0;}},_r9=e=>{for(var _t9 of this._clones){_t9.emit("error",e);}},_n2=()=>{for(var _e9 of this._clones){_e9._readPosition===this._history.length&&_e9.close();}this._clones=null,e.removeListener("end",_n2),e.removeListener("error",_r9),e.removeListener("readable",_t8);};this._clones=[],e.on("end",_n2),e.on("error",_r9),e.on("readable",_t8);}}register(e){null!==this._clones&&this._clones.push(e);}unregister(e){null!==this._clones&&(this._clones=this._clones.filter(t=>t!==e));}readAt(e){var t=null;return e<this._history.length?t=this._history[e]:this._source.done||null===(t=this._source.read())||(this._history[e]=t),t;}endsAt(e){return this._source.done&&this._history.length===e;}}function j(e,t){return new E(e,t);}function k(){return new _();}function L(e){return new v(e);}function M(e){return new w(e);}function F(e){return new N(e);}function B(e,t,r){return new S({start:e,end:t,step:r});}function q(e){return "function"==typeof e;}function U(e){return e&&"function"==typeof e.on;}function V(e){return e&&"function"==typeof e.then;}function H(e){return e&&(U(e)||V(e)||q(e));}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.termToString=t.stringToTerm=t.stringQuadToQuad=t.quadToStringQuad=t.getLiteralValue=t.getLiteralType=t.getLiteralLanguage=void 0;var n=r(198);Object.defineProperty(t,"getLiteralLanguage",{enumerable:!0,get:function get(){return n.getLiteralLanguage;}}),Object.defineProperty(t,"getLiteralType",{enumerable:!0,get:function get(){return n.getLiteralType;}}),Object.defineProperty(t,"getLiteralValue",{enumerable:!0,get:function get(){return n.getLiteralValue;}}),Object.defineProperty(t,"quadToStringQuad",{enumerable:!0,get:function get(){return n.quadToStringQuad;}}),Object.defineProperty(t,"stringQuadToQuad",{enumerable:!0,get:function get(){return n.stringQuadToQuad;}}),Object.defineProperty(t,"stringToTerm",{enumerable:!0,get:function get(){return n.stringToTerm;}}),Object.defineProperty(t,"termToString",{enumerable:!0,get:function get(){return n.termToString;}});},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(96),t),i(r(199),t),i(r(97),t),i(r(98),t),i(r(68),t),i(r(99),t),i(r(100),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.toSparqlJs=t.toSparql=t.Factory=t.Algebra=t.translate=void 0;var n=r(200);t.translate=n.default;var i=r(52);t.Algebra=i;var a=r(53);t.Factory=a.default;var s=r(216);Object.defineProperty(t,"toSparql",{enumerable:!0,get:function get(){return s.toSparql;}}),Object.defineProperty(t,"toSparqlJs",{enumerable:!0,get:function get(){return s.toSparqlJs;}});var o=r(70);t.Util=o.default;},function(e,t,r){var n="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i="http://www.w3.org/2001/XMLSchema#",a="http://www.w3.org/2000/10/swap/";t.a={xsd:{decimal:i+"decimal",boolean:i+"boolean",double:i+"double",integer:i+"integer",string:i+"string"},rdf:{type:n+"type",nil:n+"nil",first:n+"first",rest:n+"rest",langString:n+"langString"},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:a+"reify#forSome",forAll:a+"reify#forAll"},log:{implies:a+"log#implies"}};},function(e,t){var r,n,i=e.exports={};function a(){throw new Error("setTimeout has not been defined");}function s(){throw new Error("clearTimeout has not been defined");}function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0);}catch(t){try{return r.call(null,e,0);}catch(t){return r.call(this,e,0);}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a;}catch(e){r=a;}try{n="function"==typeof clearTimeout?clearTimeout:s;}catch(e){n=s;}}();var u,c=[],l=!1,h=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p());}function p(){if(!l){var e=o(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;){u&&u[h].run();}h=-1,t=c.length;}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e);}catch(t){try{return n.call(null,e);}catch(t){return n.call(this,e);}}}(e);}}function f(e,t){this.fun=e,this.array=t;}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r];}c.push(new f(e,t)),1!==c.length||l||o(p);},f.prototype.run=function(){this.fun.apply(null,this.array);},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return [];},i.binding=function(e){throw new Error("process.binding is not supported");},i.cwd=function(){return "/";},i.chdir=function(e){throw new Error("process.chdir is not supported");},i.umask=function(){return 0;};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(149),t),i(r(47),t),i(r(150),t),i(r(333),t),i(r(334),t),i(r(152),t),i(r(83),t);},function(e,t){var r;r=function(){return this;}();try{r=r||new Function("return this")();}catch(e){"object"==typeof window&&(r=window);}e.exports=r;},function(e,t,r){(function(e){/*!
             * The buffer module from node.js, for the browser.
             *
             * @author   Feross Aboukhadijeh <http://feross.org>
             * @license  MIT
             */var n=r(202),i=r(203),a=r(103);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823;}function o(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e;}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e);}return c(this,e,t,r);}function c(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return "undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=d(e,t);return e;}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,r),i=(e=o(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e;}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|p(t.length);return 0===(e=o(e,r)).length||t.copy(e,0,0,r),e;}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return "number"!=typeof t.length||(n=t.length)!=n?o(e,0):d(e,t);if("Buffer"===t.type&&a(t.data))return d(e,t.data);}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}(e,t);}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative');}function h(e,t){if(l(t),e=o(e,t<0?0:0|p(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r){e[r]=0;}return e;}function d(e,t){var r=t.length<0?0:0|p(t.length);e=o(e,r);for(var n=0;n<r;n+=1){e[n]=255&t[n];}return e;}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e;}function f(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(e).length;default:if(n)return q(e).length;t=(""+t).toLowerCase(),n=!0;}}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return "";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return "";if((r>>>=0)<=(t>>>=0))return "";for(e||(e="utf8");;){switch(e){case"hex":return I(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0;}}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n;}function y(e,t,r,n,i){if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1;}else if(r<0){if(!i)return -1;r=0;}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer");}function b(e,t,r,n,i){var a,s=1,o=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;s=2,o/=2,u/=2,r/=2;}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s);}if(i){var l=-1;for(a=r;a<o;a++){if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*s;}else -1!==l&&(a-=a-l),l=-1;}}else for(r+u>o&&(r=o-u),a=r;a>=0;a--){for(var h=!0,d=0;d<u;d++){if(c(e,a+d)!==c(t,d)){h=!1;break;}}if(h)return a;}return -1;}function _(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var s=0;s<n;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[r+s]=o;}return s;}function v(e,t,r,n){return V(q(t,e.length-r),e,r,n);}function w(e,t,r,n){return V(function(e){for(var t=[],r=0;r<e.length;++r){t.push(255&e.charCodeAt(r));}return t;}(t),e,r,n);}function S(e,t,r,n){return w(e,t,r,n);}function T(e,t,r,n){return V(U(t),e,r,n);}function E(e,t,r,n){return V(function(e,t){for(var r,n,i,a=[],s=0;s<e.length&&!((t-=2)<0);++s){r=e.charCodeAt(s),n=r>>8,i=r%256,a.push(i),a.push(n);}return a;}(t,e.length-r),e,r,n);}function x(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r));}function O(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,s,o,u,c=e[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=r)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=e[i+1],s=e[i+2],128==(192&a)&&128==(192&s)&&(u=(15&c)<<12|(63&a)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=e[i+1],s=e[i+2],o=e[i+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&(u=(15&c)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&u<1114112&&(l=u);}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=h;}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;){r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));}return r;}(n);}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e);},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function foo(){return 42;}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength;}catch(e){return !1;}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e;},u.from=function(e,t,r){return c(null,e,t,r);},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?o(e,t):void 0!==r?"string"==typeof n?o(e,t).fill(r,n):o(e,t).fill(r):o(e,t);}(null,e,t,r);},u.allocUnsafe=function(e){return h(null,e);},u.allocUnsafeSlow=function(e){return h(null,e);},u.isBuffer=function(e){return !(null==e||!e._isBuffer);},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i){if(e[i]!==t[i]){r=e[i],n=t[i];break;}}return r<n?-1:n<r?1:0;},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return !0;default:return !1;}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r){t+=e[r].length;}var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length;}return n;},u.byteLength=f,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2){m(this,t,t+1);}return this;},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4){m(this,t,t+3),m(this,t+1,t+2);}return this;},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8){m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);}return this;},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):g.apply(this,arguments);},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e);},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">";},u.prototype.compare=function(e,t,r,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),o=Math.min(a,s),c=this.slice(n,i),l=e.slice(t,r),h=0;h<o;++h){if(c[h]!==l[h]){a=c[h],s=l[h];break;}}return a<s?-1:s<a?1:0;},u.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r);},u.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0);},u.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1);},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else {if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0);}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;){switch(n){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return v(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return S(this,e,t,r);case"base64":return T(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0;}}},u.prototype.toJSON=function(){return {type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)};};function A(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(127&e[i]);}return n;}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i]);}return n;}function I(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a){i+=B(e[a]);}return i;}function N(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2){i+=String.fromCharCode(n[a]+256*n[a+1]);}return i;}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length");}function C(e,t,r,n,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range");}function D(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i){e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i);}}function j(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i){e[r+i]=t>>>8*(n?i:3-i)&255;}}function k(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range");}function L(e,t,r,n,a){return a||k(e,0,r,4),i.write(e,t,r,n,23,4),r+4;}function M(e,t,r,n,a){return a||k(e,0,r,8),i.write(e,t,r,n,52,8),r+8;}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else {var i=t-e;r=new u(i,void 0);for(var a=0;a<i;++a){r[a]=this[a+e];}}return r;},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);){n+=this[e+a]*i;}return n;},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);){n+=this[e+--t]*i;}return n;},u.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e];},u.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8;},u.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1];},u.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3];},u.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3]);},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);){n+=this[e+a]*i;}return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n;},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);){a+=this[e+--n]*i;}return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a;},u.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e];},u.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r;},u.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r;},u.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24;},u.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3];},u.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!0,23,4);},u.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!1,23,4);},u.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!0,52,8);},u.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!1,52,8);},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||C(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);){this[t+a]=e/i&255;}return t+r;},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||C(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);){this[t+i]=e/a&255;}return t+r;},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1;},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2;},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2;},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4;},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4;},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i);}var a=0,s=1,o=0;for(this[t]=255&e;++a<r&&(s*=256);){e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;}return t+r;},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i);}var a=r-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);){e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;}return t+r;},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1;},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2;},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2;},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4;},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4;},u.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r);},u.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r);},u.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r);},u.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r);},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i){e[i+t]=this[i+r];}else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i){e[i+t]=this[i+r];}else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a;},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i);}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);}else "number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a){this[a]=e;}else {var s=u.isBuffer(e)?e:q(new u(e,n).toString()),o=s.length;for(a=0;a<r-t;++a){this[a+t]=s[a%o];}}return this;};var F=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16);}function q(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue;}if(s+1===n){(t-=3)>-1&&a.push(239,191,189);continue;}i=r;continue;}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue;}r=65536+(i-55296<<10|r-56320);}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r);}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128);}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128);}else {if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128);}}return a;}function U(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"");}(e).replace(F,"")).length<2)return "";for(;e.length%4!=0;){e+="=";}return e;}(e));}function V(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i){t[i+r]=e[i];}return i;}}).call(this,r(10));},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}));}:e.exports=function(e,t){if(t){e.super_=t;var r=function r(){};r.prototype=t.prototype,e.prototype=new r(),e.prototype.constructor=e;}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e){t.hasOwnProperty(r)||(t[r]=e[r]);}}(r(279));},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NamedOperators=t.SetFunctions=t.SetFunction=t.Operators=t.SpecialOperators=t.RegularOperators=t.SpecialOperator=t.RegularOperator=t.decategorize=t.type=t.PrimitiveNumericTypes=t.commonTerms=t.DerivedIntegerTypeURLs=t.NumericTypeURLs=t.DerivedIntegerTypeURL=t.NumericTypeURL=t.make=t.TypeURL=t.EVB_ERR_STR=t.FALSE_STR=t.TRUE_STR=void 0;var n=r(5),i=r(23),a=new n.DataFactory();var s,o,u;t.TRUE_STR='"true"^^xsd:boolean',t.FALSE_STR='"false"^^xsd:boolean',t.EVB_ERR_STR='"not an dateTime"^^xsd:dateTime',function(e){e.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",e.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",e.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",e.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",e.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",e.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",e.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",e.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",e.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",e.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",e.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",e.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",e.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",e.XSD_INT="http://www.w3.org/2001/XMLSchema#int",e.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",e.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",e.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",e.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",e.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",e.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",e.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",e.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",e.XSD_DAYTIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration";}(s=t.TypeURL||(t.TypeURL={})),t.make=function(e){return a.namedNode(e);},function(e){e.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",e.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",e.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",e.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",e.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",e.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",e.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",e.XSD_INT="http://www.w3.org/2001/XMLSchema#int",e.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",e.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",e.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",e.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",e.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",e.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",e.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",e.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger";}(o=t.NumericTypeURL||(t.NumericTypeURL={})),function(e){e.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",e.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",e.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",e.XSD_INT="http://www.w3.org/2001/XMLSchema#int",e.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",e.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",e.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",e.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",e.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",e.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",e.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",e.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger";}(u=t.DerivedIntegerTypeURL||(t.DerivedIntegerTypeURL={})),t.NumericTypeURLs=i.Set(Object.values(o)),t.DerivedIntegerTypeURLs=i.Set(Object.values(u)),t.commonTerms={true:a.literal("true",a.namedNode(s.XSD_BOOLEAN)),false:a.literal("false",a.namedNode(s.XSD_BOOLEAN))},t.PrimitiveNumericTypes=i.Set(["integer","decimal","float","double"]),t.type=function(e){switch(e){case null:case void 0:case"":case s.XSD_ANY_URI:case s.XSD_STRING:return "string";case s.RDF_LANG_STRING:return "langString";case s.XSD_DATE_TIME:return "date";case s.XSD_BOOLEAN:return "boolean";case s.XSD_DECIMAL:return "decimal";case s.XSD_FLOAT:return "float";case s.XSD_DOUBLE:return "double";case s.XSD_INTEGER:case s.XSD_NON_POSITIVE_INTEGER:case s.XSD_NEGATIVE_INTEGER:case s.XSD_LONG:case s.XSD_INT:case s.XSD_SHORT:case s.XSD_BYTE:case s.XSD_NON_NEGATIVE_INTEGER:case s.XSD_UNSIGNED_LONG:case s.XSD_UNSIGNED_INT:case s.XSD_UNSIGNED_SHORT:case s.XSD_UNSIGNED_BYTE:case s.XSD_POSITIVE_INTEGER:return "integer";default:return "other";}};var c=i.Map([["integer",s.XSD_INTEGER],["float",s.XSD_FLOAT],["double",s.XSD_DOUBLE],["decimal",s.XSD_DECIMAL]]);var l,h,d;t.decategorize=function(e){return c.get(e);},function(e){e.NOT="!",e.UMINUS="UMINUS",e.UPLUS="UPLUS",e.EQUAL="=",e.NOT_EQUAL="!=",e.LT="<",e.GT=">",e.LTE="<=",e.GTE=">=",e.MULTIPLICATION="*",e.DIVISION="/",e.ADDITION="+",e.SUBTRACTION="-",e.IS_IRI="isiri",e.IS_BLANK="isblank",e.IS_LITERAL="isliteral",e.IS_NUMERIC="isnumeric",e.STR="str",e.LANG="lang",e.DATATYPE="datatype",e.STRDT="strdt",e.STRLANG="strlang",e.UUID="uuid",e.STRUUID="struuid",e.STRLEN="strlen",e.SUBSTR="substr",e.UCASE="ucase",e.LCASE="lcase",e.STRSTARTS="strstarts",e.STRENDS="strends",e.CONTAINS="contains",e.STRBEFORE="strbefore",e.STRAFTER="strafter",e.ENCODE_FOR_URI="encode_for_uri",e.LANG_MATCHES="langmatches",e.REGEX="regex",e.REPLACE="replace",e.ABS="abs",e.ROUND="round",e.CEIL="ceil",e.FLOOR="floor",e.RAND="rand",e.YEAR="year",e.MONTH="month",e.DAY="day",e.HOURS="hours",e.MINUTES="minutes",e.SECONDS="seconds",e.TIMEZONE="timezone",e.TZ="tz",e.MD5="md5",e.SHA1="sha1",e.SHA256="sha256",e.SHA384="sha384",e.SHA512="sha512";}(l=t.RegularOperator||(t.RegularOperator={})),function(e){e.BOUND="bound",e.IF="if",e.COALESCE="coalesce",e.LOGICAL_OR="||",e.LOGICAL_AND="&&",e.SAME_TERM="sameterm",e.IN="in",e.NOT_IN="notin",e.CONCAT="concat",e.NOW="now",e.IRI="iri",e.URI="uri",e.BNODE="BNODE";}(h=t.SpecialOperator||(t.SpecialOperator={})),t.RegularOperators=i.Set(Object.values(l)),t.SpecialOperators=i.Set(Object.values(h)),t.Operators=t.RegularOperators.union(t.SpecialOperators),function(e){e.COUNT="count",e.SUM="sum",e.MIN="min",e.MAX="max",e.AVG="avg",e.GROUP_CONCAT="group_concat",e.SAMPLE="sample";}(d=t.SetFunction||(t.SetFunction={})),t.SetFunctions=i.Set(Object.values(d)),t.NamedOperators=i.Set([s.XSD_STRING,s.XSD_FLOAT,s.XSD_DOUBLE,s.XSD_DECIMAL,s.XSD_INTEGER,s.XSD_DATE_TIME,s.XSD_DATE,s.XSD_BOOLEAN]);},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(228),t),i(r(230),t);},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(259),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerAdapter=void 0;t.NodeValueHandlerAdapter=class{constructor(e,t,r){this.targetKind=e,this.util=t,this.settings=r;}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(417);t.collectNamedTerms=n.collectNamedTerms,t.everyTerms=n.everyTerms,t.filterQuadTermNames=n.filterQuadTermNames,t.filterTerms=n.filterTerms,t.forEachTerms=n.forEachTerms,t.getNamedTerms=n.getNamedTerms,t.getTerms=n.getTerms,t.getTermsNested=n.getTermsNested,t.mapTerms=n.mapTerms,t.matchPattern=n.matchPattern,t.matchPatternComplete=n.matchPatternComplete,t.QUAD_TERM_NAMES=n.QUAD_TERM_NAMES,t.reduceTerms=n.reduceTerms,t.someTerms=n.someTerms,t.TRIPLE_TERM_NAMES=n.TRIPLE_TERM_NAMES;var i=r(418);t.getBlankNodes=i.getBlankNodes,t.getDefaultGraphs=i.getDefaultGraphs,t.getLiterals=i.getLiterals,t.getNamedNodes=i.getNamedNodes,t.getTermsOfType=i.getTermsOfType,t.getVariables=i.getVariables,t.TERM_TYPES=i.TERM_TYPES,t.uniqTerms=i.uniqTerms;},function(e,t,r){var n=r(49),i=r(12);function a(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1));}function s(e){return (e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0;}function o(e){return 1===e.length?"0"+e:e;}function u(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e;}t.inherits=i,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return [];var r=[];if("string"==typeof e){if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2){r.push(parseInt(e[i]+e[i+1],16));}}else for(var n=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=63&s|128):a(e,i)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=63&s|128);}}else for(i=0;i<e.length;i++){r[i]=0|e[i];}return r;},t.toHex=function(e){for(var t="",r=0;r<e.length;r++){t+=o(e[r].toString(16));}return t;},t.htonl=s,t.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=s(i)),r+=u(i.toString(16));}return r;},t.zero2=o,t.zero8=u,t.join32=function(e,t,r,i){var a=r-t;n(a%4==0);for(var s=new Array(a/4),o=0,u=t;o<s.length;o++,u+=4){var c;c="big"===i?e[u]<<24|e[u+1]<<16|e[u+2]<<8|e[u+3]:e[u+3]<<24|e[u+2]<<16|e[u+1]<<8|e[u],s[o]=c>>>0;}return s;},t.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var a=e[n];"big"===t?(r[i]=a>>>24,r[i+1]=a>>>16&255,r[i+2]=a>>>8&255,r[i+3]=255&a):(r[i+3]=a>>>24,r[i+2]=a>>>16&255,r[i+1]=a>>>8&255,r[i]=255&a);}return r;},t.rotr32=function(e,t){return e>>>t|e<<32-t;},t.rotl32=function(e,t){return e<<t|e>>>32-t;},t.sum32=function(e,t){return e+t>>>0;},t.sum32_3=function(e,t,r){return e+t+r>>>0;},t.sum32_4=function(e,t,r,n){return e+t+r+n>>>0;},t.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0;},t.sum64=function(e,t,r,n){var i=e[t],a=n+e[t+1]>>>0,s=(a<n?1:0)+r+i;e[t]=s>>>0,e[t+1]=a;},t.sum64_hi=function(e,t,r,n){return (t+n>>>0<t?1:0)+e+r>>>0;},t.sum64_lo=function(e,t,r,n){return t+n>>>0;},t.sum64_4_hi=function(e,t,r,n,i,a,s,o){var u=0,c=t;return u+=(c=c+n>>>0)<t?1:0,u+=(c=c+a>>>0)<a?1:0,e+r+i+s+(u+=(c=c+o>>>0)<o?1:0)>>>0;},t.sum64_4_lo=function(e,t,r,n,i,a,s,o){return t+n+a+o>>>0;},t.sum64_5_hi=function(e,t,r,n,i,a,s,o,u,c){var l=0,h=t;return l+=(h=h+n>>>0)<t?1:0,l+=(h=h+a>>>0)<a?1:0,l+=(h=h+o>>>0)<o?1:0,e+r+i+s+u+(l+=(h=h+c>>>0)<c?1:0)>>>0;},t.sum64_5_lo=function(e,t,r,n,i,a,s,o,u,c){return t+n+a+o+c>>>0;},t.rotr64_hi=function(e,t,r){return (t<<32-r|e>>>r)>>>0;},t.rotr64_lo=function(e,t,r){return (e<<32-r|t>>>r)>>>0;},t.shr64_hi=function(e,t,r){return e>>>r;},t.shr64_lo=function(e,t,r){return (e<<32-r|t>>>r)>>>0;};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NoExistenceHook=t.NoAggregator=t.UnknownNamedOperator=t.UnknownOperator=t.InvalidTermType=t.InvalidExpressionType=t.InvalidExpression=t.InvalidArity=t.UnimplementedError=t.UnexpectedError=t.EmptyAggregateError=t.IncompatibleLanguageOperation=t.InvalidTimezoneCall=t.CastError=t.InvalidArgumentTypes=t.InError=t.CoalesceError=t.RDFEqualTypeError=t.EBVCoercionError=t.UnboundVariableError=t.InvalidLexicalForm=t.isExpressionError=t.ExpressionError=void 0;class n extends Error{}t.ExpressionError=n,t.isExpressionError=function(e){return e instanceof n;};t.InvalidLexicalForm=class extends n{constructor(e){super("Invalid lexical form '"+f(e)+"'"),this.arg=e;}};t.UnboundVariableError=class extends n{constructor(e,t){super("Unbound variable '"+f(e)+"'"),this.variable=e,this.bindings=t;}};t.EBVCoercionError=class extends n{constructor(e){super("Cannot coerce term to EBV '"+f(e)+"'"),this.arg=e;}};t.RDFEqualTypeError=class extends n{constructor(e){super("Equality test for literals with unsupported datatypes"),this.args=e;}};t.CoalesceError=class extends n{constructor(e){super("All COALESCE arguments threw errors"),this.errors=e;}};t.InError=class extends n{constructor(e){super("Some argument to IN errorred and none where equal. "+e.map(e=>"("+e.toString()+") ").join("and ")),this.errors=e;}};t.InvalidArgumentTypes=class extends n{constructor(e,t){super("Argument types not valid for operator: '"+f(t)+"' with '"+f(e)),this.args=e,this.op=t;}};t.CastError=class extends n{constructor(e,t){super("Invalid cast: '"+f(e)+"' to '"+f(t)+"'"),this.arg=e;}};t.InvalidTimezoneCall=class extends n{constructor(e){super("TIMEZONE call on "+e+" which has no timezone"),this.dateString=e;}};t.IncompatibleLanguageOperation=class extends n{constructor(e,t){super("Operation on incompatible language literals '"+f(e)+"' and '"+f(t)+"'"),this.arg1=e,this.arg2=t;}};t.EmptyAggregateError=class extends n{constructor(){super("Empty aggregate expression");}};class i extends Error{constructor(e,t){super("Programmer Error '"+e+"'"),this.payload=t;}}t.UnexpectedError=i;class a extends Error{constructor(e){super("Unimplemented feature '"+e+"!'");}}t.UnimplementedError=a;class s extends Error{constructor(e,t){super("The number of args does not match the arity of the operator '"+f(t)+"'."),this.args=e,this.op=t;}}t.InvalidArity=s;class o extends Error{constructor(e){super("Invalid SPARQL Expression '"+f(e)+"'");}}t.InvalidExpression=o;class u extends Error{constructor(e){super("Invalid expression type for SPARQL Expression '"+f(e)+"'"),this.expr=e;}}t.InvalidExpressionType=u;class c extends Error{constructor(e){super("Invalid term type for term '"+f(e)+"'"),this.term=e;}}t.InvalidTermType=c;class l extends Error{constructor(e){super("Unknown operator: '"+f(e));}}t.UnknownOperator=l;class h extends Error{constructor(e){super("Unknown named operator: '"+f(e)+"'");}}t.UnknownNamedOperator=h;class d extends Error{constructor(e){super("Aggregate expression "+f(e)+" found, but no aggregate hook provided.");}}t.NoAggregator=d;class p extends Error{constructor(){super("EXISTS found, but no existence hook provided.");}}function f(e){return JSON.stringify(e);}t.NoExistenceHook=p;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(112),t),i(r(218),t);},function(e,t,r){var n,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r);};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e));}:function(e){return Object.getOwnPropertyNames(e);};var s=Number.isNaN||function(e){return e!=e;};function o(){o.init.call(this);}e.exports=o,e.exports.once=function(e,t){return new Promise(function(r,n){function i(){void 0!==a&&e.removeListener("error",a),r([].slice.call(arguments));}var a;"error"!==t&&(a=function a(r){e.removeListener(t,i),n(r);},e.once("error",a)),e.once(t,i);});},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners;}function h(e,t,r,n){var i,a,s,o;if(c(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),s=a[t]),void 0===s)s=a[t]=r,++e._eventsCount;else if("function"==typeof s?s=a[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,o=u,console&&console.warn&&console.warn(o);}return e;}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments);}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=d.bind(n);return i.listener=r,n.wrapFn=i,i;}function f(e,t,r){var n=e._events;if(void 0===n)return [];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r){t[r]=e[r].listener||e[r];}return t;}(i):m(i,i.length);}function g(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length;}return 0;}function m(e,t){for(var r=new Array(t),n=0;n<t;++n){r[n]=e[n];}return r;}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function get(){return u;},set:function set(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e;}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0;},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this;},o.prototype.getMaxListeners=function(){return l(this);},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++){t.push(arguments[r]);}var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return !1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o;}var u=i[e];if(void 0===u)return !1;if("function"==typeof u)a(u,this,t);else {var c=u.length,l=m(u,c);for(r=0;r<c;++r){a(l[r],this,t);}}return !0;},o.prototype.addListener=function(e,t){return h(this,e,t,!1);},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return h(this,e,t,!0);},o.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this;},o.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this;},o.prototype.removeListener=function(e,t){var r,n,i,a,s;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,a=r.length-1;a>=0;a--){if(r[a]===t||r[a].listener===t){s=r[a].listener,i=a;break;}}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++){e[t]=e[t+1];}e.pop();}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t);}return this;},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,a=Object.keys(r);for(n=0;n<a.length;++n){"removeListener"!==(i=a[n])&&this.removeAllListeners(i);}return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this;}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--){this.removeListener(e,t[n]);}return this;},o.prototype.listeners=function(e){return f(this,e,!0);},o.prototype.rawListeners=function(e){return f(this,e,!1);},o.listenerCount=function(e,t){return "function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t);},o.prototype.listenerCount=g,o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[];};},function(e,t,r){e.exports=function(){var e=Array.prototype.slice;function t(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e;}function r(e){return s(e)?e:V(e);}function n(e){return o(e)?e:H(e);}function i(e){return u(e)?e:G(e);}function a(e){return s(e)&&!c(e)?e:z(e);}function s(e){return !(!e||!e[h]);}function o(e){return !(!e||!e[d]);}function u(e){return !(!e||!e[p]);}function c(e){return o(e)||u(e);}function l(e){return !(!e||!e[f]);}t(n,r),t(i,r),t(a,r),r.isIterable=s,r.isKeyed=o,r.isIndexed=u,r.isAssociative=c,r.isOrdered=l,r.Keyed=n,r.Indexed=i,r.Set=a;var h="@@__IMMUTABLE_ITERABLE__@@",d="@@__IMMUTABLE_KEYED__@@",p="@@__IMMUTABLE_INDEXED__@@",f="@@__IMMUTABLE_ORDERED__@@",g={},m={value:!1},y={value:!1};function b(e){return e.value=!1,e;}function _(e){e&&(e.value=!0);}function v(){}function w(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),i=0;i<r;i++){n[i]=e[i+t];}return n;}function S(e){return void 0===e.size&&(e.size=e.__iterate(E)),e.size;}function T(e,t){if("number"!=typeof t){var r=t>>>0;if(""+r!==t||4294967295===r)return NaN;t=r;}return t<0?S(e)+t:t;}function E(){return !0;}function x(e,t,r){return (0===e||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r);}function O(e,t){return R(e,t,0);}function A(e,t){return R(e,t,t);}function R(e,t,r){return void 0===e?r:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e);}var I,N,P,C="function"==typeof Symbol&&Symbol.iterator,D=C||"@@iterator";function j(e){this.next=e;}function k(e,t,r,n){var i=0===e?t:1===e?r:[t,r];return n?n.value=i:n={value:i,done:!1},n;}function L(){return {value:void 0,done:!0};}function M(e){return !!q(e);}function F(e){return e&&"function"==typeof e.next;}function B(e){var t=q(e);return t&&t.call(e);}function q(e){var t=e&&(C&&e[C]||e["@@iterator"]);if("function"==typeof t)return t;}function U(e){return e&&"number"==typeof e.length;}function V(e){return null==e?W():s(e)?e.toSeq():function(e){var t=ee(e)||"object"==typeof e&&new X(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t;}(e);}function H(e){return null==e?W().toKeyedSeq():s(e)?o(e)?e.toSeq():e.fromEntrySeq():K(e);}function G(e){return null==e?W():s(e)?o(e)?e.entrySeq():e.toIndexedSeq():Z(e);}function z(e){return (null==e?W():s(e)?o(e)?e.entrySeq():e:Z(e)).toSetSeq();}function Q(e){this._array=e,this.size=e.length;}function X(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length;}function $(e){this._iterable=e,this.size=e.length||e.size;}function Y(e){this._iterator=e,this._iteratorCache=[];}function J(e){return !(!e||!e["@@__IMMUTABLE_SEQ__@@"]);}function W(){return I||(I=new Q([]));}function K(e){var t=Array.isArray(e)?new Q(e).fromEntrySeq():F(e)?new Y(e).fromEntrySeq():M(e)?new $(e).fromEntrySeq():"object"==typeof e?new X(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t;}function Z(e){var t=ee(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t;}function ee(e){return U(e)?new Q(e):F(e)?new Y(e):M(e)?new $(e):void 0;}function te(e,t,r,n){var i=e._cache;if(i){for(var a=i.length-1,s=0;s<=a;s++){var o=i[r?a-s:s];if(!1===t(o[1],n?o[0]:s,e))return s+1;}return s;}return e.__iterateUncached(t,r);}function re(e,t,r,n){var i=e._cache;if(i){var a=i.length-1,s=0;return new j(function(){var e=i[r?a-s:s];return s++>a?{value:void 0,done:!0}:k(t,n?e[0]:s-1,e[1]);});}return e.__iteratorUncached(t,r);}function ne(e,t){return t?function e(t,r,n,i){return Array.isArray(r)?t.call(i,n,G(r).map(function(n,i){return e(t,n,i,r);})):ae(r)?t.call(i,n,H(r).map(function(n,i){return e(t,n,i,r);})):r;}(t,e,"",{"":e}):ie(e);}function ie(e){return Array.isArray(e)?G(e).map(ie).toList():ae(e)?H(e).map(ie).toMap():e;}function ae(e){return e&&(e.constructor===Object||void 0===e.constructor);}function se(e,t){if(e===t||e!=e&&t!=t)return !0;if(!e||!t)return !1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return !0;if(!e||!t)return !1;}return !("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t));}function oe(e,t){if(e===t)return !0;if(!s(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||o(e)!==o(t)||u(e)!==u(t)||l(e)!==l(t))return !1;if(0===e.size&&0===t.size)return !0;var r=!c(e);if(l(e)){var n=e.entries();return t.every(function(e,t){var i=n.next().value;return i&&se(i[1],e)&&(r||se(i[0],t));})&&n.next().done;}var i=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else {i=!0;var a=e;e=t,t=a;}var h=!0,d=t.__iterate(function(t,n){if(r?!e.has(t):i?!se(t,e.get(n,g)):!se(e.get(n,g),t))return h=!1,!1;});return h&&e.size===d;}function ue(e,t){if(!(this instanceof ue))return new ue(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(N)return N;N=this;}}function ce(e,t){if(!e)throw new Error(t);}function le(e,t,r){if(!(this instanceof le))return new le(e,t,r);if(ce(0!==r,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),r=void 0===r?1:Math.abs(r),t<e&&(r=-r),this._start=e,this._end=t,this._step=r,this.size=Math.max(0,Math.ceil((t-e)/r-1)+1),0===this.size){if(P)return P;P=this;}}function he(){throw TypeError("Abstract");}function de(){}function pe(){}function fe(){}j.prototype.toString=function(){return "[Iterator]";},j.KEYS=0,j.VALUES=1,j.ENTRIES=2,j.prototype.inspect=j.prototype.toSource=function(){return this.toString();},j.prototype[D]=function(){return this;},t(V,r),V.of=function(){return V(arguments);},V.prototype.toSeq=function(){return this;},V.prototype.toString=function(){return this.__toString("Seq {","}");},V.prototype.cacheResult=function(){return !this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this;},V.prototype.__iterate=function(e,t){return te(this,e,t,!0);},V.prototype.__iterator=function(e,t){return re(this,e,t,!0);},t(H,V),H.prototype.toKeyedSeq=function(){return this;},t(G,V),G.of=function(){return G(arguments);},G.prototype.toIndexedSeq=function(){return this;},G.prototype.toString=function(){return this.__toString("Seq [","]");},G.prototype.__iterate=function(e,t){return te(this,e,t,!1);},G.prototype.__iterator=function(e,t){return re(this,e,t,!1);},t(z,V),z.of=function(){return z(arguments);},z.prototype.toSetSeq=function(){return this;},V.isSeq=J,V.Keyed=H,V.Set=z,V.Indexed=G,V.prototype["@@__IMMUTABLE_SEQ__@@"]=!0,t(Q,G),Q.prototype.get=function(e,t){return this.has(e)?this._array[T(this,e)]:t;},Q.prototype.__iterate=function(e,t){for(var r=this._array,n=r.length-1,i=0;i<=n;i++){if(!1===e(r[t?n-i:i],i,this))return i+1;}return i;},Q.prototype.__iterator=function(e,t){var r=this._array,n=r.length-1,i=0;return new j(function(){return i>n?{value:void 0,done:!0}:k(e,i,r[t?n-i++:i++]);});},t(X,H),X.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t;},X.prototype.has=function(e){return this._object.hasOwnProperty(e);},X.prototype.__iterate=function(e,t){for(var r=this._object,n=this._keys,i=n.length-1,a=0;a<=i;a++){var s=n[t?i-a:a];if(!1===e(r[s],s,this))return a+1;}return a;},X.prototype.__iterator=function(e,t){var r=this._object,n=this._keys,i=n.length-1,a=0;return new j(function(){var s=n[t?i-a:a];return a++>i?{value:void 0,done:!0}:k(e,s,r[s]);});},X.prototype[f]=!0,t($,G),$.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=B(this._iterable),n=0;if(F(r))for(var i;!(i=r.next()).done&&!1!==e(i.value,n++,this);){}return n;},$.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=B(this._iterable);if(!F(r))return new j(L);var n=0;return new j(function(){var t=r.next();return t.done?t:k(e,n++,t.value);});},t(Y,G),Y.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var r,n=this._iterator,i=this._iteratorCache,a=0;a<i.length;){if(!1===e(i[a],a++,this))return a;}for(;!(r=n.next()).done;){var s=r.value;if(i[a]=s,!1===e(s,a++,this))break;}return a;},Y.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterator,n=this._iteratorCache,i=0;return new j(function(){if(i>=n.length){var t=r.next();if(t.done)return t;n[i]=t.value;}return k(e,i,n[i++]);});},t(ue,G),ue.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]";},ue.prototype.get=function(e,t){return this.has(e)?this._value:t;},ue.prototype.includes=function(e){return se(this._value,e);},ue.prototype.slice=function(e,t){var r=this.size;return x(e,t,r)?this:new ue(this._value,A(t,r)-O(e,r));},ue.prototype.reverse=function(){return this;},ue.prototype.indexOf=function(e){return se(this._value,e)?0:-1;},ue.prototype.lastIndexOf=function(e){return se(this._value,e)?this.size:-1;},ue.prototype.__iterate=function(e,t){for(var r=0;r<this.size;r++){if(!1===e(this._value,r,this))return r+1;}return r;},ue.prototype.__iterator=function(e,t){var r=this,n=0;return new j(function(){return n<r.size?k(e,n++,r._value):{value:void 0,done:!0};});},ue.prototype.equals=function(e){return e instanceof ue?se(this._value,e._value):oe(e);},t(le,G),le.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]";},le.prototype.get=function(e,t){return this.has(e)?this._start+T(this,e)*this._step:t;},le.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t);},le.prototype.slice=function(e,t){return x(e,t,this.size)?this:(e=O(e,this.size),(t=A(t,this.size))<=e?new le(0,0):new le(this.get(e,this._end),this.get(t,this._end),this._step));},le.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r;}return -1;},le.prototype.lastIndexOf=function(e){return this.indexOf(e);},le.prototype.__iterate=function(e,t){for(var r=this.size-1,n=this._step,i=t?this._start+r*n:this._start,a=0;a<=r;a++){if(!1===e(i,a,this))return a+1;i+=t?-n:n;}return a;},le.prototype.__iterator=function(e,t){var r=this.size-1,n=this._step,i=t?this._start+r*n:this._start,a=0;return new j(function(){var s=i;return i+=t?-n:n,a>r?{value:void 0,done:!0}:k(e,a++,s);});},le.prototype.equals=function(e){return e instanceof le?this._start===e._start&&this._end===e._end&&this._step===e._step:oe(this,e);},t(he,r),t(de,he),t(pe,he),t(fe,he),he.Keyed=de,he.Indexed=pe,he.Set=fe;var ge="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var r=65535&(e|=0),n=65535&(t|=0);return r*n+((e>>>16)*n+r*(t>>>16)<<16>>>0)|0;};function me(e){return e>>>1&1073741824|3221225471&e;}function ye(e){if(!1===e||null==e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null==e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){if(e!=e||e===1/0)return 0;var r=0|e;for(r!==e&&(r^=4294967295*e);e>4294967295;){r^=e/=4294967295;}return me(r);}if("string"===t)return e.length>xe?function(e){var t=Re[e];return void 0===t&&(t=be(e),Ae===Oe&&(Ae=0,Re={}),Ae++,Re[e]=t),t;}(e):be(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return function(e){var t;if(Se&&void 0!==(t=_e.get(e)))return t;if(void 0!==(t=e[Ee]))return t;if(!we){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Ee]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID;}}(e)))return t;}if(t=++Te,1073741824&Te&&(Te=0),Se)_e.set(e,t);else {if(void 0!==ve&&!1===ve(e))throw new Error("Non-extensible objects are not allowed as keys.");if(we)Object.defineProperty(e,Ee,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments);},e.propertyIsEnumerable[Ee]=t;else {if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Ee]=t;}}return t;}(e);if("function"==typeof e.toString)return be(e.toString());throw new Error("Value type "+t+" cannot be hashed.");}function be(e){for(var t=0,r=0;r<e.length;r++){t=31*t+e.charCodeAt(r)|0;}return me(t);}var _e,ve=Object.isExtensible,we=function(){try{return Object.defineProperty({},"@",{}),!0;}catch(e){return !1;}}(),Se="function"==typeof WeakMap;Se&&(_e=new WeakMap());var Te=0,Ee="__immutablehash__";"function"==typeof Symbol&&(Ee=Symbol(Ee));var xe=16,Oe=255,Ae=0,Re={};function Ie(e){ce(e!==1/0,"Cannot perform this action with an infinite size.");}function Ne(e){return null==e?Ge():Pe(e)&&!l(e)?e:Ge().withMutations(function(t){var r=n(e);Ie(r.size),r.forEach(function(e,r){return t.set(r,e);});});}function Pe(e){return !(!e||!e[De]);}t(Ne,de),Ne.of=function(){var t=e.call(arguments,0);return Ge().withMutations(function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1]);}});},Ne.prototype.toString=function(){return this.__toString("Map {","}");},Ne.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t;},Ne.prototype.set=function(e,t){return ze(this,e,t);},Ne.prototype.setIn=function(e,t){return this.updateIn(e,g,function(){return t;});},Ne.prototype.remove=function(e){return ze(this,e,g);},Ne.prototype.deleteIn=function(e){return this.updateIn(e,function(){return g;});},Ne.prototype.update=function(e,t,r){return 1===arguments.length?e(this):this.updateIn([e],t,r);},Ne.prototype.updateIn=function(e,t,r){r||(r=t,t=void 0);var n=function e(t,r,n,i){var a=t===g,s=r.next();if(s.done){var o=a?n:t,u=i(o);return u===o?t:u;}ce(a||t&&t.set,"invalid keyPath");var c=s.value,l=a?g:t.get(c,g),h=e(l,r,n,i);return h===l?t:h===g?t.remove(c):(a?Ge():t).set(c,h);}(this,Yt(e),t,r);return n===g?void 0:n;},Ne.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ge();},Ne.prototype.merge=function(){return Ye(this,void 0,arguments);},Ne.prototype.mergeWith=function(t){var r=e.call(arguments,1);return Ye(this,t,r);},Ne.prototype.mergeIn=function(t){var r=e.call(arguments,1);return this.updateIn(t,Ge(),function(e){return "function"==typeof e.merge?e.merge.apply(e,r):r[r.length-1];});},Ne.prototype.mergeDeep=function(){return Ye(this,Je,arguments);},Ne.prototype.mergeDeepWith=function(t){var r=e.call(arguments,1);return Ye(this,We(t),r);},Ne.prototype.mergeDeepIn=function(t){var r=e.call(arguments,1);return this.updateIn(t,Ge(),function(e){return "function"==typeof e.mergeDeep?e.mergeDeep.apply(e,r):r[r.length-1];});},Ne.prototype.sort=function(e){return wt(Ft(this,e));},Ne.prototype.sortBy=function(e,t){return wt(Ft(this,t,e));},Ne.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this;},Ne.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new v());},Ne.prototype.asImmutable=function(){return this.__ensureOwner();},Ne.prototype.wasAltered=function(){return this.__altered;},Ne.prototype.__iterator=function(e,t){return new qe(this,e,t);},Ne.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate(function(t){return n++,e(t[1],t[0],r);},t),n;},Ne.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?He(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this);},Ne.isMap=Pe;var Ce,De="@@__IMMUTABLE_MAP__@@",je=Ne.prototype;function ke(e,t){this.ownerID=e,this.entries=t;}function Le(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r;}function Me(e,t,r){this.ownerID=e,this.count=t,this.nodes=r;}function Fe(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r;}function Be(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r;}function qe(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&Ve(e._root);}function Ue(e,t){return k(e,t[0],t[1]);}function Ve(e,t){return {node:e,index:0,__prev:t};}function He(e,t,r,n){var i=Object.create(je);return i.size=e,i._root=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i;}function Ge(){return Ce||(Ce=He(0));}function ze(e,t,r){var n,i;if(e._root){var a=b(m),s=b(y);if(n=Qe(e._root,e.__ownerID,0,void 0,t,r,a,s),!s.value)return e;i=e.size+(a.value?r===g?-1:1:0);}else {if(r===g)return e;i=1,n=new ke(e.__ownerID,[[t,r]]);}return e.__ownerID?(e.size=i,e._root=n,e.__hash=void 0,e.__altered=!0,e):n?He(i,n):Ge();}function Qe(e,t,r,n,i,a,s,o){return e?e.update(t,r,n,i,a,s,o):a===g?e:(_(o),_(s),new Be(t,n,[i,a]));}function Xe(e){return e.constructor===Be||e.constructor===Fe;}function $e(e,t,r,n,i){if(e.keyHash===n)return new Fe(t,n,[e.entry,i]);var a,s=31&(0===r?e.keyHash:e.keyHash>>>r),o=31&(0===r?n:n>>>r);return new Le(t,1<<s|1<<o,s===o?[$e(e,t,r+5,n,i)]:(a=new Be(t,n,i),s<o?[e,a]:[a,e]));}function Ye(e,t,r){for(var i=[],a=0;a<r.length;a++){var o=r[a],u=n(o);s(o)||(u=u.map(function(e){return ne(e);})),i.push(u);}return Ke(e,t,i);}function Je(e,t,r){return e&&e.mergeDeep&&s(t)?e.mergeDeep(t):se(e,t)?e:t;}function We(e){return function(t,r,n){if(t&&t.mergeDeepWith&&s(r))return t.mergeDeepWith(e,r);var i=e(t,r,n);return se(t,i)?t:i;};}function Ke(e,t,r){return 0===(r=r.filter(function(e){return 0!==e.size;})).length?e:0!==e.size||e.__ownerID||1!==r.length?e.withMutations(function(e){for(var n=t?function(r,n){e.update(n,g,function(e){return e===g?r:t(e,r,n);});}:function(t,r){e.set(r,t);},i=0;i<r.length;i++){r[i].forEach(n);}}):e.constructor(r[0]);}function Ze(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16);}function et(e,t,r,n){var i=n?e:w(e);return i[t]=r,i;}je[De]=!0,je.delete=je.remove,je.removeIn=je.deleteIn,ke.prototype.get=function(e,t,r,n){for(var i=this.entries,a=0,s=i.length;a<s;a++){if(se(r,i[a][0]))return i[a][1];}return n;},ke.prototype.update=function(e,t,r,n,i,a,s){for(var o=i===g,u=this.entries,c=0,l=u.length;c<l&&!se(n,u[c][0]);c++){}var h=c<l;if(h?u[c][1]===i:o)return this;if(_(s),(o||!h)&&_(a),!o||1!==u.length){if(!h&&!o&&u.length>=tt)return function(e,t,r,n){e||(e=new v());for(var i=new Be(e,ye(r),[r,n]),a=0;a<t.length;a++){var s=t[a];i=i.update(e,0,void 0,s[0],s[1]);}return i;}(e,u,n,i);var d=e&&e===this.ownerID,p=d?u:w(u);return h?o?c===l-1?p.pop():p[c]=p.pop():p[c]=[n,i]:p.push([n,i]),d?(this.entries=p,this):new ke(e,p);}},Le.prototype.get=function(e,t,r,n){void 0===t&&(t=ye(r));var i=1<<(31&(0===e?t:t>>>e)),a=this.bitmap;return 0==(a&i)?n:this.nodes[Ze(a&i-1)].get(e+5,t,r,n);},Le.prototype.update=function(e,t,r,n,i,a,s){void 0===r&&(r=ye(n));var o=31&(0===t?r:r>>>t),u=1<<o,c=this.bitmap,l=0!=(c&u);if(!l&&i===g)return this;var h=Ze(c&u-1),d=this.nodes,p=l?d[h]:void 0,f=Qe(p,e,t+5,r,n,i,a,s);if(f===p)return this;if(!l&&f&&d.length>=rt)return function(e,t,r,n,i){for(var a=0,s=new Array(32),o=0;0!==r;o++,r>>>=1){s[o]=1&r?t[a++]:void 0;}return s[n]=i,new Me(e,a+1,s);}(e,d,c,o,f);if(l&&!f&&2===d.length&&Xe(d[1^h]))return d[1^h];if(l&&f&&1===d.length&&Xe(f))return f;var m=e&&e===this.ownerID,y=l?f?c:c^u:c|u,b=l?f?et(d,h,f,m):function(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var i=new Array(n),a=0,s=0;s<n;s++){s===t&&(a=1),i[s]=e[s+a];}return i;}(d,h,m):function(e,t,r,n){var i=e.length+1;if(n&&t+1===i)return e[t]=r,e;for(var a=new Array(i),s=0,o=0;o<i;o++){o===t?(a[o]=r,s=-1):a[o]=e[o+s];}return a;}(d,h,f,m);return m?(this.bitmap=y,this.nodes=b,this):new Le(e,y,b);},Me.prototype.get=function(e,t,r,n){void 0===t&&(t=ye(r));var i=31&(0===e?t:t>>>e),a=this.nodes[i];return a?a.get(e+5,t,r,n):n;},Me.prototype.update=function(e,t,r,n,i,a,s){void 0===r&&(r=ye(n));var o=31&(0===t?r:r>>>t),u=i===g,c=this.nodes,l=c[o];if(u&&!l)return this;var h=Qe(l,e,t+5,r,n,i,a,s);if(h===l)return this;var d=this.count;if(l){if(!h&&--d<nt)return function(e,t,r,n){for(var i=0,a=0,s=new Array(r),o=0,u=1,c=t.length;o<c;o++,u<<=1){var l=t[o];void 0!==l&&o!==n&&(i|=u,s[a++]=l);}return new Le(e,i,s);}(e,c,d,o);}else d++;var p=e&&e===this.ownerID,f=et(c,o,h,p);return p?(this.count=d,this.nodes=f,this):new Me(e,d,f);},Fe.prototype.get=function(e,t,r,n){for(var i=this.entries,a=0,s=i.length;a<s;a++){if(se(r,i[a][0]))return i[a][1];}return n;},Fe.prototype.update=function(e,t,r,n,i,a,s){void 0===r&&(r=ye(n));var o=i===g;if(r!==this.keyHash)return o?this:(_(s),_(a),$e(this,e,t,r,[n,i]));for(var u=this.entries,c=0,l=u.length;c<l&&!se(n,u[c][0]);c++){}var h=c<l;if(h?u[c][1]===i:o)return this;if(_(s),(o||!h)&&_(a),o&&2===l)return new Be(e,this.keyHash,u[1^c]);var d=e&&e===this.ownerID,p=d?u:w(u);return h?o?c===l-1?p.pop():p[c]=p.pop():p[c]=[n,i]:p.push([n,i]),d?(this.entries=p,this):new Fe(e,this.keyHash,p);},Be.prototype.get=function(e,t,r,n){return se(r,this.entry[0])?this.entry[1]:n;},Be.prototype.update=function(e,t,r,n,i,a,s){var o=i===g,u=se(n,this.entry[0]);return (u?i===this.entry[1]:o)?this:(_(s),o?void _(a):u?e&&e===this.ownerID?(this.entry[1]=i,this):new Be(e,this.keyHash,[n,i]):(_(a),$e(this,e,t,ye(n),[n,i])));},ke.prototype.iterate=Fe.prototype.iterate=function(e,t){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++){if(!1===e(r[t?i-n:n]))return !1;}},Le.prototype.iterate=Me.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var a=r[t?i-n:n];if(a&&!1===a.iterate(e,t))return !1;}},Be.prototype.iterate=function(e,t){return e(this.entry);},t(qe,j),qe.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var r,n=t.node,i=t.index++;if(n.entry){if(0===i)return Ue(e,n.entry);}else if(n.entries){if(i<=(r=n.entries.length-1))return Ue(e,n.entries[this._reverse?r-i:i]);}else if(i<=(r=n.nodes.length-1)){var a=n.nodes[this._reverse?r-i:i];if(a){if(a.entry)return Ue(e,a.entry);t=this._stack=Ve(a,t);}continue;}t=this._stack=this._stack.__prev;}return {value:void 0,done:!0};};var tt=8,rt=16,nt=8;function it(e){var t=ft();if(null==e)return t;if(at(e))return e;var r=i(e),n=r.size;return 0===n?t:(Ie(n),n>0&&n<32?pt(0,n,5,null,new ut(r.toArray())):t.withMutations(function(e){e.setSize(n),r.forEach(function(t,r){return e.set(r,t);});}));}function at(e){return !(!e||!e[st]);}t(it,pe),it.of=function(){return this(arguments);},it.prototype.toString=function(){return this.__toString("List [","]");},it.prototype.get=function(e,t){if((e=T(this,e))>=0&&e<this.size){var r=yt(this,e+=this._origin);return r&&r.array[31&e];}return t;},it.prototype.set=function(e,t){return function(e,t,r){if((t=T(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?bt(e,t).set(0,r):bt(e,0,t+1).set(t,r);});t+=e._origin;var n=e._tail,i=e._root,a=b(y);return t>=vt(e._capacity)?n=gt(n,e.__ownerID,0,t,r,a):i=gt(i,e.__ownerID,e._level,t,r,a),a.value?e.__ownerID?(e._root=i,e._tail=n,e.__hash=void 0,e.__altered=!0,e):pt(e._origin,e._capacity,e._level,i,n):e;}(this,e,t);},it.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this;},it.prototype.insert=function(e,t){return this.splice(e,0,t);},it.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):ft();},it.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(r){bt(r,0,t+e.length);for(var n=0;n<e.length;n++){r.set(t+n,e[n]);}});},it.prototype.pop=function(){return bt(this,0,-1);},it.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){bt(t,-e.length);for(var r=0;r<e.length;r++){t.set(r,e[r]);}});},it.prototype.shift=function(){return bt(this,1);},it.prototype.merge=function(){return _t(this,void 0,arguments);},it.prototype.mergeWith=function(t){var r=e.call(arguments,1);return _t(this,t,r);},it.prototype.mergeDeep=function(){return _t(this,Je,arguments);},it.prototype.mergeDeepWith=function(t){var r=e.call(arguments,1);return _t(this,We(t),r);},it.prototype.setSize=function(e){return bt(this,0,e);},it.prototype.slice=function(e,t){var r=this.size;return x(e,t,r)?this:bt(this,O(e,r),A(t,r));},it.prototype.__iterator=function(e,t){var r=0,n=dt(this,t);return new j(function(){var t=n();return t===ht?{value:void 0,done:!0}:k(e,r++,t);});},it.prototype.__iterate=function(e,t){for(var r,n=0,i=dt(this,t);(r=i())!==ht&&!1!==e(r,n++,this);){}return n;},it.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?pt(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this);},it.isList=at;var st="@@__IMMUTABLE_LIST__@@",ot=it.prototype;function ut(e,t){this.array=e,this.ownerID=t;}ot[st]=!0,ot.delete=ot.remove,ot.setIn=je.setIn,ot.deleteIn=ot.removeIn=je.removeIn,ot.update=je.update,ot.updateIn=je.updateIn,ot.mergeIn=je.mergeIn,ot.mergeDeepIn=je.mergeDeepIn,ot.withMutations=je.withMutations,ot.asMutable=je.asMutable,ot.asImmutable=je.asImmutable,ot.wasAltered=je.wasAltered,ut.prototype.removeBefore=function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var n=r>>>t&31;if(n>=this.array.length)return new ut([],e);var i,a=0===n;if(t>0){var s=this.array[n];if((i=s&&s.removeBefore(e,t-5,r))===s&&a)return this;}if(a&&!i)return this;var o=mt(this,e);if(!a)for(var u=0;u<n;u++){o.array[u]=void 0;}return i&&(o.array[n]=i),o;},ut.prototype.removeAfter=function(e,t,r){if(r===(t?1<<t:0)||0===this.array.length)return this;var n,i=r-1>>>t&31;if(i>=this.array.length)return this;if(t>0){var a=this.array[i];if((n=a&&a.removeAfter(e,t-5,r))===a&&i===this.array.length-1)return this;}var s=mt(this,e);return s.array.splice(i+1),n&&(s.array[i]=n),s;};var ct,lt,ht={};function dt(e,t){var r=e._origin,n=e._capacity,i=vt(n),a=e._tail;return s(e._root,e._level,0);function s(e,o,u){return 0===o?function(e,s){var o=s===i?a&&a.array:e&&e.array,u=s>r?0:r-s,c=n-s;return c>32&&(c=32),function(){if(u===c)return ht;var e=t?--c:u++;return o&&o[e];};}(e,u):function(e,i,a){var o,u=e&&e.array,c=a>r?0:r-a>>i,l=1+(n-a>>i);return l>32&&(l=32),function(){for(;;){if(o){var e=o();if(e!==ht)return e;o=null;}if(c===l)return ht;var r=t?--l:c++;o=s(u&&u[r],i-5,a+(r<<i));}};}(e,o,u);}}function pt(e,t,r,n,i,a,s){var o=Object.create(ot);return o.size=t-e,o._origin=e,o._capacity=t,o._level=r,o._root=n,o._tail=i,o.__ownerID=a,o.__hash=s,o.__altered=!1,o;}function ft(){return ct||(ct=pt(0,0,5));}function gt(e,t,r,n,i,a){var s,o=n>>>r&31,u=e&&o<e.array.length;if(!u&&void 0===i)return e;if(r>0){var c=e&&e.array[o],l=gt(c,t,r-5,n,i,a);return l===c?e:((s=mt(e,t)).array[o]=l,s);}return u&&e.array[o]===i?e:(_(a),s=mt(e,t),void 0===i&&o===s.array.length-1?s.array.pop():s.array[o]=i,s);}function mt(e,t){return t&&e&&t===e.ownerID?e:new ut(e?e.array.slice():[],t);}function yt(e,t){if(t>=vt(e._capacity))return e._tail;if(t<1<<e._level+5){for(var r=e._root,n=e._level;r&&n>0;){r=r.array[t>>>n&31],n-=5;}return r;}}function bt(e,t,r){void 0!==t&&(t|=0),void 0!==r&&(r|=0);var n=e.__ownerID||new v(),i=e._origin,a=e._capacity,s=i+t,o=void 0===r?a:r<0?a+r:i+r;if(s===i&&o===a)return e;if(s>=o)return e.clear();for(var u=e._level,c=e._root,l=0;s+l<0;){c=new ut(c&&c.array.length?[void 0,c]:[],n),l+=1<<(u+=5);}l&&(s+=l,i+=l,o+=l,a+=l);for(var h=vt(a),d=vt(o);d>=1<<u+5;){c=new ut(c&&c.array.length?[c]:[],n),u+=5;}var p=e._tail,f=d<h?yt(e,o-1):d>h?new ut([],n):p;if(p&&d>h&&s<a&&p.array.length){for(var g=c=mt(c,n),m=u;m>5;m-=5){var y=h>>>m&31;g=g.array[y]=mt(g.array[y],n);}g.array[h>>>5&31]=p;}if(o<a&&(f=f&&f.removeAfter(n,0,o)),s>=d)s-=d,o-=d,u=5,c=null,f=f&&f.removeBefore(n,0,s);else if(s>i||d<h){for(l=0;c;){var b=s>>>u&31;if(b!==d>>>u&31)break;b&&(l+=(1<<u)*b),u-=5,c=c.array[b];}c&&s>i&&(c=c.removeBefore(n,u,s-l)),c&&d<h&&(c=c.removeAfter(n,u,d-l)),l&&(s-=l,o-=l);}return e.__ownerID?(e.size=o-s,e._origin=s,e._capacity=o,e._level=u,e._root=c,e._tail=f,e.__hash=void 0,e.__altered=!0,e):pt(s,o,u,c,f);}function _t(e,t,r){for(var n=[],a=0,o=0;o<r.length;o++){var u=r[o],c=i(u);c.size>a&&(a=c.size),s(u)||(c=c.map(function(e){return ne(e);})),n.push(c);}return a>e.size&&(e=e.setSize(a)),Ke(e,t,n);}function vt(e){return e<32?0:e-1>>>5<<5;}function wt(e){return null==e?Et():St(e)?e:Et().withMutations(function(t){var r=n(e);Ie(r.size),r.forEach(function(e,r){return t.set(r,e);});});}function St(e){return Pe(e)&&l(e);}function Tt(e,t,r,n){var i=Object.create(wt.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=r,i.__hash=n,i;}function Et(){return lt||(lt=Tt(Ge(),ft()));}function xt(e,t,r){var n,i,a=e._map,s=e._list,o=a.get(t),u=void 0!==o;if(r===g){if(!u)return e;s.size>=32&&s.size>=2*a.size?(n=(i=s.filter(function(e,t){return void 0!==e&&o!==t;})).toKeyedSeq().map(function(e){return e[0];}).flip().toMap(),e.__ownerID&&(n.__ownerID=i.__ownerID=e.__ownerID)):(n=a.remove(t),i=o===s.size-1?s.pop():s.set(o,void 0));}else if(u){if(r===s.get(o)[1])return e;n=a,i=s.set(o,[t,r]);}else n=a.set(t,s.size),i=s.set(s.size,[t,r]);return e.__ownerID?(e.size=n.size,e._map=n,e._list=i,e.__hash=void 0,e):Tt(n,i);}function Ot(e,t){this._iter=e,this._useKeys=t,this.size=e.size;}function At(e){this._iter=e,this.size=e.size;}function Rt(e){this._iter=e,this.size=e.size;}function It(e){this._iter=e,this.size=e.size;}function Nt(e){var t=Qt(e);return t._iter=e,t.size=e.size,t.flip=function(){return e;},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse();},t;},t.has=function(t){return e.includes(t);},t.includes=function(t){return e.has(t);},t.cacheResult=Xt,t.__iterateUncached=function(t,r){var n=this;return e.__iterate(function(e,r){return !1!==t(r,e,n);},r);},t.__iteratorUncached=function(t,r){if(2===t){var n=e.__iterator(t,r);return new j(function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t;}return e;});}return e.__iterator(1===t?0:1,r);},t;}function Pt(e,t,r){var n=Qt(e);return n.size=e.size,n.has=function(t){return e.has(t);},n.get=function(n,i){var a=e.get(n,g);return a===g?i:t.call(r,a,n,e);},n.__iterateUncached=function(n,i){var a=this;return e.__iterate(function(e,i,s){return !1!==n(t.call(r,e,i,s),i,a);},i);},n.__iteratorUncached=function(n,i){var a=e.__iterator(2,i);return new j(function(){var i=a.next();if(i.done)return i;var s=i.value,o=s[0];return k(n,o,t.call(r,s[1],o,e),i);});},n;}function Ct(e,t){var r=Qt(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e;},e.flip&&(r.flip=function(){var t=Nt(e);return t.reverse=function(){return e.flip();},t;}),r.get=function(r,n){return e.get(t?r:-1-r,n);},r.has=function(r){return e.has(t?r:-1-r);},r.includes=function(t){return e.includes(t);},r.cacheResult=Xt,r.__iterate=function(t,r){var n=this;return e.__iterate(function(e,r){return t(e,r,n);},!r);},r.__iterator=function(t,r){return e.__iterator(t,!r);},r;}function Dt(e,t,r,n){var i=Qt(e);return n&&(i.has=function(n){var i=e.get(n,g);return i!==g&&!!t.call(r,i,n,e);},i.get=function(n,i){var a=e.get(n,g);return a!==g&&t.call(r,a,n,e)?a:i;}),i.__iterateUncached=function(i,a){var s=this,o=0;return e.__iterate(function(e,a,u){if(t.call(r,e,a,u))return o++,i(e,n?a:o-1,s);},a),o;},i.__iteratorUncached=function(i,a){var s=e.__iterator(2,a),o=0;return new j(function(){for(;;){var a=s.next();if(a.done)return a;var u=a.value,c=u[0],l=u[1];if(t.call(r,l,c,e))return k(i,n?c:o++,l,a);}});},i;}function jt(e,t,r,n){var i=e.size;if(void 0!==t&&(t|=0),void 0!==r&&(r===1/0?r=i:r|=0),x(t,r,i))return e;var a=O(t,i),s=A(r,i);if(a!=a||s!=s)return jt(e.toSeq().cacheResult(),t,r,n);var o,u=s-a;u==u&&(o=u<0?0:u);var c=Qt(e);return c.size=0===o?o:e.size&&o||void 0,!n&&J(e)&&o>=0&&(c.get=function(t,r){return (t=T(this,t))>=0&&t<o?e.get(t+a,r):r;}),c.__iterateUncached=function(t,r){var i=this;if(0===o)return 0;if(r)return this.cacheResult().__iterate(t,r);var s=0,u=!0,c=0;return e.__iterate(function(e,r){if(!u||!(u=s++<a))return c++,!1!==t(e,n?r:c-1,i)&&c!==o;}),c;},c.__iteratorUncached=function(t,r){if(0!==o&&r)return this.cacheResult().__iterator(t,r);var i=0!==o&&e.__iterator(t,r),s=0,u=0;return new j(function(){for(;s++<a;){i.next();}if(++u>o)return {value:void 0,done:!0};var e=i.next();return n||1===t?e:k(t,u-1,0===t?void 0:e.value[1],e);});},c;}function kt(e,t,r,n){var i=Qt(e);return i.__iterateUncached=function(i,a){var s=this;if(a)return this.cacheResult().__iterate(i,a);var o=!0,u=0;return e.__iterate(function(e,a,c){if(!o||!(o=t.call(r,e,a,c)))return u++,i(e,n?a:u-1,s);}),u;},i.__iteratorUncached=function(i,a){var s=this;if(a)return this.cacheResult().__iterator(i,a);var o=e.__iterator(2,a),u=!0,c=0;return new j(function(){var e,a,l;do{if((e=o.next()).done)return n||1===i?e:k(i,c++,0===i?void 0:e.value[1],e);var h=e.value;a=h[0],l=h[1],u&&(u=t.call(r,l,a,s));}while(u);return 2===i?e:k(i,a,l,e);});},i;}function Lt(e,t){var r=o(e),i=[e].concat(t).map(function(e){return s(e)?r&&(e=n(e)):e=r?K(e):Z(Array.isArray(e)?e:[e]),e;}).filter(function(e){return 0!==e.size;});if(0===i.length)return e;if(1===i.length){var a=i[0];if(a===e||r&&o(a)||u(e)&&u(a))return a;}var c=new Q(i);return r?c=c.toKeyedSeq():u(e)||(c=c.toSetSeq()),(c=c.flatten(!0)).size=i.reduce(function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r;}},0),c;}function Mt(e,t,r){var n=Qt(e);return n.__iterateUncached=function(n,i){var a=0,o=!1;return function e(u,c){var l=this;u.__iterate(function(i,u){return (!t||c<t)&&s(i)?e(i,c+1):!1===n(i,r?u:a++,l)&&(o=!0),!o;},i);}(e,0),a;},n.__iteratorUncached=function(n,i){var a=e.__iterator(n,i),o=[],u=0;return new j(function(){for(;a;){var e=a.next();if(!1===e.done){var c=e.value;if(2===n&&(c=c[1]),t&&!(o.length<t)||!s(c))return r?e:k(n,u++,c,e);o.push(a),a=c.__iterator(n,i);}else a=o.pop();}return {value:void 0,done:!0};});},n;}function Ft(e,t,r){t||(t=$t);var n=o(e),i=0,a=e.toSeq().map(function(t,n){return [n,t,i++,r?r(t,n,e):t];}).toArray();return a.sort(function(e,r){return t(e[3],r[3])||e[2]-r[2];}).forEach(n?function(e,t){a[t].length=2;}:function(e,t){a[t]=e[1];}),n?H(a):u(e)?G(a):z(a);}function Bt(e,t,r){if(t||(t=$t),r){var n=e.toSeq().map(function(t,n){return [t,r(t,n,e)];}).reduce(function(e,r){return qt(t,e[1],r[1])?r:e;});return n&&n[0];}return e.reduce(function(e,r){return qt(t,e,r)?r:e;});}function qt(e,t,r){var n=e(r,t);return 0===n&&r!==t&&(null==r||r!=r)||n>0;}function Ut(e,t,n){var i=Qt(e);return i.size=new Q(n).map(function(e){return e.size;}).min(),i.__iterate=function(e,t){for(var r,n=this.__iterator(1,t),i=0;!(r=n.next()).done&&!1!==e(r.value,i++,this);){}return i;},i.__iteratorUncached=function(e,i){var a=n.map(function(e){return e=r(e),B(i?e.reverse():e);}),s=0,o=!1;return new j(function(){var r;return o||(r=a.map(function(e){return e.next();}),o=r.some(function(e){return e.done;})),o?{value:void 0,done:!0}:k(e,s++,t.apply(null,r.map(function(e){return e.value;})));});},i;}function Vt(e,t){return J(e)?t:e.constructor(t);}function Ht(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e);}function Gt(e){return Ie(e.size),S(e);}function zt(e){return o(e)?n:u(e)?i:a;}function Qt(e){return Object.create((o(e)?H:u(e)?G:z).prototype);}function Xt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):V.prototype.cacheResult.call(this);}function $t(e,t){return e>t?1:e<t?-1:0;}function Yt(e){var t=B(e);if(!t){if(!U(e))throw new TypeError("Expected iterable or array-like: "+e);t=B(r(e));}return t;}function Jt(e,t){var r,n=function n(a){if(a instanceof n)return a;if(!(this instanceof n))return new n(a);if(!r){r=!0;var s=Object.keys(e);!function(e,t){try{t.forEach(er.bind(void 0,e));}catch(e){}}(i,s),i.size=s.length,i._name=t,i._keys=s,i._defaultValues=e;}this._map=Ne(a);},i=n.prototype=Object.create(Wt);return i.constructor=n,n;}t(wt,Ne),wt.of=function(){return this(arguments);},wt.prototype.toString=function(){return this.__toString("OrderedMap {","}");},wt.prototype.get=function(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t;},wt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Et();},wt.prototype.set=function(e,t){return xt(this,e,t);},wt.prototype.remove=function(e){return xt(this,e,g);},wt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered();},wt.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],r);},t);},wt.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t);},wt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?Tt(t,r,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=r,this);},wt.isOrderedMap=St,wt.prototype[f]=!0,wt.prototype.delete=wt.prototype.remove,t(Ot,H),Ot.prototype.get=function(e,t){return this._iter.get(e,t);},Ot.prototype.has=function(e){return this._iter.has(e);},Ot.prototype.valueSeq=function(){return this._iter.valueSeq();},Ot.prototype.reverse=function(){var e=this,t=Ct(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse();}),t;},Ot.prototype.map=function(e,t){var r=this,n=Pt(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t);}),n;},Ot.prototype.__iterate=function(e,t){var r,n=this;return this._iter.__iterate(this._useKeys?function(t,r){return e(t,r,n);}:(r=t?Gt(this):0,function(i){return e(i,t?--r:r++,n);}),t);},Ot.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var r=this._iter.__iterator(1,t),n=t?Gt(this):0;return new j(function(){var i=r.next();return i.done?i:k(e,t?--n:n++,i.value,i);});},Ot.prototype[f]=!0,t(At,G),At.prototype.includes=function(e){return this._iter.includes(e);},At.prototype.__iterate=function(e,t){var r=this,n=0;return this._iter.__iterate(function(t){return e(t,n++,r);},t);},At.prototype.__iterator=function(e,t){var r=this._iter.__iterator(1,t),n=0;return new j(function(){var t=r.next();return t.done?t:k(e,n++,t.value,t);});},t(Rt,z),Rt.prototype.has=function(e){return this._iter.includes(e);},Rt.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){return e(t,t,r);},t);},Rt.prototype.__iterator=function(e,t){var r=this._iter.__iterator(1,t);return new j(function(){var t=r.next();return t.done?t:k(e,t.value,t.value,t);});},t(It,H),It.prototype.entrySeq=function(){return this._iter.toSeq();},It.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){if(t){Ht(t);var n=s(t);return e(n?t.get(1):t[1],n?t.get(0):t[0],r);}},t);},It.prototype.__iterator=function(e,t){var r=this._iter.__iterator(1,t);return new j(function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n){Ht(n);var i=s(n);return k(e,i?n.get(0):n[0],i?n.get(1):n[1],t);}}});},At.prototype.cacheResult=Ot.prototype.cacheResult=Rt.prototype.cacheResult=It.prototype.cacheResult=Xt,t(Jt,de),Jt.prototype.toString=function(){return this.__toString(Zt(this)+" {","}");},Jt.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e);},Jt.prototype.get=function(e,t){if(!this.has(e))return t;var r=this._defaultValues[e];return this._map?this._map.get(e,r):r;},Jt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=Kt(this,Ge()));},Jt.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+Zt(this));if(this._map&&!this._map.has(e)&&t===this._defaultValues[e])return this;var r=this._map&&this._map.set(e,t);return this.__ownerID||r===this._map?this:Kt(this,r);},Jt.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:Kt(this,t);},Jt.prototype.wasAltered=function(){return this._map.wasAltered();},Jt.prototype.__iterator=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t);}).__iterator(e,t);},Jt.prototype.__iterate=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t);}).__iterate(e,t);},Jt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?Kt(this,t,e):(this.__ownerID=e,this._map=t,this);};var Wt=Jt.prototype;function Kt(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._map=t,n.__ownerID=r,n;}function Zt(e){return e._name||e.constructor.name||"Record";}function er(e,t){Object.defineProperty(e,t,{get:function get(){return this.get(t);},set:function set(e){ce(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e);}});}function tr(e){return null==e?ur():rr(e)&&!l(e)?e:ur().withMutations(function(t){var r=a(e);Ie(r.size),r.forEach(function(e){return t.add(e);});});}function rr(e){return !(!e||!e[ir]);}Wt.delete=Wt.remove,Wt.deleteIn=Wt.removeIn=je.removeIn,Wt.merge=je.merge,Wt.mergeWith=je.mergeWith,Wt.mergeIn=je.mergeIn,Wt.mergeDeep=je.mergeDeep,Wt.mergeDeepWith=je.mergeDeepWith,Wt.mergeDeepIn=je.mergeDeepIn,Wt.setIn=je.setIn,Wt.update=je.update,Wt.updateIn=je.updateIn,Wt.withMutations=je.withMutations,Wt.asMutable=je.asMutable,Wt.asImmutable=je.asImmutable,t(tr,fe),tr.of=function(){return this(arguments);},tr.fromKeys=function(e){return this(n(e).keySeq());},tr.prototype.toString=function(){return this.__toString("Set {","}");},tr.prototype.has=function(e){return this._map.has(e);},tr.prototype.add=function(e){return sr(this,this._map.set(e,!0));},tr.prototype.remove=function(e){return sr(this,this._map.remove(e));},tr.prototype.clear=function(){return sr(this,this._map.clear());},tr.prototype.union=function(){var t=e.call(arguments,0);return 0===(t=t.filter(function(e){return 0!==e.size;})).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var r=0;r<t.length;r++){a(t[r]).forEach(function(t){return e.add(t);});}}):this.constructor(t[0]);},tr.prototype.intersect=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map(function(e){return a(e);});var r=this;return this.withMutations(function(e){r.forEach(function(r){t.every(function(e){return e.includes(r);})||e.remove(r);});});},tr.prototype.subtract=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map(function(e){return a(e);});var r=this;return this.withMutations(function(e){r.forEach(function(r){t.some(function(e){return e.includes(r);})&&e.remove(r);});});},tr.prototype.merge=function(){return this.union.apply(this,arguments);},tr.prototype.mergeWith=function(t){var r=e.call(arguments,1);return this.union.apply(this,r);},tr.prototype.sort=function(e){return cr(Ft(this,e));},tr.prototype.sortBy=function(e,t){return cr(Ft(this,t,e));},tr.prototype.wasAltered=function(){return this._map.wasAltered();},tr.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate(function(t,n){return e(n,n,r);},t);},tr.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t;}).__iterator(e,t);},tr.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this);},tr.isSet=rr;var nr,ir="@@__IMMUTABLE_SET__@@",ar=tr.prototype;function sr(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t);}function or(e,t){var r=Object.create(ar);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r;}function ur(){return nr||(nr=or(Ge()));}function cr(e){return null==e?fr():lr(e)?e:fr().withMutations(function(t){var r=a(e);Ie(r.size),r.forEach(function(e){return t.add(e);});});}function lr(e){return rr(e)&&l(e);}ar[ir]=!0,ar.delete=ar.remove,ar.mergeDeep=ar.merge,ar.mergeDeepWith=ar.mergeWith,ar.withMutations=je.withMutations,ar.asMutable=je.asMutable,ar.asImmutable=je.asImmutable,ar.__empty=ur,ar.__make=or,t(cr,tr),cr.of=function(){return this(arguments);},cr.fromKeys=function(e){return this(n(e).keySeq());},cr.prototype.toString=function(){return this.__toString("OrderedSet {","}");},cr.isOrderedSet=lr;var hr,dr=cr.prototype;function pr(e,t){var r=Object.create(dr);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r;}function fr(){return hr||(hr=pr(Et()));}function gr(e){return null==e?wr():mr(e)?e:wr().unshiftAll(e);}function mr(e){return !(!e||!e[br]);}dr[f]=!0,dr.__empty=fr,dr.__make=pr,t(gr,pe),gr.of=function(){return this(arguments);},gr.prototype.toString=function(){return this.__toString("Stack [","]");},gr.prototype.get=function(e,t){var r=this._head;for(e=T(this,e);r&&e--;){r=r.next;}return r?r.value:t;},gr.prototype.peek=function(){return this._head&&this._head.value;},gr.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,r=arguments.length-1;r>=0;r--){t={value:arguments[r],next:t};}return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):vr(e,t);},gr.prototype.pushAll=function(e){if(0===(e=i(e)).size)return this;Ie(e.size);var t=this.size,r=this._head;return e.reverse().forEach(function(e){t++,r={value:e,next:r};}),this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):vr(t,r);},gr.prototype.pop=function(){return this.slice(1);},gr.prototype.unshift=function(){return this.push.apply(this,arguments);},gr.prototype.unshiftAll=function(e){return this.pushAll(e);},gr.prototype.shift=function(){return this.pop.apply(this,arguments);},gr.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):wr();},gr.prototype.slice=function(e,t){if(x(e,t,this.size))return this;var r=O(e,this.size);if(A(t,this.size)!==this.size)return pe.prototype.slice.call(this,e,t);for(var n=this.size-r,i=this._head;r--;){i=i.next;}return this.__ownerID?(this.size=n,this._head=i,this.__hash=void 0,this.__altered=!0,this):vr(n,i);},gr.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?vr(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this);},gr.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var r=0,n=this._head;n&&!1!==e(n.value,r++,this);){n=n.next;}return r;},gr.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var r=0,n=this._head;return new j(function(){if(n){var t=n.value;return n=n.next,k(e,r++,t);}return {value:void 0,done:!0};});},gr.isStack=mr;var yr,br="@@__IMMUTABLE_STACK__@@",_r=gr.prototype;function vr(e,t,r,n){var i=Object.create(_r);return i.size=e,i._head=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i;}function wr(){return yr||(yr=vr(0));}function Sr(e,t){var r=function r(_r10){e.prototype[_r10]=t[_r10];};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e;}_r[br]=!0,_r.withMutations=je.withMutations,_r.asMutable=je.asMutable,_r.asImmutable=je.asImmutable,_r.wasAltered=je.wasAltered,r.Iterator=j,Sr(r,{toArray:function toArray(){Ie(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,r){e[r]=t;}),e;},toIndexedSeq:function toIndexedSeq(){return new At(this);},toJS:function toJS(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e;}).__toJS();},toJSON:function toJSON(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e;}).__toJS();},toKeyedSeq:function toKeyedSeq(){return new Ot(this,!0);},toMap:function toMap(){return Ne(this.toKeyedSeq());},toObject:function toObject(){Ie(this.size);var e={};return this.__iterate(function(t,r){e[r]=t;}),e;},toOrderedMap:function toOrderedMap(){return wt(this.toKeyedSeq());},toOrderedSet:function toOrderedSet(){return cr(o(this)?this.valueSeq():this);},toSet:function toSet(){return tr(o(this)?this.valueSeq():this);},toSetSeq:function toSetSeq(){return new Rt(this);},toSeq:function toSeq(){return u(this)?this.toIndexedSeq():o(this)?this.toKeyedSeq():this.toSetSeq();},toStack:function toStack(){return gr(o(this)?this.valueSeq():this);},toList:function toList(){return it(o(this)?this.valueSeq():this);},toString:function toString(){return "[Iterable]";},__toString:function __toString(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t;},concat:function concat(){var t=e.call(arguments,0);return Vt(this,Lt(this,t));},includes:function includes(e){return this.some(function(t){return se(t,e);});},entries:function entries(){return this.__iterator(2);},every:function every(e,t){Ie(this.size);var r=!0;return this.__iterate(function(n,i,a){if(!e.call(t,n,i,a))return r=!1,!1;}),r;},filter:function filter(e,t){return Vt(this,Dt(this,e,t,!0));},find:function find(e,t,r){var n=this.findEntry(e,t);return n?n[1]:r;},forEach:function forEach(e,t){return Ie(this.size),this.__iterate(t?e.bind(t):e);},join:function join(e){Ie(this.size),e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate(function(n){r?r=!1:t+=e,t+=null!=n?n.toString():"";}),t;},keys:function keys(){return this.__iterator(0);},map:function map(e,t){return Vt(this,Pt(this,e,t));},reduce:function reduce(e,t,r){var n,i;return Ie(this.size),arguments.length<2?i=!0:n=t,this.__iterate(function(t,a,s){i?(i=!1,n=t):n=e.call(r,n,t,a,s);}),n;},reduceRight:function reduceRight(e,t,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments);},reverse:function reverse(){return Vt(this,Ct(this,!0));},slice:function slice(e,t){return Vt(this,jt(this,e,t,!0));},some:function some(e,t){return !this.every(Ar(e),t);},sort:function sort(e){return Vt(this,Ft(this,e));},values:function values(){return this.__iterator(1);},butLast:function butLast(){return this.slice(0,-1);},isEmpty:function isEmpty(){return void 0!==this.size?0===this.size:!this.some(function(){return !0;});},count:function count(e,t){return S(e?this.toSeq().filter(e,t):this);},countBy:function countBy(e,t){return function(e,t,r){var n=Ne().asMutable();return e.__iterate(function(i,a){n.update(t.call(r,i,a,e),0,function(e){return e+1;});}),n.asImmutable();}(this,e,t);},equals:function equals(e){return oe(this,e);},entrySeq:function entrySeq(){var e=this;if(e._cache)return new Q(e._cache);var t=e.toSeq().map(Or).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq();},t;},filterNot:function filterNot(e,t){return this.filter(Ar(e),t);},findEntry:function findEntry(e,t,r){var n=r;return this.__iterate(function(r,i,a){if(e.call(t,r,i,a))return n=[i,r],!1;}),n;},findKey:function findKey(e,t){var r=this.findEntry(e,t);return r&&r[0];},findLast:function findLast(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r);},findLastEntry:function findLastEntry(e,t,r){return this.toKeyedSeq().reverse().findEntry(e,t,r);},findLastKey:function findLastKey(e,t){return this.toKeyedSeq().reverse().findKey(e,t);},first:function first(){return this.find(E);},flatMap:function flatMap(e,t){return Vt(this,function(e,t,r){var n=zt(e);return e.toSeq().map(function(i,a){return n(t.call(r,i,a,e));}).flatten(!0);}(this,e,t));},flatten:function flatten(e){return Vt(this,Mt(this,e,!0));},fromEntrySeq:function fromEntrySeq(){return new It(this);},get:function get(e,t){return this.find(function(t,r){return se(r,e);},void 0,t);},getIn:function getIn(e,t){for(var r,n=this,i=Yt(e);!(r=i.next()).done;){var a=r.value;if((n=n&&n.get?n.get(a,g):g)===g)return t;}return n;},groupBy:function groupBy(e,t){return function(e,t,r){var n=o(e),i=(l(e)?wt():Ne()).asMutable();e.__iterate(function(a,s){i.update(t.call(r,a,s,e),function(e){return (e=e||[]).push(n?[s,a]:a),e;});});var a=zt(e);return i.map(function(t){return Vt(e,a(t));});}(this,e,t);},has:function has(e){return this.get(e,g)!==g;},hasIn:function hasIn(e){return this.getIn(e,g)!==g;},isSubset:function isSubset(e){return e="function"==typeof e.includes?e:r(e),this.every(function(t){return e.includes(t);});},isSuperset:function isSuperset(e){return (e="function"==typeof e.isSubset?e:r(e)).isSubset(this);},keyOf:function keyOf(e){return this.findKey(function(t){return se(t,e);});},keySeq:function keySeq(){return this.toSeq().map(xr).toIndexedSeq();},last:function last(){return this.toSeq().reverse().first();},lastKeyOf:function lastKeyOf(e){return this.toKeyedSeq().reverse().keyOf(e);},max:function max(e){return Bt(this,e);},maxBy:function maxBy(e,t){return Bt(this,t,e);},min:function min(e){return Bt(this,e?Rr(e):Pr);},minBy:function minBy(e,t){return Bt(this,t?Rr(t):Pr,e);},rest:function rest(){return this.slice(1);},skip:function skip(e){return this.slice(Math.max(0,e));},skipLast:function skipLast(e){return Vt(this,this.toSeq().reverse().skip(e).reverse());},skipWhile:function skipWhile(e,t){return Vt(this,kt(this,e,t,!0));},skipUntil:function skipUntil(e,t){return this.skipWhile(Ar(e),t);},sortBy:function sortBy(e,t){return Vt(this,Ft(this,t,e));},take:function take(e){return this.slice(0,Math.max(0,e));},takeLast:function takeLast(e){return Vt(this,this.toSeq().reverse().take(e).reverse());},takeWhile:function takeWhile(e,t){return Vt(this,function(e,t,r){var n=Qt(e);return n.__iterateUncached=function(n,i){var a=this;if(i)return this.cacheResult().__iterate(n,i);var s=0;return e.__iterate(function(e,i,o){return t.call(r,e,i,o)&&++s&&n(e,i,a);}),s;},n.__iteratorUncached=function(n,i){var a=this;if(i)return this.cacheResult().__iterator(n,i);var s=e.__iterator(2,i),o=!0;return new j(function(){if(!o)return {value:void 0,done:!0};var e=s.next();if(e.done)return e;var i=e.value,u=i[0],c=i[1];return t.call(r,c,u,a)?2===n?e:k(n,u,c,e):(o=!1,{value:void 0,done:!0});});},n;}(this,e,t));},takeUntil:function takeUntil(e,t){return this.takeWhile(Ar(e),t);},valueSeq:function valueSeq(){return this.toIndexedSeq();},hashCode:function hashCode(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=l(e),r=o(e),n=t?1:0;return function(e,t){return t=ge(t,3432918353),t=ge(t<<15|t>>>-15,461845907),t=ge(t<<13|t>>>-13,5),t=ge((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=me((t=ge(t^t>>>13,3266489909))^t>>>16);}(e.__iterate(r?t?function(e,t){n=31*n+Cr(ye(e),ye(t))|0;}:function(e,t){n=n+Cr(ye(e),ye(t))|0;}:t?function(e){n=31*n+ye(e)|0;}:function(e){n=n+ye(e)|0;}),n);}(this));}});var Tr=r.prototype;Tr[h]=!0,Tr[D]=Tr.values,Tr.__toJS=Tr.toArray,Tr.__toStringMapper=Ir,Tr.inspect=Tr.toSource=function(){return this.toString();},Tr.chain=Tr.flatMap,Tr.contains=Tr.includes,Sr(n,{flip:function flip(){return Vt(this,Nt(this));},mapEntries:function mapEntries(e,t){var r=this,n=0;return Vt(this,this.toSeq().map(function(i,a){return e.call(t,[a,i],n++,r);}).fromEntrySeq());},mapKeys:function mapKeys(e,t){var r=this;return Vt(this,this.toSeq().flip().map(function(n,i){return e.call(t,n,i,r);}).flip());}});var Er=n.prototype;function xr(e,t){return t;}function Or(e,t){return [t,e];}function Ar(e){return function(){return !e.apply(this,arguments);};}function Rr(e){return function(){return -e.apply(this,arguments);};}function Ir(e){return "string"==typeof e?JSON.stringify(e):String(e);}function Nr(){return w(arguments);}function Pr(e,t){return e<t?1:e>t?-1:0;}function Cr(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0;}return Er[d]=!0,Er[D]=Tr.entries,Er.__toJS=Tr.toObject,Er.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+Ir(e);},Sr(i,{toKeyedSeq:function toKeyedSeq(){return new Ot(this,!1);},filter:function filter(e,t){return Vt(this,Dt(this,e,t,!1));},findIndex:function findIndex(e,t){var r=this.findEntry(e,t);return r?r[0]:-1;},indexOf:function indexOf(e){var t=this.keyOf(e);return void 0===t?-1:t;},lastIndexOf:function lastIndexOf(e){var t=this.lastKeyOf(e);return void 0===t?-1:t;},reverse:function reverse(){return Vt(this,Ct(this,!1));},slice:function slice(e,t){return Vt(this,jt(this,e,t,!1));},splice:function splice(e,t){var r=arguments.length;if(t=Math.max(0|t,0),0===r||2===r&&!t)return this;e=O(e,e<0?this.count():this.size);var n=this.slice(0,e);return Vt(this,1===r?n:n.concat(w(arguments,2),this.slice(e+t)));},findLastIndex:function findLastIndex(e,t){var r=this.findLastEntry(e,t);return r?r[0]:-1;},first:function first(){return this.get(0);},flatten:function flatten(e){return Vt(this,Mt(this,e,!1));},get:function get(e,t){return (e=T(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,r){return r===e;},void 0,t);},has:function has(e){return (e=T(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e));},interpose:function interpose(e){return Vt(this,function(e,t){var r=Qt(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var i=this,a=0;return e.__iterate(function(e,n){return (!a||!1!==r(t,a++,i))&&!1!==r(e,a++,i);},n),a;},r.__iteratorUncached=function(r,n){var i,a=e.__iterator(1,n),s=0;return new j(function(){return (!i||s%2)&&(i=a.next()).done?i:s%2?k(r,s++,t):k(r,s++,i.value,i);});},r;}(this,e));},interleave:function interleave(){var e=[this].concat(w(arguments)),t=Ut(this.toSeq(),G.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),Vt(this,r);},keySeq:function keySeq(){return le(0,this.size);},last:function last(){return this.get(-1);},skipWhile:function skipWhile(e,t){return Vt(this,kt(this,e,t,!1));},zip:function zip(){var e=[this].concat(w(arguments));return Vt(this,Ut(this,Nr,e));},zipWith:function zipWith(e){var t=w(arguments);return t[0]=this,Vt(this,Ut(this,e,t));}}),i.prototype[p]=!0,i.prototype[f]=!0,Sr(a,{get:function get(e,t){return this.has(e)?e:t;},includes:function includes(e){return this.has(e);},keySeq:function keySeq(){return this.valueSeq();}}),a.prototype.has=Tr.includes,a.prototype.contains=a.prototype.includes,Sr(H,n.prototype),Sr(G,i.prototype),Sr(z,a.prototype),Sr(de,n.prototype),Sr(pe,i.prototype),Sr(fe,a.prototype),{Iterable:r,Seq:V,Collection:he,Map:Ne,OrderedMap:wt,List:it,Stack:gr,Set:tr,OrderedSet:cr,Record:Jt,Range:le,Repeat:ue,is:se,fromJS:ne};}();},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionType=void 0,function(e){e.Aggregate="aggregate",e.Existence="existence",e.Named="named",e.Operator="operator",e.SpecialOperator="specialOperator",e.Term="term",e.Variable="variable";}(t.ExpressionType||(t.ExpressionType={}));},function(e,t,r){var n=r(54),i=Object.keys||function(e){var t=[];for(var r in e){t.push(r);}return t;};e.exports=h;var a=Object.create(r(43));a.inherits=r(12);var s=r(115),o=r(73);a.inherits(h,s);for(var u=i(o.prototype),c=0;c<u.length;c++){var l=u[c];h.prototype[l]||(h.prototype[l]=o.prototype[l]);}function h(e){if(!(this instanceof h))return new h(e);s.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d);}function d(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this);}function p(e){e.end();}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark;}}),Object.defineProperty(h.prototype,"destroyed",{get:function get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed;},set:function set(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e);}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e);};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(270),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;var n=r(9),i=r(5),a=r(170),s=r(84);class o{constructor(e){this.parsingContext=e.parsingContext,this.dataFactory=e.dataFactory||new i.DataFactory(),this.rdfFirst=this.dataFactory.namedNode(o.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(o.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(o.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(o.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(o.RDF+"JSON");}static getContextValue(e,t,r,n){var i=e.getContextRaw()[r];if(!i)return n;var a=i[t];return void 0===a?n:a;}static getContextValueContainer(e,t){return o.getContextValue(e,"@container",t,{"@set":!0});}static getContextValueType(e,t){var r=o.getContextValue(e,"@type",t,null);return "@none"===r?null:r;}static getContextValueLanguage(e,t){return o.getContextValue(e,"@language",t,e.getContextRaw()["@language"]||null);}static getContextValueDirection(e,t){return o.getContextValue(e,"@direction",t,e.getContextRaw()["@direction"]||null);}static isContextValueReverse(e,t){return !!o.getContextValue(e,"@reverse",t,null);}static getContextValueIndex(e,t){return o.getContextValue(e,"@index",t,e.getContextRaw()["@index"]||null);}static isPropertyReverse(e,t,r){return "@reverse"===r!==o.isContextValueReverse(e,t);}static isValidIri(e){return null!==e&&n.Util.isValidIri(e);}static isPrefixArray(e,t){if(e.length>t.length)return !1;for(var _r11=0;_r11<e.length;_r11++){if(e[_r11]!==t[_r11])return !1;}return !0;}validateValueIndexes(e){var _this2=this;return _asyncToGenerator(function*(){if(_this2.parsingContext.validateValueIndexes){var _t10={};for(var _r12 of e){if(_r12&&"object"==typeof _r12){var _e10=_r12["@id"],_i2=_r12["@index"];if(_e10&&_i2){var _r13=_t10[_e10];if(_r13&&_r13!==_i2)throw new n.ErrorCoded("Conflicting @index value for "+_e10,n.ERROR_CODES.CONFLICTING_INDEXES);_t10[_e10]=_i2;}}}}})();}valueToTerm(e,t,r,i,a){var _this3=this;return _asyncToGenerator(function*(){if("@json"===o.getContextValueType(e,t))return [_this3.dataFactory.literal(_this3.valueToJsonString(r),_this3.rdfJson)];var s=typeof r;switch(s){case"object":if(null==r)return [];if(Array.isArray(r))return "@list"in o.getContextValueContainer(e,t)?0===r.length?[_this3.rdfNil]:_this3.parsingContext.idStack[i+1]||[]:(yield _this3.validateValueIndexes(r),[]);if(e=yield _this3.getContextSelfOrPropertyScoped(e,t),"@context"in r&&(e=yield _this3.parsingContext.parseContext(r["@context"],(yield _this3.parsingContext.getContext(a,0)).getContextRaw())),"@value"in(r=yield _this3.unaliasKeywords(r,a,i,e))){var _s2,_o2,u,c,l;for(t in r){var _e11=r[t];switch(t){case"@value":_s2=_e11;break;case"@language":_o2=_e11;break;case"@direction":u=_e11;break;case"@type":c=_e11;break;case"@index":l=_e11;break;default:throw new n.ErrorCoded("Unknown value entry '"+t+"' in @value: "+JSON.stringify(r),n.ERROR_CODES.INVALID_VALUE_OBJECT);}}if("@json"===(yield _this3.unaliasKeyword(c,a,i,!0,e)))return [_this3.dataFactory.literal(_this3.valueToJsonString(_s2),_this3.rdfJson)];if(null===_s2)return [];if("object"==typeof _s2)throw new n.ErrorCoded("The value of an '@value' can not be an object, got '"+JSON.stringify(_s2)+"'",n.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(_this3.parsingContext.validateValueIndexes&&l&&"string"!=typeof l)throw new n.ErrorCoded("The value of an '@index' must be a string, got '"+JSON.stringify(l)+"'",n.ERROR_CODES.INVALID_INDEX_VALUE);if(_o2){if("string"!=typeof _s2)throw new n.ErrorCoded("When an '@language' is set, the value of '@value' must be a string, got '"+JSON.stringify(_s2)+"'",n.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!n.ContextParser.validateLanguage(_o2,_this3.parsingContext.strictValues,n.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return [];(_this3.parsingContext.normalizeLanguageTags||1===_this3.parsingContext.activeProcessingMode)&&(_o2=_o2.toLowerCase());}if(u){if("string"!=typeof _s2)throw new Error("When an '@direction' is set, the value of '@value' must be a string, got '"+JSON.stringify(_s2)+"'");if(!n.ContextParser.validateDirection(u,_this3.parsingContext.strictValues))return [];}if(_o2&&u&&_this3.parsingContext.rdfDirection){if(c)throw new n.ErrorCoded("Can not have '@language', '@direction' and '@type' in a value: '"+JSON.stringify(r)+"'",n.ERROR_CODES.INVALID_VALUE_OBJECT);return _this3.nullableTermToArray(_this3.createLanguageDirectionLiteral(i,_s2,_o2,u));}if(_o2){if(c)throw new n.ErrorCoded("Can not have both '@language' and '@type' in a value: '"+JSON.stringify(r)+"'",n.ERROR_CODES.INVALID_VALUE_OBJECT);return [_this3.dataFactory.literal(_s2,_o2)];}if(u&&_this3.parsingContext.rdfDirection){if(c)throw new n.ErrorCoded("Can not have both '@direction' and '@type' in a value: '"+JSON.stringify(r)+"'",n.ERROR_CODES.INVALID_VALUE_OBJECT);return _this3.nullableTermToArray(_this3.createLanguageDirectionLiteral(i,_s2,_o2,u));}if(c){if("string"!=typeof c)throw new n.ErrorCoded("The value of an '@type' must be a string, got '"+JSON.stringify(c)+"'",n.ERROR_CODES.INVALID_TYPED_VALUE);var _t11=_this3.createVocabOrBaseTerm(e,c);if(!_t11)throw new n.ErrorCoded("Invalid '@type' value, got '"+JSON.stringify(c)+"'",n.ERROR_CODES.INVALID_TYPED_VALUE);if("NamedNode"!==_t11.termType)throw new n.ErrorCoded("Illegal value type ("+_t11.termType+"): "+c,n.ERROR_CODES.INVALID_TYPED_VALUE);return [_this3.dataFactory.literal(_s2,_t11)];}return yield _this3.valueToTerm(new n.JsonLdContextNormalized({}),t,_s2,i,a);}if("@set"in r){if(Object.keys(r).length>1)throw new n.ErrorCoded("Found illegal neighbouring entries next to @set for key: '"+t+"'",n.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return [];}if("@list"in r){if(Object.keys(r).length>1)throw new n.ErrorCoded("Found illegal neighbouring entries next to @list for key: '"+t+"'",n.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);var _e12=r["@list"];return Array.isArray(_e12)?0===_e12.length?[_this3.rdfNil]:_this3.parsingContext.idStack[i+1]||[]:yield _this3.valueToTerm(yield _this3.parsingContext.getContext(a),t,_e12,i-1,a.slice(0,-1));}if("@reverse"in r)return [];if("@graph"in o.getContextValueContainer(yield _this3.parsingContext.getContext(a),t)){var _e13=_this3.parsingContext.graphContainerTermStack[i+1];return _e13?Object.values(_e13):[_this3.dataFactory.blankNode()];}return "@id"in r?(Object.keys(r).length>1&&(e=yield _this3.parsingContext.getContext(a,0)),"@context"in r&&(e=yield _this3.parsingContext.parseContext(r["@context"],e.getContextRaw())),"@vocab"===r["@type"]?_this3.nullableTermToArray(_this3.createVocabOrBaseTerm(e,r["@id"])):_this3.nullableTermToArray(_this3.resourceToTerm(e,r["@id"]))):_this3.parsingContext.emittedStack[i+1]||r&&"object"==typeof r&&0===Object.keys(r).length?_this3.parsingContext.idStack[i+1]||(_this3.parsingContext.idStack[i+1]=[_this3.dataFactory.blankNode()]):[];case"string":return _this3.nullableTermToArray(_this3.stringValueToTerm(i,yield _this3.getContextSelfOrPropertyScoped(e,t),t,r,null));case"boolean":return _this3.nullableTermToArray(_this3.stringValueToTerm(i,yield _this3.getContextSelfOrPropertyScoped(e,t),t,Boolean(r).toString(),_this3.dataFactory.namedNode(o.XSD_BOOLEAN)));case"number":return _this3.nullableTermToArray(_this3.stringValueToTerm(i,yield _this3.getContextSelfOrPropertyScoped(e,t),t,r,_this3.dataFactory.namedNode(r%1==0&&r<1e21?o.XSD_INTEGER:o.XSD_DOUBLE)));default:return _this3.parsingContext.emitError(new Error("Could not determine the RDF type of a "+s)),[];}})();}getContextSelfOrPropertyScoped(e,t){var _this4=this;return _asyncToGenerator(function*(){var r=e.getContextRaw()[t];return r&&"object"==typeof r&&"@context"in r&&(e=yield _this4.parsingContext.parseContext(r,e.getContextRaw(),!0)),e;})();}nullableTermToArray(e){return e?[e]:[];}predicateToTerm(e,t){var r=e.expandTerm(t,!0,this.parsingContext.getExpandOptions());return r?"_"===r[0]&&":"===r[1]?this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(r.substr(2)):null:o.isValidIri(r)?this.dataFactory.namedNode(r):r&&this.parsingContext.strictValues?(this.parsingContext.emitError(new n.ErrorCoded("Invalid predicate IRI: "+r,n.ERROR_CODES.INVALID_IRI_MAPPING)),null):null:null;}resourceToTerm(e,t){if(t.startsWith("_:"))return this.dataFactory.blankNode(t.substr(2));var r=e.expandTerm(t,!1,this.parsingContext.getExpandOptions());if(!o.isValidIri(r)){if(!r||!this.parsingContext.strictValues)return null;this.parsingContext.emitError(new Error("Invalid resource IRI: "+r));}return this.dataFactory.namedNode(r);}createVocabOrBaseTerm(e,t){if(t.startsWith("_:"))return this.dataFactory.blankNode(t.substr(2));var r=this.parsingContext.getExpandOptions();var n=e.expandTerm(t,!0,r);if(n===t&&(n=e.expandTerm(t,!1,r)),!o.isValidIri(n)){if(!n||!this.parsingContext.strictValues)return null;this.parsingContext.emitError(new Error("Invalid term IRI: "+n));}return this.dataFactory.namedNode(n);}intToString(e,t){if("number"==typeof e){if(Number.isFinite(e)){return !(e%1==0)||t&&t.value===o.XSD_DOUBLE?e.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):Number(e).toString();}return e>0?"INF":"-INF";}return e;}stringValueToTerm(e,t,r,n,i){var a=o.getContextValueType(t,r);if(a)if("@id"===a){if(!i)return this.resourceToTerm(t,this.intToString(n,i));}else if("@vocab"===a){if(!i)return this.createVocabOrBaseTerm(t,this.intToString(n,i));}else i=this.dataFactory.namedNode(a);if(!i){var _a2=o.getContextValueLanguage(t,r),_s3=o.getContextValueDirection(t,r);return _s3&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(e,this.intToString(n,i),_a2,_s3):this.dataFactory.literal(this.intToString(n,i),_a2);}return this.dataFactory.literal(this.intToString(n,i),i);}createLanguageDirectionLiteral(e,t,r,n){if("i18n-datatype"===this.parsingContext.rdfDirection)return r||(r=""),this.dataFactory.literal(t,this.dataFactory.namedNode("https://www.w3.org/ns/i18n#"+r+"_"+n));{var _i3=this.dataFactory.blankNode(),_a3=this.getDefaultGraph();return this.parsingContext.emitQuad(e,this.dataFactory.quad(_i3,this.dataFactory.namedNode(o.RDF+"value"),this.dataFactory.literal(t),_a3)),r&&this.parsingContext.emitQuad(e,this.dataFactory.quad(_i3,this.dataFactory.namedNode(o.RDF+"language"),this.dataFactory.literal(r),_a3)),this.parsingContext.emitQuad(e,this.dataFactory.quad(_i3,this.dataFactory.namedNode(o.RDF+"direction"),this.dataFactory.literal(n),_a3)),_i3;}}valueToJsonString(e){return s(e);}unaliasKeyword(e,t,r,i,a){var _this5=this;return _asyncToGenerator(function*(){if(Number.isInteger(e))return e;if(!i){var _e14=_this5.parsingContext.unaliasedKeywordCacheStack[r];if(_e14)return _e14;}if(!n.Util.isPotentialKeyword(e)){var _r14=(a=a||(yield _this5.parsingContext.getContext(t))).getContextRaw()[e];_r14&&"object"==typeof _r14&&(_r14=_r14["@id"]),n.Util.isValidKeyword(_r14)&&(e=_r14);}return i?e:_this5.parsingContext.unaliasedKeywordCacheStack[r]=e;})();}unaliasKeywordParent(e,t){var _this6=this;return _asyncToGenerator(function*(){return yield _this6.unaliasKeyword(t>0&&e[t-1],e,t-1);})();}unaliasKeywords(e,t,r,n){var _this7=this;return _asyncToGenerator(function*(){var i={};for(var _a4 in e){i[yield _this7.unaliasKeyword(_a4,t,r+1,!0,n)]=e[_a4];}return i;})();}isLiteral(e){for(var _t12=e;_t12>=0;_t12--){if(this.parsingContext.literalStack[_t12]||this.parsingContext.jsonLiteralStack[_t12])return !0;}return !1;}getDepthOffsetGraph(e,t){var _this8=this;return _asyncToGenerator(function*(){for(var _r15=e-1;_r15>0;_r15--){if("@graph"===(yield _this8.unaliasKeyword(t[_r15],t,_r15))){var _n3=(yield a.EntryHandlerContainer.getContainerHandler(_this8.parsingContext,t,_r15)).containers;return a.EntryHandlerContainer.isComplexGraphContainer(_n3)?-1:e-_r15-1;}}return -1;})();}validateReverseSubject(e){if("Literal"===e.termType)throw new n.ErrorCoded("Found illegal literal in subject position: "+e.value,n.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE);}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph();}getGraphContainerValue(e,t){var _this9=this;return _asyncToGenerator(function*(){var r=_this9.getDefaultGraph();var{containers:n,depth:i}=yield a.EntryHandlerContainer.getContainerHandler(_this9.parsingContext,e,t);if("@graph"in n){var _t13=a.EntryHandlerContainer.getContainerGraphIndex(n,i,e),_s4=_this9.parsingContext.graphContainerTermStack[i];if(r=_s4?_s4[_t13]:null,!r){var _a5=null;if("@id"in n){var _t14=yield _this9.getContainerKey(e[i],e,i);null!==_t14&&(_a5=yield _this9.resourceToTerm(yield _this9.parsingContext.getContext(e),_t14));}_a5||(_a5=_this9.dataFactory.blankNode()),_this9.parsingContext.graphContainerTermStack[i]||(_this9.parsingContext.graphContainerTermStack[i]={}),r=_this9.parsingContext.graphContainerTermStack[i][_t13]=_a5;}}return r;})();}getPropertiesDepth(e,t){var _this10=this;return _asyncToGenerator(function*(){var r=t;for(var _n4=t-1;_n4>0;_n4--){if("number"!=typeof e[_n4]){var _t15=yield _this10.unaliasKeyword(e[_n4],e,_n4);if("@reverse"===_t15)return _n4;if("@nest"!==_t15)return r;r=_n4;}}return r;})();}getContainerKey(e,t,r){var _this11=this;return _asyncToGenerator(function*(){var n=yield _this11.unaliasKeyword(e,t,r);return "@none"===n?null:n;})();}}t.Util=o,o.XSD="http://www.w3.org/2001/XMLSchema#",o.XSD_BOOLEAN=o.XSD+"boolean",o.XSD_INTEGER=o.XSD+"integer",o.XSD_DOUBLE=o.XSD+"double",o.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#";},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeyword=void 0;t.EntryHandlerKeyword=class{constructor(e){this.keyword=e;}isPropertyHandler(){return !1;}isStackProcessor(){return !0;}validate(e,t,r,n,i){return _asyncToGenerator(function*(){return !1;})();}test(e,t,r,n,i){var _this12=this;return _asyncToGenerator(function*(){return r===_this12.keyword;})();}};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(187),t);},function(e,t,r){var n=r(201).Parser,i=r(214),a=r(102).Wildcard,s=r(41);e.exports={Parser:function Parser(_temp4){var{prefixes:e,baseIRI:t,factory:r,sparqlStar:i}=_temp4===void 0?{}:_temp4;var a={};for(var o in e||{}){a[o]=e[o];}var u=new n();return u.parse=function(){return n.base=t||"",n.prefixes=Object.create(a),n.factory=r||s.DataFactory,n.sparqlStar=Boolean(i),n.prototype.parse.apply(u,arguments);},u._resetBlanks=n._resetBlanks,u;},Generator:i,Wildcard:a};},function(e,t,r){var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return "string"==typeof t?t:t(e,r,n);}(r,n,i))||this;}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i;}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i;}function a(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(e){return String(e);}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0]);}return "of ".concat(t," ").concat(String(e));}i("ERR_INVALID_OPT_VALUE",function(e,t){return 'The value "'+t+'" is invalid for option "'+e+'"';},TypeError),i("ERR_INVALID_ARG_TYPE",function(e,t,r){var n,i,o;if("string"==typeof t&&(i="not ",t.substr(0,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return (void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t;}(e," argument"))o="The ".concat(e," ").concat(n," ").concat(a(t,"type"));else {var u=function(e,t,r){return "number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r);}(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(u," ").concat(n," ").concat(a(t,"type"));}return o+=". Received type ".concat(typeof r);},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(e){return "The "+e+" method is not implemented";}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(e){return "Cannot call "+e+" after a stream was destroyed";}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(e){return "Unknown encoding: "+e;},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=n;},function(e,t,r){(function(t){var n=Object.keys||function(e){var t=[];for(var r in e){t.push(r);}return t;};e.exports=c;var i=r(104),a=r(108);r(12)(c,i);for(var s=n(a.prototype),o=0;o<s.length;o++){var u=s[o];c.prototype[u]||(c.prototype[u]=a.prototype[u]);}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)));}function l(){this._writableState.ended||t.nextTick(h,this);}function h(e){e.end();}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark;}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer();}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length;}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed;},set:function set(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e);}});}).call(this,r(8));},function(e,t,r){var n=r(207).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return !0;default:return !1;}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return "utf8";for(var t;;){switch(e){case"utf8":case"utf-8":return "utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return "utf16le";case"latin1":case"binary":return "latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0;}}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e;}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=l,this.end=h,t=3;break;default:return this.write=d,void(this.end=p);}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t);}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2;}function o(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�";}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length));}function u(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1);}return r;}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r);}return t;}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r));}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t;}function d(e){return e.toString(this.encoding);}function p(e){return e&&e.length?this.write(e):"";}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return "";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return "";r=this.lastNeed,this.lastNeed=0;}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||"";},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t;},a.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0;}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n);},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length;};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(119),t),i(r(229),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});t.Translator=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={};}static incorrectRdfDataType(e){throw new Error("Invalid RDF "+e.datatype.value+" value: '"+e.value+"'");}registerHandler(e,t,r){for(var _r16 of t){this.supportedRdfDatatypes.push(_r16),this.fromRdfHandlers[_r16.value]=e;}for(var _t16 of r){var _r17=this.toRdfHandlers[_t16];_r17||(this.toRdfHandlers[_t16]=_r17=[]),_r17.push(e);}}fromRdf(e,t){var r=this.fromRdfHandlers[e.datatype.value];return r?r.fromRdf(e,t):e.value;}toRdf(e,t){var r=this.toRdfHandlers[typeof e];if(r)for(var n of r){var _r18=n.toRdf(e,t);if(_r18)return _r18;}throw new Error("Invalid JavaScript value: '"+e+"'");}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes;}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers);}};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(246),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isComment=t.isText=t.isCDATA=t.isTag=void 0;var n=r(59);t.isTag=function(e){return n.isTag(e);},t.isCDATA=function(e){return "cdata"===e.type;},t.isText=function(e){return "text"===e.type;},t.isComment=function(e){return "comment"===e.type;},t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children");};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.DirectiveNodeHandlerAdapter=void 0;t.DirectiveNodeHandlerAdapter=class{constructor(e,t,r){this.targetKind=e,this.util=t,this.settings=r;}getDirectiveConditionalValue(e,t){var r=this.util.getArgument(e.arguments,"if");if(!r)throw new Error("The directive "+e.name.value+" is missing an if-argument.");var n=this.util.handleNodeValue(r.value,r.name.value,t);if(1!==n.terms.length)throw new Error("Can not apply the directive "+e.name.value+" with a list.");return n.terms[0];}isDirectiveScopeAll(e){var t=this.util.getArgument(e.arguments,"scope");return t&&"EnumValue"===t.value.kind&&"all"===t.value.value;}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.transformExistence=t.transformAggregate=t.transformNamed=t.transformLiteral=t.transformRDFTermUnsafe=t.transformAlgebra=void 0;var n=r(4),i=r(6),a=r(40),s=r(14),o=r(20),u=r(65),c=r(89),l=r(14);function h(e){if(!e)throw new o.InvalidExpression(e);var t=i.Algebra.expressionTypes;switch(e.expressionType){case t.TERM:return d(e);case t.OPERATOR:return function(e){if(s.SpecialOperators.contains(e.operator)){var _t17=e.operator,_r19=e.args.map(e=>h(e)),_n5=c.specialFunctions.get(_t17);if(!_n5.checkArity(_r19))throw new o.InvalidArity(_r19,_t17);return new a.SpecialOperator(_r19,_n5.applyAsync,_n5.applySync);}{if(!s.Operators.contains(e.operator))throw new o.UnknownOperator(e.operator);var _t18=e.operator,_r20=e.args.map(e=>h(e)),_n6=c.regularFunctions.get(_t18);if(!function(e,t){if(t===1/0)return !0;if(Array.isArray(t))return t.indexOf(e.length)>=0;return e.length===t;}(_r20,_n6.arity))throw new o.InvalidArity(_r20,_t18);return new a.Operator(_r20,_n6.apply);}}(e);case t.NAMED:return f(e);case t.EXISTENCE:return m(e);case t.AGGREGATE:return g(e);case t.WILDCARD:return function(e){if(!e.wildcard)throw new o.InvalidExpression(e);return new a.NamedNode(e.wildcard.value);}(e);default:throw new o.InvalidExpressionType(e);}}function d(e){if(!e.term)throw new o.InvalidExpression(e);switch(e.term.termType){case"Variable":return new a.Variable(n.termToString(e.term));case"Literal":return p(e.term);case"NamedNode":return new a.NamedNode(e.term.value);case"BlankNode":return new a.BlankNode(e.term.value);default:throw new o.InvalidTermType(e);}}function p(e){if(!e.datatype)return e.language?new a.LangStringLiteral(e.value,e.language):new a.StringLiteral(e.value);switch(e.datatype.value){case null:case void 0:case"":return e.language?new a.LangStringLiteral(e.value,e.language):new a.StringLiteral(e.value);case l.TypeURL.XSD_STRING:return new a.StringLiteral(e.value);case l.TypeURL.RDF_LANG_STRING:return new a.LangStringLiteral(e.value,e.language);case l.TypeURL.XSD_DATE_TIME:case l.TypeURL.XSD_DATE:{var _t19=new Date(e.value);return isNaN(_t19.getTime())?new a.NonLexicalLiteral(void 0,e.datatype,e.value):new a.DateTimeLiteral(new Date(e.value),e.value);}case l.TypeURL.XSD_BOOLEAN:return "true"!==e.value&&"false"!==e.value&&"1"!==e.value&&"0"!==e.value?new a.NonLexicalLiteral(void 0,e.datatype,e.value):new a.BooleanLiteral("true"===e.value||"1"===e.value,e.value);case l.TypeURL.XSD_INTEGER:case l.TypeURL.XSD_DECIMAL:case l.TypeURL.XSD_NEGATIVE_INTEGER:case l.TypeURL.XSD_NON_NEGATIVE_INTEGER:case l.TypeURL.XSD_NON_POSITIVE_INTEGER:case l.TypeURL.XSD_POSITIVE_INTEGER:case l.TypeURL.XSD_LONG:case l.TypeURL.XSD_SHORT:case l.TypeURL.XSD_BYTE:case l.TypeURL.XSD_UNSIGNED_LONG:case l.TypeURL.XSD_UNSIGNED_INT:case l.TypeURL.XSD_UNSIGNED_SHORT:case l.TypeURL.XSD_UNSIGNED_BYTE:case l.TypeURL.XSD_INT:{var _t20=u.parseXSDDecimal(e.value);return void 0===_t20?new a.NonLexicalLiteral(void 0,e.datatype,e.value):new a.NumericLiteral(_t20,e.datatype,e.value);}case l.TypeURL.XSD_FLOAT:case l.TypeURL.XSD_DOUBLE:{var _t21=u.parseXSDFloat(e.value);return void 0===_t21?new a.NonLexicalLiteral(void 0,e.datatype,e.value):new a.NumericLiteral(_t21,e.datatype,e.value);}default:return new a.Literal(e.value,e.datatype,e.value);}}function f(e){var t=e.name.value;if(!s.NamedOperators.contains(t))throw new o.UnknownNamedOperator(e.name.value);var r=e.name.value,n=e.args.map(e=>h(e)),i=c.namedFunctions.get(r);return new a.Named(e.name,n,i.apply);}function g(e){var t=e.aggregator;return new a.Aggregate(t,e);}function m(e){return new a.Existence(e);}t.transformAlgebra=h,t.transformRDFTermUnsafe=function(e){return d({term:e,type:"expression",expressionType:"term"});},t.transformLiteral=p,t.transformNamed=f,t.transformAggregate=g,t.transformExistence=m;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(24),t),i(r(526),t),i(r(527),t),i(r(528),t),i(r(529),t),i(r(530),t),i(r(531),t),i(r(532),t);},function(e,t,r){r.r(t),r.d(t,"Lexer",function(){return i.a;}),r.d(t,"Parser",function(){return k;}),r.d(t,"Writer",function(){return z;}),r.d(t,"Store",function(){return $;}),r.d(t,"StreamParser",function(){return J;}),r.d(t,"StreamWriter",function(){return W;}),r.d(t,"Util",function(){return n;}),r.d(t,"DataFactory",function(){return w;}),r.d(t,"Term",function(){return S;}),r.d(t,"NamedNode",function(){return T;}),r.d(t,"Literal",function(){return E;}),r.d(t,"BlankNode",function(){return x;}),r.d(t,"Variable",function(){return O;}),r.d(t,"DefaultGraph",function(){return A;}),r.d(t,"Quad",function(){return N;}),r.d(t,"Triple",function(){return N;}),r.d(t,"termFromId",function(){return R;}),r.d(t,"termToId",function(){return I;});var n={};r.r(n),r.d(n,"isNamedNode",function(){return s;}),r.d(n,"isBlankNode",function(){return o;}),r.d(n,"isLiteral",function(){return u;}),r.d(n,"isVariable",function(){return c;}),r.d(n,"isDefaultGraph",function(){return l;}),r.d(n,"inDefaultGraph",function(){return h;}),r.d(n,"prefix",function(){return d;}),r.d(n,"prefixes",function(){return p;});var i=r(67),a=r(7);function s(e){return !!e&&"NamedNode"===e.termType;}function o(e){return !!e&&"BlankNode"===e.termType;}function u(e){return !!e&&"Literal"===e.termType;}function c(e){return !!e&&"Variable"===e.termType;}function l(e){return !!e&&"DefaultGraph"===e.termType;}function h(e){return l(e.graph);}function d(e,t){return p({"":e},t)("");}function p(e,t){var r=Object.create(null);for(var n in e){i(n,e[n]);}function i(e,n){if("string"==typeof n){var i=Object.create(null);r[e]=function(e){return i[e]||(i[e]=t.namedNode(n+e));};}else if(!(e in r))throw new Error("Unknown prefix: "+e);return r[e];}return t=t||w,i;}var{rdf:f,xsd:g}=a.a;var m,y=0;var b=/^"(.*".*)(?="[^"]*$)/,_=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,v={namedNode:function namedNode(e){return new T(e);},blankNode:function blankNode(e){return new x(e||"n3-"+y++);},variable:function variable(e){return new O(e);},literal:function literal(e,t){if("string"==typeof t)return new E('"'+e+'"@'+t.toLowerCase());var r=t?t.value:"";""===r&&("boolean"==typeof e?r=g.boolean:"number"==typeof e&&(Number.isFinite(e)?r=Number.isInteger(e)?g.integer:g.double:(r=g.double,Number.isNaN(e)||(e=e>0?"INF":"-INF"))));return ""===r||r===g.string?new E('"'+e+'"'):new E('"'+e+'"^^'+r);},defaultGraph:function defaultGraph(){return m;},quad:D,triple:D};var w=v;class S{constructor(e){this.id=e;}get value(){return this.id;}equals(e){return e instanceof S?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value;}toJSON(){return {termType:this.termType,value:this.value};}}class T extends S{get termType(){return "NamedNode";}}class E extends S{get termType(){return "Literal";}get value(){return this.id.substring(1,this.id.lastIndexOf('"'));}get language(){var e=this.id,t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():"";}get datatype(){return new T(this.datatypeString);}get datatypeString(){var e,t=this.id,r=t.lastIndexOf('"')+1;return r<t.length&&"^"===(e=t[r])?t.substr(r+2):"@"!==e?g.string:f.langString;}equals(e){return e instanceof E?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value;}toJSON(){return {termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}};}}class x extends S{constructor(e){super("_:"+e);}get termType(){return "BlankNode";}get value(){return this.id.substr(2);}}class O extends S{constructor(e){super("?"+e);}get termType(){return "Variable";}get value(){return this.id.substr(1);}}class A extends S{constructor(){return super(""),m||this;}get termType(){return "DefaultGraph";}equals(e){return this===e||!!e&&this.termType===e.termType;}}function R(e,t){if(t=t||v,!e)return t.defaultGraph();switch(e[0]){case"?":return t.variable(e.substr(1));case"_":return t.blankNode(e.substr(2));case'"':if(t===v)return new E(e);if('"'===e[e.length-1])return t.literal(e.substr(1,e.length-2));var r=e.lastIndexOf('"',e.length-1);return t.literal(e.substr(1,r-1),"@"===e[r+1]?e.substr(r+2):t.namedNode(e.substr(r+3)));case"<":var _n7=_.exec(e);return t.quad(R(C(_n7[1]),t),R(C(_n7[2]),t),R(C(_n7[3]),t),_n7[4]&&R(C(_n7[4]),t));default:return t.namedNode(e);}}function I(e){if("string"==typeof e)return e;if(e instanceof S&&"Quad"!==e.termType)return e.id;if(!e)return m.id;switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return "_:"+e.value;case"Variable":return "?"+e.value;case"DefaultGraph":return "";case"Literal":return '"'+e.value+'"'+(e.language?"@"+e.language:e.datatype&&e.datatype.value!==g.string?"^^"+e.datatype.value:"");case"Quad":return "<<"+P(I(e.subject))+" "+P(I(e.predicate))+" "+P(I(e.object))+(l(e.graph)?"":" "+I(e.graph))+">>";default:throw new Error("Unexpected termType: "+e.termType);}}m=new A();class N extends S{constructor(e,t,r,n){super(""),this.subject=e,this.predicate=t,this.object=r,this.graph=n||m;}get termType(){return "Quad";}toJSON(){return {termType:this.termType,subject:this.subject.toJSON(),predicate:this.predicate.toJSON(),object:this.object.toJSON(),graph:this.graph.toJSON()};}equals(e){return !!e&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph);}}function P(e){return e.replace(b,(e,t)=>'"'+t.replace(/"/g,'""'));}function C(e){return e.replace(b,(e,t)=>'"'+t.replace(/""/g,'"'));}function D(e,t,r,n){return new N(e,t,r,n);}var j=0;class k{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&M(this,e.factory);var t="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(t),n=/trig/.test(t),a=/triple/.test(t),s=/quad/.test(t),o=this._n3Mode=/n3/.test(t),u=a||s;(this._supportsNamedGraphs=!(r||o))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||n||a||o),this._supportsRDFStar=""===t||/star|\*$/.test(t),u&&(this._resolveRelativeIRI=function(e){return null;}),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new i.a({lineMode:u,n3:o}),this._explicitQuantifiers=!!e.explicitQuantifiers;}static _resetBlankNodePrefix(){j=0;}_setBase(e){if(e){var t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1];}else this._base="",this._basePath="";}_saveContext(e,t,r,n,i){var a=this._n3Mode;this._contextStack.push({subject:r,predicate:n,object:i,graph:t,type:e,inverse:!!a&&this._inversePredicate,blankPrefix:a?this._prefixes._:"",quantified:a?this._quantified:null}),a&&(this._inversePredicate=!1,this._prefixes._=this._graph?this._graph.id.substr(2)+".":".",this._quantified=Object.create(this._quantified));}_restoreContext(){var e=this._contextStack.pop(),t=this._n3Mode;this._subject=e.subject,this._predicate=e.predicate,this._object=e.object,this._graph=e.graph,t&&(this._inversePredicate=e.inverse,this._prefixes._=e.blankPrefix,this._quantified=e.quantified);}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e);}}_readEntity(e,t){var r;switch(e.type){case"IRI":case"typeIRI":var n=this._resolveIRI(e.value);if(null===n)return this._error("Invalid IRI",e);r=this._namedNode(n);break;case"type":case"prefixed":var i=this._prefixes[e.prefix];if(void 0===i)return this._error('Undefined prefix "'+e.prefix+':"',e);r=this._namedNode(i+e.value);break;case"blank":r=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._variable(e.value.substr(1));break;default:return this._error("Expected entity but got "+e.type,e);}return !t&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r;}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph);}return this._readPredicateOrNamedGraph;}_readPredicate(e){var t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+t,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return;}return this._readObject;}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader());}return this._getContextEndReader();}_readPredicateOrNamedGraph(e){return "{"===e.type?this._readGraph(e):this._readPredicate(e);}_readGraph(e){return "{"!==e.type?this._error("Expected graph but got "+e.type,e):(this._graph=this._subject,this._subject=null,this._readSubject);}_readBlankNodeHead(e){return "]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e));}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);var t=null===this._predicate;return this._restoreContext(),null===this._object?t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader();}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e);}}_readListItem(e){var t=null,r=null,n=this._subject,i=this._contextStack,a=i[i.length-1],s=this._readListItem;switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),s=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext(),0!==i.length&&"list"===i[i.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(s=this._readPredicate,this._subject===this.RDF_NIL)return s;}else if(s=this._getContextEndReader(),this._object===this.RDF_NIL)return s;r=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,s=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),s=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(t=this._readEntity(e)))return;}if(null===r&&(this._subject=r=this._blankNode()),null===n?null===a.predicate?a.subject=r:a.object=r:this._emit(n,this.RDF_REST,r,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,r,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,t,this._graph);}return s;}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1);}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0);}_completeLiteral(e){var t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":var r=this._readEntity(e);if(void 0===r)return;t=this._literal(this._literalValue,r),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null;}return {token:e,literal:t};}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph;}_completeObjectLiteral(e,t){var r=this._completeLiteral(e);if(r)return this._object=r.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===r.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token));}_readFormulaTail(e){return "}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader());}_readPunctuation(e){var t,r=this._subject,n=this._graph,i=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(n=this._readEntity(e))){t=this._readQuadPunctuation;break;}return this._error('Expected punctuation to follow "'+this._object.id+'"',e);}if(null!==r){var a=this._predicate,s=this._object;i?this._emit(s,a,r,n):this._emit(r,a,s,n);}return t;}_readBlankNodePunctuation(e){var t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object.id+'"',e);}return this._emit(this._subject,this._predicate,this._object,this._graph),t;}_readQuadPunctuation(e){return "."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext;}_readPrefix(e){return "prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI);}_readPrefixIRI(e){if("IRI"!==e.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',e);var t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation;}_readBaseIRI(e){var t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e);}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e);}}_readNamedGraphBlankLabel(e){return "]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph);}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext;}_readQuantifierList(e){var t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error("Unexpected "+e.type,e);}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation;}_readQuantifierPunctuation(e){return ","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e));}_getPathReader(e){return this._afterPath=e,this._readPath;}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:var t=this._contextStack,r=t.length&&t[t.length-1];if(r&&"item"===r.type){var n=this._subject;this._restoreContext(),this._emit(this._subject,this.RDF_FIRST,n,this._graph);}return this._afterPath(e);}}_readForwardPath(e){var t,r,n=this._blankNode();if(void 0!==(r=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=n):(t=this._object,this._object=n),this._emit(t,r,n,this._graph),this._readPath;}_readBackwardPath(e){var t,r,n=this._blankNode();if(void 0!==(t=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=n):(r=this._object,this._object=n),this._emit(n,t,r,this._graph),this._readPath;}_readRDFStarTailOrGraph(e){return ">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error('Expected >> to follow "'+this._object.id+'"',e):this._readRDFStarTail(e);}_readRDFStarTail(e){if(">>"!==e.type)return this._error("Expected >> but got "+e.type,e);var t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext(),null===this._subject?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader());}_getContextEndReader(){var e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph;}}_emit(e,t,r,n){this._callback(null,this._quad(e,t,r,n||this.DEFAULTGRAPH));}_error(e,t){var r=new Error(e+" on line "+t.line+".");r.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=L;}_resolveIRI(e){return /^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e);}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return ("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return /^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e);}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;for(var t="",r=e.length,n=-1,i=-1,a=0,s="/";n<r;){switch(s){case":":if(i<0&&"/"===e[++n]&&"/"===e[++n])for(;(i=n+1)<r&&"/"!==e[i];){n=i;}break;case"?":case"#":n=r;break;case"/":if("."===e[n+1])switch(s=e[1+ ++n]){case"/":t+=e.substring(a,n-1),a=n+1;break;case void 0:case"?":case"#":return t+e.substring(a,n)+e.substr(n+1);case".":if(void 0===(s=e[1+ ++n])||"/"===s||"?"===s||"#"===s){if((a=(t+=e.substring(a,n-2)).lastIndexOf("/"))>=i&&(t=t.substr(0,a)),"/"!==s)return t+"/"+e.substr(n+1);a=n+1;}}}s=e[++n];}return t+e.substring(a);}parse(e,t,r){var n=this;if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):"b"+j++ +"_",this._prefixCallback=r||L,this._inversePredicate=!1,this._quantified=Object.create(null),!t){var i,a=[];if(this._callback=function(e,t){e?i=e:t&&a.push(t);},this._lexer.tokenize(e).every(function(e){return n._readCallback=n._readCallback(e);}),i)throw i;return a;}this._callback=t,this._lexer.tokenize(e,function(e,t){null!==e?(n._callback(e),n._callback=L):n._readCallback&&(n._readCallback=n._readCallback(t));});}}function L(){}function M(e,t){var r=t.namedNode;e._namedNode=r,e._blankNode=t.blankNode,e._literal=t.literal,e._variable=t.variable,e._quad=t.quad,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=r(a.a.rdf.first),e.RDF_REST=r(a.a.rdf.rest),e.RDF_NIL=r(a.a.rdf.nil),e.N3_FORALL=r(a.a.r.forAll),e.N3_FORSOME=r(a.a.r.forSome),e.ABBREVIATIONS={a:r(a.a.rdf.type),"=":r(a.a.owl.sameAs),">":r(a.a.log.implies)},e.QUANTIFIERS_GRAPH=r("urn:n3:quantifiers");}M(k.prototype,w);var F=w.defaultGraph(),{rdf:B,xsd:q}=a.a;var U=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,V=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,H={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class G extends S{equals(){return !1;}}class z{constructor(e,t){if(this._prefixRegex=/$0^/,e&&"function"!=typeof e.write&&(t=e,e=null),t=t||{},this._lists=t.lists,e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end;else {var r="";this._outputStream={write(e,t,n){r+=e,n&&n();},end:function end(e){e&&e(null,r);}},this._endStream=!0;}this._subject=null,/triple|quad/i.test(t.format)?this._writeQuad=this._writeQuadLine:(this._graph=F,this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes));}get _inDefaultGraph(){return F.equals(this._graph);}_write(e,t){this._outputStream.write(e,"utf8",t);}_writeQuad(e,t,r,n,i){try{n.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(F.equals(n)?"":this._encodeIriOrBlank(n)+" {\n")),this._graph=n,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(", "+this._encodeObject(r),i):this._write(";\n    "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(r),i):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)+" "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(r),i);}catch(e){i&&i(e);}}_writeQuadLine(e,t,r,n,i){delete this._prefixMatch,this._write(this.quadToString(e,t,r,n),i);}quadToString(e,t,r,n){return this._encodeSubject(e)+" "+this._encodeIriOrBlank(t)+" "+this._encodeObject(r)+(n&&n.value?" "+this._encodeIriOrBlank(n)+" .\n":" .\n");}quadsToString(e){return e.map(function(e){return this.quadToString(e.subject,e.predicate,e.object,e.graph);},this).join("");}_encodeSubject(e){return "Quad"===e.termType?this._encodeQuad(e):this._encodeIriOrBlank(e);}_encodeIriOrBlank(e){if("NamedNode"!==e.termType)return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:"_:"+e.value;var t=e.value;U.test(t)&&(t=t.replace(V,Q));var r=this._prefixRegex.exec(t);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:t:"<"+t+">";}_encodeLiteral(e){var t=e.value;return U.test(t)&&(t=t.replace(V,Q)),e.language?'"'+t+'"@'+e.language:e.datatype.value!==q.string?'"'+t+'"^^'+this._encodeIriOrBlank(e.datatype):'"'+t+'"';}_encodePredicate(e){return e.value===B.type?"a":this._encodeIriOrBlank(e);}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e);}}_encodeQuad(_ref){var{subject:e,predicate:t,object:r,graph:n}=_ref;return "<<"+this._encodeSubject(e)+" "+this._encodePredicate(t)+" "+this._encodeObject(r)+(l(n)?"":" "+this._encodeIriOrBlank(n))+">>";}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.");}addQuad(e,t,r,n,i){void 0===r?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):"function"==typeof n?this._writeQuad(e,t,r,F,n):this._writeQuad(e,t,r,n||F,i);}addQuads(e){for(var t=0;t<e.length;t++){this.addQuad(e[t]);}}addPrefix(e,t,r){var n={};n[e]=t,this.addPrefixes(n,r);}addPrefixes(e,t){var r=this._prefixIRIs,n=!1;for(var i in e){var a=e[i];"string"!=typeof a&&(a=a.value),n=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),r[a]=i+=":",this._write("@prefix "+i+" <"+a+">.\n");}if(n){var s="",o="";for(var u in r){s+=s?"|"+u:u,o+=(o?"|":"")+r[u];}s=s.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+o+")[^/]*$|^("+s+")([a-zA-Z][\\-_a-zA-Z0-9]*)$");}this._write(n?"\n":"",t);}blank(e,t){var r,n,i=e;switch(void 0===e?i=[]:e.termType?i=[{predicate:e,object:t}]:"length"in e||(i=[e]),n=i.length){case 0:return new G("[]");case 1:if(!((r=i[0]).object instanceof G))return new G("[ "+this._encodePredicate(r.predicate)+" "+this._encodeObject(r.object)+" ]");default:for(var a="[",s=0;s<n;s++){(r=i[s]).predicate.equals(e)?a+=", "+this._encodeObject(r.object):(a+=(s?";\n  ":"\n  ")+this._encodePredicate(r.predicate)+" "+this._encodeObject(r.object),e=r.predicate);}return new G(a+"\n]");}}list(e){for(var t=e&&e.length||0,r=new Array(t),n=0;n<t;n++){r[n]=this._encodeObject(e[n]);}return new G("("+r.join(" ")+")");}end(e){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;var t=e&&function(r,n){t=null,e(r,n);};if(this._endStream)try{return this._outputStream.end(t);}catch(e){}t&&t();}}function Q(e){var t=H[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t;}var X=r(42);class ${constructor(e,t){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,t||!e||e[0]||(t=e,e=null),t=t||{},this._factory=t.factory||w,e&&this.addQuads(e);}get size(){var e=this._size;if(null!==e)return e;e=0;var t,r,n=this._graphs;for(var i in n){for(var a in t=n[i].subjects){for(var s in r=t[a]){e+=Object.keys(r[s]).length;}}}return this._size=e;}_addToIndex(e,t,r,n){var i=e[t]||(e[t]={}),a=i[r]||(i[r]={}),s=(n in a);return s||(a[n]=null),!s;}_removeFromIndex(e,t,r,n){var i,a=e[t],s=a[r];for(i in delete s[n],s){return;}for(i in delete a[r],a){return;}delete e[t];}_findInIndex(e,t,r,n,i,a,s,o,u,c){var l,h,d,p=!t+!r+!n>1?Object.keys(this._ids):this._entities;for(var f in t&&((l=e,e={})[t]=l[t]),e){var g=p[f];if(h=e[f])for(var m in r&&((l=h,h={})[r]=l[r]),h){var y=p[m];if(d=h[m])for(var b=n?(n in d)?[n]:[]:Object.keys(d),_=0;_<b.length;_++){var v={subject:null,predicate:null,object:null};v[i]=R(g,this._factory),v[a]=R(y,this._factory),v[s]=R(p[b[_]],this._factory);var w=this._factory.quad(v.subject,v.predicate,v.object,R(o,this._factory));if(c)c.push(w);else if(u(w))return !0;}}}return c;}_loop(e,t){for(var r in e){t(r);}}_loopByKey0(e,t,r){var n,i;if(n=e[t])for(i in n){r(i);}}_loopByKey1(e,t,r){var n;for(n in e){e[n][t]&&r(n);}}_loopBy2Keys(e,t,r,n){var i,a,s;if((i=e[t])&&(a=i[r]))for(s in a){n(s);}}_countInIndex(e,t,r,n){var i,a,s,o=0;for(var u in t&&((i=e,e={})[t]=i[t]),e){if(a=e[u])for(var c in r&&((i=a,a={})[r]=i[r]),a){(s=a[c])&&(n?n in s&&o++:o+=Object.keys(s).length);}}return o;}_getGraphs(e){if(!Y(e))return this._graphs;var t={};return t[e]=this._graphs[e],t;}_uniqueEntities(e){var t=Object.create(null),r=this._entities;return function(n){n in t||(t[n]=!0,e(R(r[n])));};}addQuad(e,t,r,n){t||(n=e.graph,r=e.object,t=e.predicate,e=e.subject),e=I(e),t=I(t),r=I(r),n=I(n);var i=this._graphs[n];i||(i=this._graphs[n]={subjects:{},predicates:{},objects:{}},Object.freeze(i));var a=this._ids,s=this._entities;e=a[e]||(a[s[++this._id]=e]=this._id),t=a[t]||(a[s[++this._id]=t]=this._id),r=a[r]||(a[s[++this._id]=r]=this._id);var o=this._addToIndex(i.subjects,e,t,r);return this._addToIndex(i.predicates,t,r,e),this._addToIndex(i.objects,r,e,t),this._size=null,o;}addQuads(e){for(var t=0;t<e.length;t++){this.addQuad(e[t]);}}import(e){var t=this;return e.on("data",function(e){t.addQuad(e);}),e;}removeQuad(e,t,r,n){t||(n=e.graph,r=e.object,t=e.predicate,e=e.subject),e=I(e),t=I(t),r=I(r),n=I(n);var i,a,s,o=this._ids,u=this._graphs;if(!((e=o[e])&&(t=o[t])&&(r=o[r])&&(i=u[n])&&(a=i.subjects[e])&&(s=a[t])&&r in s))return !1;for(e in this._removeFromIndex(i.subjects,e,t,r),this._removeFromIndex(i.predicates,t,r,e),this._removeFromIndex(i.objects,r,e,t),null!==this._size&&this._size--,i.subjects){return !0;}return delete u[n],!0;}removeQuads(e){for(var t=0;t<e.length;t++){this.removeQuad(e[t]);}}remove(e){var t=this;return e.on("data",function(e){t.removeQuad(e);}),e;}removeMatches(e,t,r,n){return this.remove(this.match(e,t,r,n));}deleteGraph(e){return this.removeMatches(null,null,null,e);}getQuads(e,t,r,n){e=e&&I(e),t=t&&I(t),r=r&&I(r),n=n&&I(n);var i,a,s,o,u=[],c=this._getGraphs(n),l=this._ids;if(Y(e)&&!(a=l[e])||Y(t)&&!(s=l[t])||Y(r)&&!(o=l[r]))return u;for(var h in c){(i=c[h])&&(a?o?this._findInIndex(i.objects,o,a,s,"object","subject","predicate",h,null,u):this._findInIndex(i.subjects,a,s,null,"subject","predicate","object",h,null,u):s?this._findInIndex(i.predicates,s,o,null,"predicate","object","subject",h,null,u):o?this._findInIndex(i.objects,o,null,null,"object","subject","predicate",h,null,u):this._findInIndex(i.subjects,null,null,null,"subject","predicate","object",h,null,u));}return u;}match(e,t,r,n){var i=new X.Readable({objectMode:!0});return i._read=()=>{for(var a of this.getQuads(e,t,r,n)){i.push(a);}i.push(null);},i;}countQuads(e,t,r,n){e=e&&I(e),t=t&&I(t),r=r&&I(r),n=n&&I(n);var i,a,s,o,u=0,c=this._getGraphs(n),l=this._ids;if(Y(e)&&!(a=l[e])||Y(t)&&!(s=l[t])||Y(r)&&!(o=l[r]))return 0;for(var h in c){(i=c[h])&&(u+=e?r?this._countInIndex(i.objects,o,a,s):this._countInIndex(i.subjects,a,s,o):t?this._countInIndex(i.predicates,s,o,a):this._countInIndex(i.objects,o,a,s));}return u;}forEach(e,t,r,n,i){this.some(function(t){return e(t),!1;},t,r,n,i);}every(e,t,r,n,i){var a=!1,s=!this.some(function(t){return a=!0,!e(t);},t,r,n,i);return a&&s;}some(e,t,r,n,i){t=t&&I(t),r=r&&I(r),n=n&&I(n),i=i&&I(i);var a,s,o,u,c=this._getGraphs(i),l=this._ids;if(Y(t)&&!(s=l[t])||Y(r)&&!(o=l[r])||Y(n)&&!(u=l[n]))return !1;for(var h in c){if(a=c[h])if(s){if(u){if(this._findInIndex(a.objects,u,s,o,"object","subject","predicate",h,e,null))return !0;}else if(this._findInIndex(a.subjects,s,o,null,"subject","predicate","object",h,e,null))return !0;}else if(o){if(this._findInIndex(a.predicates,o,u,null,"predicate","object","subject",h,e,null))return !0;}else if(u){if(this._findInIndex(a.objects,u,null,null,"object","subject","predicate",h,e,null))return !0;}else if(this._findInIndex(a.subjects,null,null,null,"subject","predicate","object",h,e,null))return !0;}return !1;}getSubjects(e,t,r){var n=[];return this.forSubjects(function(e){n.push(e);},e,t,r),n;}forSubjects(e,t,r,n){t=t&&I(t),r=r&&I(r),n=n&&I(n);var i,a,s,o=this._ids,u=this._getGraphs(n);if(e=this._uniqueEntities(e),!(Y(t)&&!(a=o[t])||Y(r)&&!(s=o[r])))for(n in u){(i=u[n])&&(a?s?this._loopBy2Keys(i.predicates,a,s,e):this._loopByKey1(i.subjects,a,e):s?this._loopByKey0(i.objects,s,e):this._loop(i.subjects,e));}}getPredicates(e,t,r){var n=[];return this.forPredicates(function(e){n.push(e);},e,t,r),n;}forPredicates(e,t,r,n){t=t&&I(t),r=r&&I(r),n=n&&I(n);var i,a,s,o=this._ids,u=this._getGraphs(n);if(e=this._uniqueEntities(e),!(Y(t)&&!(a=o[t])||Y(r)&&!(s=o[r])))for(n in u){(i=u[n])&&(a?s?this._loopBy2Keys(i.objects,s,a,e):this._loopByKey0(i.subjects,a,e):s?this._loopByKey1(i.predicates,s,e):this._loop(i.predicates,e));}}getObjects(e,t,r){var n=[];return this.forObjects(function(e){n.push(e);},e,t,r),n;}forObjects(e,t,r,n){t=t&&I(t),r=r&&I(r),n=n&&I(n);var i,a,s,o=this._ids,u=this._getGraphs(n);if(e=this._uniqueEntities(e),!(Y(t)&&!(a=o[t])||Y(r)&&!(s=o[r])))for(n in u){(i=u[n])&&(a?s?this._loopBy2Keys(i.subjects,a,s,e):this._loopByKey1(i.objects,a,e):s?this._loopByKey0(i.predicates,s,e):this._loop(i.objects,e));}}getGraphs(e,t,r){var n=[];return this.forGraphs(function(e){n.push(e);},e,t,r),n;}forGraphs(e,t,r,n){for(var i in this._graphs){this.some(function(t){return e(t.graph),!0;},t,r,n,i);}}createBlankNode(e){var t,r;if(e)for(t=e="_:"+e,r=1;this._ids[t];){t=e+r++;}else do{t="_:b"+this._blankNodeIndex++;}while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2));}extractLists(_temp5){var{remove:e=!1,ignoreErrors:t=!1}=_temp5===void 0?{}:_temp5;var r={},n=t?()=>!0:(e,t)=>{throw new Error(e.value+" "+t);},i=this.getQuads(null,a.a.rdf.rest,a.a.rdf.nil,null),s=e?[...i]:[];return i.forEach(t=>{for(var i,o,u=[],c=!1,l=t.graph,h=t.subject;h&&!c;){var d,p,f=this.getQuads(null,null,h,null),g=this.getQuads(h,null,null,null),m=null,y=null,b=null;for(d=0;d<g.length&&!c;d++){(p=g[d]).graph.equals(l)?i?c=n(h,"has non-list arcs out"):p.predicate.value===a.a.rdf.first?m?c=n(h,"has multiple rdf:first arcs"):s.push(m=p):p.predicate.value===a.a.rdf.rest?y?c=n(h,"has multiple rdf:rest arcs"):s.push(y=p):f.length?c=n(h,"can't be subject and object"):(i=p,o="subject"):c=n(h,"not confined to single graph");}for(d=0;d<f.length&&!c;++d){p=f[d],i?c=n(h,"can't have coreferences"):p.predicate.value===a.a.rdf.rest?b?c=n(h,"has incoming rdf:rest arcs"):b=p:(i=p,o="object");}m?u.unshift(m.object):c=n(h,"has no list head"),h=b&&b.subject;}c?e=!1:i&&(r[i[o].value]=u);}),e&&this.removeQuads(s),r;}}function Y(e){return "string"==typeof e||e instanceof String;}class J extends X.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;var t,r,n=this;new k(e).parse({on:function on(e,n){switch(e){case"data":t=n;break;case"end":r=n;}}},function(e,t){e&&n.emit("error",e)||t&&n.push(t);},function(e,t){n.emit("prefix",e,t);}),this._transform=function(e,r,n){t(e),n();},this._flush=function(e){r(),e();};}import(e){var t=this;return e.on("data",function(e){t.write(e);}),e.on("end",function(){t.end();}),e.on("error",function(e){t.emit("error",e);}),this;}}class W extends X.Transform{constructor(e){super({encoding:"utf8"}),this._writableState.objectMode=!0;var t=this,r=this._writer=new z({write:function write(e,r,n){t.push(e),n&&n();},end:function end(e){t.push(null),e&&e();}},e);this._transform=function(e,t,n){r.addQuad(e,n);},this._flush=function(e){r.end(e);};}import(e){var t=this;return e.on("data",function(e){t.write(e);}),e.on("end",function(){t.end();}),e.on("error",function(e){t.emit("error",e);}),e.on("prefix",function(e,r){t._writer.addPrefix(e,r);}),this;}}},function(e,t,r){(t=e.exports=r(104)).Stream=t,t.Readable=t,t.Writable=r(108),t.Duplex=r(32),t.Transform=r(110),t.PassThrough=r(210),t.finished=r(69),t.pipeline=r(211);},function(e,t,r){(function(e){function r(e){return Object.prototype.toString.call(e);}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e);},t.isBoolean=function(e){return "boolean"==typeof e;},t.isNull=function(e){return null===e;},t.isNullOrUndefined=function(e){return null==e;},t.isNumber=function(e){return "number"==typeof e;},t.isString=function(e){return "string"==typeof e;},t.isSymbol=function(e){return "symbol"==typeof e;},t.isUndefined=function(e){return void 0===e;},t.isRegExp=function(e){return "[object RegExp]"===r(e);},t.isObject=function(e){return "object"==typeof e&&null!==e;},t.isDate=function(e){return "[object Date]"===r(e);},t.isError=function(e){return "[object Error]"===r(e)||e instanceof Error;},t.isFunction=function(e){return "function"==typeof e;},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e;},t.isBuffer=e.isBuffer;}).call(this,r(11).Buffer);},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t;}t.setTimeout=function(){return new a(i.call(setTimeout,n,arguments),clearTimeout);},t.setInterval=function(){return new a(i.call(setInterval,n,arguments),clearInterval);},t.clearTimeout=t.clearInterval=function(e){e&&e.close();},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(n,this._id);},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t;},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1;},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout();},t));},r(222),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate;}).call(this,r(10));},function(e,t){!function(e){!function(t){var r=("URLSearchParams"in e),n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob(),!0;}catch(e){return !1;}}(),a=("FormData"in e),s=("ArrayBuffer"in e);if(s)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1;};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase();}function l(e){return "string"!=typeof e&&(e=String(e)),e;}function h(e){var t={next:function next(){var t=e.shift();return {done:void 0===t,value:t};}};return n&&(t[Symbol.iterator]=function(){return t;}),t;}function d(e){this.map={},e instanceof d?e.forEach(function(e,t){this.append(t,e);},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1]);},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t]);},this);}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0;}function f(e){return new Promise(function(t,r){e.onload=function(){t(e.result);},e.onerror=function(){r(e.error);};});}function g(e){var t=new FileReader(),r=f(t);return t.readAsArrayBuffer(e),r;}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer;}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&i&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"));},i&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]));},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g);}),this.text=function(){var e,t,r,n=p(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader(),r=f(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++){r[n]=String.fromCharCode(t[n]);}return r.join("");}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText);},a&&(this.formData=function(){return this.text().then(v);}),this.json=function(){return this.text().then(JSON.parse);},this;}d.prototype.append=function(e,t){e=c(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t;},d.prototype.delete=function(e){delete this.map[c(e)];},d.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null;},d.prototype.has=function(e){return this.map.hasOwnProperty(c(e));},d.prototype.set=function(e,t){this.map[c(e)]=l(t);},d.prototype.forEach=function(e,t){for(var r in this.map){this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this);}},d.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r);}),h(e);},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t);}),h(e);},d.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t]);}),h(e);},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(e,t){var r,n,i=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0);}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),b.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i);}function v(e){var t=new FormData();return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i));}}),t;}function w(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e);}_.prototype.clone=function(){return new _(this,{body:this._bodyInit});},y.call(_.prototype),y.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url});},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e;};var S=[301,302,303,307,308];w.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}});},t.DOMException=e.DOMException;try{new t.DOMException();}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack;},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException;}function T(e,r){return new Promise(function(n,a){var s=new _(e,r);if(s.signal&&s.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var o=new XMLHttpRequest();function u(){o.abort();}o.onload=function(){var e,t,r={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new d(),e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i);}}),t)};r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL");var i="response"in o?o.response:o.responseText;n(new w(i,r));},o.onerror=function(){a(new TypeError("Network request failed"));},o.ontimeout=function(){a(new TypeError("Network request failed"));},o.onabort=function(){a(new t.DOMException("Aborted","AbortError"));},o.open(s.method,s.url,!0),"include"===s.credentials?o.withCredentials=!0:"omit"===s.credentials&&(o.withCredentials=!1),"responseType"in o&&i&&(o.responseType="blob"),s.headers.forEach(function(e,t){o.setRequestHeader(t,e);}),s.signal&&(s.signal.addEventListener("abort",u),o.onreadystatechange=function(){4===o.readyState&&s.signal.removeEventListener("abort",u);}),o.send(void 0===s._bodyInit?null:s._bodyInit);});}T.polyfill=!0,e.fetch||(e.fetch=T,e.Headers=d,e.Request=_,e.Response=w),t.Headers=d,t.Request=_,t.Response=w,t.fetch=T;}({});}("undefined"!=typeof self?self:this);},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(273),t),i(r(274),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CODES=t.ErrorCoded=void 0;class n extends Error{constructor(e,t){super(e),this.code=t;}}t.ErrorCoded=n,function(e){e.COLLIDING_KEYWORDS="colliding keywords",e.CONFLICTING_INDEXES="conflicting indexes",e.CYCLIC_IRI_MAPPING="cyclic IRI mapping",e.INVALID_ID_VALUE="invalid @id value",e.INVALID_INDEX_VALUE="invalid @index value",e.INVALID_NEST_VALUE="invalid @nest value",e.INVALID_PREFIX_VALUE="invalid @prefix value",e.INVALID_PROPAGATE_VALUE="invalid @propagate value",e.INVALID_REVERSE_VALUE="invalid @reverse value",e.INVALID_IMPORT_VALUE="invalid @import value",e.INVALID_VERSION_VALUE="invalid @version value",e.INVALID_BASE_IRI="invalid base IRI",e.INVALID_CONTAINER_MAPPING="invalid container mapping",e.INVALID_CONTEXT_ENTRY="invalid context entry",e.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",e.INVALID_DEFAULT_LANGUAGE="invalid default language",e.INVALID_INCLUDED_VALUE="invalid @included value",e.INVALID_IRI_MAPPING="invalid IRI mapping",e.INVALID_JSON_LITERAL="invalid JSON literal",e.INVALID_KEYWORD_ALIAS="invalid keyword alias",e.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",e.INVALID_LANGUAGE_MAPPING="invalid language mapping",e.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",e.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",e.INVALID_LOCAL_CONTEXT="invalid local context",e.INVALID_REMOTE_CONTEXT="invalid remote context",e.INVALID_REVERSE_PROPERTY="invalid reverse property",e.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",e.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",e.INVALID_SCOPED_CONTEXT="invalid scoped context",e.INVALID_SCRIPT_ELEMENT="invalid script element",e.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",e.INVALID_TERM_DEFINITION="invalid term definition",e.INVALID_TYPE_MAPPING="invalid type mapping",e.INVALID_TYPE_VALUE="invalid type value",e.INVALID_TYPED_VALUE="invalid typed value",e.INVALID_VALUE_OBJECT="invalid value object",e.INVALID_VALUE_OBJECT_VALUE="invalid value object value",e.INVALID_VOCAB_MAPPING="invalid vocab mapping",e.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",e.KEYWORD_REDEFINITION="keyword redefinition",e.LOADING_DOCUMENT_FAILED="loading document failed",e.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",e.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",e.PROCESSING_MODE_CONFLICT="processing mode conflict",e.PROTECTED_TERM_REDEFINITION="protected term redefinition",e.CONTEXT_OVERFLOW="context overflow",e.INVALID_BASE_DIRECTION="invalid base direction",e.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",e.INVALID_STREAMING_KEY_ORDER="invalid streaming key order";}(t.ERROR_CODES||(t.ERROR_CODES={}));},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SingularizeState=void 0,function(e){e[e.SINGLE=0]="SINGLE",e[e.PLURAL=1]="PLURAL";}(t.SingularizeState||(t.SingularizeState={}));},function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed");}e.exports=r,r.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t);};},function(e,t,r){var n=r(19),i=r(49);function a(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32;}t.BlockHash=a,a.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32){this._update(e,i,i+this._delta32);}}return this;},a.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e);},a.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++){n[i]=0;}if(e<<=3,"big"===this.endian){for(var a=8;a<this.padLength;a++){n[i++]=0;}n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e;}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,a=8;a<this.padLength;a++){n[i++]=0;}return n;};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.orderTypes=t.isExpressionError=t.ExpressionError=t.AggregateEvaluator=t.SyncEvaluator=t.AsyncEvaluator=void 0;var n=r(525);Object.defineProperty(t,"AsyncEvaluator",{enumerable:!0,get:function get(){return n.AsyncEvaluator;}});var i=r(186);Object.defineProperty(t,"SyncEvaluator",{enumerable:!0,get:function get(){return i.SyncEvaluator;}});var a=r(539);Object.defineProperty(t,"AggregateEvaluator",{enumerable:!0,get:function get(){return a.AggregateEvaluator;}});var s=r(20);Object.defineProperty(t,"ExpressionError",{enumerable:!0,get:function get(){return s.ExpressionError;}}),Object.defineProperty(t,"isExpressionError",{enumerable:!0,get:function get(){return s.isExpressionError;}});var o=r(540);Object.defineProperty(t,"orderTypes",{enumerable:!0,get:function get(){return o.orderTypes;}});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.expressionTypes=t.types=void 0,t.types=Object.freeze({ALT:"alt",ASK:"ask",BGP:"bgp",CONSTRUCT:"construct",DESC:"desc",DESCRIBE:"describe",DISTINCT:"distinct",EXPRESSION:"expression",EXTEND:"extend",FILTER:"filter",FROM:"from",GRAPH:"graph",GROUP:"group",INV:"inv",JOIN:"join",LEFT_JOIN:"leftjoin",LINK:"link",MINUS:"minus",NPS:"nps",ONE_OR_MORE_PATH:"OneOrMorePath",ORDER_BY:"orderby",PATH:"path",PATTERN:"pattern",PROJECT:"project",REDUCED:"reduced",SEQ:"seq",SERVICE:"service",SLICE:"slice",UNION:"union",VALUES:"values",ZERO_OR_MORE_PATH:"ZeroOrMorePath",ZERO_OR_ONE_PATH:"ZeroOrOnePath",COMPOSITE_UPDATE:"compositeupdate",DELETE_INSERT:"deleteinsert",LOAD:"load",CLEAR:"clear",CREATE:"create",DROP:"drop",ADD:"add",MOVE:"move",COPY:"copy"}),t.expressionTypes=Object.freeze({AGGREGATE:"aggregate",EXISTENCE:"existence",NAMED:"named",OPERATOR:"operator",TERM:"term",WILDCARD:"wildcard"});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(4),a=r(30).Wildcard;t.default=class{constructor(e){this.dataFactory=e||new n.DataFactory(),this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string");}createAlt(e,t){return {type:"alt",left:e,right:t};}createAsk(e){return {type:"ask",input:e};}createBoundAggregate(e,t,r,n,i){var a=this.createAggregateExpression(t,r,n,i);return a.variable=e,a;}createBgp(e){return {type:"bgp",patterns:e};}createConstruct(e,t){return {type:"construct",input:e,template:t};}createDescribe(e,t){return {type:"describe",input:e,terms:t};}createDistinct(e){return {type:"distinct",input:e};}createExtend(e,t,r){return {type:"extend",input:e,variable:t,expression:r};}createFrom(e,t,r){return {type:"from",input:e,default:t,named:r};}createFilter(e,t){return {type:"filter",input:e,expression:t};}createGraph(e,t){return {type:"graph",input:e,name:t};}createGroup(e,t,r){return {type:"group",input:e,variables:t,aggregates:r};}createInv(e){return {type:"inv",path:e};}createJoin(e,t){return {type:"join",left:e,right:t};}createLeftJoin(e,t,r){return r?{type:"leftjoin",left:e,right:t,expression:r}:{type:"leftjoin",left:e,right:t};}createLink(e){return {type:"link",iri:e};}createMinus(e,t){return {type:"minus",left:e,right:t};}createNps(e){return {type:"nps",iris:e};}createOneOrMorePath(e){return {type:"OneOrMorePath",path:e};}createOrderBy(e,t){return {type:"orderby",input:e,expressions:t};}createPath(e,t,r,n){return n?{type:"path",subject:e,predicate:t,object:r,graph:n}:{type:"path",subject:e,predicate:t,object:r,graph:this.dataFactory.defaultGraph()};}createPattern(e,t,r,n){var i=this.dataFactory.quad(e,t,r,n);return i.type="pattern",i;}createProject(e,t){return {type:"project",input:e,variables:t};}createReduced(e){return {type:"reduced",input:e};}createSeq(e,t){return {type:"seq",left:e,right:t};}createService(e,t,r){return {type:"service",input:e,name:t,silent:r};}createSlice(e,t,r){return void 0===t&&(t=0),void 0!==r?{type:"slice",input:e,start:t,length:r}:{type:"slice",input:e,start:t};}createUnion(e,t){return {type:"union",left:e,right:t};}createValues(e,t){return {type:"values",variables:e,bindings:t};}createZeroOrMorePath(e){return {type:"ZeroOrMorePath",path:e};}createZeroOrOnePath(e){return {type:"ZeroOrOnePath",path:e};}createAggregateExpression(e,t,r,n){return n?{type:"expression",expressionType:"aggregate",aggregator:e,expression:t,separator:n,distinct:r}:{type:"expression",expressionType:"aggregate",aggregator:e,expression:t,distinct:r};}createExistenceExpression(e,t){return {type:"expression",expressionType:"existence",not:e,input:t};}createNamedExpression(e,t){return {type:"expression",expressionType:"named",name:e,args:t};}createOperatorExpression(e,t){return {type:"expression",expressionType:"operator",operator:e,args:t};}createTermExpression(e){return {type:"expression",expressionType:"term",term:e};}createWildcardExpression(){return {type:"expression",expressionType:"wildcard",wildcard:new a()};}createTerm(e){return i.stringToTerm(e,this.dataFactory);}createCompositeUpdate(e){return {type:"compositeupdate",updates:e};}createDeleteInsert(e,t,r){var n={type:"deleteinsert"};return e&&(n.delete=e),t&&(n.insert=t),r&&(n.where=r),n;}createLoad(e,t,r){var n={type:"load",source:e};return t&&(n.destination=t),this.addSilent(n,r);}createClear(e,t){return this.addSilent({type:"clear",source:e},t);}createCreate(e,t){return this.addSilent({type:"create",source:e},t);}createDrop(e,t){return this.addSilent({type:"drop",source:e},t);}createAdd(e,t,r){return this.addSilent({type:"add",source:e,destination:t},r);}createMove(e,t,r){return this.addSilent({type:"move",source:e,destination:t},r);}createCopy(e,t,r){return this.addSilent({type:"copy",source:e,destination:t},r);}addSilent(e,t){return t&&(e.silent=t),e;}};},function(e,t,r){(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function nextTick(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,s,o=arguments.length;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,r);});case 3:return t.nextTick(function(){e.call(null,r,n);});case 4:return t.nextTick(function(){e.call(null,r,n,i);});default:for(a=new Array(o-1),s=0;s<a.length;){a[s++]=arguments[s];}return t.nextTick(function(){e.apply(null,a);});}}}:e.exports=t;}).call(this,r(8));},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(262),t);},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}');},function(e){e.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}');},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var a=r(134);i(r(134),t);var s=/\s+/g,o={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1},u=function(){function e(e,t,r){this.dom=[],this._done=!1,this._tagStack=[],this._lastNode=null,this._parser=null,"function"==typeof t&&(r=t,t=o),"object"==typeof e&&(t=e,e=void 0),this._callback=null!=e?e:null,this._options=null!=t?t:o,this._elementCB=null!=r?r:null;}return e.prototype.onparserinit=function(e){this._parser=e;},e.prototype.onreset=function(){var e;this.dom=[],this._done=!1,this._tagStack=[],this._lastNode=null,this._parser=null!==(e=this._parser)&&void 0!==e?e:null;},e.prototype.onend=function(){this._done||(this._done=!0,this._parser=null,this.handleCallback(null));},e.prototype.onerror=function(e){this.handleCallback(e);},e.prototype.onclosetag=function(){this._lastNode=null;var e=this._tagStack.pop();e&&this._parser&&(this._options.withEndIndices&&(e.endIndex=this._parser.endIndex),this._elementCB&&this._elementCB(e));},e.prototype.onopentag=function(e,t){var r=new a.Element(e,t);this.addNode(r),this._tagStack.push(r);},e.prototype.ontext=function(e){var t=this._options.normalizeWhitespace,r=this._lastNode;if(r&&"text"===r.type)t?r.data=(r.data+e).replace(s," "):r.data+=e;else {t&&(e=e.replace(s," "));var n=new a.Text(e);this.addNode(n),this._lastNode=n;}},e.prototype.oncomment=function(e){if(this._lastNode&&"comment"===this._lastNode.type)this._lastNode.data+=e;else {var t=new a.Comment(e);this.addNode(t),this._lastNode=t;}},e.prototype.oncommentend=function(){this._lastNode=null;},e.prototype.oncdatastart=function(){var e=new a.Text(""),t=new a.NodeWithChildren("cdata",[e]);this.addNode(t),e.parent=t,this._lastNode=e;},e.prototype.oncdataend=function(){this._lastNode=null;},e.prototype.onprocessinginstruction=function(e,t){var r=new a.ProcessingInstruction(e,t);this.addNode(r);},e.prototype.handleCallback=function(e){if("function"==typeof this._callback)this._callback(e,this.dom);else if(e)throw e;},e.prototype.addNode=function(e){var t=this._tagStack[this._tagStack.length-1],r=t?t.children:this.dom,n=r[r.length-1];this._parser&&(this._options.withStartIndices&&(e.startIndex=this._parser.startIndex),this._options.withEndIndices&&(e.endIndex=this._parser.endIndex)),r.push(e),n&&(e.prev=n,n.next=e),t&&(e.parent=t),this._lastNode=null;},e.prototype.addDataNode=function(e){this.addNode(e),this._lastNode=e;},e;}();t.DomHandler=u,t.default=u;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.isTag=void 0,t.isTag=function(e){return "tag"===e.type||"script"===e.type||"style"===e.type;},t.Text="text",t.Directive="directive",t.Comment="comment",t.Script="script",t.Style="style",t.Tag="tag",t.CDATA="cdata",t.Doctype="doctype";},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(290),t),i(r(294),t),i(r(295),t),i(r(138),t),i(r(296),t),i(r(297),t),i(r(37),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;var n=r(5),i=r(13);class a{constructor(e,t){this.dataFactory=e||new n.DataFactory(),this.baseIRI=t||"";}static isValidIri(e){return a.IRI_REGEX.test(e);}createVocabIris(e,t,r){return e.split(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/).filter(e=>!!e).map(e=>{if(!a.isValidIri(e)){if(!r)return;e=""+(t.vocab||this.baseIRI+"#")+e;}return this.dataFactory.namedNode(e);}).filter(e=>!!e);}getVocabularyExpansionType(e,t,r){var n=e.split(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/);if(n.includes("subPropertyOf")||n.includes("equivalentProperty"))return [this.dataFactory.namedNode(a.RDF+"type")];if(t.vocab&&t.vocab in r&&r[t.vocab].properties){var _e15=[];for(var[_i4,_a6]of Object.entries(r[t.vocab].properties)){n.includes(_i4)&&(_e15=_e15.concat(Object.values(_a6).map(e=>this.dataFactory.namedNode(e))));}return _e15;}return [];}createSubject(e){if(!a.isValidIri(e))try{e=i.resolve(e,this.baseIRI);}catch(e){return;}return this.dataFactory.namedNode(e);}createLiteral(e,t){return this.dataFactory.literal(e,t.language);}deriveVocab(e,t){var r;for(var _n8 in t){if(e.startsWith(_n8)){r=_n8,r.endsWith("/")||(r+="#");break;}}if(!r){var _t22=e.indexOf("#");r=_t22>0?e.slice(0,_t22+1):i.resolve(".",e);}return r;}}t.Util=a,a.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a.XSD="http://www.w3.org/2001/XMLSchema#",a.RDFA="http://www.w3.org/ns/rdfa#",a.IRI_REGEX=/^([A-Za-z][\+-\.0-9A-Za-z]*|_):(?:(?![ "<>\[-\]`\{-\}])[\s\S])*$/;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerAdapter=void 0;t.NodeHandlerAdapter=class{constructor(e,t,r){this.targetKind=e,this.util=t,this.settings=r;}getNodeQuadContextSelectionSet(e,t,r){var n={};if(e)for(var _t23 of e.selections){if("Field"===_t23.kind){var _e16=_t23;this.handleNodeQuadContextField(_e16,r,n,"id","subject"),this.handleNodeQuadContextField(_e16,r,n,"graph","graph");}}return n;}handleNodeQuadContextField(e,t,r,n,i){if(!r[i]&&e.name.value===n){if(!r[i]){var a=this.util.getArgument(e.arguments,"_");if(a){var s=this.util.handleNodeValue(a.value,e.name.value,t);if(1!==s.terms.length)throw new Error("Only single values can be set as "+n+", but got "+s.terms.length+" at "+e.name.value);r[i]=s.terms[0],s.auxiliaryPatterns&&(r.auxiliaryPatterns||(r.auxiliaryPatterns=[]),r.auxiliaryPatterns.concat(s.auxiliaryPatterns));}}if(!r[i]){var _n9=this.util.nameToVariable(this.util.getFieldLabel(e),t);t.terminalVariables.push(_n9),r[i]=_n9;}}}getDirectiveOutputs(e,t,r){var n=[];if(e)for(var i of e){var _e17=this.util.handleDirectiveNode({directive:i,fieldLabel:t},r);if(_e17){if(_e17.ignore)return null;n.push(_e17);}}return n;}handleDirectiveOutputs(e,t){for(var _r21 of e){if(_r21.ignore)return this.util.operationFactory.createBgp([]);_r21.operationOverrider&&(t=_r21.operationOverrider(t));}return t;}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerSelectionAdapter=void 0;var n=r(6),i=r(48),a=r(62);class s extends a.NodeHandlerAdapter{constructor(e,t,r){super(e,t,r);}getNodeQuadContextFieldNode(e,t,r){return this.getNodeQuadContextSelectionSet(e.selectionSet,t,Object.assign(Object.assign({},r),{path:this.util.appendFieldToPath(r.path,t)}));}fieldToOperation(e,t,r,a){var _this13=this;var s=r;var o,u=0;if(("id"===t.name.value||"graph"===t.name.value)&&(r=!1,t.arguments))for(var _r22 of t.arguments){"_"===_r22.name.value&&this.util.handleNodeValue(_r22.value,t.name.value,e);}var c=this.util.getFieldLabel(t);if(e.singularizeState===i.SingularizeState.SINGLE&&(e.singularizeVariables[this.util.nameToVariable(c,e).value]=!0),r){var _t24=this.handleMetaField(e,c,a);if(_t24)return _t24;}var l=a?[this.util.operationFactory.createBgp(a)]:[],h=this.getNodeQuadContextFieldNode(t,c,e);var d=h.subject||this.util.nameToVariable(c,e),p=h.graph||e.graph;h.auxiliaryPatterns&&l.push(this.util.operationFactory.createBgp(h.auxiliaryPatterns));var f=!0,g=null;if(r&&t.arguments&&t.arguments.length)for(var _n10 of t.arguments){if("_"===_n10.name.value){var _i5=this.util.handleNodeValue(_n10.value,t.name.value,e);g=_i5.terms,l.push(this.util.operationFactory.createBgp(_i5.terms.map(r=>this.util.createQuadPattern(e.subject,t.name,r,e.graph,e.context)))),_i5.auxiliaryPatterns&&l.push(this.util.operationFactory.createBgp(h.auxiliaryPatterns)),r=!1;break;}if("graph"===_n10.name.value){var _r23=this.util.handleNodeValue(_n10.value,t.name.value,e);if(1!==_r23.terms.length)throw new Error("Only single values can be set as graph, but got "+_r23.terms.length+" at "+t.name.value);p=_r23.terms[0],e=Object.assign(Object.assign({},e),{graph:p}),_r23.auxiliaryPatterns&&l.push(this.util.operationFactory.createBgp(h.auxiliaryPatterns));break;}if("alt"===_n10.name.value){var _r24=_n10.value;"ListValue"!==_r24.kind&&(_r24={kind:"ListValue",values:[_r24]}),l.push(this.util.createQuadPath(e.subject,t.name,_r24,d,e.graph,e.context)),f=!1;break;}}if(r&&f&&l.push(this.util.operationFactory.createBgp([this.util.createQuadPattern(e.subject,t.name,d,e.graph,e.context)])),t.arguments&&t.arguments.length){var _loop2=function _loop2(_r25){if("_"===_r25.name.value||"graph"===_r25.name.value||"alt"===_r25.name.value);else if("first"===_r25.name.value){if("IntValue"!==_r25.value.kind)throw new Error("Invalid value type for 'first' argument: "+_r25.value.kind);o=parseInt(_r25.value.value,10);}else if("offset"===_r25.name.value){if("IntValue"!==_r25.value.kind)throw new Error("Invalid value type for 'offset' argument: "+_r25.value.kind);u=parseInt(_r25.value.value,10);}else {var _t25=_this13.util.handleNodeValue(_r25.value,_r25.name.value,e);l.push(_this13.util.operationFactory.createBgp(_t25.terms.map(t=>_this13.util.createQuadPattern(d,_r25.name,t,e.graph,e.context)))),_t25.auxiliaryPatterns&&l.push(_this13.util.operationFactory.createBgp(h.auxiliaryPatterns));}};for(var _r25 of t.arguments){_loop2(_r25);}}var m=this.getDirectiveOutputs(t.directives,c,e);if(!m)return this.util.operationFactory.createBgp([]);var y=this.util.joinOperations(l);if(t.selectionSet&&t.selectionSet.selections.length){if(g){if(1!==g.length)throw new Error("Only single values can be set as id, but got "+g.length+" at "+t.name.value);d=g[0];}var _r26=Object.assign(Object.assign(Object.assign({},e),s?{path:this.util.appendFieldToPath(e.path,c)}:{}),{graph:p,subject:s?d:e.subject});var _n11=!1;var _i6=t.selectionSet.selections.filter(e=>"Field"!==e.kind||"totalCount"!==e.name.value||(_n11=!0,!1));var _a7=this.util.joinOperations(l.concat(_i6.map(e=>this.util.handleNode(e,_r26))));if(_n11){var _t26=this.util.dataFactory.variable("var"+this.settings.expressionVariableCounter++),_r27=this.util.dataFactory.variable(d.value+this.settings.variableDelimiter+"totalCount"),_n12=this.util.operationFactory.createBoundAggregate(_t26,"count",this.util.operationFactory.createTermExpression(d),!1),_s5=this.util.operationFactory.createProject(this.util.operationFactory.createExtend(this.util.operationFactory.createGroup(y,[],[_n12]),_r27,this.util.operationFactory.createTermExpression(_t26)),[_r27]);e.terminalVariables.push(_r27),_a7=_i6.length?this.util.operationFactory.createJoin(this.util.operationFactory.createProject(_a7,[]),_s5):_s5;}y=_a7;}else r&&"Variable"===d.termType&&e.terminalVariables.push(d);return (u||o)&&(y=this.util.operationFactory.createSlice(this.util.operationFactory.createProject(y,n.Util.inScopeVariables(y)),u,o)),this.handleDirectiveOutputs(m,y);}handleMetaField(e,t,r){if("__typename"===t){var _n13=this.util.nameToVariable(t,e);return e.terminalVariables.push(_n13),this.util.operationFactory.createBgp([this.util.operationFactory.createPattern(e.subject,this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.util.nameToVariable(t,e),e.graph)].concat(r||[]));}return null;}}t.NodeHandlerSelectionAdapter=s;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerPredicate=void 0;var n=r(9),i=r(27);class a{static handlePredicateObject(e,t,r,n,i,a,s){return _asyncToGenerator(function*(){var o=yield t.getPropertiesDepth(r,n),u=yield t.getDepthOffsetGraph(n,r),c=n-u,l=e.idStack[o];if(l)for(var h of l){if(u>=0){var _r28=e.idStack[c-1];if(_r28)for(var _o3 of _r28){s?(t.validateReverseSubject(a),e.emitQuad(n,t.dataFactory.quad(a,i,h,_o3))):e.emitQuad(n,t.dataFactory.quad(h,i,a,_o3));}else s?(t.validateReverseSubject(a),e.getUnidentifiedGraphBufferSafe(c-1).push({subject:a,predicate:i,object:h})):e.getUnidentifiedGraphBufferSafe(c-1).push({subject:h,predicate:i,object:a});}else {var _u=yield t.getGraphContainerValue(r,o);s?(t.validateReverseSubject(a),e.emitQuad(n,t.dataFactory.quad(a,i,h,_u))):e.emitQuad(n,t.dataFactory.quad(h,i,a,_u));}}else s&&t.validateReverseSubject(a),e.getUnidentifiedValueBufferSafe(o).push({predicate:i,object:a,reverse:s});})();}isPropertyHandler(){return !0;}isStackProcessor(){return !0;}validate(e,t,r,n,a){return _asyncToGenerator(function*(){var s=r[n];if(s){var _a8=yield e.getContext(r);if(yield t.predicateToTerm(_a8,r[n]))return "@json"===i.Util.getContextValueType(_a8,s)&&(e.jsonLiteralStack[n+1]=!0),!0;}return !1;})();}test(e,t,r,n,i){return _asyncToGenerator(function*(){return n[i];})();}handle(e,t,r,s,o,u,c){return _asyncToGenerator(function*(){var l=s[u],h=yield e.getContext(s),d=yield t.predicateToTerm(h,r);if(d){var _c=yield t.valueToTerm(h,r,o,u,s);if(_c.length)for(var p of _c){var _c2=i.Util.isPropertyReverse(h,l,yield t.unaliasKeywordParent(s,u));if(o){var _a9=("@list"in i.Util.getContextValueContainer(h,r));if(_a9||o["@list"]){if((_a9&&!Array.isArray(o)&&!o["@list"]||o["@list"]&&!Array.isArray(o["@list"]))&&p!==t.rdfNil){var _r29=t.dataFactory.blankNode();e.emitQuad(u,t.dataFactory.quad(_r29,t.rdfRest,t.rdfNil,t.getDefaultGraph())),e.emitQuad(u,t.dataFactory.quad(_r29,t.rdfFirst,p,t.getDefaultGraph())),p=_r29;}if(_c2&&!e.allowSubjectList)throw new n.ErrorCoded("Found illegal list value in subject position at "+r,n.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE);}}yield a.handlePredicateObject(e,t,s,u,d,p,_c2);}}})();}}t.EntryHandlerPredicate=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parseXSDDateTime=t.parseXSDInteger=t.parseXSDDecimal=t.parseXSDFloat=void 0,t.parseXSDFloat=function(e){var t=Number(e);return isNaN(t)?"NaN"===e?NaN:"INF"===e?1/0:"-INF"===e?-1/0:void 0:t;},t.parseXSDDecimal=function(e){var t=Number(e);return isNaN(t)?void 0:t;},t.parseXSDInteger=function(e){var t=parseInt(e,10);return isNaN(t)?void 0:t;},t.parseXSDDateTime=function(e){var t=e.indexOf("T"),r=t>=0?e.substr(0,t):e,[n,i,a]=r.split("-");var s="",o="",u="",c="";if(t>=0){var _r30=e.substr(t+1),[_n14,_i7]=_r30.split(/[\+\-Z]/);[s,o,u]=_n14.split(":");var _a10=new RegExp(/([\+\-Z].*)/).exec(_r30);c=_a10?_a10[0]:"";}else s="00",o="00",u="00",c="";return {year:n,month:i,day:a,hours:s,minutes:o,seconds:u,timezone:c};};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.typeCheckLit=t.log=t.dateTime=t.langString=t.string=t.numberFromString=t.number=t.bool=t.map=t.Impl=t.Builder=t.declare=void 0;var n=r(23),i=r(40),a=r(14),s=r(20),o=r(14),u=r(90);t.declare=function(){return new c();};class c{constructor(){this.implementations=[];}collect(){return d(this.implementations);}log(){return console.log(this.implementations),this;}add(e){return this.implementations.push(e),this;}set(e,t){var r=n.List(e);return this.add(new h({types:r,func:t}));}copy(_ref2){var{from:e,to:t}=_ref2;var r=this.implementations.length-1,i=n.List(e);for(var _e18=r;_e18>=0;_e18--){var _r31=this.implementations[_e18];if(_r31.get("types").equals(i))return this.set(t,_r31.get("func"));}throw new s.UnexpectedError("Tried to copy implementation, but types not found",{from:e,to:t});}onUnary(e,t){return this.set([e],_ref3=>{var[e]=_ref3;return t(e);});}onUnaryTyped(e,t){return this.set([e],_ref4=>{var[e]=_ref4;return t(e.typedValue);});}onBinary(e,t){return this.set(e,_ref5=>{var[e,r]=_ref5;return t(e,r);});}onBinaryTyped(e,t){return this.set(e,_ref6=>{var[e,r]=_ref6;return t(e.typedValue,r.typedValue);});}onTernaryTyped(e,t){return this.set(e,_ref7=>{var[e,r,n]=_ref7;return t(e.typedValue,r.typedValue,n.typedValue);});}onTernary(e,t){return this.set(e,_ref8=>{var[e,r,n]=_ref8;return t(e,r,n);});}onQuaternaryTyped(e,t){return this.set(e,_ref9=>{var[e,r,n,i]=_ref9;return t(e.typedValue,r.typedValue,n.typedValue,i.typedValue);});}unimplemented(e){for(var _t27=0;_t27<=5;_t27++){var _r32=Array(_t27).fill("term"),_n15=t=>{throw new s.UnimplementedError(e);};this.set(_r32,_n15);}return this;}onTerm1(e){return this.set(["term"],_ref10=>{var[t]=_ref10;return e(t);});}onLiteral1(e){return this.set(["literal"],_ref11=>{var[t]=_ref11;return e(t);});}onBoolean1(e){return this.set(["boolean"],_ref12=>{var[t]=_ref12;return e(t);});}onBoolean1Typed(e){return this.set(["boolean"],_ref13=>{var[t]=_ref13;return e(t.typedValue);});}onString1(e){return this.set(["string"],_ref14=>{var[t]=_ref14;return e(t);});}onString1Typed(e){return this.set(["string"],_ref15=>{var[t]=_ref15;return e(t.typedValue);});}onLangString1(e){return this.set(["langString"],_ref16=>{var[t]=_ref16;return e(t);});}onStringly1(e){return this.set(["string"],_ref17=>{var[t]=_ref17;return e(t);}).set(["langString"],_ref18=>{var[t]=_ref18;return e(t);});}onStringly1Typed(e){return this.set(["string"],_ref19=>{var[t]=_ref19;return e(t.typedValue);}).set(["langString"],_ref20=>{var[t]=_ref20;return e(t.typedValue);});}onNumeric1(e){return this.set(["integer"],_ref21=>{var[t]=_ref21;return e(t);}).set(["decimal"],_ref22=>{var[t]=_ref22;return e(t);}).set(["float"],_ref23=>{var[t]=_ref23;return e(t);}).set(["double"],_ref24=>{var[t]=_ref24;return e(t);}).invalidLexicalForm(["nonlexical"],1);}onDateTime1(e){return this.set(["date"],_ref25=>{var[t]=_ref25;return e(t);}).invalidLexicalForm(["nonlexical"],1);}arithmetic(e){return this.numeric(_ref26=>{var[t,r]=_ref26;var n=u.promote(t.type,r.type),i=a.decategorize(n);return f(e(t.typedValue,r.typedValue),i);});}numberTest(e){return this.numeric(_ref27=>{var[t,r]=_ref27;return p(e(t.typedValue,r.typedValue));});}stringTest(e){return this.set(["string","string"],_ref28=>{var[t,r]=_ref28;return p(e(t.typedValue,r.typedValue));}).invalidLexicalForm(["nonlexical","string"],1).invalidLexicalForm(["string","nonlexical"],2);}booleanTest(e){return this.set(["boolean","boolean"],_ref29=>{var[t,r]=_ref29;return p(e(t.typedValue,r.typedValue));}).invalidLexicalForm(["nonlexical","boolean"],1).invalidLexicalForm(["boolean","nonlexical"],2);}dateTimeTest(e){return this.set(["date","date"],_ref30=>{var[t,r]=_ref30;return p(e(t.typedValue,r.typedValue));}).invalidLexicalForm(["nonlexical","date"],1).invalidLexicalForm(["date","nonlexical"],2);}numeric(e){return this.set(["integer","integer"],e).set(["integer","decimal"],e).set(["integer","float"],e).set(["integer","double"],e).invalidLexicalForm(["integer","nonlexical"],2).set(["decimal","integer"],e).set(["decimal","decimal"],e).set(["decimal","float"],e).set(["decimal","double"],e).invalidLexicalForm(["decimal","nonlexical"],2).set(["float","integer"],e).set(["float","decimal"],e).set(["float","float"],e).set(["float","double"],e).invalidLexicalForm(["float","nonlexical"],2).set(["double","integer"],e).set(["double","decimal"],e).set(["double","float"],e).set(["double","double"],e).invalidLexicalForm(["double","nonlexical"],2).invalidLexicalForm(["nonlexical","integer"],1).invalidLexicalForm(["nonlexical","decimal"],1).invalidLexicalForm(["nonlexical","float"],1).invalidLexicalForm(["nonlexical","double"],1);}invalidLexicalForm(e,t){return this.set(e,e=>{throw new s.InvalidLexicalForm(e[t-1].toRDF());});}chain(e){return this.implementations=this.implementations.concat(e),this;}}t.Builder=c;var l={types:[],func(){throw new s.UnexpectedError("Implementation not set yet declared as implemented");}};class h extends n.Record(l){constructor(e){super(e);}get(e){return super.get(e);}toPair(){return [this.get("types"),this.get("func")];}}function d(e){var t=e.map(e=>e.toPair());return n.Map(t);}function p(e){return new i.BooleanLiteral(e);}function f(e,t){return new i.NumericLiteral(e,a.make(t||o.TypeURL.XSD_FLOAT),void 0);}t.Impl=h,t.map=d,t.bool=p,t.number=f,t.numberFromString=function(e,t){var r=Number(e);return new i.NumericLiteral(r,a.make(t||o.TypeURL.XSD_FLOAT),void 0);},t.string=function(e){return new i.StringLiteral(e);},t.langString=function(e,t){return new i.LangStringLiteral(e,t);},t.dateTime=function(e,t){return new i.DateTimeLiteral(e,t);},t.log=function(e){for(var _len=arguments.length,t=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){t[_key-1]=arguments[_key];}return console.log(e,t),e;},t.typeCheckLit=function(e,t,r,n){if("literal"!==e.termType)throw new s.InvalidArgumentTypes(r,n);var i=e;if(!t.includes(i.type))throw new s.InvalidArgumentTypes(r,n);return i;};},function(e,t,r){(function(e){r.d(t,"a",function(){return d;});var n=r(7),i=r(189),a=r.n(i);var{xsd:s}=n.a;var o=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,u={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},c=/[\x00-\x20<>\\"\{\}\|\^\`]/,l={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},h=/$0^/;class d{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode)for(var t in this._n3Mode=!1,this){!(t in l)&&this[t]instanceof RegExp&&(this[t]=h);}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0;}_tokenizeToEnd(e,t){for(var r=this._input,n=this._comments;;){for(var i,a;i=this._newline.exec(r);){n&&(a=this._comment.exec(i[0]))&&e(null,{line:this._line,type:"comment",value:a[1],prefix:""}),r=r.substr(i[0].length,r.length),this._line++;}if(!i&&(i=this._whitespace.exec(r))&&(r=r.substr(i[0].length,r.length)),this._endOfFile.test(r))return t&&(n&&(a=this._comment.exec(r))&&e(null,{line:this._line,type:"comment",value:a[1],prefix:""}),e(r=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=r;var o=this._line,u="",l="",h="",d=r[0],p=null,f=0,g=!1;switch(d){case"^":if(r.length<3)break;if("^"!==r[1]){this._n3Mode&&(f=1,u="^");break;}if(this._previousMarker="^^","<"!==(r=r.substr(2))[0]){g=!0;break;}case"<":if(p=this._unescapedIri.exec(r))u="IRI",l=p[1];else if(p=this._iri.exec(r)){if(null===(l=this._unescape(p[1]))||c.test(l))return y(this);u="IRI";}else r.length>1&&"<"===r[1]?(u="<<",f=2):this._n3Mode&&r.length>1&&"="===r[1]&&(u="inverse",f=2,l=">");break;case">":r.length>1&&">"===r[1]&&(u=">>",f=2);break;case"_":((p=this._blank.exec(r))||t&&(p=this._blank.exec(r+" ")))&&(u="blank",h="_",l=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(r))l=p[1];else if(({value:l,matchLength:f}=this._parseLiteral(r)),null===l)return y(this);null===p&&0===f||(u="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(r))l=p[1];else if(({value:l,matchLength:f}=this._parseLiteral(r)),null===l)return y(this);null===p&&0===f||(u="literal",this._literalClosingPos=0);}break;case"?":this._n3Mode&&(p=this._variable.exec(r))&&(u="var",l=p[0]);break;case"@":"literal"===this._previousMarker&&(p=this._langcode.exec(r))?(u="langcode",l=p[1]):(p=this._keyword.exec(r))&&(u=p[0]);break;case".":if(1===r.length?t:r[1]<"0"||r[1]>"9"){u=".",f=1;break;}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(p=this._number.exec(r)||t&&(p=this._number.exec(r+" ")))&&(u="literal",l=p[0],h="string"==typeof p[1]?s.double:"string"==typeof p[2]?s.decimal:s.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(p=this._sparqlKeyword.exec(r))?u=p[0].toUpperCase():g=!0;break;case"f":case"t":(p=this._boolean.exec(r))?(u="literal",l=p[0],h=s.boolean):g=!0;break;case"a":(p=this._shortPredicates.exec(r))?(u="abbreviation",l="a"):g=!0;break;case"=":this._n3Mode&&r.length>1&&(u="abbreviation",">"!==r[1]?(f=1,l="="):(f=2,l=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(f=1,u=d);break;default:g=!0;}if(g&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(p=this._prefix.exec(r))?((p=this._prefixed.exec(r))||t&&(p=this._prefixed.exec(r+" ")))&&(u="prefixed",h=p[1]||"",l=this._unescape(p[2])):(u="prefix",l=p[1]||"")),"^^"===this._previousMarker)switch(u){case"prefixed":u="type";break;case"IRI":u="typeIRI";break;default:u="";}if(!u)return t||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?y(this):this._input=r;var m={line:o,type:u,value:l,prefix:h};e(null,m),this.previousToken=m,this._previousMarker=u,r=r.substr(f||p[0].length,r.length);}function y(t){e(t._syntaxError(/^\S*/.exec(r)[0]));}}_unescape(e){var t=!1;var r=e.replace(o,(e,r,n,i)=>{if("string"==typeof r)return String.fromCharCode(Number.parseInt(r,16));if("string"==typeof n){var _e19=Number.parseInt(n,16);return _e19<=65535?String.fromCharCode(Number.parseInt(n,16)):String.fromCharCode(55296+((_e19-=65536)>>10),56320+(1023&_e19));}return i in u?u[i]:(t=!0,"");});return t?null:r;}_parseLiteral(e){if(e.length>=3){var _t28=e.match(/^(?:"""|"|'''|'|)/)[0],_r33=_t28.length;var _n16=Math.max(this._literalClosingPos,_r33);for(;(_n16=e.indexOf(_t28,_n16))>0;){var _t29=0;for(;"\\"===e[_n16-_t29-1];){_t29++;}if(_t29%2==0){var _t30=e.substring(_r33,_n16),_i8=_t30.split(/\r\n|\r|\n/).length-1,_a11=_n16+_r33;if(1===_r33&&0!==_i8||3===_r33&&this._lineMode)break;return this._line+=_i8,{value:this._unescape(_t30),matchLength:_a11};}_n16++;}this._literalClosingPos=e.length-_r33+1;}return {value:"",matchLength:0};}_syntaxError(e){this._input=null;var t=new Error('Unexpected "'+e+'" on line '+this._line+".");return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t;}tokenize(t,r){var n=this;if(this._line=1,"string"==typeof t){if(this._input=t,"function"!=typeof r){var i,s=[];if(this._tokenizeToEnd(function(e,t){e?i=e:s.push(t);},!0),i)throw i;return s;}a()(()=>n._tokenizeToEnd(r,!0));}else this._input="",this._pendingBuffer=null,"function"==typeof t.setEncoding&&t.setEncoding("utf8"),t.on("data",function(t){null!==n._input&&0!==t.length&&(n._pendingBuffer&&(t=e.concat([n._pendingBuffer,t]),n._pendingBuffer=null),128&t[t.length-1]?n._pendingBuffer=t:(n._input+=t,n._tokenizeToEnd(r,!1)));}),t.on("end",function(){null!==n._input&&n._tokenizeToEnd(r,!0);}),t.on("error",r);}}}).call(this,r(11).Buffer);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NamedNode=void 0;t.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e;}equals(e){return !!e&&"NamedNode"===e.termType&&e.value===this.value;}};},function(e,t,r){var n=r(31).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,a){if("function"==typeof r)return e(t,null,r);r||(r={}),a=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i];}e.apply(this,n);}};}(a||i);var s=r.readable||!1!==r.readable&&t.readable,o=r.writable||!1!==r.writable&&t.writable,u=function u(){t.writable||l();},c=t._writableState&&t._writableState.finished,l=function l(){o=!1,c=!0,s||a.call(t);},h=t._readableState&&t._readableState.endEmitted,d=function d(){s=!1,h=!0,o||a.call(t);},p=function p(e){a.call(t,e);},f=function f(){var e;return s&&!h?(t._readableState&&t._readableState.ended||(e=new n()),a.call(t,e)):o&&!c?(t._writableState&&t._writableState.ended||(e=new n()),a.call(t,e)):void 0;},g=function g(){t.req.on("finish",l);};return !function(e){return e.setHeader&&"function"==typeof e.abort;}(t)?o&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",f),t.req?g():t.on("request",g)),t.on("end",d),t.on("finish",l),!1!==r.error&&t.on("error",p),t.on("close",f),function(){t.removeListener("complete",l),t.removeListener("abort",f),t.removeListener("request",g),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",d),t.removeListener("error",p),t.removeListener("close",f);};};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(52),i=r(53);class a{static flatten(e){return Array.prototype.concat(...e).filter(e=>e);}static inScopeVariables(e){var t=[];function r(e){t.find(t=>e.value===t.value)||t.push(e);}function i(e){"Variable"===e.subject.termType&&r(e.subject),"Variable"===e.predicate.termType&&r(e.predicate),"Variable"===e.object.termType&&r(e.object),"Variable"===e.graph.termType&&r(e.graph),"Quad"===e.subject.termType&&i(e.subject),"Quad"===e.predicate.termType&&i(e.predicate),"Quad"===e.object.termType&&i(e.object),"Quad"===e.graph.termType&&i(e.graph);}return a.recurseOperation(e,{[n.types.EXPRESSION]:e=>{var t=e;if("aggregate"===t.expressionType&&t.variable){r(t.variable);}return !0;},[n.types.EXTEND]:e=>(r(e.variable),!0),[n.types.GRAPH]:e=>{var t=e;return "Variable"===t.name.termType&&r(t.name),!0;},[n.types.GROUP]:e=>(e.variables.forEach(r),!0),[n.types.PATH]:e=>{var t=e;return "Variable"===t.subject.termType&&r(t.subject),"Variable"===t.object.termType&&r(t.object),"Variable"===t.graph.termType&&r(t.graph),"Quad"===t.subject.termType&&i(t.subject),"Quad"===t.object.termType&&i(t.object),"Quad"===t.graph.termType&&i(t.graph),!0;},[n.types.PATTERN]:e=>(i(e),!0),[n.types.PROJECT]:e=>(e.variables.forEach(r),!1),[n.types.SERVICE]:e=>{var t=e;return "Variable"===t.name.termType&&r(t.name),!0;},[n.types.VALUES]:e=>(e.variables.forEach(r),!0)}),t;}static recurseOperation(e,t){var r=e,i=!0;if(t[e.type]&&(i=t[e.type](e)),!i)return;var s=e=>a.recurseOperation(e,t);switch(r.type){case n.types.ALT:var _e20=r;s(_e20.left),s(_e20.right);break;case n.types.ASK:s(r.input);break;case n.types.BGP:r.patterns.forEach(s);break;case n.types.CONSTRUCT:var _t31=r;s(_t31.input),_t31.template.map(s);break;case n.types.DESCRIBE:s(r.input);break;case n.types.DISTINCT:s(r.input);break;case n.types.EXPRESSION:var _i9=r;if(_i9.expressionType===n.expressionTypes.EXISTENCE){s(_i9.input);}break;case n.types.EXTEND:var _a12=r;s(_a12.input),s(_a12.expression);break;case n.types.FILTER:var o=r;s(o.input),s(o.expression);break;case n.types.FROM:s(r.input);break;case n.types.GRAPH:s(r.input);break;case n.types.GROUP:var u=r;s(u.input),u.aggregates.forEach(s);break;case n.types.INV:s(r.path);break;case n.types.JOIN:var c=r;s(c.left),s(c.right);break;case n.types.LEFT_JOIN:var l=r;s(l.left),s(l.right),l.expression&&s(l.expression);break;case n.types.LINK:break;case n.types.MINUS:var h=r;s(h.left),s(h.right);break;case n.types.NPS:break;case n.types.ONE_OR_MORE_PATH:s(r.path);break;case n.types.ORDER_BY:var d=r;s(d.input),d.expressions.forEach(s);break;case n.types.PATH:s(r.predicate);break;case n.types.PATTERN:break;case n.types.PROJECT:s(r.input);break;case n.types.REDUCED:s(r.input);break;case n.types.SEQ:var p=r;s(p.left),s(p.right);break;case n.types.SERVICE:s(r.input);break;case n.types.SLICE:s(r.input);break;case n.types.UNION:var f=r;s(f.left),s(f.right);break;case n.types.VALUES:break;case n.types.ZERO_OR_MORE_PATH:s(r.path);break;case n.types.ZERO_OR_ONE_PATH:s(r.path);break;case n.types.COMPOSITE_UPDATE:r.updates.forEach(e=>s(e));break;case n.types.DELETE_INSERT:var g=r;g.delete&&g.delete.forEach(e=>s(e)),g.insert&&g.insert.forEach(e=>s(e)),g.where&&s(g.where);break;case n.types.LOAD:case n.types.CLEAR:case n.types.CREATE:case n.types.DROP:case n.types.ADD:case n.types.MOVE:case n.types.COPY:break;default:throw new Error("Unknown Operation type "+r.type);}}static mapOperation(e,t,r){var s=e,o=!0;if(r=r||new i.default(),t[e.type]&&({result:s,recurse:o}=t[e.type](e,r)),!o)return s;var u=e=>a.mapOperation(e,t,r);switch(s.type){case n.types.ALT:var _e21=s;return r.createAlt(u(_e21.left),u(_e21.right));case n.types.ASK:var _i10=s;return r.createAsk(u(_i10.input));case n.types.BGP:var _o4=s;return r.createBgp(_o4.patterns.map(u));case n.types.CONSTRUCT:var c=s;return r.createConstruct(u(c.input),c.template.map(u));case n.types.DESCRIBE:var l=s;return r.createDescribe(u(l.input),l.terms);case n.types.DISTINCT:var h=s;return r.createDistinct(u(h.input));case n.types.EXPRESSION:var d=s;return a.mapExpression(d,t,r);case n.types.EXTEND:var p=s;return r.createExtend(u(p.input),p.variable,u(p.expression));case n.types.FILTER:var f=s;return r.createFilter(u(f.input),u(f.expression));case n.types.FROM:var g=s;return r.createFrom(u(g.input),[].concat(g.default),[].concat(g.named));case n.types.GRAPH:var m=s;return r.createGraph(u(m.input),m.name);case n.types.GROUP:var y=s;return r.createGroup(u(y.input),[].concat(y.variables),y.aggregates.map(u));case n.types.INV:var b=s;return r.createInv(u(b.path));case n.types.JOIN:var _=s;return r.createJoin(u(_.left),u(_.right));case n.types.LEFT_JOIN:var v=s;return r.createLeftJoin(u(v.left),u(v.right),v.expression?u(v.expression):void 0);case n.types.LINK:var w=s;return r.createLink(w.iri);case n.types.MINUS:var S=s;return r.createMinus(u(S.left),u(S.right));case n.types.NPS:var T=s;return r.createNps([].concat(T.iris));case n.types.ONE_OR_MORE_PATH:var E=s;return r.createOneOrMorePath(u(E.path));case n.types.ORDER_BY:var x=s;return r.createOrderBy(u(x.input),x.expressions.map(u));case n.types.PATH:var O=s;return r.createPath(O.subject,u(O.predicate),O.object,O.graph);case n.types.PATTERN:var A=s;return r.createPattern(A.subject,A.predicate,A.object,A.graph);case n.types.PROJECT:var R=s;return r.createProject(u(R.input),[].concat(R.variables));case n.types.REDUCED:var I=s;return r.createReduced(u(I.input));case n.types.SEQ:var N=s;return r.createSeq(u(N.left),u(N.right));case n.types.SERVICE:var P=s;return r.createService(u(P.input),P.name,P.silent);case n.types.SLICE:var C=s;return r.createSlice(u(C.input),C.start,C.length);case n.types.UNION:var D=s;return r.createUnion(u(D.left),u(D.right));case n.types.VALUES:var j=s;return r.createValues([].concat(j.variables),j.bindings.map(e=>Object.assign({},e)));case n.types.ZERO_OR_MORE_PATH:var k=s;return r.createZeroOrMorePath(u(k.path));case n.types.ZERO_OR_ONE_PATH:var L=s;return r.createZeroOrOnePath(u(L.path));case n.types.COMPOSITE_UPDATE:var M=s;return r.createCompositeUpdate(M.updates.map(u));case n.types.DELETE_INSERT:var F=s;return r.createDeleteInsert(F.delete?F.delete.map(u):void 0,F.insert?F.insert.map(u):void 0,F.where?u(F.where):void 0);case n.types.LOAD:var B=s;return r.createLoad(B.source,B.destination,B.silent);case n.types.CLEAR:var q=s;return r.createClear(q.source,q.silent);case n.types.CREATE:var U=s;return r.createCreate(U.source,U.silent);case n.types.DROP:var V=s;return r.createDrop(V.source,V.silent);case n.types.ADD:var H=s;return r.createAdd(H.source,H.destination);case n.types.MOVE:var G=s;return r.createMove(G.source,G.destination);case n.types.COPY:var z=s;return r.createCopy(z.source,z.destination);default:throw new Error("Unknown Operation type "+s);}}static mapExpression(e,t,r){var i=e=>a.mapOperation(e,t,r);switch(e.expressionType){case n.expressionTypes.AGGREGATE:if(e.variable){var _t33=e;return r.createBoundAggregate(_t33.variable,_t33.aggregator,i(_t33.expression),_t33.distinct,_t33.separator);}var _t32=e;return r.createAggregateExpression(_t32.aggregator,i(_t32.expression),_t32.distinct,_t32.separator);case n.expressionTypes.EXISTENCE:var _a13=e;return r.createExistenceExpression(_a13.not,i(_a13.input));case n.expressionTypes.NAMED:var s=e;return r.createNamedExpression(s.name,s.args.map(i));case n.expressionTypes.OPERATOR:var o=e;return r.createOperatorExpression(o.operator,o.args.map(i));case n.expressionTypes.TERM:var u=e;return r.createTermExpression(u.term);case n.expressionTypes.WILDCARD:return r.createWildcardExpression();default:throw new Error("Unknown Expression type "+e.expressionType);}}static createUniqueVariable(e,t,r){var n=0,i=e;for(;t[i];){i=e+n++;}return r.variable(i);}static isTerm(e){return void 0!==e.termType&&"Quad"!==e.termType&&"Wildcard"!==e.termType;}static isWildcard(e){return "Wildcard"===e.termType;}}t.default=a;},function(e,t,r){(t=e.exports=r(115)).Stream=t,t.Readable=t,t.Writable=r(73),t.Duplex=r(25),t.Transform=r(118),t.PassThrough=r(223);},function(e,t,r){var n=r(11),i=n.Buffer;function a(e,t){for(var r in e){t[r]=e[r];}}function s(e,t,r){return i(e,t,r);}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=s),a(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r);},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n;},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e);},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e);};},function(e,t,r){(function(t,n,i){var a=r(54);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next;}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e;}(t,e);};}e.exports=b;var o,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:a.nextTick;b.WritableState=y;var c=Object.create(r(43));c.inherits=r(12);var l={deprecate:r(109)},h=r(116),d=r(72).Buffer,p=i.Uint8Array||function(){};var f,g=r(117);function m(){}function y(e,t){o=o||r(25),e=e||{};var n=t instanceof o;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,c=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===e.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0;}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(a.nextTick(i,n),a.nextTick(E,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),E(e,t));}(e,r,n,t,i);else {var s=S(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||w(e,r),n?u(v,e,r,s,i):v(e,r,s,i);}}(t,e);},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this);}function b(e){if(o=o||r(25),!(f.call(b,this)||this instanceof o))return new b(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),h.call(this);}function _(e,t,r,n,i,a,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1;}function v(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));}(e,t),t.pendingcb--,n(),E(e,t);}function w(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var o=0,u=!0;r;){i[o]=r,r.isBuf||(u=!1),r=r.next,o+=1;}i.allBuffers=u,_(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0;}else {for(;r;){var c=r.chunk,l=r.encoding,h=r.callback;if(_(e,t,!1,t.objectMode?1:c.length,c,l,h),r=r.next,t.bufferedRequestCount--,t.writing)break;}null===r&&(t.lastBufferedRequest=null);}t.bufferedRequest=r,t.bufferProcessing=!1;}function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing;}function T(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),E(e,t);});}function E(e,t){var r=S(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(T,e,t)):(t.prefinished=!0,e.emit("prefinish")));}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r;}c.inherits(b,h),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;){t.push(e),e=e.next;}return t;},function(){try{Object.defineProperty(y.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer();},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")});}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function value(e){return !!f.call(this,e)||this===b&&e&&e._writableState instanceof y;}})):f=function f(e){return e instanceof this;},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"));},b.prototype.write=function(e,t,r){var n,i=this._writableState,s=!1,o=!i.objectMode&&(n=e,d.isBuffer(n)||n instanceof p);return o&&!d.isBuffer(e)&&(e=function(e){return d.from(e);}(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=m),i.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),a.nextTick(t,r);}(this,r):(o||function(e,t,r,n){var i=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),a.nextTick(n,s),i=!1),i;}(this,i,e,r))&&(i.pendingcb++,s=function(e,t,r,n,i,a){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,r));return t;}(t,n,i);n!==s&&(r=!0,i="buffer",n=s);}var o=t.objectMode?1:n.length;t.length+=o;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1;}else _(e,t,!1,o,n,i,a);return u;}(this,i,o,e,t,r)),s;},b.prototype.cork=function(){this._writableState.corked++;},b.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e));},b.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this;},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark;}}),b.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"));},b.prototype._writev=null,b.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,E(e,t),r&&(t.finished?a.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1;}(this,n,r);},Object.defineProperty(b.prototype,"destroyed",{get:function get(){return void 0!==this._writableState&&this._writableState.destroyed;},set:function set(e){this._writableState&&(this._writableState.destroyed=e);}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(e,t){this.end(),t(e);};}).call(this,r(8),r(44).setImmediate,r(10));},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(238),t),i(r(122),t);},function(e,t,r){(function(e){var n=r(123),i=r(239),a=e.from&&e.from!==Uint8Array.from;function s(e,t){return "string"==typeof e?t==e:e&&"function"==typeof e.exec?e.exec(t):"boolean"==typeof e||"object"==typeof e?e:"function"==typeof e&&e(t);}t.parse=function(t,r){var o,u,c=new n(),l=i(function(t){"string"==typeof t&&(t=a?e.from(t):new e(t)),c.write(t);},function(e){e&&l.write(e),o&&l.emit("header",o),u&&l.emit("footer",u),l.queue(null);});"string"==typeof t&&(t=t.split(".").map(function(e){return "$*"===e?{emitKey:!0}:"*"===e||(""===e?{recurse:!0}:e);}));return t&&t.length||(t=null),c.onValue=function(e){if(this.root||(l.root=e),t){for(var n=0,i=0,a=!1,u=!1;n<t.length;){var c,d=t[n];if(i++,d&&!d.recurse){if(!(c=i===this.stack.length?this:this.stack[i]))return;if(!s(d,c.key))return void h(c.key,e);a=!!d.emitKey,u=!!d.emitPath,n++;}else {n++;var p=t[n];if(!p)return;for(;;){if(!(c=i===this.stack.length?this:this.stack[i]))return;if(s(p,c.key)){n++,Object.isFrozen(this.stack[i])||(this.stack[i].value=null);break;}h(c.key,e),i++;}}}if(o&&(l.emit("header",o),o=!1),i===this.stack.length){var f=this.stack.slice(1).map(function(e){return e.key;}).concat([this.key]),g=e;for(var m in null!=g&&null!=(g=r?r(g,f):g)&&((a||u)&&(g={value:g},a&&(g.key=this.key),u&&(g.path=f)),l.queue(g)),this.value&&delete this.value[this.key],this.stack){Object.isFrozen(this.stack[m])||(this.stack[m].value=null);}}}},c._onToken=c.onToken,c.onToken=function(e,r){c._onToken(e,r),0===this.stack.length&&l.root&&(t||l.queue(l.root),l.root=null);},c.onError=function(e){e.message.indexOf("at position")>-1&&(e.message="Invalid JSON ("+e.message+")"),l.emit("error",e);},l;function h(e,t){!1!==o&&((o=o||{})[e]=t),!1!==u&&!1===o&&((u=u||{})[e]=t);}},t.stringify=function(e,t,r,n){n=n||0,!1===e?(e="",t="\n",r=""):null==e&&(e="[\n",t="\n,\n",r="\n]\n");var a,s=!0,o=!1;return a=i(function(r){o=!0;try{var i=JSON.stringify(r,null,n);}catch(e){return a.emit("error",e);}s?(s=!1,a.queue(e+i)):a.queue(t+i);},function(t){o||a.queue(e),a.queue(r),a.queue(null);});},t.stringifyObject=function(e,t,r,n){n=n||0,!1===e?(e="",t="\n",r=""):null==e&&(e="{\n",t="\n,\n",r="\n}\n");var a=!0,s=!1;return i(function(r){s=!0;var i=JSON.stringify(r[0])+":"+JSON.stringify(r[1],null,n);a?(a=!1,this.queue(e+i)):this.queue(t+i);},function(t){s||this.queue(e),this.queue(r),this.queue(null);});};}).call(this,r(11).Buffer);},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(243),t);},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e};};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(289));t.default=function(e){if(e>=55296&&e<=57343||e>1114111)return "�";e in i.default&&(e=i.default[e]);var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e);};},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Acirc":"Â","acirc":"â","acute":"´","AElig":"Æ","aelig":"æ","Agrave":"À","agrave":"à","amp":"&","AMP":"&","Aring":"Å","aring":"å","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","brvbar":"¦","Ccedil":"Ç","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","COPY":"©","curren":"¤","deg":"°","divide":"÷","Eacute":"É","eacute":"é","Ecirc":"Ê","ecirc":"ê","Egrave":"È","egrave":"è","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","GT":">","Iacute":"Í","iacute":"í","Icirc":"Î","icirc":"î","iexcl":"¡","Igrave":"Ì","igrave":"ì","iquest":"¿","Iuml":"Ï","iuml":"ï","laquo":"«","lt":"<","LT":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","Ntilde":"Ñ","ntilde":"ñ","Oacute":"Ó","oacute":"ó","Ocirc":"Ô","ocirc":"ô","Ograve":"Ò","ograve":"ò","ordf":"ª","ordm":"º","Oslash":"Ø","oslash":"ø","Otilde":"Õ","otilde":"õ","Ouml":"Ö","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","QUOT":"\\"","raquo":"»","reg":"®","REG":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","THORN":"Þ","thorn":"þ","times":"×","Uacute":"Ú","uacute":"ú","Ucirc":"Û","ucirc":"û","Ugrave":"Ù","ugrave":"ù","uml":"¨","Uuml":"Ü","uuml":"ü","Yacute":"Ý","yacute":"ý","yen":"¥","yuml":"ÿ"}');},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.RDFA_CONTENTTYPES=t.RDFA_FEATURES=void 0,t.RDFA_FEATURES={"":{baseTag:!0,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},core:{baseTag:!1,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!1,datetimeAttribute:!1,timeTag:!1,htmlDatatype:!1,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!1},html:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0},xhtml:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},xml:{baseTag:!1,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!1,inheritSubjectInHeadBody:!1,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!1,copyRdfaPatterns:!1,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0}},t.RDFA_CONTENTTYPES={"text/html":"html","application/xhtml+xml":"xhtml","application/xml":"xml","text/xml":"xml","image/svg+xml":"xml"};},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e};};Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var i=n(r(140)),a=new Set(["input","option","optgroup","select","button","datalist","textarea"]),s=new Set(["p"]),o={tr:new Set(["tr","th","td"]),th:new Set(["th"]),td:new Set(["thead","th","td"]),body:new Set(["head","link","script"]),li:new Set(["li"]),p:s,h1:s,h2:s,h3:s,h4:s,h5:s,h6:s,select:a,input:a,output:a,button:a,datalist:a,textarea:a,option:new Set(["option"]),optgroup:new Set(["optgroup","option"]),dd:new Set(["dt","dd"]),dt:new Set(["dt","dd"]),address:s,article:s,aside:s,blockquote:s,details:s,div:s,dl:s,fieldset:s,figcaption:s,figure:s,footer:s,form:s,header:s,hr:s,main:s,nav:s,ol:s,pre:s,section:s,table:s,ul:s,rt:new Set(["rt","rp"]),rp:new Set(["rt","rp"]),tbody:new Set(["thead","tbody"]),tfoot:new Set(["thead","tbody"])},u=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),c=new Set(["math","svg"]),l=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),h=/\s|\//,d=function(){function e(e,t){var r,n,a,s,o;void 0===t&&(t={}),this.startIndex=0,this.endIndex=null,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.options=t,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(r=t.lowerCaseTags)&&void 0!==r?r:!t.xmlMode,this.lowerCaseAttributeNames=null!==(n=t.lowerCaseAttributeNames)&&void 0!==n?n:!t.xmlMode,this.tokenizer=new(null!==(a=t.Tokenizer)&&void 0!==a?a:i.default)(this.options,this),null===(o=(s=this.cbs).onparserinit)||void 0===o||o.call(s,this);}return e.prototype.updatePosition=function(e){null===this.endIndex?this.tokenizer.sectionStart<=e?this.startIndex=0:this.startIndex=this.tokenizer.sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this.tokenizer.getAbsoluteIndex();},e.prototype.ontext=function(e){var t,r;this.updatePosition(1),this.endIndex--,null===(r=(t=this.cbs).ontext)||void 0===r||r.call(t,e);},e.prototype.onopentagname=function(e){var t,r;if(this.lowerCaseTagNames&&(e=e.toLowerCase()),this.tagname=e,!this.options.xmlMode&&Object.prototype.hasOwnProperty.call(o,e))for(var n=void 0;this.stack.length>0&&o[e].has(n=this.stack[this.stack.length-1]);){this.onclosetag(n);}!this.options.xmlMode&&u.has(e)||(this.stack.push(e),c.has(e)?this.foreignContext.push(!0):l.has(e)&&this.foreignContext.push(!1)),null===(r=(t=this.cbs).onopentagname)||void 0===r||r.call(t,e),this.cbs.onopentag&&(this.attribs={});},e.prototype.onopentagend=function(){var e,t;this.updatePosition(1),this.attribs&&(null===(t=(e=this.cbs).onopentag)||void 0===t||t.call(e,this.tagname,this.attribs),this.attribs=null),!this.options.xmlMode&&this.cbs.onclosetag&&u.has(this.tagname)&&this.cbs.onclosetag(this.tagname),this.tagname="";},e.prototype.onclosetag=function(e){if(this.updatePosition(1),this.lowerCaseTagNames&&(e=e.toLowerCase()),(c.has(e)||l.has(e))&&this.foreignContext.pop(),!this.stack.length||!this.options.xmlMode&&u.has(e))this.options.xmlMode||"br"!==e&&"p"!==e||(this.onopentagname(e),this.closeCurrentTag());else {var t=this.stack.lastIndexOf(e);if(-1!==t){if(this.cbs.onclosetag)for(t=this.stack.length-t;t--;){this.cbs.onclosetag(this.stack.pop());}else this.stack.length=t;}else "p"!==e||this.options.xmlMode||(this.onopentagname(e),this.closeCurrentTag());}},e.prototype.onselfclosingtag=function(){this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?this.closeCurrentTag():this.onopentagend();},e.prototype.closeCurrentTag=function(){var e,t,r=this.tagname;this.onopentagend(),this.stack[this.stack.length-1]===r&&(null===(t=(e=this.cbs).onclosetag)||void 0===t||t.call(e,r),this.stack.pop());},e.prototype.onattribname=function(e){this.lowerCaseAttributeNames&&(e=e.toLowerCase()),this.attribname=e;},e.prototype.onattribdata=function(e){this.attribvalue+=e;},e.prototype.onattribend=function(e){var t,r;null===(r=(t=this.cbs).onattribute)||void 0===r||r.call(t,this.attribname,this.attribvalue,e),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribname="",this.attribvalue="";},e.prototype.getInstructionName=function(e){var t=e.search(h),r=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(r=r.toLowerCase()),r;},e.prototype.ondeclaration=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("!"+t,"!"+e);}},e.prototype.onprocessinginstruction=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("?"+t,"?"+e);}},e.prototype.oncomment=function(e){var t,r,n,i;this.updatePosition(4),null===(r=(t=this.cbs).oncomment)||void 0===r||r.call(t,e),null===(i=(n=this.cbs).oncommentend)||void 0===i||i.call(n);},e.prototype.oncdata=function(e){var t,r,n,i,a,s;this.updatePosition(1),this.options.xmlMode||this.options.recognizeCDATA?(null===(r=(t=this.cbs).oncdatastart)||void 0===r||r.call(t),null===(i=(n=this.cbs).ontext)||void 0===i||i.call(n,e),null===(s=(a=this.cbs).oncdataend)||void 0===s||s.call(a)):this.oncomment("[CDATA["+e+"]]");},e.prototype.onerror=function(e){var t,r;null===(r=(t=this.cbs).onerror)||void 0===r||r.call(t,e);},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag)for(var r=this.stack.length;r>0;this.cbs.onclosetag(this.stack[--r])){}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e);},e.prototype.reset=function(){var e,t,r,n;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack=[],null===(n=(r=this.cbs).onparserinit)||void 0===n||n.call(r,this);},e.prototype.parseComplete=function(e){this.reset(),this.end(e);},e.prototype.write=function(e){this.tokenizer.write(e);},e.prototype.end=function(e){this.tokenizer.end(e);},e.prototype.pause=function(){this.tokenizer.pause();},e.prototype.resume=function(){this.tokenizer.resume();},e.prototype.parseChunk=function(e){this.write(e);},e.prototype.done=function(e){this.end(e);},e;}();t.Parser=d;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(308),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.RDFA_CONTENTTYPES=t.RDFA_FEATURES=void 0,t.RDFA_FEATURES={"":{baseTag:!0,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},core:{baseTag:!1,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!1,datetimeAttribute:!1,timeTag:!1,htmlDatatype:!1,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!1},html:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0},xhtml:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},xml:{baseTag:!1,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!1,inheritSubjectInHeadBody:!1,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!1,copyRdfaPatterns:!1,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0}},t.RDFA_CONTENTTYPES={"text/html":"html","application/xhtml+xml":"xhtml","application/xml":"xml","text/xml":"xml","image/svg+xml":"xml"};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;class n{static isCompactIri(e){return e.indexOf(":")>0&&!(e&&"#"===e[0]);}static getPrefix(e,t){if(e&&"#"===e[0])return null;var r=e.indexOf(":");if(r>=0){if(e.length>r+1&&"/"===e.charAt(r+1)&&"/"===e.charAt(r+2))return null;var _n17=e.substr(0,r);if("_"===_n17)return null;if(t[_n17])return _n17;}return null;}static getContextValueId(e){if(null===e||"string"==typeof e)return e;var t=e["@id"];return t||null;}static isSimpleTermDefinitionPrefix(e,t){return !n.isPotentialKeyword(e)&&("_"===e[0]||t.allowPrefixNonGenDelims||n.isPrefixIriEndingWithGenDelim(e));}static isPotentialKeyword(e){return "string"==typeof e&&n.KEYWORD_REGEX.test(e);}static isPrefixIriEndingWithGenDelim(e){return n.ENDS_WITH_GEN_DELIM.test(e);}static isPrefixValue(e){return e&&("string"==typeof e||e&&"object"==typeof e);}static isValidIri(e){return n.IRI_REGEX.test(e);}static isValidIriWeak(e){return !!e&&":"!==e[0]&&n.IRI_REGEX_WEAK.test(e);}static isValidKeyword(e){return n.VALID_KEYWORDS[e];}static isTermProtected(e,t){var r=e[t];return !("string"==typeof r)&&r&&r["@protected"];}static hasProtectedTerms(e){for(var _t34 of Object.keys(e)){if(n.isTermProtected(e,_t34))return !0;}return !1;}static isReservedInternalKeyword(e){return e.startsWith("@__");}}t.Util=n,n.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,n.IRI_REGEX_WEAK=/(?::[^:])|\//,n.KEYWORD_REGEX=/^@[a-z]+$/i,n.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,n.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,n.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,n.VALID_KEYWORDS={"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},n.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],n.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],n.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],n.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],n.CONTAINERS_1_0=["@list","@set","@index"];},function(e,t,r){e.exports=function(e){return function e(t){if(null===t||"object"!=typeof t||null!=t.toJSON)return JSON.stringify(t);if(Array.isArray(t)&&0===t.length)return "[]";if(Array.isArray(t)&&1===t.length)return "["+e(t[0])+"]";if(Array.isArray(t))return "["+t.reduce((t,r,n)=>(t=1===n?e(t):t)+","+e(r))+"]";var r=Object.keys(t);if(0===r.length)return "{}";if(1===r.length)return "{"+e(r[0])+":"+e(t[r[0]])+"}";return "{"+r.sort().reduce((r,n,i)=>(r=1===i?e(r)+":"+e(t[r]):r)+","+e(n)+":"+e(t[n]))+"}";}(e);};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(158),t),i(r(345),t),i(r(164),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerDefinitionAdapter=void 0;var n=r(62);class i extends n.NodeHandlerAdapter{constructor(e,t,r){super(e,t,r);}}t.NodeHandlerDefinitionAdapter=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(380),t);},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(515),t),i(r(516),t);},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),t.namedFunctions=t.specialFunctions=t.regularFunctions=void 0;var a=r(90),s=r(533),o=r(534),u=r(538);i(r(90),t),t.regularFunctions=o.definitions.map((e,t)=>new a.RegularFunction(t,e)).toMap(),t.specialFunctions=u.specialDefinitions.map((e,t)=>new a.SpecialFunction(t,e)).toMap(),t.namedFunctions=s.namedDefinitions.map((e,t)=>new a.NamedFunction(t,e)).toMap();},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.promote=t.SpecialFunction=t.NamedFunction=t.RegularFunction=t.BaseFunction=void 0;var n=r(23),i=r(20);class a{constructor(e,t){this.operator=e,this.apply=e=>(this.monomorph(e)||this.handleInvalidTypes(e))(e),this.arity=t.arity,this.overloads=t.overloads;}monomorph(e){return this.overloads.get(s.asConcreteTypes(e))||this.overloads.get(s.asTermTypes(e))||this.overloads.get(s.asGenericTerms(e));}}t.BaseFunction=a;class s{static asConcreteTypes(e){return n.List(e.map(e=>e.type||e.termType));}static asTermTypes(e){return n.List(e.map(e=>e.termType));}static asGenericTerms(e){return n.List(Array(e.length).fill("term"));}}t.RegularFunction=class extends a{constructor(e,t){super(e,t),this.functionClass="regular";}handleInvalidTypes(e){throw new i.InvalidArgumentTypes(e,this.operator);}};t.NamedFunction=class extends a{constructor(e,t){super(e,t),this.functionClass="named";}handleInvalidTypes(e){throw new i.InvalidArgumentTypes(e,this.operator);}};t.SpecialFunction=class{constructor(e,t){var r;this.operator=e,this.functionClass="special",this.arity=t.arity,this.applySync=t.applySync,this.applyAsync=t.applyAsync,this.checkArity=t.checkArity||(r=this.arity,e=>r===1/0||(Array.isArray(r)?r.indexOf(e.length)>=0:e.length===r));}};var o={integer:{integer:"integer",decimal:"decimal",float:"float",double:"double"},decimal:{integer:"decimal",decimal:"decimal",float:"float",double:"double"},float:{integer:"float",decimal:"float",float:"float",double:"double"},double:{integer:"double",decimal:"double",float:"double",double:"double"}};t.promote=function(e,t){return o[e][t];};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateQuery=t.newEngine=t.bindingsStreamToGraphQl=void 0,i(r(191),t);var a=r(113);function s(){return r(240);}Object.defineProperty(t,"bindingsStreamToGraphQl",{enumerable:!0,get:function get(){return a.bindingsStreamToGraphQl;}}),t.newEngine=s,t.evaluateQuery=function(e,t){return s().query(e,t);};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Bus=void 0;t.Bus=class{constructor(e){this.actors=[],this.observers=[],this.dependencyLinks=new Map(),Object.assign(this,e);}subscribe(e){this.actors.push(e),this.reorderForDependencies();}subscribeObserver(e){this.observers.push(e);}unsubscribe(e){var t=this.actors.indexOf(e);return t>=0&&(this.actors.splice(t,1),!0);}unsubscribeObserver(e){var t=this.observers.indexOf(e);return t>=0&&(this.observers.splice(t,1),!0);}publish(e){return this.actors.map(t=>({actor:t,reply:t.test(e)}));}onRun(e,t,r){for(var n of this.observers){n.onRun(e,t,r);}}addDependencies(e,t){for(var _r34 of t){var _t35=this.dependencyLinks.get(_r34);_t35||(_t35=[],this.dependencyLinks.set(_r34,_t35)),_t35.push(e);}this.reorderForDependencies();}reorderForDependencies(){if(this.dependencyLinks.size>0){var _e22=[];for(var _t36 of this.dependencyLinks.keys()){var _r35=this.actors.indexOf(_t36);_r35>=0&&(this.actors.splice(_r35,1),_e22.push(_t36));}for(;_e22.length>0;){var _t37=-1;for(var _r37=0;_r37<_e22.length;_r37++){var n=!0;for(var _t38 of this.dependencyLinks.get(_e22[_r37])){if(!this.actors.includes(_t38)&&_e22.includes(_t38)){n=!1;break;}}if(n){_t37=_r37;break;}}if(_t37<0)throw new Error("Cyclic dependency links detected in bus "+this.name);var _r36=_e22.splice(_t37,1)[0];this.actors.push(_r36);}}}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_CONTEXT_LOG=t.Logger=void 0;class n{static getLevelOrdinal(e){return n.LEVELS[e];}}t.Logger=n,n.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},t.KEY_CONTEXT_LOG="@comunica/core:log";},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.getMetadata=t.ActorQueryOperation=t.KEY_CONTEXT_QUERY_TIMESTAMP=t.KEY_CONTEXT_BASEIRI=t.KEY_CONTEXT_PATTERN_PARENTMETADATA=t.KEY_CONTEXT_BGP_PATTERNBINDINGS=t.KEY_CONTEXT_BGP_PARENTMETADATA=t.KEY_CONTEXT_BGP_CURRENTMETADATA=void 0;var n=r(0),i=r(95);t.KEY_CONTEXT_BGP_CURRENTMETADATA="@comunica/bus-query-operation:bgpCurrentMetadata",t.KEY_CONTEXT_BGP_PARENTMETADATA="@comunica/bus-query-operation:bgpParentMetadata",t.KEY_CONTEXT_BGP_PATTERNBINDINGS="@comunica/bus-query-operation:bgpPatternBindings",t.KEY_CONTEXT_PATTERN_PARENTMETADATA="@comunica/bus-query-operation:patternParentMetadata",t.KEY_CONTEXT_BASEIRI="@comunica/actor-init-sparql:baseIRI",t.KEY_CONTEXT_QUERY_TIMESTAMP="@comunica/actor-init-sparql:queryTimestamp";class a extends n.Actor{constructor(e){super(e);}static getSafeBindings(e){return a.validateQueryOutput(e,"bindings"),e;}static getSafeQuads(e){return a.validateQueryOutput(e,"quads"),e;}static getSafeBoolean(e){return a.validateQueryOutput(e,"boolean"),e;}static cachifyMetadata(e){var t;return e&&(()=>t||(t=e()));}static validateQueryOutput(e,t){if(e.type!==t)throw new Error("Invalid query output type: Expected '"+t+"' but got '"+e.type+"'");}static getExpressionContext(e,r){if(e){var _n18=e.get(t.KEY_CONTEXT_QUERY_TIMESTAMP),_i11=e.get(t.KEY_CONTEXT_BASEIRI);return Object.assign({now:_n18,baseIRI:_i11},r?{exists:a.createExistenceResolver(e,r)}:{});}return {};}static createExistenceResolver(e,t){return/*#__PURE__*/function(){var _ref31=_asyncToGenerator(function*(r,n){var s=i.materializeOperation(r.input,n),o=yield t.mediate({operation:s,context:e}),u=a.getSafeBindings(o);return new Promise((e,t)=>{u.bindingsStream.on("end",()=>{e(!1);}),u.bindingsStream.on("error",t),u.bindingsStream.on("data",()=>{u.bindingsStream.close(),e(!0);});}).then(e=>r.not?!e:e);});return function(_x,_x2){return _ref31.apply(this,arguments);};}();}}t.ActorQueryOperation=a,t.getMetadata=function(e){return e.metadata?e.metadata():Promise.resolve({});};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.materializeOperation=t.materializeTerm=t.ensureBindings=t.isBindings=t.Bindings=void 0;var n=r(23),i=r(4),a=r(6);function s(e){return n.Map(e);}function o(e){return n.Map.isMap(e);}function u(e,t){if("Variable"===e.termType){var _r38=t.get(i.termToString(e));if(_r38)return _r38;}return e;}t.Bindings=s,t.isBindings=o,t.ensureBindings=function(e){return o(e)?e:s(e);},t.materializeTerm=u,t.materializeOperation=function e(t,r,n){if(n===void 0){n=!1;}return a.Util.mapOperation(t,{path:(e,t)=>({recurse:!1,result:t.createPath(u(e.subject,r),e.predicate,u(e.object,r),u(e.graph,r))}),pattern:(e,t)=>({recurse:!1,result:t.createPattern(u(e.subject,r),u(e.predicate,r),u(e.object,r),u(e.graph,r))}),extend(t){if(r.has(i.termToString(t.variable))){if(n)throw new Error("Tried to bind variable "+i.termToString(t.variable)+" in a BIND operator.");return {recurse:!0,result:e(t.input,r,n)};}return {recurse:!0,result:t};},group(e,t){if(n){for(var _t39 of e.variables){if(r.has(i.termToString(_t39)))throw new Error("Tried to bind variable "+i.termToString(_t39)+" in a GROUP BY operator.");}return {recurse:!0,result:e};}var a=e.variables.filter(e=>!r.has(i.termToString(e)));return {recurse:!0,result:t.createGroup(e.input,a,e.aggregates)};},project(e,t){if(n){for(var _t40 of e.variables){if(r.has(i.termToString(_t40)))throw new Error("Tried to bind variable "+i.termToString(_t40)+" in a SELECT operator.");}return {recurse:!0,result:e};}var a=e.variables.filter(e=>!r.has(i.termToString(e)));return {recurse:!0,result:t.createProject(e.input,a)};},values(e,t){if(!n){var _n19=e.variables.filter(e=>!r.has(i.termToString(e))),_a14=e.bindings.map(e=>{var t=Object.assign({},e);return r.forEach((e,r)=>delete t[r]),t;});return {recurse:!0,result:t.createValues(_n19,_a14)};}for(var _t41 of e.variables){if(r.has(i.termToString(_t41)))throw new Error("Tried to bind variable "+i.termToString(_t41)+" in a VALUES operator.");}return {recurse:!1,result:e};},expression(e,t){if("term"===e.expressionType)return {recurse:!1,result:t.createTermExpression(u(e.term,r))};if("aggregate"===e.expressionType&&"variable"in e&&r.has(i.termToString(e.variable))){if(n)throw new Error("Tried to bind "+i.termToString(e.variable)+" in a "+e.aggregator+" aggregate.");return {recurse:!0,result:e};}return {recurse:!0,result:e};}});};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.BlankNode=void 0;t.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e;}equals(e){return !!e&&"BlankNode"===e.termType&&e.value===this.value;}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultGraph=void 0;class n{constructor(){this.termType="DefaultGraph",this.value="";}equals(e){return !!e&&"DefaultGraph"===e.termType;}}t.DefaultGraph=n,n.INSTANCE=new n();},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Literal=void 0;var n=r(68);class i{constructor(e,t){this.termType="Literal",this.value=e,"string"==typeof t?(this.language=t,this.datatype=i.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=i.XSD_STRING);}equals(e){return !!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype);}}t.Literal=i,i.RDF_LANGUAGE_STRING=new n.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),i.XSD_STRING=new n.NamedNode("http://www.w3.org/2001/XMLSchema#string");},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Quad=void 0;t.Quad=class{constructor(e,t,r,n){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=r,this.graph=n;}equals(e){return !!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph);}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Variable=void 0;t.Variable=class{constructor(e){this.termType="Variable",this.value=e;}equals(e){return !!e&&"Variable"===e.termType&&e.value===this.value;}};},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function get(){return e.l;}}),Object.defineProperty(e,"id",{enumerable:!0,get:function get(){return e.i;}}),e.webpackPolyfill=1),e;};},function(e,t,r){var{Term:n}=r(41);class i extends n{constructor(){return super(""),a||this;}equals(e){return e&&this.termType===e.termType;}}Object.defineProperty(i.prototype,"value",{enumerable:!0,value:"*"}),Object.defineProperty(i.prototype,"termType",{enumerable:!0,value:"Wildcard"});var a=new i();e.exports.Wildcard=i;},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return "[object Array]"==r.call(e);};},function(e,t,r){(function(t,n){var i;e.exports=x,x.ReadableState=E;r(22).EventEmitter;var a=function a(e,t){return e.listeners(t).length;},s=r(105),o=r(11).Buffer,u=t.Uint8Array||function(){};var c,l=r(204);c=l&&l.debuglog?l.debuglog("stream"):function(){};var h,d,p,f=r(205),g=r(106),m=r(107).getHighWaterMark,y=r(31).codes,b=y.ERR_INVALID_ARG_TYPE,_=y.ERR_STREAM_PUSH_AFTER_EOF,v=y.ERR_METHOD_NOT_IMPLEMENTED,w=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(12)(x,s);var S=g.errorOrDestroy,T=["error","close","destroy","pause","resume"];function E(e,t,n){i=i||r(32),e=e||{},"boolean"!=typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",n),this.buffer=new f(),this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(h||(h=r(33).StringDecoder),this.decoder=new h(e.encoding),this.encoding=e.encoding);}function x(e){if(i=i||r(32),!(this instanceof x))return new x(e);var t=this instanceof i;this._readableState=new E(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this);}function O(e,t,r,n,i){c("readableAddChunk",t);var a,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length);}t.ended=!0,t.sync?I(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,N(e)));}(e,s);else if(i||(a=function(e,t){var r;n=t,o.isBuffer(n)||n instanceof u||"string"==typeof t||void 0===t||e.objectMode||(r=new b("chunk",["string","Buffer","Uint8Array"],t));var n;return r;}(s,t)),a)S(e,a);else if(s.objectMode||t&&t.length>0){if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e);}(t)),n)s.endEmitted?S(e,new w()):A(e,s,t,!0);else if(s.ended)S(e,new _());else {if(s.destroyed)return !1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?A(e,s,t,!1):P(e,s)):A(e,s,t,!1);}}else n||(s.reading=!1,P(e,s));return !s.ended&&(s.length<s.highWaterMark||0===s.length);}function A(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&I(e)),P(e,t);}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&this._readableState.destroyed;},set:function set(e){this._readableState&&(this._readableState.destroyed=e);}}),x.prototype.destroy=g.destroy,x.prototype._undestroy=g.undestroy,x.prototype._destroy=function(e,t){t(e);},x.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=o.from(e,t),t=""),r=!0),O(this,e,t,!1,r);},x.prototype.unshift=function(e){return O(this,e,null,!0,!1);},x.prototype.isPaused=function(){return !1===this._readableState.flowing;},x.prototype.setEncoding=function(e){h||(h=r(33).StringDecoder);var t=new h(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;){i+=t.write(n.data),n=n.next;}return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this;};function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e;}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));}function I(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(N,e));}function N(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e);}function P(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(C,e,t));}function C(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break;}t.readingMore=!1;}function D(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume();}function j(e){c("readable nexttick read 0"),e.read(0);}function k(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0);}function L(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read();){}}function M(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r;}function F(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(B,t,e));}function B(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy();}}function q(e,t){for(var r=0,n=e.length;r<n;r++){if(e[r]===t)return r;}return -1;}x.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):I(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&F(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(r,t))),null===(n=e>0?M(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&F(this)),null!==n&&this.emit("data",n),n;},x.prototype._read=function(e){S(this,new v("_read()"));},x.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var s=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?u:m;function o(t,n){c("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",f),e.removeListener("finish",g),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",o),r.removeListener("end",u),r.removeListener("end",m),r.removeListener("data",d),h=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l());}function u(){c("onend"),e.end();}i.endEmitted?n.nextTick(s):r.once("end",s),e.on("unpipe",o);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,L(e));};}(r);e.on("drain",l);var h=!1;function d(t){c("ondata");var n=e.write(t);c("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==q(i.pipes,e))&&!h&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause());}function p(t){c("onerror",t),m(),e.removeListener("error",p),0===a(e,"error")&&S(e,t);}function f(){e.removeListener("finish",g),m();}function g(){c("onfinish"),e.removeListener("close",f),m();}function m(){c("unpipe"),r.unpipe(e);}return r.on("data",d),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r);}(e,"error",p),e.once("close",f),e.once("finish",g),e.emit("pipe",r),i.flowing||(c("pipe resume"),r.resume()),e;},x.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++){n[a].emit("unpipe",this,{hasUnpiped:!1});}return this;}var s=q(t.pipes,e);return -1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this;},x.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),i=this._readableState;return "data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?I(this):i.reading||n.nextTick(j,this))),r;},x.prototype.addListener=x.prototype.on,x.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return "readable"===e&&n.nextTick(D,this),r;},x.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return "readable"!==e&&void 0!==e||n.nextTick(D,this),t;},x.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(k,e,t));}(this,e)),e.paused=!1,this;},x.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this;},x.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e);}t.push(null);}),e.on("data",function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()));}),e){void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments);};}(i));}for(var a=0;a<T.length;a++){e.on(T[a],this.emit.bind(this,T[a]));}return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume());},this;},"function"==typeof Symbol&&(x.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=r(208)),d(this);}),Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function get(){return this._readableState.highWaterMark;}}),Object.defineProperty(x.prototype,"readableBuffer",{enumerable:!1,get:function get(){return this._readableState&&this._readableState.buffer;}}),Object.defineProperty(x.prototype,"readableFlowing",{enumerable:!1,get:function get(){return this._readableState.flowing;},set:function set(e){this._readableState&&(this._readableState.flowing=e);}}),x._fromList=M,Object.defineProperty(x.prototype,"readableLength",{enumerable:!1,get:function get(){return this._readableState.length;}}),"function"==typeof Symbol&&(x.from=function(e,t){return void 0===p&&(p=r(209)),p(x,e,t);});}).call(this,r(10),r(8));},function(e,t,r){e.exports=r(22).EventEmitter;},function(e,t,r){(function(t){function r(e,t){i(e,t),n(e);}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close");}function i(e,t){e.emit("error",t);}e.exports={destroy:function destroy(e,a){var s=this,o=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return o||u?(a?a(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(i,this,e)):t.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!a&&e?s._writableState?s._writableState.errorEmitted?t.nextTick(n,s):(s._writableState.errorEmitted=!0,t.nextTick(r,s,e)):t.nextTick(r,s,e):a?(t.nextTick(n,s),a(e)):t.nextTick(n,s);}),this);},undestroy:function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1);},errorOrDestroy:function errorOrDestroy(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t);}};}).call(this,r(8));},function(e,t,r){var n=r(31).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function getHighWaterMark(e,t,r,i){var a=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null;}(t,i,r);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new n(i?r:"highWaterMark",a);return Math.floor(a);}return e.objectMode?16:16384;}};},function(e,t,r){(function(t,n){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next;}t.corkedRequestsFree.next=e;}(t,e);};}var a;e.exports=x,x.WritableState=E;var s={deprecate:r(109)},o=r(105),u=r(11).Buffer,c=t.Uint8Array||function(){};var l,h=r(106),d=r(107).getHighWaterMark,p=r(31).codes,f=p.ERR_INVALID_ARG_TYPE,g=p.ERR_METHOD_NOT_IMPLEMENTED,m=p.ERR_MULTIPLE_CALLBACK,y=p.ERR_STREAM_CANNOT_PIPE,b=p.ERR_STREAM_DESTROYED,_=p.ERR_STREAM_NULL_VALUES,v=p.ERR_STREAM_WRITE_AFTER_END,w=p.ERR_UNKNOWN_ENCODING,S=h.errorOrDestroy;function T(){}function E(e,t,s){a=a||r(32),e=e||{},"boolean"!=typeof s&&(s=t instanceof a),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,a=r.writecb;if("function"!=typeof a)throw new m();if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0;}(r),t)!function(e,t,r,i,a){--t.pendingcb,r?(n.nextTick(a,i),n.nextTick(P,e,t),e._writableState.errorEmitted=!0,S(e,i)):(a(i),e._writableState.errorEmitted=!0,S(e,i),P(e,t));}(e,r,i,t,a);else {var s=I(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||R(e,r),i?n.nextTick(A,e,r,s,a):A(e,r,s,a);}}(t,e);},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this);}function x(e){var t=this instanceof(a=a||r(32));if(!t&&!l.call(x,this))return new x(e);this._writableState=new E(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),o.call(this);}function O(e,t,r,n,i,a,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1;}function A(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));}(e,t),t.pendingcb--,n(),P(e,t);}function R(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,a=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var o=0,u=!0;r;){a[o]=r,r.isBuf||(u=!1),r=r.next,o+=1;}a.allBuffers=u,O(e,t,!0,t.length,a,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0;}else {for(;r;){var c=r.chunk,l=r.encoding,h=r.callback;if(O(e,t,!1,t.objectMode?1:c.length,c,l,h),r=r.next,t.bufferedRequestCount--,t.writing)break;}null===r&&(t.lastBufferedRequest=null);}t.bufferedRequest=r,t.bufferProcessing=!1;}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing;}function N(e,t){e._final(function(r){t.pendingcb--,r&&S(e,r),t.prefinished=!0,e.emit("prefinish"),P(e,t);});}function P(e,t){var r=I(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(N,e,t)));}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy();}return r;}r(12)(x,o),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;){t.push(e),e=e.next;}return t;},function(){try{Object.defineProperty(E.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer();},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")});}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function value(e){return !!l.call(this,e)||this===x&&e&&e._writableState instanceof E;}})):l=function l(e){return e instanceof this;},x.prototype.pipe=function(){S(this,new y());},x.prototype.write=function(e,t,r){var i,a=this._writableState,s=!1,o=!a.objectMode&&(i=e,u.isBuffer(i)||i instanceof c);return o&&!u.isBuffer(e)&&(e=function(e){return u.from(e);}(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof r&&(r=T),a.ending?function(e,t){var r=new v();S(e,r),n.nextTick(t,r);}(this,r):(o||function(e,t,r,i){var a;return null===r?a=new _():"string"==typeof r||t.objectMode||(a=new f("chunk",["string","Buffer"],r)),!a||(S(e,a),n.nextTick(i,a),!1);}(this,a,e,r))&&(a.pendingcb++,s=function(e,t,r,n,i,a){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,r));return t;}(t,n,i);n!==s&&(r=!0,i="buffer",n=s);}var o=t.objectMode?1:n.length;t.length+=o;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1;}else O(e,t,!1,o,n,i,a);return c;}(this,a,o,e,t,r)),s;},x.prototype.cork=function(){this._writableState.corked++;},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||R(this,e));},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this;},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer();}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark;}}),x.prototype._write=function(e,t,r){r(new g("_write()"));},x.prototype._writev=null,x.prototype.end=function(e,t,r){var i=this._writableState;return "function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,P(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1;}(this,i,r),this;},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length;}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._writableState&&this._writableState.destroyed;},set:function set(e){this._writableState&&(this._writableState.destroyed=e);}}),x.prototype.destroy=h.destroy,x.prototype._undestroy=h.undestroy,x.prototype._destroy=function(e,t){t(e);};}).call(this,r(10),r(8));},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return !1;}catch(e){return !1;}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase();}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0;}return e.apply(this,arguments);};};}).call(this,r(10));},function(e,t,r){e.exports=l;var n=r(31).codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,a=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(32);function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new a());r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark);}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h);}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(t,r){d(e,t,r);});}function d(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new o();if(e._transformState.transforming)throw new s();return e.push(null);}r(12)(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t);},l.prototype._transform=function(e,t,r){r(new i("_transform()"));},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark);}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform));},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,function(e){t(e);});};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationTyped=t.KEY_CONTEXT_QUERYOPERATION=void 0;var n=r(94);t.KEY_CONTEXT_QUERYOPERATION="@comunica/bus-query-operation:operation";class i extends n.ActorQueryOperation{constructor(e,t){if(super(Object.assign(Object.assign({},e),{operationName:t})),!this.operationName)throw new Error('A valid "operationName" argument must be provided.');}test(e){var _this14=this;return _asyncToGenerator(function*(){if(!e.operation)throw new Error("Missing field 'operation' in a query operation action.");if(e.operation.type!==_this14.operationName)throw new Error("Actor "+_this14.name+" only supports "+_this14.operationName+" operations, but got "+e.operation.type);var t=e.operation;return _this14.testOperation(t,e.context);})();}run(e){var _this15=this;return _asyncToGenerator(function*(){var r=e.operation,i=e.context&&e.context.set(t.KEY_CONTEXT_QUERYOPERATION,r),a=yield _this15.runOperation(r,i);return a.metadata&&(a.metadata=n.ActorQueryOperation.cachifyMetadata(a.metadata)),a;})();}}t.ActorQueryOperationTyped=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveQuadPattern=t.getDataSourceContext=t.getDataSourceValue=t.getDataSourceType=t.isDataSourceRawType=t.KEY_CONTEXT_SOURCE=t.KEY_CONTEXT_SOURCES=void 0;var n=r(0);function i(e){return "string"==typeof e||"match"in e;}function a(e){return "string"==typeof e?"":"match"in e?"rdfjsSource":e.type;}function s(e){return i(e)?e:e.value;}t.KEY_CONTEXT_SOURCES="@comunica/bus-rdf-resolve-quad-pattern:sources",t.KEY_CONTEXT_SOURCE="@comunica/bus-rdf-resolve-quad-pattern:source",t.isDataSourceRawType=i,t.getDataSourceType=a,t.getDataSourceValue=s,t.getDataSourceContext=function(e,t){return "string"==typeof e||"match"in e||!e.context?t:t.merge(e.context);};class o extends n.Actor{constructor(e){super(e);}getContextSources(e){return e?e.get(t.KEY_CONTEXT_SOURCES):void 0;}getContextSource(e){return e?e.get(t.KEY_CONTEXT_SOURCE):void 0;}getContextSourceUrl(e){if(e){var _t42=s(e);if("string"==typeof _t42){var _e23=_t42.indexOf("#");return _e23>=0&&(_t42=_t42.slice(0,_e23)),_t42;}}}hasContextSingleSource(e){var t=this.getContextSource(e);return Boolean(t&&(i(t)||t.value));}hasContextSingleSourceOfType(e,t){var r=this.getContextSource(t);return Boolean(r&&a(r)===e&&s(r));}}t.ActorRdfResolveQuadPattern=o;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),t.bindingsStreamToGraphQl=void 0,i(r(114),t);var a=r(114),{bindingsStreamToGraphQl:s}=a.ActorSparqlSerializeTree;t.bindingsStreamToGraphQl=s;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorSparqlSerializeTree=void 0;var n=r(2),i=r(15),a=r(0),s=r(120);class o extends i.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e);}static bindingsStreamToGraphQl(e,t,r){var n=a.ensureActionContext(t);return new Promise((t,i)=>{var a=[],o=new s.Converter(r),u={singularizeVariables:n.get("@comunica/actor-init-sparql:singularizeVariables")||{}};e.on("error",i),e.on("data",e=>{var t=e.toJS(),r={};for(var _e24 in t){r[_e24.slice(1)]=t[_e24];}a.push(r);}),e.on("end",()=>{t(o.bindingsToTree(a,u));});});}testHandleChecked(e){return _asyncToGenerator(function*(){if("bindings"!==e.type)throw new Error("This actor can only handle bindings streams.");return !0;})();}runHandle(e,t){return _asyncToGenerator(function*(){var r=new n.Readable();r._read=()=>{};var i=e.bindingsStream;return i.on("error",e=>r.emit("error",e)),o.bindingsStreamToGraphQl(i,e.context,{materializeRdfJsTerms:!0}).then(e=>{r.push(JSON.stringify(e,null,"  ")),r.push(null);}).catch(e=>r.emit("error",e)),{data:r};})();}}t.ActorSparqlSerializeTree=o;},function(e,t,r){(function(t,n){var i=r(54);e.exports=_;var a,s=r(103);_.ReadableState=b;r(22).EventEmitter;var o=function o(e,t){return e.listeners(t).length;},u=r(116),c=r(72).Buffer,l=t.Uint8Array||function(){};var h=Object.create(r(43));h.inherits=r(12);var d=r(219),p=void 0;p=d&&d.debuglog?d.debuglog("stream"):function(){};var f,g=r(220),m=r(117);h.inherits(_,u);var y=["error","close","destroy","pause","resume"];function b(e,t){e=e||{};var n=t instanceof(a=a||r(25));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,s=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(s||0===s)?s:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g(),this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=r(33).StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding);}function _(e){if(a=a||r(25),!(this instanceof _))return new _(e);this._readableState=new b(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this);}function v(e,t,r,n,i){var a,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length);}t.ended=!0,T(e);}(e,s)):(i||(a=function(e,t){var r;n=t,c.isBuffer(n)||n instanceof l||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r;}(s,t)),a?e.emit("error",a):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e);}(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?w(e,s,t,!1):x(e,s)):w(e,s,t,!1))):n||(s.reading=!1));return function(e){return !e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length);}(s);}function w(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&T(e)),x(e,t);}Object.defineProperty(_.prototype,"destroyed",{get:function get(){return void 0!==this._readableState&&this._readableState.destroyed;},set:function set(e){this._readableState&&(this._readableState.destroyed=e);}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e);},_.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=c.from(e,t),t=""),r=!0),v(this,e,t,!1,r);},_.prototype.unshift=function(e){return v(this,e,null,!0,!1);},_.prototype.isPaused=function(){return !1===this._readableState.flowing;},_.prototype.setEncoding=function(e){return f||(f=r(33).StringDecoder),this._readableState.decoder=new f(e),this._readableState.encoding=e,this;};function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e;}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));}function T(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(p("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(E,e):E(e));}function E(e){p("emit readable"),e.emit("readable"),I(e);}function x(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(O,e,t));}function O(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(p("maybeReadMore read 0"),e.read(0),r!==t.length);){r=t.length;}t.readingMore=!1;}function A(e){p("readable nexttick read 0"),e.read(0);}function R(e,t){t.reading||(p("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),I(e),t.flowing&&!t.reading&&e.read(0);}function I(e){var t=e._readableState;for(p("flow",t.flowing);t.flowing&&null!==e.read();){}}function N(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var a=r.data,s=e>a.length?a.length:e;if(s===a.length?i+=a:i+=a.slice(0,e),0===(e-=s)){s===a.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(s));break;}++n;}return t.length-=n,i;}(e,t):function(e,t){var r=c.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var a=n.data,s=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,s),0===(e-=s)){s===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(s));break;}++i;}return t.length-=i,r;}(e,t);return n;}(e,t.buffer,t.decoder),r);var r;}function P(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(C,t,e));}function C(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"));}function D(e,t){for(var r=0,n=e.length;r<n;r++){if(e[r]===t)return r;}return -1;}_.prototype.read=function(e){p("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?P(this):T(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&P(this),null;var n,i=t.needReadable;return p("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&p("length less than watermark",i=!0),t.ended||t.reading?p("reading or ended",i=!1):i&&(p("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(r,t))),null===(n=e>0?N(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&P(this)),null!==n&&this.emit("data",n),n;},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"));},_.prototype.pipe=function(e,t){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e);}a.pipesCount+=1,p("pipe count=%d opts=%j",a.pipesCount,t);var u=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?l:_;function c(t,n){p("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,p("cleanup"),e.removeListener("close",y),e.removeListener("finish",b),e.removeListener("drain",h),e.removeListener("error",m),e.removeListener("unpipe",c),r.removeListener("end",l),r.removeListener("end",_),r.removeListener("data",g),d=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||h());}function l(){p("onend"),e.end();}a.endEmitted?i.nextTick(u):r.once("end",u),e.on("unpipe",c);var h=function(e){return function(){var t=e._readableState;p("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,I(e));};}(r);e.on("drain",h);var d=!1;var f=!1;function g(t){p("ondata"),f=!1,!1!==e.write(t)||f||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==D(a.pipes,e))&&!d&&(p("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,f=!0),r.pause());}function m(t){p("onerror",t),_(),e.removeListener("error",m),0===o(e,"error")&&e.emit("error",t);}function y(){e.removeListener("finish",b),_();}function b(){p("onfinish"),e.removeListener("close",y),_();}function _(){p("unpipe"),r.unpipe(e);}return r.on("data",g),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r);}(e,"error",m),e.once("close",y),e.once("finish",b),e.emit("pipe",r),a.flowing||(p("pipe resume"),r.resume()),e;},_.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++){n[a].emit("unpipe",this,r);}return this;}var s=D(t.pipes,e);return -1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this;},_.prototype.on=function(e,t){var r=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&T(this):i.nextTick(A,this));}return r;},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(p("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(R,e,t));}(this,e)),this;},_.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this;},_.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(p("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e);}t.push(null);}),e.on("data",function(i){(p("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()));}),e){void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments);};}(i));}for(var a=0;a<y.length;a++){e.on(y[a],this.emit.bind(this,y[a]));}return this._read=function(t){p("wrapped _read",t),n&&(n=!1,e.resume());},this;},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function get(){return this._readableState.highWaterMark;}}),_._fromList=N;}).call(this,r(10),r(8));},function(e,t,r){e.exports=r(22).EventEmitter;},function(e,t,r){var n=r(54);function i(e,t){e.emit("error",t);}e.exports={destroy:function destroy(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e);}),this);},undestroy:function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1);}};},function(e,t,r){e.exports=s;var n=r(25),i=Object.create(r(43));function a(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark);}function s(e){if(!(this instanceof s))return new s(e);n.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o);}function o(){var e=this;"function"==typeof this._flush?this._flush(function(t,r){u(e,t,r);}):u(this,null,null);}function u(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null);}i.inherits=r(12),i.inherits(s,n),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t);},s.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented");},s.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark);}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0;},s.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,function(e){t(e),r.emit("close");});};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorAbstractMediaTyped=void 0;var n=r(0);class i extends n.Actor{constructor(e){super(e);}run(e){var _this16=this;return _asyncToGenerator(function*(){if("handle"in e){var _t43=e;return {handle:yield _this16.runHandle(_t43.handle,_t43.handleMediaType,e.context)};}if("mediaTypes"in e)return {mediaTypes:yield _this16.getMediaTypes(e.context)};if("mediaTypeFormats"in e)return {mediaTypeFormats:yield _this16.getMediaTypeFormats(e.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided");})();}test(e){var _this17=this;return _asyncToGenerator(function*(){if("handle"in e){var _t44=e;return {handle:yield _this17.testHandle(_t44.handle,_t44.handleMediaType,e.context)};}if("mediaTypes"in e)return {mediaTypes:yield _this17.testMediaType(e.context)};if("mediaTypeFormats"in e)return {mediaTypeFormats:yield _this17.testMediaTypeFormats(e.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided");})();}}t.ActorAbstractMediaTyped=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(231),t);},function(e,t,r){function n(e){for(var r in e){t.hasOwnProperty(r)||(t[r]=e[r]);}}Object.defineProperty(t,"__esModule",{value:!0}),n(r(233)),n(r(234)),n(r(235)),n(r(236)),n(r(237));},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SparqlJsonBindingsTransformer=void 0;var n=r(2);class i extends n.Transform{constructor(e){super({objectMode:!0}),this.parser=e;}_transform(e,t,r){r(null,this.parser.parseJsonBindings(e));}}t.SparqlJsonBindingsTransformer=i;},function(e,t,r){(function(t){var r={},n=r.LEFT_BRACE=1,i=r.RIGHT_BRACE=2,a=r.LEFT_BRACKET=3,s=r.RIGHT_BRACKET=4,o=r.COLON=5,u=r.COMMA=6,c=r.TRUE=7,l=r.FALSE=8,h=r.NULL=9,d=r.STRING=10,p=r.NUMBER=11,f=r.START=17,g=r.STOP=18,m=r.TRUE1=33,y=r.TRUE2=34,b=r.TRUE3=35,_=r.FALSE1=49,v=r.FALSE2=50,w=r.FALSE3=51,S=r.FALSE4=52,T=r.NULL1=65,E=r.NULL2=66,x=r.NULL3=67,O=r.NUMBER1=81,A=r.NUMBER3=83,R=r.STRING1=97,I=r.STRING2=98,N=r.STRING3=99,P=r.STRING4=100,C=r.STRING5=101,D=r.STRING6=102,j=r.VALUE=113,k=r.KEY=114,L=r.OBJECT=129,M=r.ARRAY=130,F="\\".charCodeAt(0),B="/".charCodeAt(0),q="\b".charCodeAt(0),U="\f".charCodeAt(0),V="\n".charCodeAt(0),H="\r".charCodeAt(0),G="\t".charCodeAt(0);function z(){this.tState=f,this.value=void 0,this.string=void 0,this.stringBuffer=t.alloc?t.alloc(65536):new t(65536),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=j,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new t(2),3:new t(3),4:new t(4)},this.offset=-1;}z.toknam=function(e){for(var t=Object.keys(r),n=0,i=t.length;n<i;n++){var a=t[n];if(r[a]===e)return a;}return e&&"0x"+e.toString(16);};var Q=z.prototype;Q.onError=function(e){throw e;},Q.charError=function(e,t){this.tState=g,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(e[t]))+" at position "+t+" in state "+z.toknam(this.tState)));},Q.appendStringChar=function(e){this.stringBufferOffset>=65536&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=e;},Q.appendStringBuf=function(e,t,r){var n=e.length;"number"==typeof t&&(n="number"==typeof r?r<0?e.length-t+r:r-t:e.length-t),n<0&&(n=0),this.stringBufferOffset+n>65536&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),e.copy(this.stringBuffer,this.stringBufferOffset,t,r),this.stringBufferOffset+=n;},Q.write=function(e){var r;"string"==typeof e&&(e=new t(e));for(var g=0,j=e.length;g<j;g++){if(this.tState===f){if(r=e[g],this.offset++,123===r)this.onToken(n,"{");else if(125===r)this.onToken(i,"}");else if(91===r)this.onToken(a,"[");else if(93===r)this.onToken(s,"]");else if(58===r)this.onToken(o,":");else if(44===r)this.onToken(u,",");else if(116===r)this.tState=m;else if(102===r)this.tState=_;else if(110===r)this.tState=T;else if(34===r)this.string="",this.stringBufferOffset=0,this.tState=R;else if(45===r)this.string="-",this.tState=O;else if(r>=48&&r<64)this.string=String.fromCharCode(r),this.tState=A;else if(32!==r&&9!==r&&10!==r&&13!==r)return this.charError(e,g);}else if(this.tState===R){if(r=e[g],this.bytes_remaining>0){for(var k=0;k<this.bytes_remaining;k++){this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+k]=e[k];}this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,g=g+k-1;}else if(0===this.bytes_remaining&&r>=128){if(r<=193||r>244)return this.onError(new Error("Invalid UTF-8 character at position "+g+" in state "+z.toknam(this.tState)));if(r>=194&&r<=223&&(this.bytes_in_sequence=2),r>=224&&r<=239&&(this.bytes_in_sequence=3),r>=240&&r<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+g>e.length){for(var L=0;L<=e.length-1-g;L++){this.temp_buffs[this.bytes_in_sequence][L]=e[g+L];}this.bytes_remaining=g+this.bytes_in_sequence-e.length,g=e.length-1;}else this.appendStringBuf(e,g,g+this.bytes_in_sequence),g=g+this.bytes_in_sequence-1;}else if(34===r)this.tState=f,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(d,this.string),this.offset+=t.byteLength(this.string,"utf8")+1,this.string=void 0;else if(92===r)this.tState=I;else {if(!(r>=32))return this.charError(e,g);this.appendStringChar(r);}}else if(this.tState===I){if(34===(r=e[g]))this.appendStringChar(r),this.tState=R;else if(92===r)this.appendStringChar(F),this.tState=R;else if(47===r)this.appendStringChar(B),this.tState=R;else if(98===r)this.appendStringChar(q),this.tState=R;else if(102===r)this.appendStringChar(U),this.tState=R;else if(110===r)this.appendStringChar(V),this.tState=R;else if(114===r)this.appendStringChar(H),this.tState=R;else if(116===r)this.appendStringChar(G),this.tState=R;else {if(117!==r)return this.charError(e,g);this.unicode="",this.tState=N;}}else if(this.tState===N||this.tState===P||this.tState===C||this.tState===D){if(!((r=e[g])>=48&&r<64||r>64&&r<=70||r>96&&r<=102))return this.charError(e,g);if(this.unicode+=String.fromCharCode(r),this.tState++===D){var M=parseInt(this.unicode,16);this.unicode=void 0,void 0!==this.highSurrogate&&M>=56320&&M<57344?(this.appendStringBuf(new t(String.fromCharCode(this.highSurrogate,M))),this.highSurrogate=void 0):void 0===this.highSurrogate&&M>=55296&&M<56320?this.highSurrogate=M:(void 0!==this.highSurrogate&&(this.appendStringBuf(new t(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new t(String.fromCharCode(M)))),this.tState=R;}}else if(this.tState===O||this.tState===A)switch(r=e[g]){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(r),this.tState=A;break;default:this.tState=f;var Q=Number(this.string);if(isNaN(Q))return this.charError(e,g);this.string.match(/[0-9]+/)==this.string&&Q.toString()!=this.string?this.onToken(d,this.string):this.onToken(p,Q),this.offset+=this.string.length-1,this.string=void 0,g--;}else if(this.tState===m){if(114!==e[g])return this.charError(e,g);this.tState=y;}else if(this.tState===y){if(117!==e[g])return this.charError(e,g);this.tState=b;}else if(this.tState===b){if(101!==e[g])return this.charError(e,g);this.tState=f,this.onToken(c,!0),this.offset+=3;}else if(this.tState===_){if(97!==e[g])return this.charError(e,g);this.tState=v;}else if(this.tState===v){if(108!==e[g])return this.charError(e,g);this.tState=w;}else if(this.tState===w){if(115!==e[g])return this.charError(e,g);this.tState=S;}else if(this.tState===S){if(101!==e[g])return this.charError(e,g);this.tState=f,this.onToken(l,!1),this.offset+=4;}else if(this.tState===T){if(117!==e[g])return this.charError(e,g);this.tState=E;}else if(this.tState===E){if(108!==e[g])return this.charError(e,g);this.tState=x;}else if(this.tState===x){if(108!==e[g])return this.charError(e,g);this.tState=f,this.onToken(h,null),this.offset+=3;}}},Q.onToken=function(e,t){},Q.parseError=function(e,t){this.tState=g,this.onError(new Error("Unexpected "+z.toknam(e)+(t?"("+JSON.stringify(t)+")":"")+" in state "+z.toknam(this.state)));},Q.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode});},Q.pop=function(){var e=this.value,t=this.stack.pop();this.value=t.value,this.key=t.key,this.mode=t.mode,this.emit(e),this.mode||(this.state=j);},Q.emit=function(e){this.mode&&(this.state=u),this.onValue(e);},Q.onValue=function(e){},Q.onToken=function(e,t){if(this.state===j){if(e===d||e===p||e===c||e===l||e===h)this.value&&(this.value[this.key]=t),this.emit(t);else if(e===n)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=k,this.mode=L;else if(e===a)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=M,this.state=j;else if(e===i){if(this.mode!==L)return this.parseError(e,t);this.pop();}else {if(e!==s)return this.parseError(e,t);if(this.mode!==M)return this.parseError(e,t);this.pop();}}else if(this.state===k){if(e===d)this.key=t,this.state=o;else {if(e!==i)return this.parseError(e,t);this.pop();}}else if(this.state===o){if(e!==o)return this.parseError(e,t);this.state=j;}else {if(this.state!==u)return this.parseError(e,t);if(e===u)this.mode===M?(this.key++,this.state=j):this.mode===L&&(this.state=k);else {if(!(e===s&&this.mode===M||e===i&&this.mode===L))return this.parseError(e,t);this.pop();}}},z.C=r,e.exports=z;}).call(this,r(11).Buffer);},function(e,t,r){var n=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;n.writable=e=>n(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,n.readable=e=>n(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,n.duplex=e=>n.writable(e)&&n.readable(e),n.transform=e=>n.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState,e.exports=n;},function(e,t,r){(function(t){r(2);var n=r(247),i=r(248);e.exports=r(126),e.exports.toNodeReadable=function(t){if(t instanceof e.exports.ReadableStream||t&&"function"==typeof t.getReader)return i.readable.webToNode(t);throw new TypeError("Expected a ReadableStream.");},e.exports.toWebReadableStream=function(e){if(n(e)&&e.readable)return i.readable.nodeToWeb(e);if(Array.isArray(e))return i.readable.arrayToWeb(e);if(t.isBuffer(e)||"string"==typeof e)return i.readable.arrayToWeb([e]);throw new TypeError("Expected a Node streams.Readable, an Array, Buffer or String.");};}).call(this,r(11).Buffer);},function(e,t,r){(function(t){e.exports=function e(t,r,n){function i(s,o){if(!r[s]){if(!t[s]){if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u;}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return i(r||e);},c,c.exports,e,t,r,n);}return r[s].exports;}for(var a=!1,s=0;s<n.length;s++){i(n[s]);}return i;}({1:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./spec/reference-implementation/lib/readable-stream").ReadableStream,i=e("./spec/reference-implementation/lib/writable-stream").WritableStream,a=e("./spec/reference-implementation/lib/byte-length-queuing-strategy"),s=e("./spec/reference-implementation/lib/count-queuing-strategy"),o=e("./spec/reference-implementation/lib/transform-stream").TransformStream;r.ByteLengthQueuingStrategy=a,r.CountQueuingStrategy=s,r.ReadableStream=n,r.WritableStream=i,r.TransformStream=o;var u={ReadableStream:n,WritableStream:i,ByteLengthQueuingStrategy:a,CountQueuingStrategy:s,TransformStream:o};r.default=u;},{"./spec/reference-implementation/lib/byte-length-queuing-strategy":8,"./spec/reference-implementation/lib/count-queuing-strategy":9,"./spec/reference-implementation/lib/readable-stream":12,"./spec/reference-implementation/lib/transform-stream":13,"./spec/reference-implementation/lib/writable-stream":15}],2:[function(e,r,n){(function(t){function n(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i){if(e[i]!==t[i]){r=e[i],n=t[i];break;}}return r<n?-1:n<r?1:0;}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer);}function a(e){return Object.prototype.toString.call(e);}function s(e){return !i(e)&&"function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)));}function o(e){if(m.isFunction(e)){if(_)return e.name;var t=e.toString().match(w);return t&&t[1];}}function u(e,t){return "string"==typeof e?e.length<t?e:e.slice(0,t):e;}function c(e){if(_||!m.isFunction(e))return m.inspect(e);var t=o(e);return "[Function"+(t?": "+t:"")+"]";}function l(e,t,r,n,i){throw new v.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i});}function h(e,t){e||l(e,!0,t,"==",v.ok);}function d(e,t,r,o){if(e===t)return !0;if(i(e)&&i(t))return 0===n(e,t);if(m.isDate(e)&&m.isDate(t))return e.getTime()===t.getTime();if(m.isRegExp(e)&&m.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(s(e)&&s(t)&&a(e)===a(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===n(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return !1;var u=(o=o||{actual:[],expected:[]}).actual.indexOf(e);return -1!==u&&u===o.expected.indexOf(t)||(o.actual.push(e),o.expected.push(t),function(e,t,r,n){if(null==e||null==t)return !1;if(m.isPrimitive(e)||m.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return !1;var i=p(e),a=p(t);if(i&&!a||!i&&a)return !1;if(i)return e=b.call(e),t=b.call(t),d(e,t,r);var s,o,u=S(e),c=S(t);if(u.length!==c.length)return !1;for(u.sort(),c.sort(),o=u.length-1;o>=0;o--){if(u[o]!==c[o])return !1;}for(o=u.length-1;o>=0;o--){if(s=u[o],!d(e[s],t[s],r,n))return !1;}return !0;}(e,t,r,o));}return r?e===t:e==t;}function p(e){return "[object Arguments]"==Object.prototype.toString.call(e);}function f(e,t){if(!e||!t)return !1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return !0;}catch(e){}return !Error.isPrototypeOf(t)&&!0===t.call({},e);}function g(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(e){var t;try{e();}catch(e){t=e;}return t;}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&l(i,r,"Missing expected exception"+n);var a="string"==typeof n,s=!e&&i&&!r;if((!e&&m.isError(i)&&a&&f(i,r)||s)&&l(i,r,"Got unwanted exception"+n),e&&i&&r&&!f(i,r)||!e&&i)throw i;}var m=e("util/"),y=Object.prototype.hasOwnProperty,b=Array.prototype.slice,_="foo"===function(){}.name,v=r.exports=h,w=/\s*function\s+([^\(\s]*)\s*/;v.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return u(c(e.actual),128)+" "+e.operator+" "+u(c(e.expected),128);}(this),this.generatedMessage=!0);var t=e.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else {var r=new Error();if(r.stack){var n=r.stack,i=o(t),a=n.indexOf("\n"+i);if(a>=0){var s=n.indexOf("\n",a+1);n=n.substring(s+1);}this.stack=n;}}},m.inherits(v.AssertionError,Error),v.fail=l,v.ok=h,v.equal=function(e,t,r){e!=t&&l(e,t,r,"==",v.equal);},v.notEqual=function(e,t,r){e==t&&l(e,t,r,"!=",v.notEqual);},v.deepEqual=function(e,t,r){d(e,t,!1)||l(e,t,r,"deepEqual",v.deepEqual);},v.deepStrictEqual=function(e,t,r){d(e,t,!0)||l(e,t,r,"deepStrictEqual",v.deepStrictEqual);},v.notDeepEqual=function(e,t,r){d(e,t,!1)&&l(e,t,r,"notDeepEqual",v.notDeepEqual);},v.notDeepStrictEqual=function e(t,r,n){d(t,r,!0)&&l(t,r,n,"notDeepStrictEqual",e);},v.strictEqual=function(e,t,r){e!==t&&l(e,t,r,"===",v.strictEqual);},v.notStrictEqual=function(e,t,r){e===t&&l(e,t,r,"!==",v.notStrictEqual);},v.throws=function(e,t,r){g(!0,e,t,r);},v.doesNotThrow=function(e,t,r){g(!1,e,t,r);},v.ifError=function(e){if(e)throw e;};var S=Object.keys||function(e){var t=[];for(var r in e){y.call(e,r)&&t.push(r);}return t;};}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{"util/":7}],3:[function(e,t,r){},{}],4:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined");}function i(){throw new Error("clearTimeout has not been defined");}function a(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0);}catch(t){try{return l.call(null,e,0);}catch(t){return l.call(this,e,0);}}}function s(){g&&p&&(g=!1,p.length?f=p.concat(f):m=-1,f.length&&o());}function o(){if(!g){var e=a(s);g=!0;for(var t=f.length;t;){for(p=f,f=[];++m<t;){p&&p[m].run();}m=-1,t=f.length;}p=null,g=!1,function(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{h(e);}catch(t){try{return h.call(null,e);}catch(t){return h.call(this,e);}}}(e);}}function u(e,t){this.fun=e,this.array=t;}function c(){}var l,h,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n;}catch(e){l=n;}try{h="function"==typeof clearTimeout?clearTimeout:i;}catch(e){h=i;}}();var p,f=[],g=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r];}f.push(new u(e,t)),1!==f.length||g||a(o);},u.prototype.run=function(){this.fun.apply(null,this.array);},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return [];},d.binding=function(e){throw new Error("process.binding is not supported");},d.cwd=function(){return "/";},d.chdir=function(e){throw new Error("process.chdir is not supported");},d.umask=function(){return 0;};},{}],5:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});}:t.exports=function(e,t){e.super_=t;var r=function r(){};r.prototype=t.prototype,e.prototype=new r(),e.prototype.constructor=e;};},{}],6:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8;};},{}],7:[function(e,r,n){(function(t,r){function i(e,t){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(t)?r.showHidden=t:t&&n._extend(r,t),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),o(r,e,r.depth);}function a(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e;}function s(e,t){return e;}function o(e,t,r){if(e.customInspect&&t&&v(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return f(i)||(i=o(e,i,r)),i;}var a=function(e,t){if(g(t))return e.stylize("undefined","undefined");if(f(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string");}return p(t)?e.stylize(""+t,"number"):h(t)?e.stylize(""+t,"boolean"):d(t)?e.stylize("null","null"):void 0;}(e,t);if(a)return a;var s=Object.keys(t),y=function(e){var t={};return e.forEach(function(e,r){t[e]=!0;}),t;}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),_(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(t);if(0===s.length){if(v(t)){var w=t.name?": "+t.name:"";return e.stylize("[Function"+w+"]","special");}if(m(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(b(t))return e.stylize(Date.prototype.toString.call(t),"date");if(_(t))return u(t);}var S,T="",x=!1,O=["{","}"];return l(t)&&(x=!0,O=["[","]"]),v(t)&&(T=" [Function"+(t.name?": "+t.name:"")+"]"),m(t)&&(T=" "+RegExp.prototype.toString.call(t)),b(t)&&(T=" "+Date.prototype.toUTCString.call(t)),_(t)&&(T=" "+u(t)),0!==s.length||x&&0!=t.length?r<0?m(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),S=x?function(e,t,r,n,i){for(var a=[],s=0,o=t.length;s<o;++s){E(t,String(s))?a.push(c(e,t,r,n,String(s),!0)):a.push("");}return i.forEach(function(i){i.match(/^\d+$/)||a.push(c(e,t,r,n,i,!0));}),a;}(e,t,r,y,s):s.map(function(n){return c(e,t,r,y,n,x);}),e.seen.pop(),function(e,t,r){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1;},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1];}(S,T,O)):O[0]+T+O[1];}function u(e){return "["+Error.prototype.toString.call(e)+"]";}function c(e,t,r,n,i,a){var s,u,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),E(n,i)||(s="["+i+"]"),u||(e.seen.indexOf(c.value)<0?(u=d(r)?o(e,c.value,null):o(e,c.value,r-1)).indexOf("\n")>-1&&(u=a?u.split("\n").map(function(e){return "  "+e;}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return "   "+e;}).join("\n")):u=e.stylize("[Circular]","special")),g(s)){if(a&&i.match(/^\d+$/))return u;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"));}return s+": "+u;}function l(e){return Array.isArray(e);}function h(e){return "boolean"==typeof e;}function d(e){return null===e;}function p(e){return "number"==typeof e;}function f(e){return "string"==typeof e;}function g(e){return void 0===e;}function m(e){return y(e)&&"[object RegExp]"===w(e);}function y(e){return "object"==typeof e&&null!==e;}function b(e){return y(e)&&"[object Date]"===w(e);}function _(e){return y(e)&&("[object Error]"===w(e)||e instanceof Error);}function v(e){return "function"==typeof e;}function w(e){return Object.prototype.toString.call(e);}function S(e){return e<10?"0"+e.toString(10):e.toString(10);}function T(){var e=new Date(),t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return [e.getDate(),R[e.getMonth()],t].join(" ");}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t);}var x=/%[sdj%]/g;n.format=function(e){if(!f(e)){for(var t=[],r=0;r<arguments.length;r++){t.push(i(arguments[r]));}return t.join(" ");}r=1;for(var n=arguments,a=n.length,s=String(e).replace(x,function(e){if("%%"===e)return "%";if(r>=a)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++]);}catch(e){return "[Circular]";}default:return e;}}),o=n[r];r<a;o=n[++r]){d(o)||!y(o)?s+=" "+o:s+=" "+i(o);}return s;},n.deprecate=function(e,i){if(g(r.process))return function(){return n.deprecate(e,i).apply(this,arguments);};if(!0===t.noDeprecation)return e;var a=!1;return function(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0;}return e.apply(this,arguments);};};var O,A={};n.debuglog=function(e){if(g(O)&&(O=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!A[e])if(new RegExp("\\b"+e+"\\b","i").test(O)){var r=t.pid;A[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t);};}else A[e]=function(){};return A[e];},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=l,n.isBoolean=h,n.isNull=d,n.isNullOrUndefined=function(e){return null==e;},n.isNumber=p,n.isString=f,n.isSymbol=function(e){return "symbol"==typeof e;},n.isUndefined=g,n.isRegExp=m,n.isObject=y,n.isDate=b,n.isError=_,n.isFunction=v,n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e;},n.isBuffer=e("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",T(),n.format.apply(n,arguments));},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!y(t))return e;for(var r=Object.keys(t),n=r.length;n--;){e[r[n]]=t[r[n]];}return e;};}).call(this,e("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{"./support/isBuffer":6,_process:4,inherits:5}],8:[function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t;};}(),i=e("./helpers.js").createDataProperty;t.exports=function(){function e(t){var r=t.highWaterMark;((function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}))(this,e),i(this,"highWaterMark",r);}return n(e,[{key:"size",value:function value(e){return e.byteLength;}}]),e;}();},{"./helpers.js":10}],9:[function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t;};}(),i=e("./helpers.js").createDataProperty;t.exports=function(){function e(t){var r=t.highWaterMark;((function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}))(this,e),i(this,"highWaterMark",r);}return n(e,[{key:"size",value:function value(){return 1;}}]),e;}();},{"./helpers.js":10}],10:[function(e,t,r){function n(e,t,r){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r);}function i(e,t,r){try{return Promise.resolve(n(e,t,r));}catch(e){return Promise.reject(e);}}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e;}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;},s=(e("better-assert"),Symbol('is "detached" for our purposes'));r.typeIsObject=function(e){return "object"===(void 0===e?"undefined":a(e))&&null!==e||"function"==typeof e;},r.createDataProperty=function(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0});},r.createArrayFromList=function(e){return e.slice();},r.ArrayBufferCopy=function(e,t,r,n,i){new Uint8Array(e).set(new Uint8Array(r,n,i),t);},r.CreateIterResultObject=function(e,t){var r={};return Object.defineProperty(r,"value",{value:e,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(r,"done",{value:t,enumerable:!0,writable:!0,configurable:!0}),r;},r.IsFiniteNonNegativeNumber=function(e){return !1!==r.IsNonNegativeNumber(e)&&e!==1/0;},r.IsNonNegativeNumber=function(e){return !("number"!=typeof e||Number.isNaN(e)||e<0);},r.Call=n,r.CreateAlgorithmFromUnderlyingMethod=function(e,t,r,n){var a=e[t];if(void 0!==a){if("function"!=typeof a)throw new TypeError(a+" is not a method");switch(r){case 0:return function(){return i(a,e,n);};case 1:return function(t){var r=[t].concat(n);return i(a,e,r);};}}return function(){return Promise.resolve();};},r.InvokeOrNoop=function(e,t,r){var i=e[t];if(void 0!==i)return n(i,e,r);},r.PromiseCall=i,r.TransferArrayBuffer=function(e){var t=e.slice();return Object.defineProperty(e,"byteLength",{get:function get(){return 0;}}),e[s]=!0,t;},r.IsDetachedBuffer=function(e){return s in e;},r.ValidateAndNormalizeHighWaterMark=function(e){if(e=Number(e),Number.isNaN(e)||e<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return e;},r.MakeSizeAlgorithmFromSizeFunction=function(e){if(void 0===e)return function(){return 1;};if("function"!=typeof e)throw new TypeError("size property of a queuing strategy must be a function");return function(t){return e(t);};};},{"better-assert":16}],11:[function(e,t,r){e("better-assert");var n=e("./helpers.js").IsFiniteNonNegativeNumber;r.DequeueValue=function(e){var t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value;},r.EnqueueValueWithSize=function(e,t,r){if(r=Number(r),!n(r))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:r}),e._queueTotalSize+=r;},r.PeekQueueValue=function(e){return e._queue[0].value;},r.ResetQueue=function(e){e._queue=[],e._queueTotalSize=0;};},{"./helpers.js":10,"better-assert":16}],12:[function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}function i(e){return new Ue(e);}function a(e){return new qe(e);}function s(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return 1;},a=Object.create(Be.prototype);return o(a),L(a,Object.create(Ve.prototype),e,t,r,n,i),a;}function o(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1;}function u(e){return !!Se(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController");}function c(e){return void 0!==e._reader;}function l(e){return new Promise(function(t,r){var n={_resolve:t,_reject:r};e._reader._readIntoRequests.push(n);});}function h(e){return new Promise(function(t,r){var n={_resolve:t,_reject:r};e._reader._readRequests.push(n);});}function d(e,t){return e._disturbed=!0,"closed"===e._state?Promise.resolve(void 0):"errored"===e._state?Promise.reject(e._storedError):(p(e),e._readableStreamController[Me](t).then(function(){}));}function p(e){e._state="closed";var t=e._reader;if(void 0!==t){if(!0===w(t)){var r=!0,n=!1,i=void 0;try{for(var a,s=t._readRequests[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){(0,a.value._resolve)(fe(void 0,!0));}}catch(e){n=!0,i=e;}finally{try{!r&&s.return&&s.return();}finally{if(n)throw i;}}t._readRequests=[];}!function(e){e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0;}(t);}}function f(e,t){e._state="errored",e._storedError=t;var r=e._reader;if(void 0!==r){if(!0===w(r)){var n=!0,i=!1,a=void 0;try{for(var s,o=r._readRequests[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){s.value._reject(t);}}catch(e){i=!0,a=e;}finally{try{!n&&o.return&&o.return();}finally{if(i)throw a;}}r._readRequests=[];}else {var u=!0,c=!1,l=void 0;try{for(var h,d=r._readIntoRequests[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){h.value._reject(t);}}catch(e){c=!0,l=e;}finally{try{!u&&d.return&&d.return();}finally{if(c)throw l;}}r._readIntoRequests=[];}ae(r,t),r._closedPromise.catch(function(){});}}function g(e,t,r){e._reader._readRequests.shift()._resolve(fe(t,r));}function m(e){return e._reader._readIntoRequests.length;}function y(e){return e._reader._readRequests.length;}function b(e){var t=e._reader;return void 0!==t&&!1!==v(t);}function _(e){var t=e._reader;return void 0!==t&&!1!==w(t);}function v(e){return !!Se(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests");}function w(e){return !!Se(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests");}function S(e,t){e._ownerReadableStream=t,t._reader=e,"readable"===t._state?function(e){e._closedPromise=new Promise(function(t,r){e._closedPromise_resolve=t,e._closedPromise_reject=r;});}(e):"closed"===t._state?function(e){e._closedPromise=Promise.resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0;}(e):(function(e,t){e._closedPromise=Promise.reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0;}(e,t._storedError),e._closedPromise.catch(function(){}));}function T(e,t){return d(e._ownerReadableStream,t);}function E(e){"readable"===e._ownerReadableStream._state?ae(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(e,t){e._closedPromise=Promise.reject(t);}(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._closedPromise.catch(function(){}),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0;}function x(e,t){var r=e._ownerReadableStream;return r._disturbed=!0,"errored"===r._state?Promise.reject(r._storedError):function(e,t){var r=e._controlledReadableByteStream,n=1;t.constructor!==DataView&&(n=t.constructor.BYTES_PER_ELEMENT);var i=t.constructor,a={buffer:be(t.buffer),byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:n,ctor:i,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(a),l(r);if("closed"===r._state){var s=new t.constructor(a.buffer,a.byteOffset,0);return Promise.resolve(fe(s,!0));}if(e._queueTotalSize>0){if(!0===z(e,a)){var o=H(a);return X(e),Promise.resolve(fe(o,!1));}if(!0===e._closeRequested){var u=new TypeError("Insufficient bytes to fill elements in the given buffer");return K(e,u),Promise.reject(u);}}e._pendingPullIntos.push(a);var c=l(r);return q(e),c;}(r._readableStreamController,t);}function O(e){var t=e._ownerReadableStream;return t._disturbed=!0,"closed"===t._state?Promise.resolve(fe(void 0,!0)):"errored"===t._state?Promise.reject(t._storedError):t._readableStreamController[Fe]();}function A(e){return !!Se(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream");}function R(e){!1!==I(e)&&(!0!==e._pulling?(e._pulling=!0,e._pullAlgorithm().then(function(){if(e._pulling=!1,!0===e._pullAgain)return e._pullAgain=!1,R(e);},function(t){D(e,t);}).catch(Te)):e._pullAgain=!0);}function I(e){var t=e._controlledReadableStream;return !1!==k(e)&&!1!==e._started&&(!0===c(t)&&y(t)>0||j(e)>0);}function N(e){var t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&p(t);}function P(e,t){var r=e._controlledReadableStream;if(!0===c(r)&&y(r)>0)g(r,t,!1);else {var n=void 0;try{n=e._strategySizeAlgorithm(t);}catch(t){throw D(e,t),t;}try{Oe(e,t,n);}catch(t){throw D(e,t),t;}}R(e);}function C(e,t){var r=e._controlledReadableStream;Ae(e),f(r,t);}function D(e,t){"readable"===e._controlledReadableStream._state&&C(e,t);}function j(e){var t=e._controlledReadableStream._state;return "errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize;}function k(e){var t=e._controlledReadableStream._state;return !1===e._closeRequested&&"readable"===t;}function L(e,t,r,n,i,a,s){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Ae(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=s,t._strategyHWM=a,t._pullAlgorithm=n,t._cancelAlgorithm=i,e._readableStreamController=t;var o=r();Promise.resolve(o).then(function(){t._started=!0,R(t);},function(e){D(t,e);}).catch(Te);}function M(e,t,r,n){var i=Object.create(Ve.prototype),a=pe(t,"pull",0,[i]),s=pe(t,"cancel",1,[]);L(e,i,function(){return me(t,"start",[i]);},a,s,r,n);}function F(e){return !!Se(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream");}function B(e){return !!Se(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController");}function q(e){!1!==function(e){var t=e._controlledReadableByteStream;return "readable"===t._state&&!0!==e._closeRequested&&!1!==e._started&&(!0===_(t)&&y(t)>0||!0===b(t)&&m(t)>0||Z(e)>0);}(e)&&(!0!==e._pulling?(e._pulling=!0,e._pullAlgorithm().then(function(){e._pulling=!1,!0===e._pullAgain&&(e._pullAgain=!1,q(e));},function(t){"readable"===e._controlledReadableByteStream._state&&K(e,t);}).catch(Te)):e._pullAgain=!0);}function U(e){$(e),e._pendingPullIntos=[];}function V(e,t){var r=!1;"closed"===e._state&&(r=!0);var n=H(t);"default"===t.readerType?g(e,n,r):function(e,t,r){e._reader._readIntoRequests.shift()._resolve(fe(t,r));}(e,n,r);}function H(e){var t=e.bytesFilled,r=e.elementSize;return new e.ctor(e.buffer,e.byteOffset,t/r);}function G(e,t,r,n){e._queue.push({buffer:t,byteOffset:r,byteLength:n}),e._queueTotalSize+=n;}function z(e,t){var r=t.elementSize,n=t.bytesFilled-t.bytesFilled%r,i=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),a=t.bytesFilled+i,s=a-a%r,o=i,u=!1;s>n&&(o=s-t.bytesFilled,u=!0);for(var c=e._queue;o>0;){var l=c[0],h=Math.min(o,l.byteLength),d=t.byteOffset+t.bytesFilled;de(t.buffer,d,l.buffer,l.byteOffset,h),l.byteLength===h?c.shift():(l.byteOffset+=h,l.byteLength-=h),e._queueTotalSize-=h,Q(e,h,t),o-=h;}return u;}function Q(e,t,r){$(e),r.bytesFilled+=t;}function X(e){0===e._queueTotalSize&&!0===e._closeRequested?p(e._controlledReadableByteStream):q(e);}function $(e){void 0!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=void 0,e._byobRequest=void 0);}function Y(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;var t=e._pendingPullIntos[0];!0===z(e,t)&&(W(e),V(e._controlledReadableByteStream,t));}}function J(e,t){var r=e._pendingPullIntos[0];if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");!function(e,t){t.buffer=be(t.buffer);var r=e._controlledReadableByteStream;if(!0===b(r))for(;m(r)>0;){V(r,W(e));}}(e,r);}else !function(e,t,r){if(r.bytesFilled+t>r.byteLength)throw new RangeError("bytesWritten out of range");if(Q(e,t,r),!(r.bytesFilled<r.elementSize)){W(e);var n=r.bytesFilled%r.elementSize;if(n>0){var i=r.byteOffset+r.bytesFilled,a=r.buffer.slice(i-n,i);G(e,a,0,a.byteLength);}r.buffer=be(r.buffer),r.bytesFilled-=n,V(e._controlledReadableByteStream,r),Y(e);}}(e,t,r);}function W(e){var t=e._pendingPullIntos.shift();return $(e),t;}function K(e,t){var r=e._controlledReadableByteStream;U(e),Ae(e),f(r,t);}function Z(e){var t=e._controlledReadableByteStream._state;return "errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize;}function ee(e,t,r,n,i,a,s){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,U(t),t._queue=t._queueTotalSize=void 0,Ae(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=_e(a),t._pullAlgorithm=n,t._cancelAlgorithm=i,t._autoAllocateChunkSize=s,t._pendingPullIntos=[],e._readableStreamController=t;var o=r();Promise.resolve(o).then(function(){t._started=!0,q(t);},function(r){"readable"===e._state&&K(t,r);}).catch(Te);}function te(e,t,r){var n=Object.create(Ge.prototype),i=pe(t,"pull",0,[n]),a=pe(t,"cancel",1,[]),s=t.autoAllocateChunkSize;if(void 0!==s&&(!1===Number.isInteger(s)||s<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");ee(e,n,function(){return me(t,"start",[n]);},i,a,r,s);}function re(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream");}function ne(e){return new TypeError("Cannot "+e+" a stream using a released reader");}function ie(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader");}function ae(e,t){e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0;}function se(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader");}function oe(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController");}function ue(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest");}function ce(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController");}var le=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t;};}(),he=(e("better-assert"),e("./helpers.js")),de=he.ArrayBufferCopy,pe=he.CreateAlgorithmFromUnderlyingMethod,fe=he.CreateIterResultObject,ge=he.IsFiniteNonNegativeNumber,me=he.InvokeOrNoop,ye=he.IsDetachedBuffer,be=he.TransferArrayBuffer,_e=he.ValidateAndNormalizeHighWaterMark,ve=(he.MakeSizeAlgorithmFromSizeFunction),we=he.createArrayFromList,Se=he.typeIsObject,Te=e("./utils.js").rethrowAssertionErrorRejection,Ee=e("./queue-with-sizes.js"),xe=Ee.DequeueValue,Oe=Ee.EnqueueValueWithSize,Ae=Ee.ResetQueue,Re=e("./writable-stream.js"),Ie=Re.AcquireWritableStreamDefaultWriter,Ne=Re.IsWritableStream,Pe=Re.IsWritableStreamLocked,Ce=Re.WritableStreamAbort,De=Re.WritableStreamDefaultWriterCloseWithErrorPropagation,je=Re.WritableStreamDefaultWriterRelease,ke=Re.WritableStreamDefaultWriterWrite,Le=Re.WritableStreamCloseQueuedOrInFlight,Me=Symbol("[[CancelSteps]]"),Fe=Symbol("[[PullSteps]]"),Be=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.size,a=r.highWaterMark;n(this,e),o(this);var s=t.type;if("bytes"===String(s)){if(void 0===a&&(a=0),a=_e(a),void 0!==i)throw new RangeError("The strategy for a byte stream cannot have a size function");te(this,t,a);}else {if(void 0!==s)throw new RangeError("Invalid type is specified");void 0===a&&(a=1),M(this,t,a=_e(a),ve(i));}}return le(e,[{key:"cancel",value:function value(e){return !1===u(this)?Promise.reject(re("cancel")):!0===c(this)?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):d(this,e);}},{key:"getReader",value:function value(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mode;if(!1===u(this))throw re("getReader");if(void 0===e)return a(this);if("byob"===(e=String(e)))return i(this);throw new RangeError("Invalid mode is specified");}},{key:"pipeThrough",value:function value(e,t){var r=e.writable,n=e.readable;if(void 0===r||void 0===n)throw new TypeError("readable and writable arguments must be defined");return function(e){try{Promise.prototype.then.call(e,void 0,function(){});}catch(e){}}(this.pipeTo(r,t)),n;}},{key:"pipeTo",value:function value(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.preventClose,i=r.preventAbort,s=r.preventCancel;if(!1===u(this))return Promise.reject(re("pipeTo"));if(!1===Ne(e))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(n=Boolean(n),i=Boolean(i),s=Boolean(s),!0===c(this))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(!0===Pe(e))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var o=a(this),l=Ie(e),h=!1,p=Promise.resolve();return new Promise(function(r,a){function u(){var e=p;return p.then(function(){return e!==p?u():void 0;});}function c(e,t,r){"errored"===e._state?r(e._storedError):t.catch(r).catch(Te);}function f(t,r,n){function i(){t().then(function(){return m(r,n);},function(e){return m(!0,e);}).catch(Te);}!0!==h&&(h=!0,"writable"===e._state&&!1===Le(e)?u().then(i):i());}function g(t,r){!0!==h&&(h=!0,"writable"===e._state&&!1===Le(e)?u().then(function(){return m(t,r);}).catch(Te):m(t,r));}function m(e,t){je(l),E(o),e?a(t):r(void 0);}if(c(t,o._closedPromise,function(t){!1===i?f(function(){return Ce(e,t);},!0,t):g(!0,t);}),c(e,l._closedPromise,function(e){!1===s?f(function(){return d(t,e);},!0,e):g(!0,e);}),function(e,t,r){"closed"===e._state?r():t.then(r).catch(Te);}(t,o._closedPromise,function(){!1===n?f(function(){return De(l);}):g();}),!0===Le(e)||"closed"===e._state){var y=new TypeError("the destination writable stream closed before all data could be piped to it");!1===s?f(function(){return d(t,y);},!0,y):g(!0,y);}(function e(){return !0===h?Promise.resolve():l._readyPromise.then(function(){return O(o).then(function(e){var t=e.value;!0!==e.done&&(p=ke(l,t).catch(function(){}));});}).then(e);})().catch(function(e){p=Promise.resolve(),Te(e);});});}},{key:"tee",value:function value(){if(!1===u(this))throw re("tee");var e=function(e,t){function r(){return O(i).then(function(e){var t=e.value;if(!0===e.done&&!1===o&&(!1===u&&N(p._readableStreamController),!1===c&&N(f._readableStreamController),o=!0),!0!==o){var r=t,n=t;!1===u&&P(p._readableStreamController,r),!1===c&&P(f._readableStreamController,n);}});}function n(){}var i=a(e),o=!1,u=!1,c=!1,l=void 0,h=void 0,p=void 0,f=void 0,g=void 0,m=new Promise(function(e){g=e;});return p=s(n,r,function(t){if(u=!0,l=t,!0===c){var r=we([l,h]),n=d(e,r);g(n);}return m;}),f=s(n,r,function(t){if(c=!0,h=t,!0===u){var r=we([l,h]),n=d(e,r);g(n);}return m;}),i._closedPromise.catch(function(e){!0!==o&&(D(p._readableStreamController,e),D(f._readableStreamController,e),o=!0);}),[p,f];}(this);return we(e);}},{key:"locked",get:function get(){if(!1===u(this))throw re("locked");return c(this);}}]),e;}();t.exports={CreateReadableByteStream:function CreateReadableByteStream(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=Object.create(Be.prototype);return o(a),ee(a,Object.create(Ge.prototype),e,t,r,n,i),a;},CreateReadableStream:s,ReadableStream:Be,IsReadableStreamDisturbed:function IsReadableStreamDisturbed(e){return e._disturbed;},ReadableStreamDefaultControllerClose:N,ReadableStreamDefaultControllerEnqueue:P,ReadableStreamDefaultControllerError:C,ReadableStreamDefaultControllerGetDesiredSize:j,ReadableStreamDefaultControllerHasBackpressure:function ReadableStreamDefaultControllerHasBackpressure(e){return !0!==I(e);},ReadableStreamDefaultControllerCanCloseOrEnqueue:k};var qe=function(){function e(t){if(n(this,e),!1===u(t))throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===c(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");S(this,t),this._readRequests=[];}return le(e,[{key:"cancel",value:function value(e){return !1===w(this)?Promise.reject(ie("cancel")):void 0===this._ownerReadableStream?Promise.reject(ne("cancel")):T(this,e);}},{key:"read",value:function value(){return !1===w(this)?Promise.reject(ie("read")):void 0===this._ownerReadableStream?Promise.reject(ne("read from")):O(this);}},{key:"releaseLock",value:function value(){if(!1===w(this))throw ie("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");E(this);}}},{key:"closed",get:function get(){return !1===w(this)?Promise.reject(ie("closed")):this._closedPromise;}}]),e;}(),Ue=function(){function e(t){if(n(this,e),!u(t))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===F(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(c(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");S(this,t),this._readIntoRequests=[];}return le(e,[{key:"cancel",value:function value(e){return v(this)?void 0===this._ownerReadableStream?Promise.reject(ne("cancel")):T(this,e):Promise.reject(se("cancel"));}},{key:"read",value:function value(e){return v(this)?void 0===this._ownerReadableStream?Promise.reject(ne("read from")):ArrayBuffer.isView(e)?!0===ye(e.buffer)?Promise.reject(new TypeError("Cannot read into a view onto a detached ArrayBuffer")):0===e.byteLength?Promise.reject(new TypeError("view must have non-zero byteLength")):x(this,e):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(se("read"));}},{key:"releaseLock",value:function value(){if(!v(this))throw se("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");E(this);}}},{key:"closed",get:function get(){return v(this)?this._closedPromise:Promise.reject(se("closed"));}}]),e;}(),Ve=function(){function e(){throw n(this,e),new TypeError();}return le(e,[{key:"close",value:function value(){if(!1===A(this))throw oe("close");if(!1===k(this))throw new TypeError("The stream is not in a state that permits close");N(this);}},{key:"enqueue",value:function value(e){if(!1===A(this))throw oe("enqueue");if(!1===k(this))throw new TypeError("The stream is not in a state that permits enqueue");return P(this,e);}},{key:"error",value:function value(e){if(!1===A(this))throw oe("error");var t=this._controlledReadableStream;if("readable"!==t._state)throw new TypeError("The stream is "+t._state+" and so cannot be errored");C(this,e);}},{key:Me,value:function value(e){return Ae(this),this._cancelAlgorithm(e);}},{key:Fe,value:function value(){var e=this._controlledReadableStream;if(this._queue.length>0){var t=xe(this);return !0===this._closeRequested&&0===this._queue.length?p(e):R(this),Promise.resolve(fe(t,!1));}var r=h(e);return R(this),r;}},{key:"desiredSize",get:function get(){if(!1===A(this))throw oe("desiredSize");return j(this);}}]),e;}(),He=function(){function e(){throw n(this,e),new TypeError("ReadableStreamBYOBRequest cannot be used directly");}return le(e,[{key:"respond",value:function value(e){if(!1===B(this))throw ue("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!0===ye(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");!function(e,t){if(t=Number(t),!1===ge(t))throw new RangeError("bytesWritten must be a finite");J(e,t);}(this._associatedReadableByteStreamController,e);}},{key:"respondWithNewView",value:function value(e){if(!1===B(this))throw ue("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(!0===ye(e.buffer))throw new TypeError("The supplied view's buffer has been detached and so cannot be used as a response");!function(e,t){var r=e._pendingPullIntos[0];if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(r.byteLength!==t.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");r.buffer=t.buffer,J(e,t.byteLength);}(this._associatedReadableByteStreamController,e);}},{key:"view",get:function get(){if(!1===B(this))throw ue("view");return this._view;}}]),e;}(),Ge=function(){function e(){throw n(this,e),new TypeError("ReadableByteStreamController constructor cannot be used directly");}return le(e,[{key:"close",value:function value(){if(!1===F(this))throw ce("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");!function(e){var t=e._controlledReadableByteStream;if(e._queueTotalSize>0)e._closeRequested=!0;else {if(e._pendingPullIntos.length>0&&e._pendingPullIntos[0].bytesFilled>0){var r=new TypeError("Insufficient bytes to fill elements in the given buffer");throw K(e,r),r;}p(t);}}(this);}},{key:"enqueue",value:function value(e){if(!1===F(this))throw ce("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(e))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");if(!0===ye(e.buffer))throw new TypeError("Cannot enqueue a view onto a detached ArrayBuffer");!function(e,t){var r=e._controlledReadableByteStream,n=t.buffer,i=t.byteOffset,a=t.byteLength,s=be(n);!0===_(r)?0===y(r)?G(e,s,i,a):g(r,new Uint8Array(s,i,a),!1):!0===b(r)?(G(e,s,i,a),Y(e)):G(e,s,i,a);}(this,e);}},{key:"error",value:function value(e){if(!1===F(this))throw ce("error");var t=this._controlledReadableByteStream;if("readable"!==t._state)throw new TypeError("The stream is "+t._state+" and so cannot be errored");K(this,e);}},{key:Me,value:function value(e){return this._pendingPullIntos.length>0&&(this._pendingPullIntos[0].bytesFilled=0),Ae(this),this._cancelAlgorithm(e);}},{key:Fe,value:function value(){var e=this._controlledReadableByteStream;if(this._queueTotalSize>0){var t=this._queue.shift();this._queueTotalSize-=t.byteLength,X(this);var r=void 0;try{r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);}catch(e){return Promise.reject(e);}return Promise.resolve(fe(r,!1));}var n=this._autoAllocateChunkSize;if(void 0!==n){var i=void 0;try{i=new ArrayBuffer(n);}catch(e){return Promise.reject(e);}var a={buffer:i,byteOffset:0,byteLength:n,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(a);}var s=h(e);return q(this),s;}},{key:"byobRequest",get:function get(){if(!1===F(this))throw ce("byobRequest");if(void 0===this._byobRequest&&this._pendingPullIntos.length>0){var e=this._pendingPullIntos[0],t=new Uint8Array(e.buffer,e.byteOffset+e.bytesFilled,e.byteLength-e.bytesFilled),r=Object.create(He.prototype);((function(e,t,r){e._associatedReadableByteStreamController=t,e._view=r;}))(r,this,t),this._byobRequest=r;}return this._byobRequest;}},{key:"desiredSize",get:function get(){if(!1===F(this))throw ce("desiredSize");return Z(this);}}]),e;}();},{"./helpers.js":10,"./queue-with-sizes.js":11,"./utils.js":14,"./writable-stream.js":15,"better-assert":16}],13:[function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}function i(e,t,r,n,i,a){function c(){return t;}e._writable=D(c,function(t){return function(e,t){m("TransformStreamDefaultSinkWriteAlgorithm()");var r=e._transformStreamController;return !0===e._backpressure?e._backpressureChangePromise.then(function(){var n=e._writable;if("erroring"===n._state)throw n._storedError;return r._transformAlgorithm(t);}):r._transformAlgorithm(t);}(e,t);},function(){return function(e){m("TransformStreamDefaultSinkCloseAlgorithm()");var t=e._readable;return e._transformStreamController._flushAlgorithm().then(function(){if("errored"===t._state)throw t._storedError;var e=t._readableStreamController;!0===P(e)&&O(e);}).catch(function(r){throw s(e,r),t._storedError;});}(e);},function(){return function(e){return s(e,new TypeError("Writable side aborted")),Promise.resolve();}(e);},r,n),e._readable=x(c,function(){return function(e){return m("TransformStreamDefaultSourcePullAlgorithm()"),u(e,!1),e._backpressureChangePromise;}(e);},function(t){return o(e,t),Promise.resolve();},i,a),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,u(e,!0),e._transformStreamController=void 0;}function a(e){return !!w(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController");}function s(e,t){m("TransformStreamError()"),"readable"===e._readable._state&&R(e._readable._readableStreamController,t),o(e,t);}function o(e,t){j(e._writable._writableStreamController,t),!0===e._backpressure&&u(e,!1);}function u(e,t){m("TransformStreamSetBackpressure() [backpressure = "+t+"]"),void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=new Promise(function(t){e._backpressureChangePromise_resolve=t;}),e._backpressure=t;}function c(e){return !!w(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream");}function l(e,t,r,n){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=r,t._flushAlgorithm=n;}function h(e,t){var r=Object.create(L.prototype),n=function n(e){try{return d(r,e),Promise.resolve();}catch(e){return Promise.reject(e);}},i=t.transform;if(void 0!==i){if("function"!=typeof i)throw new TypeError("transform is not a method");n=function n(_n20){return v(i,t,[_n20,r]).catch(function(t){throw s(e,t),t;});};}var a=_(t,"flush",0,[r]);l(e,r,n,a);}function d(e,t){m("TransformStreamDefaultControllerEnqueue()");var r=e._controlledTransformStream,n=r._readable._readableStreamController;if(!1===P(n))throw new TypeError("Readable side is not in a state that permits enqueue");try{A(n,t);}catch(e){throw o(r,e),r._readable._storedError;}N(n)!==r._backpressure&&u(r,!0);}function p(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController");}function f(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream");}var g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t;};}(),m=(e("better-assert"),e("debug")("streams:transform-stream:verbose")),y=e("./helpers.js"),b=y.InvokeOrNoop,_=y.CreateAlgorithmFromUnderlyingMethod,v=y.PromiseCall,w=y.typeIsObject,S=y.ValidateAndNormalizeHighWaterMark,T=(y.MakeSizeAlgorithmFromSizeFunction),E=e("./readable-stream.js"),x=E.CreateReadableStream,O=E.ReadableStreamDefaultControllerClose,A=E.ReadableStreamDefaultControllerEnqueue,R=E.ReadableStreamDefaultControllerError,I=E.ReadableStreamDefaultControllerGetDesiredSize,N=E.ReadableStreamDefaultControllerHasBackpressure,P=E.ReadableStreamDefaultControllerCanCloseOrEnqueue,C=e("./writable-stream.js"),D=C.CreateWritableStream,j=C.WritableStreamDefaultControllerErrorIfNeeded,k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n(this,e),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var s=r.size,o=T(s),u=r.highWaterMark;void 0===u&&(u=1),u=S(u);var c=a.size,l=T(c),d=a.highWaterMark;void 0===d&&(d=0),d=S(d);var p=void 0;i(this,new Promise(function(e){p=e;}),u,o,d,l),h(this,t);var f=b(t,"start",[this._transformStreamController]);p(f);}return g(e,[{key:"readable",get:function get(){if(!1===a(this))throw f("readable");return this._readable;}},{key:"writable",get:function get(){if(!1===a(this))throw f("writable");return this._writable;}}]),e;}(),L=function(){function e(){throw n(this,e),new TypeError("TransformStreamDefaultController instances cannot be created directly");}return g(e,[{key:"enqueue",value:function value(e){if(!1===c(this))throw p("enqueue");d(this,e);}},{key:"error",value:function value(e){if(!1===c(this))throw p("error");!function(e,t){s(e._controlledTransformStream,t);}(this,e);}},{key:"terminate",value:function value(){if(!1===c(this))throw p("terminate");!function(e){m("TransformStreamDefaultControllerTerminate()");var t=e._controlledTransformStream,r=t._readable._readableStreamController;!0===P(r)&&O(r),o(t,new TypeError("TransformStream terminated"));}(this);}},{key:"desiredSize",get:function get(){if(!1===c(this))throw p("desiredSize");var e=this._controlledTransformStream._readable._readableStreamController;return I(e);}}]),e;}();t.exports={CreateTransformStream:function CreateTransformStream(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return 1;},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){return 1;},u=Object.create(k.prototype),c=void 0;i(u,new Promise(function(e){c=e;}),n,a,s,o),l(u,Object.create(L.prototype),t,r);var h=e();return c(h),u;},TransformStream:k};},{"./helpers.js":10,"./readable-stream.js":12,"./writable-stream.js":15,"better-assert":16,debug:18}],14:[function(e,t,r){var n=e("better-assert");r.rethrowAssertionErrorRejection=function(e){e&&e.constructor===n.AssertionError&&setTimeout(function(){throw e;},0);};},{"better-assert":16}],15:[function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}function i(e){return new Z(e);}function a(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=[],e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1;}function s(e){return !!H(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController");}function o(e){return void 0!==e._writer;}function u(e,t){var r=e._state;if("closed"===r)return Promise.resolve(void 0);if("errored"===r)return Promise.reject(e._storedError);var n=new TypeError("Requested to abort");if(void 0!==e._pendingAbortRequest)return Promise.reject(n);var i=!1;"erroring"===r&&(i=!0,t=void 0);var a=new Promise(function(r,n){e._pendingAbortRequest={_resolve:r,_reject:n,_reason:t,_wasAlreadyErroring:i};});return !1===i&&l(e,n),a;}function c(e,t){M("WritableStreamDealWithRejection(stream, %o)",t),"writable"!==e._state?h(e):l(e,t);}function l(e,t){M("WritableStreamStartErroring(stream, %o)",t);var r=e._writableStreamController;e._state="erroring",e._storedError=t;var n=e._writer;void 0!==n&&b(n,t),!1===function(e){return void 0===e._inFlightWriteRequest&&void 0===e._inFlightCloseRequest?(M("WritableStreamHasOperationMarkedInFlight() is false"),!1):(M("WritableStreamHasOperationMarkedInFlight() is true"),!0);}(e)&&!0===r._started&&h(e);}function h(e){M("WritableStreamFinishErroring()"),e._state="errored",e._writableStreamController[W]();var t=e._storedError,r=!0,n=!1,i=void 0;try{for(var a,s=e._writeRequests[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){a.value._reject(t);}}catch(e){n=!0,i=e;}finally{try{!r&&s.return&&s.return();}finally{if(n)throw i;}}if(e._writeRequests=[],void 0!==e._pendingAbortRequest){var o=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,!0===o._wasAlreadyErroring)return o._reject(t),void p(e);e._writableStreamController[J](o._reason).then(function(){o._resolve(),p(e);},function(t){o._reject(t),p(e);});}else p(e);}function d(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest;}function p(e){M("WritableStreamRejectCloseAndClosedPromiseIfNeeded()"),void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var t=e._writer;void 0!==t&&(C(t,e._storedError),t._closedPromise.catch(function(){}));}function f(e,t){var r=e._writer;void 0!==r&&t!==e._backpressure&&(!0===t?function(e){M("defaultWriterReadyPromiseReset()"),e._readyPromise=new Promise(function(t,r){e._readyPromise_resolve=t,e._readyPromise_reject=r;}),e._readyPromiseState="pending";}(r):k(r)),e._backpressure=t;}function g(e){return !!H(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream");}function m(e){var t=e._ownerWritableStream,r=t._state;if("closed"===r||"errored"===r)return Promise.reject(new TypeError("The stream (in "+r+" state) is not in the writable state and cannot be closed"));var n=new Promise(function(e,r){var n={_resolve:e,_reject:r};t._closeRequest=n;});return !0===t._backpressure&&"writable"===r&&k(e),function(e){X(e,"close",0),E(e);}(t._writableStreamController),n;}function y(e,t){"pending"===e._closedPromiseState?C(e,t):function(e,t){e._closedPromise=Promise.reject(t),e._closedPromiseState="rejected";}(e,t),e._closedPromise.catch(function(){});}function b(e,t){M("WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, %o)",t),"pending"===e._readyPromiseState?function(e,t){M("defaultWriterReadyPromiseReject(writer, %o)",t),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected";}(e,t):function(e,t){M("defaultWriterReadyPromiseResetToRejected(writer, %o)",t),e._readyPromise=Promise.reject(t),e._readyPromiseState="rejected";}(e,t),e._readyPromise.catch(function(){});}function _(e){var t=e._ownerWritableStream,r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");b(e,r),y(e,r),t._writer=void 0,e._ownerWritableStream=void 0;}function v(e,t){var r=e._ownerWritableStream,n=r._writableStreamController,i=function(e,t){try{return e._strategySizeAlgorithm(t);}catch(t){return x(e,t),1;}}(n,t);if(r!==e._ownerWritableStream)return Promise.reject(N("write to"));var a=r._state;if("errored"===a)return Promise.reject(r._storedError);if(!0===d(r)||"closed"===a)return Promise.reject(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===a)return Promise.reject(r._storedError);var s=function(e){return new Promise(function(t,r){var n={_resolve:t,_reject:r};e._writeRequests.push(n);});}(r);return function(e,t,r){var n={chunk:t};try{X(e,n,r);}catch(t){return void x(e,t);}var i=e._controlledWritableStream;!1===d(i)&&"writable"===i._state&&f(i,O(e)),E(e);}(n,t,i),s;}function w(e,t,r,n,i,a,s,o){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Y(t),t._started=!1,t._strategySizeAlgorithm=o,t._strategyHWM=s,t._writeAlgorithm=n,t._closeAlgorithm=i,t._abortAlgorithm=a;var u=O(t);f(e,u);var l=r();Promise.resolve(l).then(function(){t._started=!0,E(t);},function(r){t._started=!0,c(e,r);}).catch(G);}function S(e,t,r,n){var i=Object.create(ee.prototype),a=B(t,"write",1,[i]),s=B(t,"close",0,[]),o=B(t,"abort",1,[]);w(e,i,function(){return q(t,"start",[i]);},a,s,o,r,n);}function T(e){return e._strategyHWM-e._queueTotalSize;}function E(e){M("WritableStreamDefaultControllerAdvanceQueueIfNeeded()");var t=e._controlledWritableStream;if(!1!==e._started&&void 0===t._inFlightWriteRequest){var r=t._state;if("closed"!==r&&"errored"!==r)if("erroring"!==r){if(0!==e._queue.length){var n=$(e);"close"===n?function(e){var t=e._controlledWritableStream;((function(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0;}))(t),Q(e),e._closeAlgorithm().then(function(){!function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,"erroring"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";var t=e._writer;void 0!==t&&function(e){e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved";}(t);}(t);},function(e){!function(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),c(e,t);}(t,e);}).catch(G);}(e):function(e,t){var r=e._controlledWritableStream;((function(e){e._inFlightWriteRequest=e._writeRequests.shift();}))(r),e._writeAlgorithm(t).then(function(){!function(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0;}(r);var t=r._state;if(Q(e),!1===d(r)&&"writable"===t){var n=O(e);f(r,n);}E(e);},function(e){!function(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,c(e,t);}(r,e);}).catch(G);}(e,n.chunk);}}else h(t);}}function x(e,t){"writable"===e._controlledWritableStream._state&&A(e,t);}function O(e){return T(e)<=0;}function A(e,t){l(e._controlledWritableStream,t);}function R(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream");}function I(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter");}function N(e){return new TypeError("Cannot "+e+" a stream using a released writer");}function P(e){e._closedPromise=new Promise(function(t,r){e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState="pending";});}function C(e,t){e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected";}function D(e,t){M("defaultWriterReadyPromiseInitializeAsRejected(writer, %o)",t),e._readyPromise=Promise.reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected";}function j(e){M("defaultWriterReadyPromiseInitializeAsResolved()"),e._readyPromise=Promise.resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled";}function k(e){M("defaultWriterReadyPromiseResolve()"),e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled";}var L=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t;};}(),M=(e("better-assert"),e("debug")("streams:writable-stream:verbose")),F=e("./helpers.js"),B=F.CreateAlgorithmFromUnderlyingMethod,q=F.InvokeOrNoop,U=F.ValidateAndNormalizeHighWaterMark,V=(F.MakeSizeAlgorithmFromSizeFunction),H=F.typeIsObject,G=e("./utils.js").rethrowAssertionErrorRejection,z=e("./queue-with-sizes.js"),Q=z.DequeueValue,X=z.EnqueueValueWithSize,$=z.PeekQueueValue,Y=z.ResetQueue,J=Symbol("[[AbortSteps]]"),W=Symbol("[[ErrorSteps]]"),K=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.size,s=r.highWaterMark,o=void 0===s?1:s;if(n(this,e),a(this),void 0!==t.type)throw new RangeError("Invalid type is specified");var u=V(i);S(this,t,o=U(o),u);}return L(e,[{key:"abort",value:function value(e){return !1===s(this)?Promise.reject(R("abort")):!0===o(this)?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):u(this,e);}},{key:"getWriter",value:function value(){if(!1===s(this))throw R("getWriter");return i(this);}},{key:"locked",get:function get(){if(!1===s(this))throw R("locked");return o(this);}}]),e;}();t.exports={AcquireWritableStreamDefaultWriter:i,CreateWritableStream:function CreateWritableStream(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return 1;},o=Object.create(K.prototype);return a(o),w(o,Object.create(ee.prototype),e,t,r,n,i,s),o;},IsWritableStream:s,IsWritableStreamLocked:o,WritableStream:K,WritableStreamAbort:u,WritableStreamDefaultControllerErrorIfNeeded:x,WritableStreamDefaultWriterCloseWithErrorPropagation:function WritableStreamDefaultWriterCloseWithErrorPropagation(e){var t=e._ownerWritableStream,r=t._state;return !0===d(t)||"closed"===r?Promise.resolve():"errored"===r?Promise.reject(t._storedError):m(e);},WritableStreamDefaultWriterRelease:_,WritableStreamDefaultWriterWrite:v,WritableStreamCloseQueuedOrInFlight:d};var Z=function(){function e(t){if(n(this,e),!1===s(t))throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===o(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;var r=t._state;if("writable"===r)!1===d(t)&&!0===t._backpressure?function(e){M("defaultWriterReadyPromiseInitialize()"),e._readyPromise=new Promise(function(t,r){e._readyPromise_resolve=t,e._readyPromise_reject=r;}),e._readyPromiseState="pending";}(this):j(this),P(this);else if("erroring"===r)D(this,t._storedError),this._readyPromise.catch(function(){}),P(this);else if("closed"===r)j(this),function(e){e._closedPromise=Promise.resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved";}(this);else {var i=t._storedError;D(this,i),this._readyPromise.catch(function(){}),function(e,t){e._closedPromise=Promise.reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected";}(this,i),this._closedPromise.catch(function(){});}}return L(e,[{key:"abort",value:function value(e){return !1===g(this)?Promise.reject(I("abort")):void 0===this._ownerWritableStream?Promise.reject(N("abort")):function(e,t){return u(e._ownerWritableStream,t);}(this,e);}},{key:"close",value:function value(){if(!1===g(this))return Promise.reject(I("close"));var e=this._ownerWritableStream;return void 0===e?Promise.reject(N("close")):!0===d(e)?Promise.reject(new TypeError("cannot close an already-closing stream")):m(this);}},{key:"releaseLock",value:function value(){if(!1===g(this))throw I("releaseLock");void 0!==this._ownerWritableStream&&_(this);}},{key:"write",value:function value(e){return !1===g(this)?Promise.reject(I("write")):void 0===this._ownerWritableStream?Promise.reject(N("write to")):v(this,e);}},{key:"closed",get:function get(){return !1===g(this)?Promise.reject(I("closed")):this._closedPromise;}},{key:"desiredSize",get:function get(){if(!1===g(this))throw I("desiredSize");if(void 0===this._ownerWritableStream)throw N("desiredSize");return e=this._ownerWritableStream,"errored"===(t=e._state)||"erroring"===t?null:"closed"===t?0:T(e._writableStreamController);var e,t;}},{key:"ready",get:function get(){return !1===g(this)?Promise.reject(I("ready")):this._readyPromise;}}]),e;}(),ee=function(){function e(){throw n(this,e),new TypeError("WritableStreamDefaultController cannot be constructed explicitly");}return L(e,[{key:"error",value:function value(e){if(!1===function(e){return !!H(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream");}(this))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this._controlledWritableStream._state&&A(this,e);}},{key:J,value:function value(e){return this._abortAlgorithm(e);}},{key:W,value:function value(){Y(this);}}]),e;}();},{"./helpers.js":10,"./queue-with-sizes.js":11,"./utils.js":14,"better-assert":16,debug:18}],16:[function(e,t,r){(function(r){var n=e("assert").AssertionError,i=e("callsite"),a=e("fs");t.exports=r.env.NO_ASSERT?function(){}:function(e){if(!e){var t=i(),r=t[1],s=r.getFileName(),o=r.getLineNumber(),u=(u=a.readFileSync(s,"utf8")).split("\n")[o-1].match(/assert\((.*)\)/)[1];throw new n({message:u,stackStartFunction:t[0].getFunction()});}};}).call(this,e("_process"));},{_process:4,assert:2,callsite:17,fs:3}],17:[function(e,t,r){t.exports=function(){var e=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t;};var t=new Error();Error.captureStackTrace(t,arguments.callee);var r=t.stack;return Error.prepareStackTrace=e,r;};},{}],18:[function(e,t,r){(function(n){function i(){var e;try{e=r.storage.debug;}catch(e){}return !e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e;}(r=t.exports=e("./debug")).log=function(){return "object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments);},r.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(a=i));}),e.splice(a,0,n);}},r.save=function(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e;}catch(e){}},r.load=i,r.useColors=function(){return !("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));},r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage;}catch(e){}}(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.formatters.j=function(e){try{return JSON.stringify(e);}catch(e){return "[UnexpectedJSONParseError]: "+e.message;}},r.enable(i());}).call(this,e("_process"));},{"./debug":19,_process:4}],19:[function(e,t,r){function n(e){function t(){if(t.enabled){var e=t,i=+new Date(),a=i-(n||i);e.diff=a,e.prev=n,e.curr=i,n=i;for(var s=new Array(arguments.length),o=0;o<s.length;o++){s[o]=arguments[o];}s[0]=r.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;u++;var i=r.formatters[n];if("function"==typeof i){var a=s[u];t=i.call(e,a),s.splice(u,1),u--;}return t;}),r.formatArgs.call(e,s),(t.log||r.log||console.log.bind(console)).apply(e,s);}}var n;return t.namespace=e,t.enabled=r.enabled(e),t.useColors=r.useColors(),t.color=function(e){var t,n=0;for(t in e){n=(n<<5)-n+e.charCodeAt(t),n|=0;}return r.colors[Math.abs(n)%r.colors.length];}(e),t.destroy=i,"function"==typeof r.init&&r.init(t),r.instances.push(t),t;}function i(){var e=r.instances.indexOf(this);return -1!==e&&(r.instances.splice(e,1),!0);}(r=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e;},r.disable=function(){r.enable("");},r.enable=function(e){r.save(e),r.names=[],r.skips=[];var t,n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++){n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));}for(t=0;t<r.instances.length;t++){var a=r.instances[t];a.enabled=r.enabled(a.namespace);}},r.enabled=function(e){if("*"===e[e.length-1])return !0;var t,n;for(t=0,n=r.skips.length;t<n;t++){if(r.skips[t].test(e))return !1;}for(t=0,n=r.names.length;t<n;t++){if(r.names[t].test(e))return !0;}return !1;},r.humanize=e("ms"),r.instances=[],r.names=[],r.skips=[],r.formatters={};},{ms:20}],20:[function(e,t,r){function n(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*h;case"days":case"day":case"d":return r*l;case"hours":case"hour":case"hrs":case"hr":case"h":return r*c;case"minutes":case"minute":case"mins":case"min":case"m":return r*u;case"seconds":case"second":case"secs":case"sec":case"s":return r*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return;}}}}function i(e){return e>=l?Math.round(e/l)+"d":e>=c?Math.round(e/c)+"h":e>=u?Math.round(e/u)+"m":e>=o?Math.round(e/o)+"s":e+"ms";}function a(e){return s(e,l,"day")||s(e,c,"hour")||s(e,u,"minute")||s(e,o,"second")||e+" ms";}function s(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s";}var o=1e3,u=60*o,c=60*u,l=24*c,h=365.25*l;t.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return n(e);if("number"===r&&!1===isNaN(e))return t.long?a(e):i(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e));};},{}]},{},[1])(1);}).call(this,r(10));},function(e,t,r){var n=r(128),i=r(253),a=r(256);function s(e){return e&&e.rel;}function o(e,t){return t.rel.split(/\s+/).forEach(function(r){e[r]=a(t,{rel:r});}),e;}function u(e,t){var r=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return r&&(e[r[1]]=r[2]),e;}function c(e){try{var t=e.match(/<?([^>]*)>(.*)/),r=t[1],s=t[2].split(";"),o=i.parse(r),c=n.parse(o.query);s.shift();var l=s.reduce(u,{});return (l=a(c,l)).url=r,l;}catch(e){return null;}}e.exports=function(e){return e?e.split(/,\s*</).map(c).filter(s).reduce(o,{}):null;};},function(e,t,r){t.decode=t.parse=r(251),t.encode=t.stringify=r(252);},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(257),t),i(r(258),t);},function(e,t,r){var n=r(263),i=r(264),a=r(265),s=r(266),o=r(267);e.exports={DynamicNestedLoopJoin:n,HashJoin:i,NestedLoopJoin:a,SymmetricHashJoin:s,MergeStream:o};},function(e,t,r){(function(e){!function(t){t.parser=function(e,t){return new a(e,t);},t.SAXParser=a,t.SAXStream=o,t.createStream=function(e,t){return new o(e,t);},t.MAX_BUFFER_LENGTH=65536;var n,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function a(e,r){if(!(this instanceof a))return new a(e,r);!function(e){for(var t=0,r=i.length;t<r;t++){e[i[t]]="";}}(this),this.q=this.c="",this.bufferCheckPosition=t.MAX_BUFFER_LENGTH,this.opt=r||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!e,this.noscript=!(!e&&!this.opt.noscript),this.state=S.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(c)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),E(this,"onready");}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t();}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e){e.hasOwnProperty(r)&&t.push(r);}return t;}),a.prototype={end:function end(){I(this);},write:function write(e){if(this.error)throw this.error;if(this.closed)return R(this,"Cannot write after close. Assign an onready handler.");if(null===e)return I(this);"object"==typeof e&&(e=e.toString());var r=0,n="";for(;n=F(e,r++),this.c=n,n;){switch(this.trackPosition&&(this.position++,"\n"===n?(this.line++,this.column=0):this.column++),this.state){case S.BEGIN:if(this.state=S.BEGIN_WHITESPACE,"\ufeff"===n)continue;M(this,n);continue;case S.BEGIN_WHITESPACE:M(this,n);continue;case S.TEXT:if(this.sawRoot&&!this.closedRoot){for(var a=r-1;n&&"<"!==n&&"&"!==n;){(n=F(e,r++))&&this.trackPosition&&(this.position++,"\n"===n?(this.line++,this.column=0):this.column++);}this.textNode+=e.substring(a,r-1);}"<"!==n||this.sawRoot&&this.closedRoot&&!this.strict?(f(n)||this.sawRoot&&!this.closedRoot||N(this,"Text data outside of root node."),"&"===n?this.state=S.TEXT_ENTITY:this.textNode+=n):(this.state=S.OPEN_WAKA,this.startTagPosition=this.position);continue;case S.SCRIPT:"<"===n?this.state=S.SCRIPT_ENDING:this.script+=n;continue;case S.SCRIPT_ENDING:"/"===n?this.state=S.CLOSE_TAG:(this.script+="<"+n,this.state=S.SCRIPT);continue;case S.OPEN_WAKA:if("!"===n)this.state=S.SGML_DECL,this.sgmlDecl="";else if(f(n));else if(y(l,n))this.state=S.OPEN_TAG,this.tagName=n;else if("/"===n)this.state=S.CLOSE_TAG,this.tagName="";else if("?"===n)this.state=S.PROC_INST,this.procInstName=this.procInstBody="";else {if(N(this,"Unencoded <"),this.startTagPosition+1<this.position){var s=this.position-this.startTagPosition;n=new Array(s).join(" ")+n;}this.textNode+="<"+n,this.state=S.TEXT;}continue;case S.SGML_DECL:"[CDATA["===(this.sgmlDecl+n).toUpperCase()?(x(this,"onopencdata"),this.state=S.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+n==="--"?(this.state=S.COMMENT,this.comment="",this.sgmlDecl=""):"DOCTYPE"===(this.sgmlDecl+n).toUpperCase()?(this.state=S.DOCTYPE,(this.doctype||this.sawRoot)&&N(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===n?(x(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=S.TEXT):g(n)?(this.state=S.SGML_DECL_QUOTED,this.sgmlDecl+=n):this.sgmlDecl+=n;continue;case S.SGML_DECL_QUOTED:n===this.q&&(this.state=S.SGML_DECL,this.q=""),this.sgmlDecl+=n;continue;case S.DOCTYPE:">"===n?(this.state=S.TEXT,x(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=n,"["===n?this.state=S.DOCTYPE_DTD:g(n)&&(this.state=S.DOCTYPE_QUOTED,this.q=n));continue;case S.DOCTYPE_QUOTED:this.doctype+=n,n===this.q&&(this.q="",this.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:this.doctype+=n,"]"===n?this.state=S.DOCTYPE:g(n)&&(this.state=S.DOCTYPE_DTD_QUOTED,this.q=n);continue;case S.DOCTYPE_DTD_QUOTED:this.doctype+=n,n===this.q&&(this.state=S.DOCTYPE_DTD,this.q="");continue;case S.COMMENT:"-"===n?this.state=S.COMMENT_ENDING:this.comment+=n;continue;case S.COMMENT_ENDING:"-"===n?(this.state=S.COMMENT_ENDED,this.comment=A(this.opt,this.comment),this.comment&&x(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+n,this.state=S.COMMENT);continue;case S.COMMENT_ENDED:">"!==n?(N(this,"Malformed comment"),this.comment+="--"+n,this.state=S.COMMENT):this.state=S.TEXT;continue;case S.CDATA:"]"===n?this.state=S.CDATA_ENDING:this.cdata+=n;continue;case S.CDATA_ENDING:"]"===n?this.state=S.CDATA_ENDING_2:(this.cdata+="]"+n,this.state=S.CDATA);continue;case S.CDATA_ENDING_2:">"===n?(this.cdata&&x(this,"oncdata",this.cdata),x(this,"onclosecdata"),this.cdata="",this.state=S.TEXT):"]"===n?this.cdata+="]":(this.cdata+="]]"+n,this.state=S.CDATA);continue;case S.PROC_INST:"?"===n?this.state=S.PROC_INST_ENDING:f(n)?this.state=S.PROC_INST_BODY:this.procInstName+=n;continue;case S.PROC_INST_BODY:if(!this.procInstBody&&f(n))continue;"?"===n?this.state=S.PROC_INST_ENDING:this.procInstBody+=n;continue;case S.PROC_INST_ENDING:">"===n?(x(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=S.TEXT):(this.procInstBody+="?"+n,this.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:y(h,n)?this.tagName+=n:(P(this),">"===n?j(this):"/"===n?this.state=S.OPEN_TAG_SLASH:(f(n)||N(this,"Invalid character in tag name"),this.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:">"===n?(j(this,!0),k(this)):(N(this,"Forward-slash in opening tag not followed by >"),this.state=S.ATTRIB);continue;case S.ATTRIB:if(f(n))continue;">"===n?j(this):"/"===n?this.state=S.OPEN_TAG_SLASH:y(l,n)?(this.attribName=n,this.attribValue="",this.state=S.ATTRIB_NAME):N(this,"Invalid attribute name");continue;case S.ATTRIB_NAME:"="===n?this.state=S.ATTRIB_VALUE:">"===n?(N(this,"Attribute without value"),this.attribValue=this.attribName,D(this),j(this)):f(n)?this.state=S.ATTRIB_NAME_SAW_WHITE:y(h,n)?this.attribName+=n:N(this,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if("="===n)this.state=S.ATTRIB_VALUE;else {if(f(n))continue;N(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",x(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===n?j(this):y(l,n)?(this.attribName=n,this.state=S.ATTRIB_NAME):(N(this,"Invalid attribute name"),this.state=S.ATTRIB);}continue;case S.ATTRIB_VALUE:if(f(n))continue;g(n)?(this.q=n,this.state=S.ATTRIB_VALUE_QUOTED):(N(this,"Unquoted attribute value"),this.state=S.ATTRIB_VALUE_UNQUOTED,this.attribValue=n);continue;case S.ATTRIB_VALUE_QUOTED:if(n!==this.q){"&"===n?this.state=S.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=n;continue;}D(this),this.q="",this.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:f(n)?this.state=S.ATTRIB:">"===n?j(this):"/"===n?this.state=S.OPEN_TAG_SLASH:y(l,n)?(N(this,"No whitespace between attributes"),this.attribName=n,this.attribValue="",this.state=S.ATTRIB_NAME):N(this,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(!m(n)){"&"===n?this.state=S.ATTRIB_VALUE_ENTITY_U:this.attribValue+=n;continue;}D(this),">"===n?j(this):this.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(this.tagName)">"===n?k(this):y(h,n)?this.tagName+=n:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=S.SCRIPT):(f(n)||N(this,"Invalid tagname in closing tag"),this.state=S.CLOSE_TAG_SAW_WHITE);else {if(f(n))continue;b(l,n)?this.script?(this.script+="</"+n,this.state=S.SCRIPT):N(this,"Invalid tagname in closing tag."):this.tagName=n;}continue;case S.CLOSE_TAG_SAW_WHITE:if(f(n))continue;">"===n?k(this):N(this,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var o,u;switch(this.state){case S.TEXT_ENTITY:o=S.TEXT,u="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:o=S.ATTRIB_VALUE_QUOTED,u="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:o=S.ATTRIB_VALUE_UNQUOTED,u="attribValue";}";"===n?(this[u]+=L(this),this.entity="",this.state=o):y(this.entity.length?p:d,n)?this.entity+=n:(N(this,"Invalid character in entity name"),this[u]+="&"+this.entity+n,this.entity="",this.state=o);continue;default:throw new Error(this,"Unknown state: "+this.state);}}this.position>=this.bufferCheckPosition&&function(e){for(var r=Math.max(t.MAX_BUFFER_LENGTH,10),n=0,a=0,s=i.length;a<s;a++){var o=e[i[a]].length;if(o>r)switch(i[a]){case"textNode":O(e);break;case"cdata":x(e,"oncdata",e.cdata),e.cdata="";break;case"script":x(e,"onscript",e.script),e.script="";break;default:R(e,"Max buffer length exceeded: "+i[a]);}n=Math.max(n,o);}var u=t.MAX_BUFFER_LENGTH-n;e.bufferCheckPosition=u+e.position;}(this);return this;}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function resume(){return this.error=null,this;},close:function close(){return this.write(null);},flush:function flush(){var e;O(e=this),""!==e.cdata&&(x(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(x(e,"onscript",e.script),e.script="");}};try{n=r(2).Stream;}catch(e){n=function n(){};}var s=t.EVENTS.filter(function(e){return "error"!==e&&"end"!==e;});function o(e,t){if(!(this instanceof o))return new o(e,t);n.apply(this),this._parser=new a(e,t),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end");},this._parser.onerror=function(e){r.emit("error",e),r._parser.error=null;},this._decoder=null,s.forEach(function(e){Object.defineProperty(r,"on"+e,{get:function get(){return r._parser["on"+e];},set:function set(t){if(!t)return r.removeAllListeners(e),r._parser["on"+e]=t,t;r.on(e,t);},enumerable:!0,configurable:!1});});}o.prototype=Object.create(n.prototype,{constructor:{value:o}}),o.prototype.write=function(t){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(t)){if(!this._decoder){var n=r(33).StringDecoder;this._decoder=new n("utf8");}t=this._decoder.write(t);}return this._parser.write(t.toString()),this.emit("data",t),!0;},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0;},o.prototype.on=function(e,t){var r=this;return r._parser["on"+e]||-1===s.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t);}),n.prototype.on.call(r,e,t);};var u="http://www.w3.org/XML/1998/namespace",c={xml:u,xmlns:"http://www.w3.org/2000/xmlns/"},l=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function f(e){return " "===e||"\n"===e||"\r"===e||"\t"===e;}function g(e){return '"'===e||"'"===e;}function m(e){return ">"===e||f(e);}function y(e,t){return e.test(t);}function b(e,t){return !y(e,t);}var _,v,w,S=0;for(var T in t.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(e){var r=t.ENTITIES[e],n="number"==typeof r?String.fromCharCode(r):r;t.ENTITIES[e]=n;}),t.STATE){t.STATE[t.STATE[T]]=T;}function E(e,t,r){e[t]&&e[t](r);}function x(e,t,r){e.textNode&&O(e),E(e,t,r);}function O(e){e.textNode=A(e.opt,e.textNode),e.textNode&&E(e,"ontext",e.textNode),e.textNode="";}function A(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t;}function R(e,t){return O(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,E(e,"onerror",t),e;}function I(e){return e.sawRoot&&!e.closedRoot&&N(e,"Unclosed root tag"),e.state!==S.BEGIN&&e.state!==S.BEGIN_WHITESPACE&&e.state!==S.TEXT&&R(e,"Unexpected end"),O(e),e.c="",e.closed=!0,E(e,"onend"),a.call(e,e.strict,e.opt),e;}function N(e,t){if("object"!=typeof e||!(e instanceof a))throw new Error("bad call to strictFail");e.strict&&R(e,t);}function P(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0,x(e,"onopentagstart",r);}function C(e,t){var r=e.indexOf(":")<0?["",e]:e.split(":"),n=r[0],i=r[1];return t&&"xmlns"===e&&(n="xmlns",i=""),{prefix:n,local:i};}function D(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else {if(e.opt.xmlns){var t=C(e.attribName,!0),r=t.prefix,n=t.local;if("xmlns"===r)if("xml"===n&&e.attribValue!==u)N(e,"xml: prefix must be bound to "+u+"\nActual: "+e.attribValue);else if("xmlns"===n&&"http://www.w3.org/2000/xmlns/"!==e.attribValue)N(e,"xmlns: prefix must be bound to http://www.w3.org/2000/xmlns/\nActual: "+e.attribValue);else {var i=e.tag,a=e.tags[e.tags.length-1]||e;i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[n]=e.attribValue;}e.attribList.push([e.attribName,e.attribValue]);}else e.tag.attributes[e.attribName]=e.attribValue,x(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue="";}}function j(e,t){if(e.opt.xmlns){var r=e.tag,n=C(e.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(N(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=n.prefix);var i=e.tags[e.tags.length-1]||e;r.ns&&i.ns!==r.ns&&Object.keys(r.ns).forEach(function(t){x(e,"onopennamespace",{prefix:t,uri:r.ns[t]});});for(var a=0,s=e.attribList.length;a<s;a++){var o=e.attribList[a],u=o[0],c=o[1],l=C(u,!0),h=l.prefix,d=l.local,p=""===h?"":r.ns[h]||"",f={name:u,value:c,prefix:h,local:d,uri:p};h&&"xmlns"!==h&&!p&&(N(e,"Unbound namespace prefix: "+JSON.stringify(h)),f.uri=h),e.tag.attributes[u]=f,x(e,"onattribute",f);}e.attribList.length=0;}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),x(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=S.TEXT:e.state=S.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0;}function k(e){if(!e.tagName)return N(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=S.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=S.SCRIPT);x(e,"onscript",e.script),e.script="";}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var n=r;t--;){if(e.tags[t].name===n)break;N(e,"Unexpected close tag");}if(t<0)return N(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=S.TEXT);e.tagName=r;for(var i=e.tags.length;i-->t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,x(e,"onclosetag",e.tagName);var s={};for(var o in a.ns){s[o]=a.ns[o];}var u=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==u.ns&&Object.keys(a.ns).forEach(function(t){var r=a.ns[t];x(e,"onclosenamespace",{prefix:t,uri:r});});}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=S.TEXT;}function L(e){var t,r=e.entity,n=r.toLowerCase(),i="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[n]?e.ENTITIES[n]:("#"===(r=n).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),i=(t=parseInt(r,16)).toString(16)):(r=r.slice(1),i=(t=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==r?(N(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t));}function M(e,t){"<"===t?(e.state=S.OPEN_WAKA,e.startTagPosition=e.position):f(t)||(N(e,"Non-whitespace before first tag."),e.textNode=t,e.state=S.TEXT);}function F(e,t){var r="";return t<e.length&&(r=e.charAt(t)),r;}S=t.STATE,String.fromCodePoint||(_=String.fromCharCode,v=Math.floor,w=function w(){var e,t,r=16384,n=[],i=-1,a=arguments.length;if(!a)return "";for(var s="";++i<a;){var o=Number(arguments[i]);if(!isFinite(o)||o<0||o>1114111||v(o)!==o)throw RangeError("Invalid code point: "+o);o<=65535?n.push(o):(e=55296+((o-=65536)>>10),t=o%1024+56320,n.push(e,t)),(i+1===a||n.length>r)&&(s+=_.apply(null,n),n.length=0);}return s;},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:w,configurable:!0,writable:!0}):String.fromCodePoint=w);}(t);}).call(this,r(11).Buffer);},function(e,t,r){var _n21,i=this&&this.__extends||(_n21=function n(e,t){return (_n21=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t;}||function(e,t){for(var r in t){t.hasOwnProperty(r)&&(e[r]=t[r]);}})(e,t);},function(e,t){function r(){this.constructor=e;}_n21(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r());}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e};};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(133)),o=r(22),u=new Set(["input","option","optgroup","select","button","datalist","textarea"]),c=new Set(["p"]),l={tr:new Set(["tr","th","td"]),th:new Set(["th"]),td:new Set(["thead","th","td"]),body:new Set(["head","link","script"]),li:new Set(["li"]),p:c,h1:c,h2:c,h3:c,h4:c,h5:c,h6:c,select:u,input:u,output:u,button:u,datalist:u,textarea:u,option:new Set(["option"]),optgroup:new Set(["optgroup","option"]),dd:new Set(["dt","dd"]),dt:new Set(["dt","dd"]),address:c,article:c,aside:c,blockquote:c,details:c,div:c,dl:c,fieldset:c,figcaption:c,figure:c,footer:c,form:c,header:c,hr:c,main:c,nav:c,ol:c,pre:c,section:c,table:c,ul:c,rt:new Set(["rt","rp"]),rp:new Set(["rt","rp"]),tbody:new Set(["thead","tbody"]),tfoot:new Set(["thead","tbody"])},h=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),d=new Set(["math","svg"]),p=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),f=/\s|\//,g=function(e){function t(r,n){var i=e.call(this)||this;return i._tagname="",i._attribname="",i._attribvalue="",i._attribs=null,i._stack=[],i._foreignContext=[],i.startIndex=0,i.endIndex=null,i.parseChunk=t.prototype.write,i.done=t.prototype.end,i._options=n||{},i._cbs=r||{},i._tagname="",i._attribname="",i._attribvalue="",i._attribs=null,i._stack=[],i._foreignContext=[],i.startIndex=0,i.endIndex=null,i._lowerCaseTagNames="lowerCaseTags"in i._options?!!i._options.lowerCaseTags:!i._options.xmlMode,i._lowerCaseAttributeNames="lowerCaseAttributeNames"in i._options?!!i._options.lowerCaseAttributeNames:!i._options.xmlMode,i._tokenizer=new(i._options.Tokenizer||s.default)(i._options,i),i._cbs.onparserinit&&i._cbs.onparserinit(i),i;}return i(t,e),t.prototype._updatePosition=function(e){null===this.endIndex?this._tokenizer._sectionStart<=e?this.startIndex=0:this.startIndex=this._tokenizer._sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this._tokenizer.getAbsoluteIndex();},t.prototype.ontext=function(e){this._updatePosition(1),this.endIndex--,this._cbs.ontext&&this._cbs.ontext(e);},t.prototype.onopentagname=function(e){if(this._lowerCaseTagNames&&(e=e.toLowerCase()),this._tagname=e,!this._options.xmlMode&&Object.prototype.hasOwnProperty.call(l,e))for(var t=void 0;l[e].has(t=this._stack[this._stack.length-1]);this.onclosetag(t)){}!this._options.xmlMode&&h.has(e)||(this._stack.push(e),d.has(e)?this._foreignContext.push(!0):p.has(e)&&this._foreignContext.push(!1)),this._cbs.onopentagname&&this._cbs.onopentagname(e),this._cbs.onopentag&&(this._attribs={});},t.prototype.onopentagend=function(){this._updatePosition(1),this._attribs&&(this._cbs.onopentag&&this._cbs.onopentag(this._tagname,this._attribs),this._attribs=null),!this._options.xmlMode&&this._cbs.onclosetag&&h.has(this._tagname)&&this._cbs.onclosetag(this._tagname),this._tagname="";},t.prototype.onclosetag=function(e){if(this._updatePosition(1),this._lowerCaseTagNames&&(e=e.toLowerCase()),(d.has(e)||p.has(e))&&this._foreignContext.pop(),!this._stack.length||!this._options.xmlMode&&h.has(e))this._options.xmlMode||"br"!==e&&"p"!==e||(this.onopentagname(e),this._closeCurrentTag());else {var t=this._stack.lastIndexOf(e);if(-1!==t){if(this._cbs.onclosetag)for(t=this._stack.length-t;t--;){this._cbs.onclosetag(this._stack.pop());}else this._stack.length=t;}else "p"!==e||this._options.xmlMode||(this.onopentagname(e),this._closeCurrentTag());}},t.prototype.onselfclosingtag=function(){this._options.xmlMode||this._options.recognizeSelfClosing||this._foreignContext[this._foreignContext.length-1]?this._closeCurrentTag():this.onopentagend();},t.prototype._closeCurrentTag=function(){var e=this._tagname;this.onopentagend(),this._stack[this._stack.length-1]===e&&(this._cbs.onclosetag&&this._cbs.onclosetag(e),this._stack.pop());},t.prototype.onattribname=function(e){this._lowerCaseAttributeNames&&(e=e.toLowerCase()),this._attribname=e;},t.prototype.onattribdata=function(e){this._attribvalue+=e;},t.prototype.onattribend=function(){this._cbs.onattribute&&this._cbs.onattribute(this._attribname,this._attribvalue),this._attribs&&!Object.prototype.hasOwnProperty.call(this._attribs,this._attribname)&&(this._attribs[this._attribname]=this._attribvalue),this._attribname="",this._attribvalue="";},t.prototype._getInstructionName=function(e){var t=e.search(f),r=t<0?e:e.substr(0,t);return this._lowerCaseTagNames&&(r=r.toLowerCase()),r;},t.prototype.ondeclaration=function(e){if(this._cbs.onprocessinginstruction){var t=this._getInstructionName(e);this._cbs.onprocessinginstruction("!"+t,"!"+e);}},t.prototype.onprocessinginstruction=function(e){if(this._cbs.onprocessinginstruction){var t=this._getInstructionName(e);this._cbs.onprocessinginstruction("?"+t,"?"+e);}},t.prototype.oncomment=function(e){this._updatePosition(4),this._cbs.oncomment&&this._cbs.oncomment(e),this._cbs.oncommentend&&this._cbs.oncommentend();},t.prototype.oncdata=function(e){this._updatePosition(1),this._options.xmlMode||this._options.recognizeCDATA?(this._cbs.oncdatastart&&this._cbs.oncdatastart(),this._cbs.ontext&&this._cbs.ontext(e),this._cbs.oncdataend&&this._cbs.oncdataend()):this.oncomment("[CDATA["+e+"]]");},t.prototype.onerror=function(e){this._cbs.onerror&&this._cbs.onerror(e);},t.prototype.onend=function(){if(this._cbs.onclosetag)for(var e=this._stack.length;e>0;this._cbs.onclosetag(this._stack[--e])){}this._cbs.onend&&this._cbs.onend();},t.prototype.reset=function(){this._cbs.onreset&&this._cbs.onreset(),this._tokenizer.reset(),this._tagname="",this._attribname="",this._attribs=null,this._stack=[],this._cbs.onparserinit&&this._cbs.onparserinit(this);},t.prototype.parseComplete=function(e){this.reset(),this.end(e);},t.prototype.write=function(e){this._tokenizer.write(e);},t.prototype.end=function(e){this._tokenizer.end(e);},t.prototype.pause=function(){this._tokenizer.pause();},t.prototype.resume=function(){this._tokenizer.resume();},t;}(o.EventEmitter);t.Parser=g;},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e};};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(77)),a=n(r(56)),s=n(r(78)),o=n(r(57));function u(e){return " "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e;}function c(e,t,r){var n=e.toLowerCase();return e===n?function(e,i){i===n?e._state=t:(e._state=r,e._index--);}:function(i,a){a===n||a===e?i._state=t:(i._state=r,i._index--);};}function l(e,t){var r=e.toLowerCase();return function(n,i){i===r||i===e?n._state=t:(n._state=3,n._index--);};}var h=c("C",23,16),d=c("D",24,16),p=c("A",25,16),f=c("T",26,16),g=c("A",27,16),m=l("R",34),y=l("I",35),b=l("P",36),_=l("T",37),v=c("R",39,1),w=c("I",40,1),S=c("P",41,1),T=c("T",42,1),E=l("Y",44),x=l("L",45),O=l("E",46),A=c("Y",48,1),R=c("L",49,1),I=c("E",50,1),N=c("#",52,53),P=c("X",55,54),C=function(){function e(e,t){this._state=1,this._buffer="",this._sectionStart=0,this._index=0,this._bufferOffset=0,this._baseState=1,this._special=1,this._running=!0,this._ended=!1,this._cbs=t,this._xmlMode=!(!e||!e.xmlMode),this._decodeEntities=!(!e||!e.decodeEntities);}return e.prototype.reset=function(){this._state=1,this._buffer="",this._sectionStart=0,this._index=0,this._bufferOffset=0,this._baseState=1,this._special=1,this._running=!0,this._ended=!1;},e.prototype._stateText=function(e){"<"===e?(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._state=2,this._sectionStart=this._index):this._decodeEntities&&1===this._special&&"&"===e&&(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._baseState=1,this._state=51,this._sectionStart=this._index);},e.prototype._stateBeforeTagName=function(e){"/"===e?this._state=5:"<"===e?(this._cbs.ontext(this._getSection()),this._sectionStart=this._index):">"===e||1!==this._special||u(e)?this._state=1:"!"===e?(this._state=15,this._sectionStart=this._index+1):"?"===e?(this._state=17,this._sectionStart=this._index+1):(this._state=this._xmlMode||"s"!==e&&"S"!==e?3:31,this._sectionStart=this._index);},e.prototype._stateInTagName=function(e){("/"===e||">"===e||u(e))&&(this._emitToken("onopentagname"),this._state=8,this._index--);},e.prototype._stateBeforeClosingTagName=function(e){u(e)||(">"===e?this._state=1:1!==this._special?"s"===e||"S"===e?this._state=32:(this._state=1,this._index--):(this._state=6,this._sectionStart=this._index));},e.prototype._stateInClosingTagName=function(e){(">"===e||u(e))&&(this._emitToken("onclosetag"),this._state=7,this._index--);},e.prototype._stateAfterClosingTagName=function(e){">"===e&&(this._state=1,this._sectionStart=this._index+1);},e.prototype._stateBeforeAttributeName=function(e){">"===e?(this._cbs.onopentagend(),this._state=1,this._sectionStart=this._index+1):"/"===e?this._state=4:u(e)||(this._state=9,this._sectionStart=this._index);},e.prototype._stateInSelfClosingTag=function(e){">"===e?(this._cbs.onselfclosingtag(),this._state=1,this._sectionStart=this._index+1):u(e)||(this._state=8,this._index--);},e.prototype._stateInAttributeName=function(e){("="===e||"/"===e||">"===e||u(e))&&(this._cbs.onattribname(this._getSection()),this._sectionStart=-1,this._state=10,this._index--);},e.prototype._stateAfterAttributeName=function(e){"="===e?this._state=11:"/"===e||">"===e?(this._cbs.onattribend(),this._state=8,this._index--):u(e)||(this._cbs.onattribend(),this._state=9,this._sectionStart=this._index);},e.prototype._stateBeforeAttributeValue=function(e){'"'===e?(this._state=12,this._sectionStart=this._index+1):"'"===e?(this._state=13,this._sectionStart=this._index+1):u(e)||(this._state=14,this._sectionStart=this._index,this._index--);},e.prototype._stateInAttributeValueDoubleQuotes=function(e){'"'===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=8):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=51,this._sectionStart=this._index);},e.prototype._stateInAttributeValueSingleQuotes=function(e){"'"===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=8):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=51,this._sectionStart=this._index);},e.prototype._stateInAttributeValueNoQuotes=function(e){u(e)||">"===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=8,this._index--):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=51,this._sectionStart=this._index);},e.prototype._stateBeforeDeclaration=function(e){this._state="["===e?22:"-"===e?18:16;},e.prototype._stateInDeclaration=function(e){">"===e&&(this._cbs.ondeclaration(this._getSection()),this._state=1,this._sectionStart=this._index+1);},e.prototype._stateInProcessingInstruction=function(e){">"===e&&(this._cbs.onprocessinginstruction(this._getSection()),this._state=1,this._sectionStart=this._index+1);},e.prototype._stateBeforeComment=function(e){"-"===e?(this._state=19,this._sectionStart=this._index+1):this._state=16;},e.prototype._stateInComment=function(e){"-"===e&&(this._state=20);},e.prototype._stateAfterComment1=function(e){this._state="-"===e?21:19;},e.prototype._stateAfterComment2=function(e){">"===e?(this._cbs.oncomment(this._buffer.substring(this._sectionStart,this._index-2)),this._state=1,this._sectionStart=this._index+1):"-"!==e&&(this._state=19);},e.prototype._stateBeforeCdata6=function(e){"["===e?(this._state=28,this._sectionStart=this._index+1):(this._state=16,this._index--);},e.prototype._stateInCdata=function(e){"]"===e&&(this._state=29);},e.prototype._stateAfterCdata1=function(e){this._state="]"===e?30:28;},e.prototype._stateAfterCdata2=function(e){">"===e?(this._cbs.oncdata(this._buffer.substring(this._sectionStart,this._index-2)),this._state=1,this._sectionStart=this._index+1):"]"!==e&&(this._state=28);},e.prototype._stateBeforeSpecial=function(e){"c"===e||"C"===e?this._state=33:"t"===e||"T"===e?this._state=43:(this._state=3,this._index--);},e.prototype._stateBeforeSpecialEnd=function(e){2!==this._special||"c"!==e&&"C"!==e?3!==this._special||"t"!==e&&"T"!==e?this._state=1:this._state=47:this._state=38;},e.prototype._stateBeforeScript5=function(e){("/"===e||">"===e||u(e))&&(this._special=2),this._state=3,this._index--;},e.prototype._stateAfterScript5=function(e){">"===e||u(e)?(this._special=1,this._state=6,this._sectionStart=this._index-6,this._index--):this._state=1;},e.prototype._stateBeforeStyle4=function(e){("/"===e||">"===e||u(e))&&(this._special=3),this._state=3,this._index--;},e.prototype._stateAfterStyle4=function(e){">"===e||u(e)?(this._special=1,this._state=6,this._sectionStart=this._index-5,this._index--):this._state=1;},e.prototype._parseNamedEntityStrict=function(){if(this._sectionStart+1<this._index){var e=this._buffer.substring(this._sectionStart+1,this._index),t=this._xmlMode?o.default:a.default;Object.prototype.hasOwnProperty.call(t,e)&&(this._emitPartial(t[e]),this._sectionStart=this._index+1);}},e.prototype._parseLegacyEntity=function(){var e=this._sectionStart+1,t=this._index-e;for(t>6&&(t=6);t>=2;){var r=this._buffer.substr(e,t);if(Object.prototype.hasOwnProperty.call(s.default,r))return this._emitPartial(s.default[r]),void(this._sectionStart+=t+1);t--;}},e.prototype._stateInNamedEntity=function(e){";"===e?(this._parseNamedEntityStrict(),this._sectionStart+1<this._index&&!this._xmlMode&&this._parseLegacyEntity(),this._state=this._baseState):(e<"a"||e>"z")&&(e<"A"||e>"Z")&&(e<"0"||e>"9")&&(this._xmlMode||this._sectionStart+1===this._index||(1!==this._baseState?"="!==e&&this._parseNamedEntityStrict():this._parseLegacyEntity()),this._state=this._baseState,this._index--);},e.prototype._decodeNumericEntity=function(e,t){var r=this._sectionStart+e;if(r!==this._index){var n=this._buffer.substring(r,this._index),a=parseInt(n,t);this._emitPartial(i.default(a)),this._sectionStart=this._index;}else this._sectionStart--;this._state=this._baseState;},e.prototype._stateInNumericEntity=function(e){";"===e?(this._decodeNumericEntity(2,10),this._sectionStart++):(e<"0"||e>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(2,10),this._index--);},e.prototype._stateInHexEntity=function(e){";"===e?(this._decodeNumericEntity(3,16),this._sectionStart++):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(3,16),this._index--);},e.prototype._cleanup=function(){this._sectionStart<0?(this._buffer="",this._bufferOffset+=this._index,this._index=0):this._running&&(1===this._state?(this._sectionStart!==this._index&&this._cbs.ontext(this._buffer.substr(this._sectionStart)),this._buffer="",this._bufferOffset+=this._index,this._index=0):this._sectionStart===this._index?(this._buffer="",this._bufferOffset+=this._index,this._index=0):(this._buffer=this._buffer.substr(this._sectionStart),this._index-=this._sectionStart,this._bufferOffset+=this._sectionStart),this._sectionStart=0);},e.prototype.write=function(e){this._ended&&this._cbs.onerror(Error(".write() after done!")),this._buffer+=e,this._parse();},e.prototype._parse=function(){for(;this._index<this._buffer.length&&this._running;){var e=this._buffer.charAt(this._index);1===this._state?this._stateText(e):12===this._state?this._stateInAttributeValueDoubleQuotes(e):9===this._state?this._stateInAttributeName(e):19===this._state?this._stateInComment(e):8===this._state?this._stateBeforeAttributeName(e):3===this._state?this._stateInTagName(e):6===this._state?this._stateInClosingTagName(e):2===this._state?this._stateBeforeTagName(e):10===this._state?this._stateAfterAttributeName(e):13===this._state?this._stateInAttributeValueSingleQuotes(e):11===this._state?this._stateBeforeAttributeValue(e):5===this._state?this._stateBeforeClosingTagName(e):7===this._state?this._stateAfterClosingTagName(e):31===this._state?this._stateBeforeSpecial(e):20===this._state?this._stateAfterComment1(e):14===this._state?this._stateInAttributeValueNoQuotes(e):4===this._state?this._stateInSelfClosingTag(e):16===this._state?this._stateInDeclaration(e):15===this._state?this._stateBeforeDeclaration(e):21===this._state?this._stateAfterComment2(e):18===this._state?this._stateBeforeComment(e):32===this._state?this._stateBeforeSpecialEnd(e):38===this._state?v(this,e):39===this._state?w(this,e):40===this._state?S(this,e):33===this._state?m(this,e):34===this._state?y(this,e):35===this._state?b(this,e):36===this._state?_(this,e):37===this._state?this._stateBeforeScript5(e):41===this._state?T(this,e):42===this._state?this._stateAfterScript5(e):43===this._state?E(this,e):28===this._state?this._stateInCdata(e):44===this._state?x(this,e):45===this._state?O(this,e):46===this._state?this._stateBeforeStyle4(e):47===this._state?A(this,e):48===this._state?R(this,e):49===this._state?I(this,e):50===this._state?this._stateAfterStyle4(e):17===this._state?this._stateInProcessingInstruction(e):53===this._state?this._stateInNamedEntity(e):22===this._state?h(this,e):51===this._state?N(this,e):23===this._state?d(this,e):24===this._state?p(this,e):29===this._state?this._stateAfterCdata1(e):30===this._state?this._stateAfterCdata2(e):25===this._state?f(this,e):26===this._state?g(this,e):27===this._state?this._stateBeforeCdata6(e):55===this._state?this._stateInHexEntity(e):54===this._state?this._stateInNumericEntity(e):52===this._state?P(this,e):this._cbs.onerror(Error("unknown _state"),this._state),this._index++;}this._cleanup();},e.prototype.pause=function(){this._running=!1;},e.prototype.resume=function(){this._running=!0,this._index<this._buffer.length&&this._parse(),this._ended&&this._finish();},e.prototype.end=function(e){this._ended&&this._cbs.onerror(Error(".end() after done!")),e&&this.write(e),this._ended=!0,this._running&&this._finish();},e.prototype._finish=function(){this._sectionStart<this._index&&this._handleTrailingData(),this._cbs.onend();},e.prototype._handleTrailingData=function(){var e=this._buffer.substr(this._sectionStart);28===this._state||29===this._state||30===this._state?this._cbs.oncdata(e):19===this._state||20===this._state||21===this._state?this._cbs.oncomment(e):53!==this._state||this._xmlMode?54!==this._state||this._xmlMode?55!==this._state||this._xmlMode?3!==this._state&&8!==this._state&&11!==this._state&&10!==this._state&&9!==this._state&&13!==this._state&&12!==this._state&&14!==this._state&&6!==this._state&&this._cbs.ontext(e):(this._decodeNumericEntity(3,16),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._decodeNumericEntity(2,10),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._parseLegacyEntity(),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData()));},e.prototype.getAbsoluteIndex=function(){return this._bufferOffset+this._index;},e.prototype._getSection=function(){return this._buffer.substring(this._sectionStart,this._index);},e.prototype._emitToken=function(e){this._cbs[e](this._getSection()),this._sectionStart=-1;},e.prototype._emitPartial=function(e){1!==this._baseState?this._cbs.onattribdata(e):this._cbs.ontext(e);},e;}();t.default=C;},function(e,t,r){var _n22,i=this&&this.__extends||(_n22=function n(e,t){return (_n22=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t;}||function(e,t){for(var r in t){Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);}})(e,t);},function(e,t){function r(){this.constructor=e;}_n22(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r());}),a=this&&this.__assign||function(){return (a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){for(var i in t=arguments[r]){Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);}}return e;}).apply(this,arguments);};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=t.Element=t.NodeWithChildren=t.ProcessingInstruction=t.Comment=t.Text=t.DataNode=t.Node=void 0;var s=new Map([["tag",1],["script",1],["style",1],["directive",1],["text",3],["cdata",4],["comment",8]]),o=function(){function e(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null;}return Object.defineProperty(e.prototype,"nodeType",{get:function get(){var e;return null!==(e=s.get(this.type))&&void 0!==e?e:1;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function get(){return this.parent;},set:function set(e){this.parent=e;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function get(){return this.prev;},set:function set(e){this.prev=e;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function get(){return this.next;},set:function set(e){this.next=e;},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),f(this,e);},e;}();t.Node=o;var u=function(e){function t(t,r){var n=e.call(this,t)||this;return n.data=r,n;}return i(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function get(){return this.data;},set:function set(e){this.data=e;},enumerable:!1,configurable:!0}),t;}(o);t.DataNode=u;var c=function(e){function t(t){return e.call(this,"text",t)||this;}return i(t,e),t;}(u);t.Text=c;var l=function(e){function t(t){return e.call(this,"comment",t)||this;}return i(t,e),t;}(u);t.Comment=l;var h=function(e){function t(t,r){var n=e.call(this,"directive",r)||this;return n.name=t,n;}return i(t,e),t;}(u);t.ProcessingInstruction=h;var d=function(e){function t(t,r){var n=e.call(this,t)||this;return n.children=r,n;}return i(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function get(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function get(){return this.children.length>0?this.children[this.children.length-1]:null;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function get(){return this.children;},set:function set(e){this.children=e;},enumerable:!1,configurable:!0}),t;}(o);t.NodeWithChildren=d;var p=function(e){function t(t,r,n){void 0===n&&(n=[]);var i=e.call(this,"script"===t?"script":"style"===t?"style":"tag",n)||this;return i.name=t,i.attribs=r,i.attribs=r,i;}return i(t,e),Object.defineProperty(t.prototype,"tagName",{get:function get(){return this.name;},set:function set(e){this.name=e;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function get(){var e=this;return Object.keys(this.attribs).map(function(t){return {name:t,value:e.attribs[t]};});},enumerable:!1,configurable:!0}),t;}(d);function f(e,t){switch(void 0===t&&(t=!1),e.type){case"text":return new c(e.data);case"directive":var r=e;return new h(r.name,r.data);case"comment":return new l(e.data);case"tag":case"script":case"style":var n=e,i=t?g(n.children):[],s=new p(n.name,a({},n.attribs),i);return i.forEach(function(e){return e.parent=s;}),s;case"cdata":i=t?g(e.children):[];var o=new d("cdata",i);return i.forEach(function(e){return e.parent=o;}),o;case"doctype":throw new Error("Not implemented yet: ElementType.Doctype case");}}function g(e){for(var t=e.map(function(e){return f(e,!0);}),r=1;r<t.length;r++){t[r].prev=t[r-1],t[r-1].next=t[r];}return t;}t.Element=p,t.cloneNode=f;},function(e,t,r){var _n23,i=this&&this.__extends||(_n23=function n(e,t){return (_n23=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t;}||function(e,t){for(var r in t){t.hasOwnProperty(r)&&(e[r]=t[r]);}})(e,t);},function(e,t){function r(){this.constructor=e;}_n23(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r());}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e};},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e){Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);}return t.default=e,t;};Object.defineProperty(t,"__esModule",{value:!0});var o=a(r(58)),u=s(r(60)),c=r(132),l=function(e){function t(t,r){return "object"==typeof t&&null!==t&&(r=t=void 0),e.call(this,t,r)||this;}return i(t,e),t.prototype.onend=function(){var e={},t=d(m,this.dom);if(t)if("feed"===t.name){var r=t.children;e.type="atom",g(e,"id","id",r),g(e,"title","title",r);var n=f("href",d("link",r));n&&(e.link=n),g(e,"description","subtitle",r),(i=p("updated",r))&&(e.updated=new Date(i)),g(e,"author","email",r,!0),e.items=h("entry",r).map(function(e){var t={},r=e.children;g(t,"id","id",r),g(t,"title","title",r);var n=f("href",d("link",r));n&&(t.link=n);var i=p("summary",r)||p("content",r);i&&(t.description=i);var a=p("updated",r);return a&&(t.pubDate=new Date(a)),t;});}else {var i;r=d("channel",t.children).children;e.type=t.name.substr(0,3),e.id="",g(e,"title","title",r),g(e,"link","link",r),g(e,"description","description",r),(i=p("lastBuildDate",r))&&(e.updated=new Date(i)),g(e,"author","managingEditor",r,!0),e.items=h("item",t.children).map(function(e){var t={},r=e.children;g(t,"id","guid",r),g(t,"title","title",r),g(t,"link","link",r),g(t,"description","description",r);var n=p("pubDate",r);return n&&(t.pubDate=new Date(n)),t;});}this.feed=e,this.handleCallback(t?null:Error("couldn't find root of feed"));},t;}(o.default);function h(e,t){return u.getElementsByTagName(e,t,!0);}function d(e,t){return u.getElementsByTagName(e,t,!0,1)[0];}function p(e,t,r){return void 0===r&&(r=!1),u.getText(u.getElementsByTagName(e,t,r,1)).trim();}function f(e,t){return t?t.attribs[e]:null;}function g(e,t,r,n,i){void 0===i&&(i=!1);var a=p(r,n,i);a&&(e[t]=a);}function m(e){return "rss"===e||"feed"===e||"rdf:RDF"===e;}t.FeedHandler=l;var y={xmlMode:!0};t.parseFeed=function(e,t){void 0===t&&(t=y);var r=new l(t);return new c.Parser(r,t).end(e),r.feed;};},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e};};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHTML=t.decodeHTMLStrict=t.decodeXML=void 0;var i=n(r(56)),a=n(r(78)),s=n(r(57)),o=n(r(77));function u(e){var t=Object.keys(e).join("|"),r=l(e),n=new RegExp("&(?:"+(t+="|#[xX][\\da-fA-F]+|#\\d+")+");","g");return function(e){return String(e).replace(n,r);};}t.decodeXML=u(s.default),t.decodeHTMLStrict=u(i.default);var c=function c(e,t){return e<t?1:-1;};function l(e){return function(t){if("#"===t.charAt(1)){var r=t.charAt(2);return "X"===r||"x"===r?o.default(parseInt(t.substr(3),16)):o.default(parseInt(t.substr(2),10));}return e[t.slice(1,-1)];};}t.decodeHTML=function(){for(var e=Object.keys(a.default).sort(c),t=Object.keys(i.default).sort(c),r=0,n=0;r<t.length;r++){e[n]===t[r]?(t[r]+=";?",n++):t[r]+=";";}var s=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),o=l(i.default);function u(e){return ";"!==e.substr(-1)&&(e+=";"),o(e);}return function(e){return String(e).replace(s,u);};}();},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e};};Object.defineProperty(t,"__esModule",{value:!0}),t.escape=t.encodeHTML=t.encodeXML=void 0;var i=u(n(r(57)).default),a=c(i);t.encodeXML=d(i,a);var s=u(n(r(56)).default),o=c(s);function u(e){return Object.keys(e).sort().reduce(function(t,r){return t[e[r]]="&"+r+";",t;},{});}function c(e){for(var t=[],r=[],n=0,i=Object.keys(e);n<i.length;n++){var a=i[n];1===a.length?t.push("\\"+a):r.push(a);}t.sort();for(var s=0;s<t.length-1;s++){for(var o=s;o<t.length-1&&t[o].charCodeAt(1)+1===t[o+1].charCodeAt(1);){o+=1;}var u=1+o-s;u<3||t.splice(s,u,t[s]+"-"+t[o]);}return r.unshift("["+t.join("")+"]"),new RegExp(r.join("|"),"g");}t.encodeHTML=d(s,o);var l=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g;function h(e){return "&#x"+e.codePointAt(0).toString(16).toUpperCase()+";";}function d(e,t){return function(r){return r.replace(t,function(t){return e[t];}).replace(l,h);};}var p=c(i);t.escape=function(e){return e.replace(p,h).replace(l,h);};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=t.existsOne=t.findOne=t.findOneChild=t.find=t.filter=void 0;var n=r(37);function i(e,t,r,a){for(var s=[],o=0,u=t;o<u.length;o++){var c=u[o];if(e(c)&&(s.push(c),--a<=0))break;if(r&&n.hasChildren(c)&&c.children.length>0){var l=i(e,c.children,r,a);if(s.push.apply(s,l),(a-=l.length)<=0)break;}}return s;}t.filter=function(e,t,r,n){return void 0===r&&(r=!0),void 0===n&&(n=1/0),Array.isArray(t)||(t=[t]),i(e,t,r,n);},t.find=i,t.findOneChild=function(e,t){return t.find(e);},t.findOne=function e(t,r,i){void 0===i&&(i=!0);for(var a=null,s=0;s<r.length&&!a;s++){var o=r[s];n.isTag(o)&&(t(o)?a=o:i&&o.children.length>0&&(a=e(t,o.children)));}return a;},t.existsOne=function e(t,r){return r.some(function(r){return n.isTag(r)&&(t(r)||r.children.length>0&&e(t,r.children));});},t.findAll=function(e,t){for(var r,i,a=[],s=t.filter(n.isTag);i=s.shift();){var o=null===(r=i.children)||void 0===r?void 0:r.filter(n.isTag);o&&o.length>0&&s.unshift.apply(s,o),e(i)&&a.push(i);}return a;};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;var n=r(13),i=r(79),a=r(5);class s{constructor(e,t){this.dataFactory=e||new a.DataFactory(),this.baseIRI=this.dataFactory.namedNode(t||""),this.baseIRIDocument=this.baseIRI;}static parsePrefixes(e,t,r){var n={};if(r)for(var _t45 in e){_t45.startsWith("xmlns")&&(n[_t45.substr(6)]=e[_t45]);}if(e.prefix||Object.keys(n).length>0){var _r39=Object.assign(Object.assign({},t),n);if(e.prefix){var _t46;for(;_t46=s.PREFIX_REGEX.exec(e.prefix);){_r39[_t46[1]]=_t46[2];}}return _r39;}return t;}static expandPrefixedTerm(e,t){var r=e.indexOf(":");var n,i;if(r>=0&&(n=e.substr(0,r),i=e.substr(r+1)),""===n)return "http://www.w3.org/1999/xhtml/vocab#"+i;if(n){var _e25=t.prefixesAll[n];if(_e25)return _e25+i;}if(e){var _r40=t.prefixesAll[e.toLocaleLowerCase()];if(_r40)return _r40;}return e;}static isValidIri(e){return s.IRI_REGEX.test(e);}static contentTypeToProfile(e){return i.RDFA_CONTENTTYPES[e]||"";}getBaseIRI(e){var t=e;var r=t.indexOf("#");return r>=0&&(t=t.substr(0,r)),this.dataFactory.namedNode(n.resolve(t,this.baseIRI.value));}getResourceOrBaseIri(e,t){return !0===e?this.getBaseIriTerm(t):e;}getBaseIriTerm(e){return e.localBaseIRI||this.baseIRI;}createVocabIris(e,t,r,n){return e.split(/\s+/).filter(e=>e&&(r||e.indexOf(":")>=0)).map(e=>this.createIri(e,t,!0,!0,n)).filter(e=>null!=e);}createLiteral(e,t){if(t.interpretObjectAsTime&&!t.datatype)for(var _r41 of s.TIME_REGEXES){if(e.match(_r41.regex)){t.datatype=this.dataFactory.namedNode(s.XSD+_r41.type);break;}}return this.dataFactory.literal(e,t.datatype||t.language);}createBlankNode(){return this.blankNodeFactory?this.blankNodeFactory():this.dataFactory.blankNode();}createIri(e,t,r,i,a){if(e=e||"",!i)return r||(e=n.resolve(e,this.getBaseIriTerm(t).value)),s.isValidIri(e)?this.dataFactory.namedNode(e):null;if(e.length>0&&"["===e[0]&&"]"===e[e.length-1]&&(e=e.substr(1,e.length-2)).indexOf(":")<0)return null;if(e.startsWith("_:"))return a?this.dataFactory.blankNode(e.substr(2)||"b_identity"):null;if(r&&t.vocab&&e.indexOf(":")<0)return this.dataFactory.namedNode(t.vocab+e);var o=s.expandPrefixedTerm(e,t);return r?e!==o&&(o=n.resolve(o,this.baseIRIDocument.value)):o=n.resolve(o,this.getBaseIriTerm(t).value),s.isValidIri(o)?this.dataFactory.namedNode(o):null;}}t.Util=s,s.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s.XSD="http://www.w3.org/2001/XMLSchema#",s.RDFA="http://www.w3.org/ns/rdfa#",s.PREFIX_REGEX=/\s*([^:\s]*)*:\s*([^\s]*)*\s*/g,s.TIME_REGEXES=[{regex:/^-?P([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9])?S)?)?$/,type:"duration"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"dateTime"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,type:"date"},{regex:/^[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"time"},{regex:/^[0-9]+-[0-9][0-9]$/,type:"gYearMonth"},{regex:/^[0-9]+$/,type:"gYear"}],s.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`]*$/;},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e};};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(77)),a=n(r(56)),s=n(r(78)),o=n(r(57));function u(e){return " "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e;}function c(e){return e>="a"&&e<="z"||e>="A"&&e<="Z";}function l(e,t,r){var n=e.toLowerCase();return e===n?function(e,i){i===n?e._state=t:(e._state=r,e._index--);}:function(i,a){a===n||a===e?i._state=t:(i._state=r,i._index--);};}function h(e,t){var r=e.toLowerCase();return function(n,i){i===r||i===e?n._state=t:(n._state=3,n._index--);};}var d=l("C",24,16),p=l("D",25,16),f=l("A",26,16),g=l("T",27,16),m=l("A",28,16),y=h("R",35),b=h("I",36),_=h("P",37),v=h("T",38),w=l("R",40,1),S=l("I",41,1),T=l("P",42,1),E=l("T",43,1),x=h("Y",45),O=h("L",46),A=h("E",47),R=l("Y",49,1),I=l("L",50,1),N=l("E",51,1),P=h("I",54),C=h("T",55),D=h("L",56),j=h("E",57),k=l("I",58,1),L=l("T",59,1),M=l("L",60,1),F=l("E",61,1),B=l("#",63,64),q=l("X",66,65),U=function(){function e(e,t){var r;this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1,this.cbs=t,this.xmlMode=!!(null==e?void 0:e.xmlMode),this.decodeEntities=null===(r=null==e?void 0:e.decodeEntities)||void 0===r||r;}return e.prototype.reset=function(){this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1;},e.prototype.write=function(e){this.ended&&this.cbs.onerror(Error(".write() after done!")),this.buffer+=e,this.parse();},e.prototype.end=function(e){this.ended&&this.cbs.onerror(Error(".end() after done!")),e&&this.write(e),this.ended=!0,this.running&&this.finish();},e.prototype.pause=function(){this.running=!1;},e.prototype.resume=function(){this.running=!0,this._index<this.buffer.length&&this.parse(),this.ended&&this.finish();},e.prototype.getAbsoluteIndex=function(){return this.bufferOffset+this._index;},e.prototype.stateText=function(e){"<"===e?(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this._state=2,this.sectionStart=this._index):this.decodeEntities&&1===this.special&&"&"===e&&(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this.baseState=1,this._state=62,this.sectionStart=this._index);},e.prototype.stateBeforeTagName=function(e){"/"===e?this._state=5:"<"===e?(this.cbs.ontext(this.getSection()),this.sectionStart=this._index):">"===e||1!==this.special||u(e)?this._state=1:"!"===e?(this._state=15,this.sectionStart=this._index+1):"?"===e?(this._state=17,this.sectionStart=this._index+1):c(e)?(this._state=this.xmlMode||"s"!==e&&"S"!==e?this.xmlMode||"t"!==e&&"T"!==e?3:52:32,this.sectionStart=this._index):this._state=1;},e.prototype.stateInTagName=function(e){("/"===e||">"===e||u(e))&&(this.emitToken("onopentagname"),this._state=8,this._index--);},e.prototype.stateBeforeClosingTagName=function(e){u(e)||(">"===e?this._state=1:1!==this.special?"s"===e||"S"===e?this._state=33:"t"===e||"T"===e?this._state=53:(this._state=1,this._index--):c(e)?(this._state=6,this.sectionStart=this._index):(this._state=20,this.sectionStart=this._index));},e.prototype.stateInClosingTagName=function(e){(">"===e||u(e))&&(this.emitToken("onclosetag"),this._state=7,this._index--);},e.prototype.stateAfterClosingTagName=function(e){">"===e&&(this._state=1,this.sectionStart=this._index+1);},e.prototype.stateBeforeAttributeName=function(e){">"===e?(this.cbs.onopentagend(),this._state=1,this.sectionStart=this._index+1):"/"===e?this._state=4:u(e)||(this._state=9,this.sectionStart=this._index);},e.prototype.stateInSelfClosingTag=function(e){">"===e?(this.cbs.onselfclosingtag(),this._state=1,this.sectionStart=this._index+1,this.special=1):u(e)||(this._state=8,this._index--);},e.prototype.stateInAttributeName=function(e){("="===e||"/"===e||">"===e||u(e))&&(this.cbs.onattribname(this.getSection()),this.sectionStart=-1,this._state=10,this._index--);},e.prototype.stateAfterAttributeName=function(e){"="===e?this._state=11:"/"===e||">"===e?(this.cbs.onattribend(void 0),this._state=8,this._index--):u(e)||(this.cbs.onattribend(void 0),this._state=9,this.sectionStart=this._index);},e.prototype.stateBeforeAttributeValue=function(e){'"'===e?(this._state=12,this.sectionStart=this._index+1):"'"===e?(this._state=13,this.sectionStart=this._index+1):u(e)||(this._state=14,this.sectionStart=this._index,this._index--);},e.prototype.handleInAttributeValue=function(e,t){e===t?(this.emitToken("onattribdata"),this.cbs.onattribend(t),this._state=8):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index);},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,'"');},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,"'");},e.prototype.stateInAttributeValueNoQuotes=function(e){u(e)||">"===e?(this.emitToken("onattribdata"),this.cbs.onattribend(null),this._state=8,this._index--):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index);},e.prototype.stateBeforeDeclaration=function(e){this._state="["===e?23:"-"===e?18:16;},e.prototype.stateInDeclaration=function(e){">"===e&&(this.cbs.ondeclaration(this.getSection()),this._state=1,this.sectionStart=this._index+1);},e.prototype.stateInProcessingInstruction=function(e){">"===e&&(this.cbs.onprocessinginstruction(this.getSection()),this._state=1,this.sectionStart=this._index+1);},e.prototype.stateBeforeComment=function(e){"-"===e?(this._state=19,this.sectionStart=this._index+1):this._state=16;},e.prototype.stateInComment=function(e){"-"===e&&(this._state=21);},e.prototype.stateInSpecialComment=function(e){">"===e&&(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index)),this._state=1,this.sectionStart=this._index+1);},e.prototype.stateAfterComment1=function(e){this._state="-"===e?22:19;},e.prototype.stateAfterComment2=function(e){">"===e?(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"-"!==e&&(this._state=19);},e.prototype.stateBeforeCdata6=function(e){"["===e?(this._state=29,this.sectionStart=this._index+1):(this._state=16,this._index--);},e.prototype.stateInCdata=function(e){"]"===e&&(this._state=30);},e.prototype.stateAfterCdata1=function(e){this._state="]"===e?31:29;},e.prototype.stateAfterCdata2=function(e){">"===e?(this.cbs.oncdata(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"]"!==e&&(this._state=29);},e.prototype.stateBeforeSpecialS=function(e){"c"===e||"C"===e?this._state=34:"t"===e||"T"===e?this._state=44:(this._state=3,this._index--);},e.prototype.stateBeforeSpecialSEnd=function(e){2!==this.special||"c"!==e&&"C"!==e?3!==this.special||"t"!==e&&"T"!==e?this._state=1:this._state=48:this._state=39;},e.prototype.stateBeforeSpecialLast=function(e,t){("/"===e||">"===e||u(e))&&(this.special=t),this._state=3,this._index--;},e.prototype.stateAfterSpecialLast=function(e,t){">"===e||u(e)?(this.special=1,this._state=6,this.sectionStart=this._index-t,this._index--):this._state=1;},e.prototype.parseFixedEntity=function(e){if(void 0===e&&(e=this.xmlMode?o.default:a.default),this.sectionStart+1<this._index){var t=this.buffer.substring(this.sectionStart+1,this._index);Object.prototype.hasOwnProperty.call(e,t)&&(this.emitPartial(e[t]),this.sectionStart=this._index+1);}},e.prototype.parseLegacyEntity=function(){for(var e=this.sectionStart+1,t=Math.min(this._index-e,6);t>=2;){var r=this.buffer.substr(e,t);if(Object.prototype.hasOwnProperty.call(s.default,r))return this.emitPartial(s.default[r]),void(this.sectionStart+=t+1);t--;}},e.prototype.stateInNamedEntity=function(e){";"===e?(this.parseFixedEntity(),1===this.baseState&&this.sectionStart+1<this._index&&!this.xmlMode&&this.parseLegacyEntity(),this._state=this.baseState):(e<"0"||e>"9")&&!c(e)&&(this.xmlMode||this.sectionStart+1===this._index||(1!==this.baseState?"="!==e&&this.parseFixedEntity(s.default):this.parseLegacyEntity()),this._state=this.baseState,this._index--);},e.prototype.decodeNumericEntity=function(e,t,r){var n=this.sectionStart+e;if(n!==this._index){var a=this.buffer.substring(n,this._index),s=parseInt(a,t);this.emitPartial(i.default(s)),this.sectionStart=r?this._index+1:this._index;}this._state=this.baseState;},e.prototype.stateInNumericEntity=function(e){";"===e?this.decodeNumericEntity(2,10,!0):(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(2,10,!1),this._index--);},e.prototype.stateInHexEntity=function(e){";"===e?this.decodeNumericEntity(3,16,!0):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(3,16,!1),this._index--);},e.prototype.cleanup=function(){this.sectionStart<0?(this.buffer="",this.bufferOffset+=this._index,this._index=0):this.running&&(1===this._state?(this.sectionStart!==this._index&&this.cbs.ontext(this.buffer.substr(this.sectionStart)),this.buffer="",this.bufferOffset+=this._index,this._index=0):this.sectionStart===this._index?(this.buffer="",this.bufferOffset+=this._index,this._index=0):(this.buffer=this.buffer.substr(this.sectionStart),this._index-=this.sectionStart,this.bufferOffset+=this.sectionStart),this.sectionStart=0);},e.prototype.parse=function(){for(;this._index<this.buffer.length&&this.running;){var e=this.buffer.charAt(this._index);1===this._state?this.stateText(e):12===this._state?this.stateInAttributeValueDoubleQuotes(e):9===this._state?this.stateInAttributeName(e):19===this._state?this.stateInComment(e):20===this._state?this.stateInSpecialComment(e):8===this._state?this.stateBeforeAttributeName(e):3===this._state?this.stateInTagName(e):6===this._state?this.stateInClosingTagName(e):2===this._state?this.stateBeforeTagName(e):10===this._state?this.stateAfterAttributeName(e):13===this._state?this.stateInAttributeValueSingleQuotes(e):11===this._state?this.stateBeforeAttributeValue(e):5===this._state?this.stateBeforeClosingTagName(e):7===this._state?this.stateAfterClosingTagName(e):32===this._state?this.stateBeforeSpecialS(e):21===this._state?this.stateAfterComment1(e):14===this._state?this.stateInAttributeValueNoQuotes(e):4===this._state?this.stateInSelfClosingTag(e):16===this._state?this.stateInDeclaration(e):15===this._state?this.stateBeforeDeclaration(e):22===this._state?this.stateAfterComment2(e):18===this._state?this.stateBeforeComment(e):33===this._state?this.stateBeforeSpecialSEnd(e):53===this._state?k(this,e):39===this._state?w(this,e):40===this._state?S(this,e):41===this._state?T(this,e):34===this._state?y(this,e):35===this._state?b(this,e):36===this._state?_(this,e):37===this._state?v(this,e):38===this._state?this.stateBeforeSpecialLast(e,2):42===this._state?E(this,e):43===this._state?this.stateAfterSpecialLast(e,6):44===this._state?x(this,e):29===this._state?this.stateInCdata(e):45===this._state?O(this,e):46===this._state?A(this,e):47===this._state?this.stateBeforeSpecialLast(e,3):48===this._state?R(this,e):49===this._state?I(this,e):50===this._state?N(this,e):51===this._state?this.stateAfterSpecialLast(e,5):52===this._state?P(this,e):54===this._state?C(this,e):55===this._state?D(this,e):56===this._state?j(this,e):57===this._state?this.stateBeforeSpecialLast(e,4):58===this._state?L(this,e):59===this._state?M(this,e):60===this._state?F(this,e):61===this._state?this.stateAfterSpecialLast(e,5):17===this._state?this.stateInProcessingInstruction(e):64===this._state?this.stateInNamedEntity(e):23===this._state?d(this,e):62===this._state?B(this,e):24===this._state?p(this,e):25===this._state?f(this,e):30===this._state?this.stateAfterCdata1(e):31===this._state?this.stateAfterCdata2(e):26===this._state?g(this,e):27===this._state?m(this,e):28===this._state?this.stateBeforeCdata6(e):66===this._state?this.stateInHexEntity(e):65===this._state?this.stateInNumericEntity(e):63===this._state?q(this,e):this.cbs.onerror(Error("unknown _state"),this._state),this._index++;}this.cleanup();},e.prototype.finish=function(){this.sectionStart<this._index&&this.handleTrailingData(),this.cbs.onend();},e.prototype.handleTrailingData=function(){var e=this.buffer.substr(this.sectionStart);29===this._state||30===this._state||31===this._state?this.cbs.oncdata(e):19===this._state||21===this._state||22===this._state?this.cbs.oncomment(e):64!==this._state||this.xmlMode?65!==this._state||this.xmlMode?66!==this._state||this.xmlMode?3!==this._state&&8!==this._state&&11!==this._state&&10!==this._state&&9!==this._state&&13!==this._state&&12!==this._state&&14!==this._state&&6!==this._state&&this.cbs.ontext(e):(this.decodeNumericEntity(3,16,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.decodeNumericEntity(2,10,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.parseLegacyEntity(),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData()));},e.prototype.getSection=function(){return this.buffer.substring(this.sectionStart,this._index);},e.prototype.emitToken=function(e){this.cbs[e](this.getSection()),this.sectionStart=-1;},e.prototype.emitPartial=function(e){1!==this.baseState?this.cbs.onattribdata(e):this.cbs.ontext(e);},e;}();t.default=U;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ItemPropertyHandlerContent=void 0;t.ItemPropertyHandlerContent=class{canHandle(e,t){return "content"in t;}getObject(e,t,r){return t.createLiteral(e.content,r);}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ItemPropertyHandlerNumber=void 0;var n=r(61);t.ItemPropertyHandlerNumber=class{constructor(e,t){this.tagName=e,this.attributeName=t;}canHandle(e,t){return this.tagName===e&&this.attributeName in t;}getObject(e,t,r){var i=e[this.attributeName];var a;return Number.isNaN(Number.parseInt(i,10))||i.includes(".")?Number.isNaN(Number.parseFloat(i))||(a=n.Util.XSD+"double"):a=n.Util.XSD+"integer",t.dataFactory.literal(i,a&&t.dataFactory.namedNode(a));}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ItemPropertyHandlerTime=void 0;var n=r(61);class i{canHandle(e,t){return "time"===e&&"datetime"in t;}getObject(e,t,r){var a=e.datetime;var s;for(var _e26 of i.TIME_REGEXES){if(_e26.regex.exec(a)){s=t.dataFactory.namedNode(n.Util.XSD+_e26.type);break;}}return t.dataFactory.literal(a,s);}}t.ItemPropertyHandlerTime=i,i.TIME_REGEXES=[{regex:/^\x2D?P([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9])?S)?)?$/,type:"duration"},{regex:/^[0-9]+\x2D[0-9][0-9]\x2D[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+\x2D][0-9][0-9]:[0-9][0-9]))$/,type:"dateTime"},{regex:/^[0-9]+\x2D[0-9][0-9]\x2D[0-9][0-9]Z?$/,type:"date"},{regex:/^[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+\x2D][0-9][0-9]:[0-9][0-9]))$/,type:"time"},{regex:/^[0-9]+\x2D[0-9][0-9]$/,type:"gYearMonth"},{regex:/^[0-9]+$/,type:"gYear"}];},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ItemPropertyHandlerUrl=void 0;var n=r(13);t.ItemPropertyHandlerUrl=class{constructor(e,t){this.tagName=e,this.attributeName=t;}canHandle(e,t){return this.tagName===e&&this.attributeName in t;}getObject(e,t,r){return t.dataFactory.namedNode(n.resolve(e[this.attributeName],t.baseIRI));}};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t});}:function(e,t){e.default=t;}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e){"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);}return i(t,e),t;},s=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e};};Object.defineProperty(t,"__esModule",{value:!0}),t.RssHandler=t.DefaultHandler=t.DomUtils=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.DomHandler=t.Parser=void 0;var u=r(80);Object.defineProperty(t,"Parser",{enumerable:!0,get:function get(){return u.Parser;}});var c=r(58);Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function get(){return c.DomHandler;}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function get(){return c.DomHandler;}}),t.parseDOM=function(e,t){var r=new c.DomHandler(void 0,t);return new u.Parser(r,t).end(e),r.dom;},t.createDomStream=function(e,t,r){var n=new c.DomHandler(e,t,r);return new u.Parser(n,t);};var l=r(140);Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function get(){return o(l).default;}});var h=a(r(59));t.ElementType=h,s(r(146),t),t.DomUtils=a(r(60));var d=r(146);Object.defineProperty(t,"RssHandler",{enumerable:!0,get:function get(){return d.FeedHandler;}});},function(e,t,r){var _n24,i=this&&this.__extends||(_n24=function n(e,t){return (_n24=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t;}||function(e,t){for(var r in t){Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);}})(e,t);},function(e,t){function r(){this.constructor=e;}_n24(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r());}),a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t});}:function(e,t){e.default=t;}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e){"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);}return s(t,e),t;},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e};};Object.defineProperty(t,"__esModule",{value:!0}),t.parseFeed=t.FeedHandler=void 0;var c,l,h=u(r(58)),d=o(r(60)),p=r(80);!function(e){e[e.image=0]="image",e[e.audio=1]="audio",e[e.video=2]="video",e[e.document=3]="document",e[e.executable=4]="executable";}(c||(c={})),function(e){e[e.sample=0]="sample",e[e.full=1]="full",e[e.nonstop=2]="nonstop";}(l||(l={}));var f=function(e){function t(t,r){return "object"==typeof t&&(r=t=void 0),e.call(this,t,r)||this;}return i(t,e),t.prototype.onend=function(){var e,t,r={},n=y(w,this.dom);if(n)if("feed"===n.name){var i=n.children;r.type="atom",v(r,"id","id",i),v(r,"title","title",i);var a=_("href",y("link",i));a&&(r.link=a),v(r,"description","subtitle",i),(s=b("updated",i))&&(r.updated=new Date(s)),v(r,"author","email",i,!0),r.items=m("entry",i).map(function(e){var t={},r=e.children;v(t,"id","id",r),v(t,"title","title",r);var n=_("href",y("link",r));n&&(t.link=n);var i=b("summary",r)||b("content",r);i&&(t.description=i);var a=b("updated",r);return a&&(t.pubDate=new Date(a)),t.media=g(r),t;});}else {var s;i=null!==(t=null===(e=y("channel",n.children))||void 0===e?void 0:e.children)&&void 0!==t?t:[];r.type=n.name.substr(0,3),r.id="",v(r,"title","title",i),v(r,"link","link",i),v(r,"description","description",i),(s=b("lastBuildDate",i))&&(r.updated=new Date(s)),v(r,"author","managingEditor",i,!0),r.items=m("item",n.children).map(function(e){var t={},r=e.children;v(t,"id","guid",r),v(t,"title","title",r),v(t,"link","link",r),v(t,"description","description",r);var n=b("pubDate",r);return n&&(t.pubDate=new Date(n)),t.media=g(r),t;});}this.feed=r,this.handleCallback(n?null:Error("couldn't find root of feed"));},t;}(h.default);function g(e){return m("media:content",e).map(function(e){var t={medium:e.attribs.medium,isDefault:!!e.attribs.isDefault};return e.attribs.url&&(t.url=e.attribs.url),e.attribs.fileSize&&(t.fileSize=parseInt(e.attribs.fileSize,10)),e.attribs.type&&(t.type=e.attribs.type),e.attribs.expression&&(t.expression=e.attribs.expression),e.attribs.bitrate&&(t.bitrate=parseInt(e.attribs.bitrate,10)),e.attribs.framerate&&(t.framerate=parseInt(e.attribs.framerate,10)),e.attribs.samplingrate&&(t.samplingrate=parseInt(e.attribs.samplingrate,10)),e.attribs.channels&&(t.channels=parseInt(e.attribs.channels,10)),e.attribs.duration&&(t.duration=parseInt(e.attribs.duration,10)),e.attribs.height&&(t.height=parseInt(e.attribs.height,10)),e.attribs.width&&(t.width=parseInt(e.attribs.width,10)),e.attribs.lang&&(t.lang=e.attribs.lang),t;});}function m(e,t){return d.getElementsByTagName(e,t,!0);}function y(e,t){return d.getElementsByTagName(e,t,!0,1)[0];}function b(e,t,r){return void 0===r&&(r=!1),d.getText(d.getElementsByTagName(e,t,r,1)).trim();}function _(e,t){return t?t.attribs[e]:null;}function v(e,t,r,n,i){void 0===i&&(i=!1);var a=b(r,n,i);a&&(e[t]=a);}function w(e){return "rss"===e||"feed"===e||"rdf:RDF"===e;}t.FeedHandler=f;var S={xmlMode:!0};t.parseFeed=function(e,t){void 0===t&&(t=S);var r=new f(t);return new p.Parser(r,t).end(e),r.feed;};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;var n=r(13),i=r(82),a=r(5);class s{constructor(e,t){this.dataFactory=e||new a.DataFactory(),this.baseIRI=this.dataFactory.namedNode(t||""),this.baseIRIDocument=this.baseIRI;}static parsePrefixes(e,t,r){var n={};if(r)for(var _t47 in e){_t47.startsWith("xmlns")&&(n[_t47.substr(6)]=e[_t47]);}if(e.prefix||Object.keys(n).length>0){var _r42=Object.assign(Object.assign({},t),n);if(e.prefix){var _t48;for(;_t48=s.PREFIX_REGEX.exec(e.prefix);){_r42[_t48[1]]=_t48[2];}}return _r42;}return t;}static expandPrefixedTerm(e,t){var r=e.indexOf(":");var n,i;if(r>=0&&(n=e.substr(0,r),i=e.substr(r+1)),""===n)return "http://www.w3.org/1999/xhtml/vocab#"+i;if(n){var _e27=t.prefixesAll[n];if(_e27)return _e27+i;}if(e){var _r43=t.prefixesAll[e.toLocaleLowerCase()];if(_r43)return _r43;}return e;}static isValidIri(e){return s.IRI_REGEX.test(e);}static contentTypeToProfile(e){return i.RDFA_CONTENTTYPES[e]||"";}getBaseIRI(e){var t=e;var r=t.indexOf("#");return r>=0&&(t=t.substr(0,r)),this.dataFactory.namedNode(n.resolve(t,this.baseIRI.value));}getResourceOrBaseIri(e,t){return !0===e?this.getBaseIriTerm(t):e;}getBaseIriTerm(e){return e.localBaseIRI||this.baseIRI;}createVocabIris(e,t,r,n){return e.split(/\s+/).filter(e=>e&&(r||e.indexOf(":")>=0)).map(e=>this.createIri(e,t,!0,!0,n)).filter(e=>null!=e);}createLiteral(e,t){if(t.interpretObjectAsTime&&!t.datatype)for(var _r44 of s.TIME_REGEXES){if(e.match(_r44.regex)){t.datatype=this.dataFactory.namedNode(s.XSD+_r44.type);break;}}return this.dataFactory.literal(e,t.datatype||t.language);}createBlankNode(){return this.blankNodeFactory?this.blankNodeFactory():this.dataFactory.blankNode();}createIri(e,t,r,i,a){if(e=e||"",!i)return r||(e=n.resolve(e,this.getBaseIriTerm(t).value)),s.isValidIri(e)?this.dataFactory.namedNode(e):null;if(e.length>0&&"["===e[0]&&"]"===e[e.length-1]&&(e=e.substr(1,e.length-2)).indexOf(":")<0)return null;if(e.startsWith("_:"))return a?this.dataFactory.blankNode(e.substr(2)||"b_identity"):null;if(r&&t.vocab&&e.indexOf(":")<0)return this.dataFactory.namedNode(t.vocab+e);var o=s.expandPrefixedTerm(e,t);return r?e!==o&&(o=n.resolve(o,this.baseIRIDocument.value)):o=n.resolve(o,this.getBaseIriTerm(t).value),s.isValidIri(o)?this.dataFactory.namedNode(o):null;}}t.Util=s,s.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s.XSD="http://www.w3.org/2001/XMLSchema#",s.RDFA="http://www.w3.org/ns/rdfa#",s.PREFIX_REGEX=/\s*([^:\s]*)*:\s*([^\s]*)*\s*/g,s.TIME_REGEXES=[{regex:/^-?P([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9])?S)?)?$/,type:"duration"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"dateTime"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,type:"date"},{regex:/^[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"time"},{regex:/^[0-9]+-[0-9][0-9]$/,type:"gYearMonth"},{regex:/^[0-9]+$/,type:"gYear"}],s.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`]*$/;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(327),t),i(r(328),t);},function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{u(n.next(e));}catch(e){a(e);}}function o(e){try{u(n.throw(e));}catch(e){a(e);}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t);})).then(s,o);}u((n=n.apply(e,t||[])).next());});};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultExpandOptions=t.ContextParser=void 0,r(45);var i=r(13),a=r(47),s=r(150),o=r(152),u=r(83),c=r(84);class l{constructor(e){e=e||{},this.documentLoader=e.documentLoader||new s.FetchDocumentLoader(),this.documentCache={},this.validateContext=!e.skipValidation,this.expandContentTypeToBase=!!e.expandContentTypeToBase,this.remoteContextsDepthLimit=e.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps=!("redirectSchemaOrgHttps"in e)||!!e.redirectSchemaOrgHttps;}static validateLanguage(e,t,r){if("string"!=typeof e)throw new a.ErrorCoded("The value of an '@language' must be a string, got '"+JSON.stringify(e)+"'",r);if(!u.Util.REGEX_LANGUAGE_TAG.test(e)){if(t)throw new a.ErrorCoded("The value of an '@language' must be a valid language tag, got '"+JSON.stringify(e)+"'",r);return !1;}return !0;}static validateDirection(e,t){if("string"!=typeof e)throw new a.ErrorCoded("The value of an '@direction' must be a string, got '"+JSON.stringify(e)+"'",a.ERROR_CODES.INVALID_BASE_DIRECTION);if(!u.Util.REGEX_DIRECTION_TAG.test(e)){if(t)throw new a.ErrorCoded("The value of an '@direction' must be 'ltr' or 'rtl', got '"+JSON.stringify(e)+"'",a.ERROR_CODES.INVALID_BASE_DIRECTION);return !1;}return !0;}idifyReverseTerms(e){for(var _t49 of Object.keys(e)){var _r45=e[_t49];if(_r45&&"object"==typeof _r45&&_r45["@reverse"]&&!_r45["@id"]){if("string"!=typeof _r45["@reverse"]||u.Util.isValidKeyword(_r45["@reverse"]))throw new a.ErrorCoded("Invalid @reverse value, must be absolute IRI or blank node: '"+_r45["@reverse"]+"'",a.ERROR_CODES.INVALID_IRI_MAPPING);_r45["@id"]=_r45["@reverse"],u.Util.isPotentialKeyword(_r45["@reverse"])?delete _r45["@reverse"]:_r45["@reverse"]=!0;}}return e;}expandPrefixedTerms(e,t){var r=e.getContextRaw();for(var _n25 of Object.keys(r)){if(u.Util.EXPAND_KEYS_BLACKLIST.indexOf(_n25)<0&&!u.Util.isReservedInternalKeyword(_n25)){var _i12=r[_n25];if(u.Util.isPotentialKeyword(_n25)&&u.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(_n25)>=0&&("@type"!==_n25||"object"==typeof r[_n25]&&!r[_n25]["@protected"]&&"@set"!==r[_n25]["@container"]))throw new a.ErrorCoded("Keywords can not be aliased to something else.\nTried mapping "+_n25+" to "+JSON.stringify(_i12),a.ERROR_CODES.KEYWORD_REDEFINITION);if(u.Util.ALIAS_RANGE_BLACKLIST.indexOf(u.Util.getContextValueId(_i12))>=0)throw new a.ErrorCoded("Aliasing to certain keywords is not allowed.\nTried mapping "+_n25+" to "+JSON.stringify(_i12),a.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(_i12&&u.Util.isPotentialKeyword(u.Util.getContextValueId(_i12))&&!0===_i12["@prefix"])throw new a.ErrorCoded("Tried to use keyword aliases as prefix: '"+_n25+"': '"+JSON.stringify(_i12)+"'",a.ERROR_CODES.INVALID_TERM_DEFINITION);for(;u.Util.isPrefixValue(r[_n25]);){var _i13=r[_n25];var _a15=!1;if("string"==typeof _i13)r[_n25]=e.expandTerm(_i13,!0),_a15=_a15||_i13!==r[_n25];else {var _s6=_i13["@id"],_o5=_i13["@type"],_c3=!("@prefix"in _i13)||u.Util.isValidIri(_n25);if("@id"in _i13)null!=_s6&&"string"==typeof _s6&&(r[_n25]["@id"]=e.expandTerm(_s6,!0),_a15=_a15||_s6!==r[_n25]["@id"]);else if(!u.Util.isPotentialKeyword(_n25)&&_c3){var _t50=e.expandTerm(_n25,!0);_t50!==_n25&&(r[_n25]["@id"]=_t50,_a15=!0);}!_o5||"string"!=typeof _o5||"@vocab"===_o5||_i13["@container"]&&_i13["@container"]["@type"]||!_c3||(r[_n25]["@type"]=e.expandTerm(_o5,!0),t&&_o5===r[_n25]["@type"]&&(r[_n25]["@type"]=e.expandTerm(_o5,!1)),_a15=_a15||_o5!==r[_n25]["@type"]);}if(!_a15)break;}}}}normalize(e,_ref32){var{processingMode:t,normalizeLanguageTags:r}=_ref32;if(r||1===t)for(var _t51 of Object.keys(e)){if("@language"===_t51&&"string"==typeof e[_t51])e[_t51]=e[_t51].toLowerCase();else {var _r46=e[_t51];_r46&&"object"==typeof _r46&&"string"==typeof _r46["@language"]&&(_r46["@language"]=_r46["@language"].toLowerCase());}}}containersToHash(e){for(var _t52 of Object.keys(e)){var _r47=e[_t52];if(_r47&&"object"==typeof _r47)if("string"==typeof _r47["@container"])_r47["@container"]={[_r47["@container"]]:!0};else if(Array.isArray(_r47["@container"])){var _e28={};for(var _t53 of _r47["@container"]){_e28[_t53]=!0;}_r47["@container"]=_e28;}}}applyScopedProtected(e,_ref33){var{processingMode:t}=_ref33;if(t&&t>=1.1&&e["@protected"]){for(var _t54 of Object.keys(e)){if(!u.Util.isReservedInternalKeyword(_t54)&&!u.Util.isPotentialKeyword(_t54)&&!u.Util.isTermProtected(e,_t54)){var _r48=e[_t54];_r48&&"object"==typeof _r48?"@protected"in e[_t54]||(e[_t54]["@protected"]=!0):e[_t54]={"@id":_r48,"@protected":!0};}}delete e["@protected"];}}validateKeywordRedefinitions(e,t,r){for(var _n26 of Object.keys(t)){if(u.Util.isTermProtected(e,_n26)){if("string"==typeof t[_n26]){var _i15=u.Util.isSimpleTermDefinitionPrefix(t[_n26],r);t[_n26]={"@id":t[_n26]},_i15&&(t[_n26]["@prefix"]=!0,e[_n26]["@prefix"]=!0);}var _i14=c(e[_n26]);t[_n26]["@protected"]=!0;if(_i14!==c(t[_n26]))throw new a.ErrorCoded("Attempted to override the protected keyword "+_n26+" from "+JSON.stringify(u.Util.getContextValueId(e[_n26]))+" to "+JSON.stringify(u.Util.getContextValueId(t[_n26])),a.ERROR_CODES.PROTECTED_TERM_REDEFINITION);}}}validate(e,_ref34){var{processingMode:t}=_ref34;for(var _r49 of Object.keys(e)){if(u.Util.isReservedInternalKeyword(_r49))continue;if(""===_r49)throw new a.ErrorCoded("The empty term is not allowed, got: '"+_r49+"': '"+JSON.stringify(e[_r49])+"'",a.ERROR_CODES.INVALID_TERM_DEFINITION);var _n27=e[_r49],_i16=typeof _n27;if(u.Util.isPotentialKeyword(_r49)){switch(_r49.substr(1)){case"vocab":if(null!==_n27&&"string"!==_i16)throw new a.ErrorCoded("Found an invalid @vocab IRI: "+_n27,a.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(null!==_n27&&"string"!==_i16)throw new a.ErrorCoded("Found an invalid @base IRI: "+e[_r49],a.ERROR_CODES.INVALID_BASE_IRI);break;case"language":null!==_n27&&l.validateLanguage(_n27,!0,a.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(null!==_n27&&"number"!==_i16)throw new a.ErrorCoded("Found an invalid @version number: "+_n27,a.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":null!==_n27&&l.validateDirection(_n27,!0);break;case"propagate":if(1===t)throw new a.ErrorCoded("Found an illegal @propagate keyword: "+_n27,a.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(null!==_n27&&"boolean"!==_i16)throw new a.ErrorCoded("Found an invalid @propagate value: "+_n27,a.ERROR_CODES.INVALID_PROPAGATE_VALUE);}if(u.Util.isValidKeyword(_r49)&&u.Util.isValidKeyword(u.Util.getContextValueId(_n27)))throw new a.ErrorCoded("Illegal keyword alias in term value, found: '"+_r49+"': '"+u.Util.getContextValueId(_n27)+"'",a.ERROR_CODES.KEYWORD_REDEFINITION);}else if(null!==_n27)switch(_i16){case"string":if(u.Util.getPrefix(_n27,e)===_r49)throw new a.ErrorCoded("Detected cyclical IRI mapping in context entry: '"+_r49+"': '"+JSON.stringify(_n27)+"'",a.ERROR_CODES.CYCLIC_IRI_MAPPING);if(u.Util.isValidIriWeak(_r49)){if("@type"===_n27)throw new a.ErrorCoded("IRIs can not be mapped to @type, found: '"+_r49+"': '"+_n27+"'",a.ERROR_CODES.INVALID_IRI_MAPPING);if(u.Util.isValidIri(_n27)&&_n27!==new o.JsonLdContextNormalized(e).expandTerm(_r49))throw new a.ErrorCoded("IRIs can not be mapped to other IRIs, found: '"+_r49+"': '"+_n27+"'",a.ERROR_CODES.INVALID_IRI_MAPPING);}break;case"object":if(!(u.Util.isCompactIri(_r49)||"@id"in _n27||("@id"===_n27["@type"]?e["@base"]:e["@vocab"])))throw new a.ErrorCoded("Missing @id in context entry: '"+_r49+"': '"+JSON.stringify(_n27)+"'",a.ERROR_CODES.INVALID_IRI_MAPPING);for(var _s7 of Object.keys(_n27)){var _c4=_n27[_s7];if(_c4)switch(_s7){case"@id":if(u.Util.isValidKeyword(_c4)&&"@type"!==_c4&&"@id"!==_c4&&"@graph"!==_c4)throw new a.ErrorCoded("Illegal keyword alias in term value, found: '"+_r49+"': '"+JSON.stringify(_n27)+"'",a.ERROR_CODES.INVALID_IRI_MAPPING);if(u.Util.isValidIriWeak(_r49)){if("@type"===_c4)throw new a.ErrorCoded("IRIs can not be mapped to @type, found: '"+_r49+"': '"+JSON.stringify(_n27)+"'",a.ERROR_CODES.INVALID_IRI_MAPPING);if(u.Util.isValidIri(_c4)&&_c4!==new o.JsonLdContextNormalized(e).expandTerm(_r49))throw new a.ErrorCoded("IRIs can not be mapped to other IRIs, found: '"+_r49+"': '"+JSON.stringify(_n27)+"'",a.ERROR_CODES.INVALID_IRI_MAPPING);}if("string"!=typeof _c4)throw new a.ErrorCoded("Detected non-string @id in context entry: '"+_r49+"': '"+JSON.stringify(_n27)+"'",a.ERROR_CODES.INVALID_IRI_MAPPING);if(u.Util.getPrefix(_c4,e)===_r49)throw new a.ErrorCoded("Detected cyclical IRI mapping in context entry: '"+_r49+"': '"+JSON.stringify(_n27)+"'",a.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if("@type"===_n27["@container"]&&"@id"!==_c4&&"@vocab"!==_c4)throw new a.ErrorCoded("@container: @type only allows @type: @id or @vocab, but got: '"+_r49+"': '"+_c4+"'",a.ERROR_CODES.INVALID_TYPE_MAPPING);if("string"!=typeof _c4)throw new a.ErrorCoded("The value of an '@type' must be a string, got '"+JSON.stringify(_i16)+"'",a.ERROR_CODES.INVALID_TYPE_MAPPING);if(!("@id"===_c4||"@vocab"===_c4||1!==t&&"@json"===_c4||1!==t&&"@none"===_c4||"_"!==_c4[0]&&u.Util.isValidIri(_c4)))throw new a.ErrorCoded("A context @type must be an absolute IRI, found: '"+_r49+"': '"+_c4+"'",a.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if("string"==typeof _c4&&_n27["@id"]&&_n27["@id"]!==_c4)throw new a.ErrorCoded("Found non-matching @id and @reverse term values in '"+_r49+"':'"+_c4+"' and '"+_n27["@id"]+"'",a.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in _n27)throw new a.ErrorCoded("@nest is not allowed in the reverse property '"+_r49+"'",a.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(1===t&&(Object.keys(_c4).length>1||u.Util.CONTAINERS_1_0.indexOf(Object.keys(_c4)[0])<0))throw new a.ErrorCoded("Invalid term @container for '"+_r49+"' ('"+Object.keys(_c4)+"') in 1.0, must be only one of "+u.Util.CONTAINERS_1_0.join(", "),a.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(var _e29 of Object.keys(_c4)){if("@list"===_e29&&_n27["@reverse"])throw new a.ErrorCoded("Term value can not be @container: @list and @reverse at the same time on '"+_r49+"'",a.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(u.Util.CONTAINERS.indexOf(_e29)<0)throw new a.ErrorCoded("Invalid term @container for '"+_r49+"' ('"+_e29+"'), must be one of "+u.Util.CONTAINERS.join(", "),a.ERROR_CODES.INVALID_CONTAINER_MAPPING);}break;case"@language":l.validateLanguage(_c4,!0,a.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":l.validateDirection(_c4,!0);break;case"@prefix":if(null!==_c4&&"boolean"!=typeof _c4)throw new a.ErrorCoded("Found an invalid term @prefix boolean in: '"+_r49+"': '"+JSON.stringify(_n27)+"'",a.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in _n27)&&!u.Util.isValidIri(_r49))throw new a.ErrorCoded("Invalid @prefix definition for '"+_r49+"' ('"+JSON.stringify(_n27)+"'",a.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(1===t||!_n27["@container"]||!_n27["@container"]["@index"])throw new a.ErrorCoded("Attempt to add illegal key to value object: '"+_r49+"': '"+JSON.stringify(_n27)+"'",a.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(u.Util.isPotentialKeyword(_c4)&&"@nest"!==_c4)throw new a.ErrorCoded("Found an invalid term @nest value in: '"+_r49+"': '"+JSON.stringify(_n27)+"'",a.ERROR_CODES.INVALID_NEST_VALUE);}}break;default:throw new a.ErrorCoded("Found an invalid term value: '"+_r49+"': '"+_n27+"'",a.ERROR_CODES.INVALID_TERM_DEFINITION);}}}applyBaseEntry(e,t,r){return "string"==typeof e||(r&&!("@base"in e)&&t.parentContext&&"@base"in t.parentContext&&(e["@base"]=t.parentContext["@base"],t.parentContext["@__baseDocument"]&&(e["@__baseDocument"]=!0)),t.baseIRI&&!t.external&&("@base"in e?null===e["@base"]||"string"!=typeof e["@base"]||u.Util.isValidIri(e["@base"])||(e["@base"]=i.resolve(e["@base"],t.parentContext&&t.parentContext["@base"]||t.baseIRI)):(e["@base"]=t.baseIRI,e["@__baseDocument"]=!0))),e;}normalizeContextIri(e,t){if(!u.Util.isValidIri(e)&&(e=i.resolve(e,t),!u.Util.isValidIri(e)))throw new Error("Invalid context IRI: "+e);return this.redirectSchemaOrgHttps&&e.startsWith("http://schema.org")&&(e="https://schema.org/"),e;}parseInnerContexts(e,t){return n(this,void 0,void 0,function*(){for(var _r50 of Object.keys(e)){var _n28=e[_r50];if(_n28&&"object"==typeof _n28&&"@context"in _n28&&null!==_n28["@context"]){if(this.validateContext)try{var _i17=Object.assign({},e);_i17[_r50]=Object.assign({},_i17[_r50]),delete _i17[_r50]["@context"],yield this.parse(_n28["@context"],Object.assign(Object.assign({},t),{parentContext:_i17,ignoreProtection:!0,ignoreRemoteScopedContexts:!0}));}catch(e){throw new a.ErrorCoded(e.message,a.ERROR_CODES.INVALID_SCOPED_CONTEXT);}_n28["@context"]=(yield this.parse(_n28["@context"],Object.assign(Object.assign({},t),{minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:e}))).getContextRaw();}}return e;});}parse(e,r){if(r===void 0){r={processingMode:l.DEFAULT_PROCESSING_MODE};}return n(this,void 0,void 0,function*(){var{baseIRI:n,parentContext:i,external:s,processingMode:c,normalizeLanguageTags:h,ignoreProtection:d,minimalProcessing:p}=r;var f=i;var g=r.remoteContexts||{};if(Object.keys(g).length>=this.remoteContextsDepthLimit)throw new a.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(g),a.ERROR_CODES.CONTEXT_OVERFLOW);if(null==e){if(!d&&f&&u.Util.hasProtectedTerms(f))throw new a.ErrorCoded("Illegal context nullification when terms are protected",a.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new o.JsonLdContextNormalized(this.applyBaseEntry({},r,!1));}if("string"==typeof e){var _t55=this.normalizeContextIri(e,n),_i18=this.getOverriddenLoad(_t55,r);if(_i18)return new o.JsonLdContextNormalized(_i18);var _a16=yield this.parse(yield this.load(_t55),Object.assign(Object.assign({},r),{baseIRI:_t55,external:!0,remoteContexts:Object.assign(Object.assign({},g),{[_t55]:!0})}));return this.applyBaseEntry(_a16.getContextRaw(),r,!0),_a16;}if(Array.isArray(e)){var _t56=[],_i19=yield Promise.all(e.map((e,i)=>{if("string"==typeof e){var _a18=this.normalizeContextIri(e,n);_t56[i]=_a18;var _s8=this.getOverriddenLoad(_a18,r);return _s8||this.load(_a18);}return e;}));if(p)return new o.JsonLdContextNormalized(_i19);var _a17=yield _i19.reduce((e,n,i)=>e.then(e=>this.parse(n,Object.assign(Object.assign({},r),{baseIRI:_t56[i]||r.baseIRI,external:!!_t56[i]||r.external,parentContext:e.getContextRaw(),remoteContexts:_t56[i]?Object.assign(Object.assign({},g),{[_t56[i]]:!0}):g}))),Promise.resolve(new o.JsonLdContextNormalized(f||{})));return this.applyBaseEntry(_a17.getContextRaw(),r,!0),_a17;}if("object"==typeof e){if("@context"in e)return yield this.parse(e["@context"],r);e=JSON.parse(JSON.stringify(e)),f&&(f=JSON.parse(JSON.stringify(f)));var _i20={};if(s&&delete e["@base"],this.applyBaseEntry(e,r,!0),this.containersToHash(e),p)return new o.JsonLdContextNormalized(e);var _u2={};if("@import"in e){if(!(c&&c>=1.1))throw new a.ErrorCoded("Context importing is not supported in JSON-LD 1.0",a.ERROR_CODES.INVALID_CONTEXT_ENTRY);if("string"!=typeof e["@import"])throw new a.ErrorCoded("An @import value must be a string, but got "+typeof e["@import"],a.ERROR_CODES.INVALID_IMPORT_VALUE);_u2=yield this.loadImportContext(this.normalizeContextIri(e["@import"],n)),delete e["@import"];}_i20=Object.assign(Object.assign(Object.assign(Object.assign({},_i20),f),_u2),e);var _g=new o.JsonLdContextNormalized(_i20);return yield this.parseInnerContexts(_i20,r),!d&&f&&c&&c>=1.1&&this.validateKeywordRedefinitions(f,_i20,t.defaultExpandOptions),(_i20&&_i20["@version"]||c||l.DEFAULT_PROCESSING_MODE)>=1.1&&(e["@vocab"]&&"string"==typeof e["@vocab"]||""===e["@vocab"])&&e["@vocab"].indexOf(":")<0&&f&&"@vocab"in f&&(_i20["@vocab"]=f["@vocab"]+e["@vocab"]),this.idifyReverseTerms(_i20),this.expandPrefixedTerms(_g,this.expandContentTypeToBase),this.normalize(_i20,{processingMode:c,normalizeLanguageTags:h}),this.applyScopedProtected(_i20,{processingMode:c}),this.validateContext&&this.validate(_i20,{processingMode:c}),_g;}throw new a.ErrorCoded("Tried parsing a context that is not a string, array or object, but got "+e,a.ERROR_CODES.INVALID_LOCAL_CONTEXT);});}load(e){return n(this,void 0,void 0,function*(){var t=this.documentCache[e];if(t)return "string"==typeof t?t:Array.isArray(t)?t.slice():Object.assign({},t);var r;try{r=yield this.documentLoader.load(e);}catch(t){throw new a.ErrorCoded("Failed to load remote context "+e+": "+t.message,a.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED);}if(!("@context"in r))throw new a.ErrorCoded("Missing @context in remote context at "+e,a.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[e]=r["@context"];});}getOverriddenLoad(e,t){if(e in(t.remoteContexts||{})){if(t.ignoreRemoteScopedContexts)return e;throw new a.ErrorCoded("Detected a cyclic context inclusion of "+e,a.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION);}return null;}loadImportContext(e){return n(this,void 0,void 0,function*(){var t=yield this.load(e);if("object"!=typeof t||Array.isArray(t))throw new a.ErrorCoded("An imported context must be a single object: "+e,a.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in t)throw new a.ErrorCoded("An imported context can not import another context: "+e,a.ERROR_CODES.INVALID_CONTEXT_ENTRY);return t;});}}t.ContextParser=l,l.DEFAULT_PROCESSING_MODE=1.1,t.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0};},function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{u(n.next(e));}catch(e){a(e);}}function o(e){try{u(n.throw(e));}catch(e){a(e);}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t);})).then(s,o);}u((n=n.apply(e,t||[])).next());});};Object.defineProperty(t,"__esModule",{value:!0}),t.FetchDocumentLoader=void 0,r(45);var i=r(47),a=r(151),s=r(13);t.FetchDocumentLoader=class{constructor(e){this.fetcher=e;}load(e){return n(this,void 0,void 0,function*(){var t=yield (this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(t.ok&&t.headers){var _r51=t.headers.get("Content-Type");if(_r51){var _e30=_r51.indexOf(";");_e30>0&&(_r51=_r51.substr(0,_e30));}if("application/ld+json"===_r51)return yield t.json();if(t.headers.has("Link")){var _r52;if(t.headers.forEach((t,n)=>{if("link"===n){var _n29=a.parse(t);for(var _t57 of _n29.get("type","application/ld+json")){if("alternate"===_t57.rel){if(_r52)throw new Error("Multiple JSON-LD alternate links were found on "+e);_r52=s.resolve(_t57.uri,e);}}}}),_r52)return this.load(_r52);}throw new i.ErrorCoded("Unsupported JSON-LD media type "+_r51,i.ERROR_CODES.LOADING_DOCUMENT_FAILED);}throw new Error(t.statusText||"Status code: "+t.status);});}};},function(e,t,r){(function(t){var r=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,i=/\s|\uFEFF|\xA0/,a=/\r?\n[\x20\x09]+/g,s=/[;,"]/,o=/[;,"]|\s/,u=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,c=1,l=2,h=4;function d(e){return e.replace(n,"");}function p(e){return i.test(e);}function f(e,t){for(;p(e[t]);){t++;}return t;}function g(e){return o.test(e)||!u.test(e);}class m{constructor(e){this.refs=[],e&&this.parse(e);}rel(e){for(var t=[],r=e.toLowerCase(),n=0;n<this.refs.length;n++){this.refs[n].rel.toLowerCase()===r&&t.push(this.refs[n]);}return t;}get(e,t){e=e.toLowerCase();for(var r=[],n=0;n<this.refs.length;n++){this.refs[n][e]===t&&r.push(this.refs[n]);}return r;}set(e){return this.refs.push(e),this;}has(e,t){e=e.toLowerCase();for(var r=0;r<this.refs.length;r++){if(this.refs[r][e]===t)return !0;}return !1;}parse(e,t){e=d(e=(t=t||0)?e.slice(t):e).replace(a,"");for(var r=c,n=e.length,i=(t=0,null);t<n;){if(r===c){if(p(e[t])){t++;continue;}if("<"!==e[t])throw new Error('Unexpected character "'+e[t]+'" at offset '+t);if(null!=i&&(null!=i.rel?this.refs.push(...m.expandRelations(i)):this.refs.push(i)),-1===(g=e.indexOf(">",t)))throw new Error("Expected end of URI delimiter at offset "+t);i={uri:e.slice(t+1,g)},t=g,r=l,t++;}else if(r===l){if(p(e[t])){t++;continue;}if(";"===e[t])r=h,t++;else {if(","!==e[t])throw new Error('Unexpected character "'+e[t]+'" at offset '+t);r=c,t++;}}else {if(r!==h)throw new Error('Unknown parser state "'+r+'"');if(";"===e[t]||p(e[t])){t++;continue;}if(-1===(g=e.indexOf("=",t)))throw new Error("Expected attribute delimiter at offset "+t);var o=d(e.slice(t,g)).toLowerCase(),u="";if('"'===e[t=f(e,t=g+1)])for(t++;t<n;){if('"'===e[t]){t++;break;}"\\"===e[t]&&t++,u+=e[t],t++;}else {for(var g=t+1;!s.test(e[g])&&g<n;){g++;}u=e.slice(t,g),t=g;}switch(i[o]&&m.isSingleOccurenceAttr(o)||("*"===o[o.length-1]?i[o]=m.parseExtendedValue(u):(u="type"===o?u.toLowerCase():u,null!=i[o]?Array.isArray(i[o])?i[o].push(u):i[o]=[i[o],u]:i[o]=u)),e[t]){case",":r=c;break;case";":r=h;}t++;}}return null!=i&&(null!=i.rel?this.refs.push(...m.expandRelations(i)):this.refs.push(i)),i=null,this;}toString(){for(var e=[],t="",r=null,n=0;n<this.refs.length;n++){r=this.refs[n],t=Object.keys(this.refs[n]).reduce(function(e,t){return "uri"===t?e:e+"; "+m.formatAttribute(t,r[t]);},"<"+r.uri+">"),e.push(t);}return e.join(", ");}}m.isCompatibleEncoding=function(e){return r.test(e);},m.parse=function(e,t){return new m().parse(e,t);},m.isSingleOccurenceAttr=function(e){return "rel"===e||"type"===e||"media"===e||"title"===e||"title*"===e;},m.isTokenAttr=function(e){return "rel"===e||"type"===e||"anchor"===e;},m.escapeQuotes=function(e){return e.replace(/"/g,'\\"');},m.expandRelations=function(e){return e.rel.split(" ").map(function(t){var r=Object.assign({},e);return r.rel=t,r;});},m.parseExtendedValue=function(e){var t=/([^']+)?(?:'([^']+)')?(.+)/.exec(e);return {language:t[2].toLowerCase(),encoding:m.isCompatibleEncoding(t[1])?null:t[1].toLowerCase(),value:m.isCompatibleEncoding(t[1])?decodeURIComponent(t[3]):t[3]};},m.formatExtendedAttribute=function(e,r){var n=(r.encoding||"utf-8").toUpperCase();return e+"="+n+"'"+(r.language||"en")+"'"+(t.isBuffer(r.value)&&m.isCompatibleEncoding(n)?r.value.toString(n):t.isBuffer(r.value)?r.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):encodeURIComponent(r.value));},m.formatAttribute=function(e,t){return Array.isArray(t)?t.map(t=>m.formatAttribute(e,t)).join("; "):"*"===e[e.length-1]||"string"!=typeof t?m.formatExtendedAttribute(e,t):(m.isTokenAttr(e)?t=g(t)?'"'+m.escapeQuotes(t)+'"':m.escapeQuotes(t):g(t)&&(t='"'+(t=(t=encodeURIComponent(t)).replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"))+'"'),e+"="+t);},e.exports=m;}).call(this,r(11).Buffer);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.JsonLdContextNormalized=void 0;var n=r(13),i=r(149),a=r(47),s=r(83);t.JsonLdContextNormalized=class{constructor(e){this.contextRaw=e;}getContextRaw(){return this.contextRaw;}expandTerm(e,t,r){if(r===void 0){r=i.defaultExpandOptions;}var o=this.contextRaw[e];if(null===o||o&&null===o["@id"])return null;var u=!0;if(o&&t){var _t58=s.Util.getContextValueId(o);if(_t58&&_t58!==e){if("string"==typeof _t58&&(s.Util.isValidIri(_t58)||s.Util.isValidKeyword(_t58)))return _t58;s.Util.isPotentialKeyword(_t58)||(u=!1);}}var c=s.Util.getPrefix(e,this.contextRaw),l=this.contextRaw["@vocab"],h=(!!l||""===l)&&l.indexOf(":")<0,d=this.contextRaw["@base"],p=s.Util.isPotentialKeyword(e);if(c){var _t59=this.contextRaw[c],_n30=s.Util.getContextValueId(_t59);if(_n30){if("string"!=typeof _t59&&r.allowPrefixForcing){if("_"!==_n30[0]&&!p&&!_t59["@prefix"]&&!(e in this.contextRaw))return e;}else if(!s.Util.isSimpleTermDefinitionPrefix(_n30,r))return e;return _n30+e.substr(c.length+1);}}else {if(t&&(l||""===l||r.allowVocabRelativeToBase&&d&&h)&&!p&&!s.Util.isCompactIri(e)){if(h){if(r.allowVocabRelativeToBase)return n.resolve(l,d)+e;throw new a.ErrorCoded("Relative vocab expansion for term '"+e+"' with vocab '"+l+"' is not allowed.",a.ERROR_CODES.INVALID_VOCAB_MAPPING);}return l+e;}if(!t&&d&&!p&&!s.Util.isCompactIri(e))return n.resolve(e,d);}if(u)return e;throw new a.ErrorCoded("Invalid IRI mapping found for context entry '"+e+"': '"+JSON.stringify(o)+"'",a.ERROR_CODES.INVALID_IRI_MAPPING);}compactIri(e,t){if(t&&this.contextRaw["@vocab"]&&e.startsWith(this.contextRaw["@vocab"]))return e.substr(this.contextRaw["@vocab"].length);if(!t&&this.contextRaw["@base"]&&e.startsWith(this.contextRaw["@base"]))return e.substr(this.contextRaw["@base"].length);var r={prefix:"",suffix:e};for(var _n31 in this.contextRaw){var _i21=this.contextRaw[_n31];if(_i21&&!s.Util.isPotentialKeyword(_n31)){var _a19=s.Util.getContextValueId(_i21);if(e.startsWith(_a19)){var _i22=e.substr(_a19.length);if(_i22)_i22.length<r.suffix.length&&(r.prefix=_n31,r.suffix=_i22);else if(t)return _n31;}}}return r.prefix?r.prefix+":"+r.suffix:e;}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;var n=r(9);class i{static termToValue(e,t,r){if(r===void 0){r={compactIds:!1,useNativeTypes:!1};}switch(e.termType){case"NamedNode":var a=t.compactIri(e.value,r.vocab);return r.compactIds?a:{"@id":a};case"DefaultGraph":return r.compactIds?e.value:{"@id":e.value};case"BlankNode":var s="_:"+e.value;return r.compactIds?s:{"@id":s};case"Literal":if(e.datatype.value===i.RDF_JSON){var _t60;try{_t60=JSON.parse(e.value);}catch(e){throw new n.ErrorCoded("Invalid JSON literal: "+e.message,n.ERROR_CODES.INVALID_JSON_LITERAL);}return {"@value":_t60,"@type":"@json"};}if("i18n-datatype"===r.rdfDirection&&e.datatype.value.startsWith(i.I18N)){var[_t61,_r53]=e.datatype.value.substr(i.I18N.length,e.datatype.value.length).split("_");return Object.assign(Object.assign({"@value":e.value},_t61?{"@language":_t61}:{}),_r53?{"@direction":_r53}:{});}var o=e.datatype.value===i.XSD_STRING,u={"@value":!o&&r.useNativeTypes?i.stringToNativeType(e.value,e.datatype.value):e.value};return e.language?Object.assign(Object.assign({},u),{"@language":e.language}):o||"string"!=typeof u["@value"]?u:Object.assign(Object.assign({},u),{"@type":e.datatype.value});}}static stringToNativeType(e,t){if(t.startsWith(i.XSD)){switch(t.substr(i.XSD.length)){case"boolean":if("true"===e)return !0;if("false"===e)return !1;throw new Error("Invalid xsd:boolean value '"+e+"'");case"integer":case"number":case"int":case"byte":case"long":var _t62=parseInt(e,10);if(isNaN(_t62))throw new Error("Invalid xsd:integer value '"+e+"'");return _t62;case"float":case"double":var _r54=parseFloat(e);if(isNaN(_r54))throw new Error("Invalid xsd:float value '"+e+"'");return _r54;}}return e;}}t.Util=i,i.XSD="http://www.w3.org/2001/XMLSchema#",i.XSD_STRING=i.XSD+"string",i.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i.RDF_TYPE=i.RDF+"type",i.RDF_JSON=i.RDF+"JSON",i.I18N="https://www.w3.org/ns/i18n#";},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(336),t),i(r(337),t),i(r(155),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.RdfJsQuadSource=void 0;var n=r(3);class i{constructor(e){this.source=e;}static nullifyVariables(e){return e&&"Variable"!==e.termType?e:void 0;}match(e,t,r,a){var s=this.source.match(i.nullifyVariables(e),i.nullifyVariables(t),i.nullifyVariables(r),i.nullifyVariables(a)),o=n.wrap(s,{autoStart:!1});return this.setMetadata(o,e,t,r,a).catch(e=>o.destroy(e)),o;}setMetadata(e,t,r,n,a){var _this18=this;return _asyncToGenerator(function*(){var s;if(_this18.source.countQuads)s=yield _this18.source.countQuads(i.nullifyVariables(t),i.nullifyVariables(r),i.nullifyVariables(n),i.nullifyVariables(a));else {var _e31=0;s=yield new Promise((s,o)=>{var u=_this18.source.match(i.nullifyVariables(t),i.nullifyVariables(r),i.nullifyVariables(n),i.nullifyVariables(a));u.on("error",o),u.on("end",()=>s(_e31)),u.on("data",()=>_e31++);});}e.setProperty("metadata",{totalItems:s});})();}}t.RdfJsQuadSource=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(157),t),i(r(340),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfMetadata=void 0;var n=r(0);class i extends n.Actor{constructor(e){super(e);}}t.ActorRdfMetadata=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfMetadataExtract=void 0;var n=r(0);class i extends n.Actor{constructor(e){super(e);}}t.ActorRdfMetadataExtract=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(160),t),i(r(369),t),i(r(48),t),i(r(370),t),i(r(162),t);},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(161),t),i(r(353),t),i(r(62),t),i(r(86),t),i(r(363),t),i(r(364),t),i(r(365),t),i(r(63),t),i(r(366),t),i(r(367),t),i(r(368),t);},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(38),t),i(r(348),t),i(r(349),t),i(r(350),t),i(r(351),t),i(r(352),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;var n=r(5),i=r(9),a=r(6);t.Util=class{constructor(e){this.nodeHandlers={},this.nodeValueHandlers={},this.directiveNodeHandlers={},this.settings=e,this.dataFactory=e.dataFactory||new n.DataFactory(),this.operationFactory=new a.Factory(this.dataFactory),this.contextParser=new i.ContextParser();}registerNodeHandler(e){this.nodeHandlers[e.targetKind]=e;}registerNodeValueHandler(e){this.nodeValueHandlers[e.targetKind]=e;}registerDirectiveNodeHandler(e){this.directiveNodeHandlers[e.targetKind]=e;}handleNode(e,t){var r=this.nodeHandlers[e.kind];if(!r)throw new Error("Unsupported GraphQL node '"+e.kind+"'");return r.handle(e,t);}handleNodeValue(e,t,r){var n=this.nodeValueHandlers[e.kind];if(!n)throw new Error("Unsupported GraphQL value node '"+e.kind+"'");return n.handle(e,t,r);}handleDirectiveNode(e,t){var r=this.directiveNodeHandlers[e.directive.name.value];return r?r.handle(e,t):null;}joinOperations(e){if(1===e.length)return e[0];var t=[],r=[];for(var _n32 of e){"bgp"===_n32.type?t.push(_n32):r.push(_n32);}if(t.length===e.length)return this.joinOperationsAsBgp(t);if(t.length===e.length-1&&"leftjoin"===r[0].type&&"bgp"===r[0].left.type){var _e32=r[0];return t.push(_e32.left),this.operationFactory.createLeftJoin(this.joinOperationsAsBgp(t),_e32.right);}return r.length===e.length?this.joinOperationsAsNestedJoin(r):this.joinOperationsAsNestedJoin([this.joinOperationsAsBgp(t),this.joinOperationsAsNestedJoin(r)]);}joinOperationsAsBgp(e){return this.operationFactory.createBgp([].concat.apply([],e.map(e=>e.patterns)));}joinOperationsAsNestedJoin(e){return e.reverse().reduce((e,t)=>e?this.operationFactory.createJoin(t,e):t,null);}appendFieldToPath(e,t){return e.concat([t]);}getFieldLabel(e){return (e.alias?e.alias:e.name).value;}nameToVariable(e,t){return this.dataFactory.variable((t.path.length?t.path.join(this.settings.variableDelimiter)+this.settings.variableDelimiter:"")+e);}valueToNamedNode(e,t){var r=t.expandTerm(e,!0);if(this.settings.requireContext&&!r)throw new Error("No context entry was found for "+e);return this.dataFactory.namedNode(r||e);}getArgument(e,t){if(e)for(var _r55 of e){if(_r55.name.value===t)return _r55;}return null;}newTypePattern(e,t,r){return this.operationFactory.createPattern(e,this.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.valueToNamedNode(t.name.value,r.context),r.graph);}createQuadPattern(e,t,r,n,i){var a=this.valueToNamedNode(t.value,i);return i&&i.getContextRaw()[t.value]&&i.getContextRaw()[t.value]["@reverse"]?this.operationFactory.createPattern(r,a,e,n):this.operationFactory.createPattern(e,a,r,n);}createQuadPath(e,t,r,n,i,a){var s=this.valueToNamedNode(t.value,a);var o=this.operationFactory.createLink(s);for(var _e33 of r.values){if("EnumValue"!==_e33.kind)throw new Error("Invalid value type for 'alt' argument, must be EnumValue, but got "+_e33.kind);o=this.operationFactory.createAlt(o,this.operationFactory.createLink(this.valueToNamedNode(_e33.value,a)));}return a&&a.getContextRaw()[t.value]&&a.getContextRaw()[t.value]["@reverse"]?this.operationFactory.createPath(n,o,e,i):this.operationFactory.createPath(e,o,n,i);}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.storeStream=void 0;var n=r(41);t.storeStream=function(e){var t=new n.Store();return new Promise(r=>t.import(e).once("end",()=>r(t)));};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQlQueryEngine=void 0;var n=r(165);t.GraphQlQueryEngine=class{constructor(e){this.comunicaEngine=e;}query(e,t){var _this19=this;return _asyncToGenerator(function*(){var{data:r}=yield _this19.comunicaEngine.resultToString(yield _this19.comunicaEngine.query(e,t),"application/sparql-results+json");return JSON.parse(yield n(r));})();}};},function(e,t,r){var n=r(372);e.exports=function(e,t,r){"function"==typeof t&&(r=t,t=null),r=r||function(){};var i="";return new n(function(n,a){e.on("data",function(e){i+="string"==typeof t?e.toString(t):e.toString();}),e.on("end",function(){n(i),r(null,i);}),e.on("error",function(e){a(e),r(e);});});};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorHttpInvalidate=void 0;var n=r(0);class i extends n.Actor{constructor(e){super(e);}}t.ActorHttpInvalidate=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(389),t);},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(396),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.JsonLdParser=void 0;var n=r(123),i=r(9),a=r(2),s=r(427),o=r(170),u=r(432),c=r(64),l=r(433),h=r(434),d=r(435),p=r(436),f=r(437),g=r(438),m=r(439),y=r(440),b=r(441),_=r(27),v=r(151);class w extends a.Transform{constructor(e){super({readableObjectMode:!0}),e=e||{},this.options=e,this.parsingContext=new b.ParsingContext(Object.assign({parser:this},e)),this.util=new _.Util({dataFactory:e.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new n(),this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners();}static fromHttpResponse(e,t,r,n){var a,s;if("application/ld+json"!==t){if("application/json"!==t&&!t.endsWith("+json"))throw new i.ErrorCoded("Unsupported JSON-LD media type "+t,i.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(r&&r.has("Link")&&r.forEach((t,r)=>{if("link"===r){var _r56=v.parse(t);for(var _t63 of _r56.get("rel","http://www.w3.org/ns/json-ld#context")){if(a)throw new i.ErrorCoded("Multiple JSON-LD context link headers were found on "+e,i.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);a=_t63.uri;}}}),!a)throw new i.ErrorCoded("Missing context link header for media type "+t+" on "+e,i.ERROR_CODES.LOADING_DOCUMENT_FAILED);}if(r&&r.has("Content-Type")){var _e34=r.get("Content-Type"),_t64=/; *profile=([^"]*)/.exec(_e34);_t64&&"http://www.w3.org/ns/json-ld#streaming"===_t64[1]&&(s=!0);}return new w(Object.assign({baseIRI:e,context:a,streamingProfile:s},n||{}));}import(e){var t=new a.PassThrough({readableObjectMode:!0});e.on("error",e=>r.emit("error",e)),e.on("data",e=>t.push(e)),e.on("end",()=>t.push(null));var r=t.pipe(new w(this.options));return r;}_transform(e,t,r){this.jsonParser.write(e),this.lastOnValueJob.then(()=>r(),e=>r(e));}newOnValueJob(e,t,r,n){var _this20=this;return _asyncToGenerator(function*(){var a=!0;if(n&&r<_this20.lastDepth){var _e35=_this20.parsingContext.listPointerStack[_this20.lastDepth];_e35&&(_e35.value&&_this20.emit("data",_this20.util.dataFactory.quad(_e35.value,_this20.util.rdfRest,_this20.util.rdfNil,_this20.util.getDefaultGraph())),_e35.listId.listHead=!0,_this20.parsingContext.idStack[_e35.listRootDepth+1]=[_e35.listId],_this20.parsingContext.listPointerStack.splice(_this20.lastDepth,1)),(yield o.EntryHandlerContainer.isBufferableContainerHandler(_this20.parsingContext,_this20.lastKeys,_this20.lastDepth))?(_this20.parsingContext.pendingContainerFlushBuffers.push({depth:_this20.lastDepth,keys:_this20.lastKeys.slice(0,_this20.lastKeys.length)}),a=!1):yield _this20.flushBuffer(_this20.lastDepth,_this20.lastKeys);}var s=yield _this20.util.unaliasKeyword(e[r],e,r),u=yield _this20.util.unaliasKeywordParent(e,r);_this20.parsingContext.emittedStack[r]=!0;var c=!0;i.Util.isValidKeyword(s)&&"@reverse"===u&&_this20.emit("error",new i.ErrorCoded("Found the @id '"+t+"' inside an @reverse property",i.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));var l=!1;_this20.parsingContext.validationStack.length>1&&(l=_this20.parsingContext.validationStack[_this20.parsingContext.validationStack.length-1].property);for(var _t65=Math.max(1,_this20.parsingContext.validationStack.length-1);_t65<e.length-1;_t65++){var _n33=_this20.parsingContext.validationStack[_t65]||(_this20.parsingContext.validationStack[_t65]=yield _this20.validateKey(e.slice(0,_t65+1),_t65,l));if(!_n33.valid){_this20.parsingContext.emittedStack[r]=!1,c=!1;break;}!l&&_n33.property&&(l=!0);}if(_this20.util.isLiteral(r)&&(c=!1),c)for(var _n34 of w.ENTRY_HANDLERS){var _i23=yield _n34.test(_this20.parsingContext,_this20.util,s,e,r);if(_i23){yield _n34.handle(_this20.parsingContext,_this20.util,s,e,t,r,_i23),_n34.isStackProcessor()&&(_this20.parsingContext.processingStack[r]=!0);break;}}0===r&&Array.isArray(t)&&(yield _this20.util.validateValueIndexes(t)),a&&r<_this20.lastDepth&&_this20.flushStacks(_this20.lastDepth),_this20.lastDepth=r,_this20.lastKeys=e,_this20.parsingContext.unaliasedKeywordCacheStack.splice(r-1);})();}flushStacks(e){this.parsingContext.processingStack.splice(e,1),this.parsingContext.processingType.splice(e,1),this.parsingContext.emittedStack.splice(e,1),this.parsingContext.idStack.splice(e,1),this.parsingContext.graphStack.splice(e+1,1),this.parsingContext.graphContainerTermStack.splice(e,1),this.parsingContext.jsonLiteralStack.splice(e,1),this.parsingContext.validationStack.splice(e-1,2),this.parsingContext.literalStack.splice(e,this.parsingContext.literalStack.length-e);}flushBuffer(e,t){var _this21=this;return _asyncToGenerator(function*(){var r=_this21.parsingContext.idStack[e];r||(r=_this21.parsingContext.idStack[e]=[_this21.util.dataFactory.blankNode()]);var n=_this21.parsingContext.unidentifiedValuesBuffer[e];if(n){for(var _i24 of r){var _r57=yield _this21.util.getDepthOffsetGraph(e,t),_a20=_this21.parsingContext.graphStack[e]||_r57>=0?_this21.parsingContext.idStack[e-_r57-1]:[yield _this21.util.getGraphContainerValue(t,e)];if(_a20)for(var _t66 of _a20){_this21.parsingContext.emittedStack[e]=!0;for(var _r58 of n){_r58.reverse?_this21.parsingContext.emitQuad(e,_this21.util.dataFactory.quad(_r58.object,_r58.predicate,_i24,_t66)):_this21.parsingContext.emitQuad(e,_this21.util.dataFactory.quad(_i24,_r58.predicate,_r58.object,_t66));}}else {var _r59=_this21.parsingContext.getUnidentifiedGraphBufferSafe(e-(yield _this21.util.getDepthOffsetGraph(e,t))-1);for(var _e36 of n){_e36.reverse?_r59.push({object:_i24,predicate:_e36.predicate,subject:_e36.object}):_r59.push({object:_e36.object,predicate:_e36.predicate,subject:_i24});}}}_this21.parsingContext.unidentifiedValuesBuffer.splice(e,1),_this21.parsingContext.literalStack.splice(e,1),_this21.parsingContext.jsonLiteralStack.splice(e,1);}var i=_this21.parsingContext.unidentifiedGraphsBuffer[e];if(i){for(var _t67 of r){var _r60=1!==e||"BlankNode"!==_t67.termType||_this21.parsingContext.topLevelProperties?_t67:_this21.util.getDefaultGraph();_this21.parsingContext.emittedStack[e]=!0;for(var _t68 of i){_this21.parsingContext.emitQuad(e,_this21.util.dataFactory.quad(_t68.subject,_t68.predicate,_t68.object,_r60));}}_this21.parsingContext.unidentifiedGraphsBuffer.splice(e,1);}})();}validateKey(e,t,r){var _this22=this;return _asyncToGenerator(function*(){for(var _n35 of w.ENTRY_HANDLERS){if(yield _n35.validate(_this22.parsingContext,_this22.util,e,t,r))return {valid:!0,property:r||_n35.isPropertyHandler()};}return {valid:!1,property:!1};})();}attachJsonParserListeners(){this.jsonParser.onValue=e=>{var t=this.jsonParser.stack.length,r=new Array(t+1).fill(0).map((e,r)=>r===t?this.jsonParser.key:this.jsonParser.stack[r].key);if(!this.isParsingContextInner(t)){var _n36=()=>this.newOnValueJob(r,e,t,!0);if(this.parsingContext.streamingProfile||this.parsingContext.contextTree.getContext(r.slice(0,-1)))this.lastOnValueJob=this.lastOnValueJob.then(_n36);else if("@context"===r[t]){var _e37=this.contextJobs[t];_e37||(_e37=this.contextJobs[t]=[]),_e37.push(_n36);}else "@type"===r[t]||"number"==typeof r[t]&&"@type"===r[t-1]?this.typeJobs.push({job:_n36,keys:r.slice(0,r.length-1)}):this.contextAwaitingJobs.push({job:_n36,keys:r});this.parsingContext.streamingProfile||0!==t||(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()));}},this.jsonParser.onError=e=>{this.emit("error",e);};}isParsingContextInner(e){for(var _t69=e;_t69>0;_t69--){if("@context"===this.jsonParser.stack[_t69-1].key)return !0;}return !1;}executeBufferedJobs(){var _this23=this;return _asyncToGenerator(function*(){for(var _e38 of _this23.contextJobs){if(_e38)for(var _t70 of _e38){yield _t70();}}_this23.parsingContext.unaliasedKeywordCacheStack.splice(0);for(var _e39 of _this23.contextAwaitingJobs){if(_this23.typeJobs.length>0){var _t71=[],_r61=[];for(var _n38=0;_n38<_this23.typeJobs.length;_n38++){var _i26=_this23.typeJobs[_n38];_.Util.isPrefixArray(_i26.keys,_e39.keys)&&(_t71.push(_i26),_r61.push(_n38));}var _n37=_t71.sort((e,t)=>e.keys.length-t.keys.length);for(var _e40 of _n37){yield _e40.job();}var _i25=_r61.sort().reverse();for(var _e41 of _i25){_this23.typeJobs.splice(_e41,1);}}yield _e39.job();}})();}}t.JsonLdParser=w,w.DEFAULT_PROCESSING_MODE="1.1",w.ENTRY_HANDLERS=[new s.EntryHandlerArrayValue(),new l.EntryHandlerKeywordContext(),new d.EntryHandlerKeywordId(),new p.EntryHandlerKeywordIncluded(),new h.EntryHandlerKeywordGraph(),new f.EntryHandlerKeywordNest(),new g.EntryHandlerKeywordType(),new y.EntryHandlerKeywordValue(),new o.EntryHandlerContainer(),new m.EntryHandlerKeywordUnknownFallback(),new c.EntryHandlerPredicate(),new u.EntryHandlerInvalidFallback()];},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerContainer=void 0;var n=r(428),i=r(429),a=r(430),s=r(431),o=r(27);class u{static isSimpleGraphContainer(e){return "@graph"in e&&("@set"in e&&2===Object.keys(e).length||1===Object.keys(e).length);}static isComplexGraphContainer(e){return "@graph"in e&&("@set"in e&&Object.keys(e).length>2||!("@set"in e)&&Object.keys(e).length>1);}static getContainerGraphIndex(e,t,r){var n=u.isSimpleGraphContainer(e),i="";for(var _e42=t;_e42<r.length;_e42++){n&&"number"!=typeof r[_e42]||(i+=":"+r[_e42]),n||"number"==typeof r[_e42]||(n=!0);}return i;}static getContainerHandler(e,t,r){return _asyncToGenerator(function*(){var n={containers:{"@set":!0},depth:r,fallback:!0};var i=!1;var a=yield e.getContext(t,2);for(var _e43=r-1;_e43>=0;_e43--){if("number"!=typeof t[_e43]){var _r62=o.Util.getContextValue(a,"@container",t[_e43],!1);if(_r62&&u.isSimpleGraphContainer(_r62))return {containers:_r62,depth:_e43+1,fallback:!1};var _s9=o.Util.getContextValue(a,"@container",t[_e43-1],!1);if(_s9){var _t72=("@graph"in _s9);for(var _r63 in u.CONTAINER_HANDLERS){if(_s9[_r63])return _t72?u.CONTAINER_HANDLERS[_r63].canCombineWithGraph()?{containers:_s9,depth:_e43,fallback:!1}:n:i?n:{containers:_s9,depth:_e43,fallback:!1};}return n;}if(i)return n;i=!0;}}return n;})();}static isBufferableContainerHandler(e,t,r){return _asyncToGenerator(function*(){var n=yield u.getContainerHandler(e,t,r);return !n.fallback&&!("@graph"in n.containers);})();}isPropertyHandler(){return !1;}isStackProcessor(){return !0;}validate(e,t,r,n,i){var _this24=this;return _asyncToGenerator(function*(){return !!(yield _this24.test(e,t,null,r,n));})();}test(e,t,r,n,i){return _asyncToGenerator(function*(){var a=o.Util.getContextValueContainer(yield e.getContext(n,2),n[i-1]);for(var _e44 in u.CONTAINER_HANDLERS){if(a[_e44])return {containers:a,handler:u.CONTAINER_HANDLERS[_e44]};}return null;})();}handle(e,t,r,n,i,a,s){return _asyncToGenerator(function*(){return s.handler.handle(s.containers,e,t,n,i,a);})();}}t.EntryHandlerContainer=u,u.CONTAINER_HANDLERS={"@id":new n.ContainerHandlerIdentifier(),"@index":new i.ContainerHandlerIndex(),"@language":new a.ContainerHandlerLanguage(),"@type":new s.ContainerHandlerType()};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentLoaderMediated=void 0;var n=r(36),i=r(9),a=r(165);class s extends i.FetchDocumentLoader{constructor(e,t){super(s.createFetcher(e,t)),this.mediatorHttp=e,this.context=t;}static createFetcher(e,t){return/*#__PURE__*/function(){var _ref35=_asyncToGenerator(function*(r,i){var s=yield e.mediate({input:r,init:i,context:t});return s.json=/*#__PURE__*/_asyncToGenerator(function*(){return JSON.parse(yield a(n.ActorHttp.toNodeReadable(s.body)));}),s;});return function(_x3,_x4){return _ref35.apply(this,arguments);};}();}}t.DocumentLoaderMediated=s;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncIteratorJsonBindings=void 0;var n=r(36),i=r(1),a=r(3),s=r(74);class o extends a.BufferedIterator{constructor(e,t,r,n){super({autoStart:!1,maxBufferSize:1/0}),this.initialized=!1,this.endpoint=e,this.query=t,this.context=r,this.mediatorHttp=n;}_read(e,t){this.initialized?super._read(e,t):(this.initialized=!0,this.fetchBindingsStream(this.endpoint,this.query,this.context).then(r=>{var n=new s.SparqlJsonParser({prefixVariableQuestionMark:!0}).parseJsonResultsStream(r);r.on("error",e=>n.emit("error",e)),n.on("error",e=>this.emit("error",e)),n.on("data",e=>this._push(i.Bindings(e))),n.on("end",()=>{this.close();}),super._read(e,t);}).catch(e=>this.emit("error",e)));}fetchBindingsStream(e,t,r){var _this25=this;return _asyncToGenerator(function*(){var i=e+"?query="+encodeURIComponent(t),a=new Headers();a.append("Accept","application/sparql-results+json");var s={context:r,input:i,init:{headers:a}},o=yield _this25.mediatorHttp.mediate(s),u=n.ActorHttp.toNodeReadable(o.body);if(!o.ok)throw new Error("Invalid SPARQL endpoint ("+e+") response: "+o.statusText+" ("+o.status+")");return u;})();}}t.AsyncIteratorJsonBindings=o;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SparqlXmlBindingsTransformer=void 0;var n=r(2);class i extends n.Transform{constructor(e){super({objectMode:!0}),this.parser=e;}_transform(e,t,r){var n;try{n=this.parser.parseXmlBindings(e);}catch(e){return r(e);}r(null,n);}}t.SparqlXmlBindingsTransformer=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfDereferenceHttpParseBase=void 0;var n=r(36),i=r(468),a=r(470),s=r(13);class o extends i.ActorRdfDereferenceMediaMappings{constructor(e){super(e);}test(e){return _asyncToGenerator(function*(){if(!/^https?:/.test(e.url))throw new Error("Cannot retrieve "+e.url+" because it is not an HTTP(S) URL.");return !0;})();}run(e){var _this26=this;return _asyncToGenerator(function*(){var t;var{mediaTypes:r}=yield _this26.mediatorRdfParseMediatypes.mediate({context:e.context,mediaTypes:!0}),i=_this26.mediaTypesToAcceptString(r,_this26.getMaxAcceptHeaderLength()),u=new a.Headers({Accept:i});for(var _t73 in e.headers){u.append(_t73,e.headers[_t73]);}var c={context:e.context,init:{headers:u,method:e.method},input:e.url};var l;try{l=yield _this26.mediatorHttp.mediate(c);}catch(t){return _this26.handleDereferenceError(e,t);}var h=s.resolve(l.url,e.url),d={};if(l.headers.forEach((e,t)=>d[t]=e),200!==l.status){var _t74=new Error("Could not retrieve "+e.url+" ("+l.status+": "+(l.statusText||"unknown error")+")");return l.body&&(yield l.body.cancel()),_this26.handleDereferenceError(e,_t74);}var p=n.ActorHttp.toNodeReadable(l.body);var f=o.REGEX_MEDIATYPE.exec(null!==(t=l.headers.get("content-type"))&&void 0!==t?t:"")[0];f&&"text/plain"!==f||(f=_this26.getMediaTypeFromExtension(l.url));var g={baseIRI:h,headers:l.headers,input:p};var m;try{m=(yield _this26.mediatorRdfParseHandle.mediate({context:e.context,handle:g,handleMediaType:f})).handle;}catch(t){return _this26.handleDereferenceError(e,t);}return {url:h,quads:_this26.handleDereferenceStreamErrors(e,m.quads),triples:m.triples,headers:d};})();}mediaTypesToAcceptString(e,t){var r=[],n=Object.keys(e).map(t=>({mediaType:t,priority:e[t]})).sort((e,t)=>t.priority-e.priority);var i=n.length-1;for(var _e45 of n){var _n39=_e45.mediaType+(1!==_e45.priority?";q="+_e45.priority.toFixed(3).replace(/0*$/,""):"");if(i+_n39.length>t){for(;i+"*/*;q=0.1".length>t;){i-=(r.pop()||"").length+1;}r.push("*/*;q=0.1");break;}r.push(_n39),i+=_n39.length;}return 0===r.length?"*/*":r.join(",");}}t.ActorRdfDereferenceHttpParseBase=o,o.REGEX_MEDIATYPE=/^(?:(?![ ;])[\s\S])*/;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfDereference=t.KEY_CONTEXT_LENIENT=void 0;var n=r(2),i=r(0);t.KEY_CONTEXT_LENIENT="@comunica/actor-init-sparql:lenient";class a extends i.Actor{constructor(e){super(e);}isHardError(e){return !e.context||!e.context.get(t.KEY_CONTEXT_LENIENT);}handleDereferenceStreamErrors(e,t){return this.isHardError(e)||(t.on("error",r=>{this.logError(e.context,r.message,()=>({url:e.url})),t.push(null);}),t=t.pipe(new n.PassThrough({objectMode:!0}))),t;}handleDereferenceError(e,t){var _this27=this;return _asyncToGenerator(function*(){if(_this27.isHardError(e))throw t;{_this27.logError(e.context,t.message);var _r64=new n.Readable();return _r64.push(null),{url:e.url,quads:_r64};}})();}}t.ActorRdfDereference=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.FederatedQuadSource=void 0;var n=r(21),i=r(177),a=r(3),s=r(5),o=r(18),u=r(6),c=new s.DataFactory();class l{constructor(e,t,r,i){if(this.mediatorResolveQuadPattern=e,this.sources=t.get(n.KEY_CONTEXT_SOURCES),this.contextDefault=t.delete(n.KEY_CONTEXT_SOURCES),this.emptyPatterns=r,this.sourceIds=new Map(),this.skipEmptyPatterns=i,this.algebraFactory=new u.Factory(),this.skipEmptyPatterns)for(var _e46 of this.sources){this.emptyPatterns.has(_e46)||this.emptyPatterns.set(_e46,[]);}}static isTermBound(e){return "Variable"!==e.termType;}static isSubPatternOf(e,t){return (!l.isTermBound(t.subject)||t.subject.equals(e.subject))&&(!l.isTermBound(t.predicate)||t.predicate.equals(e.predicate))&&(!l.isTermBound(t.object)||t.object.equals(e.object))&&(!l.isTermBound(t.graph)||t.graph.equals(e.graph));}static skolemizeTerm(e,t){return "BlankNode"===e.termType?new i.BlankNodeScoped("bc_"+t+"_"+e.value,c.namedNode(""+l.SKOLEM_PREFIX+t+":"+e.value)):e;}static skolemizeQuad(e,t){return o.mapTerms(e,e=>l.skolemizeTerm(e,t));}static deskolemizeTerm(e,t){if("BlankNode"===e.termType&&"skolemized"in e&&(e=e.skolemized),"NamedNode"===e.termType&&e.value.startsWith(l.SKOLEM_PREFIX)){var _r65=e.value.indexOf(":",l.SKOLEM_PREFIX.length);if(e.value.slice(l.SKOLEM_PREFIX.length,_r65)===t){var _t75=e.value.slice(_r65+1,e.value.length);return c.blankNode(_t75);}return null;}return e;}isSourceEmpty(e,t){if(!this.skipEmptyPatterns)return !1;var r=this.emptyPatterns.get(e);if(r)for(var _e47 of r){if(l.isSubPatternOf(t,_e47))return !0;}return !1;}getSourceId(e){var t=this.sourceIds.get(e);return void 0===t&&(t=""+this.sourceIds.size,this.sourceIds.set(e,t)),t;}match(e,t,r,i){var _this28=this;var s={totalItems:0};var o=this.sources.length;var u=(e,t,r,n)=>{this.skipEmptyPatterns&&!e&&r&&!this.isSourceEmpty(t,r)&&this.emptyPatterns.get(t).push(r),o||(n&&1===this.sources.length?h.setProperty("metadata",n):h.setProperty("metadata",s));},c=Promise.all(this.sources.map(/*#__PURE__*/function(){var _ref37=_asyncToGenerator(function*(c){var h=_this28.getSourceId(c),d=l.deskolemizeTerm(e,h),p=l.deskolemizeTerm(t,h),f=l.deskolemizeTerm(r,h),g=l.deskolemizeTerm(i,h);var m,y,b=n.getDataSourceContext(c,_this28.contextDefault);b=b.set(n.KEY_CONTEXT_SOURCE,{type:n.getDataSourceType(c),value:n.getDataSourceValue(c)}),d&&p&&f&&g&&!_this28.isSourceEmpty(c,m=_this28.algebraFactory.createPattern(d,p,f,g))?y=yield _this28.mediatorResolveQuadPattern.mediate({pattern:m,context:b}):(y={data:new a.ArrayIterator([],{autoStart:!1})},y.data.setProperty("metadata",{totalItems:0})),y.data.getProperty("metadata",e=>{!e.totalItems&&0!==e.totalItems||!Number.isFinite(e.totalItems)?(s.totalItems=1/0,o=0,u(1/0,c,m,e)):(s.totalItems+=e.totalItems,o--,u(e.totalItems,c,m,e));});var _=y.data.map(e=>l.skolemizeQuad(e,h));return "Variable"===i.termType&&(_=_.filter(e=>"DefaultGraph"!==e.graph.termType)),_;});return function(_x5){return _ref37.apply(this,arguments);};}())),h=new a.TransformIterator(/*#__PURE__*/_asyncToGenerator(function*(){return new a.UnionIterator(yield c);}),{autoStart:!1});return 0===this.sources.length&&h.setProperty("metadata",s),h;}}t.FederatedQuadSource=l,l.SKOLEM_PREFIX="urn:comunica_skolem:source_";},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(479),t);},function(e,t,r){var n=r(487),i=Symbol("max"),a=Symbol("length"),s=Symbol("lengthCalculator"),o=Symbol("allowStale"),u=Symbol("maxAge"),c=Symbol("dispose"),l=Symbol("noDisposeOnSet"),h=Symbol("lruList"),d=Symbol("cache"),p=Symbol("updateAgeOnGet"),f=()=>1;var g=(e,t,r)=>{var n=e[d].get(t);if(n){var _t76=n.value;if(m(e,_t76)){if(b(e,n),!e[o])return;}else r&&(e[p]&&(n.value.now=Date.now()),e[h].unshiftNode(n));return _t76.value;}},m=(e,t)=>{if(!t||!t.maxAge&&!e[u])return !1;var r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[u]&&r>e[u];},y=e=>{if(e[a]>e[i])for(var _t77=e[h].tail;e[a]>e[i]&&null!==_t77;){var _r66=_t77.prev;b(e,_t77),_t77=_r66;}},b=(e,t)=>{if(t){var _r67=t.value;e[c]&&e[c](_r67.key,_r67.value),e[a]-=_r67.length,e[d].delete(_r67.key),e[h].removeNode(t);}};class _{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0;}}var v=(e,t,r,n)=>{var i=r.value;m(e,i)&&(b(e,r),e[o]||(i=void 0)),i&&t.call(n,i.value,i.key,e);};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[i]=e.max||1/0;var t=e.length||f;if(this[s]="function"!=typeof t?f:t,this[o]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[u]=e.maxAge||0,this[c]=e.dispose,this[l]=e.noDisposeOnSet||!1,this[p]=e.updateAgeOnGet||!1,this.reset();}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||1/0,y(this);}get max(){return this[i];}set allowStale(e){this[o]=!!e;}get allowStale(){return this[o];}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[u]=e,y(this);}get maxAge(){return this[u];}set lengthCalculator(e){"function"!=typeof e&&(e=f),e!==this[s]&&(this[s]=e,this[a]=0,this[h].forEach(e=>{e.length=this[s](e.value,e.key),this[a]+=e.length;})),y(this);}get lengthCalculator(){return this[s];}get length(){return this[a];}get itemCount(){return this[h].length;}rforEach(e,t){t=t||this;for(var _r68=this[h].tail;null!==_r68;){var _n40=_r68.prev;v(this,e,_r68,t),_r68=_n40;}}forEach(e,t){t=t||this;for(var _r69=this[h].head;null!==_r69;){var _n41=_r69.next;v(this,e,_r69,t),_r69=_n41;}}keys(){return this[h].toArray().map(e=>e.key);}values(){return this[h].toArray().map(e=>e.value);}reset(){this[c]&&this[h]&&this[h].length&&this[h].forEach(e=>this[c](e.key,e.value)),this[d]=new Map(),this[h]=new n(),this[a]=0;}dump(){return this[h].map(e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e);}dumpLru(){return this[h];}set(e,t,r){if((r=r||this[u])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");var n=r?Date.now():0,o=this[s](t,e);if(this[d].has(e)){if(o>this[i])return b(this,this[d].get(e)),!1;var _s10=this[d].get(e).value;return this[c]&&(this[l]||this[c](e,_s10.value)),_s10.now=n,_s10.maxAge=r,_s10.value=t,this[a]+=o-_s10.length,_s10.length=o,this.get(e),y(this),!0;}var p=new _(e,t,o,n,r);return p.length>this[i]?(this[c]&&this[c](e,t),!1):(this[a]+=p.length,this[h].unshift(p),this[d].set(e,this[h].head),y(this),!0);}has(e){if(!this[d].has(e))return !1;var t=this[d].get(e).value;return !m(this,t);}get(e){return g(this,e,!0);}peek(e){return g(this,e,!1);}pop(){var e=this[h].tail;return e?(b(this,e),e.value):null;}del(e){b(this,this[d].get(e));}load(e){this.reset();var t=Date.now();for(var _r70=e.length-1;_r70>=0;_r70--){var _n42=e[_r70],_i27=_n42.e||0;if(0===_i27)this.set(_n42.k,_n42.v);else {var _e48=_i27-t;_e48>0&&this.set(_n42.k,_n42.v,_e48);}}}prune(){this[d].forEach((e,t)=>g(this,t,!1));}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.MediatedQuadSource=void 0;var n=r(489);t.MediatedQuadSource=class{constructor(e,t,r,n,i){this.cacheSize=e,this.context=t,this.firstUrl=r,this.forceSourceType=n,this.mediators=i;}match(e,t,r,i){var a=new n.MediatedLinkedRdfSourcesAsyncRdfIterator(this.cacheSize,this.context,this.forceSourceType,e,t,r,i,this.firstUrl,this.mediators);return this.sourcesState?a.setSourcesState(this.sourcesState):(a.setSourcesState(),this.sourcesState=a.sourcesState),a;}};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(512),t);},function(e,t,r){var n=t;n.utils=r(19),n.common=r(50),n.sha=r(517),n.ripemd=r(521),n.hmac=r(522),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160;},function(e,t,r){var n=r(19).rotr32;function i(e,t,r){return e&t^~e&r;}function a(e,t,r){return e&t^e&r^t&r;}function s(e,t,r){return e^t^r;}t.ft_1=function(e,t,r,n){return 0===e?i(t,r,n):1===e||3===e?s(t,r,n):2===e?a(t,r,n):void 0;},t.ch32=i,t.maj32=a,t.p32=s,t.s0_256=function(e){return n(e,2)^n(e,13)^n(e,22);},t.s1_256=function(e){return n(e,6)^n(e,11)^n(e,25);},t.g0_256=function(e){return n(e,7)^n(e,18)^e>>>3;},t.g1_256=function(e){return n(e,17)^n(e,19)^e>>>10;};},function(e,t,r){var n=r(19),i=r(50),a=r(182),s=r(49),o=n.sum32,u=n.sum32_4,c=n.sum32_5,l=a.ch32,h=a.maj32,d=a.s0_256,p=a.s1_256,f=a.g0_256,g=a.g1_256,m=i.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b();m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64);}n.inherits(b,m),e.exports=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++){r[n]=e[t+n];}for(;n<r.length;n++){r[n]=u(g(r[n-2]),r[n-7],f(r[n-15]),r[n-16]);}var i=this.h[0],a=this.h[1],m=this.h[2],y=this.h[3],b=this.h[4],_=this.h[5],v=this.h[6],w=this.h[7];for(s(this.k.length===r.length),n=0;n<r.length;n++){var S=c(w,p(b),l(b,_,v),this.k[n],r[n]),T=o(d(i),h(i,a,m));w=v,v=_,_=b,b=o(y,S),y=m,m=a,a=i,i=o(S,T);}this.h[0]=o(this.h[0],i),this.h[1]=o(this.h[1],a),this.h[2]=o(this.h[2],m),this.h[3]=o(this.h[3],y),this.h[4]=o(this.h[4],b),this.h[5]=o(this.h[5],_),this.h[6]=o(this.h[6],v),this.h[7]=o(this.h[7],w);},b.prototype._digest=function(e){return "hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big");};},function(e,t,r){var n=r(19),i=r(50),a=r(49),s=n.rotr64_hi,o=n.rotr64_lo,u=n.shr64_hi,c=n.shr64_lo,l=n.sum64,h=n.sum64_hi,d=n.sum64_lo,p=n.sum64_4_hi,f=n.sum64_4_lo,g=n.sum64_5_hi,m=n.sum64_5_lo,y=i.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _();y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=new Array(160);}function v(e,t,r,n,i){var a=e&r^~e&i;return a<0&&(a+=4294967296),a;}function w(e,t,r,n,i,a){var s=t&n^~t&a;return s<0&&(s+=4294967296),s;}function S(e,t,r,n,i){var a=e&r^e&i^r&i;return a<0&&(a+=4294967296),a;}function T(e,t,r,n,i,a){var s=t&n^t&a^n&a;return s<0&&(s+=4294967296),s;}function E(e,t){var r=s(e,t,28)^s(t,e,2)^s(t,e,7);return r<0&&(r+=4294967296),r;}function x(e,t){var r=o(e,t,28)^o(t,e,2)^o(t,e,7);return r<0&&(r+=4294967296),r;}function O(e,t){var r=s(e,t,14)^s(e,t,18)^s(t,e,9);return r<0&&(r+=4294967296),r;}function A(e,t){var r=o(e,t,14)^o(e,t,18)^o(t,e,9);return r<0&&(r+=4294967296),r;}function R(e,t){var r=s(e,t,1)^s(e,t,8)^u(e,t,7);return r<0&&(r+=4294967296),r;}function I(e,t){var r=o(e,t,1)^o(e,t,8)^c(e,t,7);return r<0&&(r+=4294967296),r;}function N(e,t){var r=s(e,t,19)^s(t,e,29)^u(e,t,6);return r<0&&(r+=4294967296),r;}function P(e,t){var r=o(e,t,19)^o(t,e,29)^c(e,t,6);return r<0&&(r+=4294967296),r;}n.inherits(_,y),e.exports=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++){r[n]=e[t+n];}for(;n<r.length;n+=2){var i=N(r[n-4],r[n-3]),a=P(r[n-4],r[n-3]),s=r[n-14],o=r[n-13],u=R(r[n-30],r[n-29]),c=I(r[n-30],r[n-29]),l=r[n-32],h=r[n-31];r[n]=p(i,a,s,o,u,c,l,h),r[n+1]=f(i,a,s,o,u,c,l,h);}},_.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],u=this.h[4],c=this.h[5],p=this.h[6],f=this.h[7],y=this.h[8],b=this.h[9],_=this.h[10],R=this.h[11],I=this.h[12],N=this.h[13],P=this.h[14],C=this.h[15];a(this.k.length===r.length);for(var D=0;D<r.length;D+=2){var j=P,k=C,L=O(y,b),M=A(y,b),F=v(y,b,_,R,I),B=w(y,b,_,R,I,N),q=this.k[D],U=this.k[D+1],V=r[D],H=r[D+1],G=g(j,k,L,M,F,B,q,U,V,H),z=m(j,k,L,M,F,B,q,U,V,H);j=E(n,i),k=x(n,i),L=S(n,i,s,o,u),M=T(n,i,s,o,u,c);var Q=h(j,k,L,M),X=d(j,k,L,M);P=I,C=N,I=_,N=R,_=y,R=b,y=h(p,f,G,z),b=d(f,f,G,z),p=u,f=c,u=s,c=o,s=n,o=i,n=h(G,z,Q,X),i=d(G,z,Q,X);}l(this.h,0,n,i),l(this.h,2,s,o),l(this.h,4,u,c),l(this.h,6,p,f),l(this.h,8,y,b),l(this.h,10,_,R),l(this.h,12,I,N),l(this.h,14,P,C);},_.prototype._digest=function(e){return "hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big");};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedOperation=t.SyncRecursiveEvaluator=t.AsyncRecursiveEvaluator=void 0;var n=r(40),i=r(20),a=r(39),s={term:(e,t)=>e,variable(e,t){var r=t.get(e.name);if(!r)throw new i.UnboundVariableError(e.name,t);return a.transformRDFTermUnsafe(r);}};t.AsyncRecursiveEvaluator=class{constructor(e){this.context=e,this.subEvaluators={[n.ExpressionType.Term]:s.term,[n.ExpressionType.Variable]:s.variable,[n.ExpressionType.Operator]:this.evalOperator,[n.ExpressionType.SpecialOperator]:this.evalSpecialOperator,[n.ExpressionType.Named]:this.evalNamed,[n.ExpressionType.Existence]:this.evalExistence,[n.ExpressionType.Aggregate]:this.evalAggregate};}evaluate(e,t){var _this29=this;return _asyncToGenerator(function*(){var r=_this29.subEvaluators[e.expressionType];if(!r)throw new i.InvalidExpressionType(e);return r.bind(_this29)(e,t);})();}evalOperator(e,t){var _this30=this;return _asyncToGenerator(function*(){var r=e.args.map(e=>_this30.evaluate(e,t)),n=yield Promise.all(r);return e.apply(n);})();}evalSpecialOperator(e,t){var _this31=this;return _asyncToGenerator(function*(){var r=_this31.evaluate.bind(_this31),n={args:e.args,mapping:t,evaluate:r,context:{now:_this31.context.now,baseIRI:_this31.context.baseIRI,bnode:_this31.context.bnode}};return e.applyAsync(n);})();}evalNamed(e,t){var _this32=this;return _asyncToGenerator(function*(){var r=e.args.map(e=>_this32.evaluate(e,t)),n=yield Promise.all(r);return e.apply(n);})();}evalExistence(e,t){var _this33=this;return _asyncToGenerator(function*(){if(!_this33.context.exists)throw new i.NoExistenceHook();return new n.BooleanLiteral(yield _this33.context.exists(e.expression,t));})();}evalAggregate(e,t){var _this34=this;return _asyncToGenerator(function*(){if(!_this34.context.aggregate)throw new i.NoExistenceHook();return a.transformRDFTermUnsafe(yield _this34.context.aggregate(e.expression));})();}};t.SyncRecursiveEvaluator=class{constructor(e){this.context=e,this.subEvaluators={[n.ExpressionType.Term]:s.term,[n.ExpressionType.Variable]:s.variable,[n.ExpressionType.Operator]:this.evalOperator,[n.ExpressionType.SpecialOperator]:this.evalSpecialOperator,[n.ExpressionType.Named]:this.evalNamed,[n.ExpressionType.Existence]:this.evalExistence,[n.ExpressionType.Aggregate]:this.evalAggregate};}evaluate(e,t){var r=this.subEvaluators[e.expressionType];if(!r)throw new i.InvalidExpressionType(e);return r.bind(this)(e,t);}evalOperator(e,t){var r=e.args.map(e=>this.evaluate(e,t));return e.apply(r);}evalSpecialOperator(e,t){var r=this.evaluate.bind(this),n={args:e.args,mapping:t,evaluate:r,context:{now:this.context.now,baseIRI:this.context.baseIRI,bnode:this.context.bnode}};return e.applySync(n);}evalNamed(e,t){var r=e.args.map(e=>this.evaluate(e,t));return e.apply(r);}evalExistence(e,t){if(!this.context.exists)throw new i.NoExistenceHook();return new n.BooleanLiteral(this.context.exists(e.expression,t));}evalAggregate(e,t){if(!this.context.aggregate)throw new i.NoAggregator();return a.transformRDFTermUnsafe(this.context.aggregate(e.expression));}};class o extends Error{constructor(e){super("Operation '"+e+"' is unsupported in SimpleEvaluator");}}t.UnsupportedOperation=o;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SyncEvaluator=void 0;var n=r(39),i=r(185);t.SyncEvaluator=class{constructor(e,t){if(t===void 0){t={};}this.algExpr=e,this.config=t,this.expr=n.transformAlgebra(e);var r={now:t.now||new Date(Date.now()),baseIRI:t.baseIRI||void 0,exists:t.exists,aggregate:t.aggregate};this.evaluator=new i.SyncRecursiveEvaluator(r);}evaluate(e){return this.evaluator.evaluate(this.expr,e).toRDF();}evaluateAsEBV(e){return this.evaluator.evaluate(this.expr,e).coerceEBV();}evaluateAsInternal(e){return this.evaluator.evaluate(this.expr,e);}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorAbstractPath=void 0;var n=r(1),i=r(0),a=r(3),s=r(5),o=r(4),u=r(6),c=new s.DataFactory();class l extends n.ActorQueryOperationTypedMediated{constructor(e,t){super(e,"path"),this.predicateType=t;}testOperation(e,t){var _this35=this;return _asyncToGenerator(function*(){if(e.predicate.type!==_this35.predicateType)throw new Error("This Actor only supports "+_this35.predicateType+" Path operations.");return !0;})();}generateVariable(e,t){return t?!e||e.subject.value!==t&&e.object.value!==t?c.variable(t):this.generateVariable(e,t+"b"):this.generateVariable(e,"b");}isPathArbitraryLengthDistinct(e,t){var _this36=this;return _asyncToGenerator(function*(){return e&&e.get(l.isPathArbitraryLengthDistinctKey)?{context:e=e.set(l.isPathArbitraryLengthDistinctKey,!1),operation:void 0}:{context:e=e?e.set(l.isPathArbitraryLengthDistinctKey,!0):i.ActionContext({[l.isPathArbitraryLengthDistinctKey]:!0}),operation:n.ActorQueryOperation.getSafeBindings(yield _this36.mediatorQueryOperation.mediate({operation:l.FACTORY.createDistinct(t),context:e}))};})();}predicateStarGraphVariable(e,t,r,i,s){var _this37=this;return _asyncToGenerator(function*(){var u=_this37.generateVariable(l.FACTORY.createPath(e,r,t,i)),c=l.FACTORY.createUnion(l.FACTORY.createPattern(e,u,t,i),l.FACTORY.createPattern(t,u,e,i)),h=n.ActorQueryOperation.getSafeBindings(yield _this37.mediatorQueryOperation.mediate({context:s,operation:c})),d=o.termToString(t),p=new Set();return new a.MultiTransformIterator(h.bindingsStream,{multiTransform:t=>{var u=t.get(o.termToString(i));return p.has(o.termToString(u))?new a.EmptyIterator():(p.add(o.termToString(u)),new a.TransformIterator(/*#__PURE__*/_asyncToGenerator(function*(){var t=new a.BufferedIterator();return yield _this37.getObjectsPredicateStar(e,r,u,s,{},t,{count:0}),t.transform({transform(e,t,r){r(n.Bindings({[d]:e,[o.termToString(i)]:u})),t();}});}),{maxBufferSize:128}));},autoStart:!1});})();}getObjectsPredicateStarEval(e,t,r,i,s){var _this38=this;return _asyncToGenerator(function*(){if("Variable"===i.termType)return _this38.predicateStarGraphVariable(e,t,r,i,s);var u=new a.BufferedIterator();return yield _this38.getObjectsPredicateStar(e,r,i,s,{},u,{count:0}),u.transform({transform(e,r,i){i(n.Bindings({[o.termToString(t)]:e})),r();}});})();}getObjectsPredicateStar(e,t,r,i,a,s,u){var _this39=this;return _asyncToGenerator(function*(){var c=o.termToString(e);if(a[c])return;s._push(e),a[c]=e,u.count++;var h=_this39.generateVariable(),d=o.termToString(h),p=l.FACTORY.createPath(e,t,h,r),f=n.ActorQueryOperation.getSafeBindings(yield _this39.mediatorQueryOperation.mediate({operation:p,context:i}));f.bindingsStream.on("data",/*#__PURE__*/function(){var _ref40=_asyncToGenerator(function*(e){var n=e.get(d);yield _this39.getObjectsPredicateStar(n,t,r,i,a,s,u);});return function(_x6){return _ref40.apply(this,arguments);};}()),f.bindingsStream.on("end",()=>{0==--u.count&&s.close();});})();}getSubjectAndObjectBindingsPredicateStar(e,t,r,i,a,s,u,c,h,d,p){var _this40=this;return _asyncToGenerator(function*(){var f=o.termToString(i)+o.termToString(s);if(h[f])return;if(p.count++,h[f]=!0,d._push(n.Bindings({[e]:r,[t]:i})),f in c){var _n43=yield c[f];for(var _i28 of _n43){yield _this40.getSubjectAndObjectBindingsPredicateStar(e,t,r,_i28,a,s,u,c,h,d,p);}return void(0==--p.count&&d.close());}var g=new Promise(/*#__PURE__*/function(){var _ref41=_asyncToGenerator(function*(f,g){var m=[],y=_this40.generateVariable(),b=o.termToString(y),_=l.FACTORY.createPath(i,a,y,s),v=n.ActorQueryOperation.getSafeBindings(yield _this40.mediatorQueryOperation.mediate({operation:_,context:u}));v.bindingsStream.on("data",/*#__PURE__*/function(){var _ref42=_asyncToGenerator(function*(n){var i=n.get(b);m.push(i),yield _this40.getSubjectAndObjectBindingsPredicateStar(e,t,r,i,a,s,u,c,h,d,p);});return function(_x9){return _ref42.apply(this,arguments);};}()),v.bindingsStream.on("error",g),v.bindingsStream.on("end",()=>{0==--p.count&&d.close(),f(m);});});return function(_x7,_x8){return _ref41.apply(this,arguments);};}());c[f]=g;})();}}t.ActorAbstractPath=l,l.FACTORY=new u.Factory(),l.isPathArbitraryLengthDistinctKey="isPathArbitraryLengthDistinct";},function(e,t,r){r.r(t),r.d(t,"v1",function(){return g;}),r.d(t,"v3",function(){return x;}),r.d(t,"v4",function(){return O;}),r.d(t,"v5",function(){return I;}),r.d(t,"NIL",function(){return N;}),r.d(t,"version",function(){return P;}),r.d(t,"validate",function(){return o;}),r.d(t,"stringify",function(){return d;}),r.d(t,"parse",function(){return m;});var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function a(){if(!n)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i);}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var o=function o(e){return "string"==typeof e&&s.test(e);},u=[],c=0;c<256;++c){u.push((c+256).toString(16).substr(1));}var l,h,d=function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!o(r))throw TypeError("Stringified UUID is invalid");return r;},p=0,f=0;var g=function g(e,t,r){var n=t&&r||0,i=t||new Array(16),s=(e=e||{}).node||l,o=void 0!==e.clockseq?e.clockseq:h;if(null==s||null==o){var u=e.random||(e.rng||a)();null==s&&(s=l=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==o&&(o=h=16383&(u[6]<<8|u[7]));}var c=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:f+1,m=c-p+(g-f)/1e4;if(m<0&&void 0===e.clockseq&&(o=o+1&16383),(m<0||c>p)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=c,f=g,h=o;var y=(1e4*(268435455&(c+=122192928e5))+g)%4294967296;i[n++]=y>>>24&255,i[n++]=y>>>16&255,i[n++]=y>>>8&255,i[n++]=255&y;var b=c/4294967296*1e4&268435455;i[n++]=b>>>8&255,i[n++]=255&b,i[n++]=b>>>24&15|16,i[n++]=b>>>16&255,i[n++]=o>>>8|128,i[n++]=255&o;for(var _=0;_<6;++_){i[n+_]=s[_];}return t||d(i);};var m=function m(e){if(!o(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r;};var y=function y(e,t,r){function n(e,n,i,a){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r){t.push(e.charCodeAt(r));}return t;}(e)),"string"==typeof n&&(n=m(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,i){a=a||0;for(var o=0;o<16;++o){i[a+o]=s[o];}return i;}return d(s);}try{n.name=e;}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n;};function b(e){return 14+(e+64>>>9<<4)+1;}function _(e,t){var r=(65535&e)+(65535&t);return (e>>16)+(t>>16)+(r>>16)<<16|65535&r;}function v(e,t,r,n,i,a){return _((s=_(_(t,e),_(n,a)))<<(o=i)|s>>>32-o,r);var s,o;}function w(e,t,r,n,i,a,s){return v(t&r|~t&n,e,t,i,a,s);}function S(e,t,r,n,i,a,s){return v(t&n|r&~n,e,t,i,a,s);}function T(e,t,r,n,i,a,s){return v(t^r^n,e,t,i,a,s);}function E(e,t,r,n,i,a,s){return v(r^(t|~n),e,t,i,a,s);}var x=y("v3",48,function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r){e[r]=t.charCodeAt(r);}}return function(e){for(var t=[],r=32*e.length,n=0;n<r;n+=8){var i=e[n>>5]>>>n%32&255,a=parseInt("0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i),16);t.push(a);}return t;}(function(e,t){e[t>>5]|=128<<t%32,e[b(t)-1]=t;for(var r=1732584193,n=-271733879,i=-1732584194,a=271733878,s=0;s<e.length;s+=16){var o=r,u=n,c=i,l=a;r=w(r,n,i,a,e[s],7,-680876936),a=w(a,r,n,i,e[s+1],12,-389564586),i=w(i,a,r,n,e[s+2],17,606105819),n=w(n,i,a,r,e[s+3],22,-1044525330),r=w(r,n,i,a,e[s+4],7,-176418897),a=w(a,r,n,i,e[s+5],12,1200080426),i=w(i,a,r,n,e[s+6],17,-1473231341),n=w(n,i,a,r,e[s+7],22,-45705983),r=w(r,n,i,a,e[s+8],7,1770035416),a=w(a,r,n,i,e[s+9],12,-1958414417),i=w(i,a,r,n,e[s+10],17,-42063),n=w(n,i,a,r,e[s+11],22,-1990404162),r=w(r,n,i,a,e[s+12],7,1804603682),a=w(a,r,n,i,e[s+13],12,-40341101),i=w(i,a,r,n,e[s+14],17,-1502002290),n=w(n,i,a,r,e[s+15],22,1236535329),r=S(r,n,i,a,e[s+1],5,-165796510),a=S(a,r,n,i,e[s+6],9,-1069501632),i=S(i,a,r,n,e[s+11],14,643717713),n=S(n,i,a,r,e[s],20,-373897302),r=S(r,n,i,a,e[s+5],5,-701558691),a=S(a,r,n,i,e[s+10],9,38016083),i=S(i,a,r,n,e[s+15],14,-660478335),n=S(n,i,a,r,e[s+4],20,-405537848),r=S(r,n,i,a,e[s+9],5,568446438),a=S(a,r,n,i,e[s+14],9,-1019803690),i=S(i,a,r,n,e[s+3],14,-187363961),n=S(n,i,a,r,e[s+8],20,1163531501),r=S(r,n,i,a,e[s+13],5,-1444681467),a=S(a,r,n,i,e[s+2],9,-51403784),i=S(i,a,r,n,e[s+7],14,1735328473),n=S(n,i,a,r,e[s+12],20,-1926607734),r=T(r,n,i,a,e[s+5],4,-378558),a=T(a,r,n,i,e[s+8],11,-2022574463),i=T(i,a,r,n,e[s+11],16,1839030562),n=T(n,i,a,r,e[s+14],23,-35309556),r=T(r,n,i,a,e[s+1],4,-1530992060),a=T(a,r,n,i,e[s+4],11,1272893353),i=T(i,a,r,n,e[s+7],16,-155497632),n=T(n,i,a,r,e[s+10],23,-1094730640),r=T(r,n,i,a,e[s+13],4,681279174),a=T(a,r,n,i,e[s],11,-358537222),i=T(i,a,r,n,e[s+3],16,-722521979),n=T(n,i,a,r,e[s+6],23,76029189),r=T(r,n,i,a,e[s+9],4,-640364487),a=T(a,r,n,i,e[s+12],11,-421815835),i=T(i,a,r,n,e[s+15],16,530742520),n=T(n,i,a,r,e[s+2],23,-995338651),r=E(r,n,i,a,e[s],6,-198630844),a=E(a,r,n,i,e[s+7],10,1126891415),i=E(i,a,r,n,e[s+14],15,-1416354905),n=E(n,i,a,r,e[s+5],21,-57434055),r=E(r,n,i,a,e[s+12],6,1700485571),a=E(a,r,n,i,e[s+3],10,-1894986606),i=E(i,a,r,n,e[s+10],15,-1051523),n=E(n,i,a,r,e[s+1],21,-2054922799),r=E(r,n,i,a,e[s+8],6,1873313359),a=E(a,r,n,i,e[s+15],10,-30611744),i=E(i,a,r,n,e[s+6],15,-1560198380),n=E(n,i,a,r,e[s+13],21,1309151649),r=E(r,n,i,a,e[s+4],6,-145523070),a=E(a,r,n,i,e[s+11],10,-1120210379),i=E(i,a,r,n,e[s+2],15,718787259),n=E(n,i,a,r,e[s+9],21,-343485551),r=_(r,o),n=_(n,u),i=_(i,c),a=_(a,l);}return [r,n,i,a];}(function(e){if(0===e.length)return [];for(var t=8*e.length,r=new Uint32Array(b(t)),n=0;n<t;n+=8){r[n>>5]|=(255&e[n/8])<<n%32;}return r;}(e),8*e.length));});var O=function O(e,t,r){var n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i){t[r+i]=n[i];}return t;}return d(n);};function A(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n;}}function R(e,t){return e<<t|e>>>32-t;}var I=y("v5",80,function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var i=0;i<n.length;++i){e.push(n.charCodeAt(i));}}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,s=Math.ceil(a/16),o=new Array(s),u=0;u<s;++u){for(var c=new Uint32Array(16),l=0;l<16;++l){c[l]=e[64*u+4*l]<<24|e[64*u+4*l+1]<<16|e[64*u+4*l+2]<<8|e[64*u+4*l+3];}o[u]=c;}o[s-1][14]=8*(e.length-1)/Math.pow(2,32),o[s-1][14]=Math.floor(o[s-1][14]),o[s-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<s;++h){for(var d=new Uint32Array(80),p=0;p<16;++p){d[p]=o[h][p];}for(var f=16;f<80;++f){d[f]=R(d[f-3]^d[f-8]^d[f-14]^d[f-16],1);}for(var g=r[0],m=r[1],y=r[2],b=r[3],_=r[4],v=0;v<80;++v){var w=Math.floor(v/20),S=R(g,5)+A(w,m,y,b)+_+t[w]+d[v]>>>0;_=b,b=y,y=R(m,30)>>>0,m=g,g=S;}r[0]=r[0]+g>>>0,r[1]=r[1]+m>>>0,r[2]=r[2]+y>>>0,r[3]=r[3]+b>>>0,r[4]=r[4]+_>>>0;}return [r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]];}),N="00000000-0000-0000-0000-000000000000";var P=function P(e){if(!o(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16);};},function(e,t){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var r;e.exports="function"==typeof queueMicrotask?queueMicrotask:e=>(r||(r=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e;},0));},function(e,t,r){e.exports=r(91);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_CONTEXT_LENIENT=t.KEY_CONTEXT_GRAPHQL_SINGULARIZEVARIABLES=t.KEY_CONTEXT_QUERYFORMAT=t.KEY_CONTEXT_INITIALBINDINGS=t.ActorInitSparql=void 0;var n=r(192),i=r(1),a=r(21),s=r(0),o=r(6);class u extends n.ActorInit{constructor(e){super(e);}static enhanceQueryResults(e){return e.bindingsStream?e.bindings=()=>new Promise((t,r)=>{var n=[];e.bindingsStream.on("data",e=>{n.push(e);}),e.bindingsStream.on("end",()=>{t(n);}),e.bindingsStream.on("error",r);}):e.quadStream&&(e.quads=()=>new Promise((t,r)=>{var n=[];e.quadStream.on("data",e=>{n.push(e);}),e.quadStream.on("end",()=>{t(n);}),e.quadStream.on("error",r);})),e;}test(e){return _asyncToGenerator(function*(){return !0;})();}query(e,r){var _this41=this;return _asyncToGenerator(function*(){r=r||{};for(var _e49 in r){if(_this41.contextKeyShortcuts[_e49]){var _t78=r[_e49];r[_this41.contextKeyShortcuts[_e49]]=_t78,delete r[_e49];}}r[s.KEY_CONTEXT_LOG]||(r[s.KEY_CONTEXT_LOG]=_this41.logger),r[i.KEY_CONTEXT_QUERY_TIMESTAMP]||(r[i.KEY_CONTEXT_QUERY_TIMESTAMP]=new Date()),Array.isArray(r[a.KEY_CONTEXT_SOURCES])&&r[a.KEY_CONTEXT_SOURCES].forEach(e=>{a.isDataSourceRawType(e)||"auto"!==e.type&&"hypermedia"!==e.type||delete e.type;});var n,o,c="sparql";if((r=s.ActionContext(r))&&r.has(t.KEY_CONTEXT_QUERYFORMAT)&&(c=r.get(t.KEY_CONTEXT_QUERYFORMAT),r=r.delete(t.KEY_CONTEXT_QUERYFORMAT),"graphql"!==c||r.has(t.KEY_CONTEXT_GRAPHQL_SINGULARIZEVARIABLES)||(r=r.set(t.KEY_CONTEXT_GRAPHQL_SINGULARIZEVARIABLES,{}))),r&&r.has(i.KEY_CONTEXT_BASEIRI)&&(n=r.get(i.KEY_CONTEXT_BASEIRI)),r=(yield _this41.mediatorContextPreprocess.mediate({context:r})).context,"string"==typeof e){var _t79=yield _this41.mediatorSparqlParse.mediate({context:r,query:e,queryFormat:c,baseIRI:n});o=_t79.operation,_t79.baseIRI&&(r=r.set(i.KEY_CONTEXT_BASEIRI,_t79.baseIRI));}else o=e;if(r.has(t.KEY_CONTEXT_INITIALBINDINGS)){var _e50=r.get(t.KEY_CONTEXT_INITIALBINDINGS);o=i.materializeOperation(o,i.ensureBindings(_e50));}o=(yield _this41.mediatorOptimizeQueryOperation.mediate({context:r,operation:o})).operation;var l={context:r,operation:o};var h=yield _this41.mediatorQueryOperation.mediate(l);return h=u.enhanceQueryResults(h),h.context=r,h;})();}getResultMediaTypes(e){var _this42=this;return _asyncToGenerator(function*(){return (yield _this42.mediatorSparqlSerializeMediaTypeCombiner.mediate({context:e,mediaTypes:!0})).mediaTypes;})();}getResultMediaTypeFormats(e){var _this43=this;return _asyncToGenerator(function*(){return (yield _this43.mediatorSparqlSerializeMediaTypeFormatCombiner.mediate({context:e,mediaTypeFormats:!0})).mediaTypeFormats;})();}resultToString(e,t,r){var _this44=this;return _asyncToGenerator(function*(){if(r=s.ActionContext(r),!t)switch(e.type){case"bindings":t="application/json";break;case"quads":t="application/trig";break;default:t="simple";}var n=e;return n.context=r,(yield _this44.mediatorSparqlSerialize.mediate({context:r,handle:n,handleMediaType:t})).handle;})();}invalidateHttpCache(e){return this.mediatorHttpInvalidate.mediate({url:e});}run(e){return _asyncToGenerator(function*(){throw new Error("ActorInitSparql#run is not supported in the browser.");})();}}t.ActorInitSparql=u,u.ALGEBRA_TYPES=Object.keys(o.Algebra.types).reduce((e,t)=>(e[o.Algebra.types[t]]=!0,e),{}),t.KEY_CONTEXT_INITIALBINDINGS="@comunica/actor-init-sparql:initialBindings",t.KEY_CONTEXT_QUERYFORMAT="@comunica/actor-init-sparql:queryFormat",t.KEY_CONTEXT_GRAPHQL_SINGULARIZEVARIABLES="@comunica/actor-init-sparql:singularizeVariables",t.KEY_CONTEXT_LENIENT="@comunica/actor-init-sparql:lenient";},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(193),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorInit=void 0;var n=r(0);class i extends n.Actor{constructor(e){super(e);}}t.ActorInit=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.BusIndexed=void 0;var n=r(92);class i extends n.Bus{constructor(e){super(e),this.actorsIndex={};}subscribe(e){var t=this.getActorIdentifier(e)||"_undefined_";var r=this.actorsIndex[t];r||(r=this.actorsIndex[t]=[]),r.push(e),super.subscribe(e);}unsubscribe(e){var t=this.getActorIdentifier(e)||"_undefined_",r=this.actorsIndex[t];if(r){var _n44=r.indexOf(e);_n44>=0&&r.splice(_n44,1),0===r.length&&delete this.actorsIndex[t];}return super.unsubscribe(e);}publish(e){var t=this.getActionIdentifier(e);if(t){return (this.actorsIndex[t]||[]).concat(this.actorsIndex._undefined_||[]).map(t=>({actor:t,reply:t.test(e)}));}return super.publish(e);}getActorIdentifier(e){return this.actorIdentifierFields.reduce((e,t)=>e[t],e);}getActionIdentifier(e){return this.actionIdentifierFields.reduce((e,t)=>e[t],e);}}t.BusIndexed=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActionObserver=void 0;t.ActionObserver=class{constructor(e){Object.assign(this,e);}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ensureActionContext=t.ActionContext=t.Actor=void 0;var n=r(23),i=r(93);class a{constructor(e){this.beforeActors=[],Object.assign(this,e),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors);}static getContextLogger(e){return e&&e.get(i.KEY_CONTEXT_LOG);}runObservable(e){var t=this.run(e);return this.bus.onRun(this,e,t),t;}initialize(){return _asyncToGenerator(function*(){return !0;})();}deinitialize(){return _asyncToGenerator(function*(){return !0;})();}getDefaultLogData(e,t){var r=t?t():{};return r.actor=this.name,r;}logTrace(e,t,r){var n=a.getContextLogger(e);n&&n.trace(t,this.getDefaultLogData(e,r));}logDebug(e,t,r){var n=a.getContextLogger(e);n&&n.debug(t,this.getDefaultLogData(e,r));}logInfo(e,t,r){var n=a.getContextLogger(e);n&&n.info(t,this.getDefaultLogData(e,r));}logWarn(e,t,r){var n=a.getContextLogger(e);n&&n.warn(t,this.getDefaultLogData(e,r));}logError(e,t,r){var n=a.getContextLogger(e);n&&n.error(t,this.getDefaultLogData(e,r));}logFatal(e,t,r){var n=a.getContextLogger(e);n&&n.fatal(t,this.getDefaultLogData(e,r));}}function s(e){return n.Map(e);}t.Actor=a,t.ActionContext=s,t.ensureActionContext=function(e){return n.Map.isMap(e)?e:s(e);};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Mediator=void 0;t.Mediator=class{constructor(e){Object.assign(this,e);}publish(e){var t=this.bus.publish(e);if(0===t.length)throw new Error("No actors are able to reply to a message in the bus "+this.bus.name);return t;}mediateActor(e){var _this45=this;return _asyncToGenerator(function*(){return yield _this45.mediateWith(e,_this45.publish(e));})();}mediate(e){var _this46=this;return _asyncToGenerator(function*(){return (yield _this46.mediateActor(e)).runObservable(e);})();}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.stringQuadToQuad=t.quadToStringQuad=t.stringToTerm=t.getLiteralLanguage=t.getLiteralType=t.getLiteralValue=t.termToString=void 0;var n=new(r(5).DataFactory)();function i(e){if(e)switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return "_:"+e.value;case"Literal":var _t80=e;return '"'+_t80.value+'"'+(_t80.datatype&&"http://www.w3.org/2001/XMLSchema#string"!==_t80.datatype.value&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"!==_t80.datatype.value?"^^"+_t80.datatype.value:"")+(_t80.language?"@"+_t80.language:"");case"Quad":return "<<"+i(e.subject)+" "+i(e.predicate)+" "+i(e.object)+("DefaultGraph"===e.graph.termType?"":" "+i(e.graph))+">>";case"Variable":return "?"+e.value;case"DefaultGraph":return e.value;}}function a(e){var t=/^"([^]*)"/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1];}function s(e){var t=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]||(t[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string");}function o(e){var t=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]?t[1].toLowerCase():"";}function u(e,t){if(t=t||n,!e||!e.length)return t.defaultGraph();switch(e[0]){case"_":return t.blankNode(e.substr(2));case"?":if(!t.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return t.variable(e.substr(1));case'"':var _r71=o(e),_n45=t.namedNode(s(e));return t.literal(a(e),_r71||_n45);case"<":default:if(e.startsWith("<<")&&e.endsWith(">>")){var _r72=e.slice(2,-2),_n46=[];var _i29=0,_a21=0;for(var _t81=0;_t81<_r72.length;_t81++){var _s11=_r72[_t81];if("<"===_s11&&_i29++,">"===_s11){if(0===_i29)throw new Error("Found closing tag without opening tag in "+e);_i29--;}" "===_s11&&0===_i29&&(_n46.push(_r72.slice(_a21,_t81)),_a21=_t81+1);}if(0!==_i29)throw new Error("Found opening tag without closing tag in "+e);if(_n46.push(_r72.slice(_a21,_r72.length)),3!==_n46.length&&4!==_n46.length)throw new Error("Nested quad syntax error "+e);return t.quad(u(_n46[0]),u(_n46[1]),u(_n46[2]),_n46[3]?u(_n46[3]):void 0);}return t.namedNode(e);}}t.termToString=i,t.getLiteralValue=a,t.getLiteralType=s,t.getLiteralLanguage=o,t.stringToTerm=u,t.quadToStringQuad=function(e){return {subject:i(e.subject),predicate:i(e.predicate),object:i(e.object),graph:i(e.graph)};},t.stringQuadToQuad=function(e,t){return (t=t||n).quad(u(e.subject,t),u(e.predicate,t),u(e.object,t),u(e.graph,t));};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.DataFactory=void 0;var n=r(96),i=r(97),a=r(98),s=r(68),o=r(99),u=r(100);t.DataFactory=class{constructor(){this.blankNodeCounter=0;}namedNode(e){return new s.NamedNode(e);}blankNode(e){return new n.BlankNode(e||"df_"+this.blankNodeCounter++);}literal(e,t){return new a.Literal(e,t);}variable(e){return new u.Variable(e);}defaultGraph(){return i.DefaultGraph.INSTANCE;}quad(e,t,r,n){return new o.Quad(e,t,r,n||this.defaultGraph());}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(a.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph));}}fromQuad(e){return this.fromTerm(e);}resetBlankNodeCounter(){this.blankNodeCounter=0;}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(52),i=r(53),a=r(70),s=r(215),o=r(4),u=r(30).Parser,c=n.types;var l,h=new Set(),d=0,p=!1;function f(e,t,r){if(h=new Set(),d=0,p=t,"query"!==e.type&&"update"!==e.type)throw new Error("Translate only works on complete query or update objects.");var n,i=new Set(Object.keys(function e(t){var r={};if(g(t))r[o.termToString(t)]=!0,h.add(t);else if(n=t,null!==n&&"object"==typeof n)if("bind"===t.type)e(t.expression),Object.assign(r,e(t.variable));else if("SELECT"===t.queryType){var _n47=e(t.where);for(var _i30 of t.variables){a.default.isWildcard(_i30)?Object.assign(r,_n47):_i30.variable?Object.assign(r,e(_i30.variable)):Object.assign(r,e(_i30));}if(t.group)for(var _n48 of t.group){Object.assign(r,e(_n48));}}else for(var _n49 of Object.keys(t)){Object.assign(r,e(t[_n49]));}var n;return r;}(e)).map(l.createTerm.bind(l)));if("query"===e.type){n=m({type:"group",patterns:e.where||[]}),n=function(e,t,r){var n=[],i={};if(e.variables=O(e.variables,i),e.having=O(e.having,i),e.order=O(e.order,i),e.group||Object.keys(i).length>0){var _r73=Object.keys(i).map(e=>function(e,t){if("aggregate"!==e.type||!e.aggregation)throw new Error("Unexpected input: "+JSON.stringify(e));var r=y(e);return r.variable=t,r;}(i[e],l.createTerm(e))),_n50=[];if(e.group)for(var _r74 of e.group){if(_r74.expression.type){var _e51=_r74.variable?_r74.variable:v();t=l.createExtend(t,_e51,y(_r74.expression)),_n50.push(_e51);}else _n50.push(_r74.expression);}t=l.createGroup(t,_n50,_r73);}if(e.having)for(var _r75 of e.having){t=l.createFilter(t,y(_r75));}e.values&&(t=l.createJoin(t,x(e)));var s=new Set();if("SELECT"===e.queryType||"DESCRIBE"===e.queryType)if(e.variables.some(e=>e&&a.default.isWildcard(e)))s=r;else for(var _t82 of e.variables){g(_t82)||!_t82.variable?s.add(_t82):_t82.variable&&(s.add(_t82.variable),n.push(_t82));}for(var _e52 of n){t=l.createExtend(t,_e52.variable,y(_e52.expression));}e.order&&(t=l.createOrderBy(t,e.order.map(e=>{var t=y(e.expression);return e.descending&&(t=l.createOperatorExpression(c.DESC,[t])),t;})));"SELECT"===e.queryType&&(t=l.createProject(t,Array.from(s)));e.distinct&&(t=l.createDistinct(t));e.reduced&&(t=l.createReduced(t));"CONSTRUCT"===e.queryType?t=l.createConstruct(t,e.template.map(w)):"ASK"===e.queryType?t=l.createAsk(t):"DESCRIBE"===e.queryType&&(t=l.createDescribe(t,Array.from(s)));(e.offset||e.limit)&&(t=l.createSlice(t,e.offset,e.limit));e.from&&(t=l.createFrom(t,e.from.default,e.from.named));return t;}(e,n,i);}else "update"===e.type&&(n=1===(s=e).updates.length?A(s.updates[0]):l.createCompositeUpdate(s.updates.map(A)));var s;return r&&(n=function e(t,r){var n={},i=Array.from(r).reduce((e,t)=>(e[t.value]=!0,e),{});return a.default.mapOperation(t,{path:(e,t)=>({result:t.createPath(s(e.subject),e.predicate,s(e.object),s(e.graph)),recurse:!1}),pattern:(e,t)=>({result:t.createPattern(s(e.subject),s(e.predicate),s(e.object),s(e.graph)),recurse:!1}),construct:t=>({result:l.createConstruct(e(t.input,r),t.template),recurse:!1})});function s(e){if("BlankNode"===e.termType){var _t83=n[e.value];return _t83||(_t83=a.default.createUniqueVariable(e.value,i,l.dataFactory),i[_t83.value]=!0,n[e.value]=_t83),_t83;}return e;}}(n,i)),n;}function g(e){return e&&"Variable"===e.termType;}function m(e){var t,r=[],n=[];if(e.patterns)for(var _t84 of e.patterns){("filter"===_t84.type?r:n).push(_t84);}if("bgp"===e.type)return function(e){var t=[],r=[];for(var _n51 of e.triples){if("path"===_n51.predicate.type){var _e53=b(_n51);for(var _n52 of _e53){_n52.type===c.PATH?(t.length>0&&r.push(l.createBgp(t)),t=[],r.push(_n52)):t.push(_n52);}}else t.push(w(_n51));}t.length>0&&r.push(l.createBgp(t));return 1===r.length?r[0]:r.reduce((e,t)=>l.createJoin(e,t));}(e);if("union"===e.type)t=n.map(e=>("group"!==e.type&&(e={type:"group",patterns:[e]}),m(e))).reduce((e,t)=>l.createUnion(e,t));else {if("graph"===e.type)return function(e){e.type="group";var t=m(e);t=p?function e(t,r,n){if(t.type===c.BGP)t.patterns=t.patterns.map(e=>(n&&(e.subject.equals(r)&&(e.subject=n),e.predicate.equals(r)&&(e.predicate=n),e.object.equals(r)&&(e.object=n)),e.graph=r,e));else if(t.type===c.PATH){var _e54=t;n&&(_e54.subject.equals(r)&&(_e54.subject=n),_e54.object.equals(r)&&(_e54.object=n)),t.graph=r;}else if(t.type!==c.PROJECT||n){if(t.type!==c.EXTEND||n)for(var _i31 of Object.keys(t)){Array.isArray(t[_i31])?t[_i31]=t[_i31].map(t=>e(t,r,n)):S.indexOf(t[_i31].type)>=0?t[_i31]=e(t[_i31],r,n):n&&g(t[_i31])&&t[_i31].equals(r)&&(t[_i31]=n);}else {var _i32=t;_i32.variable.equals(r)&&(n=v()),_i32.input=e(_i32.input,r,n);}}else {var _i33=t;_i33.variables.some(e=>e.equals(r))||(n=v()),_i33.input=e(_i33.input,r,n);}return t;}(t,e.name):l.createGraph(t,e.name);return t;}(e);if("group"===e.type)t=n.reduce(T,l.createBgp([]));else if("values"===e.type)t=x(e);else {if("query"!==e.type)throw new Error("Unexpected type: "+e.type);t=f(e,p,!1);}}if(r.length>0){var _e55=r.map(e=>y(e.expression));_e55.length>0&&(t=l.createFilter(t,_e55.reduce((e,t)=>l.createOperatorExpression("&&",[e,t]))));}return t;}function y(e){if(a.default.isTerm(e)||"Quad"===e.termType)return l.createTermExpression(e);if(a.default.isWildcard(e))return l.createWildcardExpression();if(e.aggregation)return l.createAggregateExpression(e.aggregation,y(e.expression),e.distinct,e.separator);if(e.function)return l.createNamedExpression(e.function,e.args.map(y));if(e.operator)return "exists"===e.operator||"notexists"===e.operator?l.createExistenceExpression("notexists"===e.operator,m(e.args[0])):("in"!==e.operator&&"notin"!==e.operator||(e.args=[e.args[0]].concat(e.args[1])),l.createOperatorExpression(e.operator,e.args.map(y)));throw new Error("Unknown expression: "+JSON.stringify(e));}function b(e){return function e(t,r,n){if(r.type===c.LINK)return [l.createPattern(t,r.iri,n)];if(r.type===c.INV)return e(n,r.path,t);if(r.type===c.SEQ){var _i34=v(),_a22=e(t,r.left,_i34),_s12=e(_i34,r.right,n);return _a22.concat(_s12);}return [l.createPath(t,r,n)];}(e.subject,_(e.predicate),e.object);}function _(e){if(a.default.isTerm(e)&&"NamedNode"===e.termType)return l.createLink(e);if("^"===e.pathType)return l.createInv(_(e.items[0]));if("!"===e.pathType){var _t85,_r76=[],_n53=[];_t85="path"===e.items[0].type&&"|"===e.items[0].pathType?e.items[0].items:e.items;for(var _e56 of _t85){if(a.default.isTerm(_e56))_r76.push(_e56);else {if("^"!==_e56.pathType)throw new Error("Unexpected item: "+JSON.stringify(_e56));_n53.push(_e56.items[0]);}}var _i35=l.createNps(_r76),_s13=l.createInv(l.createNps(_n53));return 0===_n53.length?_i35:0===_r76.length?_s13:l.createAlt(_i35,_s13);}if("/"===e.pathType)return e.items.map(_).reduce((e,t)=>l.createSeq(e,t));if("|"===e.pathType)return e.items.map(_).reduce((e,t)=>l.createAlt(e,t));if("*"===e.pathType)return l.createZeroOrMorePath(_(e.items[0]));if("+"===e.pathType)return l.createOneOrMorePath(_(e.items[0]));if("?"===e.pathType)return l.createZeroOrOnePath(_(e.items[0]));throw new Error("Unable to translate path expression "+JSON.stringify(e));}function v(){var e="?var"+d++;return h.has(e)?v():(h.add(e),l.createTerm(e));}function w(e){return l.createPattern(e.subject,e.predicate,e.object,e.graph);}t.default=function(e,t){if(t=t||{},l=new i.default(t.dataFactory),"string"==typeof e){var _r77=new u(t);_r77._resetBlanks(),e=_r77.parse(e);}return f(e,t.quads,t.blankToVariable);};var S=Object.keys(c).map(e=>c[e]);function T(e,t){if("optional"===t.type){var _r78=m({type:"group",patterns:t.patterns});if(_r78.type===c.FILTER){var _t86=_r78;e=l.createLeftJoin(e,_t86.input,_t86.expression);}else e=l.createLeftJoin(e,_r78);}else if("minus"===t.type){var _r79=m({type:"group",patterns:t.patterns});e=l.createMinus(e,_r79);}else if("bind"===t.type)e=l.createExtend(e,t.variable,y(t.expression));else if("service"===t.type){t.type="group",e=E(e,l.createService(m(t),t.name,t.silent));}else {e=E(e,m(t));}return e;}function E(e,t){return e.type===c.BGP&&t.type===c.BGP?e=l.createBgp([].concat(e.patterns,t.patterns)):e.type===c.BGP&&0===e.patterns.length?e=t:t.type===c.BGP&&0===t.patterns.length||(e=l.createJoin(e,t)),e;}function x(e){var t=(0===e.values.length?[]:Object.keys(e.values[0])).map(l.createTerm.bind(l)),r=e.values.map(e=>{var t=Object.keys(e);t=t.filter(t=>void 0!==e[t]);var r={};for(var _n54 of t){r[_n54]=e[_n54];}return r;});return l.createValues(t,r);}function O(e,t){if(!e)return e;if("aggregate"===e.type){var _r80,_n55=!1;for(var _i36 of Object.keys(t)){if(s(t[_i36],e)){_r80=l.createTerm(_i36),_n55=!0;break;}}return _n55||(_r80=v(),t[o.termToString(_r80)]=e),_r80;}return e.expression?e.expression=O(e.expression,t):e.args?O(e.args,t):Array.isArray(e)&&e.forEach((r,n)=>e[n]=O(r,t)),e;}function A(e){if("insertdelete"===e.updateType||"deletewhere"===e.updateType||"delete"===e.updateType||"insert"===e.updateType)return function(e){if(!p)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");var t,r=[],n=[];e.delete&&(r=a.default.flatten(e.delete.map(t=>R(t,e.graph))));e.insert&&(n=a.default.flatten(e.insert.map(t=>R(t,e.graph))));e.where&&e.where.length>0&&(t=m({type:"group",patterns:e.where}),e.using?t=l.createFrom(t,e.using.default,e.using.named):e.graph&&(t=l.createFrom(t,[e.graph],[])));return l.createDeleteInsert(r.length>0?r.map(w):void 0,n.length>0?n.map(w):void 0,t);}(e);if("load"===e.type)return function(e){return l.createLoad(e.source,e.destination,e.silent);}(e);if("clear"===e.type||"create"===e.type||"drop"===e.type)return function(e){var t;t=e.graph.all?"ALL":e.graph.default?"DEFAULT":e.graph.named?"NAMED":e.graph.name;switch(e.type){case"clear":return l.createClear(t,e.silent);case"create":return l.createCreate(t,e.silent);case"drop":return l.createDrop(t,e.silent);}}(e);if("add"===e.type||"copy"===e.type||"move"===e.type)return function(e){var t=e.source.default?"DEFAULT":e.source.name,r=e.destination.default?"DEFAULT":e.destination.name;switch(e.type){case"copy":return l.createCopy(t,r,e.silent);case"move":return l.createMove(t,r,e.silent);case"add":return l.createAdd(t,r,e.silent);}}(e);throw new Error("Unknown update type "+e.updateType);}function R(e,t){var r=t;"graph"===e.type&&(r=e.name);var n=e.triples;return r&&(n=n.map(e=>Object.assign(e,{graph:r}))),n;}},function(e,t,r){(function(e,n){var i=function(){var e=function e(_e57,t,r,n){for(r=r||{},n=_e57.length;n--;r[_e57[n]]=t){}return r;},t=[6,12,15,28,41,50,55,107,117,120,122,123,132,133,138,320,321,322,323,324],n=[2,208],i=[107,117,120,122,123,132,133,138,320,321,322,323,324],a=[1,20],s=[1,29],o=[6,90],u=[45,46,58],c=[45,58],l=[1,58],h=[1,60],d=[1,56],p=[1,59],f=[1,65],g=[1,66],m=[26,34,35],y=[13,16,310],b=[119,141,318,325],_=[13,16,119,141,310],v=[1,88],w=[1,92],S=[1,94],T=[119,141,318,319,325],E=[13,16,119,141,310,319],x=[1,100],O=[2,250],A=[1,99],R=[13,16,34,35,87,93,224,229,243,244,297,298,299,300,301,302,303,304,305,306,307,308,309,310],I=[6,45,46,58,68,75,78,86,88,90],N=[6,13,16,34,45,46,58,68,75,78,86,88,90,310],P=[6,13,16,26,34,35,37,38,45,46,48,58,68,75,78,86,87,88,90,93,100,116,119,132,133,135,140,167,168,170,173,174,191,195,217,222,224,225,229,233,243,244,248,252,256,271,276,293,297,298,299,300,301,302,303,304,305,306,307,308,309,310,326,328,329,331,332,333,334,335,336,337,338],C=[34,35,45,46,58],D=[13,16,34,35,87,273,274,275,277,279,280,282,283,286,288,297,298,299,300,301,302,303,304,305,306,307,308,309,310,338,339,340,341,342,343],j=[2,451],k=[1,123],L=[1,117],M=[1,124],F=[1,125],B=[6,13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,224,229,243,244,297,298,299,300,301,302,303,304,305,306,307,308,309,310,326],q=[2,309],U=[1,142],V=[1,140],H=[6,191],G=[2,326],z=[2,314],Q=[45,135],X=[6,48,78,86,88,90],$=[2,254],Y=[1,156],J=[1,158],W=[6,48,75,78,86,88,90],K=[2,252],Z=[1,164],ee=[1,176],te=[1,174],re=[1,184],ne=[1,182],ie=[1,175],ae=[1,180],se=[1,181],oe=[1,185],ue=[1,186],ce=[1,189],le=[1,190],he=[1,191],de=[1,192],pe=[1,193],fe=[1,194],ge=[1,195],me=[1,196],ye=[1,197],be=[1,198],_e=[1,199],ve=[6,68,75,78,86,88,90],we=[37,38,191,248,276],Se=[37,38,191,248,252,276],Te=[37,38,191,248,252,256,271,276,293,304,305,306,307,308,309,332,333,334,335,336,337,338],Ee=[26,37,38,191,248,252,256,271,276,293,304,305,306,307,308,309,329,332,333,334,335,336,337,338],xe=[1,229],Oe=[1,230],Ae=[1,232],Re=[1,233],Ie=[1,234],Ne=[1,235],Pe=[1,237],Ce=[1,238],De=[2,458],je=[1,240],ke=[1,241],Le=[1,242],Me=[1,248],Fe=[1,243],Be=[1,244],qe=[1,245],Ue=[1,246],Ve=[1,247],He=[13,16,48,87,100,229,297,298,299,300,301,302,303,304,305,306,307,308,309,310],Ge=[48,93],ze=[34,38],Qe=[6,116,191],Xe=[48,119],$e=[6,48,86,88,90],Ye=[2,338],Je=[2,330],We=[1,293],Ke=[1,295],Ze=[48,119,326],et=[13,16,34,195,310],tt=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,195,217,222,224,225,229,233,243,244,276,297,298,299,300,301,302,303,304,305,306,307,308,309,310,326],rt=[13,16,26,34,35,37,38,46,48,87,90,93,100,119,167,168,170,173,174,191,195,217,222,224,225,229,233,243,244,248,252,256,271,276,293,297,298,299,300,301,302,303,304,305,306,307,308,309,310,326,329,332,333,334,335,336,337,338],nt=[13,16,26,34,35,37,38,46,48,87,90,93,100,119,167,168,170,173,174,191,195,217,222,224,225,229,233,243,244,248,252,256,271,276,293,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,326,329,332,333,334,335,336,337,338],it=[13,16,34,35,87,217,271,273,274,275,277,279,280,282,283,286,288,297,298,299,300,301,302,303,304,305,306,307,308,309,310,332,338,339,340,341,342,343],at=[1,329],st=[1,330],ot=[1,332],ut=[1,331],ct=[6,13,16,26,34,35,37,38,46,48,75,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,224,229,243,244,248,252,256,271,273,274,275,276,277,279,280,282,283,286,288,293,297,298,299,300,301,302,303,304,305,306,307,308,309,310,326,329,332,333,334,335,336,337,338,339,340,341,342,343],lt=[1,340],ht=[1,339],dt=[35,93],pt=[1,353],ft=[1,354],gt=[1,367],mt=[6,48,90],yt=[6,13,16,35,48,78,86,88,90,273,274,275,277,279,280,282,283,286,288,310,338,339,340,341,342,343],bt=[6,13,16,34,35,46,48,78,81,83,86,87,88,90,93,119,167,168,170,173,174,224,229,243,244,273,274,275,277,279,280,282,283,286,288,297,298,299,300,301,302,303,304,305,306,307,308,309,310,326,338,339,340,341,342,343],_t=[46,48,90,119,167,168,170,173,174],vt=[1,386],wt=[1,387],St=[1,393],Tt=[1,392],Et=[48,119,191,225,326],xt=[2,370],Ot=[13,16,34,35,38,87,93,224,229,243,244,297,298,299,300,301,302,303,304,305,306,307,308,309,310],At=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,224,225,229,243,244,276,297,298,299,300,301,302,303,304,305,306,307,308,309,310,326],Rt=[13,16,26,34,35,87,217,271,273,274,275,277,279,280,282,283,286,288,297,298,299,300,301,302,303,304,305,306,307,308,309,310,332,338,339,340,341,342,343],It=[13,16,38,48,87,100,229,297,298,299,300,301,302,303,304,305,306,307,308,309,310],Nt=[35,48],Pt=[2,329],Ct=[1,451],Dt=[1,448],jt=[1,449],kt=[6,13,16,26,34,35,37,38,46,48,68,75,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,224,229,243,244,248,252,256,271,273,274,275,276,277,279,280,282,283,286,288,293,297,298,299,300,301,302,303,304,305,306,307,308,309,310,326,327,329,332,333,334,335,336,337,338,339,340,341,342,343],Lt=[13,16,35,195,217,222,310],Mt=[2,384],Ft=[1,469],Bt=[46,48,90,119,167,168,170,173,174,326],qt=[13,16,34,35,195,217,222,310],Ut=[6,13,16,34,35,48,75,78,86,88,90,273,274,275,277,279,280,282,283,286,288,310,338,339,340,341,342,343],Vt=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,195,224,225,229,243,244,276,297,298,299,300,301,302,303,304,305,306,307,308,309,310,326],Ht=[6,13,16,34,35,48,81,83,86,88,90,273,274,275,277,279,280,282,283,286,288,310,338,339,340,341,342,343],Gt=[13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,224,229,243,244,297,298,299,300,301,302,303,304,305,306,307,308,309,310],zt=[13,16,34,310],Qt=[13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,224,229,243,244,297,298,299,300,301,302,303,304,305,306,307,308,309,310,326],Xt=[2,341],$t=[46,48,90,119,167,168,170,173,174,191,225,326],Yt=[13,16,34,35,37,38,46,48,87,90,93,119,167,168,170,173,174,191,195,217,222,224,225,229,233,243,244,276,297,298,299,300,301,302,303,304,305,306,307,308,309,310,326],Jt=[2,336],Wt=[13,16,35,195,217,310],Kt=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,195,217,222,224,225,229,243,244,276,297,298,299,300,301,302,303,304,305,306,307,308,309,310,326],Zt=[13,16,38,87,100,229,297,298,299,300,301,302,303,304,305,306,307,308,309,310],er=[13,16,34,38,48,87,100,195,229,233,297,298,299,300,301,302,303,304,305,306,307,308,309,310],tr=[13,16,34,35,48,87,93,119,224,229,243,244,297,298,299,300,301,302,303,304,305,306,307,308,309,310],rr=[13,16,34,35,38,87,93,224,229,243,244,297,298,299,300,301,302,303,304,305,306,307,308,309,310,328,329],nr=[13,16,26,34,35,38,87,93,224,229,243,244,297,298,299,300,301,302,303,304,305,306,307,308,309,310,328,329,331,332],ir=[1,630],ar=[1,631],sr=[2,324],or=[13,16,38,195,222,310],ur={trace:function trace(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Prologue_repetition0:7,Query:8,Query_group0:9,Query_option0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectQuery:17,SelectClauseWildcard:18,SelectQuery_repetition0:19,WhereClause:20,SolutionModifierNoGroup:21,SelectClauseVars:22,SelectQuery_repetition1:23,SolutionModifier:24,SelectClauseBase:25,"*":26,SelectClauseVars_repetition_plus0:27,SELECT:28,SelectClauseBase_option0:29,SubSelect:30,SubSelect_option0:31,SubSelect_option1:32,SelectClauseItem:33,VAR:34,"(":35,Expression:36,AS:37,")":38,VarTriple:39,ConstructQuery:40,CONSTRUCT:41,ConstructTemplate:42,ConstructQuery_repetition0:43,ConstructQuery_repetition1:44,WHERE:45,"{":46,ConstructQuery_option0:47,"}":48,DescribeQuery:49,DESCRIBE:50,DescribeQuery_group0:51,DescribeQuery_repetition0:52,DescribeQuery_option0:53,AskQuery:54,ASK:55,AskQuery_repetition0:56,DatasetClause:57,FROM:58,DatasetClause_option0:59,iri:60,WhereClause_option0:61,GroupGraphPattern:62,SolutionModifier_option0:63,SolutionModifierNoGroup_option0:64,SolutionModifierNoGroup_option1:65,SolutionModifierNoGroup_option2:66,GroupClause:67,GROUP:68,BY:69,GroupClause_repetition_plus0:70,GroupCondition:71,BuiltInCall:72,FunctionCall:73,HavingClause:74,HAVING:75,HavingClause_repetition_plus0:76,OrderClause:77,ORDER:78,OrderClause_repetition_plus0:79,OrderCondition:80,ASC:81,BrackettedExpression:82,DESC:83,Constraint:84,LimitOffsetClauses:85,LIMIT:86,INTEGER:87,OFFSET:88,ValuesClause:89,VALUES:90,InlineData:91,InlineData_repetition0:92,NIL:93,InlineData_repetition1:94,InlineData_repetition_plus2:95,InlineData_repetition3:96,DataBlockValue:97,Literal:98,ConstTriple:99,UNDEF:100,DataBlockValueList:101,DataBlockValueList_repetition_plus0:102,Update:103,Update_repetition0:104,Update1:105,Update_option0:106,LOAD:107,Update1_option0:108,Update1_option1:109,Update1_group0:110,Update1_option2:111,GraphRefAll:112,Update1_group1:113,Update1_option3:114,GraphOrDefault:115,TO:116,CREATE:117,Update1_option4:118,GRAPH:119,INSERTDATA:120,QuadPattern:121,DELETEDATA:122,DELETEWHERE:123,Update1_option5:124,InsertClause:125,Update1_option6:126,Update1_repetition0:127,Update1_option7:128,DeleteClause:129,Update1_option8:130,Update1_repetition1:131,DELETE:132,INSERT:133,UsingClause:134,USING:135,UsingClause_option0:136,WithClause:137,WITH:138,IntoGraphClause:139,INTO:140,DEFAULT:141,GraphOrDefault_option0:142,GraphRefAll_group0:143,QuadPattern_option0:144,QuadPattern_repetition0:145,QuadsNotTriples:146,QuadsNotTriples_group0:147,QuadsNotTriples_option0:148,QuadsNotTriples_option1:149,QuadsNotTriples_option2:150,TriplesTemplate:151,TriplesTemplate_repetition0:152,TriplesSameSubject:153,TriplesTemplate_option0:154,GroupGraphPatternSub:155,GroupGraphPatternSub_option0:156,GroupGraphPatternSub_repetition0:157,GroupGraphPatternSubTail:158,GraphPatternNotTriples:159,GroupGraphPatternSubTail_option0:160,GroupGraphPatternSubTail_option1:161,TriplesBlock:162,TriplesBlock_repetition0:163,TriplesSameSubjectPath:164,TriplesBlock_option0:165,GraphPatternNotTriples_repetition0:166,OPTIONAL:167,MINUS:168,GraphPatternNotTriples_group0:169,SERVICE:170,GraphPatternNotTriples_option0:171,GraphPatternNotTriples_group1:172,FILTER:173,BIND:174,FunctionCall_option0:175,FunctionCall_repetition0:176,ExpressionList:177,ExpressionList_repetition0:178,ConstructTemplate_option0:179,ConstructTriples:180,ConstructTriples_repetition0:181,ConstructTriples_option0:182,TriplesSameSubject_group0:183,PropertyListNotEmpty:184,TriplesNode:185,PropertyList:186,PropertyList_option0:187,VerbObjectList:188,PropertyListNotEmpty_repetition0:189,SemiOptionalVerbObjectList:190,";":191,SemiOptionalVerbObjectList_option0:192,Verb:193,ObjectList:194,a:195,ObjectList_repetition0:196,GraphNode:197,TriplesSameSubjectPath_group0:198,PropertyListPathNotEmpty:199,TriplesNodePath:200,TriplesSameSubjectPath_option0:201,PropertyListPathNotEmpty_group0:202,PropertyListPathNotEmpty_repetition0:203,GraphNodePath:204,PropertyListPathNotEmpty_repetition1:205,PropertyListPathNotEmptyTail:206,PropertyListPathNotEmptyTail_group0:207,Path:208,Path_repetition0:209,PathSequence:210,PathSequence_repetition0:211,PathEltOrInverse:212,PathElt:213,PathPrimary:214,PathElt_option0:215,PathEltOrInverse_option0:216,"!":217,PathNegatedPropertySet:218,PathOneInPropertySet:219,PathNegatedPropertySet_repetition0:220,PathNegatedPropertySet_option0:221,"^":222,TriplesNode_repetition_plus0:223,"[":224,"]":225,TriplesNodePath_repetition_plus0:226,GraphNode_group0:227,GraphNodePath_group0:228,"<<":229,VarTriple_group0:230,VarTriple_group1:231,VarTriple_group2:232,">>":233,VarTriple_group3:234,VarTriple_group4:235,ConstTriple_group0:236,ConstTriple_group1:237,ConstTriple_group2:238,ConstTriple_group3:239,ConstTriple_group4:240,VarOrTerm:241,Term:242,BLANK_NODE_LABEL:243,ANON:244,ConditionalAndExpression:245,Expression_repetition0:246,ExpressionTail:247,"||":248,RelationalExpression:249,ConditionalAndExpression_repetition0:250,ConditionalAndExpressionTail:251,"&&":252,AdditiveExpression:253,RelationalExpression_group0:254,RelationalExpression_option0:255,IN:256,MultiplicativeExpression:257,AdditiveExpression_repetition0:258,AdditiveExpressionTail:259,AdditiveExpressionTail_group0:260,NumericLiteralPositive:261,AdditiveExpressionTail_repetition0:262,NumericLiteralNegative:263,AdditiveExpressionTail_repetition1:264,UnaryExpression:265,MultiplicativeExpression_repetition0:266,MultiplicativeExpressionTail:267,MultiplicativeExpressionTail_group0:268,UnaryExpression_option0:269,PrimaryExpression:270,"-":271,Aggregate:272,FUNC_ARITY0:273,FUNC_ARITY1:274,FUNC_ARITY2:275,",":276,IF:277,BuiltInCall_group0:278,BOUND:279,BNODE:280,BuiltInCall_option0:281,EXISTS:282,COUNT:283,Aggregate_option0:284,Aggregate_group0:285,FUNC_AGGREGATE:286,Aggregate_option1:287,GROUP_CONCAT:288,Aggregate_option2:289,Aggregate_option3:290,GroupConcatSeparator:291,SEPARATOR:292,"=":293,String:294,LANGTAG:295,"^^":296,DECIMAL:297,DOUBLE:298,BOOLEAN:299,STRING_LITERAL1:300,STRING_LITERAL2:301,STRING_LITERAL_LONG1:302,STRING_LITERAL_LONG2:303,INTEGER_POSITIVE:304,DECIMAL_POSITIVE:305,DOUBLE_POSITIVE:306,INTEGER_NEGATIVE:307,DECIMAL_NEGATIVE:308,DOUBLE_NEGATIVE:309,PNAME_LN:310,QueryOrUpdate_group0_option0:311,Prologue_repetition0_group0:312,SelectClauseBase_option0_group0:313,DISTINCT:314,REDUCED:315,DescribeQuery_group0_repetition_plus0_group0:316,DescribeQuery_group0_repetition_plus0:317,NAMED:318,SILENT:319,CLEAR:320,DROP:321,ADD:322,MOVE:323,COPY:324,ALL:325,".":326,UNION:327,"|":328,"/":329,PathElt_option0_group0:330,"?":331,"+":332,"!=":333,"<":334,">":335,"<=":336,">=":337,NOT:338,CONCAT:339,COALESCE:340,SUBSTR:341,REGEX:342,REPLACE:343,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",26:"*",28:"SELECT",34:"VAR",35:"(",37:"AS",38:")",41:"CONSTRUCT",45:"WHERE",46:"{",48:"}",50:"DESCRIBE",55:"ASK",58:"FROM",68:"GROUP",69:"BY",75:"HAVING",78:"ORDER",81:"ASC",83:"DESC",86:"LIMIT",87:"INTEGER",88:"OFFSET",90:"VALUES",93:"NIL",100:"UNDEF",107:"LOAD",116:"TO",117:"CREATE",119:"GRAPH",120:"INSERTDATA",122:"DELETEDATA",123:"DELETEWHERE",132:"DELETE",133:"INSERT",135:"USING",138:"WITH",140:"INTO",141:"DEFAULT",167:"OPTIONAL",168:"MINUS",170:"SERVICE",173:"FILTER",174:"BIND",191:";",195:"a",217:"!",222:"^",224:"[",225:"]",229:"<<",233:">>",243:"BLANK_NODE_LABEL",244:"ANON",248:"||",252:"&&",256:"IN",271:"-",273:"FUNC_ARITY0",274:"FUNC_ARITY1",275:"FUNC_ARITY2",276:",",277:"IF",279:"BOUND",280:"BNODE",282:"EXISTS",283:"COUNT",286:"FUNC_AGGREGATE",288:"GROUP_CONCAT",292:"SEPARATOR",293:"=",295:"LANGTAG",296:"^^",297:"DECIMAL",298:"DOUBLE",299:"BOOLEAN",300:"STRING_LITERAL1",301:"STRING_LITERAL2",302:"STRING_LITERAL_LONG1",303:"STRING_LITERAL_LONG2",304:"INTEGER_POSITIVE",305:"DECIMAL_POSITIVE",306:"DOUBLE_POSITIVE",307:"INTEGER_NEGATIVE",308:"DECIMAL_NEGATIVE",309:"DOUBLE_NEGATIVE",310:"PNAME_LN",314:"DISTINCT",315:"REDUCED",318:"NAMED",319:"SILENT",320:"CLEAR",321:"DROP",322:"ADD",323:"MOVE",324:"COPY",325:"ALL",326:".",327:"UNION",328:"|",329:"/",331:"?",332:"+",333:"!=",334:"<",335:">",336:"<=",337:">=",338:"NOT",339:"CONCAT",340:"COALESCE",341:"SUBSTR",342:"REGEX",343:"REPLACE"},productions_:[0,[3,3],[4,1],[8,2],[11,2],[14,3],[17,4],[17,4],[18,2],[22,2],[25,2],[30,4],[30,4],[33,1],[33,5],[33,5],[40,5],[40,7],[49,5],[54,4],[57,3],[20,2],[24,2],[21,3],[67,3],[71,1],[71,1],[71,3],[71,5],[71,1],[74,2],[77,3],[80,2],[80,2],[80,1],[80,1],[85,2],[85,2],[85,4],[85,4],[89,2],[91,4],[91,4],[91,6],[97,1],[97,1],[97,1],[97,1],[101,3],[103,3],[105,4],[105,3],[105,5],[105,4],[105,2],[105,2],[105,2],[105,6],[105,6],[129,2],[125,2],[134,3],[137,2],[139,3],[115,1],[115,2],[112,2],[112,1],[121,4],[146,7],[151,3],[62,3],[62,3],[155,2],[158,3],[162,3],[159,2],[159,2],[159,2],[159,3],[159,4],[159,2],[159,6],[159,6],[159,1],[84,1],[84,1],[84,1],[73,2],[73,6],[177,1],[177,4],[42,3],[180,3],[153,2],[153,2],[186,1],[184,2],[190,2],[188,2],[193,1],[193,1],[193,1],[194,2],[164,2],[164,2],[199,4],[206,1],[206,3],[208,2],[210,2],[213,2],[212,2],[214,1],[214,1],[214,2],[214,3],[218,1],[218,1],[218,4],[219,1],[219,1],[219,2],[219,2],[185,3],[185,3],[200,3],[200,3],[197,1],[197,1],[204,1],[204,1],[39,9],[39,5],[99,9],[99,5],[241,1],[241,1],[242,1],[242,1],[242,1],[242,1],[242,1],[36,2],[247,2],[245,2],[251,2],[249,1],[249,3],[249,4],[253,2],[259,2],[259,2],[259,2],[257,2],[267,2],[265,2],[265,2],[265,2],[270,1],[270,1],[270,1],[270,1],[270,1],[270,1],[82,3],[72,1],[72,2],[72,4],[72,6],[72,8],[72,2],[72,4],[72,2],[72,4],[72,3],[272,5],[272,5],[272,6],[291,4],[98,1],[98,2],[98,3],[98,1],[98,1],[98,1],[98,1],[98,1],[98,1],[294,1],[294,1],[294,1],[294,1],[261,1],[261,1],[261,1],[263,1],[263,1],[263,1],[60,1],[60,1],[60,1],[311,0],[311,1],[5,1],[5,1],[312,1],[312,1],[7,0],[7,2],[9,1],[9,1],[9,1],[9,1],[10,0],[10,1],[19,0],[19,2],[23,0],[23,2],[27,1],[27,2],[313,1],[313,1],[29,0],[29,1],[31,0],[31,1],[32,0],[32,1],[43,0],[43,2],[44,0],[44,2],[47,0],[47,1],[316,1],[316,1],[317,1],[317,2],[51,1],[51,1],[52,0],[52,2],[53,0],[53,1],[56,0],[56,2],[59,0],[59,1],[61,0],[61,1],[63,0],[63,1],[64,0],[64,1],[65,0],[65,1],[66,0],[66,1],[70,1],[70,2],[76,1],[76,2],[79,1],[79,2],[92,0],[92,2],[94,0],[94,2],[95,1],[95,2],[96,0],[96,2],[102,1],[102,2],[104,0],[104,4],[106,0],[106,2],[108,0],[108,1],[109,0],[109,1],[110,1],[110,1],[111,0],[111,1],[113,1],[113,1],[113,1],[114,0],[114,1],[118,0],[118,1],[124,0],[124,1],[126,0],[126,1],[127,0],[127,2],[128,0],[128,1],[130,0],[130,1],[131,0],[131,2],[136,0],[136,1],[142,0],[142,1],[143,1],[143,1],[143,1],[144,0],[144,1],[145,0],[145,2],[147,1],[147,1],[148,0],[148,1],[149,0],[149,1],[150,0],[150,1],[152,0],[152,3],[154,0],[154,1],[156,0],[156,1],[157,0],[157,2],[160,0],[160,1],[161,0],[161,1],[163,0],[163,3],[165,0],[165,1],[166,0],[166,3],[169,1],[169,1],[171,0],[171,1],[172,1],[172,1],[175,0],[175,1],[176,0],[176,3],[178,0],[178,3],[179,0],[179,1],[181,0],[181,3],[182,0],[182,1],[183,1],[183,1],[187,0],[187,1],[189,0],[189,2],[192,0],[192,1],[196,0],[196,3],[198,1],[198,1],[201,0],[201,1],[202,1],[202,1],[203,0],[203,3],[205,0],[205,2],[207,1],[207,1],[209,0],[209,3],[211,0],[211,3],[330,1],[330,1],[330,1],[215,0],[215,1],[216,0],[216,1],[220,0],[220,3],[221,0],[221,1],[223,1],[223,2],[226,1],[226,2],[227,1],[227,1],[228,1],[228,1],[230,1],[230,1],[231,1],[231,1],[232,1],[232,1],[234,1],[234,1],[235,1],[235,1],[236,1],[236,1],[237,1],[237,1],[238,1],[238,1],[239,1],[239,1],[240,1],[240,1],[246,0],[246,2],[250,0],[250,2],[254,1],[254,1],[254,1],[254,1],[254,1],[254,1],[255,0],[255,1],[258,0],[258,2],[260,1],[260,1],[262,0],[262,2],[264,0],[264,2],[266,0],[266,2],[268,1],[268,1],[269,0],[269,1],[278,1],[278,1],[278,1],[278,1],[278,1],[281,0],[281,1],[284,0],[284,1],[285,1],[285,1],[287,0],[287,1],[289,0],[289,1],[290,0],[290,1]],performAction:function performAction(e,t,r,n,i,a,s){var o,u,c,l,h=a.length-1;switch(i){case 1:return a[h-1]=a[h-1]||{},Kr.base&&(a[h-1].base=Kr.base),Kr.base=br=_r=vr="",a[h-1].prefixes=Kr.prefixes,Kr.prefixes=null,a[h-1];case 3:this.$=Er(a[h-1],a[h],{type:"query"});break;case 4:Kr.base=Or(a[h]),br=_r=vr="";break;case 5:Kr.prefixes||(Kr.prefixes={}),a[h-1]=a[h-1].substr(0,a[h-1].length-1),a[h]=Or(a[h]),Kr.prefixes[a[h-1]]=a[h];break;case 6:this.$=Er(a[h-3],Cr(a[h-2]),a[h-1],a[h]);break;case 7:if(Xr(a[h-3].variables.map(e=>zr(e.expression))).some(e=>"count"===e.aggregation)||a[h].group)for(var _e59 of a[h-3].variables){if("Variable"===_e59.termType){if(!a[h].group||!a[h].group.map(e=>Gr(e)).includes(Gr(_e59)))throw Error("Projection of ungrouped variable (?"+Gr(_e59)+")");}else if(0===zr(_e59.expression).length){var _t88=Qr(_e59.expression);for(var _e60 of _t88){if(!a[h].group.map(e=>Gr(e)).includes(Gr(_e60)))throw Error("Use of ungrouped variable in projection of operation (?"+Gr(_e60)+")");}}}var _e58=a[h-1].where.filter(e=>"query"===e.type);if(_e58.length>0){var _t89=a[h-3].variables.filter(e=>e.variable&&e.variable.value).map(e=>e.variable.value),_r81=Xr(_e58.map(e=>e.variables)).map(e=>e.value||e.variable.value);for(var _e61 of _t89){if(_r81.indexOf(_e61)>=0)throw Error("Target id of 'AS' (?"+_e61+") already used in subquery");}}this.$=Er(a[h-3],Cr(a[h-2]),a[h-1],a[h]);break;case 8:this.$=Er(a[h-1],{variables:[new cr()]});break;case 9:var _t87=function(e){var t=e.slice().sort(),r=[];for(var _e62=0;_e62<t.length-1;_e62++){t[_e62+1]==t[_e62]&&r.push(t[_e62]);}return r;}(a[h].map(e=>e.value||e.variable.value));if(_t87.length>0)throw Error("Two or more of the resulting columns have the same name (?"+_t87[0]+")");this.$=Er(a[h-1],{variables:a[h]});break;case 10:this.$=Er({queryType:"SELECT"},a[h]&&(a[h-1]=wr(a[h]),a[h]={},a[h][a[h-1]]=!0,a[h]));break;case 11:case 12:this.$=Er(a[h-3],a[h-2],a[h-1],a[h],{type:"query"});break;case 13:case 100:case 136:case 164:this.$=Ar(a[h]);break;case 14:case 28:this.$=Ir(a[h-3],{variable:Ar(a[h-1])});break;case 15:this.$=Jr(Ir(a[h-3],{variable:Ar(a[h-1])}));break;case 16:this.$=Er({queryType:"CONSTRUCT",template:a[h-3]},Cr(a[h-2]),a[h-1],a[h]);break;case 17:this.$=Er({queryType:"CONSTRUCT",template:a[h-2]=a[h-2]?a[h-2].triples:[]},Cr(a[h-5]),{where:[{type:"bgp",triples:Tr([],a[h-2])}]},a[h]);break;case 18:this.$=Er({queryType:"DESCRIBE",variables:"*"===a[h-3]?[new cr()]:a[h-3].map(Ar)},Cr(a[h-2]),a[h-1],a[h]);break;case 19:this.$=Er({queryType:"ASK"},Cr(a[h-2]),a[h-1],a[h]);break;case 20:case 61:this.$={iri:a[h],named:!!a[h-1]};break;case 21:this.$={where:a[h].patterns};break;case 22:this.$=Er(a[h-1],a[h]);break;case 23:this.$=Er(a[h-2],a[h-1],a[h]);break;case 24:this.$={group:a[h]};break;case 25:case 26:case 32:case 34:this.$=Ir(a[h]);break;case 27:this.$=Ir(a[h-1]);break;case 29:case 35:this.$=Ir(Ar(a[h]));break;case 30:this.$={having:a[h]};break;case 31:this.$={order:a[h]};break;case 33:this.$=Ir(a[h],{descending:!0});break;case 36:this.$={limit:Dr(a[h])};break;case 37:this.$={offset:Dr(a[h])};break;case 38:this.$={limit:Dr(a[h-2]),offset:Dr(a[h])};break;case 39:this.$={limit:Dr(a[h]),offset:Dr(a[h-2])};break;case 40:this.$={type:"values",values:a[h]};break;case 41:this.$=a[h-1].map(function(e){var t={};return t[a[h-3]]=e,t;});break;case 42:this.$=a[h-1].map(function(){return {};});break;case 43:var d=a[h-4].length;a[h-4]=a[h-4].map(Ar),this.$=a[h-1].map(function(e){if(e.length!==d)throw Error("Inconsistent VALUES length");for(var t={},r=0;r<d;r++){t["?"+a[h-4][r].value]=e[r];}return t;});break;case 46:this.$=Jr(a[h]);break;case 47:this.$=void 0;break;case 48:case 92:case 116:case 165:this.$=a[h-1];break;case 49:this.$={type:"update",updates:Sr(a[h-2],a[h-1])};break;case 50:this.$=Er({type:"load",silent:!!a[h-2],source:a[h-1]},a[h]&&{destination:a[h]});break;case 51:this.$={type:wr(a[h-2]),silent:!!a[h-1],graph:a[h]};break;case 52:this.$={type:wr(a[h-4]),silent:!!a[h-3],source:a[h-2],destination:a[h]};break;case 53:this.$={type:"create",silent:!!a[h-2],graph:{type:"graph",name:a[h]}};break;case 54:this.$={updateType:"insert",insert:a[h]};break;case 55:this.$={updateType:"delete",delete:a[h]};break;case 56:this.$={updateType:"deletewhere",delete:a[h]};break;case 57:this.$=Er({updateType:"insertdelete"},a[h-5],{insert:a[h-4]||[]},{delete:a[h-3]||[]},Cr(a[h-2],"using"),{where:a[h].patterns});break;case 58:this.$=Er({updateType:"insertdelete"},a[h-5],{delete:a[h-4]||[]},{insert:a[h-3]||[]},Cr(a[h-2],"using"),{where:a[h].patterns});break;case 59:case 60:case 63:case 156:case 179:this.$=a[h];break;case 62:this.$={graph:a[h]};break;case 64:this.$={type:"graph",default:!0};break;case 65:case 66:this.$={type:"graph",name:a[h]};break;case 67:this.$={},this.$[wr(a[h])]=!0;break;case 68:this.$=a[h-2]?xr(a[h-1],[a[h-2]]):xr(a[h-1]);break;case 69:var p=Er(a[h-3]||{triples:[]},{type:"graph",name:Ar(a[h-5])});this.$=a[h]?[p,a[h]]:[p];break;case 70:case 75:this.$={type:"bgp",triples:xr(a[h-2],[a[h-1]])};break;case 71:this.$={type:"group",patterns:[a[h-1]]};break;case 72:var _loop3=function _loop3(_e63){var t=a[h-1].indexOf(_e63),r=new Set();for(var _e64 of a[h-1].slice(0,t)){"group"!==_e64.type&&"bgp"!==_e64.type||Yr(_e64).forEach(e=>r.add(e));}if(r.has(_e63.variable.value))throw Error("Variable used to bind is already bound (?"+_e63.variable.value+")");};for(var _e63 of a[h-1].filter(e=>"bind"===e.type)){_loop3(_e63);}this.$={type:"group",patterns:a[h-1]};break;case 73:this.$=a[h-1]?xr([a[h-1]],a[h]):xr(a[h]);break;case 74:this.$=a[h]?[a[h-2],a[h]]:a[h-2];break;case 76:a[h-1].length?this.$={type:"union",patterns:xr(a[h-1].map(jr),[jr(a[h])])}:this.$=a[h];break;case 77:this.$=Er(a[h],{type:"optional"});break;case 78:this.$=Er(a[h],{type:"minus"});break;case 79:this.$=Er(a[h],{type:"graph",name:Ar(a[h-1])});break;case 80:this.$=Er(a[h],{type:"service",name:Ar(a[h-1]),silent:!!a[h-2]});break;case 81:this.$={type:"filter",expression:a[h]};break;case 82:this.$={type:"bind",variable:Ar(a[h-1]),expression:a[h-3]};break;case 83:this.$=Jr({type:"bind",variable:Ar(a[h-1]),expression:a[h-3]});break;case 88:this.$={type:"functionCall",function:a[h-1],args:[]};break;case 89:this.$={type:"functionCall",function:a[h-5],args:Sr(a[h-2],a[h-1]),distinct:!!a[h-3]};break;case 90:case 107:case 118:case 208:case 216:case 218:case 230:case 232:case 242:case 246:case 266:case 268:case 272:case 276:case 299:case 305:case 316:case 326:case 332:case 338:case 342:case 352:case 354:case 358:case 366:case 370:case 378:case 380:case 384:case 386:case 395:case 427:case 429:case 439:case 443:case 445:case 447:this.$=[];break;case 91:this.$=Sr(a[h-2],a[h-1]);break;case 93:this.$=xr(a[h-2],[a[h-1]]);break;case 94:case 104:this.$=a[h].map(function(e){return Er(Lr(a[h-1]),e);});break;case 95:this.$=Tr(a[h].map(function(e){return Er(Lr(a[h-1].entity),e);}),a[h-1].triples);break;case 97:this.$=xr([a[h-1]],a[h]);break;case 98:this.$=xr(a[h]);break;case 99:this.$=Hr(a[h-1],a[h]);break;case 102:case 114:case 121:this.$=Kr.factory.namedNode(hr);break;case 103:this.$=Sr(a[h-1],a[h]);break;case 105:this.$=a[h]?Tr(a[h].map(function(e){return Er(Lr(a[h-1].entity),e);}),a[h-1].triples):a[h-1].triples;break;case 106:this.$=Hr(Ar(a[h-3]),Sr(a[h-2],a[h-1]),a[h]);break;case 108:this.$=Hr(Ar(a[h-1]),a[h]);break;case 109:this.$=a[h-1].length?Nr("|",Sr(a[h-1],a[h])):a[h];break;case 110:this.$=a[h-1].length?Nr("/",Sr(a[h-1],a[h])):a[h];break;case 111:this.$=a[h]?Nr(a[h],[a[h-1]]):a[h-1];break;case 112:this.$=a[h-1]?Nr(a[h-1],[a[h]]):a[h];break;case 115:case 122:this.$=Nr(a[h-1],[a[h]]);break;case 119:this.$=Nr("|",Sr(a[h-2],a[h-1]));break;case 123:this.$=Nr(a[h-1],[Kr.factory.namedNode(hr)]);break;case 124:case 126:this.$=function(e){var t=Mr(),r=t,n=[],i=[];e.forEach(function(e){n.push(e.entity),Tr(i,e.triples);});for(var a=0,s=0,o=n.length,u=Array(2*o);a<o;){u[s++]=Lr(r,Kr.factory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),n[a]),u[s++]=Lr(r,Kr.factory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),r=++a<o?Mr():Kr.factory.namedNode(dr));}return {entity:t,triples:Tr(u,i)};}(a[h-1]);break;case 125:case 127:this.$=(c=a[h-1],{entity:l=Mr(),triples:c.map(function(e){return Er(Lr(l),e);})});break;case 128:case 130:this.$={entity:a[h],triples:[]};break;case 132:case 134:this.$=Jr(Kr.factory.quad(a[h-4],a[h-3],a[h-2],Ar(a[h-6])));break;case 133:case 135:this.$=Jr(Kr.factory.quad(a[h-3],a[h-2],a[h-1]));break;case 140:this.$=Mr(a[h].replace(/^(_:)/,""));break;case 141:this.$=Mr();break;case 142:this.$=Kr.factory.namedNode(dr);break;case 143:case 145:case 150:case 154:this.$=Pr(a[h-1],a[h]);break;case 144:this.$=["||",a[h]];break;case 146:this.$=["&&",a[h]];break;case 148:this.$=Rr(a[h-1],[a[h-2],a[h]]);break;case 149:this.$=Rr(a[h-2]?"notin":"in",[a[h-3],a[h]]);break;case 151:case 155:this.$=[a[h-1],a[h]];break;case 152:this.$=["+",Pr(a[h-1],a[h])];break;case 153:var f=kr(a[h-1].value.replace("-",""),a[h-1].datatype);this.$=["-",Pr(f,a[h])];break;case 157:this.$=Rr(a[h-1],[a[h]]);break;case 158:this.$=Rr("UMINUS",[a[h]]);break;case 167:this.$=Rr(wr(a[h-1]));break;case 168:this.$=Rr(wr(a[h-3]),[a[h-1]]);break;case 169:this.$=Rr(wr(a[h-5]),[a[h-3],a[h-1]]);break;case 170:this.$=Rr(wr(a[h-7]),[a[h-5],a[h-3],a[h-1]]);break;case 171:this.$=Rr(wr(a[h-1]),a[h]);break;case 172:this.$=Rr("bound",[Ar(a[h-1])]);break;case 173:this.$=Rr(a[h-1],[]);break;case 174:this.$=Rr(a[h-3],[a[h-1]]);break;case 175:this.$=Rr(a[h-2]?"notexists":"exists",[jr(a[h])]);break;case 176:case 177:this.$=Ir(a[h-1],{type:"aggregate",aggregation:wr(a[h-4]),distinct:!!a[h-2]});break;case 178:this.$=Ir(a[h-2],{type:"aggregate",aggregation:wr(a[h-5]),distinct:!!a[h-3],separator:a[h-1]||" "});break;case 180:this.$=kr(a[h]);break;case 181:this.$=(o=a[h-1],u=wr(a[h].substr(1)),Kr.factory.literal(o,u));break;case 182:this.$=kr(a[h-2],a[h]);break;case 183:case 196:this.$=kr(a[h],fr);break;case 184:case 197:this.$=kr(a[h],gr);break;case 185:case 198:this.$=kr(wr(a[h]),mr);break;case 188:this.$=kr(a[h].toLowerCase(),yr);break;case 189:case 190:this.$=Vr(a[h],1);break;case 191:case 192:this.$=Vr(a[h],3);break;case 193:this.$=kr(a[h].substr(1),fr);break;case 194:this.$=kr(a[h].substr(1),gr);break;case 195:this.$=kr(a[h].substr(1).toLowerCase(),mr);break;case 199:this.$=Kr.factory.namedNode(Or(a[h]));break;case 200:var g=a[h].indexOf(":"),m=a[h].substr(0,g),y=Kr.prefixes[m];if(!y)throw new Error("Unknown prefix: "+m);var b=Or(y+a[h].substr(g+1));this.$=Kr.factory.namedNode(b);break;case 201:if(a[h]=a[h].substr(0,a[h].length-1),!(a[h]in Kr.prefixes))throw new Error("Unknown prefix: "+a[h]);b=Or(Kr.prefixes[a[h]]);this.$=Kr.factory.namedNode(b);break;case 209:case 217:case 219:case 221:case 231:case 233:case 239:case 243:case 247:case 261:case 263:case 265:case 267:case 269:case 271:case 273:case 275:case 300:case 306:case 317:case 333:case 367:case 381:case 400:case 402:case 428:case 430:case 440:case 444:case 446:case 448:a[h-1].push(a[h]);break;case 220:case 238:case 260:case 262:case 264:case 270:case 274:case 399:case 401:this.$=[a[h]];break;case 277:a[h-3].push(a[h-2]);break;case 327:case 339:case 343:case 353:case 355:case 359:case 371:case 379:case 385:case 387:case 396:a[h-2].push(a[h-1]);}},table:[e(t,n,{3:1,4:2,7:3}),{1:[3]},e(i,[2,276],{5:4,8:5,311:6,9:7,103:8,17:9,40:10,49:11,54:12,104:13,18:14,22:15,25:19,6:[2,202],28:a,41:[1,16],50:[1,17],55:[1,18]}),e([6,28,41,50,55,107,117,120,122,123,132,133,138,320,321,322,323,324],[2,2],{312:21,11:22,14:23,12:[1,24],15:[1,25]}),{6:[1,26]},{6:[2,204]},{6:[2,205]},{6:[2,214],10:27,89:28,90:s},{6:[2,203]},e(o,[2,210]),e(o,[2,211]),e(o,[2,212]),e(o,[2,213]),{105:30,107:[1,31],110:32,113:33,117:[1,34],120:[1,35],122:[1,36],123:[1,37],124:38,128:39,132:[2,301],133:[2,295],137:45,138:[1,46],320:[1,40],321:[1,41],322:[1,42],323:[1,43],324:[1,44]},e(u,[2,216],{19:47}),e(u,[2,218],{23:48}),e(c,[2,232],{42:49,44:50,46:[1,51]}),{13:l,16:h,26:[1,54],34:d,51:52,60:57,310:p,316:55,317:53},e(u,[2,246],{56:61}),{26:[1,62],27:63,33:64,34:f,35:g},e(m,[2,224],{29:67,313:68,314:[1,69],315:[1,70]}),e(t,[2,209]),e(t,[2,206]),e(t,[2,207]),{13:[1,71]},{16:[1,72]},{1:[2,1]},{6:[2,3]},{6:[2,215]},{34:[1,74],35:[1,76],91:73,93:[1,75]},{6:[2,278],106:77,191:[1,78]},e(y,[2,280],{108:79,319:[1,80]}),e(b,[2,286],{111:81,319:[1,82]}),e(_,[2,291],{114:83,319:[1,84]}),{118:85,119:[2,293],319:[1,86]},{46:v,121:87},{46:v,121:89},{46:v,121:90},{125:91,133:w},{129:93,132:S},e(T,[2,284]),e(T,[2,285]),e(E,[2,288]),e(E,[2,289]),e(E,[2,290]),{132:[2,302],133:[2,296]},{13:l,16:h,60:95,310:p},{20:96,45:x,46:O,57:97,58:A,61:98},{20:101,45:x,46:O,57:102,58:A,61:98},e(u,[2,230],{43:103}),{45:[1,104],57:105,58:A},e(R,[2,358],{179:106,180:107,181:108,48:[2,356]}),e(I,[2,242],{52:109}),e(I,[2,240],{60:57,316:110,13:l,16:h,34:d,310:p}),e(I,[2,241]),e(N,[2,238]),e(N,[2,236]),e(N,[2,237]),e(P,[2,199]),e(P,[2,200]),e(P,[2,201]),{20:111,45:x,46:O,57:112,58:A,61:98},e(u,[2,8]),e(u,[2,9],{33:113,34:f,35:g}),e(C,[2,220]),e(C,[2,13]),e(D,j,{36:114,39:115,245:116,249:118,253:119,257:120,265:121,269:122,217:k,229:L,271:M,332:F}),e(m,[2,10]),e(m,[2,225]),e(m,[2,222]),e(m,[2,223]),e(t,[2,4]),{13:[1,126]},e(B,[2,40]),{46:[1,127]},{46:[1,128]},{34:[1,130],95:129},{6:[2,49]},e(t,n,{7:3,4:131}),{13:l,16:h,60:132,310:p},e(y,[2,281]),{112:133,119:[1,134],141:[1,136],143:135,318:[1,137],325:[1,138]},e(b,[2,287]),e(y,q,{115:139,142:141,119:U,141:V}),e(_,[2,292]),{119:[1,143]},{119:[2,294]},e(H,[2,54]),e(R,G,{144:144,151:145,152:146,48:z,119:z}),e(H,[2,55]),e(H,[2,56]),e(Q,[2,297],{126:147,129:148,132:S}),{46:v,121:149},e(Q,[2,303],{130:150,125:151,133:w}),{46:v,121:152},e([132,133],[2,62]),e(X,$,{21:153,64:154,74:155,75:Y}),e(u,[2,217]),{46:J,62:157},e(y,[2,248],{59:159,318:[1,160]}),{46:[2,251]},e(W,K,{24:161,63:162,67:163,68:Z}),e(u,[2,219]),{20:165,45:x,46:O,57:166,58:A,61:98},{46:[1,167]},e(c,[2,233]),{48:[1,168]},{48:[2,357]},{13:l,16:h,34:ee,35:te,39:173,60:178,87:re,93:ne,98:179,153:169,183:170,185:171,224:ie,229:L,241:172,242:177,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},e(ve,[2,244],{61:98,53:200,57:201,20:202,45:x,46:O,58:A}),e(N,[2,239]),e(W,K,{63:162,67:163,24:203,68:Z}),e(u,[2,247]),e(C,[2,221]),{37:[1,204]},{37:[1,205]},e(we,[2,427],{246:206}),{13:l,16:h,34:ee,39:209,60:178,87:re,93:ne,98:179,119:[1,207],229:L,234:208,241:210,242:177,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},e(Se,[2,429],{250:211}),e(Se,[2,147],{254:212,255:213,256:[2,437],293:[1,214],333:[1,215],334:[1,216],335:[1,217],336:[1,218],337:[1,219],338:[1,220]}),e(Te,[2,439],{258:221}),e(Ee,[2,447],{266:222}),{13:l,16:h,34:xe,35:Oe,60:226,72:225,73:227,82:224,87:re,98:228,261:187,263:188,270:223,272:231,273:Ae,274:Re,275:Ie,277:Ne,278:236,279:Pe,280:Ce,281:239,282:De,283:je,286:ke,288:Le,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p,338:Me,339:Fe,340:Be,341:qe,342:Ue,343:Ve},{13:l,16:h,34:xe,35:Oe,60:226,72:225,73:227,82:224,87:re,98:228,261:187,263:188,270:249,272:231,273:Ae,274:Re,275:Ie,277:Ne,278:236,279:Pe,280:Ce,281:239,282:De,283:je,286:ke,288:Le,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p,338:Me,339:Fe,340:Be,341:qe,342:Ue,343:Ve},{13:l,16:h,34:xe,35:Oe,60:226,72:225,73:227,82:224,87:re,98:228,261:187,263:188,270:250,272:231,273:Ae,274:Re,275:Ie,277:Ne,278:236,279:Pe,280:Ce,281:239,282:De,283:je,286:ke,288:Le,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p,338:Me,339:Fe,340:Be,341:qe,342:Ue,343:Ve},e(D,[2,452]),e(t,[2,5]),e(He,[2,266],{92:251}),e(Ge,[2,268],{94:252}),{34:[1,254],38:[1,253]},e(ze,[2,270]),e(i,[2,277],{6:[2,279]}),e(H,[2,282],{109:255,139:256,140:[1,257]}),e(H,[2,51]),{13:l,16:h,60:258,310:p},e(H,[2,67]),e(H,[2,311]),e(H,[2,312]),e(H,[2,313]),{116:[1,259]},e(Qe,[2,64]),{13:l,16:h,60:260,310:p},e(y,[2,310]),{13:l,16:h,60:261,310:p},e(Xe,[2,316],{145:262}),e(Xe,[2,315]),{13:l,16:h,34:ee,35:te,39:173,60:178,87:re,93:ne,98:179,153:263,183:170,185:171,224:ie,229:L,241:172,242:177,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},e(Q,[2,299],{127:264}),e(Q,[2,298]),e([45,132,135],[2,60]),e(Q,[2,305],{131:265}),e(Q,[2,304]),e([45,133,135],[2,59]),e(o,[2,6]),e($e,[2,256],{65:266,77:267,78:[1,268]}),e(X,[2,255]),{13:l,16:h,35:Oe,60:274,72:272,73:273,76:269,82:271,84:270,272:231,273:Ae,274:Re,275:Ie,277:Ne,278:236,279:Pe,280:Ce,281:239,282:De,283:je,286:ke,288:Le,310:p,338:Me,339:Fe,340:Be,341:qe,342:Ue,343:Ve},e([6,48,68,75,78,86,88,90],[2,21]),e(R,Ye,{25:19,30:275,155:276,18:277,22:278,156:279,162:280,163:281,28:a,46:Je,48:Je,90:Je,119:Je,167:Je,168:Je,170:Je,173:Je,174:Je}),{13:l,16:h,60:282,310:p},e(y,[2,249]),e(o,[2,7]),e(X,$,{64:154,74:155,21:283,75:Y}),e(W,[2,253]),{69:[1,284]},e(W,K,{63:162,67:163,24:285,68:Z}),e(u,[2,231]),e(R,G,{152:146,47:286,151:287,48:[2,234]}),e(u,[2,92]),{48:[2,360],182:288,326:[1,289]},{13:l,16:h,34:We,60:294,184:290,188:291,193:292,195:Ke,310:p},e(Ze,[2,364],{188:291,193:292,60:294,186:296,187:297,184:298,13:l,16:h,34:We,195:Ke,310:p}),e(et,[2,362]),e(et,[2,363]),{13:l,16:h,34:ee,35:te,39:304,60:178,87:re,93:ne,98:179,185:302,197:300,223:299,224:ie,227:301,229:L,241:303,242:177,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},{13:l,16:h,34:We,60:294,184:305,188:291,193:292,195:Ke,310:p},e(tt,[2,136]),e(tt,[2,137]),e(tt,[2,138]),e(tt,[2,139]),e(tt,[2,140]),e(tt,[2,141]),e(tt,[2,142]),e(rt,[2,180],{295:[1,306],296:[1,307]}),e(rt,[2,183]),e(rt,[2,184]),e(rt,[2,185]),e(rt,[2,186]),e(rt,[2,187]),e(rt,[2,188]),e(nt,[2,189]),e(nt,[2,190]),e(nt,[2,191]),e(nt,[2,192]),e(rt,[2,193]),e(rt,[2,194]),e(rt,[2,195]),e(rt,[2,196]),e(rt,[2,197]),e(rt,[2,198]),e(W,K,{63:162,67:163,24:308,68:Z}),e(I,[2,243]),e(ve,[2,245]),e(o,[2,19]),{34:[1,309]},{34:[1,310]},e([37,38,191,276],[2,143],{247:311,248:[1,312]}),{13:l,16:h,34:[1,314],60:315,230:313,310:p},{13:l,16:h,34:We,60:294,193:316,195:Ke,310:p},e(et,[2,413]),e(et,[2,414]),e(we,[2,145],{251:317,252:[1,318]}),e(D,j,{257:120,265:121,269:122,253:319,217:k,271:M,332:F}),{256:[1,320]},e(it,[2,431]),e(it,[2,432]),e(it,[2,433]),e(it,[2,434]),e(it,[2,435]),e(it,[2,436]),{256:[2,438]},e([37,38,191,248,252,256,276,293,333,334,335,336,337,338],[2,150],{259:321,260:322,261:323,263:324,271:[1,326],304:fe,305:ge,306:me,307:ye,308:be,309:_e,332:[1,325]}),e(Te,[2,154],{267:327,268:328,26:at,329:st}),e(Ee,[2,156]),e(Ee,[2,159]),e(Ee,[2,160]),e(Ee,[2,161],{35:ot,93:ut}),e(Ee,[2,162]),e(Ee,[2,163]),e(Ee,[2,164]),e(D,j,{245:116,249:118,253:119,257:120,265:121,269:122,36:333,217:k,271:M,332:F}),e(ct,[2,166]),{93:[1,334]},{35:[1,335]},{35:[1,336]},{35:[1,337]},{35:lt,93:ht,177:338},{35:[1,341]},{35:[1,343],93:[1,342]},{282:[1,344]},{35:[1,345]},{35:[1,346]},{35:[1,347]},e(dt,[2,453]),e(dt,[2,454]),e(dt,[2,455]),e(dt,[2,456]),e(dt,[2,457]),{282:[2,459]},e(Ee,[2,157]),e(Ee,[2,158]),{13:l,16:h,48:[1,348],60:350,87:re,97:349,98:351,99:352,100:pt,229:ft,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},{48:[1,355],93:[1,356]},{46:[1,357]},e(ze,[2,271]),e(H,[2,50]),e(H,[2,283]),{119:[1,358]},e(H,[2,66]),e(y,q,{142:141,115:359,119:U,141:V}),e(Qe,[2,65]),e(H,[2,53]),{48:[1,360],119:[1,362],146:361},e(Xe,[2,328],{154:363,326:[1,364]}),{45:[1,365],134:366,135:gt},{45:[1,368],134:369,135:gt},e(mt,[2,258],{66:370,85:371,86:[1,372],88:[1,373]}),e($e,[2,257]),{69:[1,374]},e(X,[2,30],{272:231,278:236,281:239,82:271,72:272,73:273,60:274,84:375,13:l,16:h,35:Oe,273:Ae,274:Re,275:Ie,277:Ne,279:Pe,280:Ce,282:De,283:je,286:ke,288:Le,310:p,338:Me,339:Fe,340:Be,341:qe,342:Ue,343:Ve}),e(yt,[2,262]),e(bt,[2,85]),e(bt,[2,86]),e(bt,[2,87]),{35:ot,93:ut},{48:[1,376]},{48:[1,377]},{20:378,45:x,46:O,61:98},{20:379,45:x,46:O,61:98},e(_t,[2,332],{157:380}),e(_t,[2,331]),{13:l,16:h,34:ee,35:vt,39:385,60:178,87:re,93:ne,98:179,164:381,198:382,200:383,224:wt,229:L,241:384,242:177,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},e(I,[2,20]),e(mt,[2,22]),{13:l,16:h,34:St,35:Tt,60:274,70:388,71:389,72:390,73:391,272:231,273:Ae,274:Re,275:Ie,277:Ne,278:236,279:Pe,280:Ce,281:239,282:De,283:je,286:ke,288:Le,310:p,338:Me,339:Fe,340:Be,341:qe,342:Ue,343:Ve},e(o,[2,16]),{48:[1,394]},{48:[2,235]},{48:[2,93]},e(R,[2,359],{48:[2,361]}),e(Ze,[2,94]),e(Et,[2,366],{189:395}),e(R,xt,{194:396,196:397}),e(R,[2,100]),e(R,[2,101]),e(R,[2,102]),e(Ze,[2,95]),e(Ze,[2,96]),e(Ze,[2,365]),{13:l,16:h,34:ee,35:te,38:[1,398],39:304,60:178,87:re,93:ne,98:179,185:302,197:399,224:ie,227:301,229:L,241:303,242:177,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},e(Ot,[2,399]),e(At,[2,128]),e(At,[2,129]),e(At,[2,403]),e(At,[2,404]),{225:[1,400]},e(rt,[2,181]),{13:l,16:h,60:401,310:p},e(o,[2,18]),{38:[1,402]},{38:[1,403]},e(we,[2,428]),e(D,j,{249:118,253:119,257:120,265:121,269:122,245:404,217:k,271:M,332:F}),{46:[1,405]},{46:[2,407]},{46:[2,408]},{13:l,16:h,34:ee,39:407,60:178,87:re,93:ne,98:179,229:L,235:406,241:408,242:177,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},e(Se,[2,430]),e(D,j,{253:119,257:120,265:121,269:122,249:409,217:k,271:M,332:F}),e(Se,[2,148]),{35:lt,93:ht,177:410},e(Te,[2,440]),e(D,j,{265:121,269:122,257:411,217:k,271:M,332:F}),e(Ee,[2,443],{262:412}),e(Ee,[2,445],{264:413}),e(it,[2,441]),e(it,[2,442]),e(Ee,[2,448]),e(D,j,{269:122,265:414,217:k,271:M,332:F}),e(it,[2,449]),e(it,[2,450]),e(ct,[2,88]),e(it,[2,350],{175:415,314:[1,416]}),{38:[1,417]},e(ct,[2,167]),e(D,j,{245:116,249:118,253:119,257:120,265:121,269:122,36:418,217:k,271:M,332:F}),e(D,j,{245:116,249:118,253:119,257:120,265:121,269:122,36:419,217:k,271:M,332:F}),e(D,j,{245:116,249:118,253:119,257:120,265:121,269:122,36:420,217:k,271:M,332:F}),e(ct,[2,171]),e(ct,[2,90]),e(it,[2,354],{178:421}),{34:[1,422]},e(ct,[2,173]),e(D,j,{245:116,249:118,253:119,257:120,265:121,269:122,36:423,217:k,271:M,332:F}),{46:J,62:424},e(Rt,[2,460],{284:425,314:[1,426]}),e(it,[2,464],{287:427,314:[1,428]}),e(it,[2,466],{289:429,314:[1,430]}),e(B,[2,41]),e(He,[2,267]),e(It,[2,44]),e(It,[2,45]),e(It,[2,46]),e(It,[2,47]),{13:l,16:h,60:178,87:re,93:ne,98:179,99:433,119:[1,431],229:ft,239:432,242:434,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},e(B,[2,42]),e(Ge,[2,269]),e(Nt,[2,272],{96:435}),{13:l,16:h,60:436,310:p},e(H,[2,52]),e([6,45,132,133,135,191],[2,68]),e(Xe,[2,317]),{13:l,16:h,34:[1,438],60:439,147:437,310:p},e(Xe,[2,70]),e(R,[2,327],{48:Pt,119:Pt}),{46:J,62:440},e(Q,[2,300]),e(y,[2,307],{136:441,318:[1,442]}),{46:J,62:443},e(Q,[2,306]),e(mt,[2,23]),e(mt,[2,259]),{87:[1,444]},{87:[1,445]},{13:l,16:h,34:Ct,35:Oe,60:274,72:272,73:273,79:446,80:447,81:Dt,82:271,83:jt,84:450,272:231,273:Ae,274:Re,275:Ie,277:Ne,278:236,279:Pe,280:Ce,281:239,282:De,283:je,286:ke,288:Le,310:p,338:Me,339:Fe,340:Be,341:qe,342:Ue,343:Ve},e(yt,[2,263]),e(kt,[2,71]),e(kt,[2,72]),e(X,$,{64:154,74:155,21:452,75:Y}),e(W,K,{63:162,67:163,24:453,68:Z}),{46:[2,342],48:[2,73],89:463,90:s,119:[1,459],158:454,159:455,166:456,167:[1,457],168:[1,458],170:[1,460],173:[1,461],174:[1,462]},e(_t,[2,340],{165:464,326:[1,465]}),e(Lt,Mt,{199:466,202:467,208:468,209:470,34:Ft}),e(Bt,[2,374],{202:467,208:468,209:470,201:471,199:472,13:Mt,16:Mt,35:Mt,195:Mt,217:Mt,222:Mt,310:Mt,34:Ft}),e(qt,[2,372]),e(qt,[2,373]),{13:l,16:h,34:ee,35:vt,39:478,60:178,87:re,93:ne,98:179,200:476,204:474,224:wt,226:473,228:475,229:L,241:477,242:177,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},e(Lt,Mt,{202:467,208:468,209:470,199:479,34:Ft}),e(W,[2,24],{272:231,278:236,281:239,60:274,72:390,73:391,71:480,13:l,16:h,34:St,35:Tt,273:Ae,274:Re,275:Ie,277:Ne,279:Pe,280:Ce,282:De,283:je,286:ke,288:Le,310:p,338:Me,339:Fe,340:Be,341:qe,342:Ue,343:Ve}),e(Ut,[2,260]),e(Ut,[2,25]),e(Ut,[2,26]),e(D,j,{245:116,249:118,253:119,257:120,265:121,269:122,36:481,217:k,271:M,332:F}),e(Ut,[2,29]),e(W,K,{63:162,67:163,24:482,68:Z}),e([48,119,225,326],[2,97],{190:483,191:[1,484]}),e(Et,[2,99]),{13:l,16:h,34:ee,35:te,39:304,60:178,87:re,93:ne,98:179,185:302,197:485,224:ie,227:301,229:L,241:303,242:177,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},e(Vt,[2,124]),e(Ot,[2,400]),e(Vt,[2,125]),e(rt,[2,182]),e(C,[2,14]),e(C,[2,15]),e(we,[2,144]),{13:l,16:h,34:ee,39:487,60:178,87:re,93:ne,98:179,229:L,231:486,241:488,242:177,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},{233:[1,489]},{233:[2,415]},{233:[2,416]},e(Se,[2,146]),e(Se,[2,149]),e(Te,[2,151]),e(Te,[2,152],{268:328,267:490,26:at,329:st}),e(Te,[2,153],{268:328,267:491,26:at,329:st}),e(Ee,[2,155]),e(it,[2,352],{176:492}),e(it,[2,351]),e([6,13,16,26,34,35,37,38,46,48,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,224,229,243,244,248,252,256,271,273,274,275,276,277,279,280,282,283,286,288,293,297,298,299,300,301,302,303,304,305,306,307,308,309,310,326,329,332,333,334,335,336,337,338,339,340,341,342,343],[2,165]),{38:[1,493]},{276:[1,494]},{276:[1,495]},e(D,j,{245:116,249:118,253:119,257:120,265:121,269:122,36:496,217:k,271:M,332:F}),{38:[1,497]},{38:[1,498]},e(ct,[2,175]),e(D,j,{245:116,249:118,253:119,257:120,265:121,269:122,285:499,36:501,26:[1,500],217:k,271:M,332:F}),e(Rt,[2,461]),e(D,j,{245:116,249:118,253:119,257:120,265:121,269:122,36:502,217:k,271:M,332:F}),e(it,[2,465]),e(D,j,{245:116,249:118,253:119,257:120,265:121,269:122,36:503,217:k,271:M,332:F}),e(it,[2,467]),{13:l,16:h,34:[1,505],60:506,236:504,310:p},{13:l,16:h,34:We,60:294,193:507,195:Ke,310:p},e(et,[2,423]),e(et,[2,424]),{35:[1,510],48:[1,508],101:509},e(H,[2,63]),{46:[1,511]},{46:[2,318]},{46:[2,319]},e(H,[2,57]),{13:l,16:h,60:512,310:p},e(y,[2,308]),e(H,[2,58]),e(mt,[2,36],{88:[1,513]}),e(mt,[2,37],{86:[1,514]}),e($e,[2,31],{272:231,278:236,281:239,82:271,72:272,73:273,60:274,84:450,80:515,13:l,16:h,34:Ct,35:Oe,81:Dt,83:jt,273:Ae,274:Re,275:Ie,277:Ne,279:Pe,280:Ce,282:De,283:je,286:ke,288:Le,310:p,338:Me,339:Fe,340:Be,341:qe,342:Ue,343:Ve}),e(Ht,[2,264]),{35:Oe,82:516},{35:Oe,82:517},e(Ht,[2,34]),e(Ht,[2,35]),{31:518,48:[2,226],89:519,90:s},{32:520,48:[2,228],89:521,90:s},e(_t,[2,333]),e(Gt,[2,334],{160:522,326:[1,523]}),{46:J,62:524},{46:J,62:525},{46:J,62:526},{13:l,16:h,34:[1,528],60:529,169:527,310:p},e(zt,[2,346],{171:530,319:[1,531]}),{13:l,16:h,35:Oe,60:274,72:272,73:273,82:271,84:532,272:231,273:Ae,274:Re,275:Ie,277:Ne,278:236,279:Pe,280:Ce,281:239,282:De,283:je,286:ke,288:Le,310:p,338:Me,339:Fe,340:Be,341:qe,342:Ue,343:Ve},{35:[1,533]},e(Qt,[2,84]),e(_t,[2,75]),e(R,[2,339],{46:Xt,48:Xt,90:Xt,119:Xt,167:Xt,168:Xt,170:Xt,173:Xt,174:Xt}),e(Bt,[2,104]),e(R,[2,378],{203:534}),e(R,[2,376]),e(R,[2,377]),e(Lt,[2,386],{210:535,211:536}),e(Bt,[2,105]),e(Bt,[2,375]),{13:l,16:h,34:ee,35:vt,38:[1,537],39:478,60:178,87:re,93:ne,98:179,200:476,204:538,224:wt,228:475,229:L,241:477,242:177,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},e(Ot,[2,401]),e(At,[2,130]),e(At,[2,131]),e(At,[2,405]),e(At,[2,406]),{225:[1,539]},e(Ut,[2,261]),{37:[1,541],38:[1,540]},e(o,[2,17]),e(Et,[2,367]),e(Et,[2,368],{193:292,60:294,192:542,188:543,13:l,16:h,34:We,195:Ke,310:p}),e($t,[2,103],{276:[1,544]}),{13:l,16:h,34:We,60:294,193:545,195:Ke,310:p},e(et,[2,409]),e(et,[2,410]),e(Yt,[2,133]),e(Ee,[2,444]),e(Ee,[2,446]),e(D,j,{245:116,249:118,253:119,257:120,265:121,269:122,36:546,217:k,271:M,332:F}),e(ct,[2,168]),e(D,j,{245:116,249:118,253:119,257:120,265:121,269:122,36:547,217:k,271:M,332:F}),e(D,j,{245:116,249:118,253:119,257:120,265:121,269:122,36:548,217:k,271:M,332:F}),{38:[1,549],276:[1,550]},e(ct,[2,172]),e(ct,[2,174]),{38:[1,551]},{38:[2,462]},{38:[2,463]},{38:[1,552]},{38:[2,468],191:[1,555],290:553,291:554},{46:[1,556]},{46:[2,417]},{46:[2,418]},{13:l,16:h,60:178,87:re,93:ne,98:179,99:558,229:ft,240:557,242:559,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},e(B,[2,43]),e(Nt,[2,273]),{13:l,16:h,60:350,87:re,97:561,98:351,99:352,100:pt,102:560,229:ft,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},e(R,G,{152:146,148:562,151:563,48:[2,320]}),e(Q,[2,61]),{87:[1,564]},{87:[1,565]},e(Ht,[2,265]),e(Ht,[2,32]),e(Ht,[2,33]),{48:[2,11]},{48:[2,227]},{48:[2,12]},{48:[2,229]},e(R,Ye,{163:281,161:566,162:567,46:Jt,48:Jt,90:Jt,119:Jt,167:Jt,168:Jt,170:Jt,173:Jt,174:Jt}),e(Gt,[2,335]),e(Qt,[2,76],{327:[1,568]}),e(Qt,[2,77]),e(Qt,[2,78]),{46:J,62:569},{46:[2,344]},{46:[2,345]},{13:l,16:h,34:[1,571],60:572,172:570,310:p},e(zt,[2,347]),e(Qt,[2,81]),e(D,j,{245:116,249:118,253:119,257:120,265:121,269:122,36:573,39:574,217:k,229:L,271:M,332:F}),{13:l,16:h,34:ee,35:vt,39:478,60:178,87:re,93:ne,98:179,200:476,204:575,224:wt,228:475,229:L,241:477,242:177,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},e(Ot,[2,109],{328:[1,576]}),e(Wt,[2,393],{212:577,216:578,222:[1,579]}),e(Kt,[2,126]),e(Ot,[2,402]),e(Kt,[2,127]),e(Ut,[2,27]),{34:[1,580]},e(Et,[2,98]),e(Et,[2,369]),e(R,[2,371]),{13:l,16:h,34:ee,39:582,60:178,87:re,93:ne,98:179,229:L,232:581,241:583,242:177,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},{38:[1,584],276:[1,585]},{38:[1,586]},{276:[1,587]},e(ct,[2,91]),e(it,[2,355]),e(ct,[2,176]),e(ct,[2,177]),{38:[1,588]},{38:[2,469]},{292:[1,589]},{13:l,16:h,60:178,87:re,93:ne,98:179,99:591,229:ft,237:590,242:592,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},{233:[1,593]},{233:[2,425]},{233:[2,426]},{13:l,16:h,38:[1,594],60:350,87:re,97:595,98:351,99:352,100:pt,229:ft,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},e(Zt,[2,274]),{48:[1,596]},{48:[2,321]},e(mt,[2,38]),e(mt,[2,39]),e(_t,[2,74]),e(_t,[2,337]),{46:[2,343]},e(Qt,[2,79]),{46:J,62:597},{46:[2,348]},{46:[2,349]},{37:[1,598]},{37:[1,599]},e($t,[2,380],{205:600,276:[1,601]}),e(Lt,[2,385]),e([13,16,34,35,38,87,93,224,229,243,244,297,298,299,300,301,302,303,304,305,306,307,308,309,310,328],[2,110],{329:[1,602]}),{13:l,16:h,35:[1,608],60:605,195:[1,606],213:603,214:604,217:[1,607],310:p},e(Wt,[2,394]),{38:[1,609]},{48:[1,610]},{48:[2,411]},{48:[2,412]},e(ct,[2,89]),e(it,[2,353]),e(ct,[2,169]),e(D,j,{245:116,249:118,253:119,257:120,265:121,269:122,36:611,217:k,271:M,332:F}),e(ct,[2,178]),{293:[1,612]},{13:l,16:h,34:We,60:294,193:613,195:Ke,310:p},e(et,[2,419]),e(et,[2,420]),e(er,[2,135]),e(Nt,[2,48]),e(Zt,[2,275]),e(tr,[2,322],{149:614,326:[1,615]}),e(Qt,[2,80]),{34:[1,616]},{34:[1,617]},e([46,48,90,119,167,168,170,173,174,225,326],[2,106],{206:618,191:[1,619]}),e(R,[2,379]),e(Lt,[2,387]),e(rr,[2,112]),e(rr,[2,391],{215:620,330:621,26:[1,623],331:[1,622],332:[1,624]}),e(nr,[2,113]),e(nr,[2,114]),{13:l,16:h,35:[1,628],60:629,93:[1,627],195:ir,218:625,219:626,222:ar,310:p},e(Lt,Mt,{209:470,208:632}),e(Ut,[2,28]),{233:[1,633]},{38:[1,634]},{294:635,300:le,301:he,302:de,303:pe},{13:l,16:h,60:178,87:re,93:ne,98:179,99:637,229:ft,238:636,242:638,243:ae,244:se,261:187,263:188,294:183,297:oe,298:ue,299:ce,300:le,301:he,302:de,303:pe,304:fe,305:ge,306:me,307:ye,308:be,309:_e,310:p},e(R,G,{152:146,150:639,151:640,48:sr,119:sr}),e(tr,[2,323]),{38:[1,641]},{38:[1,642]},e($t,[2,381]),e($t,[2,107],{209:470,207:643,208:644,13:Mt,16:Mt,35:Mt,195:Mt,217:Mt,222:Mt,310:Mt,34:[1,645]}),e(rr,[2,111]),e(rr,[2,392]),e(rr,[2,388]),e(rr,[2,389]),e(rr,[2,390]),e(nr,[2,115]),e(nr,[2,117]),e(nr,[2,118]),e(or,[2,395],{220:646}),e(nr,[2,120]),e(nr,[2,121]),{13:l,16:h,60:647,195:[1,648],310:p},{38:[1,649]},e(Yt,[2,132]),e(ct,[2,170]),{38:[2,179]},{48:[1,650]},{48:[2,421]},{48:[2,422]},e(Xe,[2,69]),e(Xe,[2,325]),e(Qt,[2,82]),e(Qt,[2,83]),e(R,xt,{196:397,194:651}),e(R,[2,382]),e(R,[2,383]),{13:l,16:h,38:[2,397],60:629,195:ir,219:653,221:652,222:ar,310:p},e(nr,[2,122]),e(nr,[2,123]),e(nr,[2,116]),{233:[1,654]},e($t,[2,108]),{38:[1,655]},{38:[2,398],328:[1,656]},e(er,[2,134]),e(nr,[2,119]),e(or,[2,396])],defaultActions:{5:[2,204],6:[2,205],8:[2,203],26:[2,1],27:[2,3],28:[2,215],77:[2,49],86:[2,294],100:[2,251],107:[2,357],220:[2,438],248:[2,459],287:[2,235],288:[2,93],314:[2,407],315:[2,408],407:[2,415],408:[2,416],438:[2,318],439:[2,319],500:[2,462],501:[2,463],505:[2,417],506:[2,418],518:[2,11],519:[2,227],520:[2,12],521:[2,229],528:[2,344],529:[2,345],554:[2,469],558:[2,425],559:[2,426],563:[2,321],568:[2,343],571:[2,348],572:[2,349],582:[2,411],583:[2,412],635:[2,179],637:[2,421],638:[2,422]},parseError:function parseError(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r;}this.trace(e);},parse:function parse(e){var t=this,r=[0],n=[null],i=[],a=this.table,s="",o=0,u=0,c=0,l=2,h=1,d=i.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(var g in this.yy){Object.prototype.hasOwnProperty.call(this.yy,g)&&(f.yy[g]=this.yy[g]);}p.setInput(e,f.yy),f.yy.lexer=p,f.yy.parser=this,void 0===p.yylloc&&(p.yylloc={});var m=p.yylloc;i.push(m);var y=p.options&&p.options.ranges;"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,_,v,w,S,T,E,x,O,A=function A(){var e;return "number"!=typeof(e=p.lex()||h)&&(e=t.symbols_[e]||e),e;},R={};;){if(v=r[r.length-1],this.defaultActions[v]?w=this.defaultActions[v]:(null==b&&(b=A()),w=a[v]&&a[v][b]),void 0===w||!w.length||!w[0]){var I="";for(T in O=[],a[v]){this.terminals_[T]&&T>l&&O.push("'"+this.terminals_[T]+"'");}I=p.showPosition?"Parse error on line "+(o+1)+":\n"+p.showPosition()+"\nExpecting "+O.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(o+1)+": Unexpected "+(b==h?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(I,{text:p.match,token:this.terminals_[b]||b,line:p.yylineno,loc:m,expected:O});}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(w[0]){case 1:r.push(b),n.push(p.yytext),i.push(p.yylloc),r.push(w[1]),b=null,_?(b=_,_=null):(u=p.yyleng,s=p.yytext,o=p.yylineno,m=p.yylloc,c>0);break;case 2:if(E=this.productions_[w[1]][1],R.$=n[n.length-E],R._$={first_line:i[i.length-(E||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(E||1)].first_column,last_column:i[i.length-1].last_column},y&&(R._$.range=[i[i.length-(E||1)].range[0],i[i.length-1].range[1]]),void 0!==(S=this.performAction.apply(R,[s,u,o,f.yy,w[1],n,i].concat(d))))return S;E&&(r=r.slice(0,-1*E*2),n=n.slice(0,-1*E),i=i.slice(0,-1*E)),r.push(this.productions_[w[1]][0]),n.push(R.$),i.push(R._$),x=a[r[r.length-2]][r[r.length-1]],r.push(x);break;case 3:return !0;}}return !0;}},cr=r(102).Wildcard,lr="http://www.w3.org/1999/02/22-rdf-syntax-ns#",hr=lr+"type",dr=lr+"nil",pr="http://www.w3.org/2001/XMLSchema#",fr=pr+"integer",gr=pr+"decimal",mr=pr+"double",yr=pr+"boolean",br="",_r="",vr="";function wr(e){return e.toLowerCase();}function Sr(e,t){return e.push(t),e;}function Tr(e,t){return e.push.apply(e,t),e;}function Er(e){e||(e={});for(var t,r=1,n=arguments.length;r<n&&(t=arguments[r]||{});r++){for(var i in t){e[i]=t[i];}}return e;}function xr(){for(var e=[],t=0,r=arguments.length;t<r;t++){e=e.concat.apply(e,arguments[t]);}return e;}function Or(e){if("<"===e[0]&&(e=e.substring(1,e.length-1)),/^[a-z]+:/.test(e))return e;if(!Kr.base)throw new Error("Cannot resolve relative IRI "+e+" because no base IRI was set.");switch(br||(br=Kr.base,_r=br.replace(/[^\/:]*$/,""),vr=br.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),e[0]){case void 0:return br;case"#":return br+e;case"?":return br.replace(/(?:\?.*)?$/,e);case"/":return vr+e;default:return _r+e;}}function Ar(e){if(e){var t=e[0];if("?"===t||"$"===t)return Kr.factory.variable(e.substr(1));}return e;}function Rr(e,t){return {type:"operation",operator:e,args:t||[]};}function Ir(e,t){var r={expression:"*"===e?new cr():e};if(t)for(var n in t){r[n]=t[n];}return r;}function Nr(e,t){return {type:"path",pathType:e,items:t};}function Pr(e,t){for(var r,n=0,i=t.length;n<i&&(r=t[n]);n++){e=Rr(r[0],[e,r[1]]);}return e;}function Cr(e,t){var r,n=[],i=[],a=e.length,s={};if(!a)return null;for(var o=0;o<a&&(r=e[o]);o++){(r.named?i:n).push(r.iri);}return s[t||"from"]={default:n,named:i},s;}function Dr(e){return parseInt(e,10);}function jr(e){return "group"===e.type&&1===e.patterns.length?e.patterns[0]:e;}function kr(e,t){return t&&"NamedNode"!==t.termType&&(t=Kr.factory.namedNode(t)),Kr.factory.literal(e,t);}function Lr(e,t,r){var n={};return null!=e&&(n.subject=e),null!=t&&(n.predicate=t),null!=r&&(n.object=r),n;}function Mr(e){return "string"==typeof e?e.startsWith("e_")?Kr.factory.blankNode(e):Kr.factory.blankNode("e_"+e):Kr.factory.blankNode("g_"+Fr++);}var Fr=0;Kr._resetBlanks=function(){Fr=0;};var Br=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,qr={"\\":"\\","'":"'",'"':'"',t:"\t",b:"\b",n:"\n",r:"\r",f:"\f"},Ur=String.fromCharCode;function Vr(e,t){e=e.substring(t,e.length-t);try{e=e.replace(Br,function(e,t,r,n){var i;if(t){if(i=parseInt(t,16),isNaN(i))throw new Error();return Ur(i);}if(r){if(i=parseInt(r,16),isNaN(i))throw new Error();return i<65535?Ur(i):Ur(55296+((i-=65536)>>10),56320+(1023&i));}var a=qr[n];if(!a)throw new Error();return a;});}catch(e){return "";}return e;}function Hr(e,t,r){var n=[],i=[];return t.forEach(function(t){n.push(Lr(null,e,t.entity)),Tr(i,t.triples);}),xr(n,r||[],i);}function Gr(e){return e.variable?e.variable.value:e.value||e.expression.value;}function zr(e){if(!e)return [];if("aggregate"===e.type)return [e];if("operation"===e.type){var _t90=[];for(var _r82 of e.args){_t90.push(...zr(_r82));}return _t90;}return [];}function Qr(e){var t=new Set(),r=function r(e){e&&("Variable"===e.termType?t.add(e):"operation"===e.type&&e.args.forEach(r));};return r(e),t;}function Xr(e,t,r){if(t===void 0){t=1;}if(r===void 0){r=[];}for(var _n56 of e){t>0&&_n56 instanceof Array?Xr(_n56,t-1,r):r.push(_n56);}return r;}function $r(e){return "Variable"===e.termType;}function Yr(e){if(e.triples){var _t91=[];for(var _r83 of e.triples){$r(_r83.subject)&&_t91.push(_r83.subject.value),$r(_r83.predicate)&&_t91.push(_r83.predicate.value),$r(_r83.object)&&_t91.push(_r83.object.value);}return _t91;}if(e.patterns){var _t92=[];for(var _r84 of e.patterns){_t92.push(...Yr(_r84));}return _t92;}return [];}function Jr(e){if(!Kr.sparqlStar)throw new Error("SPARQL* support is not enabled");return e;}var Wr={EOF:1,parseError:function parseError(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t);},setInput:function setInput(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this;},input:function input(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e;},unput:function unput(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this;},more:function more(){return this._more=!0,this;},reject:function reject(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});},less:function less(e){this.unput(this.match.slice(e));},pastInput:function pastInput(){var e=this.matched.substr(0,this.matched.length-this.match.length);return (e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"");},upcomingInput:function upcomingInput(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"");},showPosition:function showPosition(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^";},test_match:function test_match(e,t){var r,n,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in i){this[a]=i[a];}return !1;}return !1;},next:function next(){if(this.done)return this.EOF;var e,t,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++){if((r=this._input.match(this.rules[i[a]]))&&(!t||r[0].length>t[0].length)){if(t=r,n=a,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,i[a])))return e;if(this._backtrack){t=!1;continue;}return !1;}if(!this.options.flex)break;}}return t?!1!==(e=this.test_match(t,i[n]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});},lex:function lex(){var e=this.next();return e||this.lex();},begin:function begin(e){this.conditionStack.push(e);},popState:function popState(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];},_currentRules:function _currentRules(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules;},topState:function topState(e){return (e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL";},pushState:function pushState(e){this.begin(e);},stateStackSize:function stateStackSize(){return this.conditionStack.length;},options:{flex:!0,"case-insensitive":!0},performAction:function performAction(e,t,r,n){switch(r){case 0:break;case 1:return 12;case 2:return 15;case 3:return 28;case 4:return 314;case 5:return 315;case 6:return 35;case 7:return 37;case 8:return 38;case 9:return 26;case 10:return 41;case 11:return 45;case 12:return 46;case 13:return 48;case 14:return 50;case 15:return 55;case 16:return 58;case 17:return 318;case 18:return 68;case 19:return 69;case 20:return 75;case 21:return 78;case 22:return 81;case 23:return 83;case 24:return 86;case 25:return 88;case 26:return 90;case 27:return 191;case 28:return 107;case 29:return 319;case 30:return 140;case 31:return 320;case 32:return 321;case 33:return 117;case 34:return 322;case 35:return 116;case 36:return 323;case 37:return 324;case 38:return 120;case 39:return 122;case 40:return 123;case 41:return 138;case 42:return 132;case 43:return 133;case 44:return 135;case 45:return 141;case 46:return 119;case 47:return 325;case 48:return 326;case 49:return 167;case 50:return 170;case 51:return 174;case 52:return 100;case 53:return 168;case 54:return 327;case 55:return 173;case 56:return 229;case 57:return 233;case 58:return 276;case 59:return 195;case 60:return 328;case 61:return 329;case 62:return 222;case 63:return 331;case 64:return 332;case 65:return 217;case 66:return 224;case 67:return 225;case 68:return 248;case 69:return 252;case 70:return 293;case 71:return 333;case 72:return 334;case 73:return 335;case 74:return 336;case 75:return 337;case 76:return 256;case 77:return 338;case 78:return 271;case 79:return 279;case 80:return 280;case 81:return 273;case 82:return 274;case 83:return 275;case 84:return 339;case 85:return 340;case 86:return 277;case 87:return 342;case 88:return 341;case 89:return 343;case 90:return 282;case 91:return 283;case 92:return 286;case 93:return 288;case 94:return 292;case 95:return 296;case 96:return 299;case 97:return 13;case 98:return 16;case 99:return 310;case 100:return 243;case 101:return 34;case 102:return 295;case 103:return 87;case 104:return 297;case 105:return 298;case 106:return 304;case 107:return 305;case 108:return 306;case 109:return 307;case 110:return 308;case 111:return 309;case 112:return "EXPONENT";case 113:return 300;case 114:return 301;case 115:return 302;case 116:return 303;case 117:return 93;case 118:return 244;case 119:return 6;case 120:return "INVALID";case 121:console.log(t.yytext);}},rules:[/^(?:\s+|#[^\n\r]*)/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT\s+DATA)/i,/^(?:DELETE\s+DATA)/i,/^(?:DELETE\s+WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121],inclusive:!0}}};function Kr(){this.yy={};}return ur.lexer=Wr,Kr.prototype=ur,ur.Parser=Kr,new Kr();}();t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments);},t.main=function(n){n[1]||(console.log("Usage: "+n[0]+" FILE"),e.exit(1));var i=r(212).readFileSync(r(213).normalize(n[1]),"utf8");return t.parser.parse(i);},r.c[r.s]===n&&t.main(e.argv.slice(1));}).call(this,r(8),r(101)(e));},function(e,t,r){t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n;},t.toByteArray=function(e){var t,r,n=c(e),s=n[0],o=n[1],u=new a(function(e,t,r){return 3*(t+r)/4-r;}(0,s,o)),l=0,h=o>0?s-4:s;for(r=0;r<h;r+=4){t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;}2===o&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===o&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u;},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],s=0,o=r-i;s<o;s+=16383){a.push(l(e,s,s+16383>o?o:s+16383));}1===i?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return a.join("");};for(var n=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=s.length;o<u;++o){n[o]=s[o],i[s.charCodeAt(o)]=o;}function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return -1===r&&(r=t),[r,r===t?0:4-r%4];}function l(e,t,r){for(var i,a,s=[],o=t;o<r;o+=3){i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);}return s.join("");}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63;},function(e,t){t.read=function(e,t,r,n,i){var a,s,o=8*i-n-1,u=(1<<o)-1,c=u>>1,l=-7,h=r?i-1:0,d=r?-1:1,p=e[t+h];for(h+=d,a=p&(1<<-l)-1,p>>=-l,l+=o;l>0;a=256*a+e[t+h],h+=d,l-=8){}for(s=a&(1<<-l)-1,a>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=d,l-=8){}if(0===a)a=1-c;else {if(a===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),a-=c;}return (p?-1:1)*s*Math.pow(2,a-n);},t.write=function(e,t,r,n,i,a){var s,o,u,c=8*a-i-1,l=(1<<c)-1,h=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,f=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(o=0,s=l):s+h>=1?(o=(t*u-1)*Math.pow(2,i),s+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&o,p+=f,o/=256,i-=8){}for(s=s<<i|o,c+=i;c>0;e[r+p]=255&s,p+=f,s/=256,c-=8){}e[r+p-f]|=128*g;};},function(e,t){},function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable;})),r.push.apply(r,n);}return r;}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e;}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}var s=r(11).Buffer,o=r(206).inspect,u=o&&o.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.head=null,this.tail=null,this.length=0;}var t,r;return t=e,(r=[{key:"push",value:function value(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length;}},{key:"unshift",value:function value(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length;}},{key:"shift",value:function value(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e;}}},{key:"clear",value:function value(){this.head=this.tail=null,this.length=0;}},{key:"join",value:function value(e){if(0===this.length)return "";for(var t=this.head,r=""+t.data;t=t.next;){r+=e+t.data;}return r;}},{key:"concat",value:function value(e){if(0===this.length)return s.alloc(0);for(var t,r,n,i=s.allocUnsafe(e>>>0),a=this.head,o=0;a;){t=a.data,r=i,n=o,s.prototype.copy.call(t,r,n),o+=a.data.length,a=a.next;}return i;}},{key:"consume",value:function value(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r;}},{key:"first",value:function value(){return this.head.data;}},{key:"_getString",value:function value(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,a=e>i.length?i.length:e;if(a===i.length?n+=i:n+=i.slice(0,e),0==(e-=a)){a===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(a));break;}++r;}return this.length-=r,n;}},{key:"_getBuffer",value:function value(e){var t=s.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,a),0==(e-=a)){a===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(a));break;}++n;}return this.length-=n,t;}},{key:u,value:function value(e,t){return o(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){i(e,t,r[t]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t));});}return e;}({},t,{depth:0,customInspect:!1}));}}])&&a(t.prototype,r),e;}();},function(e,t){},function(e,t,r){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var n=r(11),i=n.Buffer;function a(e,t){for(var r in e){t[r]=e[r];}}function s(e,t,r){return i(e,t,r);}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=s),s.prototype=Object.create(i.prototype),a(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r);},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n;},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e);},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e);};},function(e,t,r){(function(t){var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e;}var a=r(69),s=Symbol("lastResolve"),o=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function p(e,t){return {value:e,done:t};}function f(e){var t=e[s];if(null!==t){var r=e[d].read();null!==r&&(e[l]=null,e[s]=null,e[o]=null,t(p(r,!1)));}}function g(e){t.nextTick(f,e);}var m=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((i(n={get stream(){return this[d];},next:function next(){var e=this,r=this[u];if(null!==r)return Promise.reject(r);if(this[c])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise(function(r,n){t.nextTick(function(){e[u]?n(e[u]):r(p(void 0,!0));});});var n,i=this[l];if(i)n=new Promise(function(e,t){return function(r,n){e.then(function(){t[c]?r(p(void 0,!0)):t[h](r,n);},n);};}(i,this));else {var a=this[d].read();if(null!==a)return Promise.resolve(p(a,!1));n=new Promise(this[h]);}return this[l]=n,n;}},Symbol.asyncIterator,function(){return this;}),i(n,"return",function(){var e=this;return new Promise(function(t,r){e[d].destroy(null,function(e){e?r(e):t(p(void 0,!0));});});}),n),m);e.exports=function(e){var t,r=Object.create(y,(i(t={},d,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,h,{value:function value(e,t){var n=r[d].read();n?(r[l]=null,r[s]=null,r[o]=null,e(p(n,!1))):(r[s]=e,r[o]=t);},writable:!0}),t));return r[l]=null,a(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[o];return null!==t&&(r[l]=null,r[s]=null,r[o]=null,t(e)),void(r[u]=e);}var n=r[s];null!==n&&(r[l]=null,r[s]=null,r[o]=null,n(p(void 0,!0))),r[c]=!0;}),e.on("readable",g.bind(null,r)),r;};}).call(this,r(8));},function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser");};},function(e,t,r){e.exports=i;var n=r(110);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e);}r(12)(i,n),i.prototype._transform=function(e,t,r){r(null,e);};},function(e,t,r){var n;var i=r(31).codes,a=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function o(e){if(e)throw e;}function u(e,t,i,a){a=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments));};}(a);var o=!1;e.on("close",function(){o=!0;}),void 0===n&&(n=r(69)),n(e,{readable:t,writable:i},function(e){if(e)return a(e);o=!0,a();});var u=!1;return function(t){if(!o&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort;}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void a(t||new s("pipe"));};}function c(e){e();}function l(e,t){return e.pipe(t);}function h(e){return e.length?"function"!=typeof e[e.length-1]?o:e.pop():o;}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r];}var n,i=h(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new a("streams");var s=t.map(function(e,r){var a=r<t.length-1;return u(e,a,r>0,function(e){n||(n=e),e&&s.forEach(c),a||(s.forEach(c),i(n));});});return t.reduce(l);};},function(e,t){},function(e,t){},function(e,t){function r(e){this._options=e=e||{};var t=e.prefixes||{};this._prefixByIri={};var r=[];for(var n in t){var i=t[n];o(i)&&(this._prefixByIri[i]=n,r.push(i));}var a=r.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+a+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=e.sparqlStar,this._indent=o(e.indent)?e.indent:"  ",this._newline=o(e.newline)?e.newline:"\n";}r.prototype.toQuery=function(e){var t="";return e.queryType&&(t+=e.queryType.toUpperCase()+" "),e.reduced&&(t+="REDUCED "),e.distinct&&(t+="DISTINCT "),e.variables?t+=l(e.variables,void 0,function(e){return u(e)?this.toEntity(e):"("+this.toExpression(e.expression)+" AS "+s(e.variable)+")";},this)+" ":e.template&&(t+=this.group(e.template,!0)+this._newline),e.from&&(t+=this.graphs("FROM ",e.from.default)+this.graphs("FROM NAMED ",e.from.named)),e.where&&(t+="WHERE "+this.group(e.where,!0)+this._newline),e.updates&&(t+=l(e.updates,";"+this._newline,this.toUpdate,this)),e.group&&(t+="GROUP BY "+l(e.group,void 0,function(e){var t=o(e.expression)?e.expression:"("+this.toExpression(e.expression)+")";return e.variable?"("+t+" AS "+s(e.variable)+")":t;},this)+this._newline),e.having&&(t+="HAVING ("+l(e.having,void 0,this.toExpression,this)+")"+this._newline),e.order&&(t+="ORDER BY "+l(e.order,void 0,function(e){var t="("+this.toExpression(e.expression)+")";return e.descending?"DESC "+t:t;},this)+this._newline),e.offset&&(t+="OFFSET "+e.offset+this._newline),e.limit&&(t+="LIMIT "+e.limit+this._newline),e.values&&(t+=this.values(e)),(t=this.baseAndPrefixes(e)+t).trim();},r.prototype.baseAndPrefixes=function(e){var t=e.base?"BASE <"+e.base+">"+this._newline:"",r="";for(var n in e.prefixes){(this._options.allPrefixes||this._usedPrefixes[n])&&(r+="PREFIX "+n+": <"+e.prefixes[n]+">"+this._newline);}return t+r;},r.prototype.toPattern=function(e){var t=e.type||e instanceof Array&&"array"||(e.subject&&e.predicate&&e.object?"triple":"");if(!(t in this))throw new Error("Unknown entry type: "+t);return this[t](e);},r.prototype.triple=function(e){return this.toEntity(e.subject)+" "+this.toEntity(e.predicate)+" "+this.toEntity(e.object)+".";},r.prototype.array=function(e){return l(e,this._newline,this.toPattern,this);},r.prototype.bgp=function(e){return this.encodeTriples(e.triples);},r.prototype.encodeTriples=function(e){if(!e.length)return "";for(var t=[],r=void 0,n=void 0,i=0;i<e.length;i++){var a=e[i];c(a.subject,r)?c(a.predicate,n)?t.push(","):(n=a.predicate,t.push(";"+this._newline,this._indent,this.toEntity(n))):(r&&t.push("."+this._newline),r=a.subject,n=a.predicate,t.push(this.toEntity(r)," ",this.toEntity(n))),t.push(" ",this.toEntity(a.object));}return t.push("."),t.join("");},r.prototype.graph=function(e){return "GRAPH "+this.toEntity(e.name)+" "+this.group(e);},r.prototype.graphs=function(e,t){return t&&0!==t.length?l(t,"",function(t){return e+this.toEntity(t)+this._newline;},this):"";},r.prototype.group=function(e,t){return -1===(e=!0!==t?this.array(e.patterns||e.triples):this.toPattern("group"!==e.type?e:e.patterns)).indexOf(this._newline)?"{ "+e+" }":"{"+this._newline+this.indent(e)+this._newline+"}";},r.prototype.query=function(e){return this.toQuery(e);},r.prototype.filter=function(e){return "FILTER("+this.toExpression(e.expression)+")";},r.prototype.bind=function(e){return "BIND("+this.toExpression(e.expression)+" AS "+s(e.variable)+")";},r.prototype.optional=function(e){return "OPTIONAL "+this.group(e);},r.prototype.union=function(e){return l(e.patterns,this._newline+"UNION"+this._newline,function(e){return this.group(e,!0);},this);},r.prototype.minus=function(e){return "MINUS "+this.group(e);},r.prototype.values=function(e){var t,r,n=Object.keys(e.values.reduce(function(e,t){for(var r in t){e[r]=!0;}return e;},{}));return 1===n.length?t=r="":(t="(",r=")"),"VALUES "+t+n.join(" ")+r+" {"+this._newline+l(e.values,this._newline,function(e){return "  "+t+l(n,void 0,function(t){return e[t]?this.toEntity(e[t]):"UNDEF";},this)+r;},this)+this._newline+"}";},r.prototype.service=function(e){return "SERVICE "+(e.silent?"SILENT ":"")+this.toEntity(e.name)+" "+this.group(e);},r.prototype.toExpression=function(e){if(u(e))return this.toEntity(e);switch(e.type.toLowerCase()){case"aggregate":return e.aggregation.toUpperCase()+"("+(e.distinct?"DISTINCT ":"")+this.toExpression(e.expression)+(e.separator?'; SEPARATOR = "'+e.separator.replace(n,i)+'"':"")+")";case"functioncall":return this.toEntity(e.function)+"("+l(e.args,", ",this.toExpression,this)+")";case"operation":var t=e.operator.toUpperCase(),r=e.args||[];switch(e.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return (u(r[0])?this.toEntity(r[0]):"("+this.toExpression(r[0])+")")+" "+t+" "+(u(r[1])?this.toEntity(r[1]):"("+this.toExpression(r[1])+")");case"!":return "!("+this.toExpression(r[0])+")";case"notin":t="NOT IN";case"in":return this.toExpression(r[0])+" "+t+"("+(o(r[1])?r[1]:l(r[1],", ",this.toExpression,this))+")";case"notexists":t="NOT EXISTS";case"exists":return t+" "+this.group(r[0],!0);default:return t+"("+l(r,", ",this.toExpression,this)+")";}default:throw new Error("Unknown expression type: "+e.type);}},r.prototype.toEntity=function(e){if(u(e))switch(e.termType){case"Wildcard":return "*";case"Variable":return s(e);case"BlankNode":return "_:"+e.value;case"Literal":var t=e.value||"",r=e.language||"",a=e.datatype;if(e='"'+t.replace(n,i)+'"',r)e+="@"+r;else if(a){if("http://www.w3.org/2001/XMLSchema#integer"===a.value&&/^\d+$/.test(t))return t+" ";if("http://www.w3.org/2001/XMLSchema#string"===a.value)return e;e+="^^"+this.encodeIRI(a.value);}return e;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return e.graph&&"DefaultGraph"!==e.graph.termType?"<< GRAPH "+this.toEntity(e.graph)+" { "+this.toEntity(e.subject)+" "+this.toEntity(e.predicate)+" "+this.toEntity(e.object)+" }  >>":"<< "+this.toEntity(e.subject)+" "+this.toEntity(e.predicate)+" "+this.toEntity(e.object)+" >>";default:return this.encodeIRI(e.value);}else {var o=e.items.map(this.toEntity,this),c=e.pathType;switch(c){case"^":case"!":return c+o[0];case"*":case"+":case"?":return "("+o[0]+c+")";default:return "("+o.join(c)+")";}}};var n=/["\\\t\n\r\b\f]/g,i=function i(e){return a[e];},a={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function s(e){return "?"+e.value;}function o(e){return "string"==typeof e;}function u(e){return "string"==typeof e.termType;}function c(e,t){if(!e||!u(e))return !1;if(!t||!u(t))return !1;if(e.termType!==t.termType)return !1;switch(e.termType){case"Literal":return e.value===t.value&&e.language===t.language&&c(e.datatype,t.datatype);case"Quad":return c(e.subject,t.subject)&&c(e.predicate,t.predicate)&&c(e.object,t.object)&&c(e.graph,t.graph);default:return e.value===t.value;}}function l(e,t,r,n){return e.map(r,n).join(o(t)?t:" ");}r.prototype.encodeIRI=function(e){var t=this._prefixRegex.exec(e);if(t){var r=this._prefixByIri[t[1]];return this._usedPrefixes[r]=!0,r+":"+t[2];}return "<"+e+">";},r.prototype.toUpdate=function(e){switch(e.type||e.updateType){case"load":return "LOAD"+(e.source?" "+this.toEntity(e.source):"")+(e.destination?" INTO GRAPH "+this.toEntity(e.destination):"");case"insert":return "INSERT DATA "+this.group(e.insert,!0);case"delete":return "DELETE DATA "+this.group(e.delete,!0);case"deletewhere":return "DELETE WHERE "+this.group(e.delete,!0);case"insertdelete":return (e.graph?"WITH "+this.toEntity(e.graph)+this._newline:"")+(e.delete.length?"DELETE "+this.group(e.delete,!0)+this._newline:"")+(e.insert.length?"INSERT "+this.group(e.insert,!0)+this._newline:"")+(e.using?this.graphs("USING ",e.using.default):"")+(e.using?this.graphs("USING NAMED ",e.using.named):"")+"WHERE "+this.group(e.where,!0);case"add":case"copy":case"move":return e.type.toUpperCase()+(e.source.default?" DEFAULT ":" ")+"TO "+this.toEntity(e.destination.name);case"create":case"clear":case"drop":return e.type.toUpperCase()+(e.silent?" SILENT ":" ")+(e.graph.default?"DEFAULT":e.graph.named?"NAMED":e.graph.all?"ALL":"GRAPH "+this.toEntity(e.graph.name));default:throw new Error("Unknown update query type: "+e.type);}},r.prototype.indent=function(e){return e.replace(/^/gm,this._indent);},e.exports=function(e){if(e===void 0){e={};}return {stringify:function stringify(t){var n=Object.create(e);return n.prefixes=t.prefixes,new r(n).toQuery(t);},createGenerator:function createGenerator(){return new r(e);}};};},function(e,t,r){e.exports=function e(t,r){if(t===r)return !0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return !1;var n,i,a;if(Array.isArray(t)){if((n=t.length)!=r.length)return !1;for(i=n;0!=i--;){if(!e(t[i],r[i]))return !1;}return !0;}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(a=Object.keys(t)).length)!==Object.keys(r).length)return !1;for(i=n;0!=i--;){if(!Object.prototype.hasOwnProperty.call(r,a[i]))return !1;}for(i=n;0!=i--;){var s=a[i];if(!e(t[s],r[s]))return !1;}return !0;}return t!=t&&r!=r;};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.toSparqlJs=t.toSparql=void 0;var n=r(52),i=r(53),a=r(70),s=r(4),o=r(30).Generator,u=r(30).Wildcard,c=n.types,l=n.expressionTypes;var h;var d=new i.default();function p(e){f();var t=g(e=function(e){return O(e,{});}(e));return "group"===t.type?t.patterns[0]:t;}function f(){h={project:!1,extend:[],group:[],aggregates:[],order:[]};}function g(e){switch(e.type!==c.EXTEND&&e.type!==c.ORDER_BY&&e.type!==c.GRAPH&&(h.project=!1),e.type){case c.EXPRESSION:return m(e);case c.ASK:return S(e,c.ASK);case c.BGP:return function(e){var t=e.patterns.map(v);return 0===t.length?null:{type:"bgp",triples:t};}(e);case c.CONSTRUCT:return function(e){return {type:"query",prefixes:{},queryType:"CONSTRUCT",template:e.template.map(v),where:a.default.flatten([g(e.input)])};}(e);case c.DESCRIBE:return S(e,c.DESCRIBE);case c.DISTINCT:return function(e){var t=g(e.input);return t.patterns[0].distinct=!0,t;}(e);case c.EXTEND:return function(e){if(h.project)return h.extend.push(e),g(e.input);return a.default.flatten([g(e.input),{type:"bind",variable:e.variable,expression:m(e.expression)}]);}(e);case c.FROM:return function(e){var t=g(e.input);return t.patterns[0].from={default:e.default,named:e.named},t;}(e);case c.FILTER:return function(e){return {type:"group",patterns:a.default.flatten([g(e.input),{type:"filter",expression:m(e.expression)}])};}(e);case c.GRAPH:return function(e){return {type:"graph",patterns:a.default.flatten([g(e.input)]),name:e.name};}(e);case c.GROUP:return function(e){var t=g(e.input),r=e.aggregates.map(_);return h.aggregates.push(...r),h.group.push(...e.variables),t;}(e);case c.JOIN:return function(e){return a.default.flatten([g(e.left),g(e.right)]);}(e);case c.LEFT_JOIN:return function(e){var t={type:"optional",patterns:[g(e.right)]};e.expression&&t.patterns.push({type:"filter",expression:m(e.expression)});return t.patterns=a.default.flatten(t.patterns),a.default.flatten([g(e.left),t]);}(e);case c.MINUS:return function(e){var t=g(e.right);"group"===t.type&&(t=t.patterns);return a.default.flatten([g(e.left),{type:"minus",patterns:t}]);}(e);case c.ORDER_BY:return function(e){return h.order.push(...e.expressions),g(e.input);}(e);case c.PATH:return function(e){return {type:"bgp",triples:[{subject:e.subject,predicate:y(e.predicate),object:e.object}]};}(e);case c.PATTERN:return v(e);case c.PROJECT:return S(e,c.PROJECT);case c.REDUCED:return function(e){var t=g(e.input);return t.patterns[0].reduced=!0,t;}(e);case c.SERVICE:return function(e){var t=g(e.input);"group"===t.type&&(t=t.patterns);Array.isArray(t)||(t=[t]);return {type:"service",name:e.name,silent:e.silent,patterns:t};}(e);case c.SLICE:return function(e){var t=g(e.input),r=t;t.type&&"group"===t.type&&(r=t.patterns[0]);0!==e.start&&(r.offset=e.start);void 0!==e.length&&(r.limit=e.length);return t;}(e);case c.UNION:return function(e){return {type:"union",patterns:a.default.flatten([g(e.left),g(e.right)])};}(e);case c.VALUES:return function(e){return {type:"values",values:e.bindings.map(t=>{var r={};for(var _n57 of e.variables){var _e65="?"+_n57.value;t[_e65]?r[_e65]=t[_e65]:r[_e65]=void 0;}return r;})};}(e);case c.COMPOSITE_UPDATE:return function(e){return {prefixes:{},type:"update",updates:e.updates.map(e=>g(e).updates[0])};}(e);case c.DELETE_INSERT:return function(e){var t=e.where,r=void 0;if(t&&t.type===c.FROM){var _n58=e.where;t=_n58.input,r={default:_n58.default,named:_n58.named};}var n=[{updateType:"insertdelete",delete:x(e.delete),insert:x(e.insert)}];r&&(n[0].using=r);if(!t||t.type===c.BGP&&0===t.patterns.length)n[0].where=[];else {var _e66={};var _r85=g(O(t,_e66));"group"===_r85.type?n[0].where=_r85.patterns:n[0].where=[_r85];var _i37=Object.keys(_e66);if(_i37.length>0){if(1!==_i37.length)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");""!==_e66[_i37[0]].graph.value&&(n[0].where=[{type:"graph",patterns:n[0].where,name:_e66[_i37[0]].graph}]);}}e.delete||e.where?e.insert||e.where||(delete n[0].insert,delete n[0].where,e.delete.some(e=>"Variable"===e.subject.termType||"Variable"===e.predicate.termType||"Variable"===e.object.termType)?n[0].updateType="deletewhere":n[0].updateType="delete"):(n[0].updateType="insert",delete n[0].delete,delete n[0].where);return {prefixes:{},type:"update",updates:n};}(e);case c.LOAD:return function(e){var t=[{type:"load",silent:Boolean(e.silent),source:e.source}];e.destination&&(t[0].destination=e.destination);return {prefixes:{},type:"update",updates:t};}(e);case c.CLEAR:return function(e){return T(e,"clear");}(e);case c.CREATE:return function(e){return T(e,"create");}(e);case c.DROP:return function(e){return T(e,"drop");}(e);case c.ADD:return function(e){return E(e,"add");}(e);case c.MOVE:return function(e){return E(e,"move");}(e);case c.COPY:return function(e){return E(e,"copy");}(e);}throw new Error("Unknown Operation type "+e.type);}function m(e){switch(e.expressionType){case l.AGGREGATE:return function(e){var t={expression:m(e.expression),type:"aggregate",aggregation:e.aggregator,distinct:e.distinct};e.separator&&(t.separator=e.separator);return t;}(e);case l.EXISTENCE:return function(e){return {type:"operation",operator:e.not?"notexists":"exists",args:a.default.flatten([g(e.input)])};}(e);case l.NAMED:return function(e){return {type:"functionCall",function:e.name,args:e.args.map(m)};}(e);case l.OPERATOR:return function(e){if("desc"===e.operator){var _t93={expression:m(e.args[0]),descending:!0};return _t93;}var t={type:"operation",operator:e.operator,args:e.args.map(m)};"in"!==t.operator&&"notin"!==t.operator||(t.args=[t.args[0]].concat([t.args.slice(1)]));return t;}(e);case l.TERM:return function(e){return e.term;}(e);case l.WILDCARD:return function(e){return e.wildcard;}(e);}throw new Error("Unknown Expression Operation type "+e.expressionType);}function y(e){switch(e.type){case c.ALT:return function(e){var t=y(e.left),r=y(e.right);if("!"===t.pathType&&"!"===r.pathType)return {type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:[].concat(t.items,r.items)}]};return {type:"path",pathType:"|",items:[t,r]};}(e);case c.INV:return function(e){if(e.path.type===c.NPS){var _t94=e.path.iris.map(e=>({type:"path",pathType:"^",items:[e]}));return _t94.length<=1?{type:"path",pathType:"!",items:_t94}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:_t94}]};}return {type:"path",pathType:"^",items:[y(e.path)]};}(e);case c.LINK:return function(e){return e.iri;}(e);case c.NPS:return function(e){return e.iris.length<=1?{type:"path",pathType:"!",items:e.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:e.iris}]};}(e);case c.ONE_OR_MORE_PATH:return function(e){return {type:"path",pathType:"+",items:[y(e.path)]};}(e);case c.SEQ:return function(e){return {type:"path",pathType:"/",items:[y(e.left),y(e.right)]};}(e);case c.ZERO_OR_MORE_PATH:return function(e){return {type:"path",pathType:"*",items:[y(e.path)]};}(e);case c.ZERO_OR_ONE_PATH:return function(e){return {type:"path",pathType:"?",items:[y(e.path)]};}(e);}throw new Error("Unknown Path type "+e.type);}function b(e){return s.termToString(e);}function _(e){return e;}function v(e){return {subject:e.subject,predicate:e.predicate,object:e.object};}function w(e,t){var r=a.default.isTerm(e)?b(e):e;if("string"==typeof r){if(t[r])return t[r];}else if(Array.isArray(e))e=e.map(e=>w(e,t));else for(var _r86 of Object.keys(e)){e[_r86]=w(e[_r86],t);}return e;}function S(e,t){var r={type:"query",prefixes:{}};t===c.PROJECT?(r.queryType="SELECT",r.variables=e.variables):t===c.ASK?r.queryType="ASK":t===c.DESCRIBE&&(r.queryType="DESCRIBE",r.variables=e.terms);var n=h.extend,i=h.group,s=h.aggregates,o=h.order;f(),h.project=!0;var l=a.default.flatten([g(e.input)]);1===l.length&&"group"===l[0].type&&(l=l[0].patterns),r.where=l;var d={};for(var _e67 of h.aggregates){d[b(_e67.variable)]=m(_e67);}var p={};for(var _e68=h.extend.length-1;_e68>=0;--_e68){var _t95=h.extend[_e68];p[b(_t95.variable)]=w(m(_t95.expression),d);}if(h.group.length>0&&(r.group=h.group.map(e=>{var t=b(e);if(p[t]){var _r87=p[t];return delete p[t],{variable:e,expression:_r87};}return {expression:e};})),h.order.length>0&&(r.order=h.order.map(g).map(e=>e.descending?e:{expression:e})),r.variables&&(r.variables=r.variables.map(e=>{var t=b(e);return p[t]?{variable:e,expression:p[t]}:e;}),0===r.variables.length&&(r.variables=[new u()])),r.where.length>0&&"filter"===r.where[r.where.length-1].type){var _e69=r.where[r.where.length-1];(function e(t,r){return a.default.isTerm(t)?r.indexOf(b(t))>=0:Array.isArray(t)?t.some(t=>e(t,r)):t===Object(t)?Object.keys(t).some(n=>e(t[n],r)):r.indexOf(t)>=0;})(_e69,Object.keys(d))&&(r.having=a.default.flatten([w(_e69.expression,d)]),r.where.splice(-1));}return h.extend=n,h.group=i,h.aggregates=s,h.order=o,r={type:"group",patterns:[r]},r;}function T(e,t){var r=[{type:t,silent:Boolean(e.silent)}];return "DEFAULT"===e.source?r[0].graph={default:!0}:"NAMED"===e.source?r[0].graph={named:!0}:"ALL"===e.source?r[0].graph={all:!0}:r[0].graph={type:"graph",name:e.source},{prefixes:{},type:"update",updates:r};}function E(e,t){var r=[{type:t,silent:Boolean(e.silent)}];return r[0].source="DEFAULT"===e.source?{type:"graph",default:!0}:{type:"graph",name:e.source},r[0].destination="DEFAULT"===e.destination?{type:"graph",default:!0}:{type:"graph",name:e.destination},{prefixes:{},type:"update",updates:r};}function x(e){if(!e)return [];var t={};return e.forEach(e=>{var r=e.graph.value;t[r]||(t[r]=[]),t[r].push(e);}),Object.keys(t).map(e=>""===e?{type:"bgp",triples:t[e].map(v)}:{type:"graph",triples:t[e].map(v),name:t[e][0].graph});}function O(e,t){if(Array.isArray(e))return e.map(e=>O(e,t));if(!e.type)return e;if(e.type===c.DELETE_INSERT)return e;if((e.type===c.PATTERN||e.type===c.PATH)&&e.graph)return t[e.graph.value]||(t[e.graph.value]={graph:e.graph,values:[]}),t[e.graph.value].values.push(e),e;var r={},n={},i={};var _loop4=function _loop4(_t96){var a={};r[_t96]=O(e[_t96],a);var s=Object.keys(a);if(s.length>1){var _e71=A(a[s[0]].values);for(var _t97=1;_t97<s.length;++_t97){var _r88=A(a[s[_t97]].values);_e71=d.createJoin(_e71,_r88);}return {v:(s.map(e=>delete a[e]),_e71)};}if(1===s.length){var _e72=a[s[0]].graph;n[_t96]=_e72,i[_e72.value]=_e72;}};for(var _t96 of Object.keys(e)){var _ret=_loop4(_t96);if(typeof _ret==="object")return _ret.v;}var a=Object.keys(i);if(a.length>0)if(1===a.length&&e.type!==c.PROJECT)t[a[0]]={graph:i[a[0]],values:[r]};else for(var _e70 of Object.keys(n)){n[_e70].value.length>0&&(r[_e70]=d.createGraph(r[_e70],n[_e70]));}return r;}function A(e){var t=d.createBgp(e),r=e[0].graph;return 0===r.value.length?t:d.createGraph(t,r);}t.toSparql=function(e,t){if(t===void 0){t={};}return new o(t).stringify(p(e));},t.toSparqlJs=p;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationTypedMediated=void 0;var n=r(111);class i extends n.ActorQueryOperationTyped{constructor(e,t){super(e,t);}}t.ActorQueryOperationTypedMediated=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveQuadPatternSource=void 0;var n=r(112);class i extends n.ActorRdfResolveQuadPattern{constructor(e){super(e);}test(e){return _asyncToGenerator(function*(){return !0;})();}run(e){var _this47=this;return _asyncToGenerator(function*(){var t=yield _this47.getSource(e.context,e.pattern);return yield _this47.getOutput(t,e.pattern,e.context);})();}getOutput(e,t,r){return _asyncToGenerator(function*(){return {data:e.match(t.subject,t.predicate,t.object,t.graph)};})();}}t.ActorRdfResolveQuadPatternSource=i;},function(e,t){},function(e,t,r){var n=r(72).Buffer,i=r(221);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.head=null,this.tail=null,this.length=0;}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length;},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length;},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e;}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0;},e.prototype.join=function(e){if(0===this.length)return "";for(var t=this.head,r=""+t.data;t=t.next;){r+=e+t.data;}return r;},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i,a=n.allocUnsafe(e>>>0),s=this.head,o=0;s;){t=s.data,r=a,i=o,t.copy(r,i),o+=s.data.length,s=s.next;}return a;},e;}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e;});},function(e,t){},function(e,t,r){(function(e,t){!function(e,r){if(!e.setImmediate){var n,i,a,s,o,u=1,c={},l=!1,h=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?n=function n(e){t.nextTick(function(){f(e);});}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1;},e.postMessage("","*"),e.onmessage=r,t;}}()?e.MessageChannel?((a=new MessageChannel()).port1.onmessage=function(e){f(e.data);},n=function n(e){a.port2.postMessage(e);}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,n=function n(e){var t=h.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,i.removeChild(t),t=null;},i.appendChild(t);}):n=function n(e){setTimeout(f,0,e);}:(s="setImmediate$"+Math.random()+"$",o=function o(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&f(+t.data.slice(s.length));},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),n=function n(t){e.postMessage(s+t,"*");}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++){t[r]=arguments[r+1];}var i={callback:e,args:t};return c[u]=i,n(u),u++;},d.clearImmediate=p;}function p(e){delete c[e];}function f(e){if(l)setTimeout(f,0,e);else {var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r);}}(t);}finally{p(e),l=!1;}}}}}("undefined"==typeof self?void 0===e?this:e:self);}).call(this,r(10),r(8));},function(e,t,r){e.exports=a;var n=r(118),i=Object.create(r(43));function a(e){if(!(this instanceof a))return new a(e);n.call(this,e);}i.inherits=r(12),i.inherits(a,n),a.prototype._transform=function(e,t,r){r(null,e);};},function(e,t,r){e.exports=r(73);},function(e,t,r){e.exports=r(25);},function(e,t,r){e.exports=r(71).Transform;},function(e,t,r){e.exports=r(71).PassThrough;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorSparqlSerialize=void 0;var n=r(34);class i extends n.ActorAbstractMediaTyped{constructor(e){super(e);}}t.ActorSparqlSerialize=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorAbstractMediaTypedFixed=void 0;var n=r(119);class i extends n.ActorAbstractMediaTyped{constructor(e){super(e);var t=this.priorityScale||0===this.priorityScale?this.priorityScale:1;this.mediaTypes&&Object.entries(this.mediaTypes).forEach((_ref43,n)=>{var[e,r]=_ref43;this.mediaTypes[e]=t*r;}),this.mediaTypes=Object.freeze(this.mediaTypes),this.mediaTypeFormats=Object.freeze(this.mediaTypeFormats);}testHandle(e,t,r){var _this48=this;return _asyncToGenerator(function*(){if(!(t in _this48.mediaTypes))throw new Error("Unrecognized media type: "+t);return yield _this48.testHandleChecked(e,r);})();}testMediaType(e){return _asyncToGenerator(function*(){return !0;})();}getMediaTypes(e){var _this49=this;return _asyncToGenerator(function*(){return _this49.mediaTypes;})();}testMediaTypeFormats(e){return _asyncToGenerator(function*(){return !0;})();}getMediaTypeFormats(e){var _this50=this;return _asyncToGenerator(function*(){return _this50.mediaTypeFormats;})();}}t.ActorAbstractMediaTypedFixed=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorSparqlSerializeFixedMediaTypes=void 0;var n=r(34);class i extends n.ActorAbstractMediaTypedFixed{constructor(e){super(e);}testHandleChecked(e,t){return _asyncToGenerator(function*(){return !0;})();}}t.ActorSparqlSerializeFixedMediaTypes=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Converter=void 0;var n=r(232),i=r(74);class a{constructor(e){(e=e||{delimiter:"_"}).prefixVariableQuestionMark=!1,this.delimiter=e.delimiter||"_",this.parser=new i.SparqlJsonParser(e),this.materializeRdfJsTerms=e.materializeRdfJsTerms;}static addValueToTree(e,t,r,n,i,s){var o=t[0],u=n?n+s+o:o,c=i.singularizeVariables[u];if(1===t.length)c?e[o]||(e[o]=r):(e[o]||(e[o]=[]),e[o].push(r));else {var _n59;c?(e[o]||(e[o]={}),_n59=e[o]):(e[o]||(e[o]=[{}]),_n59=e[o][0]),a.addValueToTree(_n59,t.slice(1),r,u,i,s);}}static mergeTrees(e,t){if(typeof e!=typeof t)throw new Error("Two incompatible tree nodes were found: "+typeof e+" and "+typeof t);if(Array.isArray(e)!==Array.isArray(t))throw new Error("Two incompatible tree nodes were found: Array?"+Array.isArray(e)+" and Array?"+Array.isArray(t));if("object"==typeof e&&"object"==typeof t){if(e.termType&&t.termType)return e.equals(t)?{valid:!0,result:e}:{valid:!1,result:e};if(Array.isArray(e)&&Array.isArray(t)){if(e.length>0){var _r89=[];var _n60=!1;for(var _i38 of e){var _e73=a.mergeTrees(_i38,t[0]);_e73.valid?(_n60=!0,_r89.push(_e73.result)):_r89.push(_i38);}if(_n60)return {valid:!0,result:_r89};}return {valid:!0,result:e.concat(t)};}{var _r90={};for(var _e74 in t){_r90[_e74]=t[_e74];}for(var _t98 in e){if(_r90[_t98]){var _n61=a.mergeTrees(e[_t98],_r90[_t98]);if(!_n61.valid)return {valid:!1,result:e};_r90[_t98]=_n61.result;}else _r90[_t98]=e[_t98];}return {valid:!0,result:_r90};}}throw new Error("Unmergable tree types: "+typeof e+" and "+typeof t);}static materializeTree(e){if(e.termType)return n.getTermRaw(e);if(Array.isArray(e))return e.map(a.materializeTree);{var _t99={};for(var _r91 in e){_t99[_r91]=a.materializeTree(e[_r91]);}return _t99;}}sparqlJsonResultsToTree(e,t){return this.bindingsToTree(this.parser.parseJsonResults(e),t||{singularizeVariables:{}});}bindingsToTree(e,t){var r=t&&t.singularizeVariables[""];var n=r?{}:[];for(var _i39 of e){var _e75=r?{}:[{}];for(var _n62 in _i39){var s=_n62.split(this.delimiter),o=_i39[_n62];a.addValueToTree(r?_e75:_e75[0],s,o,"",t,this.delimiter);}n=a.mergeTrees(n,_e75).result;}return this.materializeRdfJsTerms&&(n=a.materializeTree(n)),n;}}t.Converter=a;},function(e,t,r){function n(e){for(var r in e){t.hasOwnProperty(r)||(t[r]=e[r]);}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),a=r(121),s=r(35);n(r(121)),n(r(35));var o=new i.DataFactory(),u=new s.Translator();function c(e,t){return u.fromRdf(e,t);}u.registerHandler(new a.TypeHandlerString(),a.TypeHandlerString.TYPES.map(e=>o.namedNode(e)),["string"]),u.registerHandler(new a.TypeHandlerBoolean(),[a.TypeHandlerBoolean.TYPE].map(e=>o.namedNode(e)),["boolean"]),u.registerHandler(new a.TypeHandlerNumberDouble(),a.TypeHandlerNumberDouble.TYPES.map(e=>o.namedNode(e)),["number"]),u.registerHandler(new a.TypeHandlerNumberInteger(),a.TypeHandlerNumberInteger.TYPES.map(e=>o.namedNode(e)),["number"]),u.registerHandler(new a.TypeHandlerDate(),a.TypeHandlerDate.TYPES.map(e=>o.namedNode(e)),["object"]),t.fromRdf=c,t.toRdf=function(e,t){return t&&"namedNode"in t&&(t={dataFactory:t}),(t=t||{})&&!t.dataFactory&&(t.dataFactory=o),u.toRdf(e,t);},t.getTermRaw=function(e,t){return "Literal"===e.termType?c(e,t):e.value;},t.getSupportedRdfDatatypes=function(){return u.getSupportedRdfDatatypes();},t.getSupportedJavaScriptPrimitives=function(){return u.getSupportedJavaScriptPrimitives();};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(35);class i{fromRdf(e,t){switch(e.value){case"true":return !0;case"false":return !1;case"1":return !0;case"0":return !1;}return t&&n.Translator.incorrectRdfDataType(e),!1;}toRdf(e,_ref44){var{datatype:t,dataFactory:r}=_ref44;return r.literal(e?"true":"false",t||r.namedNode(i.TYPE));}}t.TypeHandlerBoolean=i,i.TYPE="http://www.w3.org/2001/XMLSchema#boolean";},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(35);class i{fromRdf(e,t){switch(t&&!e.value.match(i.VALIDATORS[e.datatype.value.substr(33,e.datatype.value.length)])&&n.Translator.incorrectRdfDataType(e),e.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(e.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":var _t100=e.value.split("-");return new Date(0,parseInt(_t100[0],10)-1,parseInt(_t100[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(e.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(e.value+"-01");default:return new Date(e.value);}}toRdf(e,_ref45){var{datatype:t,dataFactory:r}=_ref45;if(t=t||r.namedNode(i.TYPES[0]),!(e instanceof Date))return null;var n=e;var a;switch(t.value){case"http://www.w3.org/2001/XMLSchema#gDay":a=String(n.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":a=n.getUTCMonth()+1+"-"+n.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":a=String(n.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":a=n.getUTCFullYear()+"-"+(n.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":a=n.toISOString().replace(/T.*$/,"");break;default:a=n.toISOString();}return r.literal(a,t);}}t.TypeHandlerDate=i,i.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],i.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(35);class i{fromRdf(e,t){var r=parseFloat(e.value);return t&&isNaN(r)&&n.Translator.incorrectRdfDataType(e),r;}toRdf(e,_ref46){var{datatype:t,dataFactory:r}=_ref46;return t=t||r.namedNode(i.TYPES[0]),isNaN(e)?r.literal("NaN",t):isFinite(e)?e%1==0?null:r.literal(e.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t):r.literal(e>0?"INF":"-INF",t);}}t.TypeHandlerNumberDouble=i,i.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"];},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(35);class i{fromRdf(e,t){var r=parseInt(e.value,10);return t&&(isNaN(r)||e.value.indexOf(".")>=0)&&n.Translator.incorrectRdfDataType(e),r;}toRdf(e,_ref47){var{datatype:t,dataFactory:r}=_ref47;return r.literal(String(e),t||(e<=i.MAX_INT&&e>=i.MIN_INT?r.namedNode(i.TYPES[0]):r.namedNode(i.TYPES[1])));}}t.TypeHandlerNumberInteger=i,i.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],i.MAX_INT=2147483647,i.MIN_INT=-2147483648;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});class n{fromRdf(e){return e.value;}toRdf(e,_ref48){var{datatype:t,dataFactory:r}=_ref48;return r.literal(e,t);}}t.TypeHandlerString=n,n.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"];},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SparqlJsonParser=void 0;var n=r(5),i=r(122);t.SparqlJsonParser=class{constructor(e){e=e||{},this.dataFactory=e.dataFactory||new n.DataFactory(),this.prefixVariableQuestionMark=!!e.prefixVariableQuestionMark;}parseJsonResults(e){return e.results.bindings.map(e=>this.parseJsonBindings(e));}parseJsonResultsStream(e){e.on("error",e=>n.emit("error",e));var t=[];e.pipe(r(75).parse("head.vars.*")).on("data",e=>t.push(this.dataFactory.variable(e))).on("end",()=>n.emit("variables",t));var n=e.pipe(r(75).parse("results.bindings.*")).pipe(new i.SparqlJsonBindingsTransformer(this));return n;}parseJsonBindings(e){var t={};for(var _r92 in e){var _n63=e[_r92];var _i40=null;switch(_n63.type){case"bnode":_i40=this.dataFactory.blankNode(_n63.value);break;case"literal":_i40=_n63["xml:lang"]?this.dataFactory.literal(_n63.value,_n63["xml:lang"]):_n63.datatype?this.dataFactory.literal(_n63.value,this.dataFactory.namedNode(_n63.datatype)):this.dataFactory.literal(_n63.value);break;case"typed-literal":_i40=this.dataFactory.literal(_n63.value,this.dataFactory.namedNode(_n63.datatype));break;default:_i40=this.dataFactory.namedNode(_n63.value);}t[this.prefixVariableQuestionMark?"?"+_r92:_r92]=_i40;}return t;}parseJsonBoolean(e){if("boolean"in e)return e.boolean;throw new Error("No valid ASK response was found.");}parseJsonBooleanStream(e){return new Promise((t,n)=>{e.on("error",n),e.pipe(r(75).parse("boolean")).on("data",t).on("end",()=>n(new Error("No valid ASK response was found.")));});}};},function(e,t,r){(function(t){var n=r(2);function i(e,r,i){e=e||function(e){this.queue(e);},r=r||function(){this.queue(null);};var a=!1,s=!1,o=[],u=!1,c=new n();function l(){for(;o.length&&!c.paused;){var e=o.shift();if(null===e)return c.emit("end");c.emit("data",e);}}function h(){c.writable=!1,r.call(c),!c.readable&&c.autoDestroy&&c.destroy();}return c.readable=c.writable=!0,c.paused=!1,c.autoDestroy=!(i&&!1===i.autoDestroy),c.write=function(t){return e.call(this,t),!c.paused;},c.queue=c.push=function(e){return u||(null===e&&(u=!0),o.push(e),l()),c;},c.on("end",function(){c.readable=!1,!c.writable&&c.autoDestroy&&t.nextTick(function(){c.destroy();});}),c.end=function(e){if(!a)return a=!0,arguments.length&&c.write(e),h(),c;},c.destroy=function(){if(!s)return s=!0,a=!0,o.length=0,c.writable=c.readable=!1,c.emit("close"),c;},c.pause=function(){if(!c.paused)return c.paused=!0,c;},c.resume=function(){return c.paused&&(c.paused=!1,c.emit("resume")),l(),c.paused||c.emit("drain"),c;},c;}e.exports=i,i.through=i;}).call(this,r(8));},function(e,t,r){var n=new(r(241).LoggerVoid)({}),i=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/Bus/Init"}),a=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/Bus/Http"}),s=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/Bus/RdfJoin"}),o=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse/Bus/RdfParse"}),u=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-dereference/Bus/RdfDereference"}),c=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse-html/Bus/RdfParseHtml"}),l=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-serialize/Bus/RdfSerialize"}),h=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-quad-pattern/Bus/RdfResolveQuadPattern"}),d=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata/Bus/RdfMetadata"}),p=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-extract/Bus/RdfMetadataExtract"}),f=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia/Bus/RdfResolveHypermedia"}),g=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links/Bus/RdfResolveHypermediaLinks"}),m=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/Bus/HttpInvalidate"}),y=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/Bus/OptimizeQueryOperation"}),b=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-sparql-parse/Bus/SparqlParse"}),_=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-sparql-serialize/Bus/SparqlSerialize"}),v=new(r(0).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/Bus/ContextPreprocess"}),w=new(r(0).BusIndexed)({actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/Bus/QueryOperation"}),S=new(r(76).MediatorNumber)({field:"time",type:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/mediator-number/Mediator/Number/type/TypeMin",ignoreErrors:!0,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/http.json#mediatorHttp",bus:a}),T=new(r(244).ActorHttpNative)({agentOptions:'{ "keepAlive": true, "maxSockets": 5 }',name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/http.json#myHttpFetcher",bus:a}),E=new(r(129).ActionObserverHttp)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-sparql-serialize-stats/Actor/SparqlSerialize/Stats/httpObserver/default",bus:a}),x=new(r(16).MediatorRace)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#mediatorRdfJoin",bus:s});new(r(260).ActorRdfJoinSymmetricHash)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/join.json#myRdfJoinActorSymmetricHash",bus:s});new(r(268).ActorRdfJoinNestedLoop)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/join.json#myRdfJoinActorNestedLoop",bus:s});var R=new(r(26).MediatorCombineUnion)({field:"mediaTypes",name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-dereference.json#mediatorRdfParseMediatypes",bus:o}),I=new(r(16).MediatorRace)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-dereference.json#mediatorRdfParseHandle",bus:o});new(r(271).ActorRdfParseN3)({mediaTypes:{"application/n-quads":"1.0","application/trig":"0.95","application/n-triples":"0.8","text/turtle":"0.6","text/n3":"0.35"},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/trig":"http://www.w3.org/ns/formats/TriG","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","text/turtle":"http://www.w3.org/ns/formats/Turtle","text/n3":"http://www.w3.org/ns/formats/N3"},priorityScale:"1",name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserN3",bus:o});new(r(275).ActorRdfParseRdfXml)({mediaTypes:{"application/rdf+xml":"1.0"},mediaTypeFormats:{"application/rdf+xml":"http://www.w3.org/ns/formats/RDF_XML"},priorityScale:"5.0E-1",name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserRdfXml",bus:o});new(r(281).ActorRdfParseXmlRdfa)({mediaTypes:{"application/xml":"1.0","text/xml":"1.0","image/svg+xml":"1.0"},mediaTypeFormats:{"application/xml":"http://www.w3.org/ns/formats/RDFa","text/xml":"http://www.w3.org/ns/formats/RDFa","image/svg+xml":"http://www.w3.org/ns/formats/RDFa"},priorityScale:"3.0E-1",name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserXmlRdfa",bus:o});var D=new(r(26).MediatorCombineUnion)({field:"mediaTypes",name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#mediatorRdfParseMediatypes",bus:o}),j=new(r(16).MediatorRace)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#mediatorRdfParseHandle",bus:o}),k=new(r(16).MediatorRace)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#mediatorRdfDereference",bus:u});new(r(303).ActorRdfParseHtml)({busRdfParseHtml:c,mediaTypes:{"text/html":"1.0","application/xhtml+xml":"0.9"},mediaTypeFormats:{"text/html":"http://www.w3.org/ns/formats/HTML","application/xhtml+xml":"http://www.w3.org/ns/formats/HTML"},priorityScale:"2.0E-1",name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserHtml",bus:o});new(r(306).ActorRdfParseHtmlMicrodata)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserHtmlMicrodata",bus:c});new(r(316).ActorRdfParseHtmlRdfa)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserHtmlRdfa",bus:c});new(r(325).ActorRdfSerializeN3)({mediaTypes:{"application/trig":"1.0","application/n-quads":"0.7","text/turtle":"0.6","application/n-triples":"0.3","text/n3":"0.2"},mediaTypeFormats:{"application/trig":"http://www.w3.org/ns/formats/TriG","application/n-quads":"http://www.w3.org/ns/formats/N-Quads","text/turtle":"http://www.w3.org/ns/formats/Turtle","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","text/n3":"http://www.w3.org/ns/formats/N3"},name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-serializers.json#myRdfSerializerN3",bus:l});new(r(329).ActorRdfSerializeJsonLd)({jsonStringifyIndentSpaces:2,mediaTypes:{"application/ld+json":"1.0"},mediaTypeFormats:{"application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:"9.0E-1",name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-serializers.json#myRdfSerializeJsonLd",bus:l});var U=new(r(16).MediatorRace)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#mediatorRdfSerialize",bus:l}),V=new(r(26).MediatorCombineUnion)({field:"mediaTypes",name:"_:b0bnode322",bus:l}),H=new(r(26).MediatorCombineUnion)({field:"mediaTypeFormats",name:"_:b1bnode322",bus:l}),G=new(r(16).MediatorRace)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#mediatorResolveQuadPattern",bus:h});new(r(154).ActorRdfResolveQuadPatternRdfJsSource)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-rdfjs.json#myRdfRdfJsSourceQuadPatternResolver",bus:h});var Q=new(r(16).MediatorRace)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#mediatorMetadata",bus:d});new(r(338).ActorRdfMetadataPrimaryTopic)({metadataToData:!1,dataToMetadataOnInvalidMetadataGraph:!0,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myRdfMetadataPrimaryTopic",bus:d});new(r(341).ActorRdfMetadataAll)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myRdfMetadataAll",bus:d});var Y=new(r(26).MediatorCombineUnion)({field:"metadata",name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#mediatorMetadataExtract",bus:p});new(r(343).ActorRdfMetadataExtractHydraControls)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myRdfMetadataExtractHydraControls",bus:p});new(r(374).ActorRdfMetadataExtractHydraCount)({predicates:["http://www.w3.org/ns/hydra/core#totalItems","http://rdfs.org/ns/void#triples"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myRdfMetadataExtractHydraCount",bus:p});new(r(376).ActorRdfMetadataExtractSparqlService)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-sparql.json#myRdfMetadataExtractSparqlService",bus:p});new(r(378).ActorRdfResolveHypermediaNone)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myHypermediaNoneResolver",bus:f});var ee=new(r(76).MediatorNumber)({field:"filterFactor",type:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/mediator-number/Mediator/Number/type/TypeMax",ignoreErrors:!0,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#mediatorRdfResolveHypermedia",bus:f}),te=new(r(16).MediatorRace)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#mediatorRdfResolveHypermediaLinks",bus:g});new(r(381).ActorRdfResolveHypermediaLinksNext)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myHypermediaLinksNext",bus:g});var ne=new(r(385).ActorHttpInvalidateListenable)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-resolve-quad-pattern-hypermedia/Actor/RdfResolveQuadPattern/Hypermedia/httpInvalidator#default",bus:m}),ie=new(r(387).MediatorAll)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-init.json#mediatorHttpInvalidate",bus:m}),ae=new(r(167).MediatorCombinePipeline)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-init.json#mediatorOptimizeQueryOperation",bus:y});new(r(390).ActorOptimizeQueryOperationJoinBgp)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-optimize.json#myJoinBgpOptimizer",bus:y});var oe=new(r(16).MediatorRace)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-init.json#mediatorSparqlParse",bus:b});new(r(394).ActorSparqlParseGraphql)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/graphql-parsers.json#myGraphqlParser",bus:b});new(r(397).ActorSparqlParseAlgebra)({prefixes:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dc:"http://purl.org/dc/terms/",dcterms:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#"},name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-parsers.json#mySparqlParser",bus:b});var le=new(r(16).MediatorRace)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-init.json#mediatorSparqlSerialize",bus:_}),he=new(r(26).MediatorCombineUnion)({field:"mediaTypes",name:"_:b0bnode316",bus:_}),de=new(r(26).MediatorCombineUnion)({field:"mediaTypeFormats",name:"_:b1bnode316",bus:_});new(r(399).ActorSparqlSerializeJson)({mediaTypes:{"application/json":"1.0"},mediaTypeFormats:{"application/json":"https://comunica.linkeddatafragments.org/#results_JSON"},name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#myJsonSparqlSerializer",bus:_});new(r(401).ActorSparqlSerializeSimple)({mediaTypes:{simple:"0.9"},mediaTypeFormats:{simple:"https://comunica.linkeddatafragments.org/#results_simple"},name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#mySimpleSparqlSerializer",bus:_});new(r(403).ActorSparqlSerializeSparqlCsv)({mediaTypes:{"text/csv":"0.75"},mediaTypeFormats:{"text/csv":"http://www.w3.org/ns/formats/SPARQL_Results_CSV"},name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#mySparqlCsvSparqlSerializer",bus:_});new(r(405).ActorSparqlSerializeSparqlJson)({mediaTypes:{"application/sparql-results+json":"0.8"},mediaTypeFormats:{"application/sparql-results+json":"http://www.w3.org/ns/formats/SPARQL_Results_JSON"},name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#mySparqlJsonSparqlSerializer",bus:_});new(r(407).ActorSparqlSerializeSparqlTsv)({mediaTypes:{"text/tab-separated-values":"0.75"},mediaTypeFormats:{"text/tab-separated-values":"http://www.w3.org/ns/formats/SPARQL_Results_TSV"},name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#mySparqlTsvSparqlSerializer",bus:_});new(r(411).ActorSparqlSerializeSparqlXml)({mediaTypes:{"application/sparql-results+xml":"0.8"},mediaTypeFormats:{"application/sparql-results+xml":"http://www.w3.org/ns/formats/SPARQL_Results_XML"},name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#mySparqlXmlSparqlSerializer",bus:_});new(r(415).ActorSparqlSerializeTable)({columnWidth:50,mediaTypes:{table:"0.6"},mediaTypeFormats:{table:"https://comunica.linkeddatafragments.org/#results_table"},name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#myTableSparqlSerializer",bus:_});new(r(113).ActorSparqlSerializeTree)({mediaTypes:{tree:"0.5"},mediaTypeFormats:{tree:"https://comunica.linkeddatafragments.org/#results_tree"},name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#myTreeSparqlSerializer",bus:_});var we=new(r(167).MediatorCombinePipeline)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-init.json#mediatorContextPreprocess",bus:v}),Se=new(r(76).MediatorNumber)({field:"httpRequests",type:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/mediator-number/Mediator/Number/type/TypeMin",ignoreErrors:!0,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#mediatorQueryOperation",bus:w});new(r(420).ActorQueryOperationBgpEmpty)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myEmptyBgpQueryOperator",bus:w});new(r(422).ActorQueryOperationValues)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myValuesQueryOperator",bus:w});new(r(424).ActorRdfParseJsonLd)({mediatorHttp:S,mediaTypes:{"application/ld+json":"1.0","application/json":"0.5"},mediaTypeFormats:{"application/ld+json":"http://www.w3.org/ns/formats/JSON-LD","application/json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:"9.0E-1",name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserJsonLd",bus:o});new(r(443).ActorRdfResolveHypermediaSparql)({mediatorHttp:S,checkUrlSuffix:!0,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-sparql.json#mySparqlQuadPatternResolver",bus:f});new(r(448).ActorQueryOperationSparqlEndpoint)({mediatorHttp:S,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-sparql.json#mySparqlEndpointResolver",bus:w});new(r(129).ActorSparqlSerializeStats)({httpObserver:E,mediaTypes:{stats:"0.5"},mediaTypeFormats:{stats:"https://comunica.linkeddatafragments.org/#results_stats"},name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#myStatsSparqlSerializer",bus:_});new(r(465).ActorRdfJoinMultiSmallest)({mediatorJoin:x,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/join.json#myRdfJoinMultiActor",bus:s});new(r(467).ActorRdfDereferenceHttpParse)({mediatorHttp:S,mediatorRdfParseMediatypes:R,mediatorRdfParseHandle:I,maxAcceptHeaderLength:1024,maxAcceptHeaderLengthBrowser:128,mediaMappings:{ttl:"text/turtle",turtle:"text/turtle",nt:"application/n-triples",ntriples:"application/n-triples",nq:"application/n-quads",nquads:"application/n-quads",rdf:"application/rdf+xml",rdfxml:"application/rdf+xml",owl:"application/rdf+xml",n3:"text/n3",trig:"application/trig",jsonld:"application/ld+json",json:"application/json",html:"text/html",htm:"text/html",xhtml:"application/xhtml+xml",xht:"application/xhtml+xml",xml:"application/xml",svg:"image/svg+xml",svgz:"image/svg+xml"},name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-dereference.json#myRdfDereferencer",bus:u});new(r(472).ActorRdfParseHtmlScript)({mediatorRdfParseMediatypes:D,mediatorRdfParseHandle:j,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/rdf-parsers.json#myRdfParserHtmlScript",bus:c});new(r(475).ActorSparqlSerializeRdf)({mediatorRdfSerialize:U,mediatorMediaTypeCombiner:V,mediatorMediaTypeFormatCombiner:H,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-serializers.json#myRdfSparqlSerializer",bus:_});new(r(477).ActorRdfResolveQuadPatternFederated)({mediatorResolveQuadPattern:G,skipEmptyPatterns:!1,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-federated.json#myFederatedQuadPatternResolver",bus:h});new(r(480).ActorQueryOperationQuadpattern)({mediatorResolveQuadPattern:G,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myQuadPatternQueryOperator",bus:w});new(r(482).ActorRdfResolveHypermediaQpf)({mediatorMetadata:Q,mediatorMetadataExtract:Y,mediatorRdfDereference:k,subjectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#subject",predicateUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate",objectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",graphUri:"http://www.w3.org/ns/sparql-service-description#graph",name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myHypermediaQpfResolver",bus:f});new(r(485).ActorRdfResolveQuadPatternHypermedia)({mediatorRdfDereference:k,mediatorMetadata:Q,mediatorMetadataExtract:Y,mediatorRdfResolveHypermedia:ee,mediatorRdfResolveHypermediaLinks:te,cacheSize:100,httpInvalidator:ne,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/resolve-hypermedia.json#myQuadPatternHypermediaResolver",bus:h});new(r(491).ActorHttpProxy)({mediatorHttp:S,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/http.json#myHttpProxy",bus:a,beforeActors:[T]});new(r(495).ActorHttpMemento)({mediatorHttp:S,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/http-memento.json#myHttpFetcher",bus:a,beforeActors:[T]});var Be=new(r(91).ActorInitSparql)({mediatorOptimizeQueryOperation:ae,mediatorQueryOperation:Se,mediatorSparqlParse:oe,mediatorSparqlSerialize:le,mediatorSparqlSerializeMediaTypeCombiner:he,mediatorSparqlSerializeMediaTypeFormatCombiner:de,mediatorContextPreprocess:we,mediatorHttpInvalidate:ie,logger:n,contextKeyShortcuts:{source:"@comunica/bus-rdf-resolve-quad-pattern:source",sources:"@comunica/bus-rdf-resolve-quad-pattern:sources",initialBindings:"@comunica/actor-init-sparql:initialBindings",queryFormat:"@comunica/actor-init-sparql:queryFormat",baseIRI:"@comunica/actor-init-sparql:baseIRI",log:"@comunica/core:log",datetime:"@comunica/actor-http-memento:datetime",queryTimestamp:"@comunica/actor-init-sparql:queryTimestamp",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",lenient:"@comunica/actor-init-sparql:lenient",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpAuth:"@comunica/bus-http:auth"},name:"urn:comunica:sparqlinit",bus:i});new(r(497).ActorQueryOperationAsk)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myAskQueryOperator",bus:w}),new(r(499).ActorQueryOperationService)({forceSparqlEndpoint:!1,mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myServiceQueryOperator",bus:w}),new(r(501).ActorQueryOperationSlice)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#mySliceQueryOperator",bus:w}),new(r(503).ActorQueryOperationBgpSingle)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#mySingleBgpQueryOperator",bus:w}),new(r(505).ActorQueryOperationBgpLeftDeepSmallest)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myLeftDeepSmallestBgpQueryOperator",bus:w}),new(r(507).ActorQueryOperationConstruct)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myConstructQueryOperator",bus:w}),new(r(510).ActorQueryOperationDescribeSubject)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myDescribeQueryOperator",bus:w}),new(r(513).ActorQueryOperationDistinctHash)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myDistinctQueryOperator",bus:w}),new(r(523).ActorQueryOperationExtend)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myExtendQueryOperator",bus:w}),new(r(541).ActorQueryOperationReducedHash)({cacheSize:100,mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myReducedQueryOperator",bus:w}),new(r(546).ActorQueryOperationFilterSparqlee)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myFilterQueryOperator",bus:w}),new(r(548).ActorQueryOperationFromQuad)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myFromQueryOperator",bus:w}),new(r(550).ActorQueryOperationGroup)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myGroupQueryOperator",bus:w}),new(r(553).ActorQueryOperationJoin)({mediatorJoin:x,mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myJoinQueryOperator",bus:w}),new(r(555).ActorQueryOperationLeftJoinLeftDeep)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myLeftJoinQueryOperator",bus:w}),new(r(557).ActorQueryOperationOrderBySparqlee)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myOrderByQueryOperator",bus:w}),new(r(560).ActorQueryOperationProject)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myProjectQueryOperator",bus:w}),new(r(180).ActorQueryOperationUnion)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myUnionQueryOperator",bus:w}),new(r(562).ActorQueryOperationMinus)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperators.json#myMinusQueryOperator",bus:w}),new(r(565).ActorQueryOperationPathAlt)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myAltPathOperator",bus:w}),new(r(567).ActorQueryOperationPathInv)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myInvPathOperator",bus:w}),new(r(569).ActorQueryOperationPathLink)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myLinkPathOperator",bus:w}),new(r(571).ActorQueryOperationPathNps)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myNpsPathOperator",bus:w}),new(r(573).ActorQueryOperationPathOneOrMore)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myOneOrMorePathOperator",bus:w}),new(r(575).ActorQueryOperationPathSeq)({mediatorJoin:x,mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#mySeqPathOperator",bus:w}),new(r(577).ActorQueryOperationPathZeroOrMore)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myZeroOrMorePathOperator",bus:w}),new(r(579).ActorQueryOperationPathZeroOrOne)({mediatorQueryOperation:Se,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-init-sparql/^1.0.0/config/sets/sparql-queryoperator-path.json#myZeroOrOnePathOperator",bus:w});e.exports=Be;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(242),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerVoid=void 0;var n=r(0);class i extends n.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}}t.LoggerVoid=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.MediatorNumber=void 0;var n=r(0);class i extends n.Mediator{constructor(e){super(e),this.indexPicker=this.createIndexPicker();}createIndexPicker(){switch(this.type){case i.MIN:return e=>e.reduce((e,t,r)=>{var n=this.getOrDefault(t[this.field],1/0);return null!==n&&(Number.isNaN(e[0])||e[0]>n)?[n,r]:e;},[Number.NaN,-1])[1];case i.MAX:return e=>e.reduce((e,t,r)=>{var n=this.getOrDefault(t[this.field],-1/0);return null!==n&&(Number.isNaN(e[0])||e[0]<n)?[n,r]:e;},[Number.NaN,-1])[1];default:throw new Error("No valid \"type\" value was given, must be either "+i.MIN+" or "+i.MAX+", but got: "+this.type);}}getOrDefault(e,t){return void 0===e?t:e;}mediateWith(e,t){var _this51=this;return _asyncToGenerator(function*(){var r=t.map(_ref49=>{var{reply:e}=_ref49;return e;});var n=[];if(_this51.ignoreErrors){var _e76={};_e76[_this51.field]=null,r=r.map(t=>t.catch(t=>(n.push(t),_e76)));}var i=yield Promise.all(r),a=_this51.indexPicker(i);if(a<0)throw new Error("All actors rejected their test in "+_this51.name+"\n"+n.map(e=>e.message).join("\n"));return t[a].actor;})();}}t.MediatorNumber=i,i.MIN="https://linkedsoftwaredependencies.org/bundles/npm/@comunica/mediator-number/Mediator/Number/type/TypeMin",i.MAX="https://linkedsoftwaredependencies.org/bundles/npm/@comunica/mediator-number/Mediator/Number/type/TypeMax";},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(245),t);},function(e,t,r){(function(e,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorHttpNative=void 0;var a=r(36);r(45);var s=r(250);class o extends a.ActorHttp{constructor(e){super(e),this.userAgent=o.createUserAgent(),this.requester=new s.default(e.agentOptions?JSON.parse(e.agentOptions):void 0);}static createUserAgent(){return "Comunica/actor-http-native ("+(void 0===e.navigator?"Node.js "+n.version+"; "+n.platform:"Browser-"+e.navigator.userAgent)+")";}test(e){return _asyncToGenerator(function*(){return {time:1/0};})();}run(e){var _this52=this;return _asyncToGenerator(function*(){var t={};return e.input.url?(t.url=e.input.url,Object.assign(t,e.input)):t.url=e.input,e.init?(Object.assign(t,e.init),t.headers=new Headers(e.init.headers)):t.headers=e.input.headers,t.headers||(t.headers=new Headers()),t.headers.has("user-agent")||t.headers.append("user-agent",_this52.userAgent),t.method=t.method||"GET",e.context&&e.context.get(a.KEY_CONTEXT_INCLUDE_CREDENTIALS)&&(t.withCredentials=!0),e.context&&e.context.get(a.KEY_CONTEXT_AUTH)&&(t.auth=e.context.get(a.KEY_CONTEXT_AUTH)),_this52.logInfo(e.context,"Requesting "+t.url,()=>({headers:a.ActorHttp.headersToHash(t.headers)})),new Promise((e,r)=>{var n=_this52.requester.createRequest(t);n.on("error",r),n.on("response",n=>{n.on("error",e=>{n=null,r(e);}),"HEAD"===t.method&&n.destroy(),i(()=>{if(n){n.cancel=()=>(n.destroy(),Promise.resolve());var _r93=n.headers,_i41={body:n,headers:_r93,ok:n.statusCode<300,redirected:t.url!==n.responseUrl,status:n.statusCode,url:_r93.has("content-location")?_r93.get("content-location"):n.responseUrl};e(_i41);}});});});})();}}t.ActorHttpNative=o;}).call(this,r(10),r(8),r(44).setImmediate);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_CONTEXT_AUTH=t.KEY_CONTEXT_INCLUDE_CREDENTIALS=t.ActorHttp=void 0;var n=r(0);class i extends n.Actor{constructor(e){super(e);}static toNodeReadable(e){return r(124)(e)?e:r(125).toNodeReadable(e);}static headersToHash(e){var t={};return e.forEach((e,r)=>{t[r]=e;}),t;}}t.ActorHttp=i,t.KEY_CONTEXT_INCLUDE_CREDENTIALS="@comunica/bus-http:include-credentials",t.KEY_CONTEXT_AUTH="@comunica/bus-http:auth";},function(e,t,r){var n=e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe;};n.writable=function(e){return n(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState;},n.readable=function(e){return n(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState;},n.duplex=function(e){return n.writable(e)&&n.readable(e);},n.transform=function(e){return n.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState;};},function(e,t,r){(function(t){var n=r(2).Readable,i=r(126).ReadableStream;t.ReadableStream=t.ReadableStream||i;var a=r(249);class s extends n{constructor(e,t){super(t),this._webStream=e,this._reader=e.getReader(),this._reading=!1;}_read(e){if(this._reading)return;this._reading=!0;var t=()=>{this._reader.read().then(r=>(this._doneReading&&(this._reading=!1,this._reader.releaseLock(),this._doneReading()),r.done?(this.push(null),this._reading=!1,void this._reader.releaseLock()):this.push(r.value)?t():(this._reading=!1,void this._reader.releaseLock())));};t();}_destroy(e,t){if(this._reading){new Promise(e=>{this._doneReading=e;}).then(()=>this._handleDestroy(e,t));}else this._handleDestroy(e,t);}_handleDestroy(e,t){this._webStream.cancel(),super._destroy(e,t);}}e.exports={readable:{nodeToWeb:a,arrayToWeb:function arrayToWeb(e){return new i({start(t){for(var r=0;r<e.length;r++){t.enqueue(e[r]);}t.close();}});},webToNode:function webToNode(e){return new s(e);}}};}).call(this,r(10));},function(e,t){e.exports=function(t){if(!e.exports.WEBSTREAM_SUPPORT)throw new Error("No web ReadableStream support");var r=!1,n={};return new ReadableStream({start:function start(e){for(var i in n.data=a,n.end=a,n.end=s,n.close=s,n.error=s,n){t.on(i,n[i]);}function a(n){r||(e.enqueue(n),t.pause());}function s(i){if(!r){for(var a in r=!0,n){t.removeListener(a,n[a]);}i?e.error(i):e.close();}}t.pause();},pull:function pull(){r||t.resume();},cancel:function cancel(){for(var e in r=!0,n){t.removeListener(e,n[e]);}t.push(null),t.pause(),t.destroy?t.destroy():t.close&&t.close();}});},e.exports.WEBSTREAM_SUPPORT="undefined"!=typeof ReadableStream;},function(e,t,r){/* ! @license MIT ©2013-2016 Ruben Verborgh, Ghent University - imec */Object.defineProperty(t,"__esModule",{value:!0});var n=r(22),i=r(2),a=r(127),s={"accept-encoding":!0,"user-agent":!0,referer:!0};t.default=class{constructor(){this.negotiatedResources={};}createRequest(e){this.negotiatedResources[this.removeQuery(e.url)]&&e.headers.delete("accept-datetime");var t=new XMLHttpRequest(),r=e.headers;t.open(e.method,e.url,!0),t.timeout=e.timeout,t.withCredentials=e.withCredentials,r.forEach((e,r)=>{!(r in s)&&e&&t.setRequestHeader(r,e);});var o=new n.EventEmitter();return o.abort=()=>{t.abort();},t.onload=()=>{var n,s;var u=new i.Readable();u.push(t.responseText||""),u.push(null),u.statusCode=t.status,u.responseUrl=t.responseURL;var c=this.convertRequestHeadersToFetchHeaders(u.headers);u.headers=c;var l=t.getAllResponseHeaders()||"",h=/^((?:(?![\n\r:])[\s\S])+):[\t ]*((?:(?![\n\r])[\s\S])*)$/gm;var d=h.exec(l);for(;d;){c.set(d[1].toLowerCase(),d[2]),d=h.exec(l);}if(o.emit("response",u),r.has("accept-datetime")&&c.has("memento-datetime")){var _t101=this.removeQuery(null!==(n=c.get("content-location"))&&void 0!==n?n:e.url);if(!this.negotiatedResources[_t101]){var _e77=null!==(s=c.get("link")&&a(c.get("link")))&&void 0!==s?s:void 0;_t101!==this.removeQuery(_e77&&_e77.timegate&&_e77.timegate.url)&&(this.negotiatedResources[_t101]=!0);}}},t.onerror=()=>{o.emit("error",new Error("Error requesting "+e.url));},t.ontimeout=()=>{o.emit("error",new Error("Timeout requesting "+e.url));},t.send(),o;}convertRequestHeadersToFetchHeaders(e){var t=new Headers();for(var _r94 in e){t.append(_r94,e[_r94]);}return t;}removeQuery(e){return e?e.replace(/\?(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*$/,""):"";}};},function(e,t,r){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t);}e.exports=function(e,t,r,a){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var o=/\+/g;e=e.split(t);var u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var h,d,p,f,g=e[l].replace(o,"%20"),m=g.indexOf(r);m>=0?(h=g.substr(0,m),d=g.substr(m+1)):(h=g,d=""),p=decodeURIComponent(h),f=decodeURIComponent(d),n(s,p)?i(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f;}return s;};var i=Array.isArray||function(e){return "[object Array]"===Object.prototype.toString.call(e);};},function(e,t,r){var n=function n(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return "";}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?a(s(e),function(s){var o=encodeURIComponent(n(s))+r;return i(e[s])?a(e[s],function(e){return o+encodeURIComponent(n(e));}).join(t):o+encodeURIComponent(n(e[s]));}).join(t):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(e)):"";};var i=Array.isArray||function(e){return "[object Array]"===Object.prototype.toString.call(e);};function a(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++){r.push(t(e[n],n));}return r;}var s=Object.keys||function(e){var t=[];for(var r in e){Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);}return t;};},function(e,t,r){var n=r(254),i=r(255);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null;}t.parse=_,t.resolve=function(e,t){return _(e,!1,!0).resolve(t);},t.resolveObject=function(e,t){return e?_(e,!1,!0).resolveObject(t):t;},t.format=function(e){i.isString(e)&&(e=_(e));return e instanceof a?e.format():a.prototype.format.call(e);},t.Url=a;var s=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),h=["%","/","?",";","#"].concat(l),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=r(128);function _(e,t,r){if(e&&i.isObject(e)&&e instanceof a)return e;var n=new a();return n.parse(e,t,r),n;}a.prototype.parse=function(e,t,r){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),o=-1!==a&&a<e.indexOf("#")?"?":"#",c=e.split(o);c[0]=c[0].replace(/\\/g,"/");var _=e=c.join(o);if(_=_.trim(),!r&&1===e.split("#").length){var v=u.exec(_);if(v)return this.path=_,this.href=_,this.pathname=v[1],v[2]?(this.search=v[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this;}var w=s.exec(_);if(w){var S=(w=w[0]).toLowerCase();this.protocol=S,_=_.substr(w.length);}if(r||w||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===_.substr(0,2);!T||w&&m[w]||(_=_.substr(2),this.slashes=!0);}if(!m[w]&&(T||w&&!y[w])){for(var E,x,O=-1,A=0;A<d.length;A++){-1!==(R=_.indexOf(d[A]))&&(-1===O||R<O)&&(O=R);}-1!==(x=-1===O?_.lastIndexOf("@"):_.lastIndexOf("@",O))&&(E=_.slice(0,x),_=_.slice(x+1),this.auth=decodeURIComponent(E)),O=-1;for(A=0;A<h.length;A++){var R;-1!==(R=_.indexOf(h[A]))&&(-1===O||R<O)&&(O=R);}-1===O&&(O=_.length),this.host=_.slice(0,O),_=_.slice(O),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var N=this.hostname.split(/\./),P=(A=0,N.length);A<P;A++){var C=N[A];if(C&&!C.match(p)){for(var D="",j=0,k=C.length;j<k;j++){C.charCodeAt(j)>127?D+="x":D+=C[j];}if(!D.match(p)){var L=N.slice(0,A),M=N.slice(A+1),F=C.match(f);F&&(L.push(F[1]),M.unshift(F[2])),M.length&&(_="/"+M.join(".")+_),this.hostname=L.join(".");break;}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=n.toASCII(this.hostname));var B=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+B,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_));}if(!g[S])for(A=0,P=l.length;A<P;A++){var U=l[A];if(-1!==_.indexOf(U)){var V=encodeURIComponent(U);V===U&&(V=escape(U)),_=_.split(U).join(V);}}var H=_.indexOf("#");-1!==H&&(this.hash=_.substr(H),_=_.slice(0,H));var G=_.indexOf("?");if(-1!==G?(this.search=_.substr(G),this.query=_.substr(G+1),t&&(this.query=b.parse(this.query)),_=_.slice(0,G)):t&&(this.search="",this.query={}),_&&(this.pathname=_),y[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var z=this.search||"";this.path=B+z;}return this.href=this.format(),this;},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",a=!1,s="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=b.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==a?(a="//"+(a||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):a||(a=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),t+a+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e);}))+(o=o.replace("#","%23"))+n;},a.prototype.resolve=function(e){return this.resolveObject(_(e,!1,!0)).format();},a.prototype.resolveObject=function(e){if(i.isString(e)){var t=new a();t.parse(e,!1,!0),e=t;}for(var r=new a(),n=Object.keys(this),s=0;s<n.length;s++){var o=n[s];r[o]=this[o];}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(r[l]=e[l]);}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){for(var h=Object.keys(e),d=0;d<h.length;d++){var p=h[d];r[p]=e[p];}return r.href=r.format(),r;}if(r.protocol=e.protocol,e.host||m[e.protocol])r.pathname=e.pathname;else {for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift());){}e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/");}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var g=r.pathname||"",b=r.search||"";r.path=g+b;}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r;}var _=r.pathname&&"/"===r.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=v||_||r.host&&e.pathname,S=w,T=r.pathname&&r.pathname.split("/")||[],E=(f=e.pathname&&e.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(E&&(r.hostname="",r.port=null,r.host&&(""===T[0]?T[0]=r.host:T.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),w=w&&(""===f[0]||""===T[0])),v)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,T=f;else if(f.length)T||(T=[]),T.pop(),T=T.concat(f),r.search=e.search,r.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(E)r.hostname=r.host=T.shift(),(I=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=I.shift(),r.host=r.hostname=I.shift());return r.search=e.search,r.query=e.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;}if(!T.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var x=T.slice(-1)[0],O=(r.host||e.host||T.length>1)&&("."===x||".."===x)||""===x,A=0,R=T.length;R>=0;R--){"."===(x=T[R])?T.splice(R,1):".."===x?(T.splice(R,1),A++):A&&(T.splice(R,1),A--);}if(!w&&!S)for(;A--;A){T.unshift("..");}!w||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),O&&"/"!==T.join("/").substr(-1)&&T.push("");var I,N=""===T[0]||T[0]&&"/"===T[0].charAt(0);E&&(r.hostname=r.host=N?"":T.length?T.shift():"",(I=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=I.shift(),r.host=r.hostname=I.shift()));return (w=w||r.host&&T.length)&&!N&&T.unshift(""),T.length?r.pathname=T.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r;},a.prototype.parseHost=function(){var e=this.host,t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e);};},function(e,t,r){(function(e,n){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(a){var o,u=2147483647,c=/^xn--/,l=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function g(e){throw new RangeError(d[e]);}function m(e,t){for(var r=e.length,n=[];r--;){n[r]=t(e[r]);}return n;}function y(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+m((e=e.replace(h,".")).split("."),t).join(".");}function b(e){for(var t,r,n=[],i=0,a=e.length;i<a;){(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);}return n;}function _(e){return m(e,function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=f(e);}).join("");}function v(e,t){return e+22+75*(e<26)-((0!=t)<<5);}function w(e,t,r){var n=0;for(e=r?p(e/700):e>>1,e+=p(e/t);e>455;n+=36){e=p(e/35);}return p(n+36*e/(e+38));}function S(e){var t,r,n,i,a,s,o,c,l,h,d,f=[],m=e.length,y=0,b=128,v=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n){e.charCodeAt(n)>=128&&g("not-basic"),f.push(e.charCodeAt(n));}for(i=r>0?r+1:0;i<m;){for(a=y,s=1,o=36;i>=m&&g("invalid-input"),((c=(d=e.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||c>p((u-y)/s))&&g("overflow"),y+=c*s,!(c<(l=o<=v?1:o>=v+26?26:o-v));o+=36){s>p(u/(h=36-l))&&g("overflow"),s*=h;}v=w(y-a,t=f.length+1,0==a),p(y/t)>u-b&&g("overflow"),b+=p(y/t),y%=t,f.splice(y++,0,b);}return _(f);}function T(e){var t,r,n,i,a,s,o,c,l,h,d,m,y,_,S,T=[];for(m=(e=b(e)).length,t=128,r=0,a=72,s=0;s<m;++s){(d=e[s])<128&&T.push(f(d));}for(n=i=T.length,i&&T.push("-");n<m;){for(o=u,s=0;s<m;++s){(d=e[s])>=t&&d<o&&(o=d);}for(o-t>p((u-r)/(y=n+1))&&g("overflow"),r+=(o-t)*y,t=o,s=0;s<m;++s){if((d=e[s])<t&&++r>u&&g("overflow"),d==t){for(c=r,l=36;!(c<(h=l<=a?1:l>=a+26?26:l-a));l+=36){S=c-h,_=36-h,T.push(f(v(h+S%_,0))),c=p(S/_);}T.push(f(v(c,0))),a=w(r,y,n==i),r=0,++n;}}++r,++t;}return T.join("");}o={version:"1.4.1",ucs2:{decode:b,encode:_},decode:S,encode:T,toASCII:function toASCII(e){return y(e,function(e){return l.test(e)?"xn--"+T(e):e;});},toUnicode:function toUnicode(e){return y(e,function(e){return c.test(e)?S(e.slice(4).toLowerCase()):e;});}},void 0===(i=function(){return o;}.call(t,r,t,e))||(e.exports=i);}();}).call(this,r(101)(e),r(10));},function(e,t,r){e.exports={isString:function isString(e){return "string"==typeof e;},isObject:function isObject(e){return "object"==typeof e&&null!==e;},isNull:function isNull(e){return null===e;},isNullOrUndefined:function isNullOrUndefined(e){return null==e;}};},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n){r.call(n,i)&&(e[i]=n[i]);}}return e;};var r=Object.prototype.hasOwnProperty;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActionObserverHttp=void 0;var n=r(0);class i extends n.ActionObserver{constructor(e){super(e),this.requests=0,this.bus.subscribeObserver(this);}onRun(e,t,r){this.requests++;}}t.ActionObserverHttp=i;},function(e,t,r){(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorSparqlSerializeStats=void 0;var n=r(2),i=r(15);class a extends i.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e);}testHandleChecked(e,t){return _asyncToGenerator(function*(){if(!["bindings","quads"].includes(e.type))throw new Error("This actor can only handle bindings streams or quad streams.");return !0;})();}pushHeader(e){var t=["Result","Delay (ms)","HTTP requests"].join(",");e.push(t+"\n");}pushStat(e,t,r){var n=[r,this.delay(t),this.httpObserver.requests].join(",");e.push(n+"\n");}pushFooter(e,t){var r=["TOTAL",this.delay(t),this.httpObserver.requests].join(",");e.push(r+"\n"),e.push(null);}runHandle(t,r,i){var _this53=this;return _asyncToGenerator(function*(){var a=new n.Readable();a._read=()=>{};var s="bindings"===t.type?t.bindingsStream:t.quadStream,o=e.hrtime();var u=1;return _this53.pushHeader(a),s.on("error",e=>a.emit("error",e)),s.on("data",()=>_this53.pushStat(a,o,u++)),s.on("end",()=>_this53.pushFooter(a,o)),{data:a};})();}delay(t){var r=e.hrtime(t);return 1e3*r[0]+r[1]/1e6;}}t.ActorSparqlSerializeStats=a;}).call(this,r(8));},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.MediatorRace=void 0;var n=r(0);class i extends n.Mediator{constructor(e){super(e);}mediateWith(e,t){var _this54=this;return new Promise((e,r)=>{var n=[];var _loop5=function _loop5(_i42){_i42.reply.then(()=>{e(_i42.actor);}).catch(e=>{n.push(e),n.length===t.length&&r(new Error(_this54.name+" mediated over all rejecting actors:\n"+n.map(e=>e.message).join("\n")));});};for(var _i42 of t){_loop5(_i42);}});}}t.MediatorRace=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(261),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinSymmetricHash=void 0;var n=r(1),i=r(55),a=r(130);class s extends i.ActorRdfJoin{constructor(e){super(e,2);}static hash(e,t){return t.filter(t=>e.has(t)).map(t=>e.get(t).value).join("");}getOutput(e){return _asyncToGenerator(function*(){var t=i.ActorRdfJoin.overlappingVariables(e);return {type:"bindings",bindingsStream:new a.SymmetricHashJoin(e.entries[0].bindingsStream,e.entries[1].bindingsStream,e=>s.hash(e,t),i.ActorRdfJoin.join),variables:i.ActorRdfJoin.joinVariables(e),canContainUndefs:!1};})();}getIterations(e){return _asyncToGenerator(function*(){return (yield n.getMetadata(e.entries[0])).totalItems+(yield n.getMetadata(e.entries[1])).totalItems;})();}}t.ActorRdfJoinSymmetricHash=s;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoin=void 0;var n=r(0),i=r(3);class a extends n.Actor{constructor(e,t,r,n){super(e),this.limitEntries=null!=t?t:1/0,this.limitEntriesMin=null!=r&&r,this.canHandleUndefs=null!=n&&n;}static overlappingVariables(e){var t=e.entries.map(e=>e.variables);var r=t[0];var _loop6=function _loop6(_e78){r=r.filter(t=>_e78.includes(t));};for(var _e78 of t.slice(1)){_loop6(_e78);}return r;}static joinVariables(e){var t=e.entries.map(e=>e.variables).reduce((e,t)=>[...e,...t],[]);return [...new Set(t)];}static join(){try{for(var _len2=arguments.length,e=new Array(_len2),_key2=0;_key2<_len2;_key2++){e[_key2]=arguments[_key2];}return e.reduce((e,t)=>e.mergeWith((e,t)=>{if(!e.equals(t))throw new Error("Join failure");return e;},t));}catch(e){return null;}}static iteratorsHaveMetadata(e,t){return _asyncToGenerator(function*(){return Promise.all(e.entries.map(/*#__PURE__*/function(){var _ref50=_asyncToGenerator(function*(e){if(!e.metadata)throw new Error("Missing metadata");var r=yield e.metadata();if(!(t in r))throw new Error("Missing metadata value");});return function(_x10){return _ref50.apply(this,arguments);};}())).then(()=>!0).catch(()=>!1);})();}test(e){var _this55=this;return _asyncToGenerator(function*(){if(e.entries.length<=1)return {iterations:0};if(_this55.limitEntriesMin?e.entries.length<_this55.limitEntries:e.entries.length>_this55.limitEntries)throw new Error(_this55.name+" requires "+_this55.limitEntries+" sources at "+(_this55.limitEntriesMin?"least":"most")+". The input contained "+e.entries.length+".");for(var _t102 of e.entries){if("bindings"!==_t102.type)throw new Error("Invalid type of a join entry: Expected 'bindings' but got '"+_t102.type+"'");}if(!_this55.canHandleUndefs)for(var _t103 of e.entries){if(_t103.canContainUndefs)throw new Error("Actor "+_this55.name+" can not join streams containing undefs");}return (yield a.iteratorsHaveMetadata(e,"totalItems"))?{iterations:yield _this55.getIterations(e)}:{iterations:1/0};})();}run(e){var _this56=this;return _asyncToGenerator(function*(){if(0===e.entries.length)return {bindingsStream:new i.ArrayIterator([],{autoStart:!1}),metadata:()=>Promise.resolve({totalItems:0}),type:"bindings",variables:[],canContainUndefs:!1};if(1===e.entries.length)return e.entries[0];var t=_this56.getOutput(e);function r(){return Promise.all(e.entries.map(e=>e.metadata())).then(e=>e.reduce((e,t)=>e*t.totalItems,1));}if(yield a.iteratorsHaveMetadata(e,"totalItems")){var _e79=yield t;if(_e79.metadata){var _t104=_e79.metadata;_e79.metadata=()=>_t104().then(/*#__PURE__*/function(){var _ref51=_asyncToGenerator(function*(e){return "totalItems"in e||(e.totalItems=yield r()),e;});return function(_x11){return _ref51.apply(this,arguments);};}());}else _e79.metadata=()=>r().then(e=>({totalItems:e}));return _e79;}return t;})();}}t.ActorRdfJoin=a;},function(e,t,r){var n=r(3),i=n.MultiTransformIterator,a=n.SimpleTransformIterator;e.exports=class extends i{constructor(e,t,r){super(e),this.funRight=t,this.funJoin=r;}_createTransformer(e){return new a(this.funRight(e),{transform:(t,r)=>{var n=this.funJoin(e,t);null!==n&&this._push(n),r();}});}};},function(e,t,r){var n=r(3).AsyncIterator;e.exports=class extends n{constructor(e,t,r,n){super(),this.addedDataListener=!1,this.left=e,this.right=t,this.funHash=r,this.funJoin=n,this.leftMap=new Map(),this.match=null,this.matches=[],this.matchIdx=0,this.readable=!1,this.left.on("end",function(){if(this.leftMap.size<=0)return this.close();this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end();});}.bind(this)),this.on("newListener",e=>{"data"!==e||this.addedDataListener||(this.addedDataListener=!0,this._addDataListener());});}hasResults(){return !this.right.ended||this.matchIdx<this.matches.length;}close(){super.close(),this.left.close(),this.right.close();}read(){if(this.addedDataListener||(this.addedDataListener=!0,this._addDataListener()),this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){var _e80=this.matches[this.matchIdx++],_t105=this.funJoin(_e80,this.match);if(null!==_t105)return _t105;}if(this.hasResults()||this._end(),this.match=this.right.read(),null===this.match)return this.readable=!1,null;var e=this.funHash(this.match);return this.matches=this.leftMap.get(e)||[],this.matchIdx=0,this.read();}_addDataListener(){this.left.on("data",function(e){var t=this.funHash(e);this.leftMap.has(t)||this.leftMap.set(t,[]);this.leftMap.get(t).push(e);}.bind(this));}};},function(e,t,r){var n=r(3),i=n.MultiTransformIterator,a=n.SimpleTransformIterator;e.exports=class extends i{constructor(e,t,r,n){super(e,n),this.right=t,this.funJoin=r,this.on("end",()=>this.right.close());}close(){super.close(),this.right.close();}_createTransformer(e){return new a(this.right.clone(),{transform:(t,r)=>{var n=this.funJoin(e,t);null!==n&&this._push(n),r();}});}};},function(e,t,r){var n=r(3).AsyncIterator;e.exports=class extends n{constructor(e,t,r,n){super(),this.left=e,this.right=t,this.funHash=r,this.funJoin=n,this.usedLeft=!1,this.leftMap=new Map(),this.rightMap=new Map(),this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end();}),this.right.on("end",()=>{this.hasResults()||this._end();});}hasResults(){return !this.left.ended||!this.right.ended||this.matchIdx<this.matches.length;}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null;}close(){super.close(),this.left.close(),this.right.close();}read(){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){var _e81=this.matches[this.matchIdx++],_t106=this.usedLeft?this.funJoin(this.match,_e81):this.funJoin(_e81,this.match);if(null!==_t106)return _t106;}this.hasResults()||this._end();var e=null;for(var _t107=0;_t107<2&&(e=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,null===e);++_t107){}if(null===e)return this.readable=!1,null;var t=this.funHash(e),r=this.usedLeft?this.leftMap:this.rightMap;return r.has(t)||r.set(t,[]),r.get(t).push(e),this.match=e,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(t)||[],this.matchIdx=0,this.read();}};},function(e,t,r){var n=r(3).AsyncIterator;e.exports=class extends n{constructor(e){var _this57;(super(),_this57=this),Array.isArray(e)||(e=Array.prototype.slice.call(arguments)),this.streams=e;var _loop7=function _loop7(_t108){_t108.on("readable",()=>_this57.emit("readable")),_t108.on("end",()=>_this57._removeStream(_t108));};for(var _t108 of e){_loop7(_t108);}0===this.streams.length&&this.close(),this.idx=this.streams.length-1;}_removeStream(e){var t=this.streams.indexOf(e);t<0||(this.streams.splice(t,1),this.idx>=this.streams.length&&--this.idx,0===this.streams.length&&this._end());}close(){super.close();for(var _e82 of this.streams){_e82.close();}}read(){for(var _e83=0;_e83<this.streams.length;++_e83){this.idx=(this.idx+1)%this.streams.length;var _e84=this.streams[this.idx].read();if(null!==_e84)return _e84;}return null;}};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(269),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinNestedLoop=void 0;var n=r(1),i=r(55),a=r(130);class s extends i.ActorRdfJoin{constructor(e){super(e,2,void 0,!0);}getOutput(e){return _asyncToGenerator(function*(){return {type:"bindings",bindingsStream:new a.NestedLoopJoin(e.entries[0].bindingsStream,e.entries[1].bindingsStream,i.ActorRdfJoin.join,{autoStart:!1}),variables:i.ActorRdfJoin.joinVariables(e),canContainUndefs:e.entries.reduce((e,t)=>e||t.canContainUndefs,!1)};})();}getIterations(e){return _asyncToGenerator(function*(){return (yield n.getMetadata(e.entries[0])).totalItems*(yield n.getMetadata(e.entries[1])).totalItems;})();}}t.ActorRdfJoinNestedLoop=s;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.MediatorCombineUnion=void 0;var n=r(0);class i extends n.Mediator{constructor(e){super(e),this.combiner=this.createCombiner();}mediate(e){var _this58=this;return _asyncToGenerator(function*(){var t;try{t=_this58.publish(e);}catch(e){t=[];}yield Promise.all(t.map(_ref52=>{var{reply:e}=_ref52;return e;}));var r=yield Promise.all(t.map(t=>t.actor.runObservable(e)));return _this58.combiner(r);})();}mediateWith(){throw new Error("Method not supported.");}createCombiner(){return e=>{var t={};return t[this.field]={},[{}].concat(e.map(e=>e[this.field])).forEach((e,r,n)=>{t[this.field]=Object.assign(Object.assign({},e),t[this.field]);}),t;};}}t.MediatorCombineUnion=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(272),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfParseN3=void 0;var n=r(46),i=r(41);class a extends n.ActorRdfParseFixedMediaTypes{constructor(e){super(e);}runHandle(e,t,r){return _asyncToGenerator(function*(){e.input.on("error",e=>n.emit("error",e));var n=e.input.pipe(new i.StreamParser({baseIRI:e.baseIRI}));return {quads:n,triples:"text/turtle"===t||"application/n-triples"===t||"text/n3"===t};})();}}t.ActorRdfParseN3=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfParse=void 0;var n=r(34);class i extends n.ActorAbstractMediaTyped{constructor(e){super(e);}}t.ActorRdfParse=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfParseFixedMediaTypes=void 0;var n=r(34);class i extends n.ActorAbstractMediaTypedFixed{constructor(e){super(e);}testHandleChecked(e){return _asyncToGenerator(function*(){return !0;})();}}t.ActorRdfParseFixedMediaTypes=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(276),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfParseRdfXml=void 0;var n=r(46),i=r(277);class a extends n.ActorRdfParseFixedMediaTypes{constructor(e){super(e);}runHandle(e,t,r){return _asyncToGenerator(function*(){e.input.on("error",e=>n.emit("error",e));var n=e.input.pipe(new i.RdfXmlParser({baseIRI:e.baseIRI}));return {quads:n,triples:!0};})();}}t.ActorRdfParseRdfXml=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e){t.hasOwnProperty(r)||(t[r]=e[r]);}}(r(278));},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(13),i=r(131),a=r(2),s=r(280),o=r(5);class u extends a.Transform{constructor(e){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},e&&(Object.assign(this,e),this.options=e),this.dataFactory||(this.dataFactory=new o.DataFactory()),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=i.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners();}static parseNamespace(e,t){var r={};var n=!1;for(var _t109 in e.attributes){_t109.startsWith("xmlns")&&(5===_t109.length?(n=!0,r[""]=e.attributes[_t109]):":"===_t109.charAt(5)&&(n=!0,r[_t109.substr(6)]=e.attributes[_t109]));}var i=t&&t.ns?t.ns:[u.DEFAULT_NS];return n?i.concat([r]):i;}static expandPrefixedTerm(e,t,r){var n=e.indexOf(":");var i,a;n>=0?(i=e.substr(0,n),a=e.substr(n+1)):(i="",a=e);var o=null,u=null;for(var _e85=t.length-1;_e85>=0;_e85--){var _r95=t[_e85][i];if(_r95){o=_r95;break;}u||(u=t[_e85][""]);}if(!o){if(i&&"xmlns"!==i)throw new s.ParseError(r,"The prefix '"+i+"' in term '"+e+"' was not bound.");o=u||"";}return {prefix:i,local:a,uri:o};}static isValidIri(e){return u.IRI_REGEX.test(e);}import(e){var t=new a.PassThrough({readableObjectMode:!0});e.on("error",e=>r.emit("error",e)),e.on("data",e=>t.push(e)),e.on("end",()=>t.push(null));var r=t.pipe(new u(this.options));return r;}_transform(e,t,r){try{this.saxStream.write(e,t);}catch(e){return r(e);}r();}newParseError(e){return new s.ParseError(this,e);}valueToUri(e,t){return this.uriToNamedNode(n.resolve(e,t.baseIRI));}uriToNamedNode(e){if(!u.isValidIri(e))throw this.newParseError("Invalid URI: "+e);return this.dataFactory.namedNode(e);}validateNcname(e){if(!u.NCNAME_MATCHER.test(e))throw this.newParseError("Not a valid NCName: "+e);}attachSaxListeners(){this.saxStream.on("error",e=>this.emit("error",e)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this));}onTag(e){var t=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;var r=c.RESOURCE;if(t&&(t.hadChildren=!0,r=t.childrenParseType),t&&t.childrenStringTags){var _r96=e.name;var _n64="";for(var _t110 in e.attributes){_n64+=" "+_t110+"=\""+e.attributes[_t110]+"\"";}var _i43="<"+(""+_r96+_n64)+">";t.childrenStringTags.push(_i43);var _a23={childrenStringTags:t.childrenStringTags};return _a23.childrenStringEmitClosingTag="</"+_r96+">",void this.activeTagStack.push(_a23);}var n={};t?(n.language=t.language,n.baseIRI=t.baseIRI):n.baseIRI=this.baseIRI,this.activeTagStack.push(n),n.ns=u.parseNamespace(e,t),r===c.RESOURCE?this.onTagResource(e,n,t,!t):this.onTagProperty(e,n,t);}onTagResource(e,t,r,i){var a=u.expandPrefixedTerm(e.name,t.ns,this);t.childrenParseType=c.PROPERTY;var s=!0;if(a.uri===u.RDF){if(!i&&u.FORBIDDEN_NODE_ELEMENTS.indexOf(a.local)>=0)throw this.newParseError("Illegal node element name: "+a.local);switch(a.local){case"RDF":t.childrenParseType=c.RESOURCE;case"Description":s=!1;}}var o=[],l=[];var h=null,d=!1,p=!1,f=null;for(var _i44 in e.attributes){var _a24=e.attributes[_i44],_s14=u.expandPrefixedTerm(_i44,t.ns,this);if(r&&_s14.uri===u.RDF)switch(_s14.local){case"about":if(h)throw this.newParseError("Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while "+_a24+" and "+h+" where found.");h=_a24;continue;case"ID":if(h)throw this.newParseError("Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while "+_a24+" and "+h+" where found.");this.validateNcname(_a24),h="#"+_a24,d=!0;continue;case"nodeID":if(h)throw this.newParseError("Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while "+_a24+" and "+h+" where found.");this.validateNcname(_a24),h=_a24,p=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":f=_a24;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.");}else if(_s14.uri===u.XML){if("lang"===_s14.local){t.language=""===_a24?null:_a24.toLowerCase();continue;}if("base"===_s14.local){t.baseIRI=n.resolve(_a24,t.baseIRI);continue;}}"xml"!==_s14.prefix&&_s14.uri&&(o.push(this.uriToNamedNode(_s14.uri+_s14.local)),l.push(_a24));}if(null!==h&&(t.subject=p?this.dataFactory.blankNode(h):this.valueToUri(h,t),d&&this.claimNodeId(t.subject)),t.subject||(t.subject=this.dataFactory.blankNode()),s){var _e86=this.uriToNamedNode(a.uri+a.local);this.emitTriple(t.subject,this.dataFactory.namedNode(u.RDF+"type"),_e86,r?r.reifiedStatementId:null);}if(r){if(r.predicate)if(r.childrenCollectionSubject){var _e87=this.dataFactory.blankNode();this.emitTriple(r.childrenCollectionSubject,r.childrenCollectionPredicate,_e87,r.reifiedStatementId),this.emitTriple(_e87,this.dataFactory.namedNode(u.RDF+"first"),t.subject,t.reifiedStatementId),r.childrenCollectionSubject=_e87,r.childrenCollectionPredicate=this.dataFactory.namedNode(u.RDF+"rest");}else {this.emitTriple(r.subject,r.predicate,t.subject,r.reifiedStatementId);for(var _e88=0;_e88<r.predicateSubPredicates.length;_e88++){this.emitTriple(t.subject,r.predicateSubPredicates[_e88],r.predicateSubObjects[_e88],null);}r.predicateSubPredicates=[],r.predicateSubObjects=[],r.predicateEmitted=!0;}for(var _e89=0;_e89<o.length;_e89++){var _n65=this.dataFactory.literal(l[_e89],t.datatype||t.language);this.emitTriple(t.subject,o[_e89],_n65,r.reifiedStatementId);}f&&this.emitTriple(t.subject,this.dataFactory.namedNode(u.RDF+"type"),this.uriToNamedNode(f),null);}}onTagProperty(e,t,r){var n=u.expandPrefixedTerm(e.name,t.ns,this);if(t.childrenParseType=c.RESOURCE,t.subject=r.subject,n.uri===u.RDF&&"li"===n.local?(r.listItemCounter||(r.listItemCounter=1),t.predicate=this.uriToNamedNode(n.uri+"_"+r.listItemCounter++)):t.predicate=this.uriToNamedNode(n.uri+n.local),n.uri===u.RDF&&u.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(n.local)>=0)throw this.newParseError("Illegal property element name: "+n.local);t.predicateSubPredicates=[],t.predicateSubObjects=[];var i=!1,a=!1,s=null,o=!0;var l=[],h=[];for(var _r97 in e.attributes){var _n66=e.attributes[_r97],d=u.expandPrefixedTerm(_r97,t.ns,this);if(d.uri===u.RDF)switch(d.local){case"resource":if(s)throw this.newParseError("Found both rdf:resource ("+_n66+") and rdf:nodeID ("+s+").");if(i)throw this.newParseError("rdf:parseType is not allowed on property elements with rdf:resource ("+_n66+")");t.hadChildren=!0,s=_n66,o=!1;continue;case"datatype":if(a)throw this.newParseError("Found both non-rdf:* property attributes and rdf:datatype ("+_n66+").");if(i)throw this.newParseError("rdf:parseType is not allowed on property elements with rdf:datatype ("+_n66+")");t.datatype=this.valueToUri(_n66,t);continue;case"nodeID":if(a)throw this.newParseError("Found both non-rdf:* property attributes and rdf:nodeID ("+_n66+").");if(t.hadChildren)throw this.newParseError("Found both rdf:resource and rdf:nodeID ("+_n66+").");if(i)throw this.newParseError("rdf:parseType is not allowed on property elements with rdf:nodeID ("+_n66+")");this.validateNcname(_n66),t.hadChildren=!0,s=_n66,o=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(a)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(t.datatype)throw this.newParseError("rdf:parseType is not allowed on property elements with rdf:datatype ("+t.datatype.value+")");if(s)throw this.newParseError("rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource ("+s+")");if("Resource"===_n66){i=!0,t.childrenParseType=c.PROPERTY;var _e90=this.dataFactory.blankNode();this.emitTriple(t.subject,t.predicate,_e90,t.reifiedStatementId),t.subject=_e90,t.predicate=null;}else "Collection"===_n66?(i=!0,t.hadChildren=!0,t.childrenCollectionSubject=t.subject,t.childrenCollectionPredicate=t.predicate,o=!1):"Literal"===_n66&&(i=!0,t.childrenTagsToString=!0,t.childrenStringTags=[]);continue;case"ID":this.validateNcname(_n66),t.reifiedStatementId=this.valueToUri("#"+_n66,t),this.claimNodeId(t.reifiedStatementId);continue;}else if(d.uri===u.XML&&"lang"===d.local){t.language=""===_n66?null:_n66.toLowerCase();continue;}if("xml"!==d.prefix&&"xmlns"!==d.prefix&&d.uri){if(i||t.datatype)throw this.newParseError("Found illegal rdf:* properties on property element with attribute: "+_n66);t.hadChildren=!0,a=!0,l.push(this.uriToNamedNode(d.uri+d.local)),h.push(this.dataFactory.literal(_n66,t.datatype||t.language));}}if(null!==s){var _e91=t.subject;t.subject=o?this.dataFactory.blankNode(s):this.valueToUri(s,t),this.emitTriple(_e91,t.predicate,t.subject,t.reifiedStatementId);for(var _e92=0;_e92<l.length;_e92++){this.emitTriple(t.subject,l[_e92],h[_e92],null);}t.predicateEmitted=!0;}else o&&(t.predicateSubPredicates=l,t.predicateSubObjects=h,t.predicateEmitted=!1);}emitTriple(e,t,r,n){this.push(this.dataFactory.quad(e,t,r,this.defaultGraph)),n&&(this.push(this.dataFactory.quad(n,this.dataFactory.namedNode(u.RDF+"type"),this.dataFactory.namedNode(u.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(n,this.dataFactory.namedNode(u.RDF+"subject"),e,this.defaultGraph)),this.push(this.dataFactory.quad(n,this.dataFactory.namedNode(u.RDF+"predicate"),t,this.defaultGraph)),this.push(this.dataFactory.quad(n,this.dataFactory.namedNode(u.RDF+"object"),r,this.defaultGraph)));}claimNodeId(e){if(!this.allowDuplicateRdfIds){if(this.nodeIds[e.value])throw this.newParseError("Found multiple occurrences of rdf:ID='"+e.value+"'.");this.nodeIds[e.value]=!0;}}onText(e){var t=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;t&&(t.childrenStringTags?t.childrenStringTags.push(e):t.predicate&&(t.text=e));}onCloseTag(){var e=this.activeTagStack.pop();if(e.childrenStringEmitClosingTag&&e.childrenStringTags.push(e.childrenStringEmitClosingTag),e.childrenTagsToString&&(e.datatype=this.dataFactory.namedNode(u.RDF+"XMLLiteral"),e.text=e.childrenStringTags.join(""),e.hadChildren=!1),e.childrenCollectionSubject)this.emitTriple(e.childrenCollectionSubject,e.childrenCollectionPredicate,this.dataFactory.namedNode(u.RDF+"nil"),e.reifiedStatementId);else if(e.predicate)if(e.hadChildren||e.childrenParseType===c.PROPERTY){if(!e.predicateEmitted){var _t111=this.dataFactory.blankNode();this.emitTriple(e.subject,e.predicate,_t111,e.reifiedStatementId);for(var _r98=0;_r98<e.predicateSubPredicates.length;_r98++){this.emitTriple(_t111,e.predicateSubPredicates[_r98],e.predicateSubObjects[_r98],null);}}}else this.emitTriple(e.subject,e.predicate,this.dataFactory.literal(e.text||"",e.datatype||e.language),e.reifiedStatementId);}onDoctype(e){e.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(e,t,r)=>(this.saxStream._parser.ENTITIES[t]=r,""));}}var c;t.RdfXmlParser=u,u.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,u.MIME_TYPE="application/rdf+xml",u.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",u.XML="http://www.w3.org/XML/1998/namespace",u.XMLNS="http://www.w3.org/2000/xmlns/",u.DEFAULT_NS={xml:u.XML},u.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],u.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],u.NCNAME_MATCHER=/^((?:[A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF]))((?:[#\x2D\.0-9A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF]))*$/,function(e){e[e.RESOURCE=0]="RESOURCE",e[e.PROPERTY=1]="PROPERTY";}(c=t.ParseType||(t.ParseType={}));},function(e,t,r){function n(e){var t=[];var r=0;for(;r<e.length;){switch(e[r]){case"/":if("."===e[r+1]){if("."===e[r+2]){if(!a(e[r+3])){t.push([]),r++;break;}t.pop(),e[r+3]||t.push([]),r+=3;}else {if(!a(e[r+2])){t.push([]),r++;break;}e[r+2]||t.push([]),r+=2;}}else t.push([]),r++;break;case"#":case"?":t.length||t.push([]),t[t.length-1].push(e.substr(r)),r=e.length;break;default:t.length||t.push([]),t[t.length-1].push(e[r]),r++;}}return "/"+t.map(e=>e.join("")).join("/");}function i(e,t){var r=t+1;t>=0?"/"===e[t+1]&&"/"===e[t+2]&&(r=t+3):"/"===e[0]&&"/"===e[1]&&(r=2);var i=e.indexOf("/",r);if(i<0)return e;return e.substr(0,i)+n(e.substr(i));}function a(e){return !e||"#"===e||"?"===e||"/"===e;}Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=function(e,t){var r=(t=t||"").indexOf("#");if(r>0&&(t=t.substr(0,r)),!e.length){if(t.indexOf(":")<0)throw new Error("Found invalid baseIRI '"+t+"' for value '"+e+"'");return t;}if(e.startsWith("?")){var _r99=t.indexOf("?");return _r99>0&&(t=t.substr(0,_r99)),t+e;}if(e.startsWith("#"))return t+e;if(!t.length){var _t112=e.indexOf(":");if(_t112<0)throw new Error("Found invalid relative IRI '"+e+"' for a missing baseIRI");return i(e,_t112);}var a=e.indexOf(":");if(a>=0)return i(e,a);var s=t.indexOf(":");if(s<0)throw new Error("Found invalid baseIRI '"+t+"' for value '"+e+"'");var o=t.substr(0,s+1);if(0===e.indexOf("//"))return o+i(e,a);var u;if(t.indexOf("//",s)===s+1){if(u=t.indexOf("/",s+3),u<0)return t.length>s+3?t+"/"+i(e,a):o+i(e,a);}else if(u=t.indexOf("/",s+1),u<0)return o+i(e,a);if(0===e.indexOf("/"))return t.substr(0,u)+n(e);var c=t.substr(u);var l=c.lastIndexOf("/");return l>=0&&l<c.length-1&&(c=c.substr(0,l+1),"."===e[0]&&"."!==e[1]&&"/"!==e[1]&&e[2]&&(e=e.substr(1))),e=n(e=c+e),t.substr(0,u)+e;},t.removeDotSegments=n,t.removeDotSegmentsOfPath=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e,t){var r=e.saxStream._parser;super(e.trackPosition?"Line "+(r.line+1)+" column "+(r.column+1)+": "+t:t);}}t.ParseError=n;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(282),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfParseXmlRdfa=void 0;var n=r(46),i=r(283);class a extends n.ActorRdfParseFixedMediaTypes{constructor(e){super(e);}runHandle(e,t,r){return _asyncToGenerator(function*(){var n;var a=null!==(n=e.headers&&e.headers.get("content-language"))&&void 0!==n?n:void 0;e.input.on("error",e=>s.emit("error",e));var s=e.input.pipe(new i.RdfaParser({baseIRI:e.baseIRI,profile:"xml",language:a}));return {quads:s,triples:!0};})();}}t.ActorRdfParseXmlRdfa=a;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(284),t),i(r(285),t),i(r(286),t),i(r(287),t),i(r(79),t),i(r(139),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.RdfaParser=void 0;var n=r(288),i=r(2),a=r(301),s=r(302),o=r(79),u=r(139);class c extends i.Transform{constructor(e){super({readableObjectMode:!0}),this.activeTagStack=[],e=e||{},this.options=e,this.util=new u.Util(e.dataFactory,e.baseIRI),this.defaultGraph=e.defaultGraph||this.util.dataFactory.defaultGraph();var t=e.contentType?u.Util.contentTypeToProfile(e.contentType):e.profile||"";this.features=e.features||o.RDFA_FEATURES[t],this.htmlParseListener=e.htmlParseListener,this.rdfaPatterns=this.features.copyRdfaPatterns?{}:null,this.pendingRdfaPatternCopies=this.features.copyRdfaPatterns?{}:null,this.parser=this.initializeParser("xml"===t),this.activeTagStack.push({incompleteTriples:[],inlist:!1,language:e.language,listMapping:{},listMappingLocal:{},name:"",prefixesAll:Object.assign(Object.assign({},s["@context"]),this.features.xhtmlInitialContext?a["@context"]:{}),prefixesCustom:{},skipElement:!1,vocab:e.vocab});}import(e){var t=new i.PassThrough({readableObjectMode:!0});e.on("error",e=>r.emit("error",e)),e.on("data",e=>t.push(e)),e.on("end",()=>t.push(null));var r=t.pipe(new c(this.options));return r;}_transform(e,t,r){this.parser.write(e),r();}_flush(e){this.parser.end(),e();}onTagOpen(e,t){var r=this.activeTagStack.length-1;for(;r>0&&this.activeTagStack[r].skipElement;){r--;}var n=this.activeTagStack[r];r!==this.activeTagStack.length-1&&(n=Object.assign(Object.assign({},n),{language:this.activeTagStack[this.activeTagStack.length-1].language,prefixesAll:this.activeTagStack[this.activeTagStack.length-1].prefixesAll,prefixesCustom:this.activeTagStack[this.activeTagStack.length-1].prefixesCustom,vocab:this.activeTagStack[this.activeTagStack.length-1].vocab}));var i={collectChildTags:n.collectChildTags,incompleteTriples:[],inlist:"inlist"in t,listMapping:[],listMappingLocal:n.listMapping,localBaseIRI:n.localBaseIRI,name:e,prefixesAll:null,prefixesCustom:null,skipElement:!1};if(this.activeTagStack.push(i),i.collectChildTags){for(var _e93 of Object.keys(n.prefixesCustom).sort()){var _r101=n.prefixesCustom[_e93],_i45=""===_e93?"xmlns":"xmlns:"+_e93;_i45 in t||(t[_i45]=_r101);}var _r100=Object.keys(t).map(e=>e+"=\""+t[e]+"\"").join(" ");if(i.text=["<"+e+(_r100?" "+_r100:"")+">"],this.features.skipHandlingXmlLiteralChildren)return;}var a,s,o,c=!0,l=!0;if(this.features.onlyAllowUriRelRevIfProperty&&("property"in t&&"rel"in t&&(c=!1,t.rel.indexOf(":")<0&&delete t.rel),"property"in t&&"rev"in t&&(l=!1,t.rev.indexOf(":")<0&&delete t.rev)),this.features.copyRdfaPatterns){if(n.collectedPatternTag){var _r102={attributes:t,children:[],name:e,referenced:!1,rootPattern:!1,text:[]};return n.collectedPatternTag.children.push(_r102),void(i.collectedPatternTag=_r102);}if("rdfa:Pattern"===t.typeof)return void(i.collectedPatternTag={attributes:t,children:[],name:e,parentTag:n,referenced:!1,rootPattern:!0,text:[]});if("rdfa:copy"===t.property){var _e94=t.resource||t.href||t.src;return void(this.rdfaPatterns[_e94]?this.emitPatternCopy(n,this.rdfaPatterns[_e94],_e94):(this.pendingRdfaPatternCopies[_e94]||(this.pendingRdfaPatternCopies[_e94]=[]),this.pendingRdfaPatternCopies[_e94].push(n)));}}if(this.features.baseTag&&"base"===e&&t.href&&(this.util.baseIRI=this.util.getBaseIRI(t.href)),this.features.xmlBase&&t["xml:base"]&&(i.localBaseIRI=this.util.getBaseIRI(t["xml:base"])),this.features.timeTag&&"time"===e&&!t.datatype&&(i.interpretObjectAsTime=!0),"vocab"in t?t.vocab?(i.vocab=t.vocab,this.emitTriple(this.util.getBaseIriTerm(i),this.util.dataFactory.namedNode(u.Util.RDFA+"usesVocabulary"),this.util.dataFactory.namedNode(i.vocab))):i.vocab=this.activeTagStack[0].vocab:i.vocab=n.vocab,i.prefixesCustom=u.Util.parsePrefixes(t,n.prefixesCustom,this.features.xmlnsPrefixMappings),i.prefixesAll=Object.keys(i.prefixesCustom).length>0?Object.assign(Object.assign({},n.prefixesAll),i.prefixesCustom):n.prefixesAll,this.features.roleAttribute&&t.role){var _e95=t.id?this.util.createIri("#"+t.id,i,!1,!1,!1):this.util.createBlankNode(),_r103=i.vocab;i.vocab="http://www.w3.org/1999/xhtml/vocab#";for(var _r104 of this.util.createVocabIris(t.role,i,!0,!1)){this.emitTriple(_e95,this.util.dataFactory.namedNode("http://www.w3.org/1999/xhtml/vocab#role"),_r104);}i.vocab=_r103;}"xml:lang"in t||this.features.langAttribute&&"lang"in t?i.language=t["xml:lang"]||t.lang:i.language=n.language;var h=2===this.activeTagStack.length;if("rel"in t||"rev"in t?("about"in t?(a=this.util.createIri(t.about,i,!1,!0,!0),i.explicitNewSubject=!!a,"typeof"in t&&(o=a)):h?a=!0:n.object&&(a=n.object),"resource"in t&&(s=this.util.createIri(t.resource,i,!1,!0,!0)),s||("href"in t||"src"in t?s=this.util.createIri(t.href||t.src,i,!1,!1,!0):!("typeof"in t)||"about"in t||this.isInheritSubjectInHeadBody(e)||(s=this.util.createBlankNode())),"typeof"in t&&!("about"in t)&&(o=this.isInheritSubjectInHeadBody(e)?a:s)):!("property"in t)||"content"in t||"datatype"in t?(("about"in t||"resource"in t)&&(a=this.util.createIri(t.about||t.resource,i,!1,!0,!0),i.explicitNewSubject=!!a),a||!("href"in t)&&!("src"in t)||(a=this.util.createIri(t.href||t.src,i,!1,!1,!0),i.explicitNewSubject=!!a),a||(h?a=!0:this.isInheritSubjectInHeadBody(e)?a=n.object:"typeof"in t?(a=this.util.createBlankNode(),i.explicitNewSubject=!0):n.object&&(a=n.object,"property"in t||(i.skipElement=!0))),"typeof"in t&&(o=a)):("about"in t?(a=this.util.createIri(t.about,i,!1,!0,!0),i.explicitNewSubject=!!a):h?a=!0:n.object&&(a=n.object),"typeof"in t&&("about"in t&&(o=this.util.createIri(t.about,i,!1,!0,!0)),!o&&h&&(o=!0),!o&&"resource"in t&&(o=this.util.createIri(t.resource,i,!1,!0,!0)),o||!("href"in t)&&!("src"in t)||(o=this.util.createIri(t.href||t.src,i,!1,!1,!0)),!o&&this.isInheritSubjectInHeadBody(e)&&(o=a),o||(o=this.util.createBlankNode()),s=o)),o)for(var _e96 of this.util.createVocabIris(t.typeof,i,!0,!0)){this.emitTriple(this.util.getResourceOrBaseIri(o,i),this.util.dataFactory.namedNode(u.Util.RDF+"type"),_e96);}if(a&&(i.listMapping={}),s){if("rel"in t&&"inlist"in t)for(var _e97 of this.util.createVocabIris(t.rel,i,c,!1)){this.addListMapping(i,a,_e97,s);}if(!("rel"in t)||!("inlist"in t)){if("rel"in t)for(var _e98 of this.util.createVocabIris(t.rel,i,c,!1)){this.emitTriple(this.util.getResourceOrBaseIri(a,i),_e98,this.util.getResourceOrBaseIri(s,i));}if("rev"in t)for(var _e99 of this.util.createVocabIris(t.rev,i,l,!1)){this.emitTriple(this.util.getResourceOrBaseIri(s,i),_e99,this.util.getResourceOrBaseIri(a,i));}}}if(!s){if("rel"in t)if("inlist"in t)for(var _e100 of this.util.createVocabIris(t.rel,i,c,!1)){this.addListMapping(i,a,_e100,null),i.incompleteTriples.push({predicate:_e100,reverse:!1,list:!0});}else for(var _e101 of this.util.createVocabIris(t.rel,i,c,!1)){i.incompleteTriples.push({predicate:_e101,reverse:!1});}if("rev"in t)for(var _e102 of this.util.createVocabIris(t.rev,i,l,!1)){i.incompleteTriples.push({predicate:_e102,reverse:!0});}i.incompleteTriples.length>0&&(s=this.util.createBlankNode());}if("property"in t){var _e103;if(i.predicates=this.util.createVocabIris(t.property,i,!0,!1),"datatype"in t?(i.datatype=this.util.createIri(t.datatype,i,!0,!0,!1),i.datatype&&(i.datatype.value===u.Util.RDF+"XMLLiteral"||this.features.htmlDatatype&&i.datatype.value===u.Util.RDF+"HTML")&&(i.collectChildTags=!0)):("rev"in t||"rel"in t||"content"in t||("resource"in t&&(_e103=this.util.createIri(t.resource,i,!1,!0,!0)),!_e103&&"href"in t&&(_e103=this.util.createIri(t.href,i,!1,!1,!0)),!_e103&&"src"in t&&(_e103=this.util.createIri(t.src,i,!1,!1,!0))),"typeof"in t&&!("about"in t)&&(_e103=o)),"content"in t){var _e104=this.util.createLiteral(t.content,i);if("inlist"in t)for(var _t113 of i.predicates){this.addListMapping(i,a,_t113,_e104);}else {var _t114=this.util.getResourceOrBaseIri(a,i);for(var _r105 of i.predicates){this.emitTriple(_t114,_r105,_e104);}}i.predicates=null;}else if(this.features.datetimeAttribute&&"datetime"in t){i.interpretObjectAsTime=!0;var _e105=this.util.createLiteral(t.datetime,i);if("inlist"in t)for(var _t115 of i.predicates){this.addListMapping(i,a,_t115,_e105);}else {var _t116=this.util.getResourceOrBaseIri(a,i);for(var _r106 of i.predicates){this.emitTriple(_t116,_r106,_e105);}}i.predicates=null;}else if(_e103){var _r107=this.util.getResourceOrBaseIri(_e103,i);if("inlist"in t)for(var _e106 of i.predicates){this.addListMapping(i,a,_e106,_r107);}else {var _e107=this.util.getResourceOrBaseIri(a,i);for(var _t117 of i.predicates){this.emitTriple(_e107,_t117,_r107);}}i.predicates=null;}}var d=!1;if(!i.skipElement&&a&&n.incompleteTriples.length>0){d=!0;var _e108=this.util.getResourceOrBaseIri(n.subject,i),_t118=this.util.getResourceOrBaseIri(a,i);for(var _r108 of n.incompleteTriples){if(_r108.reverse)this.emitTriple(_t118,_r108.predicate,_e108);else if(_r108.list){var _e109=null;for(var _t119=this.activeTagStack.length-1;_t119>=0;_t119--){if(this.activeTagStack[_t119].inlist){_e109=this.activeTagStack[_t119];break;}}this.addListMapping(_e109,a,_r108.predicate,_t118);}else this.emitTriple(_e108,_r108.predicate,_t118);}}!d&&n.incompleteTriples.length>0&&(i.incompleteTriples=i.incompleteTriples.concat(n.incompleteTriples)),i.subject=a||n.subject,i.object=s||a;}onText(e){var t=this.activeTagStack[this.activeTagStack.length-1];this.features.copyRdfaPatterns&&t.collectedPatternTag?t.collectedPatternTag.text.push(e):(t.text||(t.text=[]),t.text.push(e));}onTagClose(){var e=this.activeTagStack[this.activeTagStack.length-1],t=this.activeTagStack[this.activeTagStack.length-2];if(!(e.collectChildTags&&t.collectChildTags&&this.features.skipHandlingXmlLiteralChildren)){if(this.features.copyRdfaPatterns&&e.collectedPatternTag&&e.collectedPatternTag.rootPattern){var _t120=e.collectedPatternTag.attributes.resource;if(delete e.collectedPatternTag.attributes.resource,delete e.collectedPatternTag.attributes.typeof,this.rdfaPatterns[_t120]=e.collectedPatternTag,this.pendingRdfaPatternCopies[_t120]){for(var _r109 of this.pendingRdfaPatternCopies[_t120]){this.emitPatternCopy(_r109,e.collectedPatternTag,_t120);}delete this.pendingRdfaPatternCopies[_t120];}return void this.activeTagStack.pop();}if(e.predicates){var _r110=this.util.getResourceOrBaseIri(e.subject,e);var _n67=e.text||[];e.collectChildTags&&t.collectChildTags&&(_n67=_n67.slice(1));var _i46=this.util.createLiteral(_n67.join(""),e);if(e.inlist)for(var _t121 of e.predicates){this.addListMapping(e,_r110,_t121,_i46);}else for(var _t122 of e.predicates){this.emitTriple(_r110,_t122,_i46);}t.predicates||(e.text=null);}if(e.object&&Object.keys(e.listMapping).length>0){var _t123=this.util.getResourceOrBaseIri(e.object,e);for(var _r111 in e.listMapping){var _n68=this.util.dataFactory.namedNode(_r111),_i47=e.listMapping[_r111];if(_i47.length>0){var _r112=_i47.map(()=>this.util.createBlankNode());for(var _t124=0;_t124<_i47.length;_t124++){var _n69=this.util.getResourceOrBaseIri(_i47[_t124],e);this.emitTriple(_r112[_t124],this.util.dataFactory.namedNode(u.Util.RDF+"first"),_n69),this.emitTriple(_r112[_t124],this.util.dataFactory.namedNode(u.Util.RDF+"rest"),_t124<_i47.length-1?_r112[_t124+1]:this.util.dataFactory.namedNode(u.Util.RDF+"nil"));}this.emitTriple(_t123,_n68,_r112[0]);}else this.emitTriple(_t123,_n68,this.util.dataFactory.namedNode(u.Util.RDF+"nil"));}}}this.activeTagStack.pop(),e.collectChildTags&&e.text&&e.text.push("</"+e.name+">"),e.text&&t&&(t.text?t.text=t.text.concat(e.text):t.text=e.text);}onEnd(){if(this.features.copyRdfaPatterns){this.features.copyRdfaPatterns=!1;for(var _e110 in this.rdfaPatterns){var _t125=this.rdfaPatterns[_e110];_t125.referenced||(_t125.attributes.typeof="rdfa:Pattern",_t125.attributes.resource=_e110,this.emitPatternCopy(_t125.parentTag,_t125,_e110),_t125.referenced=!1,delete _t125.attributes.typeof,delete _t125.attributes.resource);}for(var _e111 in this.pendingRdfaPatternCopies){for(var _t126 of this.pendingRdfaPatternCopies[_e111]){this.activeTagStack.push(_t126),this.onTagOpen("link",{property:"rdfa:copy",href:_e111}),this.onTagClose(),this.activeTagStack.pop();}}this.features.copyRdfaPatterns=!0;}}isInheritSubjectInHeadBody(e){return this.features.inheritSubjectInHeadBody&&("head"===e||"body"===e);}addListMapping(e,t,r,n){if(e.explicitNewSubject){var _i48=this.util.createBlankNode();this.emitTriple(this.util.getResourceOrBaseIri(t,e),r,_i48),this.emitTriple(_i48,this.util.dataFactory.namedNode(u.Util.RDF+"first"),this.util.getResourceOrBaseIri(n,e)),this.emitTriple(_i48,this.util.dataFactory.namedNode(u.Util.RDF+"rest"),this.util.dataFactory.namedNode(u.Util.RDF+"nil"));}else {var _t127=e.listMappingLocal[r.value];_t127||(e.listMappingLocal[r.value]=_t127=[]),n&&_t127.push(n);}}emitTriple(e,t,r){"NamedNode"===e.termType&&e.value.indexOf(":")<0||"NamedNode"===t.termType&&t.value.indexOf(":")<0||"NamedNode"===r.termType&&r.value.indexOf(":")<0||this.push(this.util.dataFactory.quad(e,t,r,this.defaultGraph));}emitPatternCopy(e,t,r){if(this.activeTagStack.push(e),t.referenced=!0,t.constructedBlankNodes){var _e112=0;this.util.blankNodeFactory=()=>t.constructedBlankNodes[_e112++];}else t.constructedBlankNodes=[],this.util.blankNodeFactory=()=>{var e=this.util.dataFactory.blankNode();return t.constructedBlankNodes.push(e),e;};this.emitPatternCopyAbsolute(t,!0,r),this.util.blankNodeFactory=null,this.activeTagStack.pop();}emitPatternCopyAbsolute(e,t,r){if(t||"rdfa:copy"!==e.attributes.property||e.attributes.href!==r){this.onTagOpen(e.name,e.attributes);for(var _t128 of e.text){this.onText(_t128);}for(var _t129 of e.children){this.emitPatternCopyAbsolute(_t129,!1,r);}this.onTagClose();}}initializeParser(e){return new n.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose();}catch(e){this.emit("error",e);}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd();}catch(e){this.emit("error",e);}},onopentag:(e,t)=>{try{this.onTagOpen(e,t),this.htmlParseListener&&this.htmlParseListener.onTagOpen(e,t);}catch(e){this.emit("error",e);}},ontext:e=>{try{this.onText(e),this.htmlParseListener&&this.htmlParseListener.onText(e);}catch(e){this.emit("error",e);}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:e});}}t.RdfaParser=c;},function(e,t,r){function n(e){for(var r in e){t.hasOwnProperty(r)||(t[r]=e[r]);}}var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e){Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);}return t.default=e,t;};Object.defineProperty(t,"__esModule",{value:!0});var a=r(132);t.Parser=a.Parser;var s=r(58);t.DomHandler=s.DomHandler,t.DefaultHandler=s.DomHandler,t.parseDOM=function(e,t){var r=new s.DomHandler(void 0,t);return new a.Parser(r,t).end(e),r.dom;},t.createDomStream=function(e,t,r){var n=new s.DomHandler(e,t,r);return new a.Parser(n,t);};var o=r(133);t.Tokenizer=o.default;var u=i(r(59));t.ElementType=u,t.EVENTS={attribute:2,cdatastart:0,cdataend:0,text:1,processinginstruction:2,comment:1,commentend:0,closetag:1,opentag:2,opentagname:1,error:1,end:0},n(r(135)),n(r(298)),n(r(299));var c=i(r(60));t.DomUtils=c;var l=r(135);t.RssHandler=l.FeedHandler;},function(e){e.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}');},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e};};Object.defineProperty(t,"__esModule",{value:!0}),t.getText=t.getInnerHTML=t.getOuterHTML=void 0;var i=r(37),a=n(r(291));function s(e,t){return a.default(e,t);}t.getOuterHTML=s,t.getInnerHTML=function(e,t){return i.hasChildren(e)?e.children.map(function(e){return s(e,t);}).join(""):"";},t.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):i.isTag(t)?"br"===t.name?"\n":e(t.children):i.isCDATA(t)?e(t.children):i.isText(t)?t.data:"";};},function(e,t,r){var n=this&&this.__assign||function(){return (n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){for(var i in t=arguments[r]){Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);}}return e;}).apply(this,arguments);},i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t});}:function(e,t){e.default=t;}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e){"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);}return a(t,e),t;};Object.defineProperty(t,"__esModule",{value:!0});var o=s(r(59)),u=r(292),c=r(293),l=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);var h=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function d(e,t){void 0===t&&(t={});for(var r=Array.isArray(e)||e.cheerio?e:[e],n="",i=0;i<r.length;i++){n+=p(r[i],t);}return n;}function p(e,t){switch(e.type){case"root":return d(e.children,t);case o.Directive:return "<"+e.data+">";case o.Comment:return function(e){return "\x3c!--"+e.data+"--\x3e";}(e);case o.CDATA:return function(e){return "<![CDATA["+e.children[0].data+"]]>";}(e);default:return o.isTag(e)?function(e,t){var r;"foreign"===t.xmlMode&&(e.name=null!==(r=c.elementNames.get(e.name))&&void 0!==r?r:e.name,e.parent&&f.has(e.parent.name)&&(t=n(n({},t),{xmlMode:!1})));!t.xmlMode&&g.has(e.name)&&(t=n(n({},t),{xmlMode:"foreign"}));var i="<"+e.name,a=function(e,t){if(e)return Object.keys(e).map(function(r){var n,i,a=null!==(n=e[r])&&void 0!==n?n:"";return "foreign"===t.xmlMode&&(r=null!==(i=c.attributeNames.get(r))&&void 0!==i?i:r),t.emptyAttrs||t.xmlMode||""!==a?r+'="'+(t.decodeEntities?u.encodeXML(a):a.replace(/"/g,"&quot;"))+'"':r;}).join(" ");}(e.attribs,t);a&&(i+=" "+a);0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&h.has(e.name))?(t.xmlMode||(i+=" "),i+="/>"):(i+=">",e.children.length>0&&(i+=d(e.children,t)),!t.xmlMode&&h.has(e.name)||(i+="</"+e.name+">"));return i;}(e,t):function(e,t){var r=e.data||"";!t.decodeEntities||e.parent&&l.has(e.parent.name)||(r=u.encodeXML(r));return r;}(e,t);}}t.default=d;var f=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),g=new Set(["svg","math"]);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decodeStrict=t.decode=void 0;var n=r(136),i=r(137);t.decode=function(e,t){return (!t||t<=0?n.decodeXML:n.decodeHTML)(e);},t.decodeStrict=function(e,t){return (!t||t<=0?n.decodeXML:n.decodeHTMLStrict)(e);},t.encode=function(e,t){return (!t||t<=0?i.encodeXML:i.encodeHTML)(e);};var a=r(137);Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function get(){return a.encodeXML;}}),Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function get(){return a.encodeHTML;}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function get(){return a.escape;}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function get(){return a.encodeHTML;}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function get(){return a.encodeHTML;}});var s=r(136);Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function get(){return s.decodeXML;}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function get(){return s.decodeHTML;}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function get(){return s.decodeHTMLStrict;}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function get(){return s.decodeHTML;}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function get(){return s.decodeHTML;}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function get(){return s.decodeHTMLStrict;}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function get(){return s.decodeHTMLStrict;}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function get(){return s.decodeXML;}});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.attributeNames=t.elementNames=void 0,t.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix","feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting","feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]),t.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]]);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.nextElementSibling=t.getName=t.hasAttrib=t.getAttributeValue=t.getSiblings=t.getParent=t.getChildren=void 0;var n=r(37),i=[];function a(e){var t;return null!==(t=e.children)&&void 0!==t?t:i;}function s(e){return e.parent||null;}t.getChildren=a,t.getParent=s,t.getSiblings=function(e){var t=s(e);if(null!=t)return a(t);for(var r=[e],n=e.prev,i=e.next;null!=n;){r.unshift(n),n=n.prev;}for(;null!=i;){r.push(i),i=i.next;}return r;},t.getAttributeValue=function(e,t){var r;return null===(r=e.attribs)||void 0===r?void 0:r[t];},t.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t];},t.getName=function(e){return e.name;},t.nextElementSibling=function(e){for(var t=e.next;null!==t&&!n.isTag(t);){t=t.next;}return t;};},function(e,t,r){function n(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1);}}Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=t.prependChild=t.append=t.appendChild=t.replaceElement=t.removeElement=void 0,t.removeElement=n,t.replaceElement=function(e,t){var r=t.prev=e.prev;r&&(r.next=t);var n=t.next=e.next;n&&(n.prev=t);var i=t.parent=e.parent;if(i){var a=i.children;a[a.lastIndexOf(e)]=t;}},t.appendChild=function(e,t){if(n(t),t.next=null,t.parent=e,e.children.push(t)>1){var r=e.children[e.children.length-2];r.next=t,t.prev=r;}else t.prev=null;},t.append=function(e,t){n(t);var r=e.parent,i=e.next;if(t.next=i,t.prev=e,e.next=t,t.parent=r,i){if(i.prev=t,r){var a=r.children;a.splice(a.lastIndexOf(i),0,t);}}else r&&r.children.push(t);},t.prependChild=function(e,t){if(n(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){var r=e.children[1];r.prev=t,t.next=r;}else t.next=null;},t.prepend=function(e,t){n(t);var r=e.parent;if(r){var i=r.children;i.splice(i.indexOf(e),0,t);}e.prev&&(e.prev.next=t),t.parent=r,t.prev=e.prev,t.next=e,e.prev=t;};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.getElementsByTagType=t.getElementsByTagName=t.getElementById=t.getElements=t.testElement=void 0;var n=r(138),i=r(37),a={tag_name:function tag_name(e){return "function"==typeof e?function(t){return i.isTag(t)&&e(t.name);}:"*"===e?i.isTag:function(t){return i.isTag(t)&&t.name===e;};},tag_type:function tag_type(e){return "function"==typeof e?function(t){return e(t.type);}:function(t){return t.type===e;};},tag_contains:function tag_contains(e){return "function"==typeof e?function(t){return i.isText(t)&&e(t.data);}:function(t){return i.isText(t)&&t.data===e;};}};function s(e,t){return "function"==typeof t?function(r){return i.isTag(r)&&t(r.attribs[e]);}:function(r){return i.isTag(r)&&r.attribs[e]===t;};}function o(e,t){return function(r){return e(r)||t(r);};}function u(e){var t=Object.keys(e).map(function(t){var r=e[t];return t in a?a[t](r):s(t,r);});return 0===t.length?null:t.reduce(o);}t.testElement=function(e,t){var r=u(e);return !r||r(t);},t.getElements=function(e,t,r,i){void 0===i&&(i=1/0);var a=u(e);return a?n.filter(a,t,r,i):[];},t.getElementById=function(e,t,r){return void 0===r&&(r=!0),Array.isArray(t)||(t=[t]),n.findOne(s("id",e),t,r);},t.getElementsByTagName=function(e,t,r,i){return void 0===r&&(r=!0),void 0===i&&(i=1/0),n.filter(a.tag_name(e),t,r,i);},t.getElementsByTagType=function(e,t,r,i){return void 0===r&&(r=!0),void 0===i&&(i=1/0),n.filter(a.tag_type(e),t,r,i);};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueSort=t.compareDocumentPosition=t.removeSubsets=void 0;var n=r(37);function i(e,t){var r=[],i=[];if(e===t)return 0;for(var a=n.hasChildren(e)?e:e.parent;a;){r.unshift(a),a=a.parent;}for(a=n.hasChildren(t)?t:t.parent;a;){i.unshift(a),a=a.parent;}for(var s=Math.min(r.length,i.length),o=0;o<s&&r[o]===i[o];){o++;}if(0===o)return 1;var u=r[o-1],c=u.children,l=r[o],h=i[o];return c.indexOf(l)>c.indexOf(h)?u===t?20:4:u===e?10:2;}t.removeSubsets=function(e){for(var t=e.length;--t>=0;){var r=e[t];if(t>0&&e.lastIndexOf(r,t-1)>=0)e.splice(t,1);else for(var n=r.parent;n;n=n.parent){if(e.includes(n)){e.splice(t,1);break;}}}return e;},t.compareDocumentPosition=i,t.uniqueSort=function(e){return (e=e.filter(function(e,t,r){return !r.includes(e,t+1);})).sort(function(e,t){var r=i(e,t);return 2&r?-1:4&r?1:0;}),e;};},function(e,t){},function(e,t,r){var _n70,i=this&&this.__extends||(_n70=function n(e,t){return (_n70=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t;}||function(e,t){for(var r in t){t.hasOwnProperty(r)&&(e[r]=t[r]);}})(e,t);},function(e,t){function r(){this.constructor=e;}_n70(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r());}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e};};Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,function(e){for(var t,n=[],i=1;i<arguments.length;i++){n[i-1]=arguments[i];}r.events.push([e].concat(n)),r._cbs[e]&&(t=r._cbs)[e].apply(t,n);})||this;return r._cbs=t,r.events=[],r;}return i(t,e),t.prototype.onreset=function(){this.events=[],this._cbs.onreset&&this._cbs.onreset();},t.prototype.restart=function(){var e;this._cbs.onreset&&this._cbs.onreset();for(var t=0;t<this.events.length;t++){var r=this.events[t],n=r[0],i=r.slice(1);this._cbs[n]&&(e=this._cbs)[n].apply(e,i);}},t;}(a(r(300)).default);t.CollectingHandler=s;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._func=e;}return e.prototype.onattribute=function(e,t){this._func("onattribute",e,t);},e.prototype.oncdatastart=function(){this._func("oncdatastart");},e.prototype.oncdataend=function(){this._func("oncdataend");},e.prototype.ontext=function(e){this._func("ontext",e);},e.prototype.onprocessinginstruction=function(e,t){this._func("onprocessinginstruction",e,t);},e.prototype.oncomment=function(e){this._func("oncomment",e);},e.prototype.oncommentend=function(){this._func("oncommentend");},e.prototype.onclosetag=function(e){this._func("onclosetag",e);},e.prototype.onopentag=function(e,t){this._func("onopentag",e,t);},e.prototype.onopentagname=function(e){this._func("onopentagname",e);},e.prototype.onerror=function(e){this._func("onerror",e);},e.prototype.onend=function(){this._func("onend");},e.prototype.onparserinit=function(e){this._func("onparserinit",e);},e.prototype.onreset=function(){this._func("onreset");},e;}();t.default=n;},function(e){e.exports=JSON.parse('{"@context":{"alternate":"http://www.w3.org/1999/xhtml/vocab#alternate","appendix":"http://www.w3.org/1999/xhtml/vocab#appendix","cite":"http://www.w3.org/1999/xhtml/vocab#cite","bookmark":"http://www.w3.org/1999/xhtml/vocab#bookmark","contents":"http://www.w3.org/1999/xhtml/vocab#contents","chapter":"http://www.w3.org/1999/xhtml/vocab#chapter","copyright":"http://www.w3.org/1999/xhtml/vocab#copyright","first":"http://www.w3.org/1999/xhtml/vocab#first","glossary":"http://www.w3.org/1999/xhtml/vocab#glossary","help":"http://www.w3.org/1999/xhtml/vocab#help","icon":"http://www.w3.org/1999/xhtml/vocab#icon","index":"http://www.w3.org/1999/xhtml/vocab#index","last":"http://www.w3.org/1999/xhtml/vocab#last","license":"http://www.w3.org/1999/xhtml/vocab#license","meta":"http://www.w3.org/1999/xhtml/vocab#meta","next":"http://www.w3.org/1999/xhtml/vocab#next","prev":"http://www.w3.org/1999/xhtml/vocab#prev","previous":"http://www.w3.org/1999/xhtml/vocab#previous","section":"http://www.w3.org/1999/xhtml/vocab#section","start":"http://www.w3.org/1999/xhtml/vocab#start","stylesheet":"http://www.w3.org/1999/xhtml/vocab#stylesheet","subsection":"http://www.w3.org/1999/xhtml/vocab#subsection","top":"http://www.w3.org/1999/xhtml/vocab#top","up":"http://www.w3.org/1999/xhtml/vocab#up","p3pv1":"http://www.w3.org/1999/xhtml/vocab#p3pv1"}}');},function(e){e.exports=JSON.parse('{"@context":{"as":"https://www.w3.org/ns/activitystreams#","cat":"http://www.w3.org/ns/dcat#","cc":"http://creativecommons.org/ns#","cnt":"http://www.w3.org/2008/content#","csvw":"http://www.w3.org/ns/csvw#","ctag":"http://commontag.org/ns#","dc":"http://purl.org/dc/terms/","dc11":"http://purl.org/dc/elements/1.1/","dcat":"http://www.w3.org/ns/dcat#","dcterms":"http://purl.org/dc/terms/","dqv":"http://www.w3.org/ns/dqv#","duv":"https://www.w3.org/TR/vocab-duv#","earl":"http://www.w3.org/ns/earl#","foaf":"http://xmlns.com/foaf/0.1/","gldp":"http://www.w3.org/ns/people#","gr":"http://purl.org/goodrelations/v1#","grddl":"http://www.w3.org/2003/g/data-view#","ht":"http://www.w3.org/2006/http#","ical":"http://www.w3.org/2002/12/cal/icaltzd#","ldp":"http://www.w3.org/ns/ldp#","ma":"http://www.w3.org/ns/ma-ont#","oa":"http://www.w3.org/ns/oa#","odrl":"http://www.w3.org/ns/odrl/2/","og":"http://ogp.me/ns#","org":"http://www.w3.org/ns/org#","owl":"http://www.w3.org/2002/07/owl#","prov":"http://www.w3.org/ns/prov#","ptr":"http://www.w3.org/2009/pointers#","qb":"http://purl.org/linked-data/cube#","rev":"http://purl.org/stuff/rev#","rdf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#","rdfa":"http://www.w3.org/ns/rdfa#","rdfs":"http://www.w3.org/2000/01/rdf-schema#","rif":"http://www.w3.org/2007/rif#","rr":"http://www.w3.org/ns/r2rml#","schema":"http://schema.org/","sd":"http://www.w3.org/ns/sparql-service-description#","sioc":"http://rdfs.org/sioc/ns#","skos":"http://www.w3.org/2004/02/skos/core#","skosxl":"http://www.w3.org/2008/05/skos-xl#","ssn":"http://www.w3.org/ns/ssn/","sosa":"http://www.w3.org/ns/sosa/","time":"http://www.w3.org/2006/time#","v":"http://rdf.data-vocabulary.org/#","vcard":"http://www.w3.org/2006/vcard/ns#","void":"http://rdfs.org/ns/void#","wdr":"http://www.w3.org/2007/05/powder#","wdrs":"http://www.w3.org/2007/05/powder-s#","xhv":"http://www.w3.org/1999/xhtml/vocab#","xml":"http://www.w3.org/XML/1998/namespace","xsd":"http://www.w3.org/2001/XMLSchema#","describedby":"http://www.w3.org/2007/05/powder-s#describedby","license":"http://www.w3.org/1999/xhtml/vocab#license","role":"http://www.w3.org/1999/xhtml/vocab#role"}}');},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(304),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfParseHtml=void 0;var n=r(2),i=r(46),a=r(305);class s extends i.ActorRdfParseFixedMediaTypes{constructor(e){super(e);}runHandle(e,t,r){var _this59=this;return _asyncToGenerator(function*(){var i=new n.Readable({objectMode:!0});return i._read=/*#__PURE__*/_asyncToGenerator(function*(){i._read=()=>{};var t=1;function n(e){i.emit("error",e);}function s(){0==--t&&i.push(null);}var o={baseIRI:e.baseIRI,context:r,emit:function emit(e){i.emit("data",e);},end:s,error:n,headers:e.headers};Promise.all(_this59.busRdfParseHtml.publish(o)).then(/*#__PURE__*/function(){var _ref54=_asyncToGenerator(function*(r){t+=r.length;var i=[];for(var _e113 of r){var{htmlParseListener:_t130}=yield _e113.actor.run(o);i.push(_t130);}var u=new a.WritableStream({onclosetag(){try{for(var _e114 of i){_e114.onTagClose();}}catch(e){n(e);}},onend(){try{for(var _e115 of i){_e115.onEnd();}}catch(e){n(e);}s();},onopentag(e,t){try{for(var _r113 of i){_r113.onTagOpen(e,t);}}catch(e){n(e);}},ontext(e){try{for(var _t131 of i){_t131.onText(e);}}catch(e){n(e);}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:!1});e.input.on("error",n),e.input.pipe(u);});return function(_x12){return _ref54.apply(this,arguments);};}()).catch(n);}),{quads:i};})();}}t.ActorRdfParseHtml=s;},function(e,t,r){var _n71,i=this&&this.__extends||(_n71=function n(e,t){return (_n71=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t;}||function(e,t){for(var r in t){Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);}})(e,t);},function(e,t){function r(){this.constructor=e;}_n71(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r());});Object.defineProperty(t,"__esModule",{value:!0}),t.WritableStream=void 0;var a=r(80),s=r(2),o=r(33);var u=function(e){function t(t,r){var n=e.call(this,{decodeStrings:!1})||this;return n._decoder=new o.StringDecoder(),n._parser=new a.Parser(t,r),n;}return i(t,e),t.prototype._write=function(e,t,r){this._parser.write(function(e,t){return "buffer"===t;}(0,t)?this._decoder.write(e):e),r();},t.prototype._final=function(e){this._parser.end(this._decoder.end()),e();},t;}(s.Writable);t.WritableStream=u;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(307),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfParseHtmlMicrodata=void 0;var n=r(81),i=r(309);class a extends n.ActorRdfParseHtml{constructor(e){super(e);}test(e){return _asyncToGenerator(function*(){return !0;})();}run(e){return _asyncToGenerator(function*(){var t=e.headers?e.headers.get("content-type"):null,r=null==t?void 0:t.includes("xml"),n=new i.MicrodataRdfParser({baseIRI:e.baseIRI,xmlMode:r});n.on("error",e.error),n.on("data",e.emit);var a=n.onEnd;return n.onEnd=()=>{a.call(n),e.end();},{htmlParseListener:n};})();}}t.ActorRdfParseHtmlMicrodata=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfParseHtml=void 0;var n=r(0);class i extends n.Actor{constructor(e){super(e);}}t.ActorRdfParseHtml=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(310),t),i(r(141),t),i(r(142),t),i(r(143),t),i(r(144),t),i(r(311),t),i(r(312),t),i(r(313),t),i(r(314),t),i(r(61),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.MicrodataRdfParser=void 0;var n=r(2),i=r(145),a=r(141),s=r(142),o=r(143),u=r(144),c=r(61),l=r(315);class h extends n.Transform{constructor(e){super({readableObjectMode:!0}),this.itemScopeStack=[],this.textBufferStack=[],this.isEmittingReferences=!1,this.pendingItemRefsDomain={},this.pendingItemRefsRangeFinalized={},this.pendingItemRefsRangeCollecting={},e=e||{},this.options=e,this.util=new c.Util(e.dataFactory,e.baseIRI),this.defaultGraph=e.defaultGraph||this.util.dataFactory.defaultGraph(),this.htmlParseListener=e.htmlParseListener,this.vocabRegistry=e.vocabRegistry||l,this.parser=this.initializeParser(!!e.xmlMode);}import(e){var t=new n.PassThrough({readableObjectMode:!0});e.on("error",e=>r.emit("error",e)),e.on("data",e=>t.push(e)),e.on("end",()=>t.push(null));var r=t.pipe(new h(this.options));return r;}_transform(e,t,r){this.parser.write(e),r();}_flush(e){this.parser.end(),e();}getItemScope(e){var t=this.itemScopeStack.length-(e?2:1);for(;t>0&&!this.itemScopeStack[t];){t--;}return this.itemScopeStack[t];}getDepth(){return this.itemScopeStack.length;}onTagOpen(e,t){if(!this.isEmittingReferences){if("id"in t){var _e116=t.id;this.pendingItemRefsRangeCollecting[_e116]={events:[],counter:0,ids:[]};}for(var _r114 of Object.values(this.pendingItemRefsRangeCollecting)){_r114.counter++,_r114.events.push({type:"open",name:e,attributes:t});}}var r;if(this.textBufferStack.push(void 0),"itemscope"in t){var _e117;if(this.emittingReferencesItemScopeIdGenerator)_e117=this.emittingReferencesItemScopeIdGenerator();else {_e117="itemid"in t&&this.util.createSubject(t.itemid)||this.util.dataFactory.blankNode();for(var _t132 of Object.values(this.pendingItemRefsRangeCollecting)){_t132.ids.push(_e117);}}r={subject:_e117},this.isEmittingReferences&&(r.blockEmission=!0);var _n72=this.getItemScope();_n72&&_n72.vocab&&(r.vocab=_n72.vocab),this.itemScopeStack.push(r);}else r=this.getItemScope(),this.itemScopeStack.push(void 0);if(r){if("itemtype"in t)for(var _e118 of this.util.createVocabIris(t.itemtype,r,!1)){r.vocab||(r.vocab=this.util.deriveVocab(_e118.value,this.vocabRegistry)),r.blockEmission||this.emitTriple(r.subject,this.util.dataFactory.namedNode(c.Util.RDF+"type"),_e118);}if("lang"in t&&(r.language=t.lang),"xml:lang"in t&&(r.language=t["xml:lang"]),"itemscope"in t&&!this.isEmittingReferences&&"itemref"in t)for(var _e119 of t.itemref.split(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/)){_e119 in this.pendingItemRefsDomain||(this.pendingItemRefsDomain[_e119]=[]),this.pendingItemRefsDomain[_e119].push(r),this.tryToEmitReferences(_e119,r);}}"itemprop"in t&&this.handleItemProperties(t.itemprop,!1,r,e,t),"itemprop-reverse"in t&&this.handleItemProperties(t["itemprop-reverse"],!0,r,e,t);}onText(e){if(!this.isEmittingReferences)for(var _t133 of Object.values(this.pendingItemRefsRangeCollecting)){_t133.events.push({type:"text",data:e});}for(var _t134 of this.textBufferStack){_t134&&_t134.push(e);}}onTagClose(){if(!this.isEmittingReferences)for(var[_e120,_t135]of Object.entries(this.pendingItemRefsRangeCollecting)){_t135.counter--,_t135.events.push({type:"close"}),0===_t135.counter&&(this.pendingItemRefsRangeFinalized[_e120]=_t135,delete this.pendingItemRefsRangeCollecting[_e120],this.tryToEmitReferences(_e120));}var e=this.getItemScope(!0);if(e){var _t136=this.getDepth();if(e.predicates&&_t136 in e.predicates)for(var[_r115,_n73]of Object.entries(e.predicates[_t136])){var _i49=this.util.createLiteral(this.textBufferStack[_t136].join(""),e);this.emitPredicateTriples(e,_n73,_i49,"reverse"===_r115),delete e.predicates[_t136][_r115];}}this.itemScopeStack.pop(),this.textBufferStack.pop();}onEnd(){}initializeParser(e){return new i.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose();}catch(e){this.emit("error",e);}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd();}catch(e){this.emit("error",e);}},onopentag:(e,t)=>{try{this.onTagOpen(e,t),this.htmlParseListener&&this.htmlParseListener.onTagOpen(e,t);}catch(e){this.emit("error",e);}},ontext:e=>{try{this.onText(e),this.htmlParseListener&&this.htmlParseListener.onText(e);}catch(e){this.emit("error",e);}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:e});}handleItemProperties(e,t,r,n,i){var a=this.getItemScope(!0);if(a){var _s15=this.getDepth(),_o6=this.util.createVocabIris(e,a,!0);a.predicates||(a.predicates={}),a.predicates[_s15]||(a.predicates[_s15]={});var _u3=t?"reverse":"forward";a.predicates[_s15][_u3]=_o6;for(var _t137 of this.util.getVocabularyExpansionType(e,a,this.vocabRegistry)){_o6.push(_t137);}if(r&&"itemscope"in i)this.emitPredicateTriples(a,_o6,r.subject,t),delete a.predicates[_s15][_u3];else for(var _e121 of h.ITEM_PROPERTY_HANDLERS){if(_e121.canHandle(n,i)){var _r116=_e121.getObject(i,this.util,a);this.emitPredicateTriples(a,_o6,_r116,t),delete a.predicates[_s15][_u3];}}a.predicates[_s15][_u3]&&(this.textBufferStack[_s15]=[]);}}emitPredicateTriples(e,t,r,n){if(!e.blockEmission)for(var _i50 of t){n?"Literal"!==r.termType&&this.emitTriple(r,_i50,e.subject):this.emitTriple(e.subject,_i50,r);}}emitTriple(e,t,r){this.push(this.util.dataFactory.quad(e,t,r,this.defaultGraph));}tryToEmitReferences(e,t){var _this60=this;var r=this.pendingItemRefsRangeFinalized[e];if(r){var _n74;if(t){_n74=[t];var _r117=this.pendingItemRefsDomain[e].indexOf(t);this.pendingItemRefsDomain[e].splice(_r117,1);}else _n74=this.pendingItemRefsDomain[e],delete this.pendingItemRefsDomain[e];if(_n74){var _e122=this.itemScopeStack,_t138=this.textBufferStack;this.isEmittingReferences=!0;var _loop8=function _loop8(_e123){_this60.itemScopeStack=[_e123],_this60.textBufferStack=[void 0];var t=r.ids.slice();_this60.emittingReferencesItemScopeIdGenerator=()=>t.shift();for(var _e124 of r.events){switch(_e124.type){case"open":_this60.onTagOpen(_e124.name,_e124.attributes);break;case"text":_this60.onText(_e124.data);break;case"close":_this60.onTagClose();}}};for(var _e123 of _n74){_loop8(_e123);}this.emittingReferencesItemScopeIdGenerator=void 0,this.itemScopeStack=_e122,this.textBufferStack=_t138,this.isEmittingReferences=!1;}}}}t.MicrodataRdfParser=h,h.ITEM_PROPERTY_HANDLERS=[new a.ItemPropertyHandlerContent(),new u.ItemPropertyHandlerUrl("a","href"),new u.ItemPropertyHandlerUrl("area","href"),new u.ItemPropertyHandlerUrl("audio","src"),new u.ItemPropertyHandlerUrl("embed","src"),new u.ItemPropertyHandlerUrl("iframe","src"),new u.ItemPropertyHandlerUrl("img","src"),new u.ItemPropertyHandlerUrl("link","href"),new u.ItemPropertyHandlerUrl("object","data"),new u.ItemPropertyHandlerUrl("source","src"),new u.ItemPropertyHandlerUrl("track","src"),new u.ItemPropertyHandlerUrl("video","src"),new s.ItemPropertyHandlerNumber("data","value"),new s.ItemPropertyHandlerNumber("meter","value"),new o.ItemPropertyHandlerTime()];},function(e){e.exports=JSON.parse('{"http://schema.org/":{"properties":{"additionalType":{"subPropertyOf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}}},"http://microformats.org/profile/hcard":{}}');},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(317),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfParseHtmlRdfa=void 0;var n=r(81),i=r(318);class a extends n.ActorRdfParseHtml{constructor(e){super(e);}test(e){return _asyncToGenerator(function*(){return !0;})();}run(e){return _asyncToGenerator(function*(){var t;var r=e.headers?e.headers.get("content-type"):null,n=null!==(t=e.headers&&e.headers.get("content-language"))&&void 0!==t?t:void 0,a=r&&r.includes("xml")?"xhtml":"html",s=new i.RdfaParser({baseIRI:e.baseIRI,profile:a,language:n});s.on("error",e.error),s.on("data",e.emit);var o=s.onEnd;return s.onEnd=()=>{o.call(s),e.end();},{htmlParseListener:s};})();}}t.ActorRdfParseHtmlRdfa=a;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(319),t),i(r(320),t),i(r(321),t),i(r(322),t),i(r(82),t),i(r(147),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.RdfaParser=void 0;var n=r(145),i=r(2),a=r(323),s=r(324),o=r(82),u=r(147);class c extends i.Transform{constructor(e){super({readableObjectMode:!0}),this.activeTagStack=[],e=e||{},this.options=e,this.util=new u.Util(e.dataFactory,e.baseIRI),this.defaultGraph=e.defaultGraph||this.util.dataFactory.defaultGraph();var t=e.contentType?u.Util.contentTypeToProfile(e.contentType):e.profile||"";this.features=e.features||o.RDFA_FEATURES[t],this.htmlParseListener=e.htmlParseListener,this.rdfaPatterns=this.features.copyRdfaPatterns?{}:null,this.pendingRdfaPatternCopies=this.features.copyRdfaPatterns?{}:null,this.parser=this.initializeParser("xml"===t),this.activeTagStack.push({incompleteTriples:[],inlist:!1,language:e.language,listMapping:{},listMappingLocal:{},name:"",prefixesAll:Object.assign(Object.assign({},s["@context"]),this.features.xhtmlInitialContext?a["@context"]:{}),prefixesCustom:{},skipElement:!1,vocab:e.vocab});}import(e){var t=new i.PassThrough({readableObjectMode:!0});e.on("error",e=>r.emit("error",e)),e.on("data",e=>t.push(e)),e.on("end",()=>t.push(null));var r=t.pipe(new c(this.options));return r;}_transform(e,t,r){this.parser.write(e),r();}_flush(e){this.parser.end(),e();}onTagOpen(e,t){var r=this.activeTagStack.length-1;for(;r>0&&this.activeTagStack[r].skipElement;){r--;}var n=this.activeTagStack[r];r!==this.activeTagStack.length-1&&(n=Object.assign(Object.assign({},n),{language:this.activeTagStack[this.activeTagStack.length-1].language,prefixesAll:this.activeTagStack[this.activeTagStack.length-1].prefixesAll,prefixesCustom:this.activeTagStack[this.activeTagStack.length-1].prefixesCustom,vocab:this.activeTagStack[this.activeTagStack.length-1].vocab}));var i={collectChildTags:n.collectChildTags,incompleteTriples:[],inlist:"inlist"in t,listMapping:[],listMappingLocal:n.listMapping,localBaseIRI:n.localBaseIRI,name:e,prefixesAll:null,prefixesCustom:null,skipElement:!1};if(this.activeTagStack.push(i),i.collectChildTags){for(var _e125 of Object.keys(n.prefixesCustom).sort()){var _r119=n.prefixesCustom[_e125],_i51=""===_e125?"xmlns":"xmlns:"+_e125;_i51 in t||(t[_i51]=_r119);}var _r118=Object.keys(t).map(e=>e+"=\""+t[e]+"\"").join(" ");if(i.text=["<"+e+(_r118?" "+_r118:"")+">"],this.features.skipHandlingXmlLiteralChildren)return;}var a,s,o,c=!0,l=!0;if(this.features.onlyAllowUriRelRevIfProperty&&("property"in t&&"rel"in t&&(c=!1,t.rel.indexOf(":")<0&&delete t.rel),"property"in t&&"rev"in t&&(l=!1,t.rev.indexOf(":")<0&&delete t.rev)),this.features.copyRdfaPatterns){if(n.collectedPatternTag){var _r120={attributes:t,children:[],name:e,referenced:!1,rootPattern:!1,text:[]};return n.collectedPatternTag.children.push(_r120),void(i.collectedPatternTag=_r120);}if("rdfa:Pattern"===t.typeof)return void(i.collectedPatternTag={attributes:t,children:[],name:e,parentTag:n,referenced:!1,rootPattern:!0,text:[]});if("rdfa:copy"===t.property){var _e126=t.resource||t.href||t.src;return void(this.rdfaPatterns[_e126]?this.emitPatternCopy(n,this.rdfaPatterns[_e126],_e126):(this.pendingRdfaPatternCopies[_e126]||(this.pendingRdfaPatternCopies[_e126]=[]),this.pendingRdfaPatternCopies[_e126].push(n)));}}if(this.features.baseTag&&"base"===e&&t.href&&(this.util.baseIRI=this.util.getBaseIRI(t.href)),this.features.xmlBase&&t["xml:base"]&&(i.localBaseIRI=this.util.getBaseIRI(t["xml:base"])),this.features.timeTag&&"time"===e&&!t.datatype&&(i.interpretObjectAsTime=!0),"vocab"in t?t.vocab?(i.vocab=t.vocab,this.emitTriple(this.util.getBaseIriTerm(i),this.util.dataFactory.namedNode(u.Util.RDFA+"usesVocabulary"),this.util.dataFactory.namedNode(i.vocab))):i.vocab=this.activeTagStack[0].vocab:i.vocab=n.vocab,i.prefixesCustom=u.Util.parsePrefixes(t,n.prefixesCustom,this.features.xmlnsPrefixMappings),i.prefixesAll=Object.keys(i.prefixesCustom).length>0?Object.assign(Object.assign({},n.prefixesAll),i.prefixesCustom):n.prefixesAll,this.features.roleAttribute&&t.role){var _e127=t.id?this.util.createIri("#"+t.id,i,!1,!1,!1):this.util.createBlankNode(),_r121=i.vocab;i.vocab="http://www.w3.org/1999/xhtml/vocab#";for(var _r122 of this.util.createVocabIris(t.role,i,!0,!1)){this.emitTriple(_e127,this.util.dataFactory.namedNode("http://www.w3.org/1999/xhtml/vocab#role"),_r122);}i.vocab=_r121;}"xml:lang"in t||this.features.langAttribute&&"lang"in t?i.language=t["xml:lang"]||t.lang:i.language=n.language;var h=2===this.activeTagStack.length;if("rel"in t||"rev"in t?("about"in t?(a=this.util.createIri(t.about,i,!1,!0,!0),i.explicitNewSubject=!!a,"typeof"in t&&(o=a)):h?a=!0:n.object&&(a=n.object),"resource"in t&&(s=this.util.createIri(t.resource,i,!1,!0,!0)),s||("href"in t||"src"in t?s=this.util.createIri(t.href||t.src,i,!1,!1,!0):!("typeof"in t)||"about"in t||this.isInheritSubjectInHeadBody(e)||(s=this.util.createBlankNode())),"typeof"in t&&!("about"in t)&&(o=this.isInheritSubjectInHeadBody(e)?a:s)):!("property"in t)||"content"in t||"datatype"in t?(("about"in t||"resource"in t)&&(a=this.util.createIri(t.about||t.resource,i,!1,!0,!0),i.explicitNewSubject=!!a),a||!("href"in t)&&!("src"in t)||(a=this.util.createIri(t.href||t.src,i,!1,!1,!0),i.explicitNewSubject=!!a),a||(h?a=!0:this.isInheritSubjectInHeadBody(e)?a=n.object:"typeof"in t?(a=this.util.createBlankNode(),i.explicitNewSubject=!0):n.object&&(a=n.object,"property"in t||(i.skipElement=!0))),"typeof"in t&&(o=a)):("about"in t?(a=this.util.createIri(t.about,i,!1,!0,!0),i.explicitNewSubject=!!a):h?a=!0:n.object&&(a=n.object),"typeof"in t&&("about"in t&&(o=this.util.createIri(t.about,i,!1,!0,!0)),!o&&h&&(o=!0),!o&&"resource"in t&&(o=this.util.createIri(t.resource,i,!1,!0,!0)),o||!("href"in t)&&!("src"in t)||(o=this.util.createIri(t.href||t.src,i,!1,!1,!0)),!o&&this.isInheritSubjectInHeadBody(e)&&(o=a),o||(o=this.util.createBlankNode()),s=o)),o)for(var _e128 of this.util.createVocabIris(t.typeof,i,!0,!0)){this.emitTriple(this.util.getResourceOrBaseIri(o,i),this.util.dataFactory.namedNode(u.Util.RDF+"type"),_e128);}if(a&&(i.listMapping={}),s){if("rel"in t&&"inlist"in t)for(var _e129 of this.util.createVocabIris(t.rel,i,c,!1)){this.addListMapping(i,a,_e129,s);}if(!("rel"in t)||!("inlist"in t)){if("rel"in t)for(var _e130 of this.util.createVocabIris(t.rel,i,c,!1)){this.emitTriple(this.util.getResourceOrBaseIri(a,i),_e130,this.util.getResourceOrBaseIri(s,i));}if("rev"in t)for(var _e131 of this.util.createVocabIris(t.rev,i,l,!1)){this.emitTriple(this.util.getResourceOrBaseIri(s,i),_e131,this.util.getResourceOrBaseIri(a,i));}}}if(!s){if("rel"in t)if("inlist"in t)for(var _e132 of this.util.createVocabIris(t.rel,i,c,!1)){this.addListMapping(i,a,_e132,null),i.incompleteTriples.push({predicate:_e132,reverse:!1,list:!0});}else for(var _e133 of this.util.createVocabIris(t.rel,i,c,!1)){i.incompleteTriples.push({predicate:_e133,reverse:!1});}if("rev"in t)for(var _e134 of this.util.createVocabIris(t.rev,i,l,!1)){i.incompleteTriples.push({predicate:_e134,reverse:!0});}i.incompleteTriples.length>0&&(s=this.util.createBlankNode());}if("property"in t){var _e135;if(i.predicates=this.util.createVocabIris(t.property,i,!0,!1),"datatype"in t?(i.datatype=this.util.createIri(t.datatype,i,!0,!0,!1),i.datatype&&(i.datatype.value===u.Util.RDF+"XMLLiteral"||this.features.htmlDatatype&&i.datatype.value===u.Util.RDF+"HTML")&&(i.collectChildTags=!0)):("rev"in t||"rel"in t||"content"in t||("resource"in t&&(_e135=this.util.createIri(t.resource,i,!1,!0,!0)),!_e135&&"href"in t&&(_e135=this.util.createIri(t.href,i,!1,!1,!0)),!_e135&&"src"in t&&(_e135=this.util.createIri(t.src,i,!1,!1,!0))),"typeof"in t&&!("about"in t)&&(_e135=o)),"content"in t){var _e136=this.util.createLiteral(t.content,i);if("inlist"in t)for(var _t139 of i.predicates){this.addListMapping(i,a,_t139,_e136);}else {var _t140=this.util.getResourceOrBaseIri(a,i);for(var _r123 of i.predicates){this.emitTriple(_t140,_r123,_e136);}}i.predicates=null;}else if(this.features.datetimeAttribute&&"datetime"in t){i.interpretObjectAsTime=!0;var _e137=this.util.createLiteral(t.datetime,i);if("inlist"in t)for(var _t141 of i.predicates){this.addListMapping(i,a,_t141,_e137);}else {var _t142=this.util.getResourceOrBaseIri(a,i);for(var _r124 of i.predicates){this.emitTriple(_t142,_r124,_e137);}}i.predicates=null;}else if(_e135){var _r125=this.util.getResourceOrBaseIri(_e135,i);if("inlist"in t)for(var _e138 of i.predicates){this.addListMapping(i,a,_e138,_r125);}else {var _e139=this.util.getResourceOrBaseIri(a,i);for(var _t143 of i.predicates){this.emitTriple(_e139,_t143,_r125);}}i.predicates=null;}}var d=!1;if(!i.skipElement&&a&&n.incompleteTriples.length>0){d=!0;var _e140=this.util.getResourceOrBaseIri(n.subject,i),_t144=this.util.getResourceOrBaseIri(a,i);for(var _r126 of n.incompleteTriples){if(_r126.reverse)this.emitTriple(_t144,_r126.predicate,_e140);else if(_r126.list){var _e141=null;for(var _t145=this.activeTagStack.length-1;_t145>=0;_t145--){if(this.activeTagStack[_t145].inlist){_e141=this.activeTagStack[_t145];break;}}this.addListMapping(_e141,a,_r126.predicate,_t144);}else this.emitTriple(_e140,_r126.predicate,_t144);}}!d&&n.incompleteTriples.length>0&&(i.incompleteTriples=i.incompleteTriples.concat(n.incompleteTriples)),i.subject=a||n.subject,i.object=s||a;}onText(e){var t=this.activeTagStack[this.activeTagStack.length-1];this.features.copyRdfaPatterns&&t.collectedPatternTag?t.collectedPatternTag.text.push(e):(t.text||(t.text=[]),t.text.push(e));}onTagClose(){var e=this.activeTagStack[this.activeTagStack.length-1],t=this.activeTagStack[this.activeTagStack.length-2];if(!(e.collectChildTags&&t.collectChildTags&&this.features.skipHandlingXmlLiteralChildren)){if(this.features.copyRdfaPatterns&&e.collectedPatternTag&&e.collectedPatternTag.rootPattern){var _t146=e.collectedPatternTag.attributes.resource;if(delete e.collectedPatternTag.attributes.resource,delete e.collectedPatternTag.attributes.typeof,this.rdfaPatterns[_t146]=e.collectedPatternTag,this.pendingRdfaPatternCopies[_t146]){for(var _r127 of this.pendingRdfaPatternCopies[_t146]){this.emitPatternCopy(_r127,e.collectedPatternTag,_t146);}delete this.pendingRdfaPatternCopies[_t146];}return void this.activeTagStack.pop();}if(e.predicates){var _r128=this.util.getResourceOrBaseIri(e.subject,e);var _n75=e.text||[];e.collectChildTags&&t.collectChildTags&&(_n75=_n75.slice(1));var _i52=this.util.createLiteral(_n75.join(""),e);if(e.inlist)for(var _t147 of e.predicates){this.addListMapping(e,_r128,_t147,_i52);}else for(var _t148 of e.predicates){this.emitTriple(_r128,_t148,_i52);}t.predicates||(e.text=null);}if(e.object&&Object.keys(e.listMapping).length>0){var _t149=this.util.getResourceOrBaseIri(e.object,e);for(var _r129 in e.listMapping){var _n76=this.util.dataFactory.namedNode(_r129),_i53=e.listMapping[_r129];if(_i53.length>0){var _r130=_i53.map(()=>this.util.createBlankNode());for(var _t150=0;_t150<_i53.length;_t150++){var _n77=this.util.getResourceOrBaseIri(_i53[_t150],e);this.emitTriple(_r130[_t150],this.util.dataFactory.namedNode(u.Util.RDF+"first"),_n77),this.emitTriple(_r130[_t150],this.util.dataFactory.namedNode(u.Util.RDF+"rest"),_t150<_i53.length-1?_r130[_t150+1]:this.util.dataFactory.namedNode(u.Util.RDF+"nil"));}this.emitTriple(_t149,_n76,_r130[0]);}else this.emitTriple(_t149,_n76,this.util.dataFactory.namedNode(u.Util.RDF+"nil"));}}}this.activeTagStack.pop(),e.collectChildTags&&e.text&&e.text.push("</"+e.name+">"),e.text&&t&&(t.text?t.text=t.text.concat(e.text):t.text=e.text);}onEnd(){if(this.features.copyRdfaPatterns){this.features.copyRdfaPatterns=!1;for(var _e142 in this.rdfaPatterns){var _t151=this.rdfaPatterns[_e142];_t151.referenced||(_t151.attributes.typeof="rdfa:Pattern",_t151.attributes.resource=_e142,this.emitPatternCopy(_t151.parentTag,_t151,_e142),_t151.referenced=!1,delete _t151.attributes.typeof,delete _t151.attributes.resource);}for(var _e143 in this.pendingRdfaPatternCopies){for(var _t152 of this.pendingRdfaPatternCopies[_e143]){this.activeTagStack.push(_t152),this.onTagOpen("link",{property:"rdfa:copy",href:_e143}),this.onTagClose(),this.activeTagStack.pop();}}this.features.copyRdfaPatterns=!0;}}isInheritSubjectInHeadBody(e){return this.features.inheritSubjectInHeadBody&&("head"===e||"body"===e);}addListMapping(e,t,r,n){if(e.explicitNewSubject){var _i54=this.util.createBlankNode();this.emitTriple(this.util.getResourceOrBaseIri(t,e),r,_i54),this.emitTriple(_i54,this.util.dataFactory.namedNode(u.Util.RDF+"first"),this.util.getResourceOrBaseIri(n,e)),this.emitTriple(_i54,this.util.dataFactory.namedNode(u.Util.RDF+"rest"),this.util.dataFactory.namedNode(u.Util.RDF+"nil"));}else {var _t153=e.listMappingLocal[r.value];_t153||(e.listMappingLocal[r.value]=_t153=[]),n&&_t153.push(n);}}emitTriple(e,t,r){"NamedNode"===e.termType&&e.value.indexOf(":")<0||"NamedNode"===t.termType&&t.value.indexOf(":")<0||"NamedNode"===r.termType&&r.value.indexOf(":")<0||this.push(this.util.dataFactory.quad(e,t,r,this.defaultGraph));}emitPatternCopy(e,t,r){if(this.activeTagStack.push(e),t.referenced=!0,t.constructedBlankNodes){var _e144=0;this.util.blankNodeFactory=()=>t.constructedBlankNodes[_e144++];}else t.constructedBlankNodes=[],this.util.blankNodeFactory=()=>{var e=this.util.dataFactory.blankNode();return t.constructedBlankNodes.push(e),e;};this.emitPatternCopyAbsolute(t,!0,r),this.util.blankNodeFactory=null,this.activeTagStack.pop();}emitPatternCopyAbsolute(e,t,r){if(t||"rdfa:copy"!==e.attributes.property||e.attributes.href!==r){this.onTagOpen(e.name,e.attributes);for(var _t154 of e.text){this.onText(_t154);}for(var _t155 of e.children){this.emitPatternCopyAbsolute(_t155,!1,r);}this.onTagClose();}}initializeParser(e){return new n.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose();}catch(e){this.emit("error",e);}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd();}catch(e){this.emit("error",e);}},onopentag:(e,t)=>{try{this.onTagOpen(e,t),this.htmlParseListener&&this.htmlParseListener.onTagOpen(e,t);}catch(e){this.emit("error",e);}},ontext:e=>{try{this.onText(e),this.htmlParseListener&&this.htmlParseListener.onText(e);}catch(e){this.emit("error",e);}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:e});}}t.RdfaParser=c;},function(e){e.exports=JSON.parse('{"@context":{"alternate":"http://www.w3.org/1999/xhtml/vocab#alternate","appendix":"http://www.w3.org/1999/xhtml/vocab#appendix","cite":"http://www.w3.org/1999/xhtml/vocab#cite","bookmark":"http://www.w3.org/1999/xhtml/vocab#bookmark","contents":"http://www.w3.org/1999/xhtml/vocab#contents","chapter":"http://www.w3.org/1999/xhtml/vocab#chapter","copyright":"http://www.w3.org/1999/xhtml/vocab#copyright","first":"http://www.w3.org/1999/xhtml/vocab#first","glossary":"http://www.w3.org/1999/xhtml/vocab#glossary","help":"http://www.w3.org/1999/xhtml/vocab#help","icon":"http://www.w3.org/1999/xhtml/vocab#icon","index":"http://www.w3.org/1999/xhtml/vocab#index","last":"http://www.w3.org/1999/xhtml/vocab#last","license":"http://www.w3.org/1999/xhtml/vocab#license","meta":"http://www.w3.org/1999/xhtml/vocab#meta","next":"http://www.w3.org/1999/xhtml/vocab#next","prev":"http://www.w3.org/1999/xhtml/vocab#prev","previous":"http://www.w3.org/1999/xhtml/vocab#previous","section":"http://www.w3.org/1999/xhtml/vocab#section","start":"http://www.w3.org/1999/xhtml/vocab#start","stylesheet":"http://www.w3.org/1999/xhtml/vocab#stylesheet","subsection":"http://www.w3.org/1999/xhtml/vocab#subsection","top":"http://www.w3.org/1999/xhtml/vocab#top","up":"http://www.w3.org/1999/xhtml/vocab#up","p3pv1":"http://www.w3.org/1999/xhtml/vocab#p3pv1"}}');},function(e){e.exports=JSON.parse('{"@context":{"as":"https://www.w3.org/ns/activitystreams#","cat":"http://www.w3.org/ns/dcat#","cc":"http://creativecommons.org/ns#","cnt":"http://www.w3.org/2008/content#","csvw":"http://www.w3.org/ns/csvw#","ctag":"http://commontag.org/ns#","dc":"http://purl.org/dc/terms/","dc11":"http://purl.org/dc/elements/1.1/","dcat":"http://www.w3.org/ns/dcat#","dcterms":"http://purl.org/dc/terms/","dqv":"http://www.w3.org/ns/dqv#","duv":"https://www.w3.org/TR/vocab-duv#","earl":"http://www.w3.org/ns/earl#","foaf":"http://xmlns.com/foaf/0.1/","gldp":"http://www.w3.org/ns/people#","gr":"http://purl.org/goodrelations/v1#","grddl":"http://www.w3.org/2003/g/data-view#","ht":"http://www.w3.org/2006/http#","ical":"http://www.w3.org/2002/12/cal/icaltzd#","ldp":"http://www.w3.org/ns/ldp#","ma":"http://www.w3.org/ns/ma-ont#","oa":"http://www.w3.org/ns/oa#","odrl":"http://www.w3.org/ns/odrl/2/","og":"http://ogp.me/ns#","org":"http://www.w3.org/ns/org#","owl":"http://www.w3.org/2002/07/owl#","prov":"http://www.w3.org/ns/prov#","ptr":"http://www.w3.org/2009/pointers#","qb":"http://purl.org/linked-data/cube#","rev":"http://purl.org/stuff/rev#","rdf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#","rdfa":"http://www.w3.org/ns/rdfa#","rdfs":"http://www.w3.org/2000/01/rdf-schema#","rif":"http://www.w3.org/2007/rif#","rr":"http://www.w3.org/ns/r2rml#","schema":"http://schema.org/","sd":"http://www.w3.org/ns/sparql-service-description#","sioc":"http://rdfs.org/sioc/ns#","skos":"http://www.w3.org/2004/02/skos/core#","skosxl":"http://www.w3.org/2008/05/skos-xl#","ssn":"http://www.w3.org/ns/ssn/","sosa":"http://www.w3.org/ns/sosa/","time":"http://www.w3.org/2006/time#","v":"http://rdf.data-vocabulary.org/#","vcard":"http://www.w3.org/2006/vcard/ns#","void":"http://rdfs.org/ns/void#","wdr":"http://www.w3.org/2007/05/powder#","wdrs":"http://www.w3.org/2007/05/powder-s#","xhv":"http://www.w3.org/1999/xhtml/vocab#","xml":"http://www.w3.org/XML/1998/namespace","xsd":"http://www.w3.org/2001/XMLSchema#","describedby":"http://www.w3.org/2007/05/powder-s#describedby","license":"http://www.w3.org/1999/xhtml/vocab#license","role":"http://www.w3.org/1999/xhtml/vocab#role"}}');},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(326),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfSerializeN3=void 0;var n=r(148),i=r(41);class a extends n.ActorRdfSerializeFixedMediaTypes{constructor(e){super(e);}runHandle(e,t,r){return _asyncToGenerator(function*(){return {data:new i.StreamWriter({format:t}).import(e.quadStream),triples:"text/turtle"===t||"application/n-triples"===t||"text/n3"===t};})();}}t.ActorRdfSerializeN3=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfSerialize=void 0;var n=r(34);class i extends n.ActorAbstractMediaTyped{constructor(e){super(e);}}t.ActorRdfSerialize=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfSerializeFixedMediaTypes=void 0;var n=r(34);class i extends n.ActorAbstractMediaTypedFixed{constructor(e){super(e);}testHandleChecked(e){return _asyncToGenerator(function*(){return !0;})();}}t.ActorRdfSerializeFixedMediaTypes=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(330),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfSerializeJsonLd=void 0;var n=r(148),i=r(331);class a extends n.ActorRdfSerializeFixedMediaTypes{constructor(e){super(e);}runHandle(e,t,r){var _this61=this;return _asyncToGenerator(function*(){return {data:new i.JsonLdSerializer({space:" ".repeat(_this61.jsonStringifyIndentSpaces)}).import(e.quadStream)};})();}}t.ActorRdfSerializeJsonLd=a;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(332),t),i(r(153),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.JsonLdSerializer=void 0;var n=r(9),i=r(2),a=r(335),s=r(153);class o extends i.Transform{constructor(e){if(e===void 0){e={};}super({objectMode:!0}),this.indentation=0,this.options=e,this.options.baseIRI&&!this.options.context&&(this.options.context={"@base":this.options.baseIRI}),this.options.context?(this.originalContext=this.options.context,this.context=new n.ContextParser().parse(this.options.context,{baseIRI:this.options.baseIRI})):this.context=Promise.resolve(new n.JsonLdContextNormalized({}));}import(e){var t=new i.PassThrough({objectMode:!0});e.on("error",e=>r.emit("error",e)),e.on("data",e=>t.push(e)),e.on("end",()=>t.push(null));var r=t.pipe(new o(this.options));return r;}_transform(e,t,r){this.context.then(t=>{this.transformQuad(e,t),r();}).catch(r);}list(e){var _this62=this;return _asyncToGenerator(function*(){var t=yield _this62.context;return {"@list":e.map(e=>s.Util.termToValue(e,t,_this62.options))};})();}_flush(e){return this.opened||this.pushDocumentStart(),this.lastPredicate&&this.endPredicate(),this.lastSubject&&this.endSubject(),this.lastGraph&&"DefaultGraph"!==this.lastGraph.termType&&this.endGraph(),this.endDocument(),e(null,null);}transformQuad(e,t){this.opened||this.pushDocumentStart();var r=this.lastGraph&&"DefaultGraph"!==this.lastGraph.termType&&this.lastGraph.equals(e.subject);if(!(r||this.lastGraph&&e.graph.equals(this.lastGraph))){var _r131="DefaultGraph"!==e.graph.termType&&this.lastSubject&&this.lastSubject.equals(e.graph);this.lastGraph&&("DefaultGraph"!==this.lastGraph.termType?(this.endPredicate(),this.endSubject(),this.endGraph(!0),_r131=!1):_r131?(this.endPredicate(!0),this.lastSubject=null):(this.endPredicate(),this.endSubject(!0))),"DefaultGraph"!==e.graph.termType&&(_r131||this.pushId(e.graph,t),this.pushSeparator(this.options.space?a.SeparatorType.GRAPH_FIELD_NONCOMPACT:a.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++),this.lastGraph=e.graph;}this.lastSubject&&e.subject.equals(this.lastSubject)||(r?(this.endPredicate(),this.endSubject(),this.indentation--,this.pushSeparator(a.SeparatorType.ARRAY_END_COMMA),this.lastGraph=e.graph):(this.lastSubject&&(this.endPredicate(),this.endSubject(!0)),this.pushId(e.subject,t)),this.lastSubject=e.subject),this.lastPredicate&&e.predicate.equals(this.lastPredicate)||(this.lastPredicate&&this.endPredicate(!0),this.pushPredicate(e.predicate,t)),this.pushObject(e.object,t);}pushDocumentStart(){this.opened=!0,this.originalContext&&!this.options.excludeContext?(this.pushSeparator(a.SeparatorType.OBJECT_START),this.indentation++,this.pushSeparator(a.SeparatorType.CONTEXT_FIELD),this.pushIndented(JSON.stringify(this.originalContext,null,this.options.space)+","),this.pushSeparator(this.options.space?a.SeparatorType.GRAPH_FIELD_NONCOMPACT:a.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++):(this.pushSeparator(a.SeparatorType.ARRAY_START),this.indentation++);}pushId(e,t){var r="BlankNode"===e.termType?"_:"+e.value:t.compactIri(e.value,!1);this.pushSeparator(a.SeparatorType.OBJECT_START),this.indentation++,this.pushIndented(this.options.space?"\"@id\": \""+r+"\",":"\"@id\":\""+r+"\",");}pushPredicate(e,t){var r=e.value;this.options.useRdfType||r!==s.Util.RDF_TYPE||(r="@type",this.objectOptions=Object.assign(Object.assign({},this.options),{compactIds:!0,vocab:!0}));var n=t.compactIri(r,!0);this.pushIndented(this.options.space?"\""+n+"\": [":"\""+n+"\":["),this.indentation++,this.lastPredicate=e;}pushObject(e,t){var r;this.hadObjectForPredicate?this.pushSeparator(a.SeparatorType.COMMA):this.hadObjectForPredicate=!0;try{r=e["@list"]?e:s.Util.termToValue(e,t,this.objectOptions||this.options);}catch(e){return this.emit("error",e);}this.pushIndented(JSON.stringify(r,null,this.options.space));}endDocument(){this.opened=!1,this.originalContext&&!this.options.excludeContext?(this.indentation--,this.pushSeparator(a.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(a.SeparatorType.OBJECT_END)):(this.indentation--,this.pushSeparator(a.SeparatorType.ARRAY_END));}endPredicate(e){this.indentation--,this.pushSeparator(e?a.SeparatorType.ARRAY_END_COMMA:a.SeparatorType.ARRAY_END),this.hadObjectForPredicate=!1,this.objectOptions=null,this.lastPredicate=null;}endSubject(e){this.indentation--,this.pushSeparator(e?a.SeparatorType.OBJECT_END_COMMA:a.SeparatorType.OBJECT_END),this.lastSubject=null;}endGraph(e){this.indentation--,this.pushSeparator(a.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(e?a.SeparatorType.OBJECT_END_COMMA:a.SeparatorType.OBJECT_END),this.lastGraph=null;}pushSeparator(e){this.pushIndented(e.label);}pushIndented(e){var t=this.getIndentPrefix(),r=e.split("\n").map(e=>t+e).join("\n");this.push(r),this.options.space&&this.push("\n");}getIndentPrefix(){return this.options.space?this.options.space.repeat(this.indentation):"";}}t.JsonLdSerializer=o;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SeparatorType=void 0;class n{constructor(e){this.label=e;}}t.SeparatorType=n,n.COMMA=new n(","),n.OBJECT_START=new n("{"),n.OBJECT_END=new n("}"),n.OBJECT_END_COMMA=new n("},"),n.ARRAY_START=new n("["),n.ARRAY_END=new n("]"),n.ARRAY_END_COMMA=new n("],"),n.GRAPH_FIELD_NONCOMPACT=new n('"@graph": ['),n.GRAPH_FIELD_COMPACT=new n('"@graph":['),n.CONTEXT_FIELD=new n('"@context":');},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveQuadPatternRdfJsSource=void 0;var n=r(21),i=r(155);class a extends n.ActorRdfResolveQuadPatternSource{constructor(e){super(e);}test(e){var _this63=this;return _asyncToGenerator(function*(){if(!_this63.hasContextSingleSourceOfType("rdfjsSource",e.context))throw new Error(_this63.name+" requires a single source with an rdfjsSource to be present in the context.");var t=_this63.getContextSource(e.context);if(!t||"string"==typeof t||!("match"in t)&&!t.value.match)throw new Error(_this63.name+" received an invalid rdfjsSource.");return !0;})();}getSource(e){var _this64=this;return _asyncToGenerator(function*(){var t=_this64.getContextSource(e);return new i.RdfJsQuadSource("match"in t?t:t.value);})();}}t.ActorRdfResolveQuadPatternRdfJsSource=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(339),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfMetadataPrimaryTopic=void 0;var n=r(2),i=r(156);class a extends i.ActorRdfMetadata{constructor(e){super(e);}test(e){return _asyncToGenerator(function*(){if(e.triples)throw new Error("This actor only supports non-triple quad streams.");return !0;})();}run(e){var _this65=this;return _asyncToGenerator(function*(){var t=new n.Readable({objectMode:!0}),r=new n.Readable({objectMode:!0}),i=()=>{t._read=r._read=()=>{},e.quads.on("error",e=>{t.emit("error",e),r.emit("error",e);});var n={};var i;var a={};e.quads.on("data",t=>{"http://rdfs.org/ns/void#subset"===t.predicate.value&&t.object.value===e.url?i=t.subject.value:"http://xmlns.com/foaf/0.1/primaryTopic"===t.predicate.value&&(a[t.object.value]=t.subject.value);var r=n[t.graph.value];r||(r=n[t.graph.value]=[]),r.push(t);}),e.quads.on("end",()=>{var e=i?a[i]:void 0;for(var _i55 in n){if(_i55===e){for(var _e145 of n[_i55]){r.push(_e145);}if(_this65.metadataToData)for(var _e146 of n[_i55]){t.push(_e146);}}else {for(var _e147 of n[_i55]){t.push(_e147);}if(!e&&_this65.dataToMetadataOnInvalidMetadataGraph)for(var _e148 of n[_i55]){r.push(_e148);}}}t.push(null),r.push(null);});};return t._read=r._read=()=>{i();},{data:t,metadata:r};})();}}t.ActorRdfMetadataPrimaryTopic=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfMetadataQuadPredicate=void 0;var n=r(2),i=r(157);class a extends i.ActorRdfMetadata{constructor(e){super(e);}run(e){var _this66=this;return _asyncToGenerator(function*(){var t=new n.Readable({objectMode:!0}),r=new n.Readable({objectMode:!0}),i=()=>{t._read=r._read=()=>{},e.quads.on("error",e=>{t.emit("error",e),r.emit("error",e);});var n={};e.quads.on("data",i=>{_this66.isMetadata(i,e.url,n)?r.push(i):t.push(i);}),e.quads.on("end",()=>{t.push(null),r.push(null);});};return t._read=r._read=()=>{i();},{data:t,metadata:r};})();}}t.ActorRdfMetadataQuadPredicate=a;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(342),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfMetadataAll=void 0;var n=r(2),i=r(156);class a extends i.ActorRdfMetadata{constructor(e){super(e);}test(e){return _asyncToGenerator(function*(){return !0;})();}run(e){return _asyncToGenerator(function*(){var t=new n.Readable({objectMode:!0}),r=new n.Readable({objectMode:!0});return t._read=r._read=()=>{t._read=r._read=()=>{},e.quads.on("error",e=>{t.emit("error",e),r.emit("error",e);}),e.quads.on("data",e=>{t.push(e),r.push(e);}),e.quads.on("end",()=>{t.push(null),r.push(null);});},{data:t,metadata:r};})();}}t.ActorRdfMetadataAll=a;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(344),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfMetadataExtractHydraControls=void 0;var n=r(85),i=r(373);class a extends n.ActorRdfMetadataExtract{constructor(e){super(e),this.parsedUriTemplateCache={};}test(e){return _asyncToGenerator(function*(){return !0;})();}getLinks(e,t){return a.LINK_TYPES.reduce((r,n)=>{var i=t[n]||t[n+"Page"],a=i&&i[e];return r[n]=a&&a.length>0?a[0]:null,r;},{});}parseUriTemplateCached(e){var t=this.parsedUriTemplateCache[e];return t||(this.parsedUriTemplateCache[e]=i.parse(e));}getSearchForms(e){var _this67=this;var t=e.search,r=[];if(t)for(var _n78 in t){var _loop9=function _loop9(_i56){var t=(e.template||{})[_i56]||[];if(1!==t.length)throw new Error("Expected 1 hydra:template for "+_i56);var a=t[0],s=_this67.parseUriTemplateCached(a),o=((e.mapping||{})[_i56]||[]).reduce((t,r)=>{var n=((e.variable||{})[r]||[])[0],i=((e.property||{})[r]||[])[0];if(!n)throw new Error("Expected a hydra:variable for "+r);if(!i)throw new Error("Expected a hydra:property for "+r);return t[i]=n,t;},{}),u=e=>s.expand(Object.keys(e).reduce((t,r)=>(t[o[r]]=e[r],t),{}));r.push({dataset:_n78,template:a,mappings:o,getUri:u});};for(var _i56 of t[_n78]){_loop9(_i56);}}return {values:r};}getHydraProperties(e){return new Promise((t,r)=>{e.on("error",r);var n={};e.on("data",e=>{if(e.predicate.value.startsWith(a.HYDRA)){var _t156=e.predicate.value.slice(a.HYDRA.length),_r132=n[_t156]||(n[_t156]={});(_r132[e.subject.value]||(_r132[e.subject.value]=[])).push(e.object.value);}}),e.on("end",()=>t(n));});}run(e){var _this68=this;return _asyncToGenerator(function*(){var t={},r=yield _this68.getHydraProperties(e.metadata);return Object.assign(t,_this68.getLinks(e.url,r)),t.searchForms=_this68.getSearchForms(r),{metadata:t};})();}}t.ActorRdfMetadataExtractHydraControls=a,a.HYDRA="http://www.w3.org/ns/hydra/core#",a.LINK_TYPES=["first","next","previous","last"];},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfMetadataExtractQuery=void 0;var n=r(346),i=r(163),a=r(158),s=r(164);class o extends a.ActorRdfMetadataExtract{constructor(e,t,r){super(r),this.graphqlClient=new n.Client({context:e,queryEngine:new s.GraphQlQueryEngine(this.queryEngine)}),this.sparqlOperation=this.graphqlClient.graphQlToSparql({query:t});}queryData(e,t){var _this69=this;return _asyncToGenerator(function*(){var r=yield i.storeStream(e),{data:n}=yield _this69.graphqlClient.query(Object.assign(Object.assign({},yield _this69.sparqlOperation),{queryEngineOptions:{source:{type:"rdfjsSource",value:r},initialBindings:t}}));return n;})();}}t.ActorRdfMetadataExtractQuery=o;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||t.hasOwnProperty(r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(347),t),i(r(371),t);},function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{u(n.next(e));}catch(e){a(e);}}function o(e){try{u(n.throw(e));}catch(e){a(e);}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t);})).then(s,o);}u((n=n.apply(e,t||[])).next());});};Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var i=r(159),a=r(9),s=r(120);t.Client=class{constructor(e){this.context=(e.contextParser||new a.ContextParser()).parse(e.context,{baseIRI:e.baseIRI}),this.queryEngine=e.queryEngine,this.graphqlToSparqlConverter=e.graphqlToSparqlConverter||new i.Converter({dataFactory:e.dataFactory,requireContext:!0}),this.sparqlJsonToTreeConverter=e.sparqlJsonToTreeConverter||new s.Converter({dataFactory:e.dataFactory,materializeRdfJsTerms:!0});}query(e){return n(this,void 0,void 0,function*(){var{sparqlAlgebra:t,singularizeVariables:r}="query"in e?yield this.graphQlToSparql({query:e.query,variables:e.variables}):e,n=yield this.queryEngine.query(t,e.queryEngineOptions);return {data:this.sparqlJsonToTreeConverter.sparqlJsonResultsToTree(n,{singularizeVariables:r})};});}graphQlToSparql(_ref55){var{query:e,variables:t}=_ref55;return n(this,void 0,void 0,function*(){var t={},r={singularizeVariables:t,variablesDict:{}};return {sparqlAlgebra:yield this.graphqlToSparqlConverter.graphqlToSparqlAlgebra(e,(yield this.context).getContextRaw(),r),singularizeVariables:t};});}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.DirectiveNodeHandlerInclude=void 0;var n=r(38);class i extends n.DirectiveNodeHandlerAdapter{constructor(e,t){super("include",e,t);}handle(e,t){var r=this.getDirectiveConditionalValue(e.directive,t);return "Literal"===r.termType&&"false"===r.value?{ignore:!0}:{};}}t.DirectiveNodeHandlerInclude=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.DirectiveNodeHandlerOptional=void 0;var n=r(38);class i extends n.DirectiveNodeHandlerAdapter{constructor(e,t){super("optional",e,t);}handle(e,t){return {operationOverrider:e=>this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),e)};}}t.DirectiveNodeHandlerOptional=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.DirectiveNodeHandlerPlural=void 0;var n=r(48),i=r(38);class a extends i.DirectiveNodeHandlerAdapter{constructor(e,t){super("plural",e,t);}handle(e,t){return this.isDirectiveScopeAll(e.directive)&&(t.singularizeState=n.SingularizeState.PLURAL),delete t.singularizeVariables[this.util.nameToVariable(e.fieldLabel,t).value],{};}}t.DirectiveNodeHandlerPlural=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.DirectiveNodeHandlerSingle=void 0;var n=r(48),i=r(38);class a extends i.DirectiveNodeHandlerAdapter{constructor(e,t){super("single",e,t);}handle(e,t){return this.isDirectiveScopeAll(e.directive)&&(t.singularizeState=n.SingularizeState.SINGLE),t.singularizeVariables[this.util.nameToVariable(e.fieldLabel,t).value]=!0,{};}}t.DirectiveNodeHandlerSingle=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.DirectiveNodeHandlerSkip=void 0;var n=r(38);class i extends n.DirectiveNodeHandlerAdapter{constructor(e,t){super("skip",e,t);}handle(e,t){var r=this.getDirectiveConditionalValue(e.directive,t);return "Literal"===r.termType&&"true"===r.value?{ignore:!0}:{};}}t.DirectiveNodeHandlerSkip=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(17),t),i(r(354),t),i(r(355),t),i(r(356),t),i(r(357),t),i(r(358),t),i(r(359),t),i(r(360),t),i(r(361),t),i(r(362),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerBoolean=void 0;var n=r(17);class i extends n.NodeValueHandlerAdapter{constructor(e,t){super("BooleanValue",e,t),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean");}handle(e,t,r){return {terms:[this.util.dataFactory.literal(e.value?"true":"false",this.datatype)]};}}t.NodeValueHandlerBoolean=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerEnum=void 0;var n=r(17);class i extends n.NodeValueHandlerAdapter{constructor(e,t){super("EnumValue",e,t);}handle(e,t,r){return {terms:[this.util.valueToNamedNode(e.value,r.context)]};}}t.NodeValueHandlerEnum=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerFloat=void 0;var n=r(17);class i extends n.NodeValueHandlerAdapter{constructor(e,t){super("FloatValue",e,t),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#float");}handle(e,t,r){return {terms:[this.util.dataFactory.literal(e.value,this.datatype)]};}}t.NodeValueHandlerFloat=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerInt=void 0;var n=r(17);class i extends n.NodeValueHandlerAdapter{constructor(e,t){super("IntValue",e,t),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#integer");}handle(e,t,r){return {terms:[this.util.dataFactory.literal(e.value,this.datatype)]};}}t.NodeValueHandlerInt=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerList=void 0;var n=r(17);class i extends n.NodeValueHandlerAdapter{constructor(e,t){super("ListValue",e,t),this.nodeFirst=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),this.nodeRest=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),this.nodeNil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil");}handle(e,t,r){var n=[];var i=[];for(var a of e.values){var _e149=this.util.handleNodeValue(a,t,r);for(var _t157 of _e149.terms){n.push(_t157);}_e149.auxiliaryPatterns&&(i=i.concat(_e149.auxiliaryPatterns));}if(this.settings.arraysToRdfLists){var _e150=this.util.dataFactory.blankNode();var _t158=_e150,_a25=n.length;for(var _e151 of n){i.push(this.util.operationFactory.createPattern(_t158,this.nodeFirst,_e151,r.graph));var _n79=0==--_a25?this.nodeNil:this.util.dataFactory.blankNode();i.push(this.util.operationFactory.createPattern(_t158,this.nodeRest,_n79,r.graph)),_t158=_n79;}return {terms:[_e150],auxiliaryPatterns:i};}return {terms:n,auxiliaryPatterns:i};}}t.NodeValueHandlerList=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerNull=void 0;var n=r(17);class i extends n.NodeValueHandlerAdapter{constructor(e,t){super("NullValue",e,t),this.nil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil");}handle(e,t,r){return {terms:[this.nil]};}}t.NodeValueHandlerNull=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerObject=void 0;var n=r(17);class i extends n.NodeValueHandlerAdapter{constructor(e,t){super("ObjectValue",e,t);}handle(e,t,r){var n=this.util.dataFactory.blankNode();var i=[];for(var a of e.fields){var _e152=this.util.handleNodeValue(a.value,t,r);for(var _t159 of _e152.terms){i.push(this.util.createQuadPattern(n,a.name,_t159,r.graph,r.context));}_e152.auxiliaryPatterns&&(i=i.concat(_e152.auxiliaryPatterns));}return {terms:[n],auxiliaryPatterns:i};}}t.NodeValueHandlerObject=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerString=void 0;var n=r(17);class i extends n.NodeValueHandlerAdapter{constructor(e,t){super("StringValue",e,t);}handle(e,t,r){var n=r.context.getContextRaw()[t];var i=null,a=null;return n&&"string"!=typeof n&&(n["@language"]?i=n["@language"]:n["@type"]&&(a=this.util.dataFactory.namedNode(n["@type"]))),{terms:[this.util.dataFactory.literal(e.value,i||a)]};}}t.NodeValueHandlerString=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerVariable=void 0;var n=r(17);class i extends n.NodeValueHandlerAdapter{constructor(e,t){super("Variable",e,t);}handle(e,t,r){var n=e.name.value,i=r.variablesDict[n],a=r.variablesMetaDict[n];if(!i){if(r.ignoreUnknownVariables||a&&!a.mandatory){var _e153=this.util.dataFactory.variable(n);return r.terminalVariables.map(e=>e.value).indexOf(n)<0&&r.terminalVariables.push(_e153),{terms:[_e153]};}throw new Error("Undefined variable: "+n);}if("Variable"===i.kind)throw new Error("Variable refers to another variable: "+n);if(a)if(a.list){if("ListValue"!==i.kind)throw new Error("Expected a list, but got "+i.kind+" for "+n);if(a.type){var _e154=i;for(var _t160 of _e154.values){if(_t160.kind!==a.type)throw new Error("Expected "+a.type+", but got "+_t160.kind+" for "+n);}}}return this.util.handleNodeValue(i,t,r);}}t.NodeValueHandlerVariable=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerDefinitionFragment=void 0;var n=r(86);class i extends n.NodeHandlerDefinitionAdapter{constructor(e,t){super("FragmentDefinition",e,t);}handle(e,t){throw new Error("Illegal state: fragment definitions must be indexed and removed before processing");}}t.NodeHandlerDefinitionFragment=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerDefinitionOperation=void 0;var n=r(86);class i extends n.NodeHandlerDefinitionAdapter{constructor(e,t){super("OperationDefinition",e,t);}handle(e,t){if("query"!==e.operation)throw new Error("Unsupported definition operation: "+e.operation);if(e.variableDefinitions)for(var _r133 of e.variableDefinitions){var _e155=_r133.variable.name.value;_r133.defaultValue&&(t.variablesDict[_e155]||(t.variablesDict[_e155]=_r133.defaultValue));var _n80=_r133.type;var _i57="NonNullType"===_n80.kind;_i57&&(_n80=_n80.type);var a="ListType"===_n80.kind;a&&(_n80=_n80.type);var s=_n80.name.value;t.variablesMetaDict[_e155]={mandatory:_i57,list:a,type:s};}var r=this.getDirectiveOutputs(e.directives,e.name?e.name.value:"",t);if(!r)return this.util.operationFactory.createBgp([]);var n=this.util.joinOperations(e.selectionSet.selections.map(e=>this.util.handleNode(e,t)));return this.handleDirectiveOutputs(r,n);}}t.NodeHandlerDefinitionOperation=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerDocument=void 0;var n=r(6),i=r(62);class a extends i.NodeHandlerAdapter{constructor(e,t){super("Document",e,t);}handle(e,t){var r=this.util.operationFactory.createProject(e.definitions.map(e=>{var r=this.getNodeQuadContextDefinitionNode(e,Object.assign(Object.assign({},t),{ignoreUnknownVariables:!0})),n=Object.assign(Object.assign({},t),{graph:r.graph||t.graph,subject:r.subject||this.util.dataFactory.blankNode()});var i=this.util.handleNode(e,n);return r&&r.auxiliaryPatterns&&(i=this.util.joinOperations([i,this.util.operationFactory.createBgp(r.auxiliaryPatterns)])),i;}).reduce((e,t)=>t?e?this.util.operationFactory.createUnion(e,t):t:e,null),t.terminalVariables);return this.translateBlankNodesToVariables(r);}getNodeQuadContextDefinitionNode(e,t){return "OperationDefinition"===e.kind?this.getNodeQuadContextSelectionSet(e.selectionSet,e.name?e.name.value:"",t):null;}translateBlankNodesToVariables(e){var t=this,r={},i=Array.from(e.variables).reduce((e,t)=>(e[t.value]=!0,e),{});return n.Util.mapOperation(e,{path:(e,t)=>({recurse:!1,result:t.createPath(a(e.subject),e.predicate,a(e.object),a(e.graph))}),pattern:(e,t)=>({recurse:!1,result:t.createPattern(a(e.subject),a(e.predicate),a(e.object),a(e.graph))})});function a(e){if("BlankNode"===e.termType){var _a26=r[e.value];return _a26||(_a26=n.Util.createUniqueVariable(e.value,i,t.util.dataFactory),i[_a26.value]=!0,r[e.value]=_a26),_a26;}return e;}}}t.NodeHandlerDocument=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerSelectionField=void 0;var n=r(63);class i extends n.NodeHandlerSelectionAdapter{constructor(e,t){super("Field",e,t);}handle(e,t){return this.fieldToOperation(t,e,!0);}}t.NodeHandlerSelectionField=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerSelectionFragmentSpread=void 0;var n=r(63);class i extends n.NodeHandlerSelectionAdapter{constructor(e,t){super("FragmentSpread",e,t);}handle(e,t){var r=t.fragmentDefinitions[e.name.value];if(!r)throw new Error("Undefined fragment definition: "+e.name.value);var n={alias:null,arguments:null,directives:r.directives,kind:"Field",name:e.name,selectionSet:r.selectionSet},i=[this.util.newTypePattern(t.subject,r.typeCondition,t)];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(t,n,!1,i));}}t.NodeHandlerSelectionFragmentSpread=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerSelectionInlineFragment=void 0;var n=r(63);class i extends n.NodeHandlerSelectionAdapter{constructor(e,t){super("InlineFragment",e,t);}handle(e,t){var r={alias:null,arguments:null,directives:e.directives,kind:"Field",name:{kind:"Name",value:t.subject.value},selectionSet:e.selectionSet},n=e.typeCondition?[this.util.newTypePattern(t.subject,e.typeCondition,t)]:[];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(t,r,!1,n));}}t.NodeHandlerSelectionInlineFragment=i;},function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{u(n.next(e));}catch(e){a(e);}}function o(e){try{u(n.throw(e));}catch(e){a(e);}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t);})).then(s,o);}u((n=n.apply(e,t||[])).next());});};Object.defineProperty(t,"__esModule",{value:!0}),t.Converter=void 0;var i=r(581),a=r(160),s=r(161),o=r(48),u=r(162);class c{constructor(e){(e=e||{}).variableDelimiter=e.variableDelimiter||"_",e.expressionVariableCounter=e.expressionVariableCounter||0,this.util=new u.Util(e),this.initializeNodeHandlers(e);}static registerNodeHandlers(e,t){e.registerNodeHandler(new a.NodeHandlerDocument(e,t)),e.registerNodeHandler(new a.NodeHandlerDefinitionOperation(e,t)),e.registerNodeHandler(new a.NodeHandlerDefinitionFragment(e,t)),e.registerNodeHandler(new a.NodeHandlerSelectionFragmentSpread(e,t)),e.registerNodeHandler(new a.NodeHandlerSelectionInlineFragment(e,t)),e.registerNodeHandler(new a.NodeHandlerSelectionField(e,t));}static registerNodeValueHandlers(e,t){e.registerNodeValueHandler(new a.NodeValueHandlerVariable(e,t)),e.registerNodeValueHandler(new a.NodeValueHandlerInt(e,t)),e.registerNodeValueHandler(new a.NodeValueHandlerFloat(e,t)),e.registerNodeValueHandler(new a.NodeValueHandlerString(e,t)),e.registerNodeValueHandler(new a.NodeValueHandlerBoolean(e,t)),e.registerNodeValueHandler(new a.NodeValueHandlerNull(e,t)),e.registerNodeValueHandler(new a.NodeValueHandlerEnum(e,t)),e.registerNodeValueHandler(new a.NodeValueHandlerList(e,t)),e.registerNodeValueHandler(new a.NodeValueHandlerObject(e,t));}static registerDirectiveNodeHandlers(e,t){e.registerDirectiveNodeHandler(new s.DirectiveNodeHandlerInclude(e,t)),e.registerDirectiveNodeHandler(new s.DirectiveNodeHandlerOptional(e,t)),e.registerDirectiveNodeHandler(new s.DirectiveNodeHandlerPlural(e,t)),e.registerDirectiveNodeHandler(new s.DirectiveNodeHandlerSingle(e,t)),e.registerDirectiveNodeHandler(new s.DirectiveNodeHandlerSkip(e,t));}graphqlToSparqlAlgebra(e,t,r){return n(this,void 0,void 0,function*(){return this.graphqlToSparqlAlgebraRawContext(e,yield this.util.contextParser.parse(t),r);});}graphqlToSparqlAlgebraRawContext(e,t,r){r=r||{};var n="string"==typeof e?i.parse(e):e,a={context:t,fragmentDefinitions:this.indexFragments(n),graph:this.util.dataFactory.defaultGraph(),path:[],singularizeState:o.SingularizeState.PLURAL,singularizeVariables:r.singularizeVariables||{},subject:null,terminalVariables:[],variablesDict:r.variablesDict||{},variablesMetaDict:{}};return this.util.handleNode(n,a);}indexFragments(e){var t={},r=[];for(var _n81 of e.definitions){"FragmentDefinition"===_n81.kind?t[_n81.name.value]=_n81:r.push(_n81);}return e.definitions=r,t;}initializeNodeHandlers(e){c.registerNodeHandlers(this.util,e),c.registerNodeValueHandlers(this.util,e),c.registerDirectiveNodeHandlers(this.util,e);}}t.Converter=c;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){(function(t){!function(){var r;r="object"==typeof window&&window?window:t,e.exports?e.exports=r.Promise?r.Promise:s:r.Promise||(r.Promise=s);var n=r.setImmediate||function(e){setTimeout(e,1);};function i(e,t){return function(){e.apply(t,arguments);};}var a=Array.isArray||function(e){return "[object Array]"===Object.prototype.toString.call(e);};function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],d(e,i(u,this),i(c,this));}function o(e){var t=this;null!==this._state?n(function(){var r=t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value);}catch(t){return void e.reject(t);}e.resolve(n);}else (t._state?e.resolve:e.reject)(t._value);}):this._deferreds.push(e);}function u(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void d(i(t,e),i(u,this),i(c,this));}this._state=!0,this._value=e,l.call(this);}catch(e){c.call(this,e);}}function c(e){this._state=!1,this._value=e,l.call(this);}function l(){for(var e=0,t=this._deferreds.length;e<t;e++){o.call(this,this._deferreds[e]);}this._deferreds=null;}function h(e,t,r,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n;}function d(e,t,r){var n=!1;try{e(function(e){n||(n=!0,t(e));},function(e){n||(n=!0,r(e));});}catch(e){if(n)return;n=!0,r(e);}}s.prototype.catch=function(e){return this.then(null,e);},s.prototype.then=function(e,t){var r=this;return new s(function(n,i){o.call(r,new h(e,t,n,i));});},s.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&a(arguments[0])?arguments[0]:arguments);return new s(function(t,r){if(0===e.length)return t([]);var n=e.length;function i(a,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var o=s.then;if("function"==typeof o)return void o.call(s,function(e){i(a,e);},r);}e[a]=s,0==--n&&t(e);}catch(e){r(e);}}for(var a=0;a<e.length;a++){i(a,e[a]);}});},s.resolve=function(e){return e&&"object"==typeof e&&e.constructor===s?e:new s(function(t){t(e);});},s.reject=function(e){return new s(function(t,r){r(e);});},s.race=function(e){return new s(function(t,r){for(var n=0,i=e.length;n<i;n++){e[n].then(t,r);}});};}();}).call(this,r(10));},function(e,t,r){!function(t){var r=function(){function e(e){this.options=e;}return e.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options;},e;}(),n=function(){function e(t){return "function"==typeof Object.freeze?function(t){if("object"!=typeof t||null===t)return t;var r,n;for(n in Object.freeze(t),t){t.hasOwnProperty(n)&&"object"==typeof(r=t[n])&&e(r);}return t;}(t):t;}return {isArray:function isArray(e){return "[object Array]"===Object.prototype.toString.apply(e);},isString:function isString(e){return "[object String]"===Object.prototype.toString.apply(e);},isNumber:function isNumber(e){return "[object Number]"===Object.prototype.toString.apply(e);},isBoolean:function isBoolean(e){return "[object Boolean]"===Object.prototype.toString.apply(e);},join:function join(e,t){var r,n="",i=!0;for(r=0;r<e.length;r+=1){i?i=!1:n+=t,n+=e[r];}return n;},map:function map(e,t){for(var r=[],n=0;n<e.length;n+=1){r.push(t(e[n]));}return r;},filter:function filter(e,t){for(var r=[],n=0;n<e.length;n+=1){t(e[n])&&r.push(e[n]);}return r;},deepFreeze:e};}(),i=function(){function e(e){return e>="0"&&e<="9";}return {isAlpha:function isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z";},isDigit:e,isHexDigit:function isHexDigit(t){return e(t)||t>="a"&&t<="f"||t>="A"&&t<="F";}};}(),a=function(){var e=function e(_e156){return unescape(encodeURIComponent(_e156));},t=function t(e){return e<=127?1:194<=e&&e<=223?2:224<=e&&e<=239?3:240<=e&&e<=244?4:0;},r=function r(e){return 128<=e&&e<=191;};function n(e,t){return "%"===e.charAt(t)&&i.isHexDigit(e.charAt(t+1))&&i.isHexDigit(e.charAt(t+2));}function a(e,t){return parseInt(e.substr(t,2),16);}return {encodeCharacter:function encodeCharacter(t){var r,n,i="",a=e(t);for(n=0;n<a.length;n+=1){i+="%"+((r=a.charCodeAt(n))<16?"0":"")+r.toString(16).toUpperCase();}return i;},isPctEncoded:function isPctEncoded(e){if(!n(e,0))return !1;var i=a(e,1),s=t(i);if(0===s)return !1;for(var o=1;o<s;o+=1){if(!n(e,3*o)||!r(a(e,3*o+1)))return !1;}return !0;},pctCharAt:function pctCharAt(e,i){var s=e.charAt(i);if(!n(e,i))return s;var o=a(e,i+1),u=t(o);if(0===u)return s;for(var c=1;c<u;c+=1){if(!n(e,i+3*c)||!r(a(e,i+3*c+1)))return s;}return e.substr(i,3*u);}};}(),s={isVarchar:function isVarchar(e){return i.isAlpha(e)||i.isDigit(e)||"_"===e||a.isPctEncoded(e);},isUnreserved:function isUnreserved(e){return i.isAlpha(e)||i.isDigit(e)||"-"===e||"."===e||"_"===e||"~"===e;},isReserved:function isReserved(e){return ":"===e||"/"===e||"?"===e||"#"===e||"["===e||"]"===e||"@"===e||"!"===e||"$"===e||"&"===e||"("===e||")"===e||"*"===e||"+"===e||","===e||";"===e||"="===e||"'"===e;}},o=function(){function e(e,t){var r,n="",i="";for("number"!=typeof e&&"boolean"!=typeof e||(e=e.toString()),r=0;r<e.length;r+=i.length){i=e.charAt(r),n+=s.isUnreserved(i)||t&&s.isReserved(i)?i:a.encodeCharacter(i);}return n;}return {encode:e,encodePassReserved:function encodePassReserved(t){return e(t,!0);},encodeLiteral:function encodeLiteral(e){var t,r="",n="";for(t=0;t<e.length;t+=n.length){(n=a.pctCharAt(e,t)).length>1?r+=n:r+=s.isReserved(n)||s.isUnreserved(n)?n:a.encodeCharacter(n);}return r;},encodeLiteralCharacter:function encodeLiteralCharacter(e,t){var r=a.pctCharAt(e,t);return r.length>1||s.isReserved(r)||s.isUnreserved(r)?r:a.encodeCharacter(r);}};}(),u=function(){var e={};function t(t){e[t]={symbol:t,separator:"?"===t?"&":""===t||"+"===t||"#"===t?",":t,named:";"===t||"&"===t||"?"===t,ifEmpty:"&"===t||"?"===t?"=":"",first:"+"===t?"":t,encode:"+"===t||"#"===t?o.encodePassReserved:o.encode,toString:function toString(){return this.symbol;}};}return t(""),t("+"),t("#"),t("."),t("/"),t(";"),t("?"),t("&"),{valueOf:function valueOf(t){return e[t]?e[t]:"=,!@|".indexOf(t)>=0?null:e[""];}};}();function c(e){var t;if(null==e)return !1;if(n.isArray(e))return e.length>0;if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return !0;for(t in e){if(e.hasOwnProperty(t)&&c(e[t]))return !0;}return !1;}var l=function(){function e(e){this.literal=o.encodeLiteral(e);}return e.prototype.expand=function(){return this.literal;},e.prototype.toString=e.prototype.expand,e;}(),h=function(){function e(e){var t,n,o=[],c=null,l=null,h=null,p="";function f(){var t=e.substring(l,n);if(0===t.length)throw new r({expressionText:e,message:"a varname must be specified",position:n});c={varname:t,exploded:!1,maxLength:null},l=null;}function g(){if(h===n)throw new r({expressionText:e,message:"after a ':' you have to specify the length",position:n});c.maxLength=parseInt(e.substring(h,n),10),h=null;}for(t=function(t){var i=u.valueOf(t);if(null===i)throw new r({expressionText:e,message:"illegal use of reserved operator",position:n,operator:t});return i;}(e.charAt(0)),n=t.symbol.length,l=n;n<e.length;n+=p.length){if(p=a.pctCharAt(e,n),null!==l){if("."===p){if(l===n)throw new r({expressionText:e,message:"a varname MUST NOT start with a dot",position:n});continue;}if(s.isVarchar(p))continue;f();}if(null!==h){if(n===h&&"0"===p)throw new r({expressionText:e,message:"A :prefix must not start with digit 0",position:n});if(i.isDigit(p)){if(n-h>=4)throw new r({expressionText:e,message:"A :prefix must have max 4 digits",position:n});continue;}g();}if(":"!==p){if("*"!==p){if(","!==p)throw new r({expressionText:e,message:"illegal character",character:p,position:n});o.push(c),c=null,l=n+1;}else {if(null===c)throw new r({expressionText:e,message:"exploded without varspec",position:n});if(c.exploded)throw new r({expressionText:e,message:"exploded twice",position:n});if(c.maxLength)throw new r({expressionText:e,message:"an explode (*) MUST NOT follow to a prefix",position:n});c.exploded=!0;}}else {if(null!==c.maxLength)throw new r({expressionText:e,message:"only one :maxLength is allowed per varspec",position:n});if(c.exploded)throw new r({expressionText:e,message:"an exploeded varspec MUST NOT be varspeced",position:n});h=n+1;}}return null!==l&&f(),null!==h&&g(),o.push(c),new d(e,t,o);}return function(t){var n,i,a=[],s=null,o=0;for(n=0;n<t.length;n+=1){if(i=t.charAt(n),null===o){if(null===s)throw new Error("reached unreachable code");if("{"===i)throw new r({templateText:t,message:"brace already opened",position:n});if("}"===i){if(s+1===n)throw new r({templateText:t,message:"empty braces",position:s});try{a.push(e(t.substring(s+1,n)));}catch(e){if(e.prototype===r.prototype)throw new r({templateText:t,message:e.options.message,position:s+e.options.position,details:e.options});throw e;}s=null,o=n+1;}}else {if("}"===i)throw new r({templateText:t,message:"unopened brace closed",position:n});"{"===i&&(o<n&&a.push(new l(t.substring(o,n))),o=null,s=n);}}if(null!==s)throw new r({templateText:t,message:"unclosed brace",position:s});return o<t.length&&a.push(new l(t.substr(o))),new p(t,a);};}(),d=function(){function e(e){return JSON&&JSON.stringify?JSON.stringify(e):e;}function t(e){if(!c(e))return !0;if(n.isString(e))return ""===e;if(n.isNumber(e)||n.isBoolean(e))return !1;if(n.isArray(e))return 0===e.length;for(var t in e){if(e.hasOwnProperty(t))return !1;}return !0;}function r(e){var t,r=[];for(t in e){e.hasOwnProperty(t)&&r.push({name:t,value:e[t]});}return r;}function i(e,t,r){this.templateText=e,this.operator=t,this.varspecs=r;}function a(e,t,r){var n="";if(r=r.toString(),t.named){if(n+=o.encodeLiteral(e.varname),""===r)return n+=t.ifEmpty;n+="=";}return null!==e.maxLength&&(r=r.substr(0,e.maxLength)),n+=t.encode(r);}function s(e){return c(e.value);}function u(e,i,a){var u=[],l="";if(i.named){if(l+=o.encodeLiteral(e.varname),t(a))return l+=i.ifEmpty;l+="=";}return n.isArray(a)?(u=a,u=n.filter(u,c),u=n.map(u,i.encode),l+=n.join(u,",")):(u=r(a),u=n.filter(u,s),u=n.map(u,function(e){return i.encode(e.name)+","+i.encode(e.value);}),l+=n.join(u,",")),l;}function l(e,i,a){var u=[];return n.isArray(a)?(u=a,u=n.filter(u,c),u=n.map(u,function(r){var n=o.encodeLiteral(e.varname);return t(r)?n+=i.ifEmpty:n+="="+i.encode(r),n;})):(u=r(a),u=n.filter(u,s),u=n.map(u,function(e){var r=o.encodeLiteral(e.name);return t(e.value)?r+=i.ifEmpty:r+="="+i.encode(e.value),r;})),n.join(u,i.separator);}function h(e,t){var i=[],a="";return n.isArray(t)?(i=t,i=n.filter(i,c),i=n.map(i,e.encode),a+=n.join(i,e.separator)):(i=r(t),i=n.filter(i,function(e){return c(e.value);}),i=n.map(i,function(t){return e.encode(t.name)+"="+e.encode(t.value);}),a+=n.join(i,e.separator)),a;}return i.prototype.toString=function(){return this.templateText;},i.prototype.expand=function(r){var i,s,o,d=[],p=this.operator;for(i=0;i<this.varspecs.length;i+=1){if(null!=(o=r[(s=this.varspecs[i]).varname]))if(n.isArray(o),"string"==typeof o||"number"==typeof o||"boolean"==typeof o)d.push(a(s,p,o));else {if(s.maxLength&&c(o))throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+e(o));s.exploded?c(o)&&(p.named?d.push(l(s,p,o)):d.push(h(p,o))):!p.named&&t(o)||d.push(u(s,p,o));}}return 0===d.length?"":p.first+n.join(d,p.separator);},i;}(),p=function(){function e(e,t){this.templateText=e,this.expressions=t,n.deepFreeze(this);}return e.prototype.toString=function(){return this.templateText;},e.prototype.expand=function(e){var t,r="";for(t=0;t<this.expressions.length;t+=1){r+=this.expressions[t].expand(e);}return r;},e.parse=h,e.UriTemplateError=r,e;}();!function(t){e.exports=t;}(p);}();},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(375),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfMetadataExtractHydraCount=void 0;var n=r(85);class i extends n.ActorRdfMetadataExtract{constructor(e){super(e);}test(e){return _asyncToGenerator(function*(){return !0;})();}run(e){return new Promise((t,r)=>{e.metadata.on("error",r),e.metadata.on("data",e=>{this.predicates.includes(e.predicate.value)&&t({metadata:{totalItems:Number.parseInt(e.object.value,10)}});}),e.metadata.on("end",()=>{t({metadata:{totalItems:1/0}});});});}}t.ActorRdfMetadataExtractHydraCount=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(377),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfMetadataExtractSparqlService=void 0;var n=r(85),i=r(13);class a extends n.ActorRdfMetadataExtract{constructor(e){super(e);}test(e){return _asyncToGenerator(function*(){return !0;})();}run(e){return _asyncToGenerator(function*(){return new Promise((t,r)=>{e.metadata.on("error",r);var n={};e.metadata.on("data",t=>{"http://www.w3.org/ns/sparql-service-description#endpoint"!==t.predicate.value||"BlankNode"!==t.subject.termType&&t.subject.value!==e.url?"http://www.w3.org/ns/sparql-service-description#defaultGraph"===t.predicate.value&&(n.defaultGraph=t.object.value):n.sparqlService="Literal"===t.object.termType?i.resolve(t.object.value,e.url):t.object.value;}),e.metadata.on("end",()=>{t({metadata:n});});});})();}}t.ActorRdfMetadataExtractSparqlService=a;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(379),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveHypermediaNone=void 0;var n=r(154),i=r(87),a=r(163);class s extends i.ActorRdfResolveHypermedia{constructor(e){super(e,"file");}testMetadata(e){return _asyncToGenerator(function*(){return {filterFactor:0};})();}run(e){var _this70=this;return _asyncToGenerator(function*(){return _this70.logInfo(e.context,"Identified as file source: "+e.url),{source:new n.RdfJsQuadSource(yield a.storeStream(e.quads))};})();}}t.ActorRdfResolveHypermediaNone=s;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveHypermedia=void 0;var n=r(0);class i extends n.Actor{constructor(e,t){super(e),this.sourceType=t;}test(e){var _this71=this;return _asyncToGenerator(function*(){if(e.forceSourceType&&_this71.sourceType!==e.forceSourceType)throw new Error("Actor "+_this71.name+" is not able to handle source type "+e.forceSourceType+".");return _this71.testMetadata(e);})();}}t.ActorRdfResolveHypermedia=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(382),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveHypermediaLinksNext=void 0;var n=r(383);class i extends n.ActorRdfResolveHypermediaLinks{constructor(e){super(e);}test(e){var _this72=this;return _asyncToGenerator(function*(){if(!e.metadata.next)throw new Error("Actor "+_this72.name+" requires a 'next' metadata entry.");return !0;})();}run(e){return _asyncToGenerator(function*(){return {urls:[e.metadata.next]};})();}}t.ActorRdfResolveHypermediaLinksNext=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(384),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveHypermediaLinks=void 0;var n=r(0);class i extends n.Actor{constructor(e){super(e);}}t.ActorRdfResolveHypermediaLinks=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(166),t),i(r(386),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorHttpInvalidateListenable=void 0;var n=r(166);class i extends n.ActorHttpInvalidate{constructor(e){super(e),this.invalidateListeners=[];}addInvalidateListener(e){this.invalidateListeners.push(e);}test(e){return _asyncToGenerator(function*(){return !0;})();}run(e){var _this73=this;return _asyncToGenerator(function*(){for(var _t161 of _this73.invalidateListeners){_t161(e);}return !0;})();}}t.ActorHttpInvalidateListenable=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(388),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.MediatorAll=void 0;var n=r(0);class i extends n.Mediator{constructor(e){super(e);}mediate(e){var _this74=this;return _asyncToGenerator(function*(){var t=[];var r;try{r=_this74.publish(e);}catch(e){r=[];}for(var _e157 of r){try{yield _e157.reply,t.push(_e157.actor);}catch(e){}}return (yield Promise.all(t.map(t=>t.runObservable(e))))[0];})();}mediateWith(){return _asyncToGenerator(function*(){throw new Error("Unsupported operation: MediatorAll#mediateWith");})();}}t.MediatorAll=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.MediatorCombinePipeline=void 0;var n=r(0);class i extends n.Mediator{constructor(e){super(e);}mediate(e){var _this75=this;return _asyncToGenerator(function*(){var t;try{t=_this75.publish(e);}catch(t){return e;}yield Promise.all(t.map(_ref56=>{var{reply:e}=_ref56;return e;}));var r=e;for(var _e158 of t.map(e=>e.actor)){r=yield _e158.runObservable(r);}return r;})();}mediateWith(){throw new Error("Method not supported.");}}t.MediatorCombinePipeline=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(391),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorOptimizeQueryOperationJoinBgp=void 0;var n=r(392),i=r(6);class a extends n.ActorOptimizeQueryOperation{constructor(e){super(e);}test(e){return _asyncToGenerator(function*(){return !0;})();}run(e){return _asyncToGenerator(function*(){return {operation:i.Util.mapOperation(e.operation,{join:(e,t)=>"bgp"===e.left.type&&"bgp"===e.right.type?{recurse:!1,result:t.createBgp(e.left.patterns.concat(e.right.patterns))}:{recurse:!1,result:e}})};})();}}t.ActorOptimizeQueryOperationJoinBgp=a;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(393),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorOptimizeQueryOperation=void 0;var n=r(0);class i extends n.Actor{constructor(e){super(e);}}t.ActorOptimizeQueryOperation=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(395),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorSparqlParseGraphql=void 0;var n=r(168),i=r(159);class a extends n.ActorSparqlParse{constructor(e){super(e),this.graphqlToSparql=new i.Converter({requireContext:!0});}test(e){return _asyncToGenerator(function*(){if("graphql"!==e.queryFormat)throw new Error("This actor can only parse GraphQL queries");return !0;})();}run(e){var _this76=this;return _asyncToGenerator(function*(){var t=e.context&&e.context.has("@context")?e.context.get("@context"):{},r={singularizeVariables:e.context&&e.context.get("@comunica/actor-init-sparql:singularizeVariables")};return {operation:yield _this76.graphqlToSparql.graphqlToSparqlAlgebra(e.query,t,r)};})();}}t.ActorSparqlParseGraphql=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorSparqlParse=void 0;var n=r(0);class i extends n.Actor{constructor(e){super(e);}}t.ActorSparqlParse=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(398),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorSparqlParseAlgebra=void 0;var n=r(168),i=r(6),a=r(30);class s extends n.ActorSparqlParse{constructor(e){super(e),this.prefixes=Object.freeze(this.prefixes);}test(e){return _asyncToGenerator(function*(){if(e.queryFormat&&"sparql"!==e.queryFormat)throw new Error("This actor can only parse SPARQL queries");return !0;})();}run(e){var _this77=this;return _asyncToGenerator(function*(){var t=new a.Parser({prefixes:_this77.prefixes,baseIRI:e.baseIRI});t._resetBlanks();var r=t.parse(e.query);return {baseIRI:"query"===r.type?r.base:void 0,operation:i.translate(r,{quads:!0,prefixes:_this77.prefixes,blankToVariable:!0,baseIRI:e.baseIRI})};})();}}t.ActorSparqlParseAlgebra=s;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(400),t);},function(e,t,r){(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorSparqlSerializeJson=void 0;var n=r(2),i=r(15),a=r(4);class s extends i.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e);}testHandleChecked(e,t){return _asyncToGenerator(function*(){if(!["bindings","quads","boolean"].includes(e.type))throw new Error("This actor can only handle bindings or quad streams.");return !0;})();}runHandle(t,r,i){return _asyncToGenerator(function*(){var s=new n.Readable();s._read=()=>{};var o=!0;if("bindings"===t.type){var _e159=t.bindingsStream;s.push("["),_e159.on("error",e=>s.emit("error",e)),_e159.on("data",e=>{s.push(o?"\n":",\n"),s.push(JSON.stringify(e.map(a.termToString))),o=!1;}),_e159.on("end",()=>{s.push(o?"]\n":"\n]\n"),s.push(null);});}else if("quads"===t.type){var _e160=t.quadStream;s.push("["),_e160.on("error",e=>s.emit("error",e)),_e160.on("data",e=>{s.push(o?"\n":",\n"),s.push(JSON.stringify(a.quadToStringQuad(e))),o=!1;}),_e160.on("end",()=>{s.push(o?"]\n":"\n]\n"),s.push(null);});}else try{s.push(JSON.stringify(yield t.booleanResult)+"\n"),s.push(null);}catch(t){e(()=>s.emit("error",t));}return {data:s};})();}}t.ActorSparqlSerializeJson=s;}).call(this,r(44).setImmediate);},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(402),t);},function(e,t,r){(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorSparqlSerializeSimple=void 0;var n=r(2),i=r(15);class a extends i.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e);}testHandleChecked(e,t){return _asyncToGenerator(function*(){if(!["bindings","quads","boolean"].includes(e.type))throw new Error("This actor can only handle bindings streams, quad streams or booleans.");return !0;})();}runHandle(t,r,i){return _asyncToGenerator(function*(){var a=new n.Readable();var s;if(a._read=()=>{},"bindings"===t.type)s=t.bindingsStream,s.on("error",e=>a.emit("error",e)),s.on("data",e=>a.push(e.map((e,t)=>t+": "+e.value).join("\n")+"\n\n")),s.on("end",()=>a.push(null));else if("quads"===t.type)s=t.quadStream,s.on("error",e=>a.emit("error",e)),s.on("data",e=>a.push("subject: "+e.subject.value+"\npredicate: "+e.predicate.value+"\nobject: "+e.object.value+"\ngraph: "+e.graph.value+"\n\n")),s.on("end",()=>a.push(null));else try{a.push(JSON.stringify(yield t.booleanResult)+"\n"),a.push(null);}catch(t){e(()=>a.emit("error",t));}return {data:a};})();}}t.ActorSparqlSerializeSimple=a;}).call(this,r(44).setImmediate);},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(404),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorSparqlSerializeSparqlCsv=void 0;var n=r(2),i=r(15);class a extends i.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e);}static bindingToCsvBindings(e){if(!e)return "";var t=e.value;return t="Literal"===e.termType?""+t:"BlankNode"===e.termType?"_:"+t:"<"+t+">",/[\n\r",]/.exec(t)&&(t="\""+t.replace(/"/g,'""')+"\""),t;}testHandleChecked(e,t){return _asyncToGenerator(function*(){if("bindings"!==e.type)throw new Error("This actor can only handle bindings streams.");return !0;})();}runHandle(e,t,r){return _asyncToGenerator(function*(){var i=e,s=new n.Readable();return s._read=()=>{},s.push(i.variables.map(e=>e.slice(1)).join(",")+"\r\n"),i.bindingsStream.on("error",e=>{s.emit("error",e);}),i.bindingsStream.on("data",e=>{s.push(i.variables.map(t=>a.bindingToCsvBindings(e.get(t))).join(",")+"\r\n");}),i.bindingsStream.on("end",()=>{s.push(null);}),{data:s};})();}}t.ActorSparqlSerializeSparqlCsv=a;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(406),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorSparqlSerializeSparqlJson=void 0;var n=r(2),i=r(15);class a extends i.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e);}static bindingToJsonBindings(e){if("Literal"===e.termType){var _t162=e,_r134={value:_t162.value,type:"literal"},{language:_n82}=_t162,{datatype:_i58}=_t162;return _n82?_r134["xml:lang"]=_n82:_i58&&"http://www.w3.org/2001/XMLSchema#string"!==_i58.value&&(_r134.datatype=_i58.value),_r134;}return "BlankNode"===e.termType?{value:e.value,type:"bnode"}:{value:e.value,type:"uri"};}testHandleChecked(e,t){return _asyncToGenerator(function*(){if(!["bindings","boolean"].includes(e.type))throw new Error("This actor can only handle bindings streams or booleans.");return !0;})();}runHandle(e,t,r){return _asyncToGenerator(function*(){var i=new n.Readable();i._read=()=>{};var s={};"bindings"===e.type&&e.variables.length>0&&(s.vars=e.variables.map(e=>e.slice(1))),i.push("{\"head\": "+JSON.stringify(s)+",\n");var o=!0;if("bindings"===e.type){var _t163=e.bindingsStream;_t163.on("error",e=>{i.emit("error",e);}),_t163.on("data",e=>{o?i.push('"results": { "bindings": [\n'):i.push(",\n");var t=e.filter((e,t)=>Boolean(e)&&t.startsWith("?"));i.push(JSON.stringify(t.mapEntries(_ref57=>{var[e,t]=_ref57;return [e.slice(1),a.bindingToJsonBindings(t)];}).toJSON())),o=!1;}),_t163.on("end",()=>{o?i.push('"results": { "bindings": [] }}\n'):i.push("\n]}}\n"),i.push(null);});}else try{i.push("\"boolean\":"+(yield e.booleanResult)+"\n}\n"),i.push(null);}catch(e){i.once("newListener",()=>i.emit("error",e));}return {data:i};})();}}t.ActorSparqlSerializeSparqlJson=a;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(408),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorSparqlSerializeSparqlTsv=void 0;var n=r(2),i=r(15),a=r(409);class s extends i.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e);}static bindingToTsvBindings(e){return e?a.termToString(e).replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r"):"";}testHandleChecked(e,t){return _asyncToGenerator(function*(){if("bindings"!==e.type)throw new Error("This actor can only handle bindings streams.");return !0;})();}runHandle(e,t,r){return _asyncToGenerator(function*(){var i=e,a=new n.Readable();return a._read=()=>{},a.push(i.variables.map(e=>e.slice(1)).join("\t")+"\n"),i.bindingsStream.on("error",e=>{a.emit("error",e);}),i.bindingsStream.on("data",e=>{a.push(i.variables.map(t=>s.bindingToTsvBindings(e.get(t))).join("\t")+"\n");}),i.bindingsStream.on("end",()=>{a.push(null);}),{data:a};})();}}t.ActorSparqlSerializeSparqlTsv=s;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.termToString=t.stringToTerm=t.stringQuadToQuad=t.quadToStringQuad=t.getLiteralValue=t.getLiteralType=t.getLiteralLanguage=void 0;var n=r(410);Object.defineProperty(t,"getLiteralLanguage",{enumerable:!0,get:function get(){return n.getLiteralLanguage;}}),Object.defineProperty(t,"getLiteralType",{enumerable:!0,get:function get(){return n.getLiteralType;}}),Object.defineProperty(t,"getLiteralValue",{enumerable:!0,get:function get(){return n.getLiteralValue;}}),Object.defineProperty(t,"quadToStringQuad",{enumerable:!0,get:function get(){return n.quadToStringQuad;}}),Object.defineProperty(t,"stringQuadToQuad",{enumerable:!0,get:function get(){return n.stringQuadToQuad;}}),Object.defineProperty(t,"stringToTerm",{enumerable:!0,get:function get(){return n.stringToTerm;}}),Object.defineProperty(t,"termToString",{enumerable:!0,get:function get(){return n.termToString;}});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.stringQuadToQuad=t.quadToStringQuad=t.stringToTerm=t.getLiteralLanguage=t.getLiteralType=t.getLiteralValue=t.termToString=void 0;var n=new(r(5).DataFactory)();function i(e){if(e)switch(e.termType){case"NamedNode":return "<"+e.value+">";case"BlankNode":return "_:"+e.value;case"Literal":var _t164=e;return '"'+_t164.value.replace(/"/g,'\\"')+'"'+(_t164.datatype&&"http://www.w3.org/2001/XMLSchema#string"!==_t164.datatype.value&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"!==_t164.datatype.value?"^^<"+_t164.datatype.value+">":"")+(_t164.language?"@"+_t164.language:"");case"Quad":return "<<"+i(e.subject)+" "+i(e.predicate)+" "+i(e.object)+("DefaultGraph"===e.graph.termType?"":" "+i(e.graph))+">>";case"Variable":return "?"+e.value;case"DefaultGraph":return e.value;}}function a(e){var t=/^"([^]*)"((\^\^.*)|(@.*))?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1].replace(/\\"/g,'"');}function s(e){var t=/^"[^]*"(?:\^\^<([^"]+)>|(@)[^@"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]||(t[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string");}function o(e){var t=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]?t[1].toLowerCase():"";}function u(e,t){if(t=t||n,!e||!e.length)return t.defaultGraph();switch(e[0]){case"_":return t.blankNode(e.substr(2));case"?":if(!t.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return t.variable(e.substr(1));case'"':var _r135=o(e),_n83=t.namedNode(s(e));return t.literal(a(e),_r135||_n83);case"<":default:if(e.startsWith("<<")&&e.endsWith(">>")){var _r136=e.slice(2,-2),_n84=[];var _i59=0,_a27=0;for(var _t165=0;_t165<_r136.length;_t165++){var _s16=_r136[_t165];if("<"===_s16&&_i59++,">"===_s16){if(0===_i59)throw new Error("Found closing tag without opening tag in "+e);_i59--;}" "===_s16&&0===_i59&&(_n84.push(_r136.slice(_a27,_t165)),_a27=_t165+1);}if(0!==_i59)throw new Error("Found opening tag without closing tag in "+e);if(_n84.push(_r136.slice(_a27,_r136.length)),3!==_n84.length&&4!==_n84.length)throw new Error("Nested quad syntax error "+e);return t.quad(u(_n84[0]),u(_n84[1]),u(_n84[2]),_n84[3]?u(_n84[3]):void 0);}if("<"!==e.charAt(0)||">"!==e.charAt(e.length-1))throw new Error("Detected invalid iri for named node (must be wrapped in <>): "+e);return t.namedNode(e.substring(1,e.length-1));}}t.termToString=i,t.getLiteralValue=a,t.getLiteralType=s,t.getLiteralLanguage=o,t.stringToTerm=u,t.quadToStringQuad=function(e){return {subject:i(e.subject),predicate:i(e.predicate),object:i(e.object),graph:i(e.graph)};},t.stringQuadToQuad=function(e,t){return (t=t||n).quad(u(e.subject,t),u(e.predicate,t),u(e.object,t),u(e.graph,t));};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(412),t);},function(e,t,r){(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorSparqlSerializeSparqlXml=void 0;var n=r(2),i=r(15),a=r(413);class s extends i.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e);}static bindingToXmlBindings(e,t){var r;if("Literal"===e.termType){var _t166=e;r={literal:_t166.value};var{language:_n85}=_t166,{datatype:_i60}=_t166;_n85?r.literal=[{_attr:{"xml:lang":_n85}},r.literal]:_i60&&"http://www.w3.org/2001/XMLSchema#string"!==_i60.value&&(r.literal=[{_attr:{datatype:_i60.value}},r.literal]);}else r="BlankNode"===e.termType?{bnode:e.value}:{uri:e.value};return {binding:[{_attr:{name:t.slice(1)}},r]};}testHandleChecked(e,t){return _asyncToGenerator(function*(){if(!["bindings","boolean"].includes(e.type))throw new Error("This actor can only handle bindings streams or booleans.");return !0;})();}runHandle(t,r,i){return _asyncToGenerator(function*(){var o=new n.Readable();o._read=()=>{};var u=a.element({_attr:{xlmns:"http://www.w3.org/2005/sparql-results#"}});if(a({sparql:u},{stream:!0,indent:"  ",declaration:!0}).on("data",e=>o.push(e+"\n")),"bindings"===t.type&&t.variables.length>0&&u.push({head:t.variables.map(e=>({variable:{_attr:{name:e.slice(1)}}}))}),"bindings"===t.type){var _r137=a.element({});u.push({results:_r137});var _n86=t.bindingsStream;_n86.on("error",e=>{o.emit("error",e);}),_n86.on("data",e=>{var t=e.filter((e,t)=>Boolean(e)&&t.startsWith("?"));_r137.push({result:t.map(s.bindingToXmlBindings)});}),_n86.on("end",()=>{_r137.close(),u.close(),e(()=>o.push(null));});}else try{u.push({boolean:yield t.booleanResult}),u.close(),e(()=>o.push(null));}catch(t){e(()=>o.emit("error",t));}return {data:o};})();}}t.ActorSparqlSerializeSparqlXml=s;}).call(this,r(44).setImmediate);},function(e,t,r){(function(t){var n=r(414),i=r(2).Stream;function a(e,t,r){r=r||0;var i,s,o=(i=t,new Array(r||0).join(i||"")),u=e;if("object"==typeof e&&(u=e[s=Object.keys(e)[0]])&&u._elem)return u._elem.name=s,u._elem.icount=r,u._elem.indent=t,u._elem.indents=o,u._elem.interrupt=u,u._elem;var c,l=[],h=[];function d(e){Object.keys(e).forEach(function(t){l.push(function(e,t){return e+'="'+n(t)+'"';}(t,e[t]));});}switch(typeof u){case"object":if(null===u)break;u._attr&&d(u._attr),u._cdata&&h.push(("<![CDATA["+u._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),u.forEach&&(c=!1,h.push(""),u.forEach(function(e){"object"==typeof e?"_attr"==Object.keys(e)[0]?d(e._attr):h.push(a(e,t,r+1)):(h.pop(),c=!0,h.push(n(e)));}),c||h.push(""));break;default:h.push(n(u));}return {name:s,interrupt:!1,attributes:l,content:h,icount:r,indents:o,indent:t};}function s(e,t,r){if("object"!=typeof t)return e(!1,t);var n=t.interrupt?1:t.content.length;function i(){for(;t.content.length;){var i=t.content.shift();if(void 0!==i){if(a(i))return;s(e,i);}}e(!1,(n>1?t.indents:"")+(t.name?"</"+t.name+">":"")+(t.indent&&!r?"\n":"")),r&&r();}function a(t){return !!t.interrupt&&(t.interrupt.append=e,t.interrupt.end=i,t.interrupt=!1,e(!0),!0);}if(e(!1,t.indents+(t.name?"<"+t.name:"")+(t.attributes.length?" "+t.attributes.join(" "):"")+(n?t.name?">":"":t.name?"/>":"")+(t.indent&&n>1?"\n":"")),!n)return e(!1,t.indent?"\n":"");a(t)||i();}e.exports=function(e,r){"object"!=typeof r&&(r={indent:r});var n,o,u=r.stream?new i():null,c="",l=!1,h=r.indent?!0===r.indent?"    ":r.indent:"",d=!0;function p(e){d?t.nextTick(e):e();}function f(e,t){if(void 0!==t&&(c+=t),e&&!l&&(u=u||new i(),l=!0),e&&l){var r=c;p(function(){u.emit("data",r);}),c="";}}function g(e,t){s(f,a(e,h,h?1:0),t);}function m(){if(u){var e=c;p(function(){u.emit("data",e),u.emit("end"),u.readable=!1,u.emit("close");});}}return p(function(){d=!1;}),r.declaration&&(n=r.declaration,o={version:"1.0",encoding:n.encoding||"UTF-8"},n.standalone&&(o.standalone=n.standalone),g({"?xml":{_attr:o}}),c=c.replace("/>","?>")),e&&e.forEach?e.forEach(function(t,r){var n;r+1===e.length&&(n=m),g(t,n);}):g(e,m),u?(u.readable=!0,u):c;},e.exports.element=e.exports.Element=function(){var e=Array.prototype.slice.call(arguments),t={_elem:a(e),push:function push(e){if(!this.append)throw new Error("not assigned to a parent!");var t=this,r=this._elem.indent;s(this.append,a(e,r,this._elem.icount+(r?1:0)),function(){t.append(!0);});},close:function close(e){void 0!==e&&this.push(e),this.end&&this.end();}};return t;};}).call(this,r(8));},function(e,t){var r={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};e.exports=function(e){return e&&e.replace?e.replace(/([&"<>'])/g,function(e,t){return r[t];}):e;};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(416),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorSparqlSerializeTable=void 0;var n=r(2),i=r(15),a=r(18);class s extends i.ActorSparqlSerializeFixedMediaTypes{constructor(e){super(e),this.padding=s.repeat(" ",this.columnWidth);}static repeat(e,t){return new Array(t+1).join(e);}testHandleChecked(e,t){return _asyncToGenerator(function*(){if(!["bindings","quads"].includes(e.type))throw new Error("This actor can only handle bindings or quad streams.");return !0;})();}pad(e){return e.length<=this.columnWidth?e+this.padding.slice(e.length):e.slice(0,this.columnWidth-1)+"…";}pushHeader(e,t){var r=t.map(e=>this.pad(e)).join(" ");e.push(r+"\n"+s.repeat("-",r.length)+"\n");}pushRow(e,t,r){e.push(t.map(e=>r.has(e)?r.get(e).value:"").map(e=>this.pad(e)).join(" ")+"\n");}runHandle(e,t,r){var _this78=this;return _asyncToGenerator(function*(){var i=new n.Readable();var s;if(i._read=()=>{},"bindings"===e.type){s=e.bindingsStream;var _t167=e.variables;_this78.pushHeader(i,_t167),s.on("error",e=>i.emit("error",e)),s.on("data",e=>_this78.pushRow(i,_t167,e));}else s=e.quadStream,_this78.pushHeader(i,a.QUAD_TERM_NAMES),s.on("error",e=>i.emit("error",e)),s.on("data",e=>i.push(a.getTerms(e).map(e=>_this78.pad(e.value)).join(" ")+"\n"));return s.on("end",()=>i.push(null)),{data:i};})();}}t.ActorSparqlSerializeTable=s;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=new(r(5).DataFactory)();function i(e,t){return t&&"DefaultGraph"===e.graph.termType?[e.subject,e.predicate,e.object]:[e.subject,e.predicate,e.object,e.graph];}function a(e,t){return !t||"Variable"===t.termType||"Quad"===t.termType&&"Quad"===e.termType&&o(e,t)||t.equals(e);}function s(e,t,r,n,i){return a(e.subject,t)&&a(e.predicate,r)&&a(e.object,n)&&a(e.graph,i);}function o(e,t){return s(e,t.subject,t.predicate,t.object,t.graph);}t.QUAD_TERM_NAMES=["subject","predicate","object","graph"],t.TRIPLE_TERM_NAMES=["subject","predicate","object"],t.getTerms=i,t.getTermsNested=function e(t,r){var n=[];for(var _a28 of i(t,r)){"Quad"===_a28.termType?e(_a28,r).forEach(e=>n.push(e)):n.push(_a28);}return n;},t.getNamedTerms=function(e){return [{key:"subject",value:e.subject},{key:"predicate",value:e.predicate},{key:"object",value:e.object},{key:"graph",value:e.graph}];},t.collectNamedTerms=function(e,t,r){var i={};return e.forEach(e=>i[e.key]=e.value),t&&(i.subject=i.subject||t("subject"),i.predicate=i.predicate||t("predicate"),i.object=i.object||t("object"),i.graph=i.graph||t("graph")),(r||n).quad(i.subject,i.predicate,i.object,i.graph);},t.forEachTerms=function(e,t){t(e.subject,"subject"),t(e.predicate,"predicate"),t(e.object,"object"),t(e.graph,"graph");},t.filterTerms=function(e,t){var r=[];return t(e.subject,"subject")&&r.push(e.subject),t(e.predicate,"predicate")&&r.push(e.predicate),t(e.object,"object")&&r.push(e.object),t(e.graph,"graph")&&r.push(e.graph),r;},t.filterQuadTermNames=function(e,t){var r=[];return t(e.subject,"subject")&&r.push("subject"),t(e.predicate,"predicate")&&r.push("predicate"),t(e.object,"object")&&r.push("object"),t(e.graph,"graph")&&r.push("graph"),r;},t.mapTerms=function(e,t,r){return (r||n).quad(t(e.subject,"subject"),t(e.predicate,"predicate"),t(e.object,"object"),t(e.graph,"graph"));},t.reduceTerms=function(e,t,r){var n=r;return n=t(n,e.subject,"subject"),n=t(n,e.predicate,"predicate"),n=t(n,e.object,"object"),t(n,e.graph,"graph");},t.everyTerms=function(e,t){return t(e.subject,"subject")&&t(e.predicate,"predicate")&&t(e.object,"object")&&t(e.graph,"graph");},t.someTerms=function(e,t){return t(e.subject,"subject")||t(e.predicate,"predicate")||t(e.object,"object")||t(e.graph,"graph");},t.matchTerm=a,t.matchPattern=s,t.matchPatternComplete=o;},function(e,t,r){function n(e,t){return e.filter(e=>e.termType===t);}Object.defineProperty(t,"__esModule",{value:!0}),t.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"],t.uniqTerms=function(e){return r(419)(e,(e,t)=>e.equals(t));},t.getTermsOfType=n,t.getNamedNodes=function(e){return n(e,"NamedNode");},t.getBlankNodes=function(e){return n(e,"BlankNode");},t.getLiterals=function(e){return n(e,"Literal");},t.getVariables=function(e){return n(e,"Variable");},t.getDefaultGraphs=function(e){return n(e,"DefaultGraph");},t.getQuads=function(e){return n(e,"Quad");};},function(e,t,r){(function(t){var r=/^\[object .+?Constructor\]$/,n="object"==typeof t&&t&&t.Object===Object&&t,i="object"==typeof self&&self&&self.Object===Object&&self,a=n||i||Function("return this")();function s(e,t){return !!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r,n){var i=e.length,a=r+(n?1:-1);for(;n?a--:++a<i;){if(t(e[a],a,e))return a;}return -1;}(e,u,r);var n=r-1,i=e.length;for(;++n<i;){if(e[n]===t)return n;}return -1;}(e,t,0)>-1;}function o(e,t,r){for(var n=-1,i=e?e.length:0;++n<i;){if(r(t,e[n]))return !0;}return !1;}function u(e){return e!=e;}function c(e,t){return e.has(t);}function l(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e;}),r;}var h,d=Array.prototype,p=Function.prototype,f=Object.prototype,g=a["__core-js_shared__"],m=(h=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+h:"",y=p.toString,b=f.hasOwnProperty,_=f.toString,v=RegExp("^"+y.call(b).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=d.splice,S=D(a,"Map"),T=D(a,"Set"),E=D(Object,"create");function x(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1]);}}function O(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1]);}}function A(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1]);}}function R(e){var t=-1,r=e?e.length:0;for(this.__data__=new A();++t<r;){this.add(e[t]);}}function I(e,t){for(var r,n,i=e.length;i--;){if((r=e[i][0])===(n=t)||r!=r&&n!=n)return i;}return -1;}function N(e){return !(!j(e)||(t=e,m&&m in t))&&(function(e){var t=j(e)?_.call(e):"";return "[object Function]"==t||"[object GeneratorFunction]"==t;}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"");}catch(e){}return t;}(e)?v:r).test(function(e){if(null!=e){try{return y.call(e);}catch(e){}try{return e+"";}catch(e){}}return "";}(e));var t;}x.prototype.clear=function(){this.__data__=E?E(null):{};},x.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e];},x.prototype.get=function(e){var t=this.__data__;if(E){var r=t[e];return "__lodash_hash_undefined__"===r?void 0:r;}return b.call(t,e)?t[e]:void 0;},x.prototype.has=function(e){var t=this.__data__;return E?void 0!==t[e]:b.call(t,e);},x.prototype.set=function(e,t){return this.__data__[e]=E&&void 0===t?"__lodash_hash_undefined__":t,this;},O.prototype.clear=function(){this.__data__=[];},O.prototype.delete=function(e){var t=this.__data__,r=I(t,e);return !(r<0)&&(r==t.length-1?t.pop():w.call(t,r,1),!0);},O.prototype.get=function(e){var t=this.__data__,r=I(t,e);return r<0?void 0:t[r][1];},O.prototype.has=function(e){return I(this.__data__,e)>-1;},O.prototype.set=function(e,t){var r=this.__data__,n=I(r,e);return n<0?r.push([e,t]):r[n][1]=t,this;},A.prototype.clear=function(){this.__data__={hash:new x(),map:new(S||O)(),string:new x()};},A.prototype.delete=function(e){return C(this,e).delete(e);},A.prototype.get=function(e){return C(this,e).get(e);},A.prototype.has=function(e){return C(this,e).has(e);},A.prototype.set=function(e,t){return C(this,e).set(e,t),this;},R.prototype.add=R.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this;},R.prototype.has=function(e){return this.__data__.has(e);};var P=T&&1/l(new T([,-0]))[1]==1/0?function(e){return new T(e);}:function(){};function C(e,t){var r,n,i=e.__data__;return ("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map;}function D(e,t){var r=function(e,t){return null==e?void 0:e[t];}(e,t);return N(r)?r:void 0;}function j(e){var t=typeof e;return !!e&&("object"==t||"function"==t);}e.exports=function(e,t){return e&&e.length?function(e,t,r){var n=-1,i=s,a=e.length,u=!0,h=[],d=h;if(r)u=!1,i=o;else if(a>=200){var p=t?null:P(e);if(p)return l(p);u=!1,i=c,d=new R();}else d=t?[]:h;e:for(;++n<a;){var f=e[n],g=t?t(f):f;if(f=r||0!==f?f:0,u&&g==g){for(var m=d.length;m--;){if(d[m]===g)continue e;}t&&d.push(g),h.push(f);}else i(d,g,r)||(d!==h&&d.push(g),h.push(f));}return h;}(e,void 0,t):[];};}).call(this,r(10));},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(421),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationBgpEmpty=void 0;var n=r(1),i=r(3),a=r(4),s=r(18);class o extends n.ActorQueryOperationTyped{constructor(e){super(e,"bgp");}static getVariables(e){return s.uniqTerms(e.map(e=>s.getTerms(e).filter(e=>"Variable"===e.termType)).reduce((e,t)=>e.concat(t),[])).map(e=>a.termToString(e));}testOperation(e,t){var _this79=this;return _asyncToGenerator(function*(){if(e.patterns.length>0)throw new Error("Actor "+_this79.name+" can only operate on empty BGPs.");return !0;})();}runOperation(e,t){return _asyncToGenerator(function*(){return {bindingsStream:new i.SingletonIterator(n.Bindings({})),metadata:()=>Promise.resolve({totalItems:1}),type:"bindings",variables:o.getVariables(e.patterns),canContainUndefs:!1};})();}}t.ActorQueryOperationBgpEmpty=o;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(423),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationValues=void 0;var n=r(1),i=r(3),a=r(4);class s extends n.ActorQueryOperationTyped{constructor(e){super(e,"values");}testOperation(e,t){return _asyncToGenerator(function*(){return !0;})();}runOperation(e,t){return _asyncToGenerator(function*(){var r=new i.ArrayIterator(e.bindings.map(e=>n.Bindings(e))),s=e.variables.map(e=>a.termToString(e)),o=e.bindings.some(e=>s.some(t=>!(t in e)));return {type:"bindings",bindingsStream:r,metadata:()=>Promise.resolve({totalItems:e.bindings.length}),variables:s,canContainUndefs:o};})();}}t.ActorQueryOperationValues=s;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(425),t),i(r(171),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_CONTEXT_STRICTVALUES=t.KEY_CONTEXT_DOCUMENTLOADER=t.ActorRdfParseJsonLd=void 0;var n=r(46),i=r(426),a=r(171);class s extends n.ActorRdfParseFixedMediaTypes{constructor(e){super(e);}testHandle(e,t,r){var _this80=this;return _asyncToGenerator(function*(){if(r&&r.has("@comunica/actor-rdf-parse-html-script:processing-html-script")&&"application/ld+json"!==t)throw new Error("JSON-LD in script tags can only have media type 'application/ld+json'");if(!(t in _this80.mediaTypes)&&!t.endsWith("+json"))throw new Error("Unrecognized media type: "+t);return yield _this80.testHandleChecked(e);})();}runHandle(e,r,n){var _this81=this;return _asyncToGenerator(function*(){return {quads:i.JsonLdParser.fromHttpResponse(e.baseIRI,r,e.headers,{documentLoader:n&&n.get(t.KEY_CONTEXT_DOCUMENTLOADER)||new a.DocumentLoaderMediated(_this81.mediatorHttp,n),strictValues:n&&n.get(t.KEY_CONTEXT_STRICTVALUES)}).import(e.input)};})();}}t.ActorRdfParseJsonLd=s,t.KEY_CONTEXT_DOCUMENTLOADER="@comunica/actor-rdf-parse-jsonld:documentLoader",t.KEY_CONTEXT_STRICTVALUES="@comunica/actor-rdf-parse-jsonld:strictValues";},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(169),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerArrayValue=void 0;var n=r(27);t.EntryHandlerArrayValue=class{isPropertyHandler(){return !1;}isStackProcessor(){return !0;}validate(e,t,r,n,i){var _this82=this;return _asyncToGenerator(function*(){return _this82.test(e,t,null,r,n);})();}test(e,t,r,n,i){return _asyncToGenerator(function*(){return "number"==typeof n[i];})();}handle(e,t,r,i,a,s){var _this83=this;return _asyncToGenerator(function*(){var o=yield t.unaliasKeywordParent(i,s);if("@list"===o){var _r138=null,_n87=0;for(var _e161=s-2;_e161>0;_e161--){var _t168=i[_e161];if("string"==typeof _t168||"number"==typeof _t168){_n87=_e161,_r138=_t168;break;}}if(null!==_r138){var _o7=yield t.valueToTerm(yield e.getContext(i),_r138,a,s,i);for(var _r139 of _o7){yield _this83.handleListElement(e,t,_r139,a,s,i.slice(0,_n87),_n87);}0===_o7.length&&(yield _this83.handleListElement(e,t,null,a,s,i.slice(0,_n87),_n87));}}else if("@set"===o)yield e.newOnValueJob(i.slice(0,-2),a,s-2,!1);else if(void 0!==o&&"@type"!==o){for(var _e162=s-1;_e162>0;_e162--){if("number"!=typeof i[_e162]){o=yield t.unaliasKeyword(i[_e162],i,_e162);break;}}var _r140=yield e.getContext(i.slice(0,-1));if("@list"in n.Util.getContextValueContainer(_r140,o)){e.emittedStack[s+1]=!0;var _r141=yield t.valueToTerm(yield e.getContext(i),o,a,s,i);for(var _n88 of _r141){yield _this83.handleListElement(e,t,_n88,a,s,i.slice(0,-1),s-1);}0===_r141.length&&(yield _this83.handleListElement(e,t,null,a,s,i.slice(0,-1),s-1));}else e.shiftStack(s,1),yield e.newOnValueJob(i.slice(0,-1),a,s-1,!1),e.contextTree.removeContext(i.slice(0,-1));}})();}handleListElement(e,t,r,n,i,a,s){return _asyncToGenerator(function*(){var o=e.listPointerStack[i];if(null!==n&&null!==(yield t.unaliasKeywords(n,a,i))["@value"]){if(o&&o.value){var _r142=t.dataFactory.blankNode();e.emitQuad(i,t.dataFactory.quad(o.value,t.rdfRest,_r142,t.getDefaultGraph())),o.value=_r142;}else {var _e163=t.dataFactory.blankNode();o={value:_e163,listRootDepth:s,listId:_e163};}r&&e.emitQuad(i,t.dataFactory.quad(o.value,t.rdfFirst,r,t.getDefaultGraph()));}else o||(o={listRootDepth:s,listId:t.rdfNil});e.listPointerStack[i]=o;})();}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerIdentifier=void 0;t.ContainerHandlerIdentifier=class{canCombineWithGraph(){return !0;}handle(e,t,r,n,i,a){return _asyncToGenerator(function*(){var s;if(t.emittedStack[a+1]&&t.idStack[a+1])s=t.idStack[a+1][0];else {var _e164=null!==(yield r.getContainerKey(n[a],n,a))?yield r.resourceToTerm(yield t.getContext(n),n[a]):r.dataFactory.blankNode();if(!_e164)return void(t.emittedStack[a]=!1);s=_e164,t.idStack[a+1]=[s];}var o=t.idStack[a];o||(o=t.idStack[a]=[]),o.some(e=>e.equals(s))||o.push(s),(yield t.handlePendingContainerFlushBuffers())||(t.emittedStack[a]=!1);})();}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerIndex=void 0;var n=r(9),i=r(64),a=r(27);t.ContainerHandlerIndex=class{canCombineWithGraph(){return !0;}handle(e,t,r,s,o,u){return _asyncToGenerator(function*(){if(!Array.isArray(o)){var c=("@graph"in e),l=yield t.getContext(s),h=s[u-1],d=a.Util.getContextValueIndex(l,h);if(d){if(n.Util.isPotentialKeyword(d))throw new n.ErrorCoded("Keywords can not be used as @index value, got: "+d,n.ERROR_CODES.INVALID_TERM_DEFINITION);if("string"!=typeof d)throw new n.ErrorCoded("@index values must be strings, got: "+d,n.ERROR_CODES.INVALID_TERM_DEFINITION);if("object"!=typeof o){if("@id"!==a.Util.getContextValueType(l,h))throw new n.ErrorCoded("Property-based index containers require nodes as values or strings with @type: @id, but got: "+o,n.ERROR_CODES.INVALID_VALUE_OBJECT);var _e166=r.resourceToTerm(l,o);_e166&&(t.idStack[u+1]=[_e166]);}var _e165=r.createVocabOrBaseTerm(l,d);if(_e165){var _n89=yield r.valueToTerm(l,d,yield r.getContainerKey(s[u],s,u),u,s);if(c){var _i61=yield r.getGraphContainerValue(s,u+1);for(var _a29 of _n89){t.emitQuad(u,r.dataFactory.quad(_i61,_e165,_a29,r.getDefaultGraph()));}}else for(var _a30 of _n89){yield i.EntryHandlerPredicate.handlePredicateObject(t,r,s,u+1,_e165,_a30,!1);}}}var p=c?2:1;yield t.newOnValueJob(s.slice(0,s.length-p),o,u-p,!0),yield t.handlePendingContainerFlushBuffers();}t.emittedStack[u]=!1;})();}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerLanguage=void 0;var n=r(9);t.ContainerHandlerLanguage=class{canCombineWithGraph(){return !1;}handle(e,t,r,i,a,s){return _asyncToGenerator(function*(){var o=yield r.getContainerKey(i[s],i,s);if(Array.isArray(a))a=a.map(e=>({"@value":e,"@language":o}));else {if("string"!=typeof a)throw new n.ErrorCoded("Got invalid language map value, got '"+JSON.stringify(a)+"', but expected string",n.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);a={"@value":a,"@language":o};}yield t.newOnValueJob(i.slice(0,i.length-1),a,s-1,!0),t.emittedStack[s]=!1;})();}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerType=void 0;var n=r(64),i=r(27);t.ContainerHandlerType=class{canCombineWithGraph(){return !1;}handle(e,t,r,a,s,o){return _asyncToGenerator(function*(){if(!Array.isArray(s)){if("string"==typeof s){var _e168=yield t.getContext(a),_n90="@vocab"===i.Util.getContextValueType(_e168,a[o-1])?yield r.createVocabOrBaseTerm(_e168,s):yield r.resourceToTerm(_e168,s);if(_n90){var _e169={"@id":"NamedNode"===_n90.termType?_n90.value:s};yield t.newOnValueJob(a.slice(0,a.length-1),_e169,o-1,!0),t.idStack[o+1]=[_n90];}}else {var _e170=!!t.idStack[o+1];_e170||delete t.idStack[o],yield t.newOnValueJob(a.slice(0,a.length-1),s,o-1,!0),_e170||(t.idStack[o+1]=t.idStack[o]);}var _e167=yield r.getContainerKey(a[o],a,o),u=null!==_e167?r.createVocabOrBaseTerm(yield t.getContext(a),_e167):null;u&&(yield n.EntryHandlerPredicate.handlePredicateObject(t,r,a,o+1,r.rdfType,u,!1)),yield t.handlePendingContainerFlushBuffers();}t.emittedStack[o]=!1;})();}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerInvalidFallback=void 0;t.EntryHandlerInvalidFallback=class{isPropertyHandler(){return !1;}isStackProcessor(){return !0;}validate(e,t,r,n,i){return _asyncToGenerator(function*(){return !1;})();}test(e,t,r,n,i){return _asyncToGenerator(function*(){return !0;})();}handle(e,t,r,n,i,a){return _asyncToGenerator(function*(){e.emittedStack[a]=!1;})();}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordContext=void 0;var n=r(9),i=r(28);class a extends i.EntryHandlerKeyword{constructor(){super("@context");}isStackProcessor(){return !1;}handle(e,t,r,i,a,s){return _asyncToGenerator(function*(){e.streamingProfile&&(e.processingStack[s]||e.processingType[s]||void 0!==e.idStack[s])&&e.emitError(new n.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",n.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));var o=e.getContext(i),u=e.parseContext(a,(yield o).getContextRaw());e.contextTree.setContext(i.slice(0,-1),u),e.emitContext(a),yield e.validateContext(yield u);})();}}t.EntryHandlerKeywordContext=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordGraph=void 0;var n=r(28);class i extends n.EntryHandlerKeyword{constructor(){super("@graph");}handle(e,t,r,n,i,a){return _asyncToGenerator(function*(){e.graphStack[a+1]=!0;})();}}t.EntryHandlerKeywordGraph=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordId=void 0;var n=r(9),i=r(28);class a extends i.EntryHandlerKeyword{constructor(){super("@id");}isStackProcessor(){return !1;}handle(e,t,r,i,a,s){return _asyncToGenerator(function*(){"string"!=typeof a&&e.emitError(new n.ErrorCoded("Found illegal @id '"+a+"'",n.ERROR_CODES.INVALID_ID_VALUE));var o=yield t.getPropertiesDepth(i,s);void 0!==e.idStack[o]&&(e.idStack[o][0].listHead?e.emitError(new n.ErrorCoded("Found illegal neighbouring entries next to @list for key: '"+i[s-1]+"'",n.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):e.emitError(new n.ErrorCoded("Found duplicate @ids '"+e.idStack[o][0].value+"' and '"+a+"'",n.ERROR_CODES.COLLIDING_KEYWORDS))),e.idStack[o]=t.nullableTermToArray(yield t.resourceToTerm(yield e.getContext(i),a));})();}}t.EntryHandlerKeywordId=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordIncluded=void 0;var n=r(9),i=r(28);class a extends i.EntryHandlerKeyword{constructor(){super("@included");}handle(e,t,r,i,a,s){return _asyncToGenerator(function*(){"object"!=typeof a&&e.emitError(new n.ErrorCoded("Found illegal @included '"+a+"'",n.ERROR_CODES.INVALID_INCLUDED_VALUE));var o=yield t.unaliasKeywords(a,i,s,yield e.getContext(i));"@value"in o&&e.emitError(new n.ErrorCoded("Found an illegal @included @value node '"+JSON.stringify(a)+"'",n.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in o&&e.emitError(new n.ErrorCoded("Found an illegal @included @list node '"+JSON.stringify(a)+"'",n.ERROR_CODES.INVALID_INCLUDED_VALUE)),e.emittedStack[s]=!1;})();}}t.EntryHandlerKeywordIncluded=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordNest=void 0;var n=r(9),i=r(28);class a extends i.EntryHandlerKeyword{constructor(){super("@nest");}handle(e,t,r,i,a,s){return _asyncToGenerator(function*(){"object"!=typeof a&&e.emitError(new n.ErrorCoded("Found invalid @nest entry for '"+r+"': '"+a+"'",n.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in(yield t.unaliasKeywords(a,i,s,yield e.getContext(i)))&&e.emitError(new n.ErrorCoded("Found an invalid @value node for '"+r+"'",n.ERROR_CODES.INVALID_NEST_VALUE)),e.emittedStack[s]=!1;})();}}t.EntryHandlerKeywordNest=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordType=void 0;var n=r(9),i=r(27),a=r(64),s=r(28);class o extends s.EntryHandlerKeyword{constructor(){super("@type");}isStackProcessor(){return !1;}handle(e,t,r,s,o,u){return _asyncToGenerator(function*(){var c=s[u],l=yield e.getContext(s),h=t.rdfType,d=i.Util.isPropertyReverse(l,c,yield t.unaliasKeywordParent(s,u)),p=Array.isArray(o)?o:[o];for(var _r143 of p){"string"!=typeof _r143&&e.emitError(new n.ErrorCoded("Found illegal @type '"+_r143+"'",n.ERROR_CODES.INVALID_TYPE_VALUE));var _i62=t.createVocabOrBaseTerm(l,_r143);_i62&&(yield a.EntryHandlerPredicate.handlePredicateObject(e,t,s,u,h,_i62,d));}var f=Promise.resolve(l),g=!1;var _loop10=function _loop10(_t169){var r=i.Util.getContextValue(l,"@context",_t169,null);r&&(g=!0,f=f.then(t=>e.parseContext(r,t.getContextRaw())));};for(var _t169 of p.sort()){_loop10(_t169);}!e.streamingProfile||!g&&e.streamingProfileAllowOutOfOrderPlainType||!e.processingStack[u]&&!e.idStack[u]||e.emitError(new n.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",n.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),g&&(f=f.then(e=>("@propagate"in e.getContextRaw()||(e.getContextRaw()["@propagate"]=!1),!1===e.getContextRaw()["@propagate"]&&(e.getContextRaw()["@__propagateFallback"]=l.getContextRaw()),e)),e.contextTree.setContext(s.slice(0,s.length-1),f)),e.processingType[u]=!0;})();}}t.EntryHandlerKeywordType=o;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordUnknownFallback=void 0;var n=r(9);class i{isPropertyHandler(){return !1;}isStackProcessor(){return !0;}validate(e,t,r,i,a){return _asyncToGenerator(function*(){var s=yield t.unaliasKeyword(r[i],r,i);return !!n.Util.isPotentialKeyword(s)&&!(!a&&"@list"===s);})();}test(e,t,r,i,a){return _asyncToGenerator(function*(){return n.Util.isPotentialKeyword(r);})();}handle(e,t,r,a,s,o){return _asyncToGenerator(function*(){var u=i.VALID_KEYWORDS_TYPES[r];void 0!==u?u&&typeof s!==u.type&&e.emitError(new n.ErrorCoded("Invalid value type for '"+r+"' with value '"+s+"'",u.errorCode)):e.strictValues&&e.emitError(new Error("Unknown keyword '"+r+"' with value '"+s+"'")),e.emittedStack[o]=!1;})();}}t.EntryHandlerKeywordUnknownFallback=i,i.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:n.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:n.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordValue=void 0;var n=r(28);class i extends n.EntryHandlerKeyword{constructor(){super("@value");}test(e,t,r,n,i){return _asyncToGenerator(function*(){return "@value"===(yield t.unaliasKeyword(n[i],n.slice(0,n.length-1),i-1,!0));})();}handle(e,t,r,n,i,a){return _asyncToGenerator(function*(){e.literalStack[a]=!0,delete e.unidentifiedValuesBuffer[a],delete e.unidentifiedGraphsBuffer[a],e.emittedStack[a]=!1;})();}}t.EntryHandlerKeywordValue=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ParsingContext=void 0;var n=r(9),i=r(47),a=r(442),s=r(169);class o{constructor(e){this.contextParser=new n.ContextParser({documentLoader:e.documentLoader}),this.streamingProfile=!!e.streamingProfile,this.baseIRI=e.baseIRI,this.produceGeneralizedRdf=!!e.produceGeneralizedRdf,this.allowSubjectList=!!e.allowSubjectList,this.processingMode=e.processingMode||s.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!e.strictValues,this.validateValueIndexes=!!e.validateValueIndexes,this.defaultGraph=e.defaultGraph,this.rdfDirection=e.rdfDirection,this.normalizeLanguageTags=e.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=e.streamingProfileAllowOutOfOrderPlainType,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new a.ContextTree(),this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=e.parser,e.context?(this.rootContext=this.parseContext(e.context),this.rootContext.then(e=>this.validateContext(e))):this.rootContext=Promise.resolve(new n.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}));}parseContext(e,t,r){var _this84=this;return _asyncToGenerator(function*(){return _this84.contextParser.parse(e,{baseIRI:_this84.baseIRI,ignoreProtection:r,normalizeLanguageTags:_this84.normalizeLanguageTags,parentContext:t,processingMode:_this84.activeProcessingMode});})();}validateContext(e){var t=e.getContextRaw()["@version"];if(t){if(this.activeProcessingMode&&t>this.activeProcessingMode)throw new i.ErrorCoded("Unsupported JSON-LD version '"+t+"' under active processing mode "+this.activeProcessingMode+".",i.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&t<this.activeProcessingMode)throw new i.ErrorCoded("Invalid JSON-LD version "+t+" under active processing mode "+this.activeProcessingMode+".",i.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=t;}}getContext(e,t){var _this85=this;return _asyncToGenerator(function*(){if(t===void 0){t=1;}var r=e;for(;"number"==typeof e[e.length-1];){e=e.slice(0,e.length-1);}t&&(e=e.slice(0,-t));var i=yield _this85.getContextPropagationAware(e);var a=i.context.getContextRaw();for(var _e171=i.depth;_e171<r.length-t;_e171++){var _i63=r[_e171],_s17=a[_i63];if(_s17&&"object"==typeof _s17&&"@context"in _s17){var _o8=(yield _this85.parseContext(_s17,a,!0)).getContextRaw(),u=!(_i63 in _o8)||_o8[_i63]["@context"]["@propagate"];!1===u&&_e171!==r.length-1-t||(a=_o8,delete a["@propagate"],a[_i63]=Object.assign({},a[_i63]),"@id"in _s17&&(a[_i63]["@id"]=_s17["@id"]),delete a[_i63]["@context"],!1!==u&&_this85.contextTree.setContext(r.slice(0,_e171+t),Promise.resolve(new n.JsonLdContextNormalized(a))));}}return new n.JsonLdContextNormalized(a);})();}getContextPropagationAware(e){var _this86=this;return _asyncToGenerator(function*(){var t=e.length;var r,i=null;do{r=!1,i&&"@__propagateFallback"in i.context.getContextRaw()?i.context=new n.JsonLdContextNormalized(i.context.getContextRaw()["@__propagateFallback"]):(i&&(e=e.slice(0,i.depth-1)),i=(yield _this86.contextTree.getContext(e))||{context:yield _this86.rootContext,depth:0});var _t170=e[e.length-1];if(_t170 in i.context.getContextRaw()){var _e172=i.context.getContextRaw()[_t170];_e172&&"object"==typeof _e172&&"@context"in _e172&&(r=!0);}}while(i.depth>0&&!1===i.context.getContextRaw()["@propagate"]&&i.depth!==t&&!r);return 0===i.depth&&!1===i.context.getContextRaw()["@propagate"]&&i.depth!==t&&(i.context=new n.JsonLdContextNormalized({})),i;})();}newOnValueJob(e,t,r,n){var _this87=this;return _asyncToGenerator(function*(){yield _this87.parser.newOnValueJob(e,t,r,n);})();}handlePendingContainerFlushBuffers(){var _this88=this;return _asyncToGenerator(function*(){if(_this88.pendingContainerFlushBuffers.length>0){for(var _e173 of _this88.pendingContainerFlushBuffers){yield _this88.parser.flushBuffer(_e173.depth,_e173.keys),_this88.parser.flushStacks(_e173.depth);}return _this88.pendingContainerFlushBuffers.splice(0,_this88.pendingContainerFlushBuffers.length),!0;}return !1;})();}emitQuad(e,t){1===e&&(this.topLevelProperties=!0),this.parser.push(t);}emitError(e){this.parser.emit("error",e);}emitContext(e){this.parser.emit("context",e);}getUnidentifiedValueBufferSafe(e){var t=this.unidentifiedValuesBuffer[e];return t||(t=[],this.unidentifiedValuesBuffer[e]=t),t;}getUnidentifiedGraphBufferSafe(e){var t=this.unidentifiedGraphsBuffer[e];return t||(t=[],this.unidentifiedGraphsBuffer[e]=t),t;}getExpandOptions(){return o.EXPAND_OPTIONS[this.activeProcessingMode];}shiftStack(e,t){var r=this.idStack[e+t];if(r&&(this.idStack[e]=r,this.emittedStack[e]=!0,delete this.idStack[e+t]),this.pendingContainerFlushBuffers.length)for(var _r144 of this.pendingContainerFlushBuffers){_r144.depth>=e+t&&(_r144.depth-=t,_r144.keys.splice(e,t));}this.unidentifiedValuesBuffer[e+t]&&(this.unidentifiedValuesBuffer[e]=this.unidentifiedValuesBuffer[e+t],delete this.unidentifiedValuesBuffer[e+t]);}}t.ParsingContext=o,o.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ContextTree=void 0;class n{constructor(){this.subTrees={};}getContext(e){if(e.length>0){var[_t171,..._r145]=e,_n91=this.subTrees[_t171];if(_n91){var _e174=_n91.getContext(_r145);if(_e174)return _e174.then(_ref58=>{var{context:e,depth:t}=_ref58;return {context:e,depth:t+1};});}}return this.context?this.context.then(e=>({context:e,depth:0})):null;}setContext(e,t){if(0===e.length)this.context=t;else {var[_r146,...i]=e;var a=this.subTrees[_r146];a||(a=this.subTrees[_r146]=new n()),a.setContext(i,t);}}removeContext(e){this.setContext(e,null);}}t.ContextTree=n;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(444),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveHypermediaSparql=void 0;var n=r(87),i=r(445);class a extends n.ActorRdfResolveHypermedia{constructor(e){super(e,"sparql");}testMetadata(e){var _this89=this;return _asyncToGenerator(function*(){if(!(e.forceSourceType||e.metadata.sparqlService||_this89.checkUrlSuffix&&e.url.endsWith("/sparql")))throw new Error("Actor "+_this89.name+" could not detect a SPARQL service description or URL ending on /sparql.");return {filterFactor:1};})();}run(e){var _this90=this;return _asyncToGenerator(function*(){_this90.logInfo(e.context,"Identified as sparql source: "+e.url);return {source:new i.RdfSourceSparql(e.metadata.sparqlService||e.url,e.context,_this90.mediatorHttp)};})();}}t.ActorRdfResolveHypermediaSparql=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.RdfSourceSparql=void 0;var n=r(446),i=r(18),a=r(6);class s{constructor(e,t,r){this.url=e,this.context=t,this.mediatorHttp=r;}queryBindings(e,t,r){return new n.AsyncIteratorJsonBindings(e,t,r,this.mediatorHttp);}match(e,t,r,a){var o=n.ActorRdfResolveQuadPatternSparqlJson.replaceBlankNodes(s.FACTORY.createPattern(e,t,r,a)),u=n.ActorRdfResolveQuadPatternSparqlJson.patternToCountQuery(o),c=n.ActorRdfResolveQuadPatternSparqlJson.patternToSelectQuery(o);new Promise(e=>{var t=this.queryBindings(this.url,u,this.context);t.on("data",t=>{var r=t.get("?count");if(r){var _t172=Number.parseInt(r.value,10);return Number.isNaN(_t172)?e({totalItems:1/0}):e({totalItems:_t172});}return e({totalItems:1/0});}),t.on("error",()=>e({totalItems:1/0})),t.on("end",()=>e({totalItems:1/0}));}).then(e=>l.setProperty("metadata",e));var l=this.queryBindings(this.url,c,this.context).map(e=>i.mapTerms(o,t=>{if("Variable"===t.termType){var _r147=e.get("?"+t.value);return _r147||l.destroy(new Error("The endpoint "+this.url+" failed to provide a binding for "+t.value+".")),_r147;}return t;}));return l;}}t.RdfSourceSparql=s,s.FACTORY=new a.Factory();},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(447),t),i(r(172),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveQuadPatternSparqlJson=void 0;var n=r(21),i=r(3),a=r(5),s=r(18),o=r(6),u=r(172),c=new a.DataFactory();class l extends n.ActorRdfResolveQuadPattern{constructor(e){super(e);}static replaceBlankNodes(e){var t=s.getVariables(s.getTerms(e)).map(e=>e.value),r={};var n=!1;var i=s.mapTerms(e,e=>{if("BlankNode"===e.termType){var _i64=e.value;if(r[_i64])_i64=r[_i64];else {if(t.includes(_i64)){var _e175=0;for(;t.includes(""+_i64+_e175);){++_e175;}_i64+=_e175;}r[e.value]=_i64,t.push(_i64);}return n=!0,c.variable(_i64);}return e;});return n?i:e;}static patternToBgp(e){return l.FACTORY.createBgp([l.FACTORY.createPattern(e.subject,e.predicate,e.object,e.graph)]);}static patternToSelectQuery(e){var t=s.getVariables(s.getTerms(e));return o.toSparql(l.FACTORY.createProject(l.patternToBgp(e),t));}static patternToCountQuery(e){return o.toSparql(l.FACTORY.createProject(l.FACTORY.createExtend(l.FACTORY.createGroup(l.patternToBgp(e),[],[l.FACTORY.createBoundAggregate(c.variable("var0"),"count",l.FACTORY.createWildcardExpression(),!1)]),c.variable("count"),l.FACTORY.createTermExpression(c.variable("var0"))),[c.variable("count")]));}test(e){var _this91=this;return _asyncToGenerator(function*(){if(!_this91.hasContextSingleSourceOfType("sparql",e.context))throw new Error(_this91.name+" requires a single source with a 'sparql' endpoint to be present in the context.");return !0;})();}run(e){var _this92=this;return _asyncToGenerator(function*(){var t=_this92.getContextSourceUrl(_this92.getContextSource(e.context)),r=l.replaceBlankNodes(e.pattern),n=l.patternToSelectQuery(r),a=l.patternToCountQuery(r);_this92.queryBindings(t,a,e.context).then(e=>new Promise(t=>{e.on("data",e=>{var r=e.get("?count");if(r){var _e176=Number.parseInt(r.value,10);return Number.isNaN(_e176)?t({totalItems:1/0}):t({totalItems:_e176});}return t({totalItems:1/0});}),e.on("error",()=>t({totalItems:1/0})),e.on("end",()=>t({totalItems:1/0}));})).then(e=>o.setProperty("metadata",e)).catch(e=>{o.destroy(e),o.setProperty("metadata",{totalItems:1/0});});var o=new i.TransformIterator(/*#__PURE__*/_asyncToGenerator(function*(){return (yield _this92.queryBindings(t,n,e.context)).map(e=>s.mapTerms(r,r=>{if("Variable"===r.termType){var _n92=e.get("?"+r.value);return _n92||o.emit("error",new Error("The endpoint "+t+" failed to provide a binding for "+r.value)),_n92;}return r;}));}),{autoStart:!1});return {data:o};})();}queryBindings(e,t,r){var _this93=this;return _asyncToGenerator(function*(){return new u.AsyncIteratorJsonBindings(e,t,r,_this93.mediatorHttp);})();}}t.ActorRdfResolveQuadPatternSparqlJson=l,l.FACTORY=new o.Factory();},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(449),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationSparqlEndpoint=void 0;var n=r(1),i=r(21),a=r(450),s=r(3),o=r(452),u=r(4),c=r(6);class l extends n.ActorQueryOperation{constructor(e){super(e),this.endpointFetcher=new o.SparqlEndpointFetcher({fetch:(e,t)=>this.mediatorHttp.mediate({input:e,init:t,context:this.lastContext}),prefixVariableQuestionMark:!0});}test(e){var _this94=this;return _asyncToGenerator(function*(){if(!e.operation)throw new Error("Missing field 'operation' in a query operation action.");var t=yield a.DataSourceUtils.getSingleSource(e.context);if(t&&"sparql"===i.getDataSourceType(t))return {httpRequests:1};throw new Error(_this94.name+" requires a single source with a 'sparql' endpoint to be present in the context.");})();}run(e){var _this95=this;return _asyncToGenerator(function*(){var t=yield a.DataSourceUtils.getSingleSource(e.context);if(!t)throw new Error("Illegal state: undefined sparql endpoint source.");var r=i.getDataSourceValue(t);var n,s,o;_this95.lastContext=e.context;try{n=c.toSparql(e.operation),s=_this95.endpointFetcher.getQueryType(n);}catch(e){}switch(s&&"UNKNOWN"!==s||(o=c.Util.inScopeVariables(e.operation),n=c.toSparql(l.FACTORY.createProject(e.operation,o)),s="SELECT"),s){case"SELECT":return o||(o=c.Util.inScopeVariables(e.operation)),_this95.executeQuery(r,n,!1,o);case"CONSTRUCT":return _this95.executeQuery(r,n,!0);case"ASK":return {type:"boolean",booleanResult:_this95.endpointFetcher.fetchAsk(r,n)};}})();}executeQuery(e,t,r,i){var a=r?this.endpointFetcher.fetchTriples(e,t):this.endpointFetcher.fetchBindings(e,t);var o=0;var c=s.wrap(a,{autoStart:!1,maxBufferSize:1/0}).map(e=>(o++,r?e:n.Bindings(e)));a.then(e=>e.on("end",()=>c.emit("metadata",{totalItems:o})),()=>{});var h=l.cachifyMetadata(()=>new Promise((e,t)=>{c._fillBuffer(),c.on("error",t),c.on("end",()=>t(new Error("No metadata was found"))),c.on("metadata",e);}));return r?{type:"quads",quadStream:c,metadata:h}:{type:"bindings",bindingsStream:c,metadata:h,variables:i.map(e=>u.termToString(e)),canContainUndefs:!0};}}t.ActorQueryOperationSparqlEndpoint=l,l.FACTORY=new c.Factory();},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(451),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.DataSourceUtils=void 0;var n=r(21);t.DataSourceUtils={getSingleSource(e){return _asyncToGenerator(function*(){if(e&&e.has(n.KEY_CONTEXT_SOURCE))return e.get(n.KEY_CONTEXT_SOURCE);if(e&&e.has(n.KEY_CONTEXT_SOURCES)){var _t173=e.get(n.KEY_CONTEXT_SOURCES);if(1===_t173.length)return _t173[0];}})();},getSingleSourceType(e){var _this96=this;return _asyncToGenerator(function*(){var t=yield _this96.getSingleSource(e);return t?n.getDataSourceType(t):void 0;})();},singleSourceHasType(e,t){var _this97=this;return _asyncToGenerator(function*(){var r=yield _this97.getSingleSourceType(e);return !!r&&r===t;})();}};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(453),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SparqlEndpointFetcher=void 0,r(45);var n=r(30),i=r(74),a=r(454),s=r(41),o=r(124),u=r(125).toNodeReadable;class c{constructor(e){e=e||{},this.fetchCb=e.fetch,this.sparqlJsonParser=new i.SparqlJsonParser(e),this.sparqlXmlParser=new a.SparqlXmlParser(e),this.sparqlParsers={[c.CONTENTTYPE_SPARQL_JSON]:{parseBooleanStream:e=>this.sparqlJsonParser.parseJsonBooleanStream(e),parseResultsStream:e=>this.sparqlJsonParser.parseJsonResultsStream(e)},[c.CONTENTTYPE_SPARQL_XML]:{parseBooleanStream:e=>this.sparqlXmlParser.parseXmlBooleanStream(e),parseResultsStream:e=>this.sparqlXmlParser.parseXmlResultsStream(e)}};}getQueryType(e){var t=new n.Parser().parse(e);return "query"===t.type?"DESCRIBE"===t.queryType?"CONSTRUCT":t.queryType:"UNKNOWN";}fetchBindings(e,t){var _this98=this;return _asyncToGenerator(function*(){var[r,n]=yield _this98.fetchRawStream(e,t,c.CONTENTTYPE_SPARQL),i=_this98.sparqlParsers[r];if(!i)throw new Error("Unknown SPARQL results content type: "+r);return i.parseResultsStream(n);})();}fetchAsk(e,t){var _this99=this;return _asyncToGenerator(function*(){var[r,n]=yield _this99.fetchRawStream(e,t,c.CONTENTTYPE_SPARQL),i=_this99.sparqlParsers[r];if(!i)throw new Error("Unknown SPARQL results content type: "+r);return i.parseBooleanStream(n);})();}fetchTriples(e,t){var _this100=this;return _asyncToGenerator(function*(){return (yield _this100.fetchRawStream(e,t,c.CONTENTTYPE_TURTLE))[1].pipe(new s.StreamParser({format:c.CONTENTTYPE_TURTLE}));})();}fetchRawStream(e,t,r){var _this101=this;return _asyncToGenerator(function*(){var n=e+"?query="+encodeURIComponent(t),i=new Headers();i.append("Accept",r);var a=yield (_this101.fetchCb||fetch)(n,{headers:i}),s=o(a.body)?a.body:u(a.body);var c=a.headers.get("Content-Type")||"";if(c.indexOf(";")>0&&(c=c.substr(0,c.indexOf(";"))),!a.ok)throw new Error("Invalid SPARQL endpoint ("+e+") response: "+a.statusText);return [c,s];})();}}t.SparqlEndpointFetcher=c,c.CONTENTTYPE_SPARQL_JSON="application/sparql-results+json",c.CONTENTTYPE_SPARQL_XML="application/sparql-results+xml",c.CONTENTTYPE_SPARQL=c.CONTENTTYPE_SPARQL_JSON+";q=1.0,"+c.CONTENTTYPE_SPARQL_XML+";q=0.7",c.CONTENTTYPE_TURTLE="text/turtle";},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(455),t),i(r(173),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SparqlXmlParser=void 0;var n=r(5),i=r(173),a=r(456);t.SparqlXmlParser=class{constructor(e){e=e||{},this.dataFactory=e.dataFactory||new n.DataFactory(),this.prefixVariableQuestionMark=!!e.prefixVariableQuestionMark;}parseXmlResultsStream(e){var t=[];e.pipe(a({strict:!0,tag:"variable"})).on("data",e=>t.push(this.dataFactory.variable(e.attribs.name))).on("error",()=>{}).on("finish",()=>r.emit("variables",t));var r=e.pipe(a({strict:!0,tag:"result"})).on("error",e=>r.emit("error",e)).pipe(new i.SparqlXmlBindingsTransformer(this));return e.on("error",e=>r.emit("error",e)),r;}parseXmlBindings(e){var t={};if(e.children){var _r148=Array.isArray(e.children.binding)?e.children.binding:[e.children.binding];for(var _e177 of _r148){if(_e177.attribs&&_e177.children){var _r149=_e177.attribs.name;var _n93=null;if(_e177.children.bnode)_n93=this.dataFactory.blankNode(_e177.children.bnode.value);else if(_e177.children.literal){var _t174=_e177.children.literal.value||"",_r150=_e177.children.literal.attribs;_n93=_r150&&_r150["xml:lang"]?this.dataFactory.literal(_t174,_r150["xml:lang"]):_r150&&_r150.datatype?this.dataFactory.literal(_t174,this.dataFactory.namedNode(_r150.datatype)):this.dataFactory.literal(_t174);}else _n93=this.dataFactory.namedNode(_e177.children.uri.value);t[this.prefixVariableQuestionMark?"?"+_r149:_r149]=_n93;}}}return t;}parseXmlBooleanStream(e){return new Promise((t,r)=>{e.on("error",r),e.pipe(a({strict:!0,tag:"boolean"})).on("error",r).on("data",e=>t("true"===e.value)).on("end",()=>r(new Error("No valid ASK response was found.")));});}};},function(e,t,r){e.exports=r(457);},function(e,t,r){var n=r(2).Transform,i=r(458),a=r(131),s=r(461),o=r(462)("sax-stream");function u(e){if(!(this instanceof u))return new u(e);n.call(this,{highWaterMark:e.highWaterMark||350,objectMode:!0}),this.records=[],this.error=null,this.parser=this.createSaxParser(e);}e.exports=u,i.inherits(u,n),u.prototype.createSaxParser=function(e){var t,r=this,n=a.parser(e.strict||!1,function(e){return ["trim","normalize","lowercase","xmlns","position","strictEntities","noscript"].reduce(function(t,r){return r in e&&(t[r]=e[r]),t;},{position:!1});}(e)),i=function i(t){return t===e.tag;},u=function u(e,t){r.records.push(t);};return Array.isArray(e.tag)&&(i=function i(t){return -1!==e.tag.indexOf(t);},u=function u(e,t){r.records.push({tag:e,record:t});}),n.onopentag=function(e){o('Open "%s"',e.name),t?t=s.addChild(t,e.name):i(e.name)&&(t={}),t&&Object.keys(e.attributes).length&&(t.attribs=e.attributes);},n.onclosetag=function(e){o('Closed "%s"',e),i(e)&&!t.parent?(o("Emitting record",t),u(e,t),t=void 0):t&&(t=t.parent);},n.ontext=function(e){t&&s.addText(t,e);},n.oncdata=function(e){t&&s.concatText(t,e);},n.onerror=function(e){r.error=e;},n.onend=function(){o("onend - flushing remaining items"),r.pushAll(r.callback),r.callback=null;},n;},u.prototype.pushAll=function(e){if(this.error)return e(this.error),void(this.error=null);o("pushing %d",this.records.length),this.records.forEach(this.push.bind(this)),this.records.length=0,e();},u.prototype._transform=function(e,t,r){this.parser.write(e.toString()),this.pushAll(r);},u.prototype._flush=function(e){this.callback=e,this.parser.close();};},function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);}return r;},i=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++){t.push(o(arguments[r]));}return t.join(" ");}r=1;for(var n=arguments,a=n.length,s=String(e).replace(i,function(e){if("%%"===e)return "%";if(r>=a)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++]);}catch(e){return "[Circular]";}default:return e;}}),u=n[r];r<a;u=n[++r]){g(u)||!v(u)?s+=" "+u:s+=" "+o(u);}return s;},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments);};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),i=!0;}return r.apply(this,arguments);};};var a,s={};function o(e,r){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),f(r)?n.showHidden=r:r&&t._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),l(n,e,n.depth);}function u(e,t){var r=o.styles[t];return r?"["+o.colors[r][0]+"m"+e+"["+o.colors[r][1]+"m":e;}function c(e,t){return e;}function l(e,r,n){if(e.customInspect&&r&&T(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return y(i)||(i=l(e,i,n)),i;}var a=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string");}if(m(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null");}(e,r);if(a)return a;var s=Object.keys(r),o=function(e){var t={};return e.forEach(function(e,r){t[e]=!0;}),t;}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),S(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(r);if(0===s.length){if(T(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special");}if(_(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return e.stylize(Date.prototype.toString.call(r),"date");if(S(r))return h(r);}var c,v="",E=!1,x=["{","}"];(p(r)&&(E=!0,x=["[","]"]),T(r))&&(v=" [Function"+(r.name?": "+r.name:"")+"]");return _(r)&&(v=" "+RegExp.prototype.toString.call(r)),w(r)&&(v=" "+Date.prototype.toUTCString.call(r)),S(r)&&(v=" "+h(r)),0!==s.length||E&&0!=r.length?n<0?_(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=E?function(e,t,r,n,i){for(var a=[],s=0,o=t.length;s<o;++s){R(t,String(s))?a.push(d(e,t,r,n,String(s),!0)):a.push("");}return i.forEach(function(i){i.match(/^\d+$/)||a.push(d(e,t,r,n,i,!0));}),a;}(e,r,n,o,s):s.map(function(t){return d(e,r,n,o,t,E);}),e.seen.pop(),function(e,t,r){if(e.reduce(function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1;},0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1];}(c,v,x)):x[0]+v+x[1];}function h(e){return "["+Error.prototype.toString.call(e)+"]";}function d(e,t,r,n,i,a){var s,o,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?o=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(o=e.stylize("[Setter]","special")),R(n,i)||(s="["+i+"]"),o||(e.seen.indexOf(u.value)<0?(o=g(r)?l(e,u.value,null):l(e,u.value,r-1)).indexOf("\n")>-1&&(o=a?o.split("\n").map(function(e){return "  "+e;}).join("\n").substr(2):"\n"+o.split("\n").map(function(e){return "   "+e;}).join("\n")):o=e.stylize("[Circular]","special")),b(s)){if(a&&i.match(/^\d+$/))return o;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"));}return s+": "+o;}function p(e){return Array.isArray(e);}function f(e){return "boolean"==typeof e;}function g(e){return null===e;}function m(e){return "number"==typeof e;}function y(e){return "string"==typeof e;}function b(e){return void 0===e;}function _(e){return v(e)&&"[object RegExp]"===E(e);}function v(e){return "object"==typeof e&&null!==e;}function w(e){return v(e)&&"[object Date]"===E(e);}function S(e){return v(e)&&("[object Error]"===E(e)||e instanceof Error);}function T(e){return "function"==typeof e;}function E(e){return Object.prototype.toString.call(e);}function x(e){return e<10?"0"+e.toString(10):e.toString(10);}t.debuglog=function(r){if(b(a)&&(a=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(a)){var n=e.pid;s[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e);};}else s[r]=function(){};return s[r];},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=f,t.isNull=g,t.isNullOrUndefined=function(e){return null==e;},t.isNumber=m,t.isString=y,t.isSymbol=function(e){return "symbol"==typeof e;},t.isUndefined=b,t.isRegExp=_,t.isObject=v,t.isDate=w,t.isError=S,t.isFunction=T,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e;},t.isBuffer=r(459);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var e=new Date(),t=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":");return [e.getDate(),O[e.getMonth()],t].join(" ");}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t);}t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments));},t.inherits=r(460),t._extend=function(e,t){if(!t||!v(t))return e;for(var r=Object.keys(t),n=r.length;n--;){e[r[n]]=t[r[n]];}return e;};var I="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function N(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r;}return t(e);}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(I&&e[I]){var t;if("function"!=typeof(t=e[I]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),t;}function t(){for(var t,r,n=new Promise(function(e,n){t=e,r=n;}),i=[],a=0;a<arguments.length;a++){i.push(arguments[a]);}i.push(function(e,n){e?r(e):t(n);});try{e.apply(this,i);}catch(e){r(e);}return n;}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),I&&Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e));},t.promisify.custom=I,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++){r.push(arguments[n]);}var i=r.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var a=this,s=function s(){return i.apply(a,arguments);};t.apply(this,r).then(function(t){e.nextTick(s,null,t);},function(t){e.nextTick(N,t,s);});}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r;};}).call(this,r(8));},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8;};},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});}:e.exports=function(e,t){e.super_=t;var r=function r(){};r.prototype=t.prototype,e.prototype=new r(),e.prototype.constructor=e;};},function(e,t){function r(e,t){var n;if(e&&(Array.isArray(e)&&(e=e[0]),Array.isArray(t)||(t=t.split("/")),n=t.shift(),e.children))return e=e.children[n],t.length?r(e,t):e;}t.child=r,t.value=function(e,t){return (e=r(e,t))&&e.value;},t.attr=function(e,t,n){return (e=r(e,t))&&e.attribs&&e.attribs[n];},t.addChild=function(e,t){var r={parent:e};return e.children=e.children||{},e.children[t]?(Array.isArray(e.children[t])||(e.children[t]=[e.children[t]]),e.children[t].push(r)):e.children[t]=r,r;},t.addText=function(e,t){return e.value=t,e;},t.concatText=function(e,t){return e.value=(e.value||"")+t,e;};},function(e,t,r){(function(n){function i(){var e;try{e=t.storage.debug;}catch(e){}return !e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e;}(t=e.exports=r(463)).log=function(){return "object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments);},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(a=i));}),e.splice(a,0,n);},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e;}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return !0;return "undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage;}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e);}catch(e){return "[UnexpectedJSONParseError]: "+e.message;}},t.enable(i());}).call(this,r(8));},function(e,t,r){var n;function i(e){function r(){if(r.enabled){var e=r,i=+new Date(),a=i-(n||i);e.diff=a,e.prev=n,e.curr=i,n=i;for(var s=new Array(arguments.length),o=0;o<s.length;o++){s[o]=arguments[o];}s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;u++;var i=t.formatters[n];if("function"==typeof i){var a=s[u];r=i.call(e,a),s.splice(u,1),u--;}return r;}),t.formatArgs.call(e,s);var c=r.log||t.log||console.log.bind(console);c.apply(e,s);}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,n=0;for(r in e){n=(n<<5)-n+e.charCodeAt(r),n|=0;}return t.colors[Math.abs(n)%t.colors.length];}(e),"function"==typeof t.init&&t.init(r),r;}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e;},t.disable=function(){t.enable("");},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,i=0;i<n;i++){r[i]&&("-"===(e=r[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));}},t.enabled=function(e){var r,n;for(r=0,n=t.skips.length;r<n;r++){if(t.skips[r].test(e))return !1;}for(r=0,n=t.names.length;r<n;r++){if(t.names[r].test(e))return !0;}return !1;},t.humanize=r(464),t.names=[],t.skips=[],t.formatters={};},function(e,t){var r=1e3,n=6e4,i=60*n,a=24*i;function s(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s";}e.exports=function(e,t){t=t||{};var o,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*a;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return;}}(e);if("number"===u&&!1===isNaN(e))return t.long?s(o=e,a,"day")||s(o,i,"hour")||s(o,n,"minute")||s(o,r,"second")||o+" ms":function(e){if(e>=a)return Math.round(e/a)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms";}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e));};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(466),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinMultiSmallest=void 0;var n=r(1),i=r(55);class a extends i.ActorRdfJoin{constructor(e){super(e,3,!0);}static getSmallestPatternId(e){var t=-1,r=1/0;for(var[_n94,_i65]of e.entries()){_i65<=r&&(r=_i65,t=_n94);}return t;}getOutput(e){var _this102=this;return _asyncToGenerator(function*(){var t=e.entries.slice(),r=(yield Promise.all(e.entries.map(e=>n.getMetadata(e)))).map(e=>"totalItems"in e?e.totalItems:1/0),i=a.getSmallestPatternId(r),s=t.splice(i,1)[0],o=(r.splice(i,1),a.getSmallestPatternId(r)),u=t.splice(o,1)[0],c=(r.splice(o,1),yield _this102.mediatorJoin.mediate({entries:[s,u]}));return t.push(c),yield _this102.mediatorJoin.mediate({entries:t});})();}getIterations(e){return _asyncToGenerator(function*(){return (yield Promise.all(e.entries.map(e=>n.getMetadata(e)))).reduce((e,t)=>e*t.totalItems,1);})();}}t.ActorRdfJoinMultiSmallest=a;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(174),t),i(r(471),t);},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(175),t),i(r(469),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfDereferenceMediaMappings=void 0;var n=r(175);class i extends n.ActorRdfDereference{constructor(e){super(e);}getMediaTypeFromExtension(e){var t=e.lastIndexOf(".");if(t>=0){var _r151=e.slice(t);return this.mediaMappings[_r151.slice(1)]||"";}return "";}}t.ActorRdfDereferenceMediaMappings=i;},function(e,t){var r=function(e){function t(){this.fetch=!1,this.DOMException=e.DOMException;}return t.prototype=e,new t();}("undefined"!=typeof self?self:this);!function(e){!function(t){var r=("URLSearchParams"in e),n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob(),!0;}catch(e){return !1;}}(),a=("FormData"in e),s=("ArrayBuffer"in e);if(s)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1;};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase();}function l(e){return "string"!=typeof e&&(e=String(e)),e;}function h(e){var t={next:function next(){var t=e.shift();return {done:void 0===t,value:t};}};return n&&(t[Symbol.iterator]=function(){return t;}),t;}function d(e){this.map={},e instanceof d?e.forEach(function(e,t){this.append(t,e);},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1]);},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t]);},this);}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0;}function f(e){return new Promise(function(t,r){e.onload=function(){t(e.result);},e.onerror=function(){r(e.error);};});}function g(e){var t=new FileReader(),r=f(t);return t.readAsArrayBuffer(e),r;}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer;}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&i&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"));},i&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]));},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g);}),this.text=function(){var e,t,r,n=p(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader(),r=f(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++){r[n]=String.fromCharCode(t[n]);}return r.join("");}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText);},a&&(this.formData=function(){return this.text().then(v);}),this.json=function(){return this.text().then(JSON.parse);},this;}d.prototype.append=function(e,t){e=c(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t;},d.prototype.delete=function(e){delete this.map[c(e)];},d.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null;},d.prototype.has=function(e){return this.map.hasOwnProperty(c(e));},d.prototype.set=function(e,t){this.map[c(e)]=l(t);},d.prototype.forEach=function(e,t){for(var r in this.map){this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this);}},d.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r);}),h(e);},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t);}),h(e);},d.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t]);}),h(e);},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(e,t){var r,n,i=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0);}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),b.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i);}function v(e){var t=new FormData();return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i));}}),t;}function w(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e);}_.prototype.clone=function(){return new _(this,{body:this._bodyInit});},y.call(_.prototype),y.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url});},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e;};var S=[301,302,303,307,308];w.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}});},t.DOMException=e.DOMException;try{new t.DOMException();}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack;},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException;}function T(e,r){return new Promise(function(n,a){var s=new _(e,r);if(s.signal&&s.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var o=new XMLHttpRequest();function u(){o.abort();}o.onload=function(){var e,t,r={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new d(),e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i);}}),t)};r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL");var i="response"in o?o.response:o.responseText;n(new w(i,r));},o.onerror=function(){a(new TypeError("Network request failed"));},o.ontimeout=function(){a(new TypeError("Network request failed"));},o.onabort=function(){a(new t.DOMException("Aborted","AbortError"));},o.open(s.method,s.url,!0),"include"===s.credentials?o.withCredentials=!0:"omit"===s.credentials&&(o.withCredentials=!1),"responseType"in o&&i&&(o.responseType="blob"),s.headers.forEach(function(e,t){o.setRequestHeader(t,e);}),s.signal&&(s.signal.addEventListener("abort",u),o.onreadystatechange=function(){4===o.readyState&&s.signal.removeEventListener("abort",u);}),o.send(void 0===s._bodyInit?null:s._bodyInit);});}T.polyfill=!0,e.fetch||(e.fetch=T,e.Headers=d,e.Request=_,e.Response=w),t.Headers=d,t.Request=_,t.Response=w,t.fetch=T;}({});}(r),delete r.fetch.polyfill,(t=r.fetch).default=r.fetch,t.fetch=r.fetch,t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response,e.exports=t;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfDereferenceHttpParse=void 0;var n=r(174);class i extends n.ActorRdfDereferenceHttpParseBase{constructor(e){super(e);}getMaxAcceptHeaderLength(){return this.maxAcceptHeaderLengthBrowser;}}t.ActorRdfDereferenceHttpParse=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(473),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfParseHtmlScript=void 0;var n=r(81),i=r(474);class a extends n.ActorRdfParseHtml{constructor(e){super(e);}test(e){return _asyncToGenerator(function*(){return !0;})();}run(e){var _this103=this;return _asyncToGenerator(function*(){var t=(yield _this103.mediatorRdfParseMediatypes.mediate({context:e.context,mediaTypes:!0})).mediaTypes;return {htmlParseListener:new i.HtmlScriptListener(_this103.mediatorRdfParseHandle,e.emit,e.error,e.end,t,e.context,e.baseIRI,e.headers)};})();}}t.ActorRdfParseHtmlScript=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlScriptListener=void 0;var n=r(2),i=r(0),a=r(13);class s{constructor(e,t,r,n,a,s,o,u){var c;this.textChunksJsonLd=[],this.endBarrier=1,this.passedScripts=0,this.isFinalJsonLdProcessing=!1,this.mediatorRdfParseHandle=e,this.cbQuad=t,this.cbError=r,this.cbEnd=n,this.supportedTypes=a,this.context=(s||i.ActionContext({})).set("@comunica/actor-rdf-parse-html-script:processing-html-script",!0),this.baseIRI=o,this.headers=u,this.onlyFirstScript=null!==(c=s&&!1===s.get("extractAllScripts"))&&void 0!==c&&c;var l=this.baseIRI.indexOf("#");this.targetScriptId=l>0?this.baseIRI.slice(l+1,this.baseIRI.length):null;}static newErrorCoded(e,t){var r=new Error(e);return r.code=t,r;}onEnd(){0==--this.endBarrier&&(this.textChunksJsonLd.length>0?(this.handleMediaType="application/ld+json",this.textChunks=this.textChunksJsonLd,this.textChunks.push("]"),this.textChunksJsonLd=[],this.isFinalJsonLdProcessing=!0,this.endBarrier++,this.onTagClose()):(0===this.passedScripts&&this.targetScriptId&&this.cbError(s.newErrorCoded("Failed to find targeted script id \""+this.targetScriptId+"\"","loading document failed")),this.cbEnd()),this.isFinalJsonLdProcessing=!1);}onTagClose(){if(this.handleMediaType)if(this.requiresCustomJsonLdHandling(this.handleMediaType)&&!this.isFinalJsonLdProcessing)this.handleMediaType=void 0,this.textChunks=void 0,this.onEnd();else {var _e178=new n.Readable({objectMode:!0});_e178._read=()=>{};var _t175=this.textChunks,_r152={context:this.context,handle:{baseIRI:this.baseIRI,input:_e178,headers:this.headers},handleMediaType:this.handleMediaType};this.mediatorRdfParseHandle.mediate(_r152).then(_ref60=>{var{handle:r}=_ref60;r.quads.on("error",e=>this.cbError(s.newErrorCoded(e.message,"invalid script element"))).on("data",this.cbQuad).on("end",()=>this.onEnd());for(var _r153 of _t175){_e178.push(_r153);}_e178.push(null);}).catch(e=>{this.targetScriptId?this.cbError(s.newErrorCoded(e.message,"loading document failed")):this.onEnd();}),this.handleMediaType=void 0,this.textChunks=void 0;}}onTagOpen(e,t){"base"===e&&t.href&&(this.baseIRI=a.resolve(t.href,this.baseIRI)),"script"!==e||this.targetScriptId&&t.id!==this.targetScriptId?this.handleMediaType=void 0:this.supportedTypes[t.type]?this.onlyFirstScript&&this.passedScripts>0?this.handleMediaType=void 0:(this.passedScripts++,this.handleMediaType=t.type,this.endBarrier++,this.requiresCustomJsonLdHandling(this.handleMediaType)?(this.textChunks=this.textChunksJsonLd,this.textChunks.push(0===this.textChunks.length?"[":",")):this.textChunks=[]):this.targetScriptId&&this.cbError(s.newErrorCoded("Targeted script \""+this.targetScriptId+"\" does not have a supported type","loading document failed"));}onText(e){this.handleMediaType&&this.textChunks.push(e);}requiresCustomJsonLdHandling(e){return !this.onlyFirstScript&&!this.targetScriptId&&"application/ld+json"===e;}}t.HtmlScriptListener=s;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(476),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorSparqlSerializeRdf=void 0;var n=r(15);class i extends n.ActorSparqlSerialize{constructor(e){super(e);}testHandle(e,t,r){var _this104=this;return _asyncToGenerator(function*(){if("quads"!==e.type)throw new Error("Actor "+_this104.name+" can only handle quad streams");var{mediaTypes:n}=yield _this104.mediatorMediaTypeCombiner.mediate({context:r,mediaTypes:!0});if(!(t in n))throw new Error("Actor "+_this104.name+" can not handle media type "+t+". All available types: "+Object.keys(n));return !0;})();}runHandle(e,t,r){var _this105=this;return _asyncToGenerator(function*(){return (yield _this105.mediatorRdfSerialize.mediate({context:r,handle:e,handleMediaType:t})).handle;})();}testMediaType(e){return _asyncToGenerator(function*(){return !0;})();}getMediaTypes(e){var _this106=this;return _asyncToGenerator(function*(){return (yield _this106.mediatorMediaTypeCombiner.mediate({context:e,mediaTypes:!0})).mediaTypes;})();}testMediaTypeFormats(e){return _asyncToGenerator(function*(){return !0;})();}getMediaTypeFormats(e){var _this107=this;return _asyncToGenerator(function*(){return (yield _this107.mediatorMediaTypeFormatCombiner.mediate({context:e,mediaTypeFormats:!0})).mediaTypeFormats;})();}}t.ActorSparqlSerializeRdf=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(478),t),i(r(176),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveQuadPatternFederated=void 0;var n=r(21),i=r(176);class a extends n.ActorRdfResolveQuadPatternSource{constructor(e){super(e),this.emptyPatterns=new Map();}test(e){var _this108=this;return _asyncToGenerator(function*(){if(!_this108.getContextSources(e.context))throw new Error("Actor "+_this108.name+" can only resolve quad pattern queries against a sources array.");return !0;})();}getSource(e){var _this109=this;return _asyncToGenerator(function*(){return new i.FederatedQuadSource(_this109.mediatorResolveQuadPattern,e,_this109.emptyPatterns,_this109.skipEmptyPatterns);})();}}t.ActorRdfResolveQuadPatternFederated=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.BlankNodeScoped=void 0;t.BlankNodeScoped=class{constructor(e,t){this.termType="BlankNode",this.value=e,this.skolemized=t;}equals(e){return !!e&&"BlankNode"===e.termType&&e.value===this.value;}};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(481),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationQuadpattern=void 0;var n=r(1),i=r(3),a=r(4),s=r(18);class o extends n.ActorQueryOperationTyped{constructor(e){super(e,"pattern");}static isTermVariable(e){return "Variable"===e.termType;}static getVariables(e){return s.uniqTerms(s.getTerms(e).filter(o.isTermVariable)).map(e=>a.termToString(e));}static getDuplicateElementLinks(e){var t={};var r=!1;for(var _n95 of s.QUAD_TERM_NAMES){if("Variable"===e[_n95].termType){var _i66=a.termToString(e[_n95]),_s18=(t[_i66]||(t[_i66]=[])).push(_n95);r=r||_s18>1;}}if(!r)return;var n={};for(var _e179 in t){var _r154=t[_e179],_i67=_r154.slice(1);_i67.length>0&&(n[_r154[0]]=_i67);}return n;}static getMetadata(e){return ()=>new Promise((t,r)=>{e.getProperty("metadata",e=>t(e)),e.on("error",r);});}testOperation(e,t){return _asyncToGenerator(function*(){return !0;})();}runOperation(e,t){var _this110=this;return _asyncToGenerator(function*(){e.context&&(t=t?t.merge(e.context):e.context);var r=yield _this110.mediatorResolveQuadPattern.mediate({pattern:e,context:t}),u=o.getVariables(e),c=o.getMetadata(r.data),l=s.reduceTerms(e,(e,t,r)=>(o.isTermVariable(t)&&(e[r]=a.termToString(t)),e),{}),h=(e,t,r)=>{var n=l[r];return n&&(e[n]=t),e;};return {type:"bindings",bindingsStream:new i.TransformIterator(/*#__PURE__*/_asyncToGenerator(function*(){var t=r.data;var i=o.getDuplicateElementLinks(e);return i&&(t=t.filter(e=>{for(var _t176 of s.TRIPLE_TERM_NAMES){for(var _r155 of i[_t176]||[]){if(!e[_t176].equals(e[_r155]))return !1;}}return !0;})),t.map(e=>n.Bindings(s.reduceTerms(e,h,{})),{autoStart:!0,maxBufferSize:128});}),{autoStart:!1}),variables:u,metadata:c,canContainUndefs:!1};})();}}t.ActorQueryOperationQuadpattern=o;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(483),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveHypermediaQpf=void 0;var n=r(87),i=r(484);class a extends n.ActorRdfResolveHypermedia{constructor(e){super(e,"qpf");}testMetadata(e){var _this111=this;return _asyncToGenerator(function*(){var{searchForm:t}=_this111.createSource(e.metadata,e.context);if(e.handledDatasets&&e.handledDatasets[t.dataset])throw new Error("Actor "+_this111.name+" can only be applied for the first page of a QPF dataset.");return {filterFactor:1};})();}run(e){var _this112=this;return _asyncToGenerator(function*(){_this112.logInfo(e.context,"Identified as qpf source: "+e.url);var t=_this112.createSource(e.metadata,e.context,e.quads);return {source:t,dataset:t.searchForm.dataset};})();}createSource(e,t,r){return new i.RdfSourceQpf(this.mediatorMetadata,this.mediatorMetadataExtract,this.mediatorRdfDereference,this.subjectUri,this.predicateUri,this.objectUri,this.graphUri,e,t,r);}}t.ActorRdfResolveHypermediaQpf=a;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.RdfSourceQpf=void 0;var n=r(3),i=r(5),a=r(4),s=r(18),o=new i.DataFactory();t.RdfSourceQpf=class{constructor(e,t,r,i,a,s,u,c,l,h){this.mediatorMetadata=e,this.mediatorMetadataExtract=t,this.mediatorRdfDereference=r,this.subjectUri=i,this.predicateUri=a,this.objectUri=s,this.graphUri=u,this.context=l,this.cachedQuads={};var d=this.getSearchForm(c);if(!d)throw new Error("Illegal state: found no TPF/QPF search form anymore in metadata.");if(this.searchForm=d,this.defaultGraph=c.defaultGraph?o.namedNode(c.defaultGraph):void 0,h){var _e180=n.wrap(h);this.defaultGraph&&(_e180=this.reverseMapQuadsToDefaultGraph(_e180)),_e180.setProperty("metadata",c),this.cacheQuads(_e180,o.variable(""),o.variable(""),o.variable(""),o.variable(""));}}getSearchForm(e){if(!e.searchForms||!e.searchForms.values)return;var{searchForms:t}=e;for(var _e181 of t.values){if(this.graphUri&&this.subjectUri in _e181.mappings&&this.predicateUri in _e181.mappings&&this.objectUri in _e181.mappings&&this.graphUri in _e181.mappings&&4===Object.keys(_e181.mappings).length)return _e181;if(this.subjectUri in _e181.mappings&&this.predicateUri in _e181.mappings&&this.objectUri in _e181.mappings&&3===Object.keys(_e181.mappings).length)return _e181;}}createFragmentUri(e,t,r,n,i){var s={},o=[{uri:this.subjectUri,term:t},{uri:this.predicateUri,term:r},{uri:this.objectUri,term:n},{uri:this.graphUri,term:i}];for(var _e182 of o){_e182.uri&&"Variable"!==_e182.term.termType&&(s[_e182.uri]=a.termToString(_e182.term));}return e.getUri(s);}match(e,t,r,i){var _this113=this;var a=!1;this.defaultGraph&&"DefaultGraph"===i.termType&&(a=!0,i=this.defaultGraph);var u=this.getCachedQuads(e,t,r,i);if(u)return u;var c=new n.TransformIterator(/*#__PURE__*/_asyncToGenerator(function*(){var u=_this113.createFragmentUri(_this113.searchForm,e,t,r,i);var l=yield _this113.mediatorRdfDereference.mediate({context:_this113.context,url:u});u=l.url;var h=yield _this113.mediatorMetadata.mediate({context:_this113.context,url:u,quads:l.quads,triples:l.triples}),d=_this113.mediatorMetadataExtract.mediate({context:_this113.context,url:u,metadata:h.metadata}).then(_ref63=>{var{metadata:e}=_ref63;return c.setProperty("metadata",e);}),p=o.defaultGraph();var f=n.wrap(h.data).transform({filter:n=>!!s.matchPattern(n,e,t,r,i)||a&&s.matchPattern(n,e,t,r,p)});return (a||"Variable"===i.termType)&&(f=_this113.reverseMapQuadsToDefaultGraph(f)),f.on("error",()=>{}),yield d,f;}),{autoStart:!1});return this.cacheQuads(c,e,t,r,i),this.getCachedQuads(e,t,r,i);}reverseMapQuadsToDefaultGraph(e){var t=o.defaultGraph();return e.map(e=>s.mapTerms(e,(e,r)=>"graph"===r&&e.equals(this.defaultGraph)?t:e));}getPatternId(e,t,r,n){return JSON.stringify({s:"Variable"===e.termType?"":a.termToString(e),p:"Variable"===t.termType?"":a.termToString(t),o:"Variable"===r.termType?"":a.termToString(r),g:"Variable"===n.termType?"":a.termToString(n)});}cacheQuads(e,t,r,n,i){var a=this.getPatternId(t,r,n,i);this.cachedQuads[a]=e.clone();}getCachedQuads(e,t,r,n){var i=this.getPatternId(e,t,r,n),a=this.cachedQuads[i];if(a)return a.clone();}};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(486),t),i(r(179),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveQuadPatternHypermedia=void 0;var n=r(21),i=r(178),a=r(179);class s extends n.ActorRdfResolveQuadPatternSource{constructor(e){super(e),this.cache=this.cacheSize?new i({max:this.cacheSize}):void 0;var t=this.cache;t&&this.httpInvalidator.addInvalidateListener(_ref64=>{var{url:e}=_ref64;return e?t.del(e):t.reset();});}test(e){var _this114=this;return _asyncToGenerator(function*(){if(!_this114.hasContextSingleSource(e.context))throw new Error("Actor "+_this114.name+" can only resolve quad pattern queries against a single source.");return !0;})();}getSource(e,t){var r=this.getContextSource(e),i=this.getContextSourceUrl(r);var s;return this.cache&&this.cache.has(i)?s=this.cache.get(i):(s=new a.MediatedQuadSource(this.cacheSize,e,i,n.getDataSourceType(r),{mediatorMetadata:this.mediatorMetadata,mediatorMetadataExtract:this.mediatorMetadataExtract,mediatorRdfDereference:this.mediatorRdfDereference,mediatorRdfResolveHypermedia:this.mediatorRdfResolveHypermedia,mediatorRdfResolveHypermediaLinks:this.mediatorRdfResolveHypermediaLinks}),this.cache&&this.cache.set(i,s)),Promise.resolve(s);}}t.ActorRdfResolveQuadPatternHypermedia=s;},function(e,t,r){function n(e){var t=this;if(t instanceof n||(t=new n()),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e);});else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++){t.push(arguments[r]);}return t;}function i(e,t,r){var n=t===e.head?new o(r,null,t,e):new o(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n;}function a(e,t){e.tail=new o(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++;}function s(e,t){e.head=new o(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++;}function o(e,t,r,n){if(!(this instanceof o))return new o(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null;}e.exports=n,n.Node=o,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t;},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++;}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++;}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++){a(this,arguments[e]);}return this.length;},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++){s(this,arguments[e]);}return this.length;},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e;}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e;}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++){e.call(t,r.value,n,this),r=r.next;}},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--){e.call(t,r.value,n,this),r=r.prev;}},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++){r=r.next;}if(t===e&&null!==r)return r.value;},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++){r=r.prev;}if(t===e&&null!==r)return r.value;},n.prototype.map=function(e,t){t=t||this;for(var r=new n(),i=this.head;null!==i;){r.push(e.call(t,i.value,this)),i=i.next;}return r;},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n(),i=this.tail;null!==i;){r.push(e.call(t,i.value,this)),i=i.prev;}return r;},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else {if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value;}for(var i=0;null!==n;i++){r=e(r,n.value,i),n=n.next;}return r;},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else {if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value;}for(var i=this.length-1;null!==n;i--){r=e(r,n.value,i),n=n.prev;}return r;},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++){e[t]=r.value,r=r.next;}return e;},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++){e[t]=r.value,r=r.prev;}return e;},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n();if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,a=this.head;null!==a&&i<e;i++){a=a.next;}for(;null!==a&&i<t;i++,a=a.next){r.push(a.value);}return r;},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n();if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,a=this.tail;null!==a&&i>t;i--){a=a.prev;}for(;null!==a&&i>e;i--,a=a.prev){r.push(a.value);}return r;},n.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,a=this.head;null!==a&&n<e;n++){a=a.next;}var s=[];for(n=0;a&&n<t;n++){s.push(a.value),a=this.removeNode(a);}null===a&&(a=this.tail),a!==this.head&&a!==this.tail&&(a=a.prev);for(n=0;n<(arguments.length<=2?0:arguments.length-2);n++){a=i(this,a,n+2<2||arguments.length<=n+2?undefined:arguments[n+2]);}return s;},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n;}return this.head=t,this.tail=e,this;};try{r(488)(n);}catch(e){}},function(e,t,r){e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(var _e183=this.head;_e183;_e183=_e183.next){yield _e183.value;}};};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.MediatedLinkedRdfSourcesAsyncRdfIterator=void 0;var n=r(490);class i extends n.LinkedRdfSourcesAsyncRdfIterator{constructor(e,t,r,n,i,a,s,o,u){super(e,n,i,a,s,o),this.context=t,this.forceSourceType=r,this.mediatorRdfDereference=u.mediatorRdfDereference,this.mediatorMetadata=u.mediatorMetadata,this.mediatorMetadataExtract=u.mediatorMetadataExtract,this.mediatorRdfResolveHypermedia=u.mediatorRdfResolveHypermedia,this.mediatorRdfResolveHypermediaLinks=u.mediatorRdfResolveHypermediaLinks,this.handledUrls={};}getSourceLinks(e){var _this115=this;return _asyncToGenerator(function*(){try{var{urls:_t177}=yield _this115.mediatorRdfResolveHypermediaLinks.mediate({context:_this115.context,metadata:e});return _t177.map(e=>"string"==typeof e?{url:e}:e).filter(e=>!_this115.handledUrls[e.url]&&(_this115.handledUrls[e.url]=!0,!0));}catch(e){return [];}})();}getSource(e,t){var _this116=this;return _asyncToGenerator(function*(){var r=_this116.context;e.context&&(r=r.merge(e.context));var n=e.url;var i=yield _this116.mediatorRdfDereference.mediate({context:r,url:n});n=i.url;var a=yield _this116.mediatorMetadata.mediate({context:r,url:n,quads:i.quads,triples:i.triples}),{metadata:s}=yield _this116.mediatorMetadataExtract.mediate({context:r,url:n,metadata:a.metadata});e.transform&&(a.data=yield e.transform(a.data));var{source:o,dataset:u}=yield _this116.mediatorRdfResolveHypermedia.mediate({context:r,forceSourceType:_this116.forceSourceType,handledDatasets:t,metadata:s,quads:a.data,url:n});return u&&(t[u]=!0),{source:o,metadata:s,handledDatasets:t};})();}}t.MediatedLinkedRdfSourcesAsyncRdfIterator=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedRdfSourcesAsyncRdfIterator=void 0;var n=r(3),i=r(178);class a extends n.BufferedIterator{constructor(e,t,r,n,i,a){super({autoStart:!0}),this.started=!1,this.cacheSize=e,this.subject=t,this.predicate=r,this.object=n,this.graph=i,this.linkQueue=[],this.firstUrl=a;}setSourcesState(e){e?this.sourcesState=e:(this.sourcesState={sources:new i({max:this.cacheSize})},this.getSourceCached({url:this.firstUrl},{}).catch(e=>this.destroy(e)));}getSourceCached(e,t){var r=this.sourcesState.sources.get(e.url);return r||(r=this.getSource(e,t),this.sourcesState.sources.set(e.url,r),r);}_read(e,t){if(this.started){if(this.currentIterator){for(;e>0;){var _t178=this.currentIterator.read();if(null===_t178)break;e--,this._push(_t178);}t();}else t();}else this.started=!0,this.sourcesState||this.setSourcesState(),this.getSourceCached({url:this.firstUrl},{}).then(e=>{this.setCurrentIterator(e,!0),t();}).catch(e=>{t();});}setCurrentIterator(e,t){var _this117=this;this.currentIterator=e.source.match(this.subject,this.predicate,this.object,this.graph);var r=!1;this.currentIterator._destination=this,this.currentIterator.on("error",e=>this.destroy(e)),this.currentIterator.on("readable",()=>this._fillBuffer()),this.currentIterator.on("end",()=>{this.currentIterator=void 0,r&&this.handleNextUrl(e);}),this.currentIterator.getProperty("metadata",n=>{e.metadata=Object.assign(Object.assign({},e.metadata),n),t&&this.setProperty("metadata",e.metadata),this.getSourceLinks(e.metadata).then(e=>Promise.all(e)).then(/*#__PURE__*/function(){var _ref65=_asyncToGenerator(function*(t){for(var _e184 of t){_this117.linkQueue.push(_e184);}r=!0,_this117.currentIterator||_this117.handleNextUrl(e);});return function(_x13){return _ref65.apply(this,arguments);};}()).catch(e=>this.destroy(e));});}handleNextUrl(e){0===this.linkQueue.length?this.close():(this.getSourceCached(this.linkQueue[0],e.handledDatasets).then(e=>this.setCurrentIterator(e,!1)).catch(e=>this.destroy(e)),this.linkQueue.shift());}}t.LinkedRdfSourcesAsyncRdfIterator=a;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(492),t),i(r(493),t),i(r(494),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_CONTEXT_HTTPPROXYHANDLER=t.ActorHttpProxy=void 0;var n=r(36);class i extends n.ActorHttp{constructor(e){super(e);}test(e){var _this118=this;return _asyncToGenerator(function*(){if(!e.context)throw new Error("Actor "+_this118.name+" could not find a context.");var r=e.context.get(t.KEY_CONTEXT_HTTPPROXYHANDLER);if(!r)throw new Error("Actor "+_this118.name+" could not find a proxy handler in the context.");if(!(yield r.getProxy(e)))throw new Error("Actor "+_this118.name+" could not determine a proxy for the given request.");return {time:1/0};})();}run(e){var _this119=this;return _asyncToGenerator(function*(){var r;var n="string"==typeof e.input?e.input:e.input.url;if(!e.context)throw new Error("Illegal state: missing context");var i=e.context.get(t.KEY_CONTEXT_HTTPPROXYHANDLER),a=yield _this119.mediatorHttp.mediate(Object.assign(Object.assign({},yield i.getProxy(e)),{context:e.context.delete(t.KEY_CONTEXT_HTTPPROXYHANDLER)}));return a.url=null!==(r=a.headers.get("x-final-url"))&&void 0!==r?r:n,a;})();}}t.ActorHttpProxy=i,t.KEY_CONTEXT_HTTPPROXYHANDLER="@comunica/actor-http-proxy:httpProxyHandler";},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyHandlerStatic=void 0;t.ProxyHandlerStatic=class{constructor(e){this.prefixUrl=e;}getProxy(e){var _this120=this;return _asyncToGenerator(function*(){return {init:e.init,input:_this120.modifyInput(e.input)};})();}modifyInput(e){return "string"==typeof e?this.prefixUrl+e:new Request(this.prefixUrl+e.url,e);}};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(496),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_CONTEXT_DATETIME=t.ActorHttpMemento=void 0;var n=r(36);r(45);var i=r(127);class a extends n.ActorHttp{constructor(e){super(e);}test(e){return _asyncToGenerator(function*(){var r;if(!(e.context&&e.context.has(t.KEY_CONTEXT_DATETIME)&&e.context.get(t.KEY_CONTEXT_DATETIME)instanceof Date))throw new Error("This actor only handles request with a set valid datetime.");if(e.init&&new Headers(null!==(r=e.init.headers)&&void 0!==r?r:{}).has("accept-datetime"))throw new Error("The request already has a set datetime.");return !0;})();}run(e){var _this121=this;return _asyncToGenerator(function*(){var r;var n=e.init?Object.assign({},e.init):{},a=n.headers=new Headers(null!==(r=n.headers)&&void 0!==r?r:{});e.context&&e.context.has(t.KEY_CONTEXT_DATETIME)&&a.append("accept-datetime",e.context.get(t.KEY_CONTEXT_DATETIME).toUTCString());var s={context:e.context,input:e.input,init:n},o=yield _this121.mediatorHttp.mediate(s);if(a.has("accept-datetime")&&o.headers&&!o.headers.has("memento-datetime")){var _t179=o.headers.has("link")&&i(o.headers.get("link"));if(_t179&&_t179.timegate){o.body&&(yield o.body.cancel());var _r156={context:e.context,input:_t179.timegate.url,init:n};return _this121.mediatorHttp.mediate(_r156);}}return o;})();}}t.ActorHttpMemento=a,t.KEY_CONTEXT_DATETIME="@comunica/actor-http-memento:datetime";},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(498),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationAsk=void 0;var n=r(1);class i extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"ask");}testOperation(e,t){return _asyncToGenerator(function*(){return !0;})();}runOperation(e,t){var _this122=this;return _asyncToGenerator(function*(){var r=yield _this122.mediatorQueryOperation.mediate({operation:e.input,context:t}),i=n.ActorQueryOperation.getSafeBindings(r);return {type:"boolean",booleanResult:new Promise((e,t)=>{i.bindingsStream.once("data",()=>{e(!0),i.bindingsStream.close();}),i.bindingsStream.on("end",()=>e(!1)),i.bindingsStream.on("error",t);})};})();}}t.ActorQueryOperationAsk=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(500),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationService=void 0;var n=r(1),i=r(21),a=r(0),s=r(3);class o extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"service");}testOperation(e,t){var _this123=this;return _asyncToGenerator(function*(){if("NamedNode"!==e.name.termType)throw new Error(_this123.name+" can only query services by IRI, while a "+e.name.termType+" was given.");return !0;})();}runOperation(e,t){var _this124=this;return _asyncToGenerator(function*(){var r=e.name.value;var o=(t=t||a.ActionContext({})).delete(i.KEY_CONTEXT_SOURCE).delete(i.KEY_CONTEXT_SOURCES);var u=_this124.forceSparqlEndpoint?"sparql":"auto";var c;o=o.set(i.KEY_CONTEXT_SOURCES,[{type:u,value:r}]);try{c=n.ActorQueryOperation.getSafeBindings(yield _this124.mediatorQueryOperation.mediate({operation:e.input,context:o}));}catch(t){if(!e.silent)throw t;c={bindingsStream:new s.SingletonIterator(n.Bindings({})),type:"bindings",variables:[],canContainUndefs:!1};}return c;})();}}t.ActorQueryOperationService=o;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(502),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationSlice=void 0;var n=r(1);class i extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"slice");}testOperation(e,t){return _asyncToGenerator(function*(){return !0;})();}runOperation(e,t){var _this125=this;return _asyncToGenerator(function*(){var r=yield _this125.mediatorQueryOperation.mediate({operation:e.input,context:t}),n=_this125.sliceMetadata(r,e);if("bindings"===r.type){var _t180=r;return {type:"bindings",bindingsStream:_this125.sliceStream(_t180.bindingsStream,e),metadata:n,variables:_t180.variables,canContainUndefs:_t180.canContainUndefs};}if("quads"===r.type){var _t181=r;return {type:"quads",quadStream:_this125.sliceStream(_t181.quadStream,e),metadata:n};}throw new Error("Invalid query output type: Expected 'bindings' or 'quads' but got '"+r.type+"'");})();}sliceStream(e,t){var r=Boolean(t.length)||0===t.length,{start:n}=t,i=r?t.start+t.length-1:1/0;return e.transform({offset:n,limit:Math.max(i-n+1,0),autoStart:!1});}sliceMetadata(e,t){var r=Boolean(t.length)||0===t.length;return e.metadata?()=>e.metadata().then(e=>{var{totalItems:n}=e;return Number.isFinite(n)&&(n=Math.max(0,n-t.start),r&&(n=Math.min(n,t.length))),Object.assign(Object.assign({},e),{totalItems:n});}):void 0;}}t.ActorQueryOperationSlice=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(504),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationBgpSingle=void 0;var n=r(1);class i extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"bgp");}testOperation(e,t){var _this126=this;return _asyncToGenerator(function*(){if(1!==e.patterns.length)throw new Error("Actor "+_this126.name+" can only operate on BGPs with a single pattern.");return !0;})();}runOperation(e,t){if(t&&t.has(n.KEY_CONTEXT_BGP_PARENTMETADATA)){var _e185=t.get(n.KEY_CONTEXT_BGP_PARENTMETADATA);t=(t=t.delete(n.KEY_CONTEXT_BGP_PARENTMETADATA)).set(n.KEY_CONTEXT_PATTERN_PARENTMETADATA,_e185[0]);}return this.mediatorQueryOperation.mediate({operation:e.patterns[0],context:t});}}t.ActorQueryOperationBgpSingle=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(506),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationBgpLeftDeepSmallest=void 0;var n=r(1),i=r(3),a=r(4),s=r(18);class o extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"bgp");}static createLeftDeepStream(e,t,r){return new i.MultiTransformIterator(e,{autoStart:!1,multiTransform(e){var n=t=>t.merge(e);return new i.TransformIterator(/*#__PURE__*/_asyncToGenerator(function*(){return (yield r(o.materializePatterns(t,e))).transform({map:n});}),{maxBufferSize:128});}});}static getCombinedVariables(e){var t=[].concat.apply([],e.map(e=>e.variables));return [...new Set(t)];}static getSmallestPatternId(e){var t=-1,r=1/0;for(var[_n96,_i68]of e.entries()){var _e186=o.getTotalItems(_i68);_e186<=r&&(r=_e186,t=_n96);}return t;}static estimateCombinedTotalItems(e,t){var r=o.getTotalItems(e);return t.map(e=>r*o.getTotalItems(e)).reduce((e,t)=>e+t,0);}static getTotalItems(e){var{totalItems:t}=null!=e?e:{};return t||0===t?t:1/0;}static materializePatterns(e,t){return e.map(e=>o.materializePattern(e,t));}static materializePattern(e,t){var r={};return {pattern:Object.assign(s.mapTerms(e,(e,n)=>{var i=o.materializeTerm(e,t);return e!==i&&(r[n]=e),i;}),{type:"pattern",context:e.context}),bindings:r};}static materializeTerm(e,t){if("Variable"===e.termType){var _r157=t.get(a.termToString(e));if(_r157)return _r157;}return e;}static hasOneEmptyPatternOutput(e){return _asyncToGenerator(function*(){for(var _t182 of e){if(_t182.metadata){var _e187=yield _t182.metadata();if(!o.getTotalItems(_e187))return !0;}}return !1;})();}testOperation(e,t){var _this127=this;return _asyncToGenerator(function*(){if(e.patterns.length<2)throw new Error("Actor "+_this127.name+" can only operate on BGPs with at least two patterns.");return !0;})();}runOperation(e,t){var _this128=this;return _asyncToGenerator(function*(){var r=(yield Promise.all(e.patterns.map(e=>_this128.mediatorQueryOperation.mediate({operation:e,context:t})))).map(n.ActorQueryOperation.getSafeBindings);if(yield o.hasOneEmptyPatternOutput(r))return {bindingsStream:new i.ArrayIterator([],{autoStart:!1}),metadata:()=>Promise.resolve({totalItems:0}),type:"bindings",variables:o.getCombinedVariables(r),canContainUndefs:!1};var a=yield Promise.all(r.map(/*#__PURE__*/function(){var _ref67=_asyncToGenerator(function*(e){return e.metadata?yield e.metadata():{};});return function(_x14){return _ref67.apply(this,arguments);};}())),s=o.getSmallestPatternId(a);_this128.logDebug(t,"Smallest pattern: ",()=>({pattern:e.patterns[s],metadata:a[s]}));for(var[_e188,_t183]of r.entries()){_e188!==s&&_t183.bindingsStream.close();}var u=r.slice(s)[0],c=e.patterns.concat([]);c.splice(s,1);var l=a.concat([]);l.splice(s,1),n.ActorQueryOperation.validateQueryOutput(u,"bindings");var h=t&&t.set(n.KEY_CONTEXT_BGP_CURRENTMETADATA,a[s]).set(n.KEY_CONTEXT_BGP_PARENTMETADATA,l);return {type:"bindings",bindingsStream:o.createLeftDeepStream(u.bindingsStream,c,/*#__PURE__*/function(){var _ref68=_asyncToGenerator(function*(e){var t={type:"bgp",patterns:e.map(e=>e.pattern)},r=e.map(e=>e.bindings);return n.ActorQueryOperation.getSafeBindings(yield _this128.mediatorQueryOperation.mediate({operation:t,context:h.set(n.KEY_CONTEXT_BGP_PATTERNBINDINGS,r)})).bindingsStream;});return function(_x15){return _ref68.apply(this,arguments);};}()),variables:o.getCombinedVariables(r),metadata:()=>Promise.resolve({totalItems:o.estimateCombinedTotalItems(a[s],a.slice(s))}),canContainUndefs:!1};})();}}t.ActorQueryOperationBgpLeftDeepSmallest=o;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(508),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationConstruct=void 0;var n=r(1),i=r(18),a=r(509);class s extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"construct");}static getVariables(e){return i.uniqTerms([].concat.apply([],e.map(e=>i.getVariables(i.getTerms(e)))));}testOperation(e,t){return _asyncToGenerator(function*(){return !0;})();}runOperation(e,t){var _this129=this;return _asyncToGenerator(function*(){var r=s.getVariables(e.template),i={type:"project",input:e.input,variables:r},o=n.ActorQueryOperation.getSafeBindings(yield _this129.mediatorQueryOperation.mediate({operation:i,context:t})),u=new a.BindingsToQuadsIterator(e.template,o.bindingsStream);var c;return o.metadata&&(c=()=>o.metadata().then(t=>t.totalItems?Object.assign(Object.assign({},t),{totalItems:t.totalItems*e.template.length}):t)),{metadata:c,quadStream:u,type:"quads"};})();}}t.ActorQueryOperationConstruct=s;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.BindingsToQuadsIterator=void 0;var n=r(3),i=r(5),a=r(18),s=new i.DataFactory();class o extends n.MultiTransformIterator{constructor(e,t){super(t,{autoStart:!1}),this.template=e,this.blankNodeCounter=0;}static bindTerm(e,t){return "Variable"===t.termType?e.get("?"+t.value):t;}static bindQuad(e,t){try{return a.mapTerms(t,t=>{var r=o.bindTerm(e,t);if(!r)throw new Error("Unbound term");return r;});}catch(e){}}static localizeBlankNode(e,t){return "BlankNode"===t.termType?s.blankNode(""+t.value+e):t;}static localizeQuad(e,t){return a.mapTerms(t,t=>o.localizeBlankNode(e,t));}static bindTemplate(e,t,r){return t.map(t=>o.bindQuad.bind(null,e)(t)).filter(Boolean).map(o.localizeQuad.bind(null,r));}_createTransformer(e){return new n.ArrayIterator(o.bindTemplate(e,this.template,this.blankNodeCounter++));}}t.BindingsToQuadsIterator=o;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(511),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationDescribeSubject=void 0;var n=r(180),i=r(1),a=r(3),s=new(r(5).DataFactory)();class o extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"describe");}testOperation(e,t){return _asyncToGenerator(function*(){return !0;})();}runOperation(e,t){var _this130=this;return _asyncToGenerator(function*(){var r=e.terms.filter(e=>"Variable"!==e.termType).map(e=>{var t=[s.quad(e,s.variable("__predicate"),s.variable("__object"))];t.forEach(e=>e.type="pattern");return {input:{type:"bgp",patterns:t},template:t,type:"construct"};});if(r.length!==e.terms.length){var _t184=[];e.terms.filter(e=>"Variable"===e.termType).forEach((e,r)=>{var n=[s.quad(e,s.variable("__predicate"+r),s.variable("__object"+r))];n.forEach(e=>e.type="pattern"),_t184=_t184.concat(n);}),r.push({input:{type:"join",left:e.input,right:{type:"bgp",patterns:_t184}},template:_t184,type:"construct"});}var o=(yield Promise.all(r.map(e=>_this130.mediatorQueryOperation.mediate({operation:e,context:t})))).map(i.ActorQueryOperation.getSafeQuads);return {type:"quads",quadStream:new a.UnionIterator(o.map(e=>e.quadStream),{autoStart:!1}),metadata:()=>Promise.all(o.map(e=>i.getMetadata(e))).then(n.ActorQueryOperationUnion.unionMetadata)};})();}}t.ActorQueryOperationDescribeSubject=o;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationUnion=void 0;var n=r(1),i=r(3);class a extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"union");}static unionVariables(e){var t=e.reduce((e,t)=>[...e,...t],[]);return [...new Set(t)];}static unionMetadata(e){var t=0;for(var _r158 of e){if(!_r158.totalItems||!Number.isFinite(_r158.totalItems)){t=1/0;break;}t+=_r158.totalItems;}return {totalItems:t};}testOperation(e,t){return _asyncToGenerator(function*(){return !0;})();}runOperation(e,t){var _this131=this;return _asyncToGenerator(function*(){var r=(yield Promise.all([_this131.mediatorQueryOperation.mediate({operation:e.left,context:t}),_this131.mediatorQueryOperation.mediate({operation:e.right,context:t})])).map(n.ActorQueryOperation.getSafeBindings);return {type:"bindings",bindingsStream:new i.UnionIterator(r.map(e=>e.bindingsStream),{autoStart:!1}),metadata:r[0].metadata&&r[1].metadata?()=>Promise.all([r[0].metadata(),r[1].metadata()]).then(a.unionMetadata):void 0,variables:a.unionVariables(r.map(e=>e.variables)),canContainUndefs:r.reduce((e,t)=>e||t.canContainUndefs,!1)};})();}}t.ActorQueryOperationUnion=a;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(514),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationDistinctHash=void 0;var n=r(88);class i extends n.AbstractBindingsHash{constructor(e){super(e,"distinct");}newHashFilter(){var e={};return t=>{var r=n.AbstractFilterHash.hash(t);return !(r in e)&&(e[r]=!0);};}}t.ActorQueryOperationDistinctHash=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractBindingsHash=void 0;var n=r(1);class i extends n.ActorQueryOperationTypedMediated{constructor(e,t){super(e,t);}testOperation(e,t){return _asyncToGenerator(function*(){return !0;})();}runOperation(e,t){var _this132=this;return _asyncToGenerator(function*(){var r=n.ActorQueryOperation.getSafeBindings(yield _this132.mediatorQueryOperation.mediate({operation:e.input,context:t}));return {type:"bindings",bindingsStream:r.bindingsStream.filter(_this132.newHashFilter()),metadata:r.metadata,variables:r.variables,canContainUndefs:r.canContainUndefs};})();}}t.AbstractBindingsHash=i;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractFilterHash=void 0;var n=r(1),i=r(181),a=r(4);class s extends n.ActorQueryOperationTypedMediated{constructor(e,t){super(e,t);}static hash(e){return i.sha1().update(r(84)(e.map(e=>a.termToString(e)))).digest("hex");}}t.AbstractFilterHash=s;},function(e,t,r){t.sha1=r(518),t.sha224=r(519),t.sha256=r(183),t.sha384=r(520),t.sha512=r(184);},function(e,t,r){var n=r(19),i=r(50),a=r(182),s=n.rotl32,o=n.sum32,u=n.sum32_5,c=a.ft_1,l=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d();l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80);}n.inherits(d,l),e.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++){r[n]=e[t+n];}for(;n<r.length;n++){r[n]=s(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);}var i=this.h[0],a=this.h[1],l=this.h[2],d=this.h[3],p=this.h[4];for(n=0;n<r.length;n++){var f=~~(n/20),g=u(s(i,5),c(f,a,l,d),p,r[n],h[f]);p=d,d=l,l=s(a,30),a=i,i=g;}this.h[0]=o(this.h[0],i),this.h[1]=o(this.h[1],a),this.h[2]=o(this.h[2],l),this.h[3]=o(this.h[3],d),this.h[4]=o(this.h[4],p);},d.prototype._digest=function(e){return "hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big");};},function(e,t,r){var n=r(19),i=r(183);function a(){if(!(this instanceof a))return new a();i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428];}n.inherits(a,i),e.exports=a,a.blockSize=512,a.outSize=224,a.hmacStrength=192,a.padLength=64,a.prototype._digest=function(e){return "hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big");};},function(e,t,r){var n=r(19),i=r(184);function a(){if(!(this instanceof a))return new a();i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428];}n.inherits(a,i),e.exports=a,a.blockSize=1024,a.outSize=384,a.hmacStrength=192,a.padLength=128,a.prototype._digest=function(e){return "hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big");};},function(e,t,r){var n=r(19),i=r(50),a=n.rotl32,s=n.sum32,o=n.sum32_3,u=n.sum32_4,c=i.BlockHash;function l(){if(!(this instanceof l))return new l();c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little";}function h(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n);}function d(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838;}function p(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0;}n.inherits(l,c),t.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],c=this.h[3],l=this.h[4],b=r,_=n,v=i,w=c,S=l,T=0;T<80;T++){var E=s(a(u(r,h(T,n,i,c),e[f[T]+t],d(T)),m[T]),l);r=l,l=c,c=a(i,10),i=n,n=E,E=s(a(u(b,h(79-T,_,v,w),e[g[T]+t],p(T)),y[T]),S),b=S,S=w,w=a(v,10),v=_,_=E;}E=o(this.h[1],i,w),this.h[1]=o(this.h[2],c,S),this.h[2]=o(this.h[3],l,b),this.h[3]=o(this.h[4],r,_),this.h[4]=o(this.h[0],n,v),this.h[0]=E;},l.prototype._digest=function(e){return "hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little");};var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];},function(e,t,r){var n=r(19),i=r(49);function a(e,t,r){if(!(this instanceof a))return new a(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r));}e.exports=a,a.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++){e.push(0);}for(t=0;t<e.length;t++){e[t]^=54;}for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++){e[t]^=106;}this.outer=new this.Hash().update(e);},a.prototype.update=function(e,t){return this.inner.update(e,t),this;},a.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e);};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(524),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationExtend=void 0;var n=r(1),i=r(4),a=r(51);class s extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"extend");}testOperation(e,t){return _asyncToGenerator(function*(){Boolean(new a.AsyncEvaluator(e.expression));return !0;})();}runOperation(e,t){var _this133=this;return _asyncToGenerator(function*(){var{expression:r,input:s,variable:o}=e,u=n.ActorQueryOperation.getSafeBindings(yield _this133.mediatorQueryOperation.mediate({operation:s,context:t})),c=i.termToString(o),l=Object.assign({},n.ActorQueryOperation.getExpressionContext(t,_this133.mediatorQueryOperation)),h=new a.AsyncEvaluator(r,l),d=u.variables.concat([c]),p=u.bindingsStream.transform({transform:function(){var _transform=_asyncToGenerator(function*(e,r,n){try{var _t185=yield h.evaluate(e);n(e.set(c,_t185));}catch(r){a.isExpressionError(r)?(n(e),_this133.logWarn(t,"Expression error for extend operation with bindings '"+JSON.stringify(e)+"'")):p.emit("error",r);}r();});function transform(_x16,_x17,_x18){return _transform.apply(this,arguments);}return transform;}()}),{metadata:f}=u;return {type:"bindings",bindingsStream:p,metadata:f,variables:d,canContainUndefs:u.canContainUndefs};})();}}t.ActorQueryOperationExtend=s;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncEvaluator=void 0;var n=r(39),i=r(185);t.AsyncEvaluator=class{constructor(e,t){if(t===void 0){t={};}this.algExpr=e,this.config=t,this.expr=n.transformAlgebra(e);var r={now:t.now||new Date(Date.now()),baseIRI:t.baseIRI||void 0,exists:t.exists,aggregate:t.aggregate};this.evaluator=new i.AsyncRecursiveEvaluator(r);}evaluate(e){var _this134=this;return _asyncToGenerator(function*(){return (yield _this134.evaluator.evaluate(_this134.expr,e)).toRDF();})();}evaluateAsEBV(e){var _this135=this;return _asyncToGenerator(function*(){return (yield _this135.evaluator.evaluate(_this135.expr,e)).coerceEBV();})();}evaluateAsInternal(e){var _this136=this;return _asyncToGenerator(function*(){return yield _this136.evaluator.evaluate(_this136.expr,e);})();}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Variable=void 0;var n=r(24);t.Variable=class{constructor(e){this.expressionType=n.ExpressionType.Variable,this.name=e;}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NonLexicalLiteral=t.StringLiteral=t.LangStringLiteral=t.DateTimeLiteral=t.BooleanLiteral=t.NumericLiteral=t.Literal=t.BlankNode=t.NamedNode=t.Term=void 0;var n=r(5),i=r(24),a=r(14),s=r(20),o=new n.DataFactory();class u{constructor(){this.expressionType=i.ExpressionType.Term;}str(){throw new s.InvalidArgumentTypes([this],a.RegularOperator.STR);}coerceEBV(){throw new s.EBVCoercionError(this);}}t.Term=u;t.NamedNode=class extends u{constructor(e){super(),this.value=e,this.termType="namedNode";}toRDF(){return o.namedNode(this.value);}str(){return this.value;}};class c extends u{constructor(e){super(),this.value=e,this.termType="blankNode",this.value=e;}static nextID(){return c._nextID+=1,c.nextID.toString();}toRDF(){return o.blankNode(this.value);}}t.BlankNode=c,c._nextID=0;class l extends u{constructor(e,t,r,n){super(),this.typedValue=e,this.typeURL=t,this.strValue=r,this.language=n,this.termType="literal",this.type=a.type(t.value);}toRDF(){return o.literal(this.strValue||this.str(),this.language||this.typeURL);}str(){return this.strValue||this.typedValue.toString();}}t.Literal=l;class h extends l{coerceEBV(){return !!this.typedValue;}toRDF(){var e=super.toRDF();return isFinite(this.typedValue)||(e.value=e.value.replace("Infinity","INF")),e;}str(){return this.strValue||h.specificFormatters[this.type](this.typedValue);}}t.NumericLiteral=h,h.specificFormatters={integer:e=>e.toFixed(),float:e=>e.toString(),decimal:e=>e.toString(),double:e=>{var t=e.toExponential(),[r,n]=t.split("e"),i=n.replace(/\+/,"");return (r.match(/\./)?r:r+".0")+"E"+i;}};t.BooleanLiteral=class extends l{constructor(e,t){super(e,a.make(a.TypeURL.XSD_BOOLEAN),t),this.typedValue=e,this.strValue=t;}coerceEBV(){return !!this.typedValue;}};t.DateTimeLiteral=class extends l{constructor(e,t){super(e,a.make(a.TypeURL.XSD_DATE_TIME),t),this.typedValue=e,this.strValue=t;}};t.LangStringLiteral=class extends l{constructor(e,t){super(e,a.make(a.TypeURL.RDF_LANG_STRING),e,t),this.typedValue=e,this.language=t;}coerceEBV(){return 0!==this.strValue.length;}};t.StringLiteral=class extends l{constructor(e){super(e,a.make(a.TypeURL.XSD_STRING),e),this.typedValue=e;}coerceEBV(){return 0!==this.strValue.length;}};t.NonLexicalLiteral=class extends l{constructor(e,t,r,n){super(e,t,r,n),this.typedValue=void 0,this.type="nonlexical",this.shouldBeCategory=a.type(t.value);}coerceEBV(){if(a.PrimitiveNumericTypes.contains(this.shouldBeCategory)||"boolean"===this.shouldBeCategory)return !1;throw new s.EBVCoercionError(this);}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Operator=void 0;var n=r(24);t.Operator=class{constructor(e,t){this.args=e,this.apply=t,this.expressionType=n.ExpressionType.Operator;}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SpecialOperator=void 0;var n=r(24);t.SpecialOperator=class{constructor(e,t,r){this.args=e,this.applyAsync=t,this.applySync=r,this.expressionType=n.ExpressionType.SpecialOperator;}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Named=void 0;var n=r(24);t.Named=class{constructor(e,t,r){this.name=e,this.args=t,this.apply=r,this.expressionType=n.ExpressionType.Named;}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Aggregate=void 0;var n=r(24);t.Aggregate=class{constructor(e,t){this.name=e,this.expression=t,this.expressionType=n.ExpressionType.Aggregate;}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Existence=void 0;var n=r(24);t.Existence=class{constructor(e){this.expression=e,this.expressionType=n.ExpressionType.Existence;}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.namedDefinitions=void 0;var n=r(23),i=r(20),a=r(14),s=r(65),o=r(66),u={arity:1,overloads:o.declare().onNumeric1(e=>o.string(o.number(e.typedValue).str())).onBoolean1Typed(e=>o.string(o.bool(e).str())).onTerm1(e=>o.string(e.str())).collect()},c={arity:1,overloads:o.declare().onNumeric1(e=>o.number(e.typedValue)).onBoolean1Typed(e=>o.number(e?1:0)).onUnary("string",e=>{var t=s.parseXSDFloat(e.str());if(void 0===t)throw new i.CastError(e,a.TypeURL.XSD_FLOAT);return o.number(t);}).copy({from:["string"],to:["nonlexical"]}).collect()},l={arity:1,overloads:o.declare().onNumeric1(e=>o.number(e.typedValue,a.TypeURL.XSD_DOUBLE)).onBoolean1Typed(e=>o.number(e?1:0,a.TypeURL.XSD_DOUBLE)).onUnary("string",e=>{var t=s.parseXSDFloat(e.str());if(void 0===t)throw new i.CastError(e,a.TypeURL.XSD_DOUBLE);return o.number(t,a.TypeURL.XSD_DOUBLE);}).copy({from:["string"],to:["nonlexical"]}).collect()},h={arity:1,overloads:o.declare().onNumeric1(e=>{var t=s.parseXSDDecimal(e.str());if(void 0===t)throw new i.CastError(e,a.TypeURL.XSD_DECIMAL);return o.number(t,a.TypeURL.XSD_DECIMAL);}).onString1(e=>{var t=e.str(),r=/^(\-|\+)?([0-9]+(\.[0-9]+)?)$/.test(t)?s.parseXSDDecimal(t):void 0;if(void 0===r)throw new i.CastError(e,a.TypeURL.XSD_DECIMAL);return o.number(r,a.TypeURL.XSD_DECIMAL);}).copy({from:["string"],to:["nonlexical"]}).onBoolean1Typed(e=>o.number(e?1:0,a.TypeURL.XSD_DECIMAL)).collect()},d={arity:1,overloads:o.declare().onBoolean1Typed(e=>o.number(e?1:0,a.TypeURL.XSD_INTEGER)).onNumeric1(e=>{var t=s.parseXSDInteger(e.str());if(void 0===t)throw new i.CastError(e,a.TypeURL.XSD_INTEGER);return o.number(t,a.TypeURL.XSD_INTEGER);}).onString1(e=>{var t=e.str(),r=/^[0-9]+$/.test(t)?s.parseXSDInteger(t):void 0;if(void 0===r)throw new i.CastError(e,a.TypeURL.XSD_INTEGER);return o.number(r,a.TypeURL.XSD_INTEGER);}).copy({from:["integer"],to:["nonlexical"]}).collect()},p={arity:1,overloads:o.declare().onUnary("date",e=>e).onUnary("string",e=>{var t=new Date(e.str());if(isNaN(t.getTime()))throw new i.CastError(e,a.TypeURL.XSD_DATE_TIME);return o.dateTime(t,e.str());}).copy({from:["string"],to:["nonlexical"]}).collect()},f={arity:1,overloads:o.declare().onNumeric1(e=>o.bool(e.coerceEBV())).onUnary("boolean",e=>o.bool(e.coerceEBV())).onUnary("string",e=>{switch(e.str()){case"true":return o.bool(!0);case"false":return o.bool(!1);case"1":return o.bool(!0);case"0":return o.bool(!1);default:throw new i.CastError(e,a.TypeURL.XSD_BOOLEAN);}}).copy({from:["string"],to:["nonlexical"]}).collect()},g={[a.TypeURL.XSD_STRING]:u,[a.TypeURL.XSD_FLOAT]:c,[a.TypeURL.XSD_DOUBLE]:l,[a.TypeURL.XSD_DECIMAL]:h,[a.TypeURL.XSD_INTEGER]:d,[a.TypeURL.XSD_DATE_TIME]:p,[a.TypeURL.XSD_DATE]:p,[a.TypeURL.XSD_BOOLEAN]:f};t.namedDefinitions=n.Map(g);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.definitions=void 0;var n=r(5),i=r(181),a=r(535),s=r(536),o=r(188),u=r(23),c=r(40),l=r(14),h=r(20),d=r(65),p=r(537),f=r(14),g=r(39),m=r(66),y=new n.DataFactory();function b(e,t){var r=e.toRDF(),n=t.toRDF(),i=r.equals(n);if("Literal"===r.termType&&"Literal"===n.termType)throw new h.RDFEqualTypeError([e,t]);return i;}var _=(e,t)=>m.bool(p.matches(e,t)),v=(e,t,r)=>m.bool(p.matches(e,t,r));function w(e){return d.parseXSDDateTime(e.str());}var S={"!":{arity:1,overloads:m.declare().onTerm1(e=>m.bool(!e.coerceEBV())).collect()},UPLUS:{arity:1,overloads:m.declare().onNumeric1(e=>m.number(e.typedValue,e.typeURL.value)).collect()},UMINUS:{arity:1,overloads:m.declare().onNumeric1(e=>m.number(-e.typedValue,e.typeURL.value)).collect()},"*":{arity:2,overloads:m.declare().arithmetic((e,t)=>s.Decimal.mul(e,t).toNumber()).collect()},"/":{arity:2,overloads:m.declare().arithmetic((e,t)=>s.Decimal.div(e,t).toNumber()).onBinaryTyped(["integer","integer"],(e,t)=>{if(0===t)throw new h.ExpressionError("Integer division by 0");return m.number(s.Decimal.div(e,t).toNumber(),f.TypeURL.XSD_DECIMAL);}).collect()},"+":{arity:2,overloads:m.declare().arithmetic((e,t)=>s.Decimal.add(e,t).toNumber()).collect()},"-":{arity:2,overloads:m.declare().arithmetic((e,t)=>s.Decimal.sub(e,t).toNumber()).collect()},"=":{arity:2,overloads:m.declare().numberTest((e,t)=>e===t).stringTest((e,t)=>0===e.localeCompare(t)).booleanTest((e,t)=>e===t).dateTimeTest((e,t)=>e.getTime()===t.getTime()).set(["term","term"],_ref69=>{var[e,t]=_ref69;return m.bool(b(e,t));}).collect()},"!=":{arity:2,overloads:m.declare().numberTest((e,t)=>e!==t).stringTest((e,t)=>0!==e.localeCompare(t)).booleanTest((e,t)=>e!==t).dateTimeTest((e,t)=>e.getTime()!==t.getTime()).set(["term","term"],_ref70=>{var[e,t]=_ref70;return m.bool(!b(e,t));}).collect()},"<":{arity:2,overloads:m.declare().numberTest((e,t)=>e<t).stringTest((e,t)=>-1===e.localeCompare(t)).booleanTest((e,t)=>e<t).dateTimeTest((e,t)=>e.getTime()<t.getTime()).collect()},">":{arity:2,overloads:m.declare().numberTest((e,t)=>e>t).stringTest((e,t)=>1===e.localeCompare(t)).booleanTest((e,t)=>e>t).dateTimeTest((e,t)=>e.getTime()>t.getTime()).collect()},"<=":{arity:2,overloads:m.declare().numberTest((e,t)=>e<=t).stringTest((e,t)=>1!==e.localeCompare(t)).booleanTest((e,t)=>e<=t).dateTimeTest((e,t)=>e.getTime()<=t.getTime()).collect()},">=":{arity:2,overloads:m.declare().numberTest((e,t)=>e>=t).stringTest((e,t)=>-1!==e.localeCompare(t)).booleanTest((e,t)=>e>=t).dateTimeTest((e,t)=>e.getTime()>=t.getTime()).collect()},isiri:{arity:1,overloads:m.declare().onTerm1(e=>m.bool("namedNode"===e.termType)).collect()},isblank:{arity:1,overloads:m.declare().onTerm1(e=>m.bool("blankNode"===e.termType)).collect()},isliteral:{arity:1,overloads:m.declare().onTerm1(e=>m.bool("literal"===e.termType)).collect()},isnumeric:{arity:1,overloads:m.declare().onNumeric1(e=>m.bool(!0)).onTerm1(e=>m.bool(!1)).collect()},str:{arity:1,overloads:m.declare().onTerm1(e=>m.string(e.str())).collect()},lang:{arity:1,overloads:m.declare().onLiteral1(e=>m.string(e.language||"")).collect()},datatype:{arity:1,overloads:m.declare().onLiteral1(e=>new c.NamedNode(e.typeURL.value)).collect()},strdt:{arity:2,overloads:m.declare().onBinary(["string","namedNode"],(e,t)=>{var r=y.literal(e.typedValue,y.namedNode(t.value));return g.transformLiteral(r);}).collect()},strlang:{arity:2,overloads:m.declare().onBinaryTyped(["string","string"],(e,t)=>new c.LangStringLiteral(e,t.toLowerCase())).collect()},uuid:{arity:0,overloads:m.declare().set([],()=>new c.NamedNode("urn:uuid:"+o.v4())).collect()},struuid:{arity:0,overloads:m.declare().set([],()=>m.string(o.v4())).collect()},strlen:{arity:1,overloads:m.declare().onStringly1(e=>m.number([...e.typedValue].length,f.TypeURL.XSD_INTEGER)).collect()},substr:{arity:[2,3],overloads:m.declare().onBinaryTyped(["string","integer"],(e,t)=>m.string([...e].slice(t-1).join(""))).onBinary(["langString","integer"],(e,t)=>{var r=[...e.typedValue].slice(t.typedValue-1).join("");return m.langString(r,e.language);}).onTernaryTyped(["string","integer","integer"],(e,t,r)=>m.string([...e].slice(t-1,r).join(""))).onTernary(["langString","integer","integer"],(e,t,r)=>{var n=[...e.typedValue].slice(t.typedValue-1,r.typedValue).join("");return m.langString(n,e.language);}).collect()},ucase:{arity:1,overloads:m.declare().onString1Typed(e=>m.string(e.toUpperCase())).onLangString1(e=>m.langString(e.typedValue.toUpperCase(),e.language)).collect()},lcase:{arity:1,overloads:m.declare().onString1Typed(e=>m.string(e.toLowerCase())).onLangString1(e=>m.langString(e.typedValue.toLowerCase(),e.language)).collect()},strstarts:{arity:2,overloads:m.declare().onBinaryTyped(["string","string"],(e,t)=>m.bool(e.startsWith(t))).onBinaryTyped(["langString","string"],(e,t)=>m.bool(e.startsWith(t))).onBinary(["langString","langString"],(e,t)=>{if(e.language!==t.language)throw new h.IncompatibleLanguageOperation(e,t);return m.bool(e.typedValue.startsWith(t.typedValue));}).collect()},strends:{arity:2,overloads:m.declare().onBinaryTyped(["string","string"],(e,t)=>m.bool(e.endsWith(t))).onBinaryTyped(["langString","string"],(e,t)=>m.bool(e.endsWith(t))).onBinary(["langString","langString"],(e,t)=>{if(e.language!==t.language)throw new h.IncompatibleLanguageOperation(e,t);return m.bool(e.typedValue.endsWith(t.typedValue));}).collect()},contains:{arity:2,overloads:m.declare().onBinaryTyped(["string","string"],(e,t)=>m.bool(e.includes(t))).onBinaryTyped(["langString","string"],(e,t)=>m.bool(e.includes(t))).onBinary(["langString","langString"],(e,t)=>{if(e.language!==t.language)throw new h.IncompatibleLanguageOperation(e,t);return m.bool(e.typedValue.includes(t.typedValue));}).collect()},strbefore:{arity:2,overloads:m.declare().onBinaryTyped(["string","string"],(e,t)=>m.string(e.substr(0,e.indexOf(t)))).onBinary(["langString","string"],(e,t)=>{var[r,n]=[e.typedValue,t.typedValue],i=e.typedValue.substr(0,r.indexOf(n));return i||!n?m.langString(i,e.language):m.string(i);}).onBinary(["langString","langString"],(e,t)=>{if(e.language!==t.language)throw new h.IncompatibleLanguageOperation(e,t);var[r,n]=[e.typedValue,t.typedValue],i=e.typedValue.substr(0,r.indexOf(n));return i||!n?m.langString(i,e.language):m.string(i);}).collect()},strafter:{arity:2,overloads:m.declare().onBinaryTyped(["string","string"],(e,t)=>m.string(e.substr(e.indexOf(t)).substr(t.length))).onBinary(["langString","string"],(e,t)=>{var[r,n]=[e.typedValue,t.typedValue],i=r.substr(r.indexOf(n)).substr(n.length);return i||!n?m.langString(i,e.language):m.string(i);}).onBinary(["langString","langString"],(e,t)=>{if(e.language!==t.language)throw new h.IncompatibleLanguageOperation(e,t);var[r,n]=[e.typedValue,t.typedValue],i=r.substr(r.indexOf(n)).substr(n.length);return i||!n?m.langString(i,e.language):m.string(i);}).collect()},encode_for_uri:{arity:1,overloads:m.declare().onStringly1Typed(e=>m.string(encodeURI(e))).collect()},langmatches:{arity:2,overloads:m.declare().onBinaryTyped(["string","string"],(e,t)=>m.bool(p.langMatches(e,t))).collect()},regex:{arity:[2,3],overloads:m.declare().onBinaryTyped(["string","string"],_).onBinaryTyped(["langString","string"],_).onTernaryTyped(["string","string","string"],v).onTernaryTyped(["langString","string","string"],v).collect()},replace:{arity:[3,4],overloads:m.declare().onTernaryTyped(["string","string","string"],(e,t,r)=>m.string(p.replace(e,t,r))).set(["langString","string","string"],_ref71=>{var[e,t,r]=_ref71;var n=p.replace(e.typedValue,t.typedValue,r.typedValue);return m.langString(n,e.language);}).onQuaternaryTyped(["string","string","string","string"],(e,t,r,n)=>m.string(p.replace(e,t,r,n))).set(["langString","string","string","string"],_ref72=>{var[e,t,r,n]=_ref72;var i=p.replace(e.typedValue,t.typedValue,r.typedValue,n.typedValue);return m.langString(i,e.language);}).collect()},abs:{arity:1,overloads:m.declare().onNumeric1(e=>m.number(Math.abs(e.typedValue),e.typeURL.value)).collect()},round:{arity:1,overloads:m.declare().onNumeric1(e=>m.number(Math.round(e.typedValue),e.typeURL.value)).collect()},ceil:{arity:1,overloads:m.declare().onNumeric1(e=>m.number(Math.ceil(e.typedValue),e.typeURL.value)).collect()},floor:{arity:1,overloads:m.declare().onNumeric1(e=>m.number(Math.floor(e.typedValue),e.typeURL.value)).collect()},rand:{arity:0,overloads:m.declare().set([],()=>m.number(Math.random(),f.TypeURL.XSD_DOUBLE)).collect()},year:{arity:1,overloads:m.declare().onDateTime1(e=>m.number(Number(w(e).year),f.TypeURL.XSD_INTEGER)).collect()},month:{arity:1,overloads:m.declare().onDateTime1(e=>m.number(Number(w(e).month),f.TypeURL.XSD_INTEGER)).collect()},day:{arity:1,overloads:m.declare().onDateTime1(e=>m.number(Number(w(e).day),f.TypeURL.XSD_INTEGER)).collect()},hours:{arity:1,overloads:m.declare().onDateTime1(e=>m.number(Number(w(e).hours),f.TypeURL.XSD_INTEGER)).collect()},minutes:{arity:1,overloads:m.declare().onDateTime1(e=>m.number(Number(w(e).minutes),f.TypeURL.XSD_INTEGER)).collect()},seconds:{arity:1,overloads:m.declare().onDateTime1(e=>m.number(Number(w(e).seconds),f.TypeURL.XSD_DECIMAL)).collect()},timezone:{arity:1,overloads:m.declare().onDateTime1(e=>{var t=p.formatDayTimeDuration(w(e).timezone);if(!t)throw new h.InvalidTimezoneCall(e.strValue);return new c.Literal(t,l.make(f.TypeURL.XSD_DAYTIME_DURATION),t);}).collect()},tz:{arity:1,overloads:m.declare().onDateTime1(e=>m.string(w(e).timezone)).collect()},md5:{arity:1,overloads:m.declare().onString1Typed(e=>m.string(a.hash(e))).collect()},sha1:{arity:1,overloads:m.declare().onString1Typed(e=>m.string(i.sha1().update(e).digest("hex"))).collect()},sha256:{arity:1,overloads:m.declare().onString1Typed(e=>m.string(i.sha256().update(e).digest("hex"))).collect()},sha384:{arity:1,overloads:m.declare().onString1Typed(e=>m.string(i.sha384().update(e).digest("hex"))).collect()},sha512:{arity:1,overloads:m.declare().onString1Typed(e=>m.string(i.sha512().update(e).digest("hex"))).collect()}};t.definitions=u.Map(S);},function(e,t,r){e.exports=function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(e,t){var r=e[0],n=e[1],i=e[2],a=e[3];n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&i|~n&a)+t[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&i)+t[1]-389564586|0)<<12|a>>>20)+r|0)&r|~a&n)+t[2]+606105819|0)<<17|i>>>15)+a|0)&a|~i&r)+t[3]-1044525330|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&i|~n&a)+t[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&i)+t[5]+1200080426|0)<<12|a>>>20)+r|0)&r|~a&n)+t[6]-1473231341|0)<<17|i>>>15)+a|0)&a|~i&r)+t[7]-45705983|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&i|~n&a)+t[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&i)+t[9]-1958414417|0)<<12|a>>>20)+r|0)&r|~a&n)+t[10]-42063|0)<<17|i>>>15)+a|0)&a|~i&r)+t[11]-1990404162|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&i|~n&a)+t[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&i)+t[13]-40341101|0)<<12|a>>>20)+r|0)&r|~a&n)+t[14]-1502002290|0)<<17|i>>>15)+a|0)&a|~i&r)+t[15]+1236535329|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&a|i&~a)+t[1]-165796510|0)<<5|r>>>27)+n|0)&i|n&~i)+t[6]-1069501632|0)<<9|a>>>23)+r|0)&n|r&~n)+t[11]+643717713|0)<<14|i>>>18)+a|0)&r|a&~r)+t[0]-373897302|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&a|i&~a)+t[5]-701558691|0)<<5|r>>>27)+n|0)&i|n&~i)+t[10]+38016083|0)<<9|a>>>23)+r|0)&n|r&~n)+t[15]-660478335|0)<<14|i>>>18)+a|0)&r|a&~r)+t[4]-405537848|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&a|i&~a)+t[9]+568446438|0)<<5|r>>>27)+n|0)&i|n&~i)+t[14]-1019803690|0)<<9|a>>>23)+r|0)&n|r&~n)+t[3]-187363961|0)<<14|i>>>18)+a|0)&r|a&~r)+t[8]+1163531501|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&a|i&~a)+t[13]-1444681467|0)<<5|r>>>27)+n|0)&i|n&~i)+t[2]-51403784|0)<<9|a>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0)<<14|i>>>18)+a|0)&r|a&~r)+t[12]-1926607734|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n^i^a)+t[5]-378558|0)<<4|r>>>28)+n|0)^n^i)+t[8]-2022574463|0)<<11|a>>>21)+r|0)^r^n)+t[11]+1839030562|0)<<16|i>>>16)+a|0)^a^r)+t[14]-35309556|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n^i^a)+t[1]-1530992060|0)<<4|r>>>28)+n|0)^n^i)+t[4]+1272893353|0)<<11|a>>>21)+r|0)^r^n)+t[7]-155497632|0)<<16|i>>>16)+a|0)^a^r)+t[10]-1094730640|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n^i^a)+t[13]+681279174|0)<<4|r>>>28)+n|0)^n^i)+t[0]-358537222|0)<<11|a>>>21)+r|0)^r^n)+t[3]-722521979|0)<<16|i>>>16)+a|0)^a^r)+t[6]+76029189|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n^i^a)+t[9]-640364487|0)<<4|r>>>28)+n|0)^n^i)+t[12]-421815835|0)<<11|a>>>21)+r|0)^r^n)+t[15]+530742520|0)<<16|i>>>16)+a|0)^a^r)+t[2]-995338651|0)<<23|n>>>9)+i|0,n=((n+=((a=((a+=(n^((r=((r+=(i^(n|~a))+t[0]-198630844|0)<<6|r>>>26)+n|0)|~i))+t[7]+1126891415|0)<<10|a>>>22)+r|0)^((i=((i+=(r^(a|~n))+t[14]-1416354905|0)<<15|i>>>17)+a|0)|~r))+t[5]-57434055|0)<<21|n>>>11)+i|0,n=((n+=((a=((a+=(n^((r=((r+=(i^(n|~a))+t[12]+1700485571|0)<<6|r>>>26)+n|0)|~i))+t[3]-1894986606|0)<<10|a>>>22)+r|0)^((i=((i+=(r^(a|~n))+t[10]-1051523|0)<<15|i>>>17)+a|0)|~r))+t[1]-2054922799|0)<<21|n>>>11)+i|0,n=((n+=((a=((a+=(n^((r=((r+=(i^(n|~a))+t[8]+1873313359|0)<<6|r>>>26)+n|0)|~i))+t[15]-30611744|0)<<10|a>>>22)+r|0)^((i=((i+=(r^(a|~n))+t[6]-1560198380|0)<<15|i>>>17)+a|0)|~r))+t[13]+1309151649|0)<<21|n>>>11)+i|0,n=((n+=((a=((a+=(n^((r=((r+=(i^(n|~a))+t[4]-145523070|0)<<6|r>>>26)+n|0)|~i))+t[11]-1120210379|0)<<10|a>>>22)+r|0)^((i=((i+=(r^(a|~n))+t[2]+718787259|0)<<15|i>>>17)+a|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+i|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=i+e[2]|0,e[3]=a+e[3]|0;}function n(e){var t,r=[];for(t=0;t<64;t+=4){r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);}return r;}function i(e){var t,r=[];for(t=0;t<64;t+=4){r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);}return r;}function a(e){var t,i,a,s,o,u,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64){r(l,n(e.substring(t-64,t)));}for(i=(e=e.substring(t-64)).length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1){a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);}if(a[t>>2]|=128<<(t%4<<3),t>55)for(r(l,a),t=0;t<16;t+=1){a[t]=0;}return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(s[2],16),u=parseInt(s[1],16)||0,a[14]=o,a[15]=u,r(l,a),l;}function s(e){var r,n="";for(r=0;r<4;r+=1){n+=t[e>>8*r+4&15]+t[e>>8*r&15];}return n;}function o(e){var t;for(t=0;t<e.length;t+=1){e[t]=s(e[t]);}return e.join("");}function u(e){return /[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e;}function c(e){var t,r=[],n=e.length;for(t=0;t<n-1;t+=2){r.push(parseInt(e.substr(t,2),16));}return String.fromCharCode.apply(String,r);}function l(){this.reset();}return o(a("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return (e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t);}ArrayBuffer.prototype.slice=function(r,n){var i,a,s,o,u=this.byteLength,c=t(r,u),l=u;return n!==e&&(l=t(n,u)),c>l?new ArrayBuffer(0):(i=l-c,a=new ArrayBuffer(i),s=new Uint8Array(a),o=new Uint8Array(this,c,i),s.set(o),a);};}(),l.prototype.append=function(e){return this.appendBinary(u(e)),this;},l.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64){r(this._hash,n(this._buff.substring(t-64,t)));}return this._buff=this._buff.substring(t-64),this;},l.prototype.end=function(e){var t,r,n=this._buff,i=n.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1){a[t>>2]|=n.charCodeAt(t)<<(t%4<<3);}return this._finish(a,i),r=o(this._hash),e&&(r=c(r)),this.reset(),r;},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this;},l.prototype.getState=function(){return {buff:this._buff,length:this._length,hash:this._hash.slice()};},l.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this;},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length;},l.prototype._finish=function(e,t){var n,i,a,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(r(this._hash,e),s=0;s<16;s+=1){e[s]=0;}n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(n[2],16),a=parseInt(n[1],16)||0,e[14]=i,e[15]=a,r(this._hash,e);},l.hash=function(e,t){return l.hashBinary(u(e),t);},l.hashBinary=function(e,t){var r=o(a(e));return t?c(r):r;},l.ArrayBuffer=function(){this.reset();},l.ArrayBuffer.prototype.append=function(e){var t,n,a,s,o,u=(n=this._buff.buffer,a=e,s=!0,(o=new Uint8Array(n.byteLength+a.byteLength)).set(new Uint8Array(n)),o.set(new Uint8Array(a),n.byteLength),s?o:o.buffer),c=u.length;for(this._length+=e.byteLength,t=64;t<=c;t+=64){r(this._hash,i(u.subarray(t-64,t)));}return this._buff=t-64<c?new Uint8Array(u.buffer.slice(t-64)):new Uint8Array(0),this;},l.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,i=n.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1){a[t>>2]|=n[t]<<(t%4<<3);}return this._finish(a,i),r=o(this._hash),e&&(r=c(r)),this.reset(),r;},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this;},l.ArrayBuffer.prototype.getState=function(){var e,t=l.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t;},l.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var r,n=e.length,i=new ArrayBuffer(n),a=new Uint8Array(i);for(r=0;r<n;r+=1){a[r]=e.charCodeAt(r);}return t?a:i;}(e.buff,!0),l.prototype.setState.call(this,e);},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(e,t){var n=o(function(e){var t,n,a,s,o,u,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64){r(l,i(e.subarray(t-64,t)));}for(e=t-64<c?e.subarray(t-64):new Uint8Array(0),n=e.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1){a[t>>2]|=e[t]<<(t%4<<3);}if(a[t>>2]|=128<<(t%4<<3),t>55)for(r(l,a),t=0;t<16;t+=1){a[t]=0;}return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(s[2],16),u=parseInt(s[1],16)||0,a[14]=o,a[15]=u,r(l,a),l;}(new Uint8Array(e)));return t?c(n):n;},l;}();},function(e,t,r){var n;!function(i){var a,s,o,u=9e15,c="0123456789abcdef",l="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",h="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",d={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-u,maxE:u,crypto:!1},p=!0,f="[DecimalError] Invalid argument: ",g=Math.floor,m=Math.pow,y=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,b=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,_=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,v=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,w=1e7,S=l.length-1,T=h.length-1,E={name:"[object Decimal]"};function x(e){var t,r,n,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++){(r=7-(n=e[t]+"").length)&&(a+=L(r)),a+=n;}(r=7-(n=(s=e[t])+"").length)&&(a+=L(r));}else if(0===s)return "0";for(;s%10==0;){s/=10;}return a+s;}function O(e,t,r){if(e!==~~e||e<t||e>r)throw Error(f+e);}function A(e,t,r,n){var i,a,s,o;for(a=e[0];a>=10;a/=10){--t;}return --t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),a=m(10,7-t),o=e[i]%a|0,null==n?t<3?(0==t?o=o/100|0:1==t&&(o=o/10|0),s=r<4&&99999==o||r>3&&49999==o||5e4==o||0==o):s=(r<4&&o+1==a||r>3&&o+1==a/2)&&(e[i+1]/a/100|0)==m(10,t-2)-1||(o==a/2||0==o)&&0==(e[i+1]/a/100|0):t<4?(0==t?o=o/1e3|0:1==t?o=o/100|0:2==t&&(o=o/10|0),s=(n||r<4)&&9999==o||!n&&r>3&&4999==o):s=((n||r<4)&&o+1==a||!n&&r>3&&o+1==a/2)&&(e[i+1]/a/1e3|0)==m(10,t-3)-1,s;}function R(e,t,r){for(var n,i,a=[0],s=0,o=e.length;s<o;){for(i=a.length;i--;){a[i]*=t;}for(a[0]+=c.indexOf(e.charAt(s++)),n=0;n<a.length;n++){a[n]>r-1&&(void 0===a[n+1]&&(a[n+1]=0),a[n+1]+=a[n]/r|0,a[n]%=r);}}return a.reverse();}E.absoluteValue=E.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),N(e);},E.ceil=function(){return N(new this.constructor(this),this.e+1,2);},E.comparedTo=E.cmp=function(e){var t,r,n,i,a=this,s=a.d,o=(e=new a.constructor(e)).d,u=a.s,c=e.s;if(!s||!o)return u&&c?u!==c?u:s===o?0:!s^u<0?1:-1:NaN;if(!s[0]||!o[0])return s[0]?u:o[0]?-c:0;if(u!==c)return u;if(a.e!==e.e)return a.e>e.e^u<0?1:-1;for(t=0,r=(n=s.length)<(i=o.length)?n:i;t<r;++t){if(s[t]!==o[t])return s[t]>o[t]^u<0?1:-1;}return n===i?0:n>i^u<0?1:-1;},E.cosine=E.cos=function(){var e,t,r=this,n=r.constructor;return r.d?r.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+7,n.rounding=1,r=function(e,t){var r,n,i=t.d.length;i<32?(r=Math.ceil(i/3),n=(1/Q(4,r)).toString()):(r=16,n="2.3283064365386962890625e-10");e.precision+=r,t=z(e,1,t.times(n),new e(1));for(var a=r;a--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1);}return e.precision-=r,t;}(n,X(n,r)),n.precision=e,n.rounding=t,N(2==o||3==o?r.neg():r,e,t,!0)):new n(1):new n(NaN);},E.cubeRoot=E.cbrt=function(){var e,t,r,n,i,a,s,o,u,c,l=this,h=l.constructor;if(!l.isFinite()||l.isZero())return new h(l);for(p=!1,(a=l.s*m(l.s*l,1/3))&&Math.abs(a)!=1/0?n=new h(a.toString()):(r=x(l.d),(a=((e=l.e)-r.length+1)%3)&&(r+=1==a||-2==a?"0":"00"),a=m(r,1/3),e=g((e+1)/3)-(e%3==(e<0?-1:2)),(n=new h(r=a==1/0?"5e"+e:(r=a.toExponential()).slice(0,r.indexOf("e")+1)+e)).s=l.s),s=(e=h.precision)+3;;){if(c=(u=(o=n).times(o).times(o)).plus(l),n=I(c.plus(l).times(o),c.plus(u),s+2,1),x(o.d).slice(0,s)===(r=x(n.d)).slice(0,s)){if("9999"!=(r=r.slice(s-3,s+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(N(n,e+1,1),t=!n.times(n).times(n).eq(l));break;}if(!i&&(N(o,e+1,0),o.times(o).times(o).eq(l))){n=o;break;}s+=4,i=1;}}return p=!0,N(n,e,h.rounding,t);},E.decimalPlaces=E.dp=function(){var e,t=this.d,r=NaN;if(t){if(r=7*((e=t.length-1)-g(this.e/7)),e=t[e])for(;e%10==0;e/=10){r--;}r<0&&(r=0);}return r;},E.dividedBy=E.div=function(e){return I(this,new this.constructor(e));},E.dividedToIntegerBy=E.divToInt=function(e){var t=this.constructor;return N(I(this,new t(e),0,1,1),t.precision,t.rounding);},E.equals=E.eq=function(e){return 0===this.cmp(e);},E.floor=function(){return N(new this.constructor(this),this.e+1,3);},E.greaterThan=E.gt=function(e){return this.cmp(e)>0;},E.greaterThanOrEqualTo=E.gte=function(e){var t=this.cmp(e);return 1==t||0===t;},E.hyperbolicCosine=E.cosh=function(){var e,t,r,n,i,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;r=s.precision,n=s.rounding,s.precision=r+Math.max(a.e,a.sd())+4,s.rounding=1,(i=a.d.length)<32?t=(1/Q(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),a=z(s,1,a.times(t),new s(1),!0);for(var u,c=e,l=new s(8);c--;){u=a.times(a),a=o.minus(u.times(l.minus(u.times(l))));}return N(a,s.precision=r,s.rounding=n,!0);},E.hyperbolicSine=E.sinh=function(){var e,t,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(t=a.precision,r=a.rounding,a.precision=t+Math.max(i.e,i.sd())+4,a.rounding=1,(n=i.d.length)<3)i=z(a,2,i,i,!0);else {e=(e=1.4*Math.sqrt(n))>16?16:0|e,i=z(a,2,i=i.times(1/Q(5,e)),i,!0);for(var s,o=new a(5),u=new a(16),c=new a(20);e--;){s=i.times(i),i=i.times(o.plus(s.times(u.times(s).plus(c))));}}return a.precision=t,a.rounding=r,N(i,t,r,!0);},E.hyperbolicTangent=E.tanh=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,I(r.sinh(),r.cosh(),n.precision=e,n.rounding=t)):new n(r.s);},E.inverseCosine=E.acos=function(){var e,t=this,r=t.constructor,n=t.abs().cmp(1),i=r.precision,a=r.rounding;return -1!==n?0===n?t.isNeg()?j(r,i,a):new r(0):new r(NaN):t.isZero()?j(r,i+4,a).times(.5):(r.precision=i+6,r.rounding=1,t=t.asin(),e=j(r,i+4,a).times(.5),r.precision=i,r.rounding=a,e.minus(t));},E.inverseHyperbolicCosine=E.acosh=function(){var e,t,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,p=!1,r=r.times(r).minus(1).sqrt().plus(r),p=!0,n.precision=e,n.rounding=t,r.ln()):new n(r);},E.inverseHyperbolicSine=E.asinh=function(){var e,t,r=this,n=r.constructor;return !r.isFinite()||r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,p=!1,r=r.times(r).plus(1).sqrt().plus(r),p=!0,n.precision=e,n.rounding=t,r.ln());},E.inverseHyperbolicTangent=E.atanh=function(){var e,t,r,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=a.precision,t=a.rounding,n=i.sd(),Math.max(n,e)<2*-i.e-1?N(new a(i),e,t,!0):(a.precision=r=n-i.e,i=I(i.plus(1),new a(1).minus(i),r+e,1),a.precision=e+4,a.rounding=1,i=i.ln(),a.precision=e,a.rounding=t,i.times(.5))):new a(NaN);},E.inverseSine=E.asin=function(){var e,t,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(t=i.abs().cmp(1),r=a.precision,n=a.rounding,-1!==t?0===t?((e=j(a,r+4,n).times(.5)).s=i.s,e):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)));},E.inverseTangent=E.atan=function(){var e,t,r,n,i,a,s,o,u,c=this,l=c.constructor,h=l.precision,d=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&h+4<=T)return (s=j(l,h+4,d).times(.25)).s=c.s,s;}else {if(!c.s)return new l(NaN);if(h+4<=T)return (s=j(l,h+4,d).times(.5)).s=c.s,s;}for(l.precision=o=h+10,l.rounding=1,e=r=Math.min(28,o/7+2|0);e;--e){c=c.div(c.times(c).plus(1).sqrt().plus(1));}for(p=!1,t=Math.ceil(o/7),n=1,u=c.times(c),s=new l(c),i=c;-1!==e;){if(i=i.times(u),a=s.minus(i.div(n+=2)),i=i.times(u),void 0!==(s=a.plus(i.div(n+=2))).d[t])for(e=t;s.d[e]===a.d[e]&&e--;){}}return r&&(s=s.times(2<<r-1)),p=!0,N(s,l.precision=h,l.rounding=d,!0);},E.isFinite=function(){return !!this.d;},E.isInteger=E.isInt=function(){return !!this.d&&g(this.e/7)>this.d.length-2;},E.isNaN=function(){return !this.s;},E.isNegative=E.isNeg=function(){return this.s<0;},E.isPositive=E.isPos=function(){return this.s>0;},E.isZero=function(){return !!this.d&&0===this.d[0];},E.lessThan=E.lt=function(e){return this.cmp(e)<0;},E.lessThanOrEqualTo=E.lte=function(e){return this.cmp(e)<1;},E.logarithm=E.log=function(e){var t,r,n,i,a,s,o,u,c=this.constructor,l=c.precision,h=c.rounding;if(null==e)e=new c(10),t=!0;else {if(r=(e=new c(e)).d,e.s<0||!r||!r[0]||e.eq(1))return new c(NaN);t=e.eq(10);}if(r=this.d,this.s<0||!r||!r[0]||this.eq(1))return new c(r&&!r[0]?-1/0:1!=this.s?NaN:r?0:1/0);if(t)if(r.length>1)a=!0;else {for(i=r[0];i%10==0;){i/=10;}a=1!==i;}if(p=!1,s=U(this,o=l+5),n=t?D(c,o+10):U(e,o),A((u=I(s,n,o,1)).d,i=l,h))do{if(s=U(this,o+=10),n=t?D(c,o+10):U(e,o),u=I(s,n,o,1),!a){+x(u.d).slice(i+1,i+15)+1==1e14&&(u=N(u,l+1,0));break;}}while(A(u.d,i+=10,h));return p=!0,N(u,l,h);},E.minus=E.sub=function(e){var t,r,n,i,a,s,o,u,c,l,h,d,f=this,m=f.constructor;if(e=new m(e),!f.d||!e.d)return f.s&&e.s?f.d?e.s=-e.s:e=new m(e.d||f.s!==e.s?f:NaN):e=new m(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.plus(e);if(c=f.d,d=e.d,o=m.precision,u=m.rounding,!c[0]||!d[0]){if(d[0])e.s=-e.s;else {if(!c[0])return new m(3===u?-0:0);e=new m(f);}return p?N(e,o,u):e;}if(r=g(e.e/7),l=g(f.e/7),c=c.slice(),a=l-r){for((h=a<0)?(t=c,a=-a,s=d.length):(t=d,r=l,s=c.length),a>(n=Math.max(Math.ceil(o/7),s)+2)&&(a=n,t.length=1),t.reverse(),n=a;n--;){t.push(0);}t.reverse();}else {for((h=(n=c.length)<(s=d.length))&&(s=n),n=0;n<s;n++){if(c[n]!=d[n]){h=c[n]<d[n];break;}}a=0;}for(h&&(t=c,c=d,d=t,e.s=-e.s),s=c.length,n=d.length-s;n>0;--n){c[s++]=0;}for(n=d.length;n>a;){if(c[--n]<d[n]){for(i=n;i&&0===c[--i];){c[i]=w-1;}--c[i],c[n]+=w;}c[n]-=d[n];}for(;0===c[--s];){c.pop();}for(;0===c[0];c.shift()){--r;}return c[0]?(e.d=c,e.e=C(c,r),p?N(e,o,u):e):new m(3===u?-0:0);},E.modulo=E.mod=function(e){var t,r=this,n=r.constructor;return e=new n(e),!r.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||r.d&&!r.d[0]?N(new n(r),n.precision,n.rounding):(p=!1,9==n.modulo?(t=I(r,e.abs(),0,3,1)).s*=e.s:t=I(r,e,0,n.modulo,1),t=t.times(e),p=!0,r.minus(t));},E.naturalExponential=E.exp=function(){return q(this);},E.naturalLogarithm=E.ln=function(){return U(this);},E.negated=E.neg=function(){var e=new this.constructor(this);return e.s=-e.s,N(e);},E.plus=E.add=function(e){var t,r,n,i,a,s,o,u,c,l,h=this,d=h.constructor;if(e=new d(e),!h.d||!e.d)return h.s&&e.s?h.d||(e=new d(e.d||h.s===e.s?h:NaN)):e=new d(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.minus(e);if(c=h.d,l=e.d,o=d.precision,u=d.rounding,!c[0]||!l[0])return l[0]||(e=new d(h)),p?N(e,o,u):e;if(a=g(h.e/7),n=g(e.e/7),c=c.slice(),i=a-n){for(i<0?(r=c,i=-i,s=l.length):(r=l,n=a,s=c.length),i>(s=(a=Math.ceil(o/7))>s?a+1:s+1)&&(i=s,r.length=1),r.reverse();i--;){r.push(0);}r.reverse();}for((s=c.length)-(i=l.length)<0&&(i=s,r=l,l=c,c=r),t=0;i;){t=(c[--i]=c[i]+l[i]+t)/w|0,c[i]%=w;}for(t&&(c.unshift(t),++n),s=c.length;0==c[--s];){c.pop();}return e.d=c,e.e=C(c,n),p?N(e,o,u):e;},E.precision=E.sd=function(e){var t,r=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(f+e);return r.d?(t=k(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t;},E.round=function(){var e=this,t=e.constructor;return N(new t(e),e.e+1,t.rounding);},E.sine=E.sin=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+7,n.rounding=1,r=function(e,t){var r,n=t.d.length;if(n<3)return z(e,2,t,t);r=(r=1.4*Math.sqrt(n))>16?16:0|r,t=t.times(1/Q(5,r)),t=z(e,2,t,t);for(var i,a=new e(5),s=new e(16),o=new e(20);r--;){i=t.times(t),t=t.times(a.plus(i.times(s.times(i).minus(o))));}return t;}(n,X(n,r)),n.precision=e,n.rounding=t,N(o>2?r.neg():r,e,t,!0)):new n(NaN);},E.squareRoot=E.sqrt=function(){var e,t,r,n,i,a,s=this,o=s.d,u=s.e,c=s.s,l=s.constructor;if(1!==c||!o||!o[0])return new l(!c||c<0&&(!o||o[0])?NaN:o?s:1/0);for(p=!1,0==(c=Math.sqrt(+s))||c==1/0?(((t=x(o)).length+u)%2==0&&(t+="0"),c=Math.sqrt(t),u=g((u+1)/2)-(u<0||u%2),n=new l(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):n=new l(c.toString()),r=(u=l.precision)+3;;){if(n=(a=n).plus(I(s,a,r+2,1)).times(.5),x(a.d).slice(0,r)===(t=x(n.d)).slice(0,r)){if("9999"!=(t=t.slice(r-3,r+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(N(n,u+1,1),e=!n.times(n).eq(s));break;}if(!i&&(N(a,u+1,0),a.times(a).eq(s))){n=a;break;}r+=4,i=1;}}return p=!0,N(n,u,l.rounding,e);},E.tangent=E.tan=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,(r=r.sin()).s=1,r=I(r,new n(1).minus(r.times(r)).sqrt(),e+10,0),n.precision=e,n.rounding=t,N(2==o||4==o?r.neg():r,e,t,!0)):new n(NaN);},E.times=E.mul=function(e){var t,r,n,i,a,s,o,u,c,l=this,h=l.constructor,d=l.d,f=(e=new h(e)).d;if(e.s*=l.s,!(d&&d[0]&&f&&f[0]))return new h(!e.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:d&&f?0*e.s:e.s/0);for(r=g(l.e/7)+g(e.e/7),(u=d.length)<(c=f.length)&&(a=d,d=f,f=a,s=u,u=c,c=s),a=[],n=s=u+c;n--;){a.push(0);}for(n=c;--n>=0;){for(t=0,i=u+n;i>n;){o=a[i]+f[n]*d[i-n-1]+t,a[i--]=o%w|0,t=o/w|0;}a[i]=(a[i]+t)%w|0;}for(;!a[--s];){a.pop();}return t?++r:a.shift(),e.d=a,e.e=C(a,r),p?N(e,h.precision,h.rounding):e;},E.toBinary=function(e,t){return $(this,2,e,t);},E.toDecimalPlaces=E.toDP=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(O(e,0,1e9),void 0===t?t=n.rounding:O(t,0,8),N(r,e+r.e+1,t));},E.toExponential=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=P(n,!0):(O(e,0,1e9),void 0===t?t=i.rounding:O(t,0,8),r=P(n=N(new i(n),e+1,t),!0,e+1)),n.isNeg()&&!n.isZero()?"-"+r:r;},E.toFixed=function(e,t){var r,n,i=this,a=i.constructor;return void 0===e?r=P(i):(O(e,0,1e9),void 0===t?t=a.rounding:O(t,0,8),r=P(n=N(new a(i),e+i.e+1,t),!1,e+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r;},E.toFraction=function(e){var t,r,n,i,a,s,o,u,c,l,h,d,g=this,y=g.d,b=g.constructor;if(!y)return new b(g);if(c=r=new b(1),n=u=new b(0),s=(a=(t=new b(n)).e=k(y)-g.e-1)%7,t.d[0]=m(10,s<0?7+s:s),null==e)e=a>0?t:c;else {if(!(o=new b(e)).isInt()||o.lt(c))throw Error(f+o);e=o.gt(t)?a>0?t:c:o;}for(p=!1,o=new b(x(y)),l=b.precision,b.precision=a=7*y.length*2;h=I(o,t,0,1,1),1!=(i=r.plus(h.times(n))).cmp(e);){r=n,n=i,i=c,c=u.plus(h.times(i)),u=i,i=t,t=o.minus(h.times(i)),o=i;}return i=I(e.minus(r),n,0,1,1),u=u.plus(i.times(c)),r=r.plus(i.times(n)),u.s=c.s=g.s,d=I(c,n,a,1).minus(g).abs().cmp(I(u,r,a,1).minus(g).abs())<1?[c,n]:[u,r],b.precision=l,p=!0,d;},E.toHexadecimal=E.toHex=function(e,t){return $(this,16,e,t);},E.toNearest=function(e,t){var r=this,n=r.constructor;if(r=new n(r),null==e){if(!r.d)return r;e=new n(1),t=n.rounding;}else {if(e=new n(e),void 0===t?t=n.rounding:O(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e;}return e.d[0]?(p=!1,r=I(r,e,0,t,1).times(e),p=!0,N(r)):(e.s=r.s,r=e),r;},E.toNumber=function(){return +this;},E.toOctal=function(e,t){return $(this,8,e,t);},E.toPower=E.pow=function(e){var t,r,n,i,a,s,o=this,u=o.constructor,c=+(e=new u(e));if(!(o.d&&e.d&&o.d[0]&&e.d[0]))return new u(m(+o,c));if((o=new u(o)).eq(1))return o;if(n=u.precision,a=u.rounding,e.eq(1))return N(o,n,a);if((t=g(e.e/7))>=e.d.length-1&&(r=c<0?-c:c)<=9007199254740991)return i=M(u,o,r,n),e.s<0?new u(1).div(i):N(i,n,a);if((s=o.s)<0){if(t<e.d.length-1)return new u(NaN);if(0==(1&e.d[t])&&(s=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=s,o;}return (t=0!=(r=m(+o,c))&&isFinite(r)?new u(r+"").e:g(c*(Math.log("0."+x(o.d))/Math.LN10+o.e+1)))>u.maxE+1||t<u.minE-1?new u(t>0?s/0:0):(p=!1,u.rounding=o.s=1,r=Math.min(12,(t+"").length),(i=q(e.times(U(o,n+r)),n)).d&&A((i=N(i,n+5,1)).d,n,a)&&(t=n+10,+x((i=N(q(e.times(U(o,t+r)),t),t+5,1)).d).slice(n+1,n+15)+1==1e14&&(i=N(i,n+1,0))),i.s=s,p=!0,u.rounding=a,N(i,n,a));},E.toPrecision=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=P(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(O(e,1,1e9),void 0===t?t=i.rounding:O(t,0,8),r=P(n=N(new i(n),e,t),e<=n.e||n.e<=i.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+r:r;},E.toSignificantDigits=E.toSD=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(O(e,1,1e9),void 0===t?t=r.rounding:O(t,0,8)),N(new r(this),e,t);},E.toString=function(){var e=this,t=e.constructor,r=P(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r;},E.truncated=E.trunc=function(){return N(new this.constructor(this),this.e+1,1);},E.valueOf=E.toJSON=function(){var e=this,t=e.constructor,r=P(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r;};var I=function(){function e(e,t,r){var n,i=0,a=e.length;for(e=e.slice();a--;){n=e[a]*t+i,e[a]=n%r|0,i=n/r|0;}return i&&e.unshift(i),e;}function t(e,t,r,n){var i,a;if(r!=n)a=r>n?1:-1;else for(i=a=0;i<r;i++){if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break;}}return a;}function r(e,t,r,n){for(var i=0;r--;){e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];}for(;!e[0]&&e.length>1;){e.shift();}}return function(n,i,a,o,u,c){var l,h,d,p,f,m,y,b,_,v,S,T,E,x,O,A,R,I,P,C,D=n.constructor,j=n.s==i.s?1:-1,k=n.d,L=i.d;if(!(k&&k[0]&&L&&L[0]))return new D(n.s&&i.s&&(k?!L||k[0]!=L[0]:L)?k&&0==k[0]||!L?0*j:j/0:NaN);for(c?(f=1,h=n.e-i.e):(c=w,f=7,h=g(n.e/f)-g(i.e/f)),P=L.length,R=k.length,v=(_=new D(j)).d=[],d=0;L[d]==(k[d]||0);d++){}if(L[d]>(k[d]||0)&&h--,null==a?(x=a=D.precision,o=D.rounding):x=u?a+(n.e-i.e)+1:a,x<0)v.push(1),m=!0;else {if(x=x/f+2|0,d=0,1==P){for(p=0,L=L[0],x++;(d<R||p)&&x--;d++){O=p*c+(k[d]||0),v[d]=O/L|0,p=O%L|0;}m=p||d<R;}else {for((p=c/(L[0]+1)|0)>1&&(L=e(L,p,c),k=e(k,p,c),P=L.length,R=k.length),A=P,T=(S=k.slice(0,P)).length;T<P;){S[T++]=0;}(C=L.slice()).unshift(0),I=L[0],L[1]>=c/2&&++I;do{p=0,(l=t(L,S,P,T))<0?(E=S[0],P!=T&&(E=E*c+(S[1]||0)),(p=E/I|0)>1?(p>=c&&(p=c-1),1==(l=t(y=e(L,p,c),S,b=y.length,T=S.length))&&(p--,r(y,P<b?C:L,b,c))):(0==p&&(l=p=1),y=L.slice()),(b=y.length)<T&&y.unshift(0),r(S,y,T,c),-1==l&&(l=t(L,S,P,T=S.length))<1&&(p++,r(S,P<T?C:L,T,c)),T=S.length):0===l&&(p++,S=[0]),v[d++]=p,l&&S[0]?S[T++]=k[A]||0:(S=[k[A]],T=1);}while((A++<R||void 0!==S[0])&&x--);m=void 0!==S[0];}v[0]||v.shift();}if(1==f)_.e=h,s=m;else {for(d=1,p=v[0];p>=10;p/=10){d++;}_.e=d+h*f-1,N(_,u?a+_.e+1:a,o,m);}return _;};}();function N(e,t,r,n){var i,a,s,o,u,c,l,h,d,f=e.constructor;e:if(null!=t){if(!(h=e.d))return e;for(i=1,o=h[0];o>=10;o/=10){i++;}if((a=t-i)<0)a+=7,s=t,u=(l=h[d=0])/m(10,i-s-1)%10|0;else if((d=Math.ceil((a+1)/7))>=(o=h.length)){if(!n)break e;for(;o++<=d;){h.push(0);}l=u=0,i=1,s=(a%=7)-7+1;}else {for(l=o=h[d],i=1;o>=10;o/=10){i++;}u=(s=(a%=7)-7+i)<0?0:l/m(10,i-s-1)%10|0;}if(n=n||t<0||void 0!==h[d+1]||(s<0?l:l%m(10,i-s-1)),c=r<4?(u||n)&&(0==r||r==(e.s<0?3:2)):u>5||5==u&&(4==r||n||6==r&&(a>0?s>0?l/m(10,i-s):0:h[d-1])%10&1||r==(e.s<0?8:7)),t<1||!h[0])return h.length=0,c?(t-=e.e+1,h[0]=m(10,(7-t%7)%7),e.e=-t||0):h[0]=e.e=0,e;if(0==a?(h.length=d,o=1,d--):(h.length=d+1,o=m(10,7-a),h[d]=s>0?(l/m(10,i-s)%m(10,s)|0)*o:0),c)for(;;){if(0==d){for(a=1,s=h[0];s>=10;s/=10){a++;}for(s=h[0]+=o,o=1;s>=10;s/=10){o++;}a!=o&&(e.e++,h[0]==w&&(h[0]=1));break;}if(h[d]+=o,h[d]!=w)break;h[d--]=0,o=1;}for(a=h.length;0===h[--a];){h.pop();}}return p&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e;}function P(e,t,r){if(!e.isFinite())return V(e);var n,i=e.e,a=x(e.d),s=a.length;return t?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+L(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):i<0?(a="0."+L(-i-1)+a,r&&(n=r-s)>0&&(a+=L(n))):i>=s?(a+=L(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+L(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=L(n))),a;}function C(e,t){var r=e[0];for(t*=7;r>=10;r/=10){t++;}return t;}function D(e,t,r){if(t>S)throw p=!0,r&&(e.precision=r),Error("[DecimalError] Precision limit exceeded");return N(new e(l),t,1,!0);}function j(e,t,r){if(t>T)throw Error("[DecimalError] Precision limit exceeded");return N(new e(h),t,r,!0);}function k(e){var t=e.length-1,r=7*t+1;if(t=e[t]){for(;t%10==0;t/=10){r--;}for(t=e[0];t>=10;t/=10){r++;}}return r;}function L(e){for(var t="";e--;){t+="0";}return t;}function M(e,t,r,n){var i,a=new e(1),s=Math.ceil(n/7+4);for(p=!1;;){if(r%2&&Y((a=a.times(t)).d,s)&&(i=!0),0===(r=g(r/2))){r=a.d.length-1,i&&0===a.d[r]&&++a.d[r];break;}Y((t=t.times(t)).d,s);}return p=!0,a;}function F(e){return 1&e.d[e.d.length-1];}function B(e,t,r){for(var n,i=new e(t[0]),a=0;++a<t.length;){if(!(n=new e(t[a])).s){i=n;break;}i[r](n)&&(i=n);}return i;}function q(e,t){var r,n,i,a,s,o,u,c=0,l=0,h=0,d=e.constructor,f=d.rounding,g=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(p=!1,u=g):u=t,o=new d(.03125);e.e>-2;){e=e.times(o),h+=5;}for(u+=n=Math.log(m(2,h))/Math.LN10*2+5|0,r=a=s=new d(1),d.precision=u;;){if(a=N(a.times(e),u,1),r=r.times(++l),x((o=s.plus(I(a,r,u,1))).d).slice(0,u)===x(s.d).slice(0,u)){for(i=h;i--;){s=N(s.times(s),u,1);}if(null!=t)return d.precision=g,s;if(!(c<3&&A(s.d,u-n,f,c)))return N(s,d.precision=g,f,p=!0);d.precision=u+=10,r=a=o=new d(1),l=0,c++;}s=o;}}function U(e,t){var r,n,i,a,s,o,u,c,l,h,d,f=1,g=e,m=g.d,y=g.constructor,b=y.rounding,_=y.precision;if(g.s<0||!m||!m[0]||!g.e&&1==m[0]&&1==m.length)return new y(m&&!m[0]?-1/0:1!=g.s?NaN:m?0:g);if(null==t?(p=!1,l=_):l=t,y.precision=l+=10,n=(r=x(m)).charAt(0),!(Math.abs(a=g.e)<15e14))return c=D(y,l+2,_).times(a+""),g=U(new y(n+"."+r.slice(1)),l-10).plus(c),y.precision=_,null==t?N(g,_,b,p=!0):g;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;){n=(r=x((g=g.times(e)).d)).charAt(0),f++;}for(a=g.e,n>1?(g=new y("0."+r),a++):g=new y(n+"."+r.slice(1)),h=g,u=s=g=I(g.minus(1),g.plus(1),l,1),d=N(g.times(g),l,1),i=3;;){if(s=N(s.times(d),l,1),x((c=u.plus(I(s,new y(i),l,1))).d).slice(0,l)===x(u.d).slice(0,l)){if(u=u.times(2),0!==a&&(u=u.plus(D(y,l+2,_).times(a+""))),u=I(u,new y(f),l,1),null!=t)return y.precision=_,u;if(!A(u.d,l-10,b,o))return N(u,y.precision=_,b,p=!0);y.precision=l+=10,c=s=g=I(h.minus(1),h.plus(1),l,1),d=N(g.times(g),l,1),i=o=1;}u=c,i+=2;}}function V(e){return String(e.s*e.s/0);}function H(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);n++){}for(i=t.length;48===t.charCodeAt(i-1);--i){}if(t=t.slice(n,i)){if(i-=n,e.e=r=r-n-1,e.d=[],n=(r+1)%7,r<0&&(n+=7),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=7;n<i;){e.d.push(+t.slice(n,n+=7));}n=7-(t=t.slice(n)).length;}else n-=i;for(;n--;){t+="0";}e.d.push(+t),p&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]));}else e.e=0,e.d=[0];return e;}function G(e,t){var r,n,i,s,o,u,c,l,h;if("Infinity"===t||"NaN"===t)return +t||(e.s=NaN),e.e=NaN,e.d=null,e;if(b.test(t))r=16,t=t.toLowerCase();else if(y.test(t))r=2;else {if(!_.test(t))throw Error(f+t);r=8;}for((s=t.search(/p/i))>0?(c=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),o=(s=t.indexOf("."))>=0,n=e.constructor,o&&(s=(u=(t=t.replace(".","")).length)-s,i=M(n,new n(r),s,2*s)),s=h=(l=R(t,r,w)).length-1;0===l[s];--s){l.pop();}return s<0?new n(0*e.s):(e.e=C(l,h),e.d=l,p=!1,o&&(e=I(e,i,4*u)),c&&(e=e.times(Math.abs(c)<54?m(2,c):a.pow(2,c))),p=!0,e);}function z(e,t,r,n,i){var a,s,o,u,c=e.precision,l=Math.ceil(c/7);for(p=!1,u=r.times(r),o=new e(n);;){if(s=I(o.times(u),new e(t++*t++),c,1),o=i?n.plus(s):n.minus(s),n=I(s.times(u),new e(t++*t++),c,1),void 0!==(s=o.plus(n)).d[l]){for(a=l;s.d[a]===o.d[a]&&a--;){}if(-1==a)break;}a=o,o=n,n=s,s=a;}return p=!0,s.d.length=l+1,s;}function Q(e,t){for(var r=e;--t;){r*=e;}return r;}function X(e,t){var r,n=t.s<0,i=j(e,e.precision,1),a=i.times(.5);if((t=t.abs()).lte(a))return o=n?4:1,t;if((r=t.divToInt(i)).isZero())o=n?3:2;else {if((t=t.minus(r.times(i))).lte(a))return o=F(r)?n?2:3:n?4:1,t;o=F(r)?n?1:4:n?3:2;}return t.minus(i).abs();}function $(e,t,r,n){var i,a,o,u,l,h,d,p,f,g=e.constructor,m=void 0!==r;if(m?(O(r,1,1e9),void 0===n?n=g.rounding:O(n,0,8)):(r=g.precision,n=g.rounding),e.isFinite()){for(m?(i=2,16==t?r=4*r-3:8==t&&(r=3*r-2)):i=t,(o=(d=P(e)).indexOf("."))>=0&&(d=d.replace(".",""),(f=new g(1)).e=d.length-o,f.d=R(P(f),10,i),f.e=f.d.length),a=l=(p=R(d,10,i)).length;0==p[--l];){p.pop();}if(p[0]){if(o<0?a--:((e=new g(e)).d=p,e.e=a,p=(e=I(e,f,r,n,0,i)).d,a=e.e,h=s),o=p[r],u=i/2,h=h||void 0!==p[r+1],h=n<4?(void 0!==o||h)&&(0===n||n===(e.s<0?3:2)):o>u||o===u&&(4===n||h||6===n&&1&p[r-1]||n===(e.s<0?8:7)),p.length=r,h)for(;++p[--r]>i-1;){p[r]=0,r||(++a,p.unshift(1));}for(l=p.length;!p[l-1];--l){}for(o=0,d="";o<l;o++){d+=c.charAt(p[o]);}if(m){if(l>1)if(16==t||8==t){for(o=16==t?4:3,--l;l%o;l++){d+="0";}for(l=(p=R(d,i,t)).length;!p[l-1];--l){}for(o=1,d="1.";o<l;o++){d+=c.charAt(p[o]);}}else d=d.charAt(0)+"."+d.slice(1);d=d+(a<0?"p":"p+")+a;}else if(a<0){for(;++a;){d="0"+d;}d="0."+d;}else if(++a>l)for(a-=l;a--;){d+="0";}else a<l&&(d=d.slice(0,a)+"."+d.slice(a));}else d=m?"0p+0":"0";d=(16==t?"0x":2==t?"0b":8==t?"0o":"")+d;}else d=V(e);return e.s<0?"-"+d:d;}function Y(e,t){if(e.length>t)return e.length=t,!0;}function J(e){return new this(e).abs();}function W(e){return new this(e).acos();}function K(e){return new this(e).acosh();}function Z(e,t){return new this(e).plus(t);}function ee(e){return new this(e).asin();}function te(e){return new this(e).asinh();}function re(e){return new this(e).atan();}function ne(e){return new this(e).atanh();}function ie(e,t){e=new this(e),t=new this(t);var r,n=this.precision,i=this.rounding,a=n+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(r=t.s<0?j(this,n,i):new this(0)).s=e.s:!e.d||t.isZero()?(r=j(this,a,1).times(.5)).s=e.s:t.s<0?(this.precision=a,this.rounding=1,r=this.atan(I(e,t,a,1)),t=j(this,a,1),this.precision=n,this.rounding=i,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(I(e,t,a,1)):(r=j(this,a,1).times(t.s>0?.25:.75)).s=e.s:r=new this(NaN),r;}function ae(e){return new this(e).cbrt();}function se(e){return N(e=new this(e),e.e+1,2);}function oe(e){if(!e||"object"!=typeof e)throw Error("[DecimalError] Object expected");var t,r,n,i=!0===e.defaults,a=["precision",1,1e9,"rounding",0,8,"toExpNeg",-u,0,"toExpPos",0,u,"maxE",0,u,"minE",-u,0,"modulo",0,9];for(t=0;t<a.length;t+=3){if(r=a[t],i&&(this[r]=d[r]),void 0!==(n=e[r])){if(!(g(n)===n&&n>=a[t+1]&&n<=a[t+2]))throw Error(f+r+": "+n);this[r]=n;}}if(r="crypto",i&&(this[r]=d[r]),void 0!==(n=e[r])){if(!0!==n&&!1!==n&&0!==n&&1!==n)throw Error(f+r+": "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");this[r]=!0;}else this[r]=!1;}return this;}function ue(e){return new this(e).cos();}function ce(e){return new this(e).cosh();}function le(e,t){return new this(e).div(t);}function he(e){return new this(e).exp();}function de(e){return N(e=new this(e),e.e+1,3);}function pe(){var e,t,r=new this(0);for(p=!1,e=0;e<arguments.length;){if((t=new this(arguments[e++])).d)r.d&&(r=r.plus(t.times(t)));else {if(t.s)return p=!0,new this(1/0);r=t;}}return p=!0,r.sqrt();}function fe(e){return e instanceof a||e&&"[object Decimal]"===e.name||!1;}function ge(e){return new this(e).ln();}function me(e,t){return new this(e).log(t);}function ye(e){return new this(e).log(2);}function be(e){return new this(e).log(10);}function _e(){return B(this,arguments,"lt");}function ve(){return B(this,arguments,"gt");}function we(e,t){return new this(e).mod(t);}function Se(e,t){return new this(e).mul(t);}function Te(e,t){return new this(e).pow(t);}function Ee(e){var t,r,n,i,a=0,s=new this(1),o=[];if(void 0===e?e=this.precision:O(e,1,1e9),n=Math.ceil(e/7),this.crypto){if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));a<n;){(i=t[a])>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=i%1e7;}else {if(!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");for(t=crypto.randomBytes(n*=4);a<n;){(i=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((127&t[a+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,a):(o.push(i%1e7),a+=4);}a=n/4;}}else for(;a<n;){o[a++]=1e7*Math.random()|0;}for(e%=7,(n=o[--a])&&e&&(i=m(10,7-e),o[a]=(n/i|0)*i);0===o[a];a--){o.pop();}if(a<0)r=0,o=[0];else {for(r=-1;0===o[0];r-=7){o.shift();}for(n=1,i=o[0];i>=10;i/=10){n++;}n<7&&(r-=7-n);}return s.e=r,s.d=o,s;}function xe(e){return N(e=new this(e),e.e+1,this.rounding);}function Oe(e){return (e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN;}function Ae(e){return new this(e).sin();}function Re(e){return new this(e).sinh();}function Ie(e){return new this(e).sqrt();}function Ne(e,t){return new this(e).sub(t);}function Pe(e){return new this(e).tan();}function Ce(e){return new this(e).tanh();}function De(e){return N(e=new this(e),e.e+1,1);}(a=function e(t){var r,n,i;function a(e){var t,r,n,i=this;if(!(i instanceof a))return new a(e);if(i.constructor=a,e instanceof a)return i.s=e.s,void(p?!e.d||e.e>a.maxE?(i.e=NaN,i.d=null):e.e<a.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(n=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,r=e;r>=10;r/=10){t++;}return void(p?t>a.maxE?(i.e=NaN,i.d=null):t<a.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]));}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):H(i,e.toString());}if("string"!==n)throw Error(f+e);return 45===(r=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===r&&(e=e.slice(1)),i.s=1),v.test(e)?H(i,e):G(i,e);}if(a.prototype=E,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=oe,a.clone=e,a.isDecimal=fe,a.abs=J,a.acos=W,a.acosh=K,a.add=Z,a.asin=ee,a.asinh=te,a.atan=re,a.atanh=ne,a.atan2=ie,a.cbrt=ae,a.ceil=se,a.cos=ue,a.cosh=ce,a.div=le,a.exp=he,a.floor=de,a.hypot=pe,a.ln=ge,a.log=me,a.log10=be,a.log2=ye,a.max=_e,a.min=ve,a.mod=we,a.mul=Se,a.pow=Te,a.random=Ee,a.round=xe,a.sign=Oe,a.sin=Ae,a.sinh=Re,a.sqrt=Ie,a.sub=Ne,a.tan=Pe,a.tanh=Ce,a.trunc=De,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<i.length;){t.hasOwnProperty(n=i[r++])||(t[n]=this[n]);}return a.config(t),a;}(d)).default=a.Decimal=a,l=new a(l),h=new a(h),void 0===(n=function(){return a;}.call(t,r,t,e))||(e.exports=n);}();},function(e,t,r){function n(e){return "*"===e;}function i(e,t){return new RegExp("/"+e+"/","i").test("/"+t+"/");}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDayTimeDuration=t.langMatches=t.replace=t.matches=void 0,t.matches=function(e,t,r){return new RegExp(t,r).test(e);},t.replace=function(e,t,r,n){var i=new RegExp(t,n);if(!i.global){i=new RegExp(t,(n||"")+"g");}return e.replace(i,r);},t.langMatches=function(e,t){var r=e.split("-"),a=t.split("-");if(!i(a[0],r[0])&&!n(r[0]))return !1;var s=1,o=1;for(;o<a.length;){if(n(a[o]))o++;else {if(s===r.length)return !1;if(i(a[o],r[s]))s++,o++;else {if(1===r[s].length)return !1;s++;}}}return !0;},t.formatDayTimeDuration=function(e){if(e){if("Z"===e[0])return "PT0S";{var[_t186,_r159,_n97,_i69,a,s]=e,o="0"!==_r159?_r159:"",u=o||"0"!==_n97?_n97:"",c="0"!==a?a:"",l=c||"0"!==s?s:"";return ("-"===_t186?"-":"")+"PT"+(""+(o+u?o+u+"H":"")+(c+l?c+l+"M":""));}}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.specialDefinitions=void 0;var n=r(23),i=r(13),a=r(188),s=r(40),o=r(14),u=r(20),c=r(66),l=r(89);function h(_ref73){var{args:e,mapping:t}=_ref73;var r=e[0];if(r.expressionType!==s.ExpressionType.Variable)throw new u.InvalidArgumentTypes(e,o.SpecialOperator.BOUND);var n=t.has(r.name)&&!!t.get(r.name);return c.bool(n);}function d(e){return e.length>0&&e.every(t=>t.language===e[0].language);}var p={arity:1,applyAsync:function(){var _applyAsync=_asyncToGenerator(function*(_ref74){var{args:e,evaluate:t,mapping:r,context:n}=_ref74;return f(yield t(e[0],r),n.baseIRI,e);});function applyAsync(_x19){return _applyAsync.apply(this,arguments);}return applyAsync;}(),applySync:_ref75=>{var{args:e,evaluate:t,mapping:r,context:n}=_ref75;return f(t(e[0],r),n.baseIRI,e);}};function f(e,t,r){var n="namedNode"!==e.termType?c.typeCheckLit(e,["string"],r,o.SpecialOperator.IRI):e,a=i.resolve(n.str(),t||"");return new s.NamedNode(a);}function g(e){return new s.BlankNode(e||a.v4());}var m={bound:{arity:1,applyAsync:function(){var _applyAsync2=_asyncToGenerator(function*(_ref76){var{args:e,mapping:t}=_ref76;return h({args:e,mapping:t});});function applyAsync(_x20){return _applyAsync2.apply(this,arguments);}return applyAsync;}(),applySync:_ref77=>{var{args:e,mapping:t}=_ref77;return h({args:e,mapping:t});}},if:{arity:3,applyAsync(_ref78){return _asyncToGenerator(function*(){var{args:e,mapping:t,evaluate:r}=_ref78;var n=yield r(e[0],t);return r(n.coerceEBV()?e[1]:e[2],t);})();},applySync(_ref79){var{args:e,mapping:t,evaluate:r}=_ref79;var n=r(e[0],t);return r(n.coerceEBV()?e[1]:e[2],t);}},coalesce:{arity:1/0,applyAsync(_ref80){return _asyncToGenerator(function*(){var{args:e,mapping:t,evaluate:r}=_ref80;var n=[];for(var _i70 of e){try{return yield r(_i70,t);}catch(e){n.push(e);}}throw new u.CoalesceError(n);})();},applySync(_ref81){var{args:e,mapping:t,evaluate:r}=_ref81;var n=[];for(var _i71 of e){try{return r(_i71,t);}catch(e){n.push(e);}}throw new u.CoalesceError(n);}},"&&":{arity:2,applyAsync(_ref82){return _asyncToGenerator(function*(){var{args:e,mapping:t,evaluate:r}=_ref82;var[n,i]=e;try{var _e189=yield r(n,t);if(!_e189.coerceEBV())return c.bool(!1);var _a31=(yield r(i,t)).coerceEBV();return c.bool(_a31);}catch(e){if((yield r(i,t)).coerceEBV())throw e;return c.bool(!1);}})();},applySync(_ref83){var{args:e,mapping:t,evaluate:r}=_ref83;var[n,i]=e;try{var _e190=r(n,t);if(!_e190.coerceEBV())return c.bool(!1);var _a32=r(i,t).coerceEBV();return c.bool(_a32);}catch(e){if(r(i,t).coerceEBV())throw e;return c.bool(!1);}}},"||":{arity:2,applyAsync(_ref84){return _asyncToGenerator(function*(){var{args:e,mapping:t,evaluate:r}=_ref84;var[n,i]=e;try{var _e191=yield r(n,t);if(_e191.coerceEBV())return c.bool(!0);var _a33=(yield r(i,t)).coerceEBV();return c.bool(_a33);}catch(e){if(!(yield r(i,t)).coerceEBV())throw e;return c.bool(!0);}})();},applySync(_ref85){var{args:e,mapping:t,evaluate:r}=_ref85;var[n,i]=e;try{var _e192=r(n,t);if(_e192.coerceEBV())return c.bool(!0);var _a34=r(i,t).coerceEBV();return c.bool(_a34);}catch(e){if(!r(i,t).coerceEBV())throw e;return c.bool(!0);}}},sameterm:{arity:2,applyAsync(_ref86){return _asyncToGenerator(function*(){var{args:e,mapping:t,evaluate:r}=_ref86;var[n,i]=e.map(e=>r(e,t)),a=yield n,s=yield i;return c.bool(a.toRDF().equals(s.toRDF()));})();},applySync(_ref87){var{args:e,mapping:t,evaluate:r}=_ref87;var[n,i]=e.map(e=>r(e,t));return c.bool(n.toRDF().equals(i.toRDF()));}},in:{arity:1/0,checkArity:e=>e.length>=1,applyAsync(_ref88){return _asyncToGenerator(function*(){var{args:e,mapping:t,evaluate:r,context:n}=_ref88;var[i,...a]=e;return function(){var _e193=_asyncToGenerator(function*(t,_ref89,s){var{args:r,mapping:n,evaluate:i,context:a}=_ref89;if(0===r.length){return s.every(e=>!e)?c.bool(!1):Promise.reject(new u.InError(s));}try{var _u4=yield i(r.shift(),n);return !0===l.regularFunctions.get(o.RegularOperator.EQUAL).apply([t,_u4]).typedValue?c.bool(!0):e(t,{args:r,mapping:n,evaluate:i,context:a},[...s,!1]);}catch(o){return e(t,{args:r,mapping:n,evaluate:i,context:a},[...s,o]);}});function e(_x21,_x22,_x23){return _e193.apply(this,arguments);}return e;}()(yield r(i,t),{args:a,mapping:t,evaluate:r,context:n},[]);})();},applySync(_ref90){var{args:e,mapping:t,evaluate:r,context:n}=_ref90;var[i,...a]=e;return function e(t,_ref91,s){var{args:r,mapping:n,evaluate:i,context:a}=_ref91;if(0===r.length){if(!s.every(e=>!e))throw new u.InError(s);c.bool(!1);}try{var _u5=i(r.shift(),n);return !0===l.regularFunctions.get(o.RegularOperator.EQUAL).apply([t,_u5]).typedValue?c.bool(!0):e(t,{args:r,mapping:n,evaluate:i,context:a},[...s,!1]);}catch(o){return e(t,{args:r,mapping:n,evaluate:i,context:a},[...s,o]);}}(r(i,t),{args:a,mapping:t,evaluate:r,context:n},[]);}},notin:{arity:1/0,checkArity:e=>e.length>=1,applyAsync(e){return _asyncToGenerator(function*(){var t=l.specialFunctions.get(o.SpecialOperator.IN),r=yield t.applyAsync(e);return c.bool(!r.typedValue);})();},applySync(e){var t=l.specialFunctions.get(o.SpecialOperator.IN).applySync(e);return c.bool(!t.typedValue);}},concat:{arity:1/0,applyAsync(_ref92){return _asyncToGenerator(function*(){var{args:e,evaluate:t,mapping:r}=_ref92;var n=e.map(/*#__PURE__*/function(){var _ref93=_asyncToGenerator(function*(e){return t(e,r);});return function(_x24){return _ref93.apply(this,arguments);};}()).map(/*#__PURE__*/function(){var _ref94=_asyncToGenerator(function*(t){return c.typeCheckLit(yield t,["string","langString"],e,o.SpecialOperator.CONCAT);});return function(_x25){return _ref94.apply(this,arguments);};}()),i=yield Promise.all(n),a=i.map(e=>e.typedValue).join(""),s=d(i)?i[0].language:void 0;return s?c.langString(a,s):c.string(a);})();},applySync(_ref95){var{args:e,evaluate:t,mapping:r}=_ref95;var n=e.map(e=>t(e,r)).map(t=>c.typeCheckLit(t,["string","langString"],e,o.SpecialOperator.CONCAT)),i=n.map(e=>e.typedValue).join(""),a=d(n)?n[0].language:void 0;return a?c.langString(i,a):c.string(i);}},now:{arity:0,applyAsync:function(){var _applyAsync3=_asyncToGenerator(function*(_ref96){var{context:e}=_ref96;return new s.DateTimeLiteral(e.now,e.now.toISOString());});function applyAsync(_x26){return _applyAsync3.apply(this,arguments);}return applyAsync;}(),applySync:_ref97=>{var{context:e}=_ref97;return new s.DateTimeLiteral(e.now,e.now.toISOString());}},iri:p,uri:p,BNODE:{arity:1/0,checkArity:e=>0===e.length||1===e.length,applyAsync(_ref98){return _asyncToGenerator(function*(){var{args:e,evaluate:t,mapping:r,context:n}=_ref98;var i=1===e.length?yield t(e[0],r):void 0,a=i?c.typeCheckLit(i,["string"],e,o.SpecialOperator.BNODE).str():void 0;if(n.bnode){var _e194=yield n.bnode(a);return new s.BlankNode(_e194.value);}return g(a);})();},applySync(_ref99){var{args:e,evaluate:t,mapping:r,context:n}=_ref99;var i=1===e.length?t(e[0],r):void 0,a=i?c.typeCheckLit(i,["string"],e,o.SpecialOperator.BNODE).str():void 0;if(n.bnode){var _e195=n.bnode(a);return new s.BlankNode(_e195.value);}return g(a);}}};t.specialDefinitions=n.Map(m);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.aggregators=t.AggregateEvaluator=void 0;var n=r(5),i=r(40),a=r(14),s=r(20),o=r(89),u=r(66),c=r(65),l=r(14),h=r(186),d=r(39),p=new n.DataFactory();t.AggregateEvaluator=class{constructor(e,r,n){this.throwError=!1,this.expression=e,this.evaluator=new h.SyncEvaluator(e.expression,r),this.aggregator=new t.aggregators[e.aggregator](e),this.throwError=n;}static emptyValue(e,r){if(r===void 0){r=!1;}var n=t.aggregators[e.aggregator].emptyValue();if(void 0===n&&r)throw new s.EmptyAggregateError();return n;}put(e){this.init(e),this.state&&(this.put=this.__put,this.result=this.__result);}result(){return this.aggregator.constructor.emptyValue();}__put(e){try{var _t187=this.evaluator.evaluate(e);this.state=this.aggregator.put(this.state,_t187);}catch(e){this.safeThrow(e);}}__result(){return this.aggregator.result(this.state);}init(e){try{var _t188=this.evaluator.evaluate(e);this.state=this.aggregator.init(_t188);}catch(e){this.safeThrow(e);}}safeThrow(e){if(this.throwError)throw e;this.put=()=>{},this.result=()=>{};}};class f{constructor(e){this.distinct=e.distinct,this.separator=e.separator||" ";}static emptyValue(){}}function g(e){if("Literal"!==e.termType)throw new Error("Term with value "+e.value+" has type "+e.termType+" and is not a numeric literal");if(!a.NumericTypeURLs.contains(e.datatype.value))throw new Error("Term datatype "+e.datatype.value+" with value "+e.value+" has type "+e.termType+" and is not a numeric literal");return {type:e.datatype.value,value:c.parseXSDFloat(e.value)};}function m(e,t){if("Literal"!==t.termType)throw new Error("Term with value "+t.value+" has type "+t.termType+" and is not a literal");var r=d.transformLiteral(t);return {type:r.typeURL.value,value:r.typedValue};}t.aggregators={count:class extends f{static emptyValue(){return u.number(0,l.TypeURL.XSD_INTEGER).toRDF();}init(e){return 1;}put(e,t){return e+1;}result(e){return u.number(e,l.TypeURL.XSD_INTEGER).toRDF();}},sum:class extends f{constructor(){super(...arguments),this.summer=o.regularFunctions.get(a.RegularOperator.ADDITION);}static emptyValue(){return u.number(0,l.TypeURL.XSD_INTEGER).toRDF();}init(e){var{value:t,type:r}=g(e);return new i.NumericLiteral(t,p.namedNode(r));}put(e,t){var{value:r,type:n}=g(t),a=new i.NumericLiteral(r,p.namedNode(n));return this.summer.apply([e,a]);}result(e){return e.toRDF();}},min:class extends f{init(e){var{value:t}=m(null,e);if("Literal"===e.termType)return {extremeValue:t,term:e};}put(e,t){var r=m(e.term,t);return r.value<e.extremeValue&&"Literal"===t.termType?{extremeValue:r.value,term:t}:e;}result(e){return e.term;}},max:class extends f{init(e){var{value:t}=m(null,e);if("Literal"===e.termType)return {extremeValue:t,term:e};}put(e,t){var r=m(e.term,t);return r.value>e.extremeValue&&"Literal"===t.termType?{extremeValue:r.value,term:t}:e;}result(e){return e.term;}},avg:class extends f{constructor(){super(...arguments),this.summer=o.regularFunctions.get(a.RegularOperator.ADDITION),this.divider=o.regularFunctions.get(a.RegularOperator.DIVISION);}static emptyValue(){return u.number(0,l.TypeURL.XSD_INTEGER).toRDF();}init(e){var{value:t,type:r}=g(e);return {sum:new i.NumericLiteral(t,p.namedNode(r)),count:1};}put(e,t){var{value:r,type:n}=g(t),a=new i.NumericLiteral(r,p.namedNode(n));return {sum:this.summer.apply([e.sum,a]),count:e.count+1};}result(e){var t=new i.NumericLiteral(e.count,p.namedNode(a.TypeURL.XSD_INTEGER));return this.divider.apply([e.sum,t]).toRDF();}},group_concat:class extends f{static emptyValue(){return u.string("").toRDF();}init(e){return e.value;}put(e,t){return e+this.separator+t.value;}result(e){return u.string(e).toRDF();}},sample:class extends f{init(e){return e;}put(e,t){return e;}result(e){return e;}}};},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.order=t.orderTypes=void 0;var n=r(39);function i(e,t,r){return e.typedValue===t.typedValue?0:e.typedValue>t.typedValue===r?1:-1;}t.orderTypes=function(e,t,r){if(e&&"Literal"===e.termType&&t&&"Literal"===t.termType){return i(n.transformLiteral(e),n.transformLiteral(t),r);}return 0;},t.order=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(542),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationReducedHash=void 0;var n=r(88),i=r(543);class a extends n.AbstractBindingsHash{constructor(e){super(e,"reduced");}newHashFilter(){var e=new i({max:this.cacheSize});return t=>{var r=n.AbstractFilterHash.hash(t);return !e.has(r)&&e.set(r,!0);};}}t.ActorQueryOperationReducedHash=a;},function(e,t,r){var n=r(544),i=Symbol("max"),a=Symbol("length"),s=Symbol("lengthCalculator"),o=Symbol("allowStale"),u=Symbol("maxAge"),c=Symbol("dispose"),l=Symbol("noDisposeOnSet"),h=Symbol("lruList"),d=Symbol("cache"),p=Symbol("updateAgeOnGet"),f=()=>1;var g=(e,t,r)=>{var n=e[d].get(t);if(n){var _t189=n.value;if(m(e,_t189)){if(b(e,n),!e[o])return;}else r&&(e[p]&&(n.value.now=Date.now()),e[h].unshiftNode(n));return _t189.value;}},m=(e,t)=>{if(!t||!t.maxAge&&!e[u])return !1;var r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[u]&&r>e[u];},y=e=>{if(e[a]>e[i])for(var _t190=e[h].tail;e[a]>e[i]&&null!==_t190;){var _r160=_t190.prev;b(e,_t190),_t190=_r160;}},b=(e,t)=>{if(t){var _r161=t.value;e[c]&&e[c](_r161.key,_r161.value),e[a]-=_r161.length,e[d].delete(_r161.key),e[h].removeNode(t);}};class _{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0;}}var v=(e,t,r,n)=>{var i=r.value;m(e,i)&&(b(e,r),e[o]||(i=void 0)),i&&t.call(n,i.value,i.key,e);};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[i]=e.max||1/0;var t=e.length||f;if(this[s]="function"!=typeof t?f:t,this[o]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[u]=e.maxAge||0,this[c]=e.dispose,this[l]=e.noDisposeOnSet||!1,this[p]=e.updateAgeOnGet||!1,this.reset();}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||1/0,y(this);}get max(){return this[i];}set allowStale(e){this[o]=!!e;}get allowStale(){return this[o];}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[u]=e,y(this);}get maxAge(){return this[u];}set lengthCalculator(e){"function"!=typeof e&&(e=f),e!==this[s]&&(this[s]=e,this[a]=0,this[h].forEach(e=>{e.length=this[s](e.value,e.key),this[a]+=e.length;})),y(this);}get lengthCalculator(){return this[s];}get length(){return this[a];}get itemCount(){return this[h].length;}rforEach(e,t){t=t||this;for(var _r162=this[h].tail;null!==_r162;){var _n98=_r162.prev;v(this,e,_r162,t),_r162=_n98;}}forEach(e,t){t=t||this;for(var _r163=this[h].head;null!==_r163;){var _n99=_r163.next;v(this,e,_r163,t),_r163=_n99;}}keys(){return this[h].toArray().map(e=>e.key);}values(){return this[h].toArray().map(e=>e.value);}reset(){this[c]&&this[h]&&this[h].length&&this[h].forEach(e=>this[c](e.key,e.value)),this[d]=new Map(),this[h]=new n(),this[a]=0;}dump(){return this[h].map(e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e);}dumpLru(){return this[h];}set(e,t,r){if((r=r||this[u])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");var n=r?Date.now():0,o=this[s](t,e);if(this[d].has(e)){if(o>this[i])return b(this,this[d].get(e)),!1;var _s19=this[d].get(e).value;return this[c]&&(this[l]||this[c](e,_s19.value)),_s19.now=n,_s19.maxAge=r,_s19.value=t,this[a]+=o-_s19.length,_s19.length=o,this.get(e),y(this),!0;}var p=new _(e,t,o,n,r);return p.length>this[i]?(this[c]&&this[c](e,t),!1):(this[a]+=p.length,this[h].unshift(p),this[d].set(e,this[h].head),y(this),!0);}has(e){if(!this[d].has(e))return !1;var t=this[d].get(e).value;return !m(this,t);}get(e){return g(this,e,!0);}peek(e){return g(this,e,!1);}pop(){var e=this[h].tail;return e?(b(this,e),e.value):null;}del(e){b(this,this[d].get(e));}load(e){this.reset();var t=Date.now();for(var _r164=e.length-1;_r164>=0;_r164--){var _n100=e[_r164],_i72=_n100.e||0;if(0===_i72)this.set(_n100.k,_n100.v);else {var _e196=_i72-t;_e196>0&&this.set(_n100.k,_n100.v,_e196);}}}prune(){this[d].forEach((e,t)=>g(this,t,!1));}};},function(e,t,r){function n(e){var t=this;if(t instanceof n||(t=new n()),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e);});else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++){t.push(arguments[r]);}return t;}function i(e,t,r){var n=t===e.head?new o(r,null,t,e):new o(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n;}function a(e,t){e.tail=new o(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++;}function s(e,t){e.head=new o(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++;}function o(e,t,r,n){if(!(this instanceof o))return new o(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null;}e.exports=n,n.Node=o,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t;},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++;}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++;}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++){a(this,arguments[e]);}return this.length;},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++){s(this,arguments[e]);}return this.length;},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e;}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e;}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++){e.call(t,r.value,n,this),r=r.next;}},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--){e.call(t,r.value,n,this),r=r.prev;}},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++){r=r.next;}if(t===e&&null!==r)return r.value;},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++){r=r.prev;}if(t===e&&null!==r)return r.value;},n.prototype.map=function(e,t){t=t||this;for(var r=new n(),i=this.head;null!==i;){r.push(e.call(t,i.value,this)),i=i.next;}return r;},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n(),i=this.tail;null!==i;){r.push(e.call(t,i.value,this)),i=i.prev;}return r;},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else {if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value;}for(var i=0;null!==n;i++){r=e(r,n.value,i),n=n.next;}return r;},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else {if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value;}for(var i=this.length-1;null!==n;i--){r=e(r,n.value,i),n=n.prev;}return r;},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++){e[t]=r.value,r=r.next;}return e;},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++){e[t]=r.value,r=r.prev;}return e;},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n();if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,a=this.head;null!==a&&i<e;i++){a=a.next;}for(;null!==a&&i<t;i++,a=a.next){r.push(a.value);}return r;},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n();if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,a=this.tail;null!==a&&i>t;i--){a=a.prev;}for(;null!==a&&i>e;i--,a=a.prev){r.push(a.value);}return r;},n.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,a=this.head;null!==a&&n<e;n++){a=a.next;}var s=[];for(n=0;a&&n<t;n++){s.push(a.value),a=this.removeNode(a);}null===a&&(a=this.tail),a!==this.head&&a!==this.tail&&(a=a.prev);for(n=0;n<(arguments.length<=2?0:arguments.length-2);n++){a=i(this,a,n+2<2||arguments.length<=n+2?undefined:arguments[n+2]);}return s;},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n;}return this.head=t,this.tail=e,this;};try{r(545)(n);}catch(e){}},function(e,t,r){e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(var _e197=this.head;_e197;_e197=_e197.next){yield _e197.value;}};};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(547),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationFilterSparqlee=void 0;var n=r(1),i=r(51);class a extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"filter");}testOperation(e,t){var _this137=this;return _asyncToGenerator(function*(){new i.AsyncEvaluator(e.expression,n.ActorQueryOperation.getExpressionContext(t,_this137.mediatorQueryOperation));return !0;})();}runOperation(e,t){var _this138=this;return _asyncToGenerator(function*(){var r=yield _this138.mediatorQueryOperation.mediate({operation:e.input,context:t}),a=n.ActorQueryOperation.getSafeBindings(r);n.ActorQueryOperation.validateQueryOutput(a,"bindings");var{variables:s,metadata:o}=a,u=n.ActorQueryOperation.getExpressionContext(t,_this138.mediatorQueryOperation),c=new i.AsyncEvaluator(e.expression,u),l=a.bindingsStream.transform({transform:function(){var _transform2=_asyncToGenerator(function*(e,t,r){try{(yield c.evaluateAsEBV(e))&&r(e);}catch(e){i.isExpressionError(e)||l.emit("error",e);}t();});function transform(_x27,_x28,_x29){return _transform2.apply(this,arguments);}return transform;}()});return {type:"bindings",bindingsStream:l,metadata:o,variables:s,canContainUndefs:a.canContainUndefs};})();}}t.ActorQueryOperationFilterSparqlee=a;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(549),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationFromQuad=void 0;var n=r(1),i=r(6);class a extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"from");}static copyOperation(e,t){var r={};for(var _n101 of Object.keys(e)){Array.isArray(e[_n101])?r[_n101]="variables"===_n101?e[_n101]:e[_n101].map(t):a.ALGEBRA_TYPES.includes(e[_n101].type)?r[_n101]=t(e[_n101]):r[_n101]=e[_n101];}return r;}static applyOperationDefaultGraph(e,t){if("bgp"===e.type&&e.patterns.length>0||"path"===e.type){if("bgp"===e.type)return a.joinOperations(e.patterns.map(e=>{if("DefaultGraph"!==e.graph.termType)return a.FACTORY.createBgp([e]);var r=t.map(t=>a.FACTORY.createBgp([a.FACTORY.createPattern(e.subject,e.predicate,e.object,t)]));return a.unionOperations(r);}));if("DefaultGraph"!==e.graph.termType)return e;var _r165=t.map(t=>a.FACTORY.createPath(e.subject,e.predicate,e.object,t));return a.joinOperations(_r165);}return a.copyOperation(e,e=>this.applyOperationDefaultGraph(e,t));}static applyOperationNamedGraph(e,t,r){if("bgp"===e.type&&e.patterns.length>0||"path"===e.type){var _n102;if(_n102="bgp"===e.type?e.patterns[0].graph:e.graph,"DefaultGraph"===_n102.termType)return {type:"bgp",patterns:[]};if("Variable"===_n102.termType){if(1===t.length){var _r166=t[0],_i73={};_i73["?"+_n102.value]=_r166;var s=a.FACTORY.createValues([_n102],[_i73]);var o;return o="bgp"===e.type?a.FACTORY.createBgp(e.patterns.map(e=>a.FACTORY.createPattern(e.subject,e.predicate,e.object,_r166))):a.FACTORY.createPath(e.subject,e.predicate,e.object,_r166),a.FACTORY.createJoin(s,o);}return a.unionOperations(t.map(t=>a.applyOperationNamedGraph(e,[t],r)));}return t.concat(r).some(e=>e.equals(_n102))?e:{type:"bgp",patterns:[]};}return a.copyOperation(e,e=>this.applyOperationNamedGraph(e,t,r));}static joinOperations(e){if(1===e.length)return e[0];if(2===e.length)return a.FACTORY.createJoin(e[0],e[1]);if(e.length>2)return a.FACTORY.createJoin(e.shift(),this.joinOperations(e));throw new Error("A join can only be applied on at least one operation");}static unionOperations(e){if(1===e.length)return e[0];if(2===e.length)return a.FACTORY.createUnion(e[0],e[1]);if(e.length>2)return a.FACTORY.createUnion(e.shift(),this.unionOperations(e));throw new Error("A union can only be applied on at least one operation");}static createOperation(e){var t=e.input;return e.default.length>0&&(t=a.applyOperationDefaultGraph(t,e.default)),e.named.length>0&&(t=a.applyOperationNamedGraph(t,e.named,e.default)),t;}testOperation(e,t){return _asyncToGenerator(function*(){return !0;})();}runOperation(e,t){var _this139=this;return _asyncToGenerator(function*(){var r=a.createOperation(e);return _this139.mediatorQueryOperation.mediate({operation:r,context:t});})();}}t.ActorQueryOperationFromQuad=a,a.FACTORY=new i.Factory(),a.ALGEBRA_TYPES=Object.keys(i.Algebra.types).map(e=>i.Algebra.types[e]);},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(551),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationGroup=void 0;var n=r(1),i=r(3),a=r(4),s=r(51),o=r(552);class u extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"group");}testOperation(e,t){return _asyncToGenerator(function*(){for(var _t191 of e.aggregates){new s.SyncEvaluator(_t191.expression);}return !0;})();}runOperation(e,t){var _this140=this;return _asyncToGenerator(function*(){var{input:r,aggregates:s}=e,u=yield _this140.mediatorQueryOperation.mediate({operation:r,context:t}),c=n.ActorQueryOperation.getSafeBindings(u),l=e.variables.map(e=>a.termToString(e)).concat(s.map(e=>a.termToString(e.variable))),h=Object.assign({},n.ActorQueryOperation.getExpressionContext(t));return new Promise((t,r)=>{var n=new o.GroupsState(e,h);c.bindingsStream.on("end",()=>{try{var _e198=new i.ArrayIterator(n.collectResults(),{autoStart:!1}),{metadata:_r167}=c;t({type:"bindings",bindingsStream:_e198,metadata:_r167,variables:l,canContainUndefs:c.canContainUndefs});}catch(e){r(e);}}),c.bindingsStream.on("error",r),c.bindingsStream.on("data",e=>{try{n.consumeBindings(e);}catch(e){r(e);}});});})();}}t.ActorQueryOperationGroup=u;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.GroupsState=void 0;var n=r(88),i=r(1),a=r(4),s=r(51);t.GroupsState=class{constructor(e,t){this.pattern=e,this.sparqleeConfig=t,this.groups=new Map(),this.groupVariables=new Set(this.pattern.variables.map(e=>a.termToString(e))),this.distinctHashes=e.aggregates.some(_ref100=>{var{distinct:e}=_ref100;return e;})?new Map():null;}consumeBindings(e){var t=e.filter((e,t)=>this.groupVariables.has(t)).toMap(),r=this.hashBindings(t);var n=this.groups.get(r);if(n)for(var _t192 of this.pattern.aggregates){if(_t192.distinct){var _t193=this.hashBindings(e);if(this.distinctHashes.get(r).has(_t193))continue;this.distinctHashes.get(r).add(_t193);}var _i74=a.termToString(_t192.variable);n.aggregators[_i74].put(e);}else {var _i75={};for(var _t194 of this.pattern.aggregates){var _r168=a.termToString(_t194.variable);_i75[_r168]=new s.AggregateEvaluator(_t194,this.sparqleeConfig),_i75[_r168].put(e);}if(n={aggregators:_i75,bindings:t},this.groups.set(r,n),this.distinctHashes){var _t195=this.hashBindings(e);this.distinctHashes.set(r,new Set([_t195]));}}}collectResults(){var e=[...this.groups].map(_ref101=>{var[e,t]=_ref101;var{bindings:r,aggregators:n}=t,i={};for(var _e199 in n){var _t196=n[_e199].result();void 0!==_t196&&(i[_e199]=_t196);}return r.merge(i);});if(0===e.length&&0===this.groupVariables.size){var _t197={};for(var _e200 of this.pattern.aggregates){var _r169=a.termToString(_e200.variable),_n103=s.AggregateEvaluator.emptyValue(_e200);void 0!==_n103&&(_t197[_r169]=_n103);}e=[i.Bindings(_t197)];}return e;}hashBindings(e){return n.AbstractFilterHash.hash(e);}};},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(554),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationJoin=void 0;var n=r(1);class i extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"join");}testOperation(e,t){return _asyncToGenerator(function*(){return !0;})();}runOperation(e,t){var _this141=this;return _asyncToGenerator(function*(){var r=_this141.mediatorQueryOperation.mediate({operation:e.left,context:t}),i=_this141.mediatorQueryOperation.mediate({operation:e.right,context:t});return _this141.mediatorJoin.mediate({entries:[n.ActorQueryOperation.getSafeBindings(yield r),n.ActorQueryOperation.getSafeBindings(yield i)]});})();}}t.ActorQueryOperationJoin=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(556),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationLeftJoinLeftDeep=void 0;var n=r(1),i=r(55),a=r(3),s=r(6);class o extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"leftjoin");}static createLeftDeepStream(e,t,r){return new a.MultiTransformIterator(e,{multiTransform(e){var i=t=>t.merge(e);return new a.TransformIterator(/*#__PURE__*/_asyncToGenerator(function*(){return (yield r(n.materializeOperation(t,e))).map(i);}),{maxBufferSize:128});},optional:!0});}testOperation(e,t){return _asyncToGenerator(function*(){return !0;})();}runOperation(e,t){var _this142=this;return _asyncToGenerator(function*(){var r=n.ActorQueryOperation.getSafeBindings(yield _this142.mediatorQueryOperation.mediate({operation:e.left,context:t})),a=n.ActorQueryOperation.getSafeBindings(yield _this142.mediatorQueryOperation.mediate({operation:e.right,context:t}));a.bindingsStream.close();var s=e.expression?o.FACTORY.createFilter(e.right,e.expression):e.right;return {type:"bindings",bindingsStream:o.createLeftDeepStream(r.bindingsStream,s,/*#__PURE__*/function(){var _ref103=_asyncToGenerator(function*(e){return n.ActorQueryOperation.getSafeBindings(yield _this142.mediatorQueryOperation.mediate({operation:e,context:t})).bindingsStream;});return function(_x30){return _ref103.apply(this,arguments);};}()),metadata:()=>Promise.all([r,a].map(e=>n.getMetadata(e))).then(e=>e.reduce((e,t)=>e*t.totalItems,1)).catch(()=>1/0).then(e=>({totalItems:e})),variables:i.ActorRdfJoin.joinVariables({entries:[r,a]}),canContainUndefs:!0};})();}}t.ActorQueryOperationLeftJoinLeftDeep=o,o.FACTORY=new s.Factory();},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(558),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationOrderBySparqlee=void 0;var n=r(1),i=r(6),a=r(51),s=r(559);class o extends n.ActorQueryOperationTypedMediated{constructor(e){var t;super(e,"orderby"),this.window=null!==(t=e.window)&&void 0!==t?t:1/0;}testOperation(e,t){var _this143=this;return _asyncToGenerator(function*(){for(var _t198 of e.expressions){_t198=_this143.extractSortExpression(_t198);new a.AsyncEvaluator(_t198);}return !0;})();}runOperation(e,t){var _this144=this;return _asyncToGenerator(function*(){var r=yield _this144.mediatorQueryOperation.mediate({operation:e.input,context:t}),i=n.ActorQueryOperation.getSafeBindings(r),o={window:_this144.window},u=Object.assign({},n.ActorQueryOperation.getExpressionContext(t));var{bindingsStream:c}=i;var _loop11=function _loop11(_t199){var r=e.expressions[_t199];var n=_this144.isAscending(r);r=_this144.extractSortExpression(r);var i=new a.AsyncEvaluator(r,u),l=/*#__PURE__*/function(){var _ref104=_asyncToGenerator(function*(e,t,r){try{r({bindings:e,result:yield i.evaluate(e)});}catch(t){a.isExpressionError(t)||c.emit("error",t),r({bindings:e,result:void 0});}t();});return function l(_x31,_x32,_x33){return _ref104.apply(this,arguments);};}(),h=c.transform({transform:l}),d=new s.SortIterator(h,(e,t)=>a.orderTypes(e.result,t.result,n),o);c=d.map(_ref105=>{var{bindings:e,result:t}=_ref105;return e;});};for(var _t199=e.expressions.length-1;_t199>=0;_t199--){_loop11(_t199);}return {type:"bindings",bindingsStream:c,metadata:i.metadata,variables:i.variables,canContainUndefs:i.canContainUndefs};})();}extractSortExpression(e){var{expressionType:t,operator:r}=e;return t!==i.Algebra.expressionTypes.OPERATOR?e:"desc"===r?e.args[0]:e;}isAscending(e){var{expressionType:t,operator:r}=e;return t!==i.Algebra.expressionTypes.OPERATOR||"desc"!==r;}}t.ActorQueryOperationOrderBySparqlee=o;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SortIterator=void 0;var n=r(3);class i extends n.TransformIterator{constructor(e,t,r){super(e,r);var n=r&&r.window;this.windowLength=Number.isFinite(n)&&n>0?n:1/0,this.sort=t,this.sorted=[];}_read(e,t){var r,{length:n}=this.sorted;for(;n!==this.windowLength&&(r=this.source.read(),null!==r);){var _e201=void 0,_t200=void 0,_i76=0,a=n-1;for(;_i76<=a;){_e201=Math.trunc((_i76+a)/2),_t200=this.sort(r,this.sorted[_e201]),_t200<0?_i76=_e201+1:_t200>0?a=_e201-1:(_i76=_e201,a=-1);}this.sorted.splice(_i76,0,r),n++;}n===this.windowLength&&this._push(this.sorted.pop()),t();}_flush(e){var{length:t}=this.sorted;for(;t--;){this._push(this.sorted.pop());}e();}}t.SortIterator=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(561),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationProject=void 0;var n=r(1),i=r(177),a=r(5),s=r(4),o=new a.DataFactory();class u extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"project");}testOperation(e,t){return _asyncToGenerator(function*(){return !0;})();}runOperation(e,t){var _this145=this;return _asyncToGenerator(function*(){var r=n.ActorQueryOperation.getSafeBindings(yield _this145.mediatorQueryOperation.mediate({operation:e.input,context:t})),a=e.variables.map(e=>s.termToString(e)),u=r.variables.filter(e=>!a.includes(e)),c=a.filter(e=>!r.variables.includes(e));if(c.length>0)throw new Error("Variables '"+c+"' are used in the projection result, but are not assigned.");var l=0===u.length?r.bindingsStream:r.bindingsStream.transform({map(e){for(var _t201 of u){e=e.delete(_t201);}return e;},autoStart:!1}),h=0;return l=l.transform({map:e=>(h++,e.map(e=>e&&"BlankNode"===e.termType?e instanceof i.BlankNodeScoped?new i.BlankNodeScoped(""+e.value+h,e.skolemized):o.blankNode(""+e.value+h):e)),autoStart:!1}),{type:"bindings",bindingsStream:l,metadata:r.metadata,variables:a,canContainUndefs:r.canContainUndefs};})();}}t.ActorQueryOperationProject=u;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(563),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationMinus=void 0;var n=r(1),i=r(3),a=r(564);class s extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"minus");}testOperation(e,t){return _asyncToGenerator(function*(){return !0;})();}runOperation(e,t){var _this146=this;return _asyncToGenerator(function*(){var r=n.ActorQueryOperation.getSafeBindings(yield _this146.mediatorQueryOperation.mediate({operation:e.right,context:t})),s=n.ActorQueryOperation.getSafeBindings(yield _this146.mediatorQueryOperation.mediate({operation:e.left,context:t})),o=_this146.getCommonVariables(r.variables,s.variables);if(o.length>0){var _e202=new a.BindingsIndex(o),_t202=new i.TransformIterator(/*#__PURE__*/_asyncToGenerator(function*(){return yield new Promise(t=>{r.bindingsStream.on("data",t=>_e202.add(t)),r.bindingsStream.on("end",t);}),s.bindingsStream.filter(t=>!_e202.contains(t));}),{autoStart:!1}),_n104=r.canContainUndefs||s.canContainUndefs;return {type:"bindings",bindingsStream:_t202,variables:s.variables,metadata:s.metadata,canContainUndefs:_n104};}return s;})();}getCommonVariables(e,t){return Object.keys(e.filter(e=>t.includes(e)).reduce((e,t)=>(e[t]=!0,e),{}));}}t.ActorQueryOperationMinus=s;},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.BindingsIndex=void 0;var n=r(4);class i{constructor(e){this.data={},this.keys=e;}static hashTerm(e){return e&&"Variable"!==e.termType?n.termToString(e):"";}add(e){if(this.isBindingsValid(e)){var _t203=this.data;for(var _r170 of this.keys){var _n105=i.hashTerm(e.get(_r170));var a=_t203[_n105];a||(a=_t203[_n105]={}),_t203=a;}}}contains(e){return !!this.isBindingsValid(e)&&this.containsRecursive(e,this.keys,[this.data]);}isBindingsValid(e){var t=!1;for(var _r171 of this.keys){if(e.get(_r171)){t=!0;break;}}return t;}containsRecursive(e,t,r){var _this147=this;if(0===t.length)return !0;var n;[n,...t]=t;var _loop12=function _loop12(a){var r=i.hashTerm(e.get(n));if(r){var _n106=[a[r],a[""]].filter(Boolean);if(0===_n106.length)return "continue";if(_this147.containsRecursive(e,t,_n106))return {v:!0};}else {var _r172=Object.keys(a).map(e=>a[e]);if(0===_r172.length&&(_r172=[{}]),_this147.containsRecursive(e,t,_r172))return {v:!0};}};for(var a of r){var _ret2=_loop12(a);if(_ret2==="continue")continue;if(typeof _ret2==="object")return _ret2.v;}return !1;}}t.BindingsIndex=i;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(566),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathAlt=void 0;var n=r(29),i=r(1),a=r(3),s=r(6);class o extends n.ActorAbstractPath{constructor(e){super(e,s.Algebra.types.ALT);}runOperation(e,t){var _this148=this;return _asyncToGenerator(function*(){var r=e.predicate,s=(yield Promise.all([_this148.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.subject,r.left,e.object,e.graph)}),_this148.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.subject,r.right,e.object,e.graph)})])).map(e=>i.ActorQueryOperation.getSafeBindings(e)),o=new a.UnionIterator(s.map(e=>e.bindingsStream),{autoStart:!1}),u=[].concat.apply([],s.map(e=>e.variables));return {type:"bindings",bindingsStream:o,variables:[...new Set(u)],canContainUndefs:!1};})();}}t.ActorQueryOperationPathAlt=o;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(568),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathInv=void 0;var n=r(29),i=r(6);class a extends n.ActorAbstractPath{constructor(e){super(e,i.Algebra.types.INV);}runOperation(e,t){var _this149=this;return _asyncToGenerator(function*(){var r=e.predicate,i=n.ActorAbstractPath.FACTORY.createPath(e.object,r.path,e.subject,e.graph);return _this149.mediatorQueryOperation.mediate({operation:i,context:t});})();}}t.ActorQueryOperationPathInv=a;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(570),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathLink=void 0;var n=r(29),i=r(6);class a extends n.ActorAbstractPath{constructor(e){super(e,i.Algebra.types.LINK);}runOperation(e,t){var _this150=this;return _asyncToGenerator(function*(){var r=e.predicate,i=n.ActorAbstractPath.FACTORY.createPattern(e.subject,r.iri,e.object,e.graph);return _this150.mediatorQueryOperation.mediate({operation:i,context:t});})();}}t.ActorQueryOperationPathLink=a;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(572),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathNps=void 0;var n=r(29),i=r(1),a=r(4),s=r(6);class o extends n.ActorAbstractPath{constructor(e){super(e,s.Algebra.types.NPS);}runOperation(e,t){var _this151=this;return _asyncToGenerator(function*(){var r=e.predicate,s=_this151.generateVariable(e),o=a.termToString(s),u=n.ActorAbstractPath.FACTORY.createPattern(e.subject,s,e.object,e.graph),c=i.ActorQueryOperation.getSafeBindings(yield _this151.mediatorQueryOperation.mediate({operation:u,context:t}));return {type:"bindings",bindingsStream:c.bindingsStream.transform({filter:e=>!r.iris.some(t=>t.equals(e.get(o))),transform(e,t,r){r(e.delete(o)),t();}}),variables:c.variables,canContainUndefs:!1};})();}}t.ActorQueryOperationPathNps=o;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(574),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathOneOrMore=void 0;var n=r(29),i=r(1),a=r(3),s=r(4),o=r(6);class u extends n.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.ONE_OR_MORE_PATH);}runOperation(e,t){var _this152=this;return _asyncToGenerator(function*(){var r=yield _this152.isPathArbitraryLengthDistinct(t,e);if(r.operation)return r.operation;t=r.context;var o=e.predicate,u="Variable"===e.subject.termType,c="Variable"===e.object.termType,l="Variable"===e.graph.termType;if(!u&&c){var _r173=n.ActorAbstractPath.FACTORY.createDistinct(n.ActorAbstractPath.FACTORY.createPath(e.subject,o.path,e.object,e.graph)),_u6=i.ActorQueryOperation.getSafeBindings(yield _this152.mediatorQueryOperation.mediate({context:t,operation:_r173})),_c5=s.termToString(e.object),_h={};return {type:"bindings",bindingsStream:new a.MultiTransformIterator(_u6.bindingsStream,{multiTransform:r=>{var n=r.get(_c5),u=l?r.get(s.termToString(e.graph)):e.graph;return new a.TransformIterator(/*#__PURE__*/_asyncToGenerator(function*(){var r=new a.BufferedIterator();return yield _this152.getObjectsPredicateStar(n,o.path,e.graph,t,_h,r,{count:0}),r.transform({transform(t,r,n){var a=i.Bindings({[_c5]:t});l&&(a=a.set(s.termToString(e.graph),u)),n(a),r();}});}),{maxBufferSize:128});},autoStart:!1}),variables:l?[_c5,s.termToString(e.graph)]:[_c5],canContainUndefs:!1};}if(u&&c){var _r174=n.ActorAbstractPath.FACTORY.createDistinct(n.ActorAbstractPath.FACTORY.createPath(e.subject,e.predicate.path,e.object,e.graph)),_u7=i.ActorQueryOperation.getSafeBindings(yield _this152.mediatorQueryOperation.mediate({context:t,operation:_r174})),_c6=s.termToString(e.subject),_h2=s.termToString(e.object),_d={};return {type:"bindings",bindingsStream:new a.MultiTransformIterator(_u7.bindingsStream,{multiTransform:r=>{var n=r.get(_c6),i=r.get(_h2),u=l?r.get(s.termToString(e.graph)):e.graph;return new a.TransformIterator(/*#__PURE__*/_asyncToGenerator(function*(){var r=new a.BufferedIterator();return yield _this152.getSubjectAndObjectBindingsPredicateStar(_c6,_h2,n,i,o.path,u,t,_d,{},r,{count:0}),r.transform({transform(t,r,n){l&&(t=t.set(s.termToString(e.graph),u)),n(t),r();}});}),{maxBufferSize:128});},autoStart:!1}),variables:l?[_c6,_h2,s.termToString(e.graph)]:[_c6,_h2],canContainUndefs:!1};}if(u&&!c)return _this152.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.object,n.ActorAbstractPath.FACTORY.createOneOrMorePath(n.ActorAbstractPath.FACTORY.createInv(o.path)),e.subject,e.graph)});var h=_this152.generateVariable(),d=s.termToString(h);return {type:"bindings",bindingsStream:i.ActorQueryOperation.getSafeBindings(yield _this152.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.subject,o,h,e.graph)})).bindingsStream.transform({filter:t=>t.get(d).equals(e.object),transform(t,r,n){n(l?i.Bindings({[s.termToString(e.graph)]:t.get(s.termToString(e.graph))}):i.Bindings({})),r();}}),variables:l?[s.termToString(e.graph)]:[],canContainUndefs:!1};})();}}t.ActorQueryOperationPathOneOrMore=u;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(576),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathSeq=void 0;var n=r(29),i=r(1),a=r(4),s=r(6);class o extends n.ActorAbstractPath{constructor(e){super(e,s.Algebra.types.SEQ);}runOperation(e,t){var _this153=this;return _asyncToGenerator(function*(){var r=e.predicate,s=_this153.generateVariable(e),o=a.termToString(s),u=(yield Promise.all([_this153.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.subject,r.left,s,e.graph)}),_this153.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(s,r.right,e.object,e.graph)})])).map(e=>i.ActorQueryOperation.getSafeBindings(e)),c=i.ActorQueryOperation.getSafeBindings(yield _this153.mediatorJoin.mediate({entries:u})),l=c.bindingsStream.transform({transform(e,t,r){r(e.delete(o)),t();}}),h=c.variables,d=h.indexOf(o);return h.splice(d,1),{type:"bindings",bindingsStream:l,variables:h,canContainUndefs:!1};})();}}t.ActorQueryOperationPathSeq=o;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(578),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathZeroOrMore=void 0;var n=r(29),i=r(1),a=r(3),s=r(4),o=r(6);class u extends n.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.ZERO_OR_MORE_PATH);}runOperation(e,t){var _this154=this;return _asyncToGenerator(function*(){var r=yield _this154.isPathArbitraryLengthDistinct(t,e);if(r.operation)return r.operation;t=r.context;var o=e.predicate,u="Variable"===e.subject.termType,c="Variable"===e.object.termType,l="Variable"===e.graph.termType;if(u&&c){var _r175=_this154.generateVariable(e),_u8=n.ActorAbstractPath.FACTORY.createPattern(e.subject,_r175,e.object,e.graph),_c7=i.ActorQueryOperation.getSafeBindings(yield _this154.mediatorQueryOperation.mediate({context:t,operation:_u8})),_h3=s.termToString(e.subject),_d2=s.termToString(e.object),_p=new Set(),f={};return {type:"bindings",bindingsStream:new a.MultiTransformIterator(_c7.bindingsStream,{multiTransform:r=>{var n=r.get(_h3),i=r.get(_d2),u=l?r.get(s.termToString(e.graph)):e.graph,c=s.termToString(n)+s.termToString(u),g=s.termToString(i)+s.termToString(u);return new a.TransformIterator(/*#__PURE__*/_asyncToGenerator(function*(){if(_p.has(c)&&_p.has(g))return new a.EmptyIterator();var r=new a.BufferedIterator(),m={count:0};return _p.has(c)||(_p.add(c),yield _this154.getSubjectAndObjectBindingsPredicateStar(_h3,_d2,n,n,o.path,u,t,f,{},r,m)),_p.has(g)||(_p.add(g),yield _this154.getSubjectAndObjectBindingsPredicateStar(_h3,_d2,i,i,o.path,u,t,f,{},r,m)),r.transform({transform(t,r,n){l&&(t=t.set(s.termToString(e.graph),u)),n(t),r();}});}));}}),variables:l?[_h3,_d2,s.termToString(e.graph)]:[_h3,_d2],canContainUndefs:!1};}if(!u&&!c){var _r176=_this154.generateVariable();return {type:"bindings",bindingsStream:(yield _this154.getObjectsPredicateStarEval(e.subject,_r176,o.path,e.graph,t)).transform({filter:t=>t.get(s.termToString(_r176)).equals(e.object),transform(t,r,n){n(l?i.Bindings({[s.termToString(e.graph)]:t.get(s.termToString(e.graph))}):i.Bindings({})),r();}}),variables:l?[s.termToString(e.graph)]:[],canContainUndefs:!1};}var h=u?e.object:e.subject,d=u?e.subject:e.object,p=u?n.ActorAbstractPath.FACTORY.createInv(o.path):o.path;return {type:"bindings",bindingsStream:(yield _this154.getObjectsPredicateStarEval(h,d,p,e.graph,t)).transform({transform(e,t,r){r(e),t();}}),variables:l?[s.termToString(d),s.termToString(e.graph)]:[s.termToString(d)],canContainUndefs:!1};})();}}t.ActorQueryOperationPathZeroOrMore=u;},function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function get(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__exportStar||function(e,t){for(var r in e){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r);}};Object.defineProperty(t,"__esModule",{value:!0}),i(r(580),t);},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathZeroOrOne=void 0;var n=r(187),i=r(1),a=r(3),s=r(4),o=r(6);class u extends n.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.ZERO_OR_ONE_PATH);}runOperation(e,t){var _this155=this;return _asyncToGenerator(function*(){var r=e.predicate,o="Variable"===e.subject.termType,u="Variable"===e.object.termType,c=[];if(!o&&!u&&e.subject.equals(e.object))return {type:"bindings",bindingsStream:new a.SingletonIterator(i.Bindings({})),variables:[],canContainUndefs:!1};if(o&&u)throw new Error("ZeroOrOne path expressions with 2 variables not supported yet");var l=yield _this155.isPathArbitraryLengthDistinct(t,e);if(l.operation)return l.operation;t=l.context,o&&c.push(i.Bindings({[s.termToString(e.subject)]:e.object})),u&&c.push(i.Bindings({[s.termToString(e.object)]:e.subject}));var h=i.ActorQueryOperation.getSafeBindings(yield _this155.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.subject,r.path,e.object,e.graph)}));return {type:"bindings",bindingsStream:h.bindingsStream.prepend(c),variables:h.variables,canContainUndefs:!1};})();}}t.ActorQueryOperationPathZeroOrOne=u;},function(e,t,r){r.r(t),r.d(t,"Source",function(){return s;}),r.d(t,"getLocation",function(){return o;}),r.d(t,"printLocation",function(){return u;}),r.d(t,"printSourceLocation",function(){return c;}),r.d(t,"Kind",function(){return d;}),r.d(t,"TokenKind",function(){return p;}),r.d(t,"Lexer",function(){return j;}),r.d(t,"parse",function(){return H;}),r.d(t,"parseValue",function(){return G;}),r.d(t,"parseType",function(){return z;}),r.d(t,"print",function(){return ee;}),r.d(t,"visit",function(){return W;}),r.d(t,"visitInParallel",function(){return K;}),r.d(t,"getVisitFn",function(){return Z;}),r.d(t,"BREAK",function(){return J;}),r.d(t,"Location",function(){return R;}),r.d(t,"Token",function(){return I;}),r.d(t,"isDefinitionNode",function(){return ce;}),r.d(t,"isExecutableDefinitionNode",function(){return le;}),r.d(t,"isSelectionNode",function(){return he;}),r.d(t,"isValueNode",function(){return de;}),r.d(t,"isTypeNode",function(){return pe;}),r.d(t,"isTypeSystemDefinitionNode",function(){return fe;}),r.d(t,"isTypeDefinitionNode",function(){return ge;}),r.d(t,"isTypeSystemExtensionNode",function(){return me;}),r.d(t,"isTypeExtensionNode",function(){return ye;}),r.d(t,"DirectiveLocation",function(){return V;});var n="function"==typeof Symbol?Symbol.toStringTag:"@@toStringTag";function i(e,t){if(!Boolean(e))throw new Error(t);}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}var s=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};this.body=e,this.name=t,this.locationOffset=r,this.locationOffset.line>0||i(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||i(0,"column in locationOffset is 1-indexed and must be positive.");}var t,r;return t=e,(r=[{key:n,get:function get(){return "Source";}}])&&a(t.prototype,r),e;}();function o(e,t){for(var r,n=/\r\n|[\n\r]/g,i=1,a=t+1;(r=n.exec(e.body))&&r.index<t;){i+=1,a=t+1-(r.index+r[0].length);}return {line:i,column:a};}function u(e){return c(e.source,o(e.source,e.start));}function c(e,t){var r=e.locationOffset.column-1,n=h(r)+e.body,i=t.line-1,a=e.locationOffset.line-1,s=t.line+a,o=1===t.line?r:0,u=t.column+o,c="".concat(e.name,":").concat(s,":").concat(u,"\n"),d=n.split(/\r\n|[\n\r]/g),p=d[i];if(p.length>120){for(var f=Math.floor(u/80),g=u%80,m=[],y=0;y<p.length;y+=80){m.push(p.slice(y,y+80));}return c+l([["".concat(s),m[0]]].concat(m.slice(1,f+1).map(function(e){return ["",e];}),[[" ",h(g-1)+"^"],["",m[f+1]]]));}return c+l([["".concat(s-1),d[i-1]],["".concat(s),p],["",h(u-1)+"^"],["".concat(s+1),d[i+1]]]);}function l(e){var t=e.filter(function(e){return void 0!==e[1];}),r=Math.max.apply(Math,t.map(function(e){return e[0].length;}));return t.map(function(e){var t,n=e[0],i=e[1];return h(r-(t=n).length)+t+(i?" | "+i:" |");}).join("\n");}function h(e){return Array(e+1).join(" ");}var d=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),p=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function f(e){return (f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e;}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;})(e);}function g(e){return (g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e;}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;})(e);}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}function y(e,t){return !t||"object"!==g(t)&&"function"!=typeof t?b(e):t;}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}function _(e){var t="function"==typeof Map?new Map():void 0;return (_=function _(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n);}function n(){return v(e,arguments,T(this).constructor);}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),S(n,e);})(e);}function v(e,t,r){return (v=w()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n))();return r&&S(i,r.prototype),i;}).apply(null,arguments);}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0;}catch(e){return !1;}}function S(e,t){return (S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e;})(e,t);}function T(e){return (T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e);})(e);}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t);}(h,e);var t,r,i,a,l=(t=h,r=w(),function(){var e,n=T(t);if(r){var i=T(this).constructor;e=Reflect.construct(n,arguments,i);}else e=n.apply(this,arguments);return y(this,e);});function h(e,t,r,n,i,a,s){var u,c,d,p,g;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,h),g=l.call(this,e);var m,_=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,v=r;!v&&_&&(v=null===(m=_[0].loc)||void 0===m?void 0:m.source);var w,S=n;!S&&_&&(S=_.reduce(function(e,t){return t.loc&&e.push(t.loc.start),e;},[])),S&&0===S.length&&(S=void 0),n&&r?w=n.map(function(e){return o(r,e);}):_&&(w=_.reduce(function(e,t){return t.loc&&e.push(o(t.loc.source,t.loc.start)),e;},[]));var T,E=s;if(null==E&&null!=a){var x=a.extensions;"object"==f(T=x)&&null!==T&&(E=x);}return Object.defineProperties(b(g),{name:{value:"GraphQLError"},message:{value:e,enumerable:!0,writable:!0},locations:{value:null!==(u=w)&&void 0!==u?u:void 0,enumerable:null!=w},path:{value:null!=i?i:void 0,enumerable:null!=i},nodes:{value:null!=_?_:void 0},source:{value:null!==(c=v)&&void 0!==c?c:void 0},positions:{value:null!==(d=S)&&void 0!==d?d:void 0},originalError:{value:a},extensions:{value:null!==(p=E)&&void 0!==p?p:void 0,enumerable:null!=E}}),(null==a?void 0:a.stack)?(Object.defineProperty(b(g),"stack",{value:a.stack,writable:!0,configurable:!0}),y(g)):(Error.captureStackTrace?Error.captureStackTrace(b(g),h):Object.defineProperty(b(g),"stack",{value:Error().stack,writable:!0,configurable:!0}),g);}return i=h,(a=[{key:"toString",value:function value(){return function(e){var t=e.message;if(e.nodes)for(var r=0,n=e.nodes;r<n.length;r++){var i=n[r];i.loc&&(t+="\n\n"+u(i.loc));}else if(e.source&&e.locations)for(var a=0,s=e.locations;a<s.length;a++){var o=s[a];t+="\n\n"+c(e.source,o);}return t;}(this);}},{key:n,get:function get(){return "Object";}}])&&m(i.prototype,a),h;}(_(Error));function x(e,t,r){return new E("Syntax Error: ".concat(r),void 0,e,[t]);}var O="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function A(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.");}(0),e.prototype.inspect=t,O&&(e.prototype[O]=t);}var R=function(){function e(e,t,r){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=r;}return e.prototype.toJSON=function(){return {start:this.start,end:this.end};},e;}();A(R);var I=function(){function e(e,t,r,n,i,a,s){this.kind=e,this.start=t,this.end=r,this.line=n,this.column=i,this.value=s,this.prev=a,this.next=null;}return e.prototype.toJSON=function(){return {kind:this.kind,value:this.value,line:this.line,column:this.column};},e;}();function N(e){return null!=e&&"string"==typeof e.kind;}function P(e){var t=e.split(/\r\n|[\n\r]/g),r=function(e){for(var t=null,r=1;r<e.length;r++){var n=e[r],i=C(n);if(i!==n.length&&(null===t||i<t)&&0===(t=i))break;}return null===t?0:t;}(t);if(0!==r)for(var n=1;n<t.length;n++){t[n]=t[n].slice(r);}for(;t.length>0&&D(t[0]);){t.shift();}for(;t.length>0&&D(t[t.length-1]);){t.pop();}return t.join("\n");}function C(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);){t++;}return t;}function D(e){return C(e)===e.length;}A(I);var j=function(){function e(e){var t=new I(p.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0;}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead();},t.lookahead=function(){var e=this.token;if(e.kind!==p.EOF)do{var t;e=null!==(t=e.next)&&void 0!==t?t:e.next=L(this,e);}while(e.kind===p.COMMENT);return e;},e;}();function k(e){return isNaN(e)?p.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"');}function L(e,t){var r=e.source,n=r.body,i=n.length,a=function(e,t,r){var n=e.length,i=t;for(;i<n;){var a=e.charCodeAt(i);if(9===a||32===a||44===a||65279===a)++i;else if(10===a)++i,++r.line,r.lineStart=i;else {if(13!==a)break;10===e.charCodeAt(i+1)?i+=2:++i,++r.line,r.lineStart=i;}}return i;}(n,t.end,e),s=e.line,o=1+a-e.lineStart;if(a>=i)return new I(p.EOF,i,i,s,o,t);var u=n.charCodeAt(a);switch(u){case 33:return new I(p.BANG,a,a+1,s,o,t);case 35:return function(e,t,r,n,i){var a,s=e.body,o=t;do{a=s.charCodeAt(++o);}while(!isNaN(a)&&(a>31||9===a));return new I(p.COMMENT,t,o,r,n,i,s.slice(t+1,o));}(r,a,s,o,t);case 36:return new I(p.DOLLAR,a,a+1,s,o,t);case 38:return new I(p.AMP,a,a+1,s,o,t);case 40:return new I(p.PAREN_L,a,a+1,s,o,t);case 41:return new I(p.PAREN_R,a,a+1,s,o,t);case 46:if(46===n.charCodeAt(a+1)&&46===n.charCodeAt(a+2))return new I(p.SPREAD,a,a+3,s,o,t);break;case 58:return new I(p.COLON,a,a+1,s,o,t);case 61:return new I(p.EQUALS,a,a+1,s,o,t);case 64:return new I(p.AT,a,a+1,s,o,t);case 91:return new I(p.BRACKET_L,a,a+1,s,o,t);case 93:return new I(p.BRACKET_R,a,a+1,s,o,t);case 123:return new I(p.BRACE_L,a,a+1,s,o,t);case 124:return new I(p.PIPE,a,a+1,s,o,t);case 125:return new I(p.BRACE_R,a,a+1,s,o,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,r,n,i){var a=e.body,s=a.length,o=t+1,u=0;for(;o!==s&&!isNaN(u=a.charCodeAt(o))&&(95===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122);){++o;}return new I(p.NAME,t,o,r,n,i,a.slice(t,o));}(r,a,s,o,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,r,n,i,a){var s=e.body,o=r,u=t,c=!1;45===o&&(o=s.charCodeAt(++u));if(48===o){if((o=s.charCodeAt(++u))>=48&&o<=57)throw x(e,u,"Invalid number, unexpected digit after 0: ".concat(k(o),"."));}else u=M(e,u,o),o=s.charCodeAt(u);46===o&&(c=!0,o=s.charCodeAt(++u),u=M(e,u,o),o=s.charCodeAt(u));69!==o&&101!==o||(c=!0,43!==(o=s.charCodeAt(++u))&&45!==o||(o=s.charCodeAt(++u)),u=M(e,u,o),o=s.charCodeAt(u));if(46===o||function(e){return 95===e||e>=65&&e<=90||e>=97&&e<=122;}(o))throw x(e,u,"Invalid number, expected digit but got: ".concat(k(o),"."));return new I(c?p.FLOAT:p.INT,t,u,n,i,a,s.slice(t,u));}(r,a,u,s,o,t);case 34:return 34===n.charCodeAt(a+1)&&34===n.charCodeAt(a+2)?function(e,t,r,n,i,a){var s=e.body,o=t+3,u=o,c=0,l="";for(;o<s.length&&!isNaN(c=s.charCodeAt(o));){if(34===c&&34===s.charCodeAt(o+1)&&34===s.charCodeAt(o+2))return l+=s.slice(u,o),new I(p.BLOCK_STRING,t,o+3,r,n,i,P(l));if(c<32&&9!==c&&10!==c&&13!==c)throw x(e,o,"Invalid character within String: ".concat(k(c),"."));10===c?(++o,++a.line,a.lineStart=o):13===c?(10===s.charCodeAt(o+1)?o+=2:++o,++a.line,a.lineStart=o):92===c&&34===s.charCodeAt(o+1)&&34===s.charCodeAt(o+2)&&34===s.charCodeAt(o+3)?(l+=s.slice(u,o)+'"""',u=o+=4):++o;}throw x(e,o,"Unterminated string.");}(r,a,s,o,t,e):function(e,t,r,n,i){var a=e.body,s=t+1,o=s,u=0,c="";for(;s<a.length&&!isNaN(u=a.charCodeAt(s))&&10!==u&&13!==u;){if(34===u)return c+=a.slice(o,s),new I(p.STRING,t,s+1,r,n,i,c);if(u<32&&9!==u)throw x(e,s,"Invalid character within String: ".concat(k(u),"."));if(++s,92===u){switch(c+=a.slice(o,s-1),u=a.charCodeAt(s)){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+="\n";break;case 114:c+="\r";break;case 116:c+="\t";break;case 117:var l=(d=a.charCodeAt(s+1),f=a.charCodeAt(s+2),g=a.charCodeAt(s+3),m=a.charCodeAt(s+4),F(d)<<12|F(f)<<8|F(g)<<4|F(m));if(l<0){var h=a.slice(s+1,s+5);throw x(e,s,"Invalid character escape sequence: \\u".concat(h,"."));}c+=String.fromCharCode(l),s+=4;break;default:throw x(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(u),"."));}++s,o=s;}}var d,f,g,m;throw x(e,s,"Unterminated string.");}(r,a,s,o,t);}throw x(r,a,function(e){if(e<32&&9!==e&&10!==e&&13!==e)return "Cannot contain the invalid character ".concat(k(e),".");if(39===e)return "Unexpected single quote character ('), did you mean to use a double quote (\")?";return "Cannot parse the unexpected character ".concat(k(e),".");}(u));}function M(e,t,r){var n=e.body,i=t,a=r;if(a>=48&&a<=57){do{a=n.charCodeAt(++i);}while(a>=48&&a<=57);return i;}throw x(e,i,"Invalid number, expected digit but got: ".concat(k(a),"."));}function F(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1;}function B(e){return (B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e;}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;})(e);}function q(e){return U(e,[]);}function U(e,t){switch(B(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return "[Circular]";var r=[].concat(t,[e]),n=function(e){var t=e[String(O)];if("function"==typeof t)return t;if("function"==typeof e.inspect)return e.inspect;}(e);if(void 0!==n){var i=n.call(e);if(i!==e)return "string"==typeof i?i:U(i,r);}else if(Array.isArray(e))return function(e,t){if(0===e.length)return "[]";if(t.length>2)return "[Array]";for(var r=Math.min(10,e.length),n=e.length-r,i=[],a=0;a<r;++a){i.push(U(e[a],t));}1===n?i.push("... 1 more item"):n>1&&i.push("... ".concat(n," more items"));return "["+i.join(", ")+"]";}(e,r);return function(e,t){var r=Object.keys(e);if(0===r.length)return "{}";if(t.length>2)return "["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var r=e.constructor.name;if("string"==typeof r&&""!==r)return r;}return t;}(e)+"]";return "{ "+r.map(function(r){return r+": "+U(e[r],t);}).join(", ")+" }";}(e,r);}(e,t);default:return String(e);}}var V=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function H(e,t){return new Q(e,t).parseDocument();}function G(e,t){var r=new Q(e,t);r.expectToken(p.SOF);var n=r.parseValueLiteral(!1);return r.expectToken(p.EOF),n;}function z(e,t){var r=new Q(e,t);r.expectToken(p.SOF);var n=r.parseTypeReference();return r.expectToken(p.EOF),n;}var Q=function(){function e(e,t){var r="string"==typeof e?new s(e):e;r instanceof s||i(0,"Must provide Source. Received: ".concat(q(r),".")),this._lexer=new j(r),this._options=t;}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(p.NAME);return {kind:d.NAME,value:e.value,loc:this.loc(e)};},t.parseDocument=function(){var e=this._lexer.token;return {kind:d.DOCUMENT,definitions:this.many(p.SOF,this.parseDefinition,p.EOF),loc:this.loc(e)};},t.parseDefinition=function(){if(this.peek(p.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension();}else {if(this.peek(p.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition();}throw this.unexpected();},t.parseOperationDefinition=function(){var e=this._lexer.token;if(this.peek(p.BRACE_L))return {kind:d.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(e)};var t,r=this.parseOperationType();return this.peek(p.NAME)&&(t=this.parseName()),{kind:d.OPERATION_DEFINITION,operation:r,name:t,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)};},t.parseOperationType=function(){var e=this.expectToken(p.NAME);switch(e.value){case"query":return "query";case"mutation":return "mutation";case"subscription":return "subscription";}throw this.unexpected(e);},t.parseVariableDefinitions=function(){return this.optionalMany(p.PAREN_L,this.parseVariableDefinition,p.PAREN_R);},t.parseVariableDefinition=function(){var e=this._lexer.token;return {kind:d.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(p.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(p.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)};},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(p.DOLLAR),{kind:d.VARIABLE,name:this.parseName(),loc:this.loc(e)};},t.parseSelectionSet=function(){var e=this._lexer.token;return {kind:d.SELECTION_SET,selections:this.many(p.BRACE_L,this.parseSelection,p.BRACE_R),loc:this.loc(e)};},t.parseSelection=function(){return this.peek(p.SPREAD)?this.parseFragment():this.parseField();},t.parseField=function(){var e,t,r=this._lexer.token,n=this.parseName();return this.expectOptionalToken(p.COLON)?(e=n,t=this.parseName()):t=n,{kind:d.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(p.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(r)};},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(p.PAREN_L,t,p.PAREN_R);},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(p.COLON),{kind:d.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)};},t.parseConstArgument=function(){var e=this._lexer.token;return {kind:d.ARGUMENT,name:this.parseName(),value:(this.expectToken(p.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)};},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(p.SPREAD);var t=this.expectOptionalKeyword("on");return !t&&this.peek(p.NAME)?{kind:d.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:d.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)};},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)?{kind:d.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:d.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)};},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName();},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case p.BRACKET_L:return this.parseList(e);case p.BRACE_L:return this.parseObject(e);case p.INT:return this._lexer.advance(),{kind:d.INT,value:t.value,loc:this.loc(t)};case p.FLOAT:return this._lexer.advance(),{kind:d.FLOAT,value:t.value,loc:this.loc(t)};case p.STRING:case p.BLOCK_STRING:return this.parseStringLiteral();case p.NAME:switch(this._lexer.advance(),t.value){case"true":return {kind:d.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return {kind:d.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return {kind:d.NULL,loc:this.loc(t)};default:return {kind:d.ENUM,value:t.value,loc:this.loc(t)};}case p.DOLLAR:if(!e)return this.parseVariable();}throw this.unexpected();},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:d.STRING,value:e.value,block:e.kind===p.BLOCK_STRING,loc:this.loc(e)};},t.parseList=function(e){var t=this,r=this._lexer.token;return {kind:d.LIST,values:this.any(p.BRACKET_L,function(){return t.parseValueLiteral(e);},p.BRACKET_R),loc:this.loc(r)};},t.parseObject=function(e){var t=this,r=this._lexer.token;return {kind:d.OBJECT,fields:this.any(p.BRACE_L,function(){return t.parseObjectField(e);},p.BRACE_R),loc:this.loc(r)};},t.parseObjectField=function(e){var t=this._lexer.token,r=this.parseName();return this.expectToken(p.COLON),{kind:d.OBJECT_FIELD,name:r,value:this.parseValueLiteral(e),loc:this.loc(t)};},t.parseDirectives=function(e){for(var t=[];this.peek(p.AT);){t.push(this.parseDirective(e));}return t;},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(p.AT),{kind:d.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)};},t.parseTypeReference=function(){var e,t=this._lexer.token;return this.expectOptionalToken(p.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(p.BRACKET_R),e={kind:d.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(p.BANG)?{kind:d.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e;},t.parseNamedType=function(){var e=this._lexer.token;return {kind:d.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)};},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===p.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition();}throw this.unexpected(e);},t.peekDescription=function(){return this.peek(p.STRING)||this.peek(p.BLOCK_STRING);},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral();},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var r=this.parseDirectives(!0),n=this.many(p.BRACE_L,this.parseOperationTypeDefinition,p.BRACE_R);return {kind:d.SCHEMA_DEFINITION,description:t,directives:r,operationTypes:n,loc:this.loc(e)};},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(p.COLON);var r=this.parseNamedType();return {kind:d.OPERATION_TYPE_DEFINITION,operation:t,type:r,loc:this.loc(e)};},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var r=this.parseName(),n=this.parseDirectives(!0);return {kind:d.SCALAR_TYPE_DEFINITION,description:t,name:r,directives:n,loc:this.loc(e)};},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var r=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),a=this.parseFieldsDefinition();return {kind:d.OBJECT_TYPE_DEFINITION,description:t,name:r,interfaces:n,directives:i,fields:a,loc:this.loc(e)};},t.parseImplementsInterfaces=function(){var e=[];if(this.expectOptionalKeyword("implements")){this.expectOptionalToken(p.AMP);do{var t;e.push(this.parseNamedType());}while(this.expectOptionalToken(p.AMP)||!0===(null===(t=this._options)||void 0===t?void 0:t.allowLegacySDLImplementsInterfaces)&&this.peek(p.NAME));}return e;},t.parseFieldsDefinition=function(){var e;return !0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)&&this.peek(p.BRACE_L)&&this._lexer.lookahead().kind===p.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(p.BRACE_L,this.parseFieldDefinition,p.BRACE_R);},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),r=this.parseName(),n=this.parseArgumentDefs();this.expectToken(p.COLON);var i=this.parseTypeReference(),a=this.parseDirectives(!0);return {kind:d.FIELD_DEFINITION,description:t,name:r,arguments:n,type:i,directives:a,loc:this.loc(e)};},t.parseArgumentDefs=function(){return this.optionalMany(p.PAREN_L,this.parseInputValueDef,p.PAREN_R);},t.parseInputValueDef=function(){var e=this._lexer.token,t=this.parseDescription(),r=this.parseName();this.expectToken(p.COLON);var n,i=this.parseTypeReference();this.expectOptionalToken(p.EQUALS)&&(n=this.parseValueLiteral(!0));var a=this.parseDirectives(!0);return {kind:d.INPUT_VALUE_DEFINITION,description:t,name:r,type:i,defaultValue:n,directives:a,loc:this.loc(e)};},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var r=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),a=this.parseFieldsDefinition();return {kind:d.INTERFACE_TYPE_DEFINITION,description:t,name:r,interfaces:n,directives:i,fields:a,loc:this.loc(e)};},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var r=this.parseName(),n=this.parseDirectives(!0),i=this.parseUnionMemberTypes();return {kind:d.UNION_TYPE_DEFINITION,description:t,name:r,directives:n,types:i,loc:this.loc(e)};},t.parseUnionMemberTypes=function(){var e=[];if(this.expectOptionalToken(p.EQUALS)){this.expectOptionalToken(p.PIPE);do{e.push(this.parseNamedType());}while(this.expectOptionalToken(p.PIPE));}return e;},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var r=this.parseName(),n=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();return {kind:d.ENUM_TYPE_DEFINITION,description:t,name:r,directives:n,values:i,loc:this.loc(e)};},t.parseEnumValuesDefinition=function(){return this.optionalMany(p.BRACE_L,this.parseEnumValueDefinition,p.BRACE_R);},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),r=this.parseName(),n=this.parseDirectives(!0);return {kind:d.ENUM_VALUE_DEFINITION,description:t,name:r,directives:n,loc:this.loc(e)};},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var r=this.parseName(),n=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();return {kind:d.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:r,directives:n,fields:i,loc:this.loc(e)};},t.parseInputFieldsDefinition=function(){return this.optionalMany(p.BRACE_L,this.parseInputValueDef,p.BRACE_R);},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===p.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension();}throw this.unexpected(e);},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),r=this.optionalMany(p.BRACE_L,this.parseOperationTypeDefinition,p.BRACE_R);if(0===t.length&&0===r.length)throw this.unexpected();return {kind:d.SCHEMA_EXTENSION,directives:t,operationTypes:r,loc:this.loc(e)};},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),r=this.parseDirectives(!0);if(0===r.length)throw this.unexpected();return {kind:d.SCALAR_TYPE_EXTENSION,name:t,directives:r,loc:this.loc(e)};},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),r=this.parseImplementsInterfaces(),n=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===r.length&&0===n.length&&0===i.length)throw this.unexpected();return {kind:d.OBJECT_TYPE_EXTENSION,name:t,interfaces:r,directives:n,fields:i,loc:this.loc(e)};},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),r=this.parseImplementsInterfaces(),n=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===r.length&&0===n.length&&0===i.length)throw this.unexpected();return {kind:d.INTERFACE_TYPE_EXTENSION,name:t,interfaces:r,directives:n,fields:i,loc:this.loc(e)};},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),r=this.parseDirectives(!0),n=this.parseUnionMemberTypes();if(0===r.length&&0===n.length)throw this.unexpected();return {kind:d.UNION_TYPE_EXTENSION,name:t,directives:r,types:n,loc:this.loc(e)};},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),r=this.parseDirectives(!0),n=this.parseEnumValuesDefinition();if(0===r.length&&0===n.length)throw this.unexpected();return {kind:d.ENUM_TYPE_EXTENSION,name:t,directives:r,values:n,loc:this.loc(e)};},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),r=this.parseDirectives(!0),n=this.parseInputFieldsDefinition();if(0===r.length&&0===n.length)throw this.unexpected();return {kind:d.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:r,fields:n,loc:this.loc(e)};},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(p.AT);var r=this.parseName(),n=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var a=this.parseDirectiveLocations();return {kind:d.DIRECTIVE_DEFINITION,description:t,name:r,arguments:n,repeatable:i,locations:a,loc:this.loc(e)};},t.parseDirectiveLocations=function(){this.expectOptionalToken(p.PIPE);var e=[];do{e.push(this.parseDirectiveLocation());}while(this.expectOptionalToken(p.PIPE));return e;},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==V[t.value])return t;throw this.unexpected(e);},t.loc=function(e){var t;if(!0!==(null===(t=this._options)||void 0===t?void 0:t.noLocation))return new R(e,this._lexer.lastToken,this._lexer.source);},t.peek=function(e){return this._lexer.token.kind===e;},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw x(this._lexer.source,t.start,"Expected ".concat($(e),", found ").concat(X(t),"."));},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind!==p.NAME||t.value!==e)throw x(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(X(t),"."));this._lexer.advance();},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===p.NAME&&t.value===e&&(this._lexer.advance(),!0);},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return x(this._lexer.source,t.start,"Unexpected ".concat(X(t),"."));},t.any=function(e,t,r){this.expectToken(e);for(var n=[];!this.expectOptionalToken(r);){n.push(t.call(this));}return n;},t.optionalMany=function(e,t,r){if(this.expectOptionalToken(e)){var n=[];do{n.push(t.call(this));}while(!this.expectOptionalToken(r));return n;}return [];},t.many=function(e,t,r){this.expectToken(e);var n=[];do{n.push(t.call(this));}while(!this.expectOptionalToken(r));return n;},e;}();function X(e){var t=e.value;return $(e.kind)+(null!=t?' "'.concat(t,'"'):"");}function $(e){return function(e){return e===p.BANG||e===p.DOLLAR||e===p.AMP||e===p.PAREN_L||e===p.PAREN_R||e===p.SPREAD||e===p.COLON||e===p.EQUALS||e===p.AT||e===p.BRACKET_L||e===p.BRACKET_R||e===p.BRACE_L||e===p.PIPE||e===p.BRACE_R;}(e)?'"'.concat(e,'"'):e;}var Y={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},J=Object.freeze({});function W(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y,n=void 0,i=Array.isArray(e),a=[e],s=-1,o=[],u=void 0,c=void 0,l=void 0,h=[],d=[],p=e;do{var f=++s===a.length,g=f&&0!==o.length;if(f){if(c=0===d.length?void 0:h[h.length-1],u=l,l=d.pop(),g){if(i)u=u.slice();else {for(var m={},y=0,b=Object.keys(u);y<b.length;y++){var _=b[y];m[_]=u[_];}u=m;}for(var v=0,w=0;w<o.length;w++){var S=o[w][0],T=o[w][1];i&&(S-=v),i&&null===T?(u.splice(S,1),v++):u[S]=T;}}s=n.index,a=n.keys,o=n.edits,i=n.inArray,n=n.prev;}else {if(c=l?i?s:a[s]:void 0,null==(u=l?l[c]:p))continue;l&&h.push(c);}var E,x=void 0;if(!Array.isArray(u)){if(!N(u))throw new Error("Invalid AST Node: ".concat(q(u),"."));var O=Z(t,u.kind,f);if(O){if((x=O.call(t,u,c,l,h,d))===J)break;if(!1===x){if(!f){h.pop();continue;}}else if(void 0!==x&&(o.push([c,x]),!f)){if(!N(x)){h.pop();continue;}u=x;}}}if(void 0===x&&g&&o.push([c,u]),f)h.pop();else n={inArray:i,index:s,keys:a,edits:o,prev:n},a=(i=Array.isArray(u))?u:null!==(E=r[u.kind])&&void 0!==E?E:[],s=-1,o=[],l&&d.push(l),l=u;}while(void 0!==n);return 0!==o.length&&(p=o[o.length-1][1]),p;}function K(e){var t=new Array(e.length);return {enter:function enter(r){for(var n=0;n<e.length;n++){if(null==t[n]){var i=Z(e[n],r.kind,!1);if(i){var a=i.apply(e[n],arguments);if(!1===a)t[n]=r;else if(a===J)t[n]=J;else if(void 0!==a)return a;}}}},leave:function leave(r){for(var n=0;n<e.length;n++){if(null==t[n]){var i=Z(e[n],r.kind,!0);if(i){var a=i.apply(e[n],arguments);if(a===J)t[n]=J;else if(void 0!==a&&!1!==a)return a;}}else t[n]===r&&(t[n]=null);}}};}function Z(e,t,r){var n=e[t];if(n){if(!r&&"function"==typeof n)return n;var i=r?n.leave:n.enter;if("function"==typeof i)return i;}else {var a=r?e.leave:e.enter;if(a){if("function"==typeof a)return a;var s=a[t];if("function"==typeof s)return s;}}}function ee(e){return W(e,{leave:te});}var te={Name:function Name(e){return e.value;},Variable:function Variable(e){return "$"+e.name;},Document:function Document(e){return ne(e.definitions,"\n\n")+"\n";},OperationDefinition:function OperationDefinition(e){var t=e.operation,r=e.name,n=ae("(",ne(e.variableDefinitions,", "),")"),i=ne(e.directives," "),a=e.selectionSet;return r||i||n||"query"!==t?ne([t,ne([r,n]),i,a]," "):a;},VariableDefinition:function VariableDefinition(e){var t=e.variable,r=e.type,n=e.defaultValue,i=e.directives;return t+": "+r+ae(" = ",n)+ae(" ",ne(i," "));},SelectionSet:function SelectionSet(e){return ie(e.selections);},Field:function Field(e){var t=e.alias,r=e.name,n=e.arguments,i=e.directives,a=e.selectionSet;return ne([ae("",t,": ")+r+ae("(",ne(n,", "),")"),ne(i," "),a]," ");},Argument:function Argument(e){return e.name+": "+e.value;},FragmentSpread:function FragmentSpread(e){return "..."+e.name+ae(" ",ne(e.directives," "));},InlineFragment:function InlineFragment(e){var t=e.typeCondition,r=e.directives,n=e.selectionSet;return ne(["...",ae("on ",t),ne(r," "),n]," ");},FragmentDefinition:function FragmentDefinition(e){var t=e.name,r=e.typeCondition,n=e.variableDefinitions,i=e.directives,a=e.selectionSet;return "fragment ".concat(t).concat(ae("(",ne(n,", "),")")," ")+"on ".concat(r," ").concat(ae("",ne(i," ")," "))+a;},IntValue:function IntValue(e){return e.value;},FloatValue:function FloatValue(e){return e.value;},StringValue:function StringValue(e,t){var r=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=-1===e.indexOf("\n"),i=" "===e[0]||"\t"===e[0],a='"'===e[e.length-1],s="\\"===e[e.length-1],o=!n||a||s||r,u="";return !o||n&&i||(u+="\n"+t),u+=t?e.replace(/\n/g,"\n"+t):e,o&&(u+="\n"),'"""'+u.replace(/"""/g,'\\"""')+'"""';}(r,"description"===t?"":"  "):JSON.stringify(r);},BooleanValue:function BooleanValue(e){return e.value?"true":"false";},NullValue:function NullValue(){return "null";},EnumValue:function EnumValue(e){return e.value;},ListValue:function ListValue(e){return "["+ne(e.values,", ")+"]";},ObjectValue:function ObjectValue(e){return "{"+ne(e.fields,", ")+"}";},ObjectField:function ObjectField(e){return e.name+": "+e.value;},Directive:function Directive(e){return "@"+e.name+ae("(",ne(e.arguments,", "),")");},NamedType:function NamedType(e){return e.name;},ListType:function ListType(e){return "["+e.type+"]";},NonNullType:function NonNullType(e){return e.type+"!";},SchemaDefinition:re(function(e){var t=e.directives,r=e.operationTypes;return ne(["schema",ne(t," "),ie(r)]," ");}),OperationTypeDefinition:function OperationTypeDefinition(e){return e.operation+": "+e.type;},ScalarTypeDefinition:re(function(e){return ne(["scalar",e.name,ne(e.directives," ")]," ");}),ObjectTypeDefinition:re(function(e){var t=e.name,r=e.interfaces,n=e.directives,i=e.fields;return ne(["type",t,ae("implements ",ne(r," & ")),ne(n," "),ie(i)]," ");}),FieldDefinition:re(function(e){var t=e.name,r=e.arguments,n=e.type,i=e.directives;return t+(ue(r)?ae("(\n",se(ne(r,"\n")),"\n)"):ae("(",ne(r,", "),")"))+": "+n+ae(" ",ne(i," "));}),InputValueDefinition:re(function(e){var t=e.name,r=e.type,n=e.defaultValue,i=e.directives;return ne([t+": "+r,ae("= ",n),ne(i," ")]," ");}),InterfaceTypeDefinition:re(function(e){var t=e.name,r=e.interfaces,n=e.directives,i=e.fields;return ne(["interface",t,ae("implements ",ne(r," & ")),ne(n," "),ie(i)]," ");}),UnionTypeDefinition:re(function(e){var t=e.name,r=e.directives,n=e.types;return ne(["union",t,ne(r," "),n&&0!==n.length?"= "+ne(n," | "):""]," ");}),EnumTypeDefinition:re(function(e){var t=e.name,r=e.directives,n=e.values;return ne(["enum",t,ne(r," "),ie(n)]," ");}),EnumValueDefinition:re(function(e){return ne([e.name,ne(e.directives," ")]," ");}),InputObjectTypeDefinition:re(function(e){var t=e.name,r=e.directives,n=e.fields;return ne(["input",t,ne(r," "),ie(n)]," ");}),DirectiveDefinition:re(function(e){var t=e.name,r=e.arguments,n=e.repeatable,i=e.locations;return "directive @"+t+(ue(r)?ae("(\n",se(ne(r,"\n")),"\n)"):ae("(",ne(r,", "),")"))+(n?" repeatable":"")+" on "+ne(i," | ");}),SchemaExtension:function SchemaExtension(e){var t=e.directives,r=e.operationTypes;return ne(["extend schema",ne(t," "),ie(r)]," ");},ScalarTypeExtension:function ScalarTypeExtension(e){return ne(["extend scalar",e.name,ne(e.directives," ")]," ");},ObjectTypeExtension:function ObjectTypeExtension(e){var t=e.name,r=e.interfaces,n=e.directives,i=e.fields;return ne(["extend type",t,ae("implements ",ne(r," & ")),ne(n," "),ie(i)]," ");},InterfaceTypeExtension:function InterfaceTypeExtension(e){var t=e.name,r=e.interfaces,n=e.directives,i=e.fields;return ne(["extend interface",t,ae("implements ",ne(r," & ")),ne(n," "),ie(i)]," ");},UnionTypeExtension:function UnionTypeExtension(e){var t=e.name,r=e.directives,n=e.types;return ne(["extend union",t,ne(r," "),n&&0!==n.length?"= "+ne(n," | "):""]," ");},EnumTypeExtension:function EnumTypeExtension(e){var t=e.name,r=e.directives,n=e.values;return ne(["extend enum",t,ne(r," "),ie(n)]," ");},InputObjectTypeExtension:function InputObjectTypeExtension(e){var t=e.name,r=e.directives,n=e.fields;return ne(["extend input",t,ne(r," "),ie(n)]," ");}};function re(e){return function(t){return ne([t.description,e(t)],"\n");};}function ne(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter(function(e){return e;}).join(r))&&void 0!==t?t:"";}function ie(e){return e&&0!==e.length?"{\n"+se(ne(e,"\n"))+"\n}":"";}function ae(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t?e+t+r:"";}function se(e){return e&&"  "+e.replace(/\n/g,"\n  ");}function oe(e){return -1!==e.indexOf("\n");}function ue(e){return e&&e.some(oe);}function ce(e){return le(e)||fe(e)||me(e);}function le(e){return e.kind===d.OPERATION_DEFINITION||e.kind===d.FRAGMENT_DEFINITION;}function he(e){return e.kind===d.FIELD||e.kind===d.FRAGMENT_SPREAD||e.kind===d.INLINE_FRAGMENT;}function de(e){return e.kind===d.VARIABLE||e.kind===d.INT||e.kind===d.FLOAT||e.kind===d.STRING||e.kind===d.BOOLEAN||e.kind===d.NULL||e.kind===d.ENUM||e.kind===d.LIST||e.kind===d.OBJECT;}function pe(e){return e.kind===d.NAMED_TYPE||e.kind===d.LIST_TYPE||e.kind===d.NON_NULL_TYPE;}function fe(e){return e.kind===d.SCHEMA_DEFINITION||ge(e)||e.kind===d.DIRECTIVE_DEFINITION;}function ge(e){return e.kind===d.SCALAR_TYPE_DEFINITION||e.kind===d.OBJECT_TYPE_DEFINITION||e.kind===d.INTERFACE_TYPE_DEFINITION||e.kind===d.UNION_TYPE_DEFINITION||e.kind===d.ENUM_TYPE_DEFINITION||e.kind===d.INPUT_OBJECT_TYPE_DEFINITION;}function me(e){return e.kind===d.SCHEMA_EXTENSION||ye(e);}function ye(e){return e.kind===d.SCALAR_TYPE_EXTENSION||e.kind===d.OBJECT_TYPE_EXTENSION||e.kind===d.INTERFACE_TYPE_EXTENSION||e.kind===d.UNION_TYPE_EXTENSION||e.kind===d.ENUM_TYPE_EXTENSION||e.kind===d.INPUT_OBJECT_TYPE_EXTENSION;}}]);

    var newEngine = Comunica$1.newEngine;

    /**
     * A proxy handler that prefixes all URLs with a given string.
     */
    class ProxyHandlerStatic {
      constructor(prefixUrl) {
        this.prefixUrl = prefixUrl;
      }

      getProxy(request) {
        var _this = this;

        return _asyncToGenerator(function* () {
          return {
            init: request.init,
            input: _this.modifyInput(request.input)
          };
        })();
      }

      modifyInput(input) {
        if (typeof input === 'string') {
          return this.prefixUrl + input;
        }

        return new Request(this.prefixUrl + input.url, input);
      }

    }

    function sparqlQueryToList(_x, _x2, _x3) {
      return _sparqlQueryToList.apply(this, arguments);
    }

    function _sparqlQueryToList() {
      _sparqlQueryToList = _asyncToGenerator(function* (query, source, proxy) {
        if (proxy === void 0) {
          proxy = undefined;
        }

        query = query.toString().replace(/LANGUAGE/g, Language.uiLanguage);
        if (typeof source === 'object' && source instanceof String) source = source.toString();
        if (typeof source === 'string') source.replace('http:', location.protocol);
        var options = {
          sources: [source],
          httpProxyHandler: null
        };
        if (proxy) options.httpProxyHandler = new ProxyHandlerStatic(proxy);
        var engine = newEngine();
        var result = yield engine.query(query, options);
        var bindings = yield result.bindings();
        var items = new Map();

        for (var binding of bindings) {
          var _binding$get$id, _binding$get, _binding$get2, _binding$get3, _binding$get4, _binding$get5;

          var label = (_binding$get$id = (_binding$get = binding.get('?label')) == null ? void 0 : _binding$get.id) != null ? _binding$get$id : (_binding$get2 = binding.get('?label')) == null ? void 0 : _binding$get2.value;
          var valueAndLanguage = label.split('@');

          if (label[0] === '"' && label[label.length - 1] === '"') {
            label = label.substr(1, label.length - 2);
          }

          if (valueAndLanguage.length > 1) {
            label = {};
            label[valueAndLanguage[1].trim('"')] = valueAndLanguage[0].slice(1, -1);
          }

          var uri = (_binding$get3 = binding.get('?uri')) == null ? void 0 : _binding$get3.value;
          var image = (_binding$get4 = binding.get('?image')) == null ? void 0 : _binding$get4.value;
          var group = (_binding$get5 = binding.get('?group')) == null ? void 0 : _binding$get5.value;

          if (!items.get(uri)) {
            items.set(uri, {
              label,
              uri,
              image,
              group
            });
          } else {
            var existingItem = items.get(uri);

            if (typeof existingItem.label === 'string' && typeof label === 'string') {
              existingItem.label = label;
            } else {
              Object.assign(existingItem.label, label);
            }

            items.set(uri, existingItem);
          }
        }

        return [...items.values()];
      });
      return _sparqlQueryToList.apply(this, arguments);
    }

    function onlyUnique(value, index, self) {
      return self.indexOf(value) === index && value;
    }

    var _templateObject$4, _templateObject2$2, _templateObject3$2, _templateObject4$2, _templateObject5$2, _templateObject6$1, _templateObject7$1, _templateObject8$1, _templateObject9$1, _templateObject10$1;
    class Dropdown extends ElementBase {
      constructor() {
        super(...arguments);
        this.form.dispatchEvent(new CustomEvent('dropdown-options', {
          detail: {
            options: this.options,
            element: this
          }
        }));

        if (!this.options.length) {
          var _this$definition$form, _this$definition$form2;

          if (!((_this$definition$form = this.definition['form:optionsQuery']) != null && _this$definition$form._) || !((_this$definition$form2 = this.definition['form:optionsSource']) != null && _this$definition$form2._)) {
            throw new Error('optionsQuery and optionsSource are needed for the field dropdown. Please improve the form definition.');
          }
        }
      }

      removeButton() {
        var _this$definition$form3;

        var isMultiple = (_this$definition$form3 = this.definition['form:multiple']) == null ? void 0 : _this$definition$form3._;
        return isMultiple ? null : super.removeButton();
      }

      item(childTemplates) {
        var _this$definition$form4;

        if (childTemplates === void 0) {
          childTemplates = [];
        }

        return ((_this$definition$form4 = this.definition['form:multiple']) == null ? void 0 : _this$definition$form4._) !== true || this.index < 1 ? super.item(childTemplates) : html(_templateObject$4 || (_templateObject$4 = _taggedTemplateLiteralLoose([""])));
      }

      on(event) {
        if (['keyup', 'change'].includes(event.type)) {
          var selectedItems = event.target.options ? [...event.target.options].filter(option => option.selected) : [...event.target.parentElement.parentElement.querySelectorAll(':checked')];
          var selectedValues = selectedItems.map(option => {
            return {
              ['@' + this.jsonldKey]: option.value
            };
          });
          if (!this.parentValues[this.mainBinding]) this.parentValues[this.mainBinding] = [];
          this.parentValues[this.mainBinding].splice(0);
          this.parentValues[this.mainBinding].push(...selectedValues);
          this.dispatchChange();
        }
      }

      input() {
        var _this = this;

        return _asyncToGenerator(function* () {
          var _this$definition$form5, _this$definition$form6, _this$parentValues$_t, _this$parentValues, _this$parentValues$_t2, _this$definition$form8, _this$value, _this$definition$form9;

          if (!_this.options.length && (_this$definition$form5 = _this.definition['form:optionsQuery']) != null && _this$definition$form5._ && (_this$definition$form6 = _this.definition['form:optionsSource']) != null && _this$definition$form6._) {
            var _this$form$getAttribu, _this$definition$form7;

            var proxy = (_this$form$getAttribu = _this.form.getAttribute('proxy')) != null ? _this$form$getAttribu : '';
            var source = (_this$definition$form7 = _this.definition['form:optionsSourceType']) != null && _this$definition$form7._ ? {
              value: _this.definition['form:optionsSource']._,
              type: _this.definition['form:optionsSourceType']._
            } : _this.definition['form:optionsSource']._;
            _this.options = yield sparqlQueryToList(_this.definition['form:optionsQuery']._, source, proxy);
          }

          var selectedValues = (_this$parentValues$_t = (_this$parentValues = _this.parentValues) == null ? void 0 : (_this$parentValues$_t2 = _this$parentValues[_this.mainBinding]) == null ? void 0 : _this$parentValues$_t2.map(option => option['@' + _this.jsonldKey])) != null ? _this$parentValues$_t : [];
          var isMultiple = (_this$definition$form8 = _this.definition['form:multiple']) == null ? void 0 : _this$definition$form8._;

          var hasGroups = _this.options.every(item => item == null ? void 0 : item.group);

          var groups = hasGroups ? _this.options.map(item => item == null ? void 0 : item.group).filter(onlyUnique).sort() : [];

          var createGroup = groupName => {
            var options = _this.options.filter(option => option.group === groupName);

            return html(_templateObject2$2 || (_templateObject2$2 = _taggedTemplateLiteralLoose(["\n      <h3>", "</h3>\n      ", "\n      "])), groupName, options.map(createCheckbox));
          };

          var createCheckbox = option => {
            var _ref, _option$label$Languag, _option$label;

            return html(_templateObject3$2 || (_templateObject3$2 = _taggedTemplateLiteralLoose(["\n    <label class=\"checkbox-label\">\n      <input type=\"checkbox\" onchange=", " value=\"", "\" .checked=\"", "\" />\n      ", "\n    </label>\n    "])), event => _this.on(event), option.uri, selectedValues.includes(option.uri) ? true : null, (_ref = (_option$label$Languag = option == null ? void 0 : (_option$label = option.label) == null ? void 0 : _option$label[Language.uiLanguage]) != null ? _option$label$Languag : option == null ? void 0 : option.label) != null ? _ref : '');
          };

          return isMultiple ? hasGroups ? html(_templateObject4$2 || (_templateObject4$2 = _taggedTemplateLiteralLoose(["", ""])), groups.map(createGroup)) : html(_templateObject5$2 || (_templateObject5$2 = _taggedTemplateLiteralLoose(["", ""])), _this.options.map(createCheckbox)) : html(_templateObject6$1 || (_templateObject6$1 = _taggedTemplateLiteralLoose(["\n    <select\n      ref=", " \n      onchange=", "\n    >\n        ", "\n\n        ", "\n    </select>"])), attributesDiff(_this.attributes), event => _this.on(event), !((_this$value = _this.value) != null && _this$value._) && !((_this$definition$form9 = _this.definition['form:multiple']) != null && _this$definition$form9._) ? html(_templateObject7$1 || (_templateObject7$1 = _taggedTemplateLiteralLoose(["<option disabled selected value>", "</option>"])), _this.t(_templateObject8$1 || (_templateObject8$1 = _taggedTemplateLiteralLoose(["- Select a value -"])))) : '', _this.options.map(option => {
            var _ref2, _option$label$Languag2, _option$label2;

            return html(_templateObject9$1 || (_templateObject9$1 = _taggedTemplateLiteralLoose(["\n          <option value=\"", "\" .selected=\"", "\">\n              ", "\n            </option>\n          "])), option.uri, selectedValues.includes(option.uri) ? true : null, (_ref2 = (_option$label$Languag2 = option == null ? void 0 : (_option$label2 = option.label) == null ? void 0 : _option$label2[Language.uiLanguage]) != null ? _option$label$Languag2 : option == null ? void 0 : option.label) != null ? _ref2 : '');
          }));
        })();
      }

      addButton() {
        return html(_templateObject10$1 || (_templateObject10$1 = _taggedTemplateLiteralLoose([""])));
      }

    }

    var _templateObject$5;
    class Group extends ElementBase {
      constructor() {
        super(...arguments);

        if (!this.value) {
          this.addItem();
          this.removeItem();
        }
      }

      item(childTemplates) {
        if (childTemplates === void 0) {
          childTemplates = [];
        }

        return html(_templateObject$5 || (_templateObject$5 = _taggedTemplateLiteralLoose(["\n    <div class=\"item\">\n    ", "\n    ", "\n    </div>"])), childTemplates, this.removeButton());
      }

    }

    var SlimSelect = /*#__PURE__*/function webpackUniversalModuleDefinition(root, factory) {
      return factory();
    }(window, function () {
      return (
        /******/
        function (modules) {
          // webpackBootstrap

          /******/
          // The module cache

          /******/
          var installedModules = {};
          /******/

          /******/
          // The require function

          /******/

          function __webpack_require__(moduleId) {
            /******/

            /******/
            // Check if module is in cache

            /******/
            if (installedModules[moduleId]) {
              /******/
              return installedModules[moduleId].exports;
              /******/
            }
            /******/
            // Create a new module (and put it into the cache)

            /******/


            var module = installedModules[moduleId] = {
              /******/
              i: moduleId,

              /******/
              l: false,

              /******/
              exports: {}
              /******/

            };
            /******/

            /******/
            // Execute the module function

            /******/

            modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
            /******/

            /******/
            // Flag the module as loaded

            /******/

            module.l = true;
            /******/

            /******/
            // Return the exports of the module

            /******/

            return module.exports;
            /******/
          }
          /******/

          /******/

          /******/
          // expose the modules object (__webpack_modules__)

          /******/


          __webpack_require__.m = modules;
          /******/

          /******/
          // expose the module cache

          /******/

          __webpack_require__.c = installedModules;
          /******/

          /******/
          // define getter function for harmony exports

          /******/

          __webpack_require__.d = function (exports, name, getter) {
            /******/
            if (!__webpack_require__.o(exports, name)) {
              /******/
              Object.defineProperty(exports, name, {
                enumerable: true,
                get: getter
              });
              /******/
            }
            /******/

          };
          /******/

          /******/
          // define __esModule on exports

          /******/


          __webpack_require__.r = function (exports) {
            /******/
            if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {
              /******/
              Object.defineProperty(exports, Symbol.toStringTag, {
                value: 'Module'
              });
              /******/
            }
            /******/


            Object.defineProperty(exports, '__esModule', {
              value: true
            });
            /******/
          };
          /******/

          /******/
          // create a fake namespace object

          /******/
          // mode & 1: value is a module id, require it

          /******/
          // mode & 2: merge all properties of value into the ns

          /******/
          // mode & 4: return value when already ns object

          /******/
          // mode & 8|1: behave like require

          /******/


          __webpack_require__.t = function (value, mode) {
            /******/
            if (mode & 1) value = __webpack_require__(value);
            /******/

            if (mode & 8) return value;
            /******/

            if (mode & 4 && typeof value === 'object' && value && value.__esModule) return value;
            /******/

            var ns = Object.create(null);
            /******/

            __webpack_require__.r(ns);
            /******/


            Object.defineProperty(ns, 'default', {
              enumerable: true,
              value: value
            });
            /******/

            if (mode & 2 && typeof value != 'string') for (var key in value) {
              __webpack_require__.d(ns, key, function (key) {
                return value[key];
              }.bind(null, key));
            }
            /******/

            return ns;
            /******/
          };
          /******/

          /******/
          // getDefaultExport function for compatibility with non-harmony modules

          /******/


          __webpack_require__.n = function (module) {
            /******/
            var getter = module && module.__esModule ?
            /******/
            function getDefault() {
              return module['default'];
            } :
            /******/
            function getModuleExports() {
              return module;
            };
            /******/

            __webpack_require__.d(getter, 'a', getter);
            /******/


            return getter;
            /******/
          };
          /******/

          /******/
          // Object.prototype.hasOwnProperty.call

          /******/


          __webpack_require__.o = function (object, property) {
            return Object.prototype.hasOwnProperty.call(object, property);
          };
          /******/

          /******/
          // __webpack_public_path__

          /******/


          __webpack_require__.p = "";
          /******/

          /******/

          /******/
          // Load entry module and return exports

          /******/

          return __webpack_require__(__webpack_require__.s = 2);
          /******/
        }
        /************************************************************************/

        /******/
        ([
        /* 0 */

        /***/
        function (module, exports, __webpack_require__) {

          exports.__esModule = true;

          function hasClassInTree(element, className) {
            function hasClass(e, c) {
              if (!(!c || !e || !e.classList || !e.classList.contains(c))) {
                return e;
              }

              return null;
            }

            function parentByClass(e, c) {
              if (!e || e === document) {
                return null;
              } else if (hasClass(e, c)) {
                return e;
              } else {
                return parentByClass(e.parentNode, c);
              }
            }

            return hasClass(element, className) || parentByClass(element, className);
          }

          exports.hasClassInTree = hasClassInTree;

          function ensureElementInView(container, element) {
            var cTop = container.scrollTop + container.offsetTop;
            var cBottom = cTop + container.clientHeight;
            var eTop = element.offsetTop;
            var eBottom = eTop + element.clientHeight;

            if (eTop < cTop) {
              container.scrollTop -= cTop - eTop;
            } else if (eBottom > cBottom) {
              container.scrollTop += eBottom - cBottom;
            }
          }

          exports.ensureElementInView = ensureElementInView;

          function putContent(el, currentPosition, isOpen) {
            var height = el.offsetHeight;
            var rect = el.getBoundingClientRect();
            var elemTop = isOpen ? rect.top : rect.top - height;
            var elemBottom = isOpen ? rect.bottom : rect.bottom + height;

            if (elemTop <= 0) {
              return 'below';
            }

            if (elemBottom >= window.innerHeight) {
              return 'above';
            }

            return isOpen ? currentPosition : 'below';
          }

          exports.putContent = putContent;

          function debounce(func, wait, immediate) {
            if (wait === void 0) {
              wait = 100;
            }

            if (immediate === void 0) {
              immediate = false;
            }

            var timeout;
            return function () {
              var args = [];

              for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
              }

              var context = self;

              var later = function later() {
                timeout = null;

                if (!immediate) {
                  func.apply(context, args);
                }
              };

              var callNow = immediate && !timeout;
              clearTimeout(timeout);
              timeout = setTimeout(later, wait);

              if (callNow) {
                func.apply(context, args);
              }
            };
          }

          exports.debounce = debounce;

          function isValueInArrayOfObjects(selected, key, value) {
            if (!Array.isArray(selected)) {
              return selected[key] === value;
            }

            for (var _i = 0, selected_1 = selected; _i < selected_1.length; _i++) {
              var s = selected_1[_i];

              if (s && s[key] && s[key] === value) {
                return true;
              }
            }

            return false;
          }

          exports.isValueInArrayOfObjects = isValueInArrayOfObjects;

          function highlight(str, search, className) {
            var completedString = str;
            var regex = new RegExp('(' + search.trim() + ')(?![^<]*>[^<>]*</)', 'i');

            if (!str.match(regex)) {
              return str;
            }

            var matchStartPosition = str.match(regex).index;
            var matchEndPosition = matchStartPosition + str.match(regex)[0].toString().length;
            var originalTextFoundByRegex = str.substring(matchStartPosition, matchEndPosition);
            completedString = completedString.replace(regex, "<mark class=\"" + className + "\">" + originalTextFoundByRegex + "</mark>");
            return completedString;
          }

          exports.highlight = highlight;

          function kebabCase(str) {
            var result = str.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g, function (match) {
              return '-' + match.toLowerCase();
            });
            return str[0] === str[0].toUpperCase() ? result.substring(1) : result;
          }

          exports.kebabCase = kebabCase;
          /***/

        },
        /* 1 */

        /***/
        function (module, exports, __webpack_require__) {

          exports.__esModule = true;

          var Data = function () {
            function Data(info) {
              this.contentOpen = false;
              this.contentPosition = 'below';
              this.isOnChangeEnabled = true;
              this.main = info.main;
              this.searchValue = '';
              this.data = [];
              this.filtered = null;
              this.parseSelectData();
              this.setSelectedFromSelect();
            }

            Data.prototype.newOption = function (info) {
              return {
                id: info.id ? info.id : String(Math.floor(Math.random() * 100000000)),
                value: info.value ? info.value : '',
                text: info.text ? info.text : '',
                innerHTML: info.innerHTML ? info.innerHTML : '',
                selected: info.selected ? info.selected : false,
                display: info.display !== undefined ? info.display : true,
                disabled: info.disabled ? info.disabled : false,
                placeholder: info.placeholder ? info.placeholder : false,
                "class": info["class"] ? info["class"] : undefined,
                data: info.data ? info.data : {},
                mandatory: info.mandatory ? info.mandatory : false
              };
            };

            Data.prototype.add = function (data) {
              this.data.push({
                id: String(Math.floor(Math.random() * 100000000)),
                value: data.value,
                text: data.text,
                innerHTML: '',
                selected: false,
                display: true,
                disabled: false,
                placeholder: false,
                "class": undefined,
                mandatory: data.mandatory,
                data: {}
              });
            };

            Data.prototype.parseSelectData = function () {
              this.data = [];
              var nodes = this.main.select.element.childNodes;

              for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {
                var n = nodes_1[_i];

                if (n.nodeName === 'OPTGROUP') {
                  var node = n;
                  var optgroup = {
                    label: node.label,
                    options: []
                  };
                  var options = n.childNodes;

                  for (var _a = 0, options_1 = options; _a < options_1.length; _a++) {
                    var o = options_1[_a];

                    if (o.nodeName === 'OPTION') {
                      var option = this.pullOptionData(o);
                      optgroup.options.push(option);

                      if (option.placeholder && option.text.trim() !== '') {
                        this.main.config.placeholderText = option.text;
                      }
                    }
                  }

                  this.data.push(optgroup);
                } else if (n.nodeName === 'OPTION') {
                  var option = this.pullOptionData(n);
                  this.data.push(option);

                  if (option.placeholder && option.text.trim() !== '') {
                    this.main.config.placeholderText = option.text;
                  }
                }
              }
            };

            Data.prototype.pullOptionData = function (option) {
              return {
                id: (option.dataset ? option.dataset.id : false) || String(Math.floor(Math.random() * 100000000)),
                value: option.value,
                text: option.text,
                innerHTML: option.innerHTML,
                selected: option.selected,
                disabled: option.disabled,
                placeholder: option.dataset.placeholder === 'true',
                "class": option.className,
                style: option.style.cssText,
                data: option.dataset,
                mandatory: option.dataset ? option.dataset.mandatory === 'true' : false
              };
            };

            Data.prototype.setSelectedFromSelect = function () {
              if (this.main.config.isMultiple) {
                var options = this.main.select.element.options;
                var newSelected = [];

                for (var _i = 0, options_2 = options; _i < options_2.length; _i++) {
                  var o = options_2[_i];

                  if (o.selected) {
                    var newOption = this.getObjectFromData(o.value, 'value');

                    if (newOption && newOption.id) {
                      newSelected.push(newOption.id);
                    }
                  }
                }

                this.setSelected(newSelected, 'id');
              } else {
                var element = this.main.select.element;

                if (element.selectedIndex !== -1) {
                  var option = element.options[element.selectedIndex];
                  var value = option.value;
                  this.setSelected(value, 'value');
                }
              }
            };

            Data.prototype.setSelected = function (value, type) {
              if (type === void 0) {
                type = 'id';
              }

              for (var _i = 0, _a = this.data; _i < _a.length; _i++) {
                var d = _a[_i];

                if (d.hasOwnProperty('label')) {
                  if (d.hasOwnProperty('options')) {
                    var options = d.options;

                    if (options) {
                      for (var _b = 0, options_3 = options; _b < options_3.length; _b++) {
                        var o = options_3[_b];

                        if (o.placeholder) {
                          continue;
                        }

                        o.selected = this.shouldBeSelected(o, value, type);
                      }
                    }
                  }
                } else {
                  d.selected = this.shouldBeSelected(d, value, type);
                }
              }
            };

            Data.prototype.shouldBeSelected = function (option, value, type) {
              if (type === void 0) {
                type = 'id';
              }

              if (Array.isArray(value)) {
                for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {
                  var v = value_1[_i];

                  if (type in option && String(option[type]) === String(v)) {
                    return true;
                  }
                }
              } else {
                if (type in option && String(option[type]) === String(value)) {
                  return true;
                }
              }

              return false;
            };

            Data.prototype.getSelected = function () {
              var value = {
                text: '',
                placeholder: this.main.config.placeholderText
              };
              var values = [];

              for (var _i = 0, _a = this.data; _i < _a.length; _i++) {
                var d = _a[_i];

                if (d.hasOwnProperty('label')) {
                  if (d.hasOwnProperty('options')) {
                    var options = d.options;

                    if (options) {
                      for (var _b = 0, options_4 = options; _b < options_4.length; _b++) {
                        var o = options_4[_b];

                        if (o.selected) {
                          if (!this.main.config.isMultiple) {
                            value = o;
                          } else {
                            values.push(o);
                          }
                        }
                      }
                    }
                  }
                } else {
                  if (d.selected) {
                    if (!this.main.config.isMultiple) {
                      value = d;
                    } else {
                      values.push(d);
                    }
                  }
                }
              }

              if (this.main.config.isMultiple) {
                return values;
              }

              return value;
            };

            Data.prototype.addToSelected = function (value, type) {
              if (type === void 0) {
                type = 'id';
              }

              if (this.main.config.isMultiple) {
                var values = [];
                var selected = this.getSelected();

                if (Array.isArray(selected)) {
                  for (var _i = 0, selected_1 = selected; _i < selected_1.length; _i++) {
                    var s = selected_1[_i];
                    values.push(s[type]);
                  }
                }

                values.push(value);
                this.setSelected(values, type);
              }
            };

            Data.prototype.removeFromSelected = function (value, type) {
              if (type === void 0) {
                type = 'id';
              }

              if (this.main.config.isMultiple) {
                var values = [];
                var selected = this.getSelected();

                for (var _i = 0, selected_2 = selected; _i < selected_2.length; _i++) {
                  var s = selected_2[_i];

                  if (String(s[type]) !== String(value)) {
                    values.push(s[type]);
                  }
                }

                this.setSelected(values, type);
              }
            };

            Data.prototype.onDataChange = function () {
              if (this.main.onChange && this.isOnChangeEnabled) {
                this.main.onChange(JSON.parse(JSON.stringify(this.getSelected())));
              }
            };

            Data.prototype.getObjectFromData = function (value, type) {
              if (type === void 0) {
                type = 'id';
              }

              for (var _i = 0, _a = this.data; _i < _a.length; _i++) {
                var d = _a[_i];

                if (type in d && String(d[type]) === String(value)) {
                  return d;
                }

                if (d.hasOwnProperty('options')) {
                  var optgroupObject = d;

                  if (optgroupObject.options) {
                    for (var _b = 0, _c = optgroupObject.options; _b < _c.length; _b++) {
                      var oo = _c[_b];

                      if (String(oo[type]) === String(value)) {
                        return oo;
                      }
                    }
                  }
                }
              }

              return null;
            };

            Data.prototype.search = function (search) {
              this.searchValue = search;

              if (search.trim() === '') {
                this.filtered = null;
                return;
              }

              var searchFilter = this.main.config.searchFilter;
              var valuesArray = this.data.slice(0);
              search = search.trim();
              var filtered = valuesArray.map(function (obj) {
                if (obj.hasOwnProperty('options')) {
                  var optgroupObj = obj;
                  var options = [];

                  if (optgroupObj.options) {
                    options = optgroupObj.options.filter(function (opt) {
                      return searchFilter(opt, search);
                    });
                  }

                  if (options.length !== 0) {
                    var optgroup = Object.assign({}, optgroupObj);
                    optgroup.options = options;
                    return optgroup;
                  }
                }

                if (obj.hasOwnProperty('text')) {
                  var optionObj = obj;

                  if (searchFilter(optionObj, search)) {
                    return obj;
                  }
                }

                return null;
              });
              this.filtered = filtered.filter(function (info) {
                return info;
              });
            };

            return Data;
          }();

          exports.Data = Data;

          function validateData(data) {
            if (!data) {
              console.error('Data must be an array of objects');
              return false;
            }

            var isValid = false;
            var errorCount = 0;

            for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {
              var d = data_1[_i];

              if (d.hasOwnProperty('label')) {
                if (d.hasOwnProperty('options')) {
                  var optgroup = d;
                  var options = optgroup.options;

                  if (options) {
                    for (var _a = 0, options_5 = options; _a < options_5.length; _a++) {
                      var o = options_5[_a];
                      isValid = validateOption(o);

                      if (!isValid) {
                        errorCount++;
                      }
                    }
                  }
                }
              } else {
                var option = d;
                isValid = validateOption(option);

                if (!isValid) {
                  errorCount++;
                }
              }
            }

            return errorCount === 0;
          }

          exports.validateData = validateData;

          function validateOption(option) {
            if (option.text === undefined) {
              console.error('Data object option must have at least have a text value. Check object: ' + JSON.stringify(option));
              return false;
            }

            return true;
          }

          exports.validateOption = validateOption;
          /***/
        },
        /* 2 */

        /***/
        function (module, exports, __webpack_require__) {

          exports.__esModule = true;

          var config_1 = __webpack_require__(3);

          var select_1 = __webpack_require__(4);

          var slim_1 = __webpack_require__(5);

          var data_1 = __webpack_require__(1);

          var helper_1 = __webpack_require__(0);

          var SlimSelect = function () {
            function SlimSelect(info) {
              var _this = this;

              this.ajax = null;
              this.addable = null;
              this.beforeOnChange = null;
              this.onChange = null;
              this.addedData = [];
              this.beforeOpen = null;
              this.afterOpen = null;
              this.beforeClose = null;
              this.afterClose = null;
              this.windowScroll = helper_1.debounce(function (e) {
                if (_this.data.contentOpen) {
                  if (helper_1.putContent(_this.slim.content, _this.data.contentPosition, _this.data.contentOpen) === 'above') {
                    _this.moveContentAbove();
                  } else {
                    _this.moveContentBelow();
                  }
                }
              });

              this.documentClick = function (e) {
                if (e.target && !helper_1.hasClassInTree(e.target, _this.config.id)) {
                  _this.close();
                }
              };

              var selectElement = this.validate(info);

              if (selectElement.dataset.ssid) {
                this.destroy(selectElement.dataset.ssid);
              }

              if (info.ajax) {
                this.ajax = info.ajax;
              }

              if (info.addable) {
                this.addable = info.addable;
              }

              this.config = new config_1.Config({
                select: selectElement,
                isAjax: info.ajax ? true : false,
                showSearch: info.showSearch,
                searchPlaceholder: info.searchPlaceholder,
                searchText: info.searchText,
                searchingText: info.searchingText,
                searchFocus: info.searchFocus,
                searchHighlight: info.searchHighlight,
                searchFilter: info.searchFilter,
                closeOnSelect: info.closeOnSelect,
                showContent: info.showContent,
                placeholderText: info.placeholder,
                allowDeselect: info.allowDeselect,
                allowDeselectOption: info.allowDeselectOption,
                hideSelectedOption: info.hideSelectedOption,
                deselectLabel: info.deselectLabel,
                isEnabled: info.isEnabled,
                valuesUseText: info.valuesUseText,
                showOptionTooltips: info.showOptionTooltips,
                selectByGroup: info.selectByGroup,
                limit: info.limit,
                timeoutDelay: info.timeoutDelay,
                addToBody: info.addToBody
              });
              this.select = new select_1.Select({
                select: selectElement,
                main: this
              });
              this.data = new data_1.Data({
                main: this
              });
              this.slim = new slim_1.Slim({
                main: this
              });

              if (this.select.element.parentNode) {
                this.select.element.parentNode.insertBefore(this.slim.container, this.select.element.nextSibling);
              }

              if (info.data) {
                this.setData(info.data);
              } else {
                this.render();
              }

              document.addEventListener('click', this.documentClick);

              if (this.config.showContent === 'auto') {
                window.addEventListener('scroll', this.windowScroll, false);
              }

              if (info.beforeOnChange) {
                this.beforeOnChange = info.beforeOnChange;
              }

              if (info.onChange) {
                this.onChange = info.onChange;
              }

              if (info.beforeOpen) {
                this.beforeOpen = info.beforeOpen;
              }

              if (info.afterOpen) {
                this.afterOpen = info.afterOpen;
              }

              if (info.beforeClose) {
                this.beforeClose = info.beforeClose;
              }

              if (info.afterClose) {
                this.afterClose = info.afterClose;
              }

              if (!this.config.isEnabled) {
                this.disable();
              }
            }

            SlimSelect.prototype.validate = function (info) {
              var select = typeof info.select === 'string' ? document.querySelector(info.select) : info.select;

              if (!select) {
                throw new Error('Could not find select element');
              }

              if (select.tagName !== 'SELECT') {
                throw new Error('Element isnt of type select');
              }

              return select;
            };

            SlimSelect.prototype.selected = function () {
              if (this.config.isMultiple) {
                var selected = this.data.getSelected();
                var outputSelected = [];

                for (var _i = 0, selected_1 = selected; _i < selected_1.length; _i++) {
                  var s = selected_1[_i];
                  outputSelected.push(s.value);
                }

                return outputSelected;
              } else {
                var selected = this.data.getSelected();
                return selected ? selected.value : '';
              }
            };

            SlimSelect.prototype.set = function (value, type, close, render) {
              if (type === void 0) {
                type = 'value';
              }

              if (close === void 0) {
                close = true;
              }

              if (this.config.isMultiple && !Array.isArray(value)) {
                this.data.addToSelected(value, type);
              } else {
                this.data.setSelected(value, type);
              }

              this.select.setValue();
              this.data.onDataChange();
              this.render();

              if (close) {
                this.close();
              }
            };

            SlimSelect.prototype.setSelected = function (value, type, close, render) {
              if (type === void 0) {
                type = 'value';
              }

              if (close === void 0) {
                close = true;
              }

              if (render === void 0) {
                render = true;
              }

              this.set(value, type, close, render);
            };

            SlimSelect.prototype.setData = function (data) {
              var isValid = data_1.validateData(data);

              if (!isValid) {
                console.error('Validation problem on: #' + this.select.element.id);
                return;
              }

              var newData = JSON.parse(JSON.stringify(data));
              var selected = this.data.getSelected();

              for (var i = 0; i < newData.length; i++) {
                if (!newData[i].value && !newData[i].placeholder) {
                  newData[i].value = newData[i].text;
                }
              }

              if (this.config.isAjax && selected) {
                if (this.config.isMultiple) {
                  var reverseSelected = selected.reverse();

                  for (var _i = 0, reverseSelected_1 = reverseSelected; _i < reverseSelected_1.length; _i++) {
                    var r = reverseSelected_1[_i];
                    newData.unshift(r);
                  }
                } else {
                  newData.unshift(selected);

                  for (var i = 0; i < newData.length; i++) {
                    if (!newData[i].placeholder && newData[i].value === selected.value && newData[i].text === selected.text) {
                      delete newData[i];
                    }
                  }

                  var hasPlaceholder = false;

                  for (var i = 0; i < newData.length; i++) {
                    if (newData[i].placeholder) {
                      hasPlaceholder = true;
                    }
                  }

                  if (!hasPlaceholder) {
                    newData.unshift({
                      text: '',
                      placeholder: true
                    });
                  }
                }
              }

              this.select.create(newData);
              this.data.parseSelectData();
              this.data.setSelectedFromSelect();
            };

            SlimSelect.prototype.addData = function (data) {
              this.addedData.push(data);
              var isValid = data_1.validateData([data]);

              if (!isValid) {
                console.error('Validation problem on: #' + this.select.element.id);
                return;
              }

              this.data.add(this.data.newOption(data));
              this.select.create(this.data.data);
              this.data.parseSelectData();
              this.data.setSelectedFromSelect();
              this.render();
            };

            SlimSelect.prototype.open = function () {
              var _this = this;

              if (!this.config.isEnabled) {
                return;
              }

              if (this.data.contentOpen) {
                return;
              }

              if (this.beforeOpen) {
                this.beforeOpen();
              }

              if (this.config.isMultiple && this.slim.multiSelected) {
                this.slim.multiSelected.plus.classList.add('ss-cross');
              } else if (this.slim.singleSelected) {
                this.slim.singleSelected.arrowIcon.arrow.classList.remove('arrow-down');
                this.slim.singleSelected.arrowIcon.arrow.classList.add('arrow-up');
              }

              this.slim[this.config.isMultiple ? 'multiSelected' : 'singleSelected'].container.classList.add(this.data.contentPosition === 'above' ? this.config.openAbove : this.config.openBelow);

              if (this.config.addToBody) {
                var containerRect = this.slim.container.getBoundingClientRect();
                this.slim.content.style.top = containerRect.top + containerRect.height + window.scrollY + 'px';
                this.slim.content.style.left = containerRect.left + window.scrollX + 'px';
                this.slim.content.style.width = containerRect.width + 'px';
              }

              this.slim.content.classList.add(this.config.open);

              if (this.config.showContent.toLowerCase() === 'up') {
                this.moveContentAbove();
              } else if (this.config.showContent.toLowerCase() === 'down') {
                this.moveContentBelow();
              } else {
                if (helper_1.putContent(this.slim.content, this.data.contentPosition, this.data.contentOpen) === 'above') {
                  this.moveContentAbove();
                } else {
                  this.moveContentBelow();
                }
              }

              if (!this.config.isMultiple) {
                var selected = this.data.getSelected();

                if (selected) {
                  var selectedId = selected.id;
                  var selectedOption = this.slim.list.querySelector('[data-id="' + selectedId + '"]');

                  if (selectedOption) {
                    helper_1.ensureElementInView(this.slim.list, selectedOption);
                  }
                }
              }

              setTimeout(function () {
                _this.data.contentOpen = true;

                if (_this.config.searchFocus) {
                  _this.slim.search.input.focus();
                }

                if (_this.afterOpen) {
                  _this.afterOpen();
                }
              }, this.config.timeoutDelay);
            };

            SlimSelect.prototype.close = function () {
              var _this = this;

              if (!this.data.contentOpen) {
                return;
              }

              if (this.beforeClose) {
                this.beforeClose();
              }

              if (this.config.isMultiple && this.slim.multiSelected) {
                this.slim.multiSelected.container.classList.remove(this.config.openAbove);
                this.slim.multiSelected.container.classList.remove(this.config.openBelow);
                this.slim.multiSelected.plus.classList.remove('ss-cross');
              } else if (this.slim.singleSelected) {
                this.slim.singleSelected.container.classList.remove(this.config.openAbove);
                this.slim.singleSelected.container.classList.remove(this.config.openBelow);
                this.slim.singleSelected.arrowIcon.arrow.classList.add('arrow-down');
                this.slim.singleSelected.arrowIcon.arrow.classList.remove('arrow-up');
              }

              this.slim.content.classList.remove(this.config.open);
              this.data.contentOpen = false;
              this.search('');
              setTimeout(function () {
                _this.slim.content.removeAttribute('style');

                _this.data.contentPosition = 'below';

                if (_this.config.isMultiple && _this.slim.multiSelected) {
                  _this.slim.multiSelected.container.classList.remove(_this.config.openAbove);

                  _this.slim.multiSelected.container.classList.remove(_this.config.openBelow);
                } else if (_this.slim.singleSelected) {
                  _this.slim.singleSelected.container.classList.remove(_this.config.openAbove);

                  _this.slim.singleSelected.container.classList.remove(_this.config.openBelow);
                }

                _this.slim.search.input.blur();

                if (_this.afterClose) {
                  _this.afterClose();
                }
              }, this.config.timeoutDelay);
            };

            SlimSelect.prototype.moveContentAbove = function () {
              var selectHeight = 0;

              if (this.config.isMultiple && this.slim.multiSelected) {
                selectHeight = this.slim.multiSelected.container.offsetHeight;
              } else if (this.slim.singleSelected) {
                selectHeight = this.slim.singleSelected.container.offsetHeight;
              }

              var contentHeight = this.slim.content.offsetHeight;
              var height = selectHeight + contentHeight - 1;
              this.slim.content.style.margin = '-' + height + 'px 0 0 0';
              this.slim.content.style.height = height - selectHeight + 1 + 'px';
              this.slim.content.style.transformOrigin = 'center bottom';
              this.data.contentPosition = 'above';

              if (this.config.isMultiple && this.slim.multiSelected) {
                this.slim.multiSelected.container.classList.remove(this.config.openBelow);
                this.slim.multiSelected.container.classList.add(this.config.openAbove);
              } else if (this.slim.singleSelected) {
                this.slim.singleSelected.container.classList.remove(this.config.openBelow);
                this.slim.singleSelected.container.classList.add(this.config.openAbove);
              }
            };

            SlimSelect.prototype.moveContentBelow = function () {
              this.data.contentPosition = 'below';

              if (this.config.isMultiple && this.slim.multiSelected) {
                this.slim.multiSelected.container.classList.remove(this.config.openAbove);
                this.slim.multiSelected.container.classList.add(this.config.openBelow);
              } else if (this.slim.singleSelected) {
                this.slim.singleSelected.container.classList.remove(this.config.openAbove);
                this.slim.singleSelected.container.classList.add(this.config.openBelow);
              }
            };

            SlimSelect.prototype.enable = function () {
              this.config.isEnabled = true;

              if (this.config.isMultiple && this.slim.multiSelected) {
                this.slim.multiSelected.container.classList.remove(this.config.disabled);
              } else if (this.slim.singleSelected) {
                this.slim.singleSelected.container.classList.remove(this.config.disabled);
              }

              this.select.triggerMutationObserver = false;
              this.select.element.disabled = false;
              this.slim.search.input.disabled = false;
              this.select.triggerMutationObserver = true;
            };

            SlimSelect.prototype.disable = function () {
              this.config.isEnabled = false;

              if (this.config.isMultiple && this.slim.multiSelected) {
                this.slim.multiSelected.container.classList.add(this.config.disabled);
              } else if (this.slim.singleSelected) {
                this.slim.singleSelected.container.classList.add(this.config.disabled);
              }

              this.select.triggerMutationObserver = false;
              this.select.element.disabled = true;
              this.slim.search.input.disabled = true;
              this.select.triggerMutationObserver = true;
            };

            SlimSelect.prototype.search = function (value) {
              if (this.data.searchValue === value) {
                return;
              }

              this.slim.search.input.value = value;

              if (this.config.isAjax) {
                var master_1 = this;
                this.config.isSearching = true;
                this.render();

                if (this.ajax) {
                  this.ajax(value, function (info) {
                    master_1.config.isSearching = false;

                    if (Array.isArray(info)) {
                      info.unshift({
                        text: '',
                        placeholder: true
                      });

                      for (var newItem of master_1.addedData) {
                        if (!info.includes(newItem)) {
                          info.push(newItem);
                        }
                      }

                      master_1.setData(info);
                      master_1.data.search(value);
                      master_1.render();
                    } else if (typeof info === 'string') {
                      master_1.slim.options(info);
                    } else {
                      master_1.render();
                    }
                  });
                }
              } else {
                this.data.search(value);
                this.render();
              }
            };

            SlimSelect.prototype.setSearchText = function (text) {
              this.config.searchText = text;
            };

            SlimSelect.prototype.render = function () {
              if (this.config.isMultiple) {
                this.slim.values();
              } else {
                this.slim.placeholder();
                this.slim.deselect();
              }

              this.slim.options();
            };

            SlimSelect.prototype.destroy = function (id) {
              if (id === void 0) {
                id = null;
              }

              var slim = id ? document.querySelector('.' + id + '.ss-main') : this.slim.container;
              var select = id ? document.querySelector("[data-ssid=" + id + "]") : this.select.element;

              if (!slim || !select) {
                return;
              }

              document.removeEventListener('click', this.documentClick);

              if (this.config.showContent === 'auto') {
                window.removeEventListener('scroll', this.windowScroll, false);
              }

              select.style.display = '';
              delete select.dataset.ssid;
              var el = select;
              el.slim = null;

              if (slim.parentElement) {
                slim.parentElement.removeChild(slim);
              }

              if (this.config.addToBody) {
                var slimContent = id ? document.querySelector('.' + id + '.ss-content') : this.slim.content;

                if (!slimContent) {
                  return;
                }

                document.body.removeChild(slimContent);
              }
            };

            return SlimSelect;
          }();

          exports["default"] = SlimSelect;
          /***/
        },
        /* 3 */

        /***/
        function (module, exports, __webpack_require__) {

          exports.__esModule = true;

          var Config = function () {
            function Config(info) {
              this.id = '';
              this.isMultiple = false;
              this.isAjax = false;
              this.isSearching = false;
              this.showSearch = true;
              this.searchFocus = true;
              this.searchHighlight = false;
              this.closeOnSelect = true;
              this.showContent = 'auto';
              this.searchPlaceholder = 'Search';
              this.searchText = 'No Results';
              this.searchingText = 'Searching...';
              this.placeholderText = 'Select Value';
              this.allowDeselect = false;
              this.allowDeselectOption = false;
              this.hideSelectedOption = false;
              this.deselectLabel = 'x';
              this.isEnabled = true;
              this.valuesUseText = false;
              this.showOptionTooltips = false;
              this.selectByGroup = false;
              this.limit = 0;
              this.timeoutDelay = 200;
              this.addToBody = false;
              this.main = 'ss-main';
              this.singleSelected = 'ss-single-selected';
              this.arrow = 'ss-arrow';
              this.multiSelected = 'ss-multi-selected';
              this.add = 'ss-add';
              this.plus = 'ss-plus';
              this.values = 'ss-values';
              this.value = 'ss-value';
              this.valueText = 'ss-value-text';
              this.valueDelete = 'ss-value-delete';
              this.content = 'ss-content';
              this.open = 'ss-open';
              this.openAbove = 'ss-open-above';
              this.openBelow = 'ss-open-below';
              this.search = 'ss-search';
              this.searchHighlighter = 'ss-search-highlight';
              this.addable = 'ss-addable';
              this.list = 'ss-list';
              this.optgroup = 'ss-optgroup';
              this.optgroupLabel = 'ss-optgroup-label';
              this.optgroupLabelSelectable = 'ss-optgroup-label-selectable';
              this.option = 'ss-option';
              this.optionSelected = 'ss-option-selected';
              this.highlighted = 'ss-highlighted';
              this.disabled = 'ss-disabled';
              this.hide = 'ss-hide';
              this.id = 'ss-' + Math.floor(Math.random() * 100000);
              this.style = info.select.style.cssText;
              this["class"] = info.select.className.split(' ');
              this.isMultiple = info.select.multiple;
              this.isAjax = info.isAjax;
              this.showSearch = info.showSearch === false ? false : true;
              this.searchFocus = info.searchFocus === false ? false : true;
              this.searchHighlight = info.searchHighlight === true ? true : false;
              this.closeOnSelect = info.closeOnSelect === false ? false : true;

              if (info.showContent) {
                this.showContent = info.showContent;
              }

              this.isEnabled = info.isEnabled === false ? false : true;

              if (info.searchPlaceholder) {
                this.searchPlaceholder = info.searchPlaceholder;
              }

              if (info.searchText) {
                this.searchText = info.searchText;
              }

              if (info.searchingText) {
                this.searchingText = info.searchingText;
              }

              if (info.placeholderText) {
                this.placeholderText = info.placeholderText;
              }

              this.allowDeselect = info.allowDeselect === true ? true : false;
              this.allowDeselectOption = info.allowDeselectOption === true ? true : false;
              this.hideSelectedOption = info.hideSelectedOption === true ? true : false;

              if (info.deselectLabel) {
                this.deselectLabel = info.deselectLabel;
              }

              if (info.valuesUseText) {
                this.valuesUseText = info.valuesUseText;
              }

              if (info.showOptionTooltips) {
                this.showOptionTooltips = info.showOptionTooltips;
              }

              if (info.selectByGroup) {
                this.selectByGroup = info.selectByGroup;
              }

              if (info.limit) {
                this.limit = info.limit;
              }

              if (info.searchFilter) {
                this.searchFilter = info.searchFilter;
              }

              if (info.timeoutDelay != null) {
                this.timeoutDelay = info.timeoutDelay;
              }

              this.addToBody = info.addToBody === true ? true : false;
            }

            Config.prototype.searchFilter = function (opt, search) {
              return opt.text.toLowerCase().indexOf(search.toLowerCase()) !== -1;
            };

            return Config;
          }();

          exports.Config = Config;
          /***/
        },
        /* 4 */

        /***/
        function (module, exports, __webpack_require__) {

          exports.__esModule = true;

          var helper_1 = __webpack_require__(0);

          var Select = function () {
            function Select(info) {
              this.triggerMutationObserver = true;
              this.element = info.select;
              this.main = info.main;

              if (this.element.disabled) {
                this.main.config.isEnabled = false;
              }

              this.addAttributes();
              this.addEventListeners();
              this.mutationObserver = null;
              this.addMutationObserver();
              var el = this.element;
              el.slim = info.main;
            }

            Select.prototype.setValue = function () {
              if (!this.main.data.getSelected()) {
                return;
              }

              if (this.main.config.isMultiple) {
                var selected = this.main.data.getSelected();
                var options = this.element.options;

                for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {
                  var o = options_1[_i];
                  o.selected = false;

                  for (var _a = 0, selected_1 = selected; _a < selected_1.length; _a++) {
                    var s = selected_1[_a];

                    if (s.value === o.value) {
                      o.selected = true;
                    }
                  }
                }
              } else {
                var selected = this.main.data.getSelected();
                this.element.value = selected ? selected.value : '';
              }

              this.main.data.isOnChangeEnabled = false;
              this.element.dispatchEvent(new CustomEvent('change', {
                bubbles: true
              }));
              this.main.data.isOnChangeEnabled = true;
            };

            Select.prototype.addAttributes = function () {
              this.element.tabIndex = -1;
              this.element.style.display = 'none';
              this.element.dataset.ssid = this.main.config.id;
            };

            Select.prototype.addEventListeners = function () {
              var _this = this;

              this.element.addEventListener('change', function (e) {
                _this.main.data.setSelectedFromSelect();

                _this.main.render();
              });
            };

            Select.prototype.addMutationObserver = function () {
              var _this = this;

              if (this.main.config.isAjax) {
                return;
              }

              this.mutationObserver = new MutationObserver(function (mutations) {
                if (!_this.triggerMutationObserver) {
                  return;
                }

                _this.main.data.parseSelectData();

                _this.main.data.setSelectedFromSelect();

                _this.main.render();

                mutations.forEach(function (mutation) {
                  if (mutation.attributeName === 'class') {
                    _this.main.slim.updateContainerDivClass(_this.main.slim.container);
                  }
                });
              });
              this.observeMutationObserver();
            };

            Select.prototype.observeMutationObserver = function () {
              if (!this.mutationObserver) {
                return;
              }

              this.mutationObserver.observe(this.element, {
                attributes: true,
                childList: true,
                characterData: true
              });
            };

            Select.prototype.disconnectMutationObserver = function () {
              if (this.mutationObserver) {
                this.mutationObserver.disconnect();
              }
            };

            Select.prototype.create = function (data) {
              this.element.innerHTML = '';

              for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {
                var d = data_1[_i];

                if (d.hasOwnProperty('options')) {
                  var optgroupObject = d;
                  var optgroupEl = document.createElement('optgroup');
                  optgroupEl.label = optgroupObject.label;

                  if (optgroupObject.options) {
                    for (var _a = 0, _b = optgroupObject.options; _a < _b.length; _a++) {
                      var oo = _b[_a];
                      optgroupEl.appendChild(this.createOption(oo));
                    }
                  }

                  this.element.appendChild(optgroupEl);
                } else {
                  this.element.appendChild(this.createOption(d));
                }
              }
            };

            Select.prototype.createOption = function (info) {
              var optionEl = document.createElement('option');
              optionEl.value = info.value !== '' ? info.value : info.text;
              optionEl.innerHTML = info.innerHTML || info.text;

              if (info.selected) {
                optionEl.selected = info.selected;
              }

              if (info.display === false) {
                optionEl.style.display = 'none';
              }

              if (info.disabled) {
                optionEl.disabled = true;
              }

              if (info.placeholder) {
                optionEl.setAttribute('data-placeholder', 'true');
              }

              if (info.mandatory) {
                optionEl.setAttribute('data-mandatory', 'true');
              }

              if (info["class"]) {
                info["class"].split(' ').forEach(function (optionClass) {
                  optionEl.classList.add(optionClass);
                });
              }

              if (info.data && typeof info.data === 'object') {
                Object.keys(info.data).forEach(function (key) {
                  optionEl.setAttribute('data-' + helper_1.kebabCase(key), info.data[key]);
                });
              }

              return optionEl;
            };

            return Select;
          }();

          exports.Select = Select;
          /***/
        },
        /* 5 */

        /***/
        function (module, exports, __webpack_require__) {

          exports.__esModule = true;

          var helper_1 = __webpack_require__(0);

          var data_1 = __webpack_require__(1);

          var Slim = function () {
            function Slim(info) {
              this.main = info.main;
              this.container = this.containerDiv();
              this.content = this.contentDiv();
              this.search = this.searchDiv();
              this.list = this.listDiv();
              this.options();
              this.singleSelected = null;
              this.multiSelected = null;

              if (this.main.config.isMultiple) {
                this.multiSelected = this.multiSelectedDiv();

                if (this.multiSelected) {
                  this.container.appendChild(this.multiSelected.container);
                }
              } else {
                this.singleSelected = this.singleSelectedDiv();
                this.container.appendChild(this.singleSelected.container);
              }

              if (this.main.config.addToBody) {
                this.content.classList.add(this.main.config.id);
                document.body.appendChild(this.content);
              } else {
                this.container.appendChild(this.content);
              }

              this.content.appendChild(this.search.container);
              this.content.appendChild(this.list);
            }

            Slim.prototype.containerDiv = function () {
              var container = document.createElement('div');
              container.style.cssText = this.main.config.style;
              this.updateContainerDivClass(container);
              return container;
            };

            Slim.prototype.updateContainerDivClass = function (container) {
              this.main.config["class"] = this.main.select.element.className.split(' ');
              container.className = '';
              container.classList.add(this.main.config.id);
              container.classList.add(this.main.config.main);

              for (var _i = 0, _a = this.main.config["class"]; _i < _a.length; _i++) {
                var c = _a[_i];

                if (c.trim() !== '') {
                  container.classList.add(c);
                }
              }
            };

            Slim.prototype.singleSelectedDiv = function () {
              var _this = this;

              var container = document.createElement('div');
              container.classList.add(this.main.config.singleSelected);
              var placeholder = document.createElement('span');
              placeholder.classList.add('placeholder');
              container.appendChild(placeholder);
              var deselect = document.createElement('span');
              deselect.innerHTML = this.main.config.deselectLabel;
              deselect.classList.add('ss-deselect');

              deselect.onclick = function (e) {
                e.stopPropagation();

                if (!_this.main.config.isEnabled) {
                  return;
                }

                _this.main.set('');
              };

              container.appendChild(deselect);
              var arrowContainer = document.createElement('span');
              arrowContainer.classList.add(this.main.config.arrow);
              var arrowIcon = document.createElement('span');
              arrowIcon.classList.add('arrow-down');
              arrowContainer.appendChild(arrowIcon);
              container.appendChild(arrowContainer);

              container.onclick = function () {
                if (!_this.main.config.isEnabled) {
                  return;
                }

                _this.main.data.contentOpen ? _this.main.close() : _this.main.open();
              };

              return {
                container: container,
                placeholder: placeholder,
                deselect: deselect,
                arrowIcon: {
                  container: arrowContainer,
                  arrow: arrowIcon
                }
              };
            };

            Slim.prototype.placeholder = function () {
              var selected = this.main.data.getSelected();

              if (selected === null || selected && selected.placeholder) {
                var placeholder = document.createElement('span');
                placeholder.classList.add(this.main.config.disabled);
                placeholder.innerHTML = this.main.config.placeholderText;

                if (this.singleSelected) {
                  this.singleSelected.placeholder.innerHTML = placeholder.outerHTML;
                }
              } else {
                var selectedValue = '';

                if (selected) {
                  selectedValue = selected.innerHTML && this.main.config.valuesUseText !== true ? selected.innerHTML : selected.text;
                }

                if (this.singleSelected) {
                  this.singleSelected.placeholder.innerHTML = selected ? selectedValue : '';
                }
              }
            };

            Slim.prototype.deselect = function () {
              if (this.singleSelected) {
                if (!this.main.config.allowDeselect) {
                  this.singleSelected.deselect.classList.add('ss-hide');
                  return;
                }

                if (this.main.selected() === '') {
                  this.singleSelected.deselect.classList.add('ss-hide');
                } else {
                  this.singleSelected.deselect.classList.remove('ss-hide');
                }
              }
            };

            Slim.prototype.multiSelectedDiv = function () {
              var _this = this;

              var container = document.createElement('div');
              container.classList.add(this.main.config.multiSelected);
              var values = document.createElement('div');
              values.classList.add(this.main.config.values);
              container.appendChild(values);
              var add = document.createElement('div');
              add.classList.add(this.main.config.add);
              var plus = document.createElement('span');
              plus.classList.add(this.main.config.plus);

              plus.onclick = function (e) {
                if (_this.main.data.contentOpen) {
                  _this.main.close();

                  e.stopPropagation();
                }
              };

              add.appendChild(plus);
              container.appendChild(add);

              container.onclick = function (e) {
                if (!_this.main.config.isEnabled) {
                  return;
                }

                var target = e.target;

                if (!target.classList.contains(_this.main.config.valueDelete)) {
                  _this.main.data.contentOpen ? _this.main.close() : _this.main.open();
                }
              };

              return {
                container: container,
                values: values,
                add: add,
                plus: plus
              };
            };

            Slim.prototype.values = function () {
              if (!this.multiSelected) {
                return;
              }

              var currentNodes = this.multiSelected.values.childNodes;
              var selected = this.main.data.getSelected();
              var exists;
              var nodesToRemove = [];

              for (var _i = 0, currentNodes_1 = currentNodes; _i < currentNodes_1.length; _i++) {
                var c = currentNodes_1[_i];
                exists = true;

                for (var _a = 0, selected_1 = selected; _a < selected_1.length; _a++) {
                  var s = selected_1[_a];

                  if (String(s.id) === String(c.dataset.id)) {
                    exists = false;
                  }
                }

                if (exists) {
                  nodesToRemove.push(c);
                }
              }

              for (var _b = 0, nodesToRemove_1 = nodesToRemove; _b < nodesToRemove_1.length; _b++) {
                var n = nodesToRemove_1[_b];
                n.classList.add('ss-out');
                this.multiSelected.values.removeChild(n);
              }

              currentNodes = this.multiSelected.values.childNodes;

              for (var s = 0; s < selected.length; s++) {
                exists = false;

                for (var _c = 0, currentNodes_2 = currentNodes; _c < currentNodes_2.length; _c++) {
                  var c = currentNodes_2[_c];

                  if (String(selected[s].id) === String(c.dataset.id)) {
                    exists = true;
                  }
                }

                if (!exists) {
                  if (currentNodes.length === 0 || !HTMLElement.prototype.insertAdjacentElement) {
                    this.multiSelected.values.appendChild(this.valueDiv(selected[s]));
                  } else if (s === 0) {
                    this.multiSelected.values.insertBefore(this.valueDiv(selected[s]), currentNodes[s]);
                  } else {
                    currentNodes[s - 1].insertAdjacentElement('afterend', this.valueDiv(selected[s]));
                  }
                }
              }

              if (selected.length === 0) {
                var placeholder = document.createElement('span');
                placeholder.classList.add(this.main.config.disabled);
                placeholder.innerHTML = this.main.config.placeholderText;
                this.multiSelected.values.innerHTML = placeholder.outerHTML;
              }
            };

            Slim.prototype.valueDiv = function (optionObj) {
              var _this = this;

              var value = document.createElement('div');
              value.classList.add(this.main.config.value);
              value.dataset.id = optionObj.id;
              var text = document.createElement('span');
              text.classList.add(this.main.config.valueText);
              text.innerHTML = optionObj.innerHTML && this.main.config.valuesUseText !== true ? optionObj.innerHTML : optionObj.text;
              value.appendChild(text);

              if (!optionObj.mandatory) {
                var deleteSpan = document.createElement('span');
                deleteSpan.classList.add(this.main.config.valueDelete);
                deleteSpan.innerHTML = this.main.config.deselectLabel;

                deleteSpan.onclick = function (e) {
                  e.preventDefault();
                  e.stopPropagation();
                  var shouldUpdate = false;

                  if (!_this.main.beforeOnChange) {
                    shouldUpdate = true;
                  }

                  if (_this.main.beforeOnChange) {
                    var selected = _this.main.data.getSelected();

                    var currentValues = JSON.parse(JSON.stringify(selected));

                    for (var i = 0; i < currentValues.length; i++) {
                      if (currentValues[i].id === optionObj.id) {
                        currentValues.splice(i, 1);
                      }
                    }

                    var beforeOnchange = _this.main.beforeOnChange(currentValues);

                    if (beforeOnchange !== false) {
                      shouldUpdate = true;
                    }
                  }

                  if (shouldUpdate) {
                    _this.main.data.removeFromSelected(optionObj.id, 'id');

                    _this.main.render();

                    _this.main.select.setValue();

                    _this.main.data.onDataChange();
                  }
                };

                value.appendChild(deleteSpan);
              }

              return value;
            };

            Slim.prototype.contentDiv = function () {
              var container = document.createElement('div');
              container.classList.add(this.main.config.content);
              return container;
            };

            Slim.prototype.searchDiv = function () {
              var _this = this;

              var container = document.createElement('div');
              var input = document.createElement('input');
              var addable = document.createElement('div');
              container.classList.add(this.main.config.search);
              var searchReturn = {
                container: container,
                input: input
              };

              if (!this.main.config.showSearch) {
                container.classList.add(this.main.config.hide);
                input.readOnly = true;
              }

              input.type = 'search';
              input.placeholder = this.main.config.searchPlaceholder;
              input.tabIndex = 0;
              input.setAttribute('aria-label', this.main.config.searchPlaceholder);
              input.setAttribute('autocapitalize', 'off');
              input.setAttribute('autocomplete', 'off');
              input.setAttribute('autocorrect', 'off');

              input.onclick = function (e) {
                setTimeout(function () {
                  var target = e.target;

                  if (target.value === '') {
                    _this.main.search('');
                  }
                }, 10);
              };

              input.onkeydown = function (e) {
                if (e.key === 'ArrowUp') {
                  _this.main.open();

                  _this.highlightUp();

                  e.preventDefault();
                } else if (e.key === 'ArrowDown') {
                  _this.main.open();

                  _this.highlightDown();

                  e.preventDefault();
                } else if (e.key === 'Tab') {
                  if (!_this.main.data.contentOpen) {
                    setTimeout(function () {
                      _this.main.close();
                    }, _this.main.config.timeoutDelay);
                  } else {
                    _this.main.close();
                  }
                } else if (e.key === 'Enter') {
                  e.preventDefault();
                }
              };

              input.onkeyup = function (e) {
                var target = e.target;

                if (e.key === 'Enter') {
                  if (_this.main.addable && e.ctrlKey) {
                    addable.click();
                    e.preventDefault();
                    e.stopPropagation();
                    return;
                  }

                  var highlighted = _this.list.querySelector('.' + _this.main.config.highlighted);

                  if (highlighted) {
                    highlighted.click();
                  }
                } else if (e.key === 'ArrowUp' || e.key === 'ArrowDown') ; else if (e.key === 'Escape') {
                  _this.main.close();
                } else {
                  if (_this.main.config.showSearch && _this.main.data.contentOpen) {
                    _this.main.search(target.value);
                  } else {
                    input.value = '';
                  }
                }

                e.preventDefault();
                e.stopPropagation();
              };

              input.onfocus = function () {
                _this.main.open();
              };

              container.appendChild(input);

              if (this.main.addable) {
                addable.classList.add(this.main.config.addable);
                addable.innerHTML = '+';

                addable.onclick = function (e) {
                  if (_this.main.addable) {
                    e.preventDefault();
                    e.stopPropagation();
                    var inputValue = _this.search.input.value;

                    if (inputValue.trim() === '') {
                      _this.search.input.focus();

                      return;
                    }

                    var addableValue = _this.main.addable(inputValue);

                    var addableValueStr_1 = '';

                    if (!addableValue) {
                      return;
                    }

                    if (typeof addableValue === 'object') {
                      var validValue = data_1.validateOption(addableValue);

                      if (validValue) {
                        _this.main.addData(addableValue);

                        addableValueStr_1 = addableValue.value ? addableValue.value : addableValue.text;
                      }
                    } else {
                      _this.main.addData(_this.main.data.newOption({
                        text: addableValue,
                        value: addableValue
                      }));

                      addableValueStr_1 = addableValue;
                    }

                    _this.main.search('');

                    setTimeout(function () {
                      _this.main.set(addableValueStr_1, 'value', false, false);
                    }, 100);

                    if (_this.main.config.closeOnSelect) {
                      setTimeout(function () {
                        _this.main.close();
                      }, 100);
                    }
                  }
                };

                container.appendChild(addable);
                searchReturn.addable = addable;
              }

              return searchReturn;
            };

            Slim.prototype.highlightUp = function () {
              var highlighted = this.list.querySelector('.' + this.main.config.highlighted);
              var prev = null;

              if (highlighted) {
                prev = highlighted.previousSibling;

                while (prev !== null) {
                  if (prev.classList.contains(this.main.config.disabled)) {
                    prev = prev.previousSibling;
                    continue;
                  } else {
                    break;
                  }
                }
              } else {
                var allOptions = this.list.querySelectorAll('.' + this.main.config.option + ':not(.' + this.main.config.disabled + ')');
                prev = allOptions[allOptions.length - 1];
              }

              if (prev && prev.classList.contains(this.main.config.optgroupLabel)) {
                prev = null;
              }

              if (prev === null) {
                var parent_1 = highlighted.parentNode;

                if (parent_1.classList.contains(this.main.config.optgroup)) {
                  if (parent_1.previousSibling) {
                    var prevNodes = parent_1.previousSibling.querySelectorAll('.' + this.main.config.option + ':not(.' + this.main.config.disabled + ')');

                    if (prevNodes.length) {
                      prev = prevNodes[prevNodes.length - 1];
                    }
                  }
                }
              }

              if (prev) {
                if (highlighted) {
                  highlighted.classList.remove(this.main.config.highlighted);
                }

                prev.classList.add(this.main.config.highlighted);
                helper_1.ensureElementInView(this.list, prev);
              }
            };

            Slim.prototype.highlightDown = function () {
              var highlighted = this.list.querySelector('.' + this.main.config.highlighted);
              var next = null;

              if (highlighted) {
                next = highlighted.nextSibling;

                while (next !== null) {
                  if (next.classList.contains(this.main.config.disabled)) {
                    next = next.nextSibling;
                    continue;
                  } else {
                    break;
                  }
                }
              } else {
                next = this.list.querySelector('.' + this.main.config.option + ':not(.' + this.main.config.disabled + ')');
              }

              if (next === null && highlighted !== null) {
                var parent_2 = highlighted.parentNode;

                if (parent_2.classList.contains(this.main.config.optgroup)) {
                  if (parent_2.nextSibling) {
                    var sibling = parent_2.nextSibling;
                    next = sibling.querySelector('.' + this.main.config.option + ':not(.' + this.main.config.disabled + ')');
                  }
                }
              }

              if (next) {
                if (highlighted) {
                  highlighted.classList.remove(this.main.config.highlighted);
                }

                next.classList.add(this.main.config.highlighted);
                helper_1.ensureElementInView(this.list, next);
              }
            };

            Slim.prototype.listDiv = function () {
              var list = document.createElement('div');
              list.classList.add(this.main.config.list);
              return list;
            };

            Slim.prototype.options = function (content) {
              if (content === void 0) {
                content = '';
              }

              var data = this.main.data.filtered || this.main.data.data;
              this.list.innerHTML = '';

              if (content !== '') {
                var searching = document.createElement('div');
                searching.classList.add(this.main.config.option);
                searching.classList.add(this.main.config.disabled);
                searching.innerHTML = content;
                this.list.appendChild(searching);
                return;
              }

              if (this.main.config.isAjax && this.main.config.isSearching) {
                var searching = document.createElement('div');
                searching.classList.add(this.main.config.option);
                searching.classList.add(this.main.config.disabled);
                searching.innerHTML = this.main.config.searchingText;
                this.list.appendChild(searching);
                return;
              }

              if (data.length === 0) {
                var noResults = document.createElement('div');
                noResults.classList.add(this.main.config.option);
                noResults.classList.add(this.main.config.disabled);
                noResults.innerHTML = this.main.config.searchText;
                this.list.appendChild(noResults);
                return;
              }

              var _loop_1 = function _loop_1(d) {
                if (d.hasOwnProperty('label')) {
                  var item = d;
                  var optgroupEl_1 = document.createElement('div');
                  optgroupEl_1.classList.add(this_1.main.config.optgroup);
                  var optgroupLabel = document.createElement('div');
                  optgroupLabel.classList.add(this_1.main.config.optgroupLabel);

                  if (this_1.main.config.selectByGroup && this_1.main.config.isMultiple) {
                    optgroupLabel.classList.add(this_1.main.config.optgroupLabelSelectable);
                  }

                  optgroupLabel.innerHTML = item.label;
                  optgroupEl_1.appendChild(optgroupLabel);
                  var options = item.options;

                  if (options) {
                    for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {
                      var o = options_1[_i];
                      optgroupEl_1.appendChild(this_1.option(o));
                    }

                    if (this_1.main.config.selectByGroup && this_1.main.config.isMultiple) {
                      var master_1 = this_1;
                      optgroupLabel.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();

                        for (var _i = 0, _a = optgroupEl_1.children; _i < _a.length; _i++) {
                          var childEl = _a[_i];

                          if (childEl.className.indexOf(master_1.main.config.option) !== -1) {
                            childEl.click();
                          }
                        }
                      });
                    }
                  }

                  this_1.list.appendChild(optgroupEl_1);
                } else {
                  this_1.list.appendChild(this_1.option(d));
                }
              };

              var this_1 = this;

              for (var _i = 0, data_2 = data; _i < data_2.length; _i++) {
                var d = data_2[_i];

                _loop_1(d);
              }
            };

            Slim.prototype.option = function (data) {
              if (data.placeholder) {
                var placeholder = document.createElement('div');
                placeholder.classList.add(this.main.config.option);
                placeholder.classList.add(this.main.config.hide);
                return placeholder;
              }

              var optionEl = document.createElement('div');
              optionEl.classList.add(this.main.config.option);

              if (data["class"]) {
                data["class"].split(' ').forEach(function (dataClass) {
                  optionEl.classList.add(dataClass);
                });
              }

              if (data.style) {
                optionEl.style.cssText = data.style;
              }

              var selected = this.main.data.getSelected();
              optionEl.dataset.id = data.id;

              if (this.main.config.searchHighlight && this.main.slim && data.innerHTML && this.main.slim.search.input.value.trim() !== '') {
                optionEl.innerHTML = helper_1.highlight(data.innerHTML, this.main.slim.search.input.value, this.main.config.searchHighlighter);
              } else if (data.innerHTML) {
                optionEl.innerHTML = data.innerHTML;
              }

              if (this.main.config.showOptionTooltips && optionEl.textContent) {
                optionEl.setAttribute('title', optionEl.textContent);
              }

              var master = this;
              optionEl.addEventListener('click', function (e) {
                e.preventDefault();
                e.stopPropagation();
                var element = this;
                var elementID = element.dataset.id;

                if (data.selected === true && master.main.config.allowDeselectOption) {
                  var shouldUpdate = false;

                  if (!master.main.beforeOnChange || !master.main.config.isMultiple) {
                    shouldUpdate = true;
                  }

                  if (master.main.beforeOnChange && master.main.config.isMultiple) {
                    var selectedValues = master.main.data.getSelected();
                    var currentValues = JSON.parse(JSON.stringify(selectedValues));

                    for (var i = 0; i < currentValues.length; i++) {
                      if (currentValues[i].id === elementID) {
                        currentValues.splice(i, 1);
                      }
                    }

                    var beforeOnchange = master.main.beforeOnChange(currentValues);

                    if (beforeOnchange !== false) {
                      shouldUpdate = true;
                    }
                  }

                  if (shouldUpdate) {
                    if (master.main.config.isMultiple) {
                      master.main.data.removeFromSelected(elementID, 'id');
                      master.main.render();
                      master.main.select.setValue();
                      master.main.data.onDataChange();
                    } else {
                      master.main.set('');
                    }
                  }
                } else {
                  if (data.disabled || data.selected) {
                    return;
                  }

                  if (master.main.config.limit && Array.isArray(selected) && master.main.config.limit <= selected.length) {
                    return;
                  }

                  if (master.main.beforeOnChange) {
                    var value = void 0;
                    var objectInfo = JSON.parse(JSON.stringify(master.main.data.getObjectFromData(elementID)));
                    objectInfo.selected = true;

                    if (master.main.config.isMultiple) {
                      value = JSON.parse(JSON.stringify(selected));
                      value.push(objectInfo);
                    } else {
                      value = JSON.parse(JSON.stringify(objectInfo));
                    }

                    var beforeOnchange = master.main.beforeOnChange(value);

                    if (beforeOnchange !== false) {
                      master.main.set(elementID, 'id', master.main.config.closeOnSelect);
                    }
                  } else {
                    master.main.set(elementID, 'id', master.main.config.closeOnSelect);
                  }
                }
              });
              var isSelected = selected && helper_1.isValueInArrayOfObjects(selected, 'id', data.id);

              if (data.disabled || isSelected) {
                optionEl.onclick = null;

                if (!master.main.config.allowDeselectOption) {
                  optionEl.classList.add(this.main.config.disabled);
                }

                if (master.main.config.hideSelectedOption) {
                  optionEl.classList.add(this.main.config.hide);
                }
              }

              if (isSelected) {
                optionEl.classList.add(this.main.config.optionSelected);
              } else {
                optionEl.classList.remove(this.main.config.optionSelected);
              }

              return optionEl;
            };

            return Slim;
          }();

          exports.Slim = Slim;
          /***/
        }
        /******/
        ])["default"]
      );
    });

    var _templateObject$6, _templateObject2$3, _templateObject3$3, _templateObject4$3, _templateObject5$3, _templateObject6$2, _templateObject7$2, _templateObject8$2;
    class LanguagePicker extends ElementBase {
      constructor() {
        super(...arguments);
        this.initiated = false;
        this.isDragging = false;
        this.dragX = null;
        this.newestItem = null;
      }

      itemDisplay() {
        return Object.keys(Language.l10nLanguages).length > 1 ? this.item() : html(_templateObject$6 || (_templateObject$6 = _taggedTemplateLiteralLoose([""])));
      }

      item() {
        var _this = this;

        var onChange = /*#__PURE__*/function () {
          var _ref = _asyncToGenerator(function* (event) {
            if (!_this.initiated) return;
            var selectedLanguages = event.currentTarget.slim.selected();
            Language.l10nLanguages = yield langCodesToObject(selectedLanguages);

            _this.render();
          });

          return function onChange(_x) {
            return _ref.apply(this, arguments);
          };
        }();

        return html(_templateObject2$3 || (_templateObject2$3 = _taggedTemplateLiteralLoose(["\n    <div class=\"item\">\n      <select multiple onchange=", " ref=", "></select>\n      ", "\n    </div>"])), onChange, element => this.l10nLanguagePicker(element), this.uiLanguageSwitcher());
      }

      l10nLanguagePicker(select) {
        if (select.slim) {
          this.attachEvents(select);
          return;
        }

        var initialLanguages = [...Object.entries(Language.l10nLanguages)];
        var deleteIcon = icon(faTimes).html[0];
        var slimSelect = new SlimSelect({
          select: select,
          deselectLabel: deleteIcon,
          addable: function addable(value) {
            var _prompt, _prompt2;

            var label = (_prompt = prompt(t(_templateObject3$3 || (_templateObject3$3 = _taggedTemplateLiteralLoose(["Language label"]))).toString(), value)) != null ? _prompt : '';
            var key = (_prompt2 = prompt(t(_templateObject4$3 || (_templateObject4$3 = _taggedTemplateLiteralLoose(["BCP 47"]))).toString(), value)) != null ? _prompt2 : '';
            var languageFound = languages.find(item => item[0] === key);

            if (key && label && !languageFound) {
              var newItem = {
                text: label,
                value: key,
                mandatory: Language.requiredL10nLanguages.includes(key)
              };

              if (!languages.find(item => item.join('-') === [key, label].join('-'))) {
                languages.push([key, label]);
              }

              return newItem;
            }

            if (languageFound) alert(t(_templateObject5$3 || (_templateObject5$3 = _taggedTemplateLiteralLoose(["The language key ", " is already used."])), {
              key
            }).toString());
            return false;
          },
          beforeOnChange: values => {
            var newItem = values.map(value => value.value).find(item => !Object.keys(Language.l10nLanguages).includes(item));
            Language.l10nLanguage = newItem;
          },
          ajax: function () {
            var _ajax = _asyncToGenerator(function* (search, callback) {
              var languages = yield filterLanguages(search);
              var options = languages.map(language => {
                var _Language$l10nLanguag, _Language$l10nLanguag2;

                return {
                  text: (_Language$l10nLanguag = (_Language$l10nLanguag2 = Language.l10nLanguages) == null ? void 0 : _Language$l10nLanguag2[language[0]]) != null ? _Language$l10nLanguag : language[1],
                  value: language[0]
                };
              });
              callback(options);
            });

            function ajax(_x2, _x3) {
              return _ajax.apply(this, arguments);
            }

            return ajax;
          }()
        });
        var selection = initialLanguages.map(_ref2 => {
          var _Language$l10nLanguag3;

          var [langCode, language] = _ref2;
          return {
            text: (_Language$l10nLanguag3 = Language.l10nLanguages[langCode]) != null ? _Language$l10nLanguag3 : language,
            value: langCode,
            mandatory: Language.requiredL10nLanguages.includes(langCode)
          };
        });
        slimSelect.setData([{
          'placeholder': true,
          'text': t.direct('Search for a language').toString()
        }, ...selection]);
        slimSelect.set(selection.map(option => option.value));
        this.attachEvents(select);
        this.setScrollClasses(select);
        this.initiated = true;
      }

      setScrollClasses(select) {
        var tabsWrapper = select.parentElement.querySelector('.ss-multi-selected');
        if (!tabsWrapper.scrollWidth) return;
        tabsWrapper.classList.remove('hide-left-shadow');
        tabsWrapper.classList.remove('hide-right-shadow');

        if (tabsWrapper.scrollLeft === 0) {
          tabsWrapper.classList.add('hide-left-shadow');
        }

        if (tabsWrapper.scrollWidth - 1 <= tabsWrapper.clientWidth + tabsWrapper.scrollLeft) {
          tabsWrapper.classList.add('hide-right-shadow');
        }
      }

      attachEvents(select) {
        var langCodes = [...Object.entries(Language.l10nLanguages)].map(_ref3 => {
          var [langCode] = _ref3;
          return langCode;
        });
        var tabs = [...select.parentElement.querySelectorAll('.ss-value')];
        var tabsWrapper = select.parentElement.querySelector('.ss-multi-selected');
        this.setActive(tabs, langCodes);
        if (tabsWrapper.initiated) return;
        tabsWrapper.initiated = true;
        Language.addEventListener('l10n-change', () => {
          for (var tab of tabs) {
            tab.classList.remove('active');
          }
        });
        tabsWrapper.addEventListener('mousedown', () => {
          this.isDragging = true;
          this.dragX = null;
        });
        tabsWrapper.addEventListener('scroll', () => {
          this.setScrollClasses(select);
        });
        this.setScrollClasses(select);
        setTimeout(() => {
          this.setScrollClasses(select);
        }, 100);
        tabsWrapper.addEventListener('mousemove', event => {
          if (this.isDragging) {
            if (this.dragX !== null) {
              var delta = this.dragX ? this.dragX - event.clientX : 0;
              tabsWrapper.scrollTo({
                top: 0,
                left: tabsWrapper.scrollLeft + delta
              });
            }

            this.dragX = event.clientX;
            event.preventDefault();
            event.stopImmediatePropagation();
          }
        });
        tabsWrapper.addEventListener('click', event => {
          if (this.isDragging && this.dragX !== null) {
            event.preventDefault();
            event.stopImmediatePropagation();
          }

          this.isDragging = false;
          this.dragX = null;
        }, {
          capture: true
        });
      }

      setActive(tabs, langCodes) {
        var _this2 = this;

        var _loop = function _loop(index, tab) {
          if (tab.querySelector('.ss-value-delete')) tab.querySelector('.ss-value-delete').title = t.direct('Delete all translations for this language').toString();
          if (langCodes[index] === Language.l10nLanguage) tab.classList.add('active');
          if (tab.hasEvent) return "continue";
          tab.hasEvent = true;
          tab.addEventListener('click', event => {
            event.preventDefault();
            event.stopImmediatePropagation();

            for (var innerTab of tabs) {
              if (innerTab !== tab) innerTab.classList.remove('active');
            }

            tab.classList.add('active');
            Language.l10nLanguage = langCodes[index];

            _this2.render();
          });
        };

        for (var [index, tab] of tabs.entries()) {
          var _ret = _loop(index, tab);

          if (_ret === "continue") continue;
        }
      }

      uiLanguageSwitcher() {
        var _this3 = this;

        return Object.keys(Language.uiLanguages).length ? html(_templateObject6$2 || (_templateObject6$2 = _taggedTemplateLiteralLoose(["<div class=\"language-switcher\">\n      ", "\n      <select onchange=\"", "\">\n        ", "\n      </select></div>\n    "])), fa(faGlobe), /*#__PURE__*/function () {
          var _ref4 = _asyncToGenerator(function* (event) {
            yield Language.setUiLanguage(event.target.value);

            _this3.dispatchEvent(new CustomEvent('language-change'));

            yield _this3.render();
          });

          return function (_x4) {
            return _ref4.apply(this, arguments);
          };
        }(), Object.entries(Language.uiLanguages).map(language => {
          var code = language[0];
          var label = language[1];
          return html(_templateObject7$2 || (_templateObject7$2 = _taggedTemplateLiteralLoose(["<option value=\"", "\" selected=\"", "\">", "</option>"])), code, code === Language.uiLanguage ? true : null, label);
        })) : html(_templateObject8$2 || (_templateObject8$2 = _taggedTemplateLiteralLoose([""])));
      }

    }

    class Mail extends ElementBase {
      constructor() {
        super(...arguments);
        this.attributes.type = 'mail';
      }

    }

    class Number$1 extends ElementBase {
      constructor() {
        super(...arguments);
        this.attributes.type = 'number';
      }

      on(event) {
        var _this = this;

        return _asyncToGenerator(function* () {
          if (['keyup', 'change'].includes(event.type)) {
            if (!_this.value) yield _this.addItem();
            _this.value["@" + _this.jsonldKey] = parseInt(event.target.value);

            _this.dispatchChange();
          }
        })();
      }

    }

    function searchSuggestionsSparqlQuery(query, source, searchTerm) {
      if (query === void 0) {
        query = '';
      }

      if (source === void 0) {
        source = null;
      }

      if (searchTerm === void 0) {
        searchTerm = '';
      }

      if (searchTerm === '' || searchTerm.length < 4) return {};
      var querySearchTerm = searchTerm.trim();

      if (source) {
        source = {
          type: 'sparql',
          value: source
        };
      }

      if (!source) source = {
        type: 'sparql',
        value: 'https://dbpedia.org/sparql'
      };

      if (!query) {
        query = "\n    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n\n    SELECT DISTINCT ?uri ?label {\n      ?uri rdfs:label ?label .\n      FILTER(contains(?label, \"\"\"SEARCH_TERM\"\"\"))\n    }\n\n    LIMIT 10";
      }

      if (typeof source === 'string') {
        source = source.replace(/LANGUAGE/g, Language.uiLanguage);
        source = source.replace(/SEARCH_TERM/g, querySearchTerm);
      }

      query = query.replace(/LANGUAGE/g, Language.uiLanguage);
      query = query.replace(/SEARCH_TERM/g, querySearchTerm);
      return {
        query,
        source
      };
    }

    function dbpediaSuggestions(searchTerm) {
      var querySearchTerm = searchTerm.trim();
      var query = "\n\n    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n    PREFIX dbo:  <http://dbpedia.org/ontology/>\n    PREFIX bif: <bif:>\n\n    SELECT DISTINCT ?uri ?label ?image {\n\n      ?uri rdfs:label ?label .\n      ?uri dbo:thumbnail ?image .\n      ?label bif:contains '\"" + querySearchTerm + "\"' .\n      " + (Language.uiLanguage ? "filter langMatches(lang(?label), \"" + Language.uiLanguage + "\")" : '') + "\n    }\n\n    LIMIT 10";
      return {
        query,
        source: {
          type: 'sparql',
          value: 'https://dbpedia.org/sparql'
        }
      };
    }

    var streamToString = stream => {
      return new Promise(resolve => {
        var output = '';
        stream.on('data', part => output += part);
        stream.on('end', () => {
          resolve(output);
        });
      });
    };

    var metas = /*#__PURE__*/new Map();
    var getUriMeta = /*#__PURE__*/function () {
      var _ref = /*#__PURE__*/_asyncToGenerator(function* (uri, proxy) {
        if (proxy === void 0) {
          proxy = null;
        }

        if (!metas.get(uri + Language.uiLanguage)) {
          var _improvedCanonicalUri, _improvedFetchUri;

          var improvedFetchUri;
          var improvedCanonicalUri;

          if (uri.includes('://dbpedia.org/resource/')) {
            improvedFetchUri = uri.replace('://dbpedia.org/resource/', '://dbpedia.org/data/') + '.jsonld';
            improvedCanonicalUri = uri.replace('https://', 'http://');
          }

          var engine = yield newEngine();
          var response = yield engine.query("DESCRIBE <" + ((_improvedCanonicalUri = improvedCanonicalUri) != null ? _improvedCanonicalUri : uri) + ">", {
            sources: [applyProxy((_improvedFetchUri = improvedFetchUri) != null ? _improvedFetchUri : uri, proxy)]
          });
          var {
            data
          } = yield engine.resultToString(response, 'application/ld+json');
          var resultString = yield streamToString(data);
          var [json] = JSON.parse(resultString);
          if (!json) json = {};
          var meta = {
            label: null,
            thumbnail: null
          };
          var labelLastParts = ['name', 'username', 'label'];
          var imageLastParts = ['thumbnail', 'depiction', 'image', 'img'];

          for (var labelLastPart of labelLastParts) {
            for (var [predicate, value] of Object.entries(json)) {
              var _meta$label;

              if (!meta.label && labelLastPart === lastPart(predicate)) {
                var _ref2, _valueInPreferredLang, _value$;

                var valueInPreferredLanguage = value.find(item => item['@language'] === Language.uiLanguage);
                var valueInUndeterminedLanguage = value.find(item => item['@language'] === 'und');
                meta.label = (_ref2 = (_valueInPreferredLang = valueInPreferredLanguage == null ? void 0 : valueInPreferredLanguage['@value']) != null ? _valueInPreferredLang : valueInUndeterminedLanguage == null ? void 0 : valueInUndeterminedLanguage['@value']) != null ? _ref2 : value == null ? void 0 : (_value$ = value[0]) == null ? void 0 : _value$['@value'];
              }

              if (((_meta$label = meta.label) != null ? _meta$label : '').substr(0, 2) === '_:') meta.label = null;
            }
          }

          for (var imageLastPart of imageLastParts) {
            for (var [_predicate, _value] of Object.entries(json)) {
              if (!meta.thumbnail && imageLastPart === lastPart(_predicate)) {
                var _ref3, _ref4, _ref5, _ref6, _valueInPreferredLang2, _value$2, _value$3, _meta$thumbnail, _value$4, _value$4$httpsSche, _value$4$httpsSche$;

                var _valueInPreferredLanguage = _value.find(item => item['@language'] === Language.uiLanguage);

                var _valueInUndeterminedLanguage = _value.find(item => item['@language'] === 'und');

                meta.thumbnail = (_ref3 = (_ref4 = (_ref5 = (_ref6 = (_valueInPreferredLang2 = _valueInPreferredLanguage == null ? void 0 : _valueInPreferredLanguage['@value']) != null ? _valueInPreferredLang2 : _valueInPreferredLanguage == null ? void 0 : _valueInPreferredLanguage['@id']) != null ? _ref6 : _valueInUndeterminedLanguage == null ? void 0 : _valueInUndeterminedLanguage['@value']) != null ? _ref5 : _valueInUndeterminedLanguage == null ? void 0 : _valueInUndeterminedLanguage['@id']) != null ? _ref4 : _value == null ? void 0 : (_value$2 = _value[0]) == null ? void 0 : _value$2['@value']) != null ? _ref3 : _value == null ? void 0 : (_value$3 = _value[0]) == null ? void 0 : _value$3['@id'];
                if (((_meta$thumbnail = meta.thumbnail) == null ? void 0 : _meta$thumbnail.substr(0, 2)) === '_:') meta.thumbnail = false;

                if (!meta.thumbnail && _value != null && (_value$4 = _value[0]) != null && (_value$4$httpsSche = _value$4['https://schema.org/url']) != null && (_value$4$httpsSche$ = _value$4$httpsSche[0]) != null && _value$4$httpsSche$['@value']) {
                  meta.thumbnail = _value[0]['https://schema.org/url'][0]['@value'];
                }
              }
            }
          }

          if (!meta.label) meta.label = false;
          if (!meta.thumbnail) meta.thumbnail = false;
          metas.set(uri + Language.uiLanguage, meta);
        }

        return metas.get(uri + Language.uiLanguage);
      });

      return function getUriMeta(_x, _x2) {
        return _ref.apply(this, arguments);
      };
    }();

    var _templateObject$7, _templateObject2$4, _templateObject3$4, _templateObject4$4, _templateObject5$4, _templateObject6$3, _templateObject7$3, _templateObject8$3, _templateObject9$2, _templateObject10$2, _templateObject11$1, _templateObject12$1, _templateObject13$1, _templateObject14$1, _templateObject15$1, _templateObject16$1, _templateObject17$1, _templateObject18$1, _templateObject19$1, _templateObject20$1, _templateObject21$1, _templateObject22$1;
    class Reference extends ElementBase {
      constructor() {
        super(...arguments);
        this.jsonldKey = 'id';
        this.expanded = false;
        this.searchTerm = null;
        this.previousValue = null;
        this.autocomplete = debounce(this.autocomplete.bind(this), 400);
      }

      on(event) {
        var _this = this;

        return _asyncToGenerator(function* () {
          if (['keyup', 'change'].includes(event.type)) {
            var _this$definition$form;

            if (!_this.value) yield _this.addItem();

            if (event.target.value.substr(0, 4) === 'http') {
              _this.value["@" + _this.jsonldKey] = event.target.value;

              _this.dispatchChange();
            } else {
              _this.searchTerm = event.target.value;
            }

            if ((_this$definition$form = _this.definition['form:autoCompleteQuery']) != null && _this$definition$form._) {
              _this.autocomplete();
            }
          }
        })();
      }

      get removable() {
        var _this$parent, _this$parent$definiti, _this$parent$definiti2, _this$definition$form2;

        var parentIsGroup = this.parent instanceof ElementBase ? ((_this$parent = this.parent) == null ? void 0 : (_this$parent$definiti = _this$parent.definition) == null ? void 0 : (_this$parent$definiti2 = _this$parent$definiti['form:widget']) == null ? void 0 : _this$parent$definiti2._) === 'group' : false;
        if (this.index < 1 && ((_this$definition$form2 = this.definition['form:required']) == null ? void 0 : _this$definition$form2._) === true) return false;
        return !parentIsGroup;
      }

      autocomplete() {
        var _this$definition$form3, _this$definition$form4;

        if (!this.searchTerm) return;
        var querySetting = (_this$definition$form3 = this.definition['form:autoCompleteQuery']) == null ? void 0 : _this$definition$form3._;
        var sourceSetting = (_this$definition$form4 = this.definition['form:autoCompleteSource']) == null ? void 0 : _this$definition$form4._;
        var {
          query,
          source
        } = querySetting || sourceSetting ? searchSuggestionsSparqlQuery(querySetting, sourceSetting, this.searchTerm) : dbpediaSuggestions(this.searchTerm);
        var textSuggestion = {
          label: t(_templateObject$7 || (_templateObject$7 = _taggedTemplateLiteralLoose(["Add <strong>", "</strong> as text without reference."])), {
            searchTerm: this.searchTerm
          }),
          value: this.searchTerm
        };

        if (query && source) {
          var _this$form$getAttribu;

          var proxy = (_this$form$getAttribu = this.form.getAttribute('proxy')) != null ? _this$form$getAttribu : '';
          sparqlQueryToList(query, source, proxy).then(searchSuggestions => {
            searchSuggestions.push(textSuggestion);
            this.suggestions = searchSuggestions;
            this.render();
          }).catch(exception => {
            console.error(exception);
            this.searchTerm = null;
            this.suggestions = [];
            this.render();
          });
        } else {
          this.suggestions = [textSuggestion];
          this.render();
        }
      }

      input() {
        var _ref, _this$searchTerm, _this$value;

        return html(_templateObject2$4 || (_templateObject2$4 = _taggedTemplateLiteralLoose(["\n      <input \n        ref=", " \n        value=", " \n        onchange=", "\n        onkeyup=", "\n      />\n    "])), attributesDiff(this.attributes, element => this.inputElement = element), (_ref = (_this$searchTerm = this.searchTerm) != null ? _this$searchTerm : (_this$value = this.value) == null ? void 0 : _this$value._) != null ? _ref : '', event => this.on(event), event => this.on(event));
      }

      item(childTemplates, isDisplayOnly) {
        var _this2 = this;

        return _asyncToGenerator(function* () {
          var _this2$value, _this2$value4, _this2$value5;

          if (childTemplates === void 0) {
            childTemplates = [];
          }

          if (isDisplayOnly === void 0) {
            isDisplayOnly = false;
          }

          var value = (_this2$value = _this2.value) == null ? void 0 : _this2$value._;
          var uri = (value == null ? void 0 : value.substr(0, 4)) === 'http' ? value : false;

          var editButton = () => html(_templateObject3$4 || (_templateObject3$4 = _taggedTemplateLiteralLoose(["<button type=\"button\" class=\"button edit\" onclick=\"", "\">\n      ", "\n    </button>"])), () => {
            var _this2$value2;

            _this2.expanded = true;
            _this2.previousValue = (_this2$value2 = _this2.value) == null ? void 0 : _this2$value2._;

            _this2.render();

            setTimeout(() => {
              _this2.inputElement.select();
            }, 30);
          }, fa(faPencilAlt));

          var acceptButton = () => html(_templateObject4$4 || (_templateObject4$4 = _taggedTemplateLiteralLoose(["<button type=\"button\" class=\"button accept primary\" onclick=\"", "\">\n      ", "\n    </button>"])), () => {
            var _this2$value3;

            _this2.expanded = false;

            if ((_this2$value3 = _this2.value) != null && _this2$value3['@value'] && _this2.value['@value'].substr(0, 4) !== 'http' && _this2.searchTerm) {
              _this2.value['@value'] = _this2.searchTerm;

              _this2.dispatchChange();
            }

            _this2.searchTerm = null;
            _this2.suggestions = [];

            _this2.render();
          }, fa(faCheck));

          var restoreButton = () => html(_templateObject5$4 || (_templateObject5$4 = _taggedTemplateLiteralLoose(["\n    <button type=\"button\" class=\"button back\" onclick=\"", "\">\n      ", "\n    </button>"])), () => {
            _this2.expanded = false;
            _this2.searchTerm = null;
            _this2.suggestions = [];
            if (_this2.previousValue) _this2.value["@" + _this2.jsonldKey] = _this2.previousValue;

            _this2.render();

            _this2.dispatchChange();
          }, fa(faReply));

          var isCollapsed = (uri || ((_this2$value4 = _this2.value) == null ? void 0 : _this2$value4['@value'])) && !_this2.expanded && !_this2.searchTerm;
          var meta = uri && isFetchable(uri) ? yield getUriMeta(uri, _this2.proxy) : false;

          if ((_this2$value5 = _this2.value) != null && _this2$value5['@value']) {
            var _this2$value6;

            meta = {
              label: (_this2$value6 = _this2.value) == null ? void 0 : _this2$value6['@value']
            };
          }

          return html(_templateObject6$3 || (_templateObject6$3 = _taggedTemplateLiteralLoose(["\n    <div class=\"item\" expanded=", " has-suggestions=", ">\n      ", "\n\n      ", "\n\n      ", "\n\n      ", "\n    </div>"])), !isCollapsed, _this2.searchTerm, isCollapsed ? html(_templateObject7$3 || (_templateObject7$3 = _taggedTemplateLiteralLoose(["", " ", ""])), _this2.referenceLabel(uri ? uri : '', meta), isDisplayOnly ? null : editButton()) : html(_templateObject8$3 || (_templateObject8$3 = _taggedTemplateLiteralLoose(["<div class=\"inner\">", " ", " ", " ", "</div>"])), _this2.input(), !_this2.searchTerm ? acceptButton() : '', restoreButton(), _this2.removeButton()), _this2.searchTerm ? _this2.searchSuggestions() : '', !isCollapsed && _this2.options.length && !_this2.suggestions.length ? html(_templateObject9$2 || (_templateObject9$2 = _taggedTemplateLiteralLoose(["\n        <div class=\"standard-options\">\n        ", "\n        </div>\n      "])), _this2.options.map(option => {
            var _ref2, _option$label$Languag, _option$label;

            return html(_templateObject10$2 || (_templateObject10$2 = _taggedTemplateLiteralLoose(["\n          <span class=\"standard-option\" onclick=", ">\n            ", "\n          </span>\n        "])), () => {
              if (!_this2.value) _this2.addItem();
              _this2.value['@' + option.jsonldKey] = option.uri;
              var oppositeSymbol = option.jsonldKey === 'value' ? 'id' : 'value';
              delete _this2.value['@' + oppositeSymbol];

              _this2.dispatchChange();

              _this2.expanded = false;
              _this2.searchTerm = null;
              _this2.suggestions = [];

              _this2.render();
            }, (_ref2 = (_option$label$Languag = option == null ? void 0 : (_option$label = option.label) == null ? void 0 : _option$label[Language.uiLanguage]) != null ? _option$label$Languag : option == null ? void 0 : option.label) != null ? _ref2 : '');
          })) : null, childTemplates);
        })();
      }

      searchSuggestions() {
        var _this$suggestions$;

        var hasResults = !((_this$suggestions$ = this.suggestions[0]) != null && _this$suggestions$.value);
        return this.suggestions.length ? html(_templateObject11$1 || (_templateObject11$1 = _taggedTemplateLiteralLoose(["\n    <ul class=\"search-suggestions\">\n      ", "\n      ", "\n    </ul>\n      "])), !hasResults ? html(_templateObject12$1 || (_templateObject12$1 = _taggedTemplateLiteralLoose(["<li class=\"search-suggestion no-results\">\n        <span class=\"title\">", "</span>\n      </li>"])), t(_templateObject13$1 || (_templateObject13$1 = _taggedTemplateLiteralLoose(["Nothing found"])))) : '', this.suggestions.map(suggestion => {
          var _suggestion$label$Lan, _suggestion$label;

          return html(_templateObject14$1 || (_templateObject14$1 = _taggedTemplateLiteralLoose(["\n      <li class=\"search-suggestion\" onclick=\"", "\">\n        ", "\n        <span class=\"title\">", "</span>\n      </li>"])), () => {
            if (suggestion.uri) {
              this.value['@id'] = suggestion.uri;
              delete this.value['@value'];
            } else if (suggestion.value) {
              delete this.value['@id'];
              this.value['@value'] = suggestion.value;
            }

            this.expanded = false;
            this.searchTerm = null;
            this.suggestions = [];
            this.render();
          }, suggestion.image ? html(_templateObject15$1 || (_templateObject15$1 = _taggedTemplateLiteralLoose(["<div class=\"image\"><img src=\"", "\"></div>"])), "//images.weserv.nl/?url=" + suggestion.image + "&default=" + suggestion.image + "&w=100&h=100") : '', (_suggestion$label$Lan = (_suggestion$label = suggestion.label) == null ? void 0 : _suggestion$label[Language.uiLanguage]) != null ? _suggestion$label$Lan : suggestion.label);
        })) : '';
      }

      wrapper(innerTemplates, isDisplayOnly) {
        var _this$definition$form5, _this$definition$form6;

        if (innerTemplates === void 0) {
          innerTemplates = [];
        }

        if (isDisplayOnly === void 0) {
          isDisplayOnly = false;
        }

        var type = kebabize(this.constructor.name);
        var shouldShowEmpty = ((_this$definition$form5 = this.definition['form:translatable']) == null ? void 0 : _this$definition$form5._) === 'always' && !Language.l10nLanguage;
        return html(_templateObject16$1 || (_templateObject16$1 = _taggedTemplateLiteralLoose(["\n    ", ""])), !shouldShowEmpty && (!isDisplayOnly || isDisplayOnly && innerTemplates.length > 0) ? html(_templateObject17$1 || (_templateObject17$1 = _taggedTemplateLiteralLoose(["\n    <div ref=", " name=", " type=\"", "\">\n    ", "\n    ", "\n      \n    </div>\n    "])), attributesDiff(this.wrapperAttributes), kebabize(lastPart(this.definition['@id'])), type, this.label(), innerTemplates.length ? html(_templateObject18$1 || (_templateObject18$1 = _taggedTemplateLiteralLoose(["\n      <div class=\"items\">\n        ", "\n        ", "\n      </div>\n    "])), innerTemplates, (_this$definition$form6 = this.definition['form:multiple']) != null && _this$definition$form6._ && !isDisplayOnly ? html(_templateObject19$1 || (_templateObject19$1 = _taggedTemplateLiteralLoose(["<div class=\"item\">", "</div>"])), this.addButton()) : html(_templateObject20$1 || (_templateObject20$1 = _taggedTemplateLiteralLoose([""])))) : '') : html(_templateObject21$1 || (_templateObject21$1 = _taggedTemplateLiteralLoose([""]))));
      }

      itemDisplay(childTemplates) {
        if (childTemplates === void 0) {
          childTemplates = [];
        }

        return this.item(childTemplates, true);
      }

      valueDisplay() {
        var _this$value2;

        return html(_templateObject22$1 || (_templateObject22$1 = _taggedTemplateLiteralLoose(["", ""])), (_this$value2 = this.value) == null ? void 0 : _this$value2._);
      }

    }

    class String$1 extends ElementBase {
      constructor() {
        super(...arguments);
      }

    }

    var _templateObject$8;
    class Textarea extends ElementBase {
      input() {
        var _this$value$_, _this$value;

        var textValue = (_this$value$_ = (_this$value = this.value) == null ? void 0 : _this$value._) != null ? _this$value$_ : '';
        if (typeof textValue === 'string') textValue.trim();
        return html(_templateObject$8 || (_templateObject$8 = _taggedTemplateLiteralLoose(["\n    <textarea\n      ref=", " \n      onchange=\"", "\"\n      onkeyup=\"", "\"\n     .value=\"", "\"></textarea>"])), attributesDiff(this.attributes), event => this.on(event), event => this.on(event), textValue);
      }

    }

    var _templateObject$9;
    class Unknown extends ElementBase {
      input() {
        var _this$definition$form;

        console.log(this.definition);
        return html(_templateObject$9 || (_templateObject$9 = _taggedTemplateLiteralLoose(["Unknown field type <b>", "</b>"])), (_this$definition$form = this.definition['form:widget']) == null ? void 0 : _this$definition$form._);
      }

    }

    var _templateObject$a;
    class Url extends ElementBase {
      constructor() {
        super(...arguments);
        this.attributes.type = 'url';
      }

      valueDisplay() {
        var _this$value, _this$value2;

        return html(_templateObject$a || (_templateObject$a = _taggedTemplateLiteralLoose(["<a target=\"_blank\" href=", ">", "</a>"])), (_this$value = this.value) == null ? void 0 : _this$value._, lastPart((_this$value2 = this.value) == null ? void 0 : _this$value2._));
      }

    }

    var cachedImageObjects = /*#__PURE__*/new WeakMap();
    var getImage = imageUrl => {
      return new Promise(resolve => {
        imageUrl = imageUrl.replace('http:', location.protocol);

        if (!cachedImageObjects.get(imageUrl)) {
          var image = document.createElement('img');
          image.crossOrigin = 'anonymous';

          image.onload = () => resolve(image);

          image.src = imageUrl;
        } else {
          resolve(cachedImageObjects.get(imageUrl));
        }
      });
    };

    var getImageDimensionsByUrl = /*#__PURE__*/function () {
      var _ref = /*#__PURE__*/_asyncToGenerator(function* (imageUrl) {
        var image = yield getImage(imageUrl);
        return {
          width: image.width,
          height: image.height
        };
      });

      return function getImageDimensionsByUrl(_x) {
        return _ref.apply(this, arguments);
      };
    }();

    function createPixelArray(pixels, quality) {
      if (quality === void 0) {
        quality = 0;
      }

      var pixelArray = [];

      for (var i = 0, offset, r, g, b, a; i < pixels.length + 1; i = i + quality) {
        offset = i * 4;
        r = pixels[offset + 0];
        g = pixels[offset + 1];
        b = pixels[offset + 2];
        a = pixels[offset + 3];

        if (typeof a === 'undefined' || a >= 125) {
          if (!(r > 250 && g > 250 && b > 250)) {
            pixelArray.push([r, g, b]);
          }
        }
      }

      return pixelArray;
    }

    var getImageColor = /*#__PURE__*/function () {
      var _ref = /*#__PURE__*/_asyncToGenerator(function* (imageUrl) {
        var image = yield getImage(imageUrl);
        var canvas = document.createElement('canvas');
        var context = canvas.getContext('2d');
        if (!context) throw new Error('Could not get context');
        context.drawImage(image, 0, 0);
        var pixels = context.getImageData(0, 0, image.width, image.height);
        var pixelsData = createPixelArray(pixels.data, 8);
        var colorMap = quantize(pixelsData, 6);
        var colors = colorMap.palette();
        var color = "rgb(" + colors[0].join(',') + ")";
        return {
          color
        };
      });

      return function getImageColor(_x) {
        return _ref.apply(this, arguments);
      };
    }();

    var _templateObject$b, _templateObject2$5, _templateObject3$5, _templateObject4$5, _templateObject5$5;
    var imagesCache = /*#__PURE__*/new Map();
    class UrlImage extends ElementBase {
      constructor() {
        var _this$itemValues, _this$itemValues$, _this$itemValues2, _this$itemValues2$, _this$itemValues3, _this$itemValues3$, _this$itemValues4, _this$itemValues4$, _this$itemValues5, _this$itemValues5$, _this$itemValues6, _this$itemValues6$, _this$itemValues7, _this$itemValues7$, _this$itemValues8, _this$itemValues8$;

        super(...arguments);
        this.isDragging = false;

        this.setStyle = () => {
          var _this$focalPointDiv$p;

          this.focalPointDiv.style.left = this.focalPoint.x1 + '%';
          this.focalPointDiv.style.top = this.focalPoint.y1 + '%';
          this.focalPointDiv.style.width = this.focalPoint.x2 - this.focalPoint.x1 + '%';
          this.focalPointDiv.style.height = this.focalPoint.y2 - this.focalPoint.y1 + '%';
          var image = (_this$focalPointDiv$p = this.focalPointDiv.parentElement) == null ? void 0 : _this$focalPointDiv$p.querySelector('.uppy-Dashboard-Item-previewImg');
          if (!image) return;
          image.style.clipPath = "inset(\n      " + this.focalPoint.y1 + "% \n      " + (100 - this.focalPoint.x2) + "% \n      " + (100 - this.focalPoint.y2) + "%\n      " + this.focalPoint.x1 + "%  \n    )";
        };

        this.reCalc = () => {
          if (this.focalPoint.x3 === null || this.focalPoint.x4 === null) {
            this.reset();
            this.focalPointDiv.removeAttribute('style');
            return;
          }

          this.focalPoint.x1 = Math.round(Math.min(this.focalPoint.x3, this.focalPoint.x4));
          this.focalPoint.x2 = Math.round(Math.max(this.focalPoint.x3, this.focalPoint.x4));
          this.focalPoint.y1 = Math.round(Math.min(this.focalPoint.y3, this.focalPoint.y4));
          this.focalPoint.y2 = Math.round(Math.max(this.focalPoint.y3, this.focalPoint.y4));
          this.setStyle();
        };

        var focalPointPrefix = this.form.formDefinition.context.focalPoint;
        this.focalPoint = {
          x1: (_this$itemValues = this.itemValues) == null ? void 0 : (_this$itemValues$ = _this$itemValues[focalPointPrefix + "x1"]) == null ? void 0 : _this$itemValues$._,
          y1: (_this$itemValues2 = this.itemValues) == null ? void 0 : (_this$itemValues2$ = _this$itemValues2[focalPointPrefix + "y1"]) == null ? void 0 : _this$itemValues2$._,
          x2: (_this$itemValues3 = this.itemValues) == null ? void 0 : (_this$itemValues3$ = _this$itemValues3[focalPointPrefix + "x2"]) == null ? void 0 : _this$itemValues3$._,
          y2: (_this$itemValues4 = this.itemValues) == null ? void 0 : (_this$itemValues4$ = _this$itemValues4[focalPointPrefix + "y2"]) == null ? void 0 : _this$itemValues4$._,
          x3: (_this$itemValues5 = this.itemValues) == null ? void 0 : (_this$itemValues5$ = _this$itemValues5[focalPointPrefix + "x3"]) == null ? void 0 : _this$itemValues5$._,
          y3: (_this$itemValues6 = this.itemValues) == null ? void 0 : (_this$itemValues6$ = _this$itemValues6[focalPointPrefix + "y3"]) == null ? void 0 : _this$itemValues6$._,
          x4: (_this$itemValues7 = this.itemValues) == null ? void 0 : (_this$itemValues7$ = _this$itemValues7[focalPointPrefix + "x4"]) == null ? void 0 : _this$itemValues7$._,
          y4: (_this$itemValues8 = this.itemValues) == null ? void 0 : (_this$itemValues8$ = _this$itemValues8[focalPointPrefix + "y4"]) == null ? void 0 : _this$itemValues8$._
        };
      }

      on(event) {
        var _superprop_getOn = () => super.on,
            _this = this;

        return _asyncToGenerator(function* () {
          var _this$definition$form, _this$definition$form2, _this$value;

          _superprop_getOn().call(_this, event);

          var dimensionsEnabled = ((_this$definition$form = _this.definition['form:dimensions']) == null ? void 0 : _this$definition$form.length) > 0;
          var saveColor = ((_this$definition$form2 = _this.definition['form:saveColor']) == null ? void 0 : _this$definition$form2.length) > 0;
          var url = (_this$value = _this.value) == null ? void 0 : _this$value._;
          var schemaPrefix = _this.form.formDefinition.context.schema;

          if (dimensionsEnabled && url) {
            getImageDimensionsByUrl(url).then(_ref => {
              var {
                width,
                height
              } = _ref;
              _this.itemValues[schemaPrefix + "width"] = [{
                '@value': width
              }];
              _this.itemValues[schemaPrefix + "height"] = [{
                '@value': height
              }];
            });
          }

          if (saveColor) {
            getImageColor(url).then(_ref2 => {
              var {
                color
              } = _ref2;
              _this.itemValues[schemaPrefix + "color"] = [{
                '@value': color
              }];
            });
          }

          _this.render();
        })();
      }

      destroy() {
        return _asyncToGenerator(function* () {
          for (var imageDestroyer of imagesCache.values()) {
            imageDestroyer();
          }
        })();
      }

      attachImageEvents(image) {
        var _image$parentElement, _image$parentElement$, _image$parentElement2, _image$parentElement3, _image$parentElement4, _image$parentElement5, _image$parentElement6;

        var onmousedown = event => {
          event.preventDefault();
          this.reset();
          this.isDragging = true;
          this.reCalc();
          this.focalPoint.x3 = 100 / image.width * event.offsetX;
          this.focalPoint.y3 = 100 / image.height * event.offsetY;
        };

        var onmousemove = event => {
          if (this.isDragging) {
            this.focalPoint.x4 = 100 / image.width * event.offsetX;
            this.focalPoint.y4 = 100 / image.height * event.offsetY;
            this.reCalc();
          }
        };

        var onmouseup = event => {
          this.isDragging = false;
          var endX = 100 / image.width * event.offsetX;
          var endY = 100 / image.height * event.offsetY;
          this.reCalc();
          var allowedMouseMove = 4;

          if (Math.abs(endX - this.focalPoint.x3) < allowedMouseMove && Math.abs(endY - this.focalPoint.y3) < allowedMouseMove) {
            this.focalPointDiv.removeAttribute('style');
            this.reset();
          } else {
            var focalPointPrefix = this.form.formDefinition.context.focalPoint;
            this.itemValues[focalPointPrefix + "x1"] = [{
              '@value': this.focalPoint.x1
            }];
            this.itemValues[focalPointPrefix + "y1"] = [{
              '@value': this.focalPoint.y1
            }];
            this.itemValues[focalPointPrefix + "x2"] = [{
              '@value': this.focalPoint.x2
            }];
            this.itemValues[focalPointPrefix + "y2"] = [{
              '@value': this.focalPoint.y2
            }];
          }
        };

        (_image$parentElement = image.parentElement) == null ? void 0 : (_image$parentElement$ = _image$parentElement.querySelector('.focal-point')) == null ? void 0 : _image$parentElement$.remove();
        (_image$parentElement2 = image.parentElement) == null ? void 0 : (_image$parentElement3 = _image$parentElement2.querySelector('.image-background')) == null ? void 0 : _image$parentElement3.remove();
        this.focalPointDiv = document.createElement('div');
        this.focalPointDiv.classList.add('focal-point');
        this.setStyle();
        image.before(this.focalPointDiv);
        var imageBackground = document.createElement('img');
        imageBackground.classList.add('image-background');
        imageBackground.src = image.src;
        image.before(imageBackground);
        (_image$parentElement4 = image.parentElement) == null ? void 0 : _image$parentElement4.addEventListener('mousedown', onmousedown);
        (_image$parentElement5 = image.parentElement) == null ? void 0 : _image$parentElement5.addEventListener('mousemove', onmousemove);
        (_image$parentElement6 = image.parentElement) == null ? void 0 : _image$parentElement6.addEventListener('mouseup', onmouseup);
        imagesCache.set(image, () => {
          var _image$parentElement7, _image$parentElement8, _image$parentElement9;

          (_image$parentElement7 = image.parentElement) == null ? void 0 : _image$parentElement7.removeEventListener('mousedown', onmousedown);
          (_image$parentElement8 = image.parentElement) == null ? void 0 : _image$parentElement8.removeEventListener('mousemove', onmousemove);
          (_image$parentElement9 = image.parentElement) == null ? void 0 : _image$parentElement9.removeEventListener('mouseup', onmouseup);
        });
        this.setStyle();
      }

      input() {
        var _this$definition$form3, _this$value$_, _this$value2, _this$value3, _this$value4, _this$value5;

        var focalPointEnabled = ((_this$definition$form3 = this.definition['form:focalPoint']) == null ? void 0 : _this$definition$form3.length) > 0;
        return html(_templateObject$b || (_templateObject$b = _taggedTemplateLiteralLoose(["\n      <div class=\"top\">\n        <input \n          ref=", " \n          .value=", " \n          onchange=", "\n          onkeyup=", "\n        />\n        ", "\n      </div>\n\n      ", "\n    "])), attributesDiff(this.attributes), (_this$value$_ = (_this$value2 = this.value) == null ? void 0 : _this$value2._) != null ? _this$value$_ : '', event => this.on(event), event => this.on(event), this.removeButton(), (_this$value3 = this.value) != null && _this$value3._ ? focalPointEnabled ? html(_templateObject2$5 || (_templateObject2$5 = _taggedTemplateLiteralLoose(["\n        <div class=\"image-wrapper\">\n          <img \n            src=", " \n            ref=\"", "\"\n          />\n        </div>"])), (_this$value4 = this.value) == null ? void 0 : _this$value4._, element => this.attachImageEvents(element)) : html(_templateObject3$5 || (_templateObject3$5 = _taggedTemplateLiteralLoose(["<img src=", " />"])), (_this$value5 = this.value) == null ? void 0 : _this$value5._) : '');
      }

      item(childTemplates) {
        if (childTemplates === void 0) {
          childTemplates = [];
        }

        return html(_templateObject4$5 || (_templateObject4$5 = _taggedTemplateLiteralLoose(["\n    <div class=\"item\">\n      ", "\n      ", "\n    </div>"])), this.input(), childTemplates);
      }

      reset() {
        var _this$focalPointDiv$p2;

        this.focalPoint = {
          x1: null,
          y1: null,
          x2: null,
          y2: null,
          x3: null,
          y3: null,
          x4: null,
          y4: null
        };
        var image = (_this$focalPointDiv$p2 = this.focalPointDiv.parentElement) == null ? void 0 : _this$focalPointDiv$p2.querySelector('.uppy-Dashboard-Item-previewImg');
        if (!image) return;
        image.removeAttribute('style');
      }

      valueDisplay() {
        var _this$value6, _this$value7;

        return html(_templateObject5$5 || (_templateObject5$5 = _taggedTemplateLiteralLoose(["<a target=\"_blank\" href=", "><img src=", " /></a>"])), (_this$value6 = this.value) == null ? void 0 : _this$value6._, (_this$value7 = this.value) == null ? void 0 : _this$value7._);
      }

    }

    var imported = /*#__PURE__*/new Set();
    var importGlobalScript = /*#__PURE__*/function () {
      var _ref = /*#__PURE__*/_asyncToGenerator(function* (url, name) {
        if (imported.has(name) || window[name]) return Promise.resolve(window[name]);
        return new Promise(resolve => {
          var script = document.createElement('script');
          script.src = url;

          script.onload = () => {
            imported.add(name);
            resolve(window[name]);
          };

          document.head.appendChild(script);
        });
      });

      return function importGlobalScript(_x, _x2) {
        return _ref.apply(this, arguments);
      };
    }();

    var _templateObject$c, _templateObject2$6;

    function assertServerError(res) {
      if (res && res.error) {
        var error = new Error(res.message);
        Object.assign(error, res.error);
        throw error;
      }

      return res;
    }

    var uppys = /*#__PURE__*/new Map();
    var instances = /*#__PURE__*/new Set();
    var failedPreviews = /*#__PURE__*/new Set();
    class UrlUppy extends UrlImage {
      constructor() {
        super(...arguments);
        this.attributes.type = 'url';
        var url = 'https://releases.transloadit.com/uppy/v2.4.1/uppy.min.css';
        this.form.renderer.extraStylesheets.add(url);
      }

      clickEvents(event) {
        var _event$target;

        var removeButton = event == null ? void 0 : (_event$target = event.target) == null ? void 0 : _event$target.closest('.uppy-Dashboard-Item-action--remove');

        if (removeButton) {
          var result = confirm(t.direct("Are you sure?"));
          if (!result) event.stopPropagation();
        }
      }

      getUppy(id) {
        var _this = this;

        return _asyncToGenerator(function* () {
          if (uppys.has(id)) return yield uppys.get(id);

          var promise = _this.createUppy();

          uppys.set(id, promise);
          return promise;
        })();
      }

      createUppy() {
        var _this2 = this;

        return _asyncToGenerator(function* () {
          var _this2$definition$for, _this2$definition$for2;

          var Uppy = yield importGlobalScript('https://releases.transloadit.com/uppy/v2.4.1/uppy.js', 'Uppy');
          var element = document.createElement('div');
          var definition = _this2.definition;
          var uppy = new Uppy.Core({
            id: location.pathname + _this2.definition['@id'] + Language.l10nLanguage,
            allowedFileTypes: []
          }).use(Uppy.Url, {
            companionUrl: (_this2$definition$for = _this2.definition['form:uppyCompanion']) == null ? void 0 : _this2$definition$for._
          }).use(Uppy.Dashboard, {
            inline: true,
            hideCancelButton: true,
            showRemoveButtonAfterComplete: true,
            target: element,
            proudlyDisplayPoweredByUppy: false,
            plugins: ['Url']
          }).use(Uppy.AwsS3Multipart, {
            limit: 4,
            createMultipartUpload: function createMultipartUpload(file) {
              this.assertHost('createMultipartUpload');
              var metadata = {};
              Object.keys(file.meta).forEach(key => {
                if (file.meta[key] != null) {
                  metadata[key] = file.meta[key].toString();
                }
              });
              var uppyDomain = definition['form:uppyDomain']._;
              var uppyDomainUrl = new URL(uppyDomain);
              return this.client.post('s3/multipart', {
                filename: uppyDomainUrl.pathname.substr(1) + file.name,
                type: file.type,
                metadata
              }).then(assertServerError);
            },
            companionUrl: (_this2$definition$for2 = _this2.definition['form:uppyCompanion']) == null ? void 0 : _this2$definition$for2._
          });
          uppy.on('file-removed', /*#__PURE__*/function () {
            var _ref = _asyncToGenerator(function* (file, reason) {
              if (reason === 'removed-by-user') {
                var parentIsGroup = _this2.parent.constructor.name === 'Container' && _this2.definition['form:type'];
                var values = parentIsGroup ? _this2.parent.parentValues[_this2.parent.mainBinding] : _this2.parentValues[_this2.mainBinding];
                values == null ? void 0 : values.splice(file.meta.index, 1);
                yield _this2.form.renderer.render();

                _this2.form.dispatchEvent(new CustomEvent('file-deleted', {
                  detail: {
                    file
                  }
                }));
              }
            });

            return function (_x, _x2) {
              return _ref.apply(this, arguments);
            };
          }());
          uppy.on('file-added', /*#__PURE__*/function () {
            var _ref2 = _asyncToGenerator(function* (file) {
              var _file$remote, _file$remote$body, _file$meta;

              if (!file.meta.relativePath && (_file$remote = file.remote) != null && (_file$remote$body = _file$remote.body) != null && _file$remote$body.url) {
                file.meta.relativePath = file.remote.body.url;
              }

              var uppyDomain = _this2.definition['form:uppyDomain']._;

              if ((_file$meta = file.meta) != null && _file$meta.relativePath && !file.meta.relativePath.includes(uppyDomain)) {
                if (!('index' in file.meta)) {
                  yield _this2.addFileToJsonLd(file);
                }
              }

              _this2.refreshPreviews();
            });

            return function (_x3) {
              return _ref2.apply(this, arguments);
            };
          }());
          uppy.on('upload-success', /*#__PURE__*/function () {
            var _ref3 = _asyncToGenerator(function* (file, response) {
              var uppyDomain = _this2.definition['form:uppyDomain']._;
              file.meta.relativePath = uppyDomain + response.body.location;
              yield _this2.addFileToJsonLd(file);
              yield _this2.form.renderer.render();

              _this2.form.dispatchEvent(new CustomEvent('file-added', {
                detail: {
                  file,
                  response
                }
              }));
            });

            return function (_x4, _x5) {
              return _ref3.apply(this, arguments);
            };
          }());
          uppy.rdfFormElement = element;
          return uppy;
        })();
      }

      addFileToJsonLd(file) {
        var _this3 = this;

        return _asyncToGenerator(function* () {
          var _this3$definition$for;

          var uppy = yield _this3.getUppy(_this3.definition['@id'] + Language.l10nLanguage);
          uppy.setFileState(file.id, {
            progress: {
              uploadComplete: true,
              uploadStarted: true
            }
          });
          var parentIsGroup = _this3.parent.constructor.name === 'Container' && ((_this3$definition$for = _this3.definition['form:type']) == null ? void 0 : _this3$definition$for._);
          var values = parentIsGroup ? _this3.parent.parentValues[_this3.parent.mainBinding] : _this3.parentValues[_this3.mainBinding];
          file.meta.index = values.length;
          yield _this3.addItem();
          values[file.meta.index]['@' + _this3.jsonldKey] = file.meta.relativePath;
        })();
      }

      wrapper(innerTemplates, isDisplayOnly) {
        var _superprop_getWrapper = () => super.wrapper,
            _this4 = this;

        return _asyncToGenerator(function* () {
          if (innerTemplates === void 0) {
            innerTemplates = [];
          }

          if (isDisplayOnly === void 0) {
            isDisplayOnly = false;
          }

          if (isDisplayOnly) return _superprop_getWrapper().call(_this4, innerTemplates);
          var uppy = yield _this4.getUppy(_this4.definition['@id'] + Language.l10nLanguage);
          var template = html(_templateObject$c || (_templateObject$c = _taggedTemplateLiteralLoose(["\n    <div ref=", " onclick=", ">", "</div>"])), () => {
            var inner = uppy.rdfFormElement.querySelector('.uppy-Dashboard-inner');

            if (inner) {
              inner.style.width = 'auto';
              inner.style.height = 'auto';
              var addMore = inner.querySelector('.uppy-DashboardContent-addMore');
              addMore == null ? void 0 : addMore.classList.add('button');
              addMore == null ? void 0 : addMore.classList.add('primary');
              addMore == null ? void 0 : addMore.classList.remove('uppy-DashboardContent-addMore');
              var plusIcon = addMore == null ? void 0 : addMore.querySelector('.uppy-c-icon');
              plusIcon == null ? void 0 : plusIcon.classList.add('icon');
              plusIcon == null ? void 0 : plusIcon.classList.remove('uppy-c-icon');
              var back = inner.querySelector('.uppy-DashboardContent-back');
              back == null ? void 0 : back.classList.remove('.uppy-DashboardContent-back');
              back == null ? void 0 : back.classList.add('button');
              back == null ? void 0 : back.classList.add('primary');
            }
          }, [_this4.clickEvents.bind(_this4), {
            capture: true
          }], uppy.rdfFormElement);
          return _superprop_getWrapper().call(_this4, [template, ...innerTemplates]);
        })();
      }

      addButton() {
        return null;
      }

      item() {
        var _this5 = this;

        return _asyncToGenerator(function* () {
          var _this5$value;

          var uppy = yield _this5.getUppy(_this5.definition['@id'] + Language.l10nLanguage);

          if (!instances.has(_this5) && (_this5$value = _this5.value) != null && _this5$value._) {
            var url = new URL(_this5.value._);
            var name = url.pathname.substr(1);

            try {
              var fileId = uppy.addFile({
                name,
                meta: {
                  relativePath: _this5.value._,
                  index: _this5.index
                },
                data: '',
                isRemote: true
              });
              uppy.setFileState(fileId, {
                progress: {
                  uploadComplete: true,
                  uploadStarted: true
                }
              });
              instances.add(_this5);
            } catch (exception) {
              console.log(exception);
            }
          }

          yield _this5.refreshPreviews();
          return html(_templateObject2$6 || (_templateObject2$6 = _taggedTemplateLiteralLoose([""])));
        })();
      }

      refreshPreviews() {
        var _this6 = this;

        return _asyncToGenerator(function* () {
          var uppy = yield _this6.getUppy(_this6.definition['@id'] + Language.l10nLanguage);
          uppy.getFiles().forEach(file => {
            if (!failedPreviews.has(file.meta.relativePath)) {
              var image = new Image();

              image.onload = () => uppy.setFileState(file.id, {
                preview: file.meta.relativePath
              });

              image.onerror = () => failedPreviews.add(file.meta.relativePath);

              image.src = file.meta.relativePath;
            }

            setTimeout(() => {
              var images = [...uppy.rdfFormElement.querySelectorAll('.uppy-Dashboard-Item-previewImg')];

              for (var _image of images) {
                _this6.attachImageEvents(_image);
              }
            }, 800);
          });
        })();
      }

    }

    var defaultParagraphSeparatorString = 'defaultParagraphSeparator';
    var formatBlock = 'formatBlock';

    var addEventListener = (parent, type, listener) => parent.addEventListener(type, listener);

    var appendChild = (parent, child) => parent.appendChild(child);

    var createElement = tag => document.createElement(tag);

    var queryCommandState = command => document.queryCommandState(command);

    var queryCommandValue = command => document.queryCommandValue(command);

    var exec = function exec(command, value) {
      if (value === void 0) {
        value = null;
      }

      return document.execCommand(command, false, value);
    };
    var defaultActions = {
      bold: {
        icon: '<b>B</b>',
        title: 'Bold',
        state: () => queryCommandState('bold'),
        result: () => exec('bold')
      },
      italic: {
        icon: '<i>I</i>',
        title: 'Italic',
        state: () => queryCommandState('italic'),
        result: () => exec('italic')
      },
      underline: {
        icon: '<u>U</u>',
        title: 'Underline',
        state: () => queryCommandState('underline'),
        result: () => exec('underline')
      },
      strikethrough: {
        icon: '<strike>S</strike>',
        title: 'Strike-through',
        state: () => queryCommandState('strikeThrough'),
        result: () => exec('strikeThrough')
      },
      heading1: {
        icon: '<b>H<sub>1</sub></b>',
        title: 'Heading 1',
        result: () => exec(formatBlock, '<h1>')
      },
      heading2: {
        icon: '<b>H<sub>2</sub></b>',
        title: 'Heading 2',
        result: () => exec(formatBlock, '<h2>')
      },
      paragraph: {
        icon: '&#182;',
        title: 'Paragraph',
        result: () => exec(formatBlock, '<p>')
      },
      quote: {
        icon: '&#8220; &#8221;',
        title: 'Quote',
        result: () => exec(formatBlock, '<blockquote>')
      },
      olist: {
        icon: '&#35;',
        title: 'Ordered List',
        result: () => exec('insertOrderedList')
      },
      ulist: {
        icon: '&#8226;',
        title: 'Unordered List',
        result: () => exec('insertUnorderedList')
      },
      code: {
        icon: '&lt;/&gt;',
        title: 'Code',
        result: () => exec(formatBlock, '<pre>')
      },
      line: {
        icon: '&#8213;',
        title: 'Horizontal Line',
        result: () => exec('insertHorizontalRule')
      },
      link: {
        icon: '&#128279;',
        title: 'Link',
        result: () => {
          var url = window.prompt('Enter the link URL');
          if (url) exec('createLink', url);
        }
      },
      image: {
        icon: '&#128247;',
        title: 'Image',
        result: () => {
          var url = window.prompt('Enter the image URL');
          if (url) exec('insertImage', url);
        }
      }
    };
    var defaultClasses = {
      actionbar: 'pell-actionbar',
      button: 'pell-button',
      content: 'pell-content',
      selected: 'pell-button-selected'
    };
    var init = settings => {
      var actions = settings.actions ? settings.actions.map(action => {
        if (typeof action === 'string') return defaultActions[action];else if (defaultActions[action.name]) return _extends({}, defaultActions[action.name], action);
        return action;
      }) : Object.keys(defaultActions).map(action => defaultActions[action]);

      var classes = _extends({}, defaultClasses, settings.classes);

      var defaultParagraphSeparator = settings[defaultParagraphSeparatorString] || 'div';
      var actionbar = createElement('div');
      actionbar.className = classes.actionbar;
      appendChild(settings.element, actionbar);
      var content = settings.element.content = createElement('div');
      content.contentEditable = true;
      content.className = classes.content;

      content.oninput = _ref => {
        var {
          target: {
            firstChild
          }
        } = _ref;
        if (firstChild && firstChild.nodeType === 3) exec(formatBlock, "<" + defaultParagraphSeparator + ">");else if (content.innerHTML === '<br>') content.innerHTML = '';
        settings.onChange(content.innerHTML);
      };

      content.onkeydown = event => {
        if (event.key === 'Enter' && queryCommandValue(formatBlock) === 'blockquote') {
          setTimeout(() => exec(formatBlock, "<" + defaultParagraphSeparator + ">"), 0);
        }
      };

      appendChild(settings.element, content);
      actions.forEach(action => {
        var button = createElement('button');
        button.className = classes.button;
        button.innerHTML = action.icon;
        button.title = action.title;
        button.setAttribute('type', 'button');

        button.onclick = () => action.result() && content.focus();

        if (action.state) {
          var handler = () => button.classList[action.state() ? 'add' : 'remove'](classes.selected);

          addEventListener(content, 'keyup', handler);
          addEventListener(content, 'mouseup', handler);
          addEventListener(button, 'click', handler);
        }

        appendChild(actionbar, button);
      });
      if (settings.styleWithCSS) exec('styleWithCSS');
      exec(defaultParagraphSeparatorString, defaultParagraphSeparator);
      return settings.element;
    };

    var _templateObject$d, _templateObject2$7, _templateObject3$6;
    var modes = /*#__PURE__*/new Map();
    class WYSIWYG extends Textarea {
      item() {
        var _this$index,
            _modes$get,
            _this$value$Value,
            _this$value,
            _this = this;

        var id = this.definition['@id'] + ((_this$index = this.index) != null ? _this$index : 0);
        var mode = (_modes$get = modes.get(id)) != null ? _modes$get : 'wysiwyg';
        var textValue = (_this$value$Value = (_this$value = this.value) == null ? void 0 : _this$value['@value']) != null ? _this$value$Value : '';
        if (typeof textValue === 'string') textValue.trim();

        if (!this.editor) {
          var element = document.createElement('div');
          element.classList.add('wysiwyg-wrapper');
          this.editor = init({
            element: element,
            actions: ['bold', 'italic', 'ulist', 'heading1', 'heading2', 'paragraph', 'link', {
              icon: '&#9998;',
              title: 'Switch to HTML',
              result: function () {
                var _result = _asyncToGenerator(function* () {
                  modes.set(id, 'html');
                  yield _this.render();
                });

                function result() {
                  return _result.apply(this, arguments);
                }

                return result;
              }()
            }],
            defaultParagraphSeparator: 'p',
            onChange: function () {
              var _onChange = _asyncToGenerator(function* (html) {
                if (html) {
                  if (!_this.value) yield _this.addItem();
                  _this.value['@value'] = html;
                } else {
                  _this.removeItem();
                }

                _this.dispatchChange();
              });

              function onChange(_x) {
                return _onChange.apply(this, arguments);
              }

              return onChange;
            }()
          });
          element.content.innerHTML = textValue;
        }

        return mode === 'wysiwyg' ? this.editor : html(_templateObject$d || (_templateObject$d = _taggedTemplateLiteralLoose(["\n      <button class=\"button primary switch-editor\" onclick=", ">", "</button>\n      ", "\n    "])), /*#__PURE__*/_asyncToGenerator(function* () {
          var _this$value2;

          modes.set(id, 'wysiwyg');
          yield _this.render();
          _this.editor.content.innerHTML = (_this$value2 = _this.value) == null ? void 0 : _this$value2._;
        }), this.t(_templateObject2$7 || (_templateObject2$7 = _taggedTemplateLiteralLoose(["Switch to editor"]))), super.item());
      }

      valueDisplay() {
        return html(_templateObject3$6 || (_templateObject3$6 = _taggedTemplateLiteralLoose(["<div ref=", "></div>"])), element => {
          var _this$value3;

          return element.innerHTML = (_this$value3 = this.value) == null ? void 0 : _this$value3._;
        });
      }

    }

    var _templateObject$e;
    class Wrapper extends ElementBase {
      constructor() {
        super(...arguments);
      }

      input() {
        return html(_templateObject$e || (_templateObject$e = _taggedTemplateLiteralLoose([""])));
      }

    }

    var BaseFields = {
      'checkbox': Checkbox,
      'color': Color,
      'container': Container,
      'date': Date$1,
      'details': Details,
      'dropdown': Dropdown,
      'group': Group,
      'language-picker': LanguagePicker,
      'mail': Mail,
      'number': Number$1,
      'reference': Reference,
      'string': String$1,
      'textarea': Textarea,
      'unknown': Unknown,
      'url': Url,
      'url-image': UrlImage,
      'url-uppy': UrlUppy,
      'wysiwyg': WYSIWYG,
      'wrapper': Wrapper
    };

    class Registry extends EventTarget {
      constructor(rdfForm) {
        super();
        this.ready = false;
        this.registeredFieldClasses = {};
        this.form = rdfForm;
        this.init();
      }

      init() {
        var _this = this;

        return _asyncToGenerator(function* () {
          var event = new CustomEvent('register-elements', {
            detail: {
              fields: []
            }
          });

          _this.form.dispatchEvent(event);

          Object.assign(_this.registeredFieldClasses, BaseFields, event.detail.fields);
          _this.ready = true;

          _this.dispatchEvent(new CustomEvent('ready'));
        })();
      }

      setupElement(definition, bindings, value, itemValues, parentValues, render, parent, index, children) {
        var _this2 = this;

        return _asyncToGenerator(function* () {
          var _definition$formWidg, _definition$formWidg2;

          if (value === void 0) {
            value = null;
          }

          if (itemValues === void 0) {
            itemValues = {};
          }

          if (parentValues === void 0) {
            parentValues = null;
          }

          if (render === void 0) {
            render = () => null;
          }

          if (index === void 0) {
            index = null;
          }

          if (children === void 0) {
            children = [];
          }

          var widget = (_definition$formWidg = definition['form:widget']) != null && _definition$formWidg._ && _this2.registeredFieldClasses[(_definition$formWidg2 = definition['form:widget']) == null ? void 0 : _definition$formWidg2._] ? definition['form:widget']._ : 'unknown';
          var elementClass = _this2.registeredFieldClasses[widget];

          if (!elementClass) {
            var _definition$formWidg3;

            console.log(_this2.registeredFieldClasses);
            throw new Error('Unknown widget type: ' + ((_definition$formWidg3 = definition['form:widget']) == null ? void 0 : _definition$formWidg3._));
          }

          return new elementClass(definition, bindings, value, itemValues, parentValues, render, parent, index, children);
        })();
      }

    }

    var flatMapProxy = (data, binding) => {
      var flat = data.flatMap(item => item[binding]);
      return new Proxy(data, {
        get(_target, prop, receiver) {
          if (prop === '_proxyType') return 'flatMapProxy';
          return Reflect.get(flat, prop, receiver);
        },

        has(_target, prop) {
          return Reflect.has(flat, prop);
        },

        deleteProperty() {
          return true;
        }

      });
    };

    var containerProxy = (data, mainBinding) => {
      return new Proxy(data, {
        get: function get(_target, prop) {
          if (prop === '_proxyType') return 'containerProxy';
          if (!data[mainBinding]) return false;
          return Reflect.get(data[mainBinding], prop);
        },
        has: function has(_target, prop) {
          if (!data[mainBinding]) return false;
          return Reflect.has(data[mainBinding], prop);
        },
        set: function set(_target, prop, value) {
          if (!data[mainBinding]) {
            data[mainBinding] = [{
              '@list': []
            }];
            return true;
          } else {
            return Reflect.set(data[mainBinding], prop, value);
          }
        }
      });
    };

    var RdfFormCss = ".actions {\n  display: flex;\n  gap: 10px;\n  position: relative;\n  z-index: 10000;\n}\n.actions.top > .language-switcher {\n  flex: 0 0 130px;\n  margin-left: auto;\n}\n\ninput:not(.uppy-Url-input), textarea, select {\n  flex: 1 1 auto;\n  padding: 8px;\n  border: 1px solid var(--color-gray);\n  border-radius: var(--radius);\n}\n\ntextarea {\n  resize: vertical;\n}\n\ninput[readonly] {\n  background: none;\n  border: none;\n  position: relative;\n  top: 1px;\n  outline: none;\n  padding: 0;\n  line-height: 30px;\n}\n\n:host > * {\n  margin-bottom: 25px;\n}\n\n* {\n  box-sizing: border-box;\n}\n\n.svg-inline--fa.fa-w-8 {\n  width: 8px;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 10px;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 11px;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 14px;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 16px;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 20px;\n}\n\n.button {\n  padding: 10px;\n  border-radius: var(--radius);\n  background: var(--color-gray);\n  cursor: pointer;\n  border: none;\n  position: relative;\n  overflow: hidden;\n  white-space: nowrap;\n  display: flex;\n  gap: 10px;\n}\n.button.big {\n  padding: 20px 40px;\n  font-size: 18px;\n  font-weight: bold;\n}\n.button.primary {\n  background: var(--color-primary);\n}\n.button.secondary {\n  background: var(--color-secondary);\n}\n.button.danger {\n  background: var(--color-danger);\n  color: white;\n}\n.button.danger svg path {\n  fill: white;\n}\n.button svg {\n  display: block;\n  pointer-events: none;\n}\n.button.is-working {\n  position: relative;\n  background: var(--color-primary-darker);\n  color: white;\n}\n.button.is-working:after {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background-image: linear-gradient(-45deg, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%, transparent);\n  z-index: 1;\n  background-size: 37px;\n  animation: move 2s linear infinite;\n  overflow: hidden;\n}\n.button:after {\n  content: \"\";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: black;\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 0.2s ease-in-out;\n}\n.button:hover:after {\n  opacity: 0.2;\n}\n\n@keyframes move {\n  0% {\n    background-position: 0 0;\n  }\n  100% {\n    background-position: 50px 50px;\n  }\n}\n.icon-button {\n  cursor: pointer;\n}\n.icon-button svg {\n  position: relative;\n  top: 3px;\n}\n\n.label {\n  font-weight: bold;\n  padding-bottom: 10px;\n  display: flex;\n  align-items: flex-end;\n}\n.label small {\n  color: var(--color-gray-medium);\n  font-weight: normal;\n}\n\n.label-required-star {\n  margin-left: 5px;\n}\n\n.form-element {\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  margin-bottom: 10px;\n  flex: 1 1 auto;\n}\n.form-element .description {\n  font-size: 14px;\n  margin-bottom: 10px;\n  margin-inline: 5px;\n  line-height: 22px;\n  font-style: italic;\n  color: var(--color-gray-medium);\n}\n.form-element > .label {\n  height: 46px;\n}\n.form-element textarea:invalid,\n.form-element input:invalid {\n  box-shadow: none;\n}\n\n.items {\n  padding: 5px;\n  margin-bottom: 10px;\n  background: var(--background-color);\n  border-radius: var(--radius);\n}\n\n.item {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n  padding: 5px;\n  position: relative;\n  align-items: flex-start;\n}\n.item:not(:last-child) {\n  border-bottom: 1px dashed var(--color-gray);\n}\n.item:after {\n  content: \"\";\n  display: block;\n  position: absolute;\n  top: 5px;\n  left: 3px;\n  width: calc(100% - 6px);\n  height: calc(100% - 10px);\n  pointer-events: none;\n}\n.item[loading=true]:after {\n  background: linear-gradient(-45deg, rgba(200, 200, 200, 0.2) 25%, transparent 25%, transparent 50%, rgba(200, 200, 200, 0.2) 50%, rgba(200, 200, 200, 0.2) 75%, transparent 75%, transparent);\n  z-index: 1;\n  background-size: 50px 50px;\n  animation: move 2s linear infinite;\n}\n.item > .button {\n  height: 35px;\n  width: 35px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.item .sub-item {\n  flex: 1 1 10%;\n}\n.item .sub-item select {\n  width: 100%;\n}\n.item .sub-item input {\n  box-sizing: content-box;\n  width: calc(100% - 20px);\n}\n\n.item-footer {\n  flex: 0 0 100%;\n}\n\n@keyframes move {\n  0% {\n    background-position: 0 0;\n  }\n  100% {\n    background-position: 50px 50px;\n  }\n}\n.form-element.no-label > .items {\n  padding: 0;\n  margin-inline: -5px;\n}\n\n:host {\n  --radius: 4px;\n  --background-color: #eef6f4;\n  --background-color-secondary: #dbdbdb;\n  --color-gray-light: #ecebeb;\n  --color-gray: #c3c3c3;\n  --color-gray-dark: #827575;\n  --color-gray-blue: #f3f5f9;\n  --color-gray-medium: #908989;\n  --color-primary: #99e9ab;\n  --color-primary-darker: #45a35b;\n  --color-secondary: #b0c6b4;\n  --color-danger: #cd4d4d;\n  --color-text: #102406;\n  font-family: \"Helvetica Neue\", sans-serif;\n  margin: 0 auto;\n  display: block;\n  color: var(--color-text);\n}\n\n.search-suggestions {\n  flex: 0 0 100%;\n  padding: 0;\n  background: white;\n  margin: 0;\n  margin-top: 10px;\n  list-style: none;\n  border: 1px solid var(--color-gray);\n  border-radius: var(--radius);\n  overflow: hidden;\n}\n.search-suggestions .search-suggestion {\n  display: flex;\n  align-items: center;\n}\n.search-suggestions .search-suggestion .image {\n  width: 40px;\n  height: 40px;\n  display: block;\n  margin-right: 10px;\n  background: var(--color-gray);\n}\n.search-suggestions .search-suggestion .image img {\n  width: 40px;\n  height: 40px;\n  object-fit: cover;\n  object-position: center;\n  display: block;\n}\n.search-suggestions .search-suggestion .title {\n  padding: 10px;\n}\n.search-suggestions .search-suggestion:not(.no-results):hover {\n  cursor: pointer;\n  background: var(--background-color);\n}\n.search-suggestions .search-suggestion.no-results {\n  cursor: default;\n}\n.search-suggestions .search-suggestion + .search-suggestion {\n  border-top: 1px dashed var(--color-gray);\n}\n\nselect {\n  appearance: none;\n  cursor: pointer;\n  background: white;\n}\nselect:not([multiple]) {\n  background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"gray\" d=\"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z\"></path></svg>');\n  background-repeat: no-repeat;\n  background-size: 14px;\n  background-position: calc(100% - 10px) center;\n  padding-right: 30px;\n}\n\n.ss-main {\n  position: relative;\n  display: inline-block;\n  user-select: none;\n  color: var(--color-text);\n  width: 100%;\n}\n.ss-main .ss-single-selected {\n  display: flex;\n  cursor: pointer;\n  width: 100%;\n  padding: 10px;\n  border: 1px solid var(--color-gray);\n  background-color: white;\n  outline: 0;\n  box-sizing: border-box;\n  transition: background-color 0.2s;\n}\n.ss-main .ss-single-selected.ss-disabled {\n  background-color: var(--color-gray-light);\n  cursor: not-allowed;\n}\n.ss-main .ss-single-selected.ss-open-above {\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n}\n.ss-main .ss-single-selected.ss-open-below {\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n}\n.ss-main .ss-single-selected .placeholder {\n  display: flex;\n  flex: 1 1 100%;\n  align-items: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-align: left;\n  width: calc(100% - 30px);\n  line-height: 1em;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.ss-main .ss-single-selected .placeholder * {\n  display: flex;\n  align-items: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: auto;\n}\n.ss-main .ss-single-selected .placeholder .ss-disabled {\n  color: var(--color-gray-light);\n}\n.ss-main .ss-single-selected .ss-deselect {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  flex: 0 1 auto;\n  margin: 0 6px 0 6px;\n  font-weight: bold;\n}\n.ss-main .ss-single-selected .ss-deselect.ss-hide {\n  display: none;\n}\n.ss-main .ss-single-selected .ss-arrow {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  flex: 0 1 auto;\n  margin: 0 6px 0 6px;\n}\n.ss-main .ss-single-selected .ss-arrow span {\n  border: solid var(--color-text);\n  border-width: 0 2px 2px 0;\n  display: inline-block;\n  padding: 3px;\n  transition: transform 0.2s, margin 0.2s;\n}\n.ss-main .ss-single-selected .ss-arrow span.arrow-up {\n  transform: rotate(-135deg);\n  margin: 3px 0 0 0;\n}\n.ss-main .ss-single-selected .ss-arrow span.arrow-down {\n  transform: rotate(45deg);\n  margin: -3px 0 0 0;\n}\n.ss-main .ss-multi-selected {\n  display: flex;\n  min-height: 33px;\n  flex-direction: row;\n  border: solid 1px var(--color-gray);\n  background: white;\n  border-radius: var(--radius);\n}\n.ss-main .ss-multi-selected.ss-disabled {\n  background-color: var(--color-gray-light);\n  cursor: not-allowed;\n}\n.ss-main .ss-multi-selected.ss-disabled .ss-values .ss-disabled {\n  color: var(--color-text);\n}\n.ss-main .ss-multi-selected.ss-disabled .ss-values .ss-value .ss-value-delete {\n  cursor: not-allowed;\n}\n.ss-main .ss-multi-selected.ss-open-above {\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n}\n.ss-main .ss-multi-selected.ss-open-below {\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n}\n.ss-main .ss-multi-selected .ss-values {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  flex: 1 1 100%;\n  padding: 4px;\n  width: calc(100% - 30px);\n}\n.ss-main .ss-multi-selected .ss-values .ss-disabled {\n  display: flex;\n  padding: 4px 5px;\n  font-size: 16px;\n  margin: 2px 0;\n  line-height: 1em;\n  align-items: center;\n  width: 100%;\n  color: var(--color-gray-light);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.ss-main .ss-multi-selected .ss-values .ss-value {\n  display: flex;\n  user-select: none;\n  align-items: center;\n  font-size: 12px;\n  padding: 3px 6px;\n  margin: 2px 5px 2px 0;\n  color: var(--text);\n  background-color: var(--color-gray);\n  border-radius: var(--radius);\n}\n.ss-main .ss-multi-selected .ss-values .ss-value .ss-value-delete {\n  margin: 0 0 0 5px;\n  cursor: pointer;\n}\n.ss-main .ss-multi-selected .ss-add {\n  display: flex;\n  flex: 0 1 3px;\n  align-items: center;\n  margin-right: 16px;\n}\n.ss-main .ss-multi-selected .ss-add .ss-plus {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: var(--color-gray-medium);\n  position: relative;\n  height: 15px;\n  width: 3px;\n  transition: transform 0.2s;\n}\n.ss-main .ss-multi-selected .ss-add .ss-plus:after {\n  background: var(--color-gray-medium);\n  content: \"\";\n  position: absolute;\n  height: 3px;\n  width: 15px;\n  left: -6px;\n  top: 6px;\n}\n.ss-main .ss-multi-selected .ss-add .ss-plus.ss-cross {\n  transform: rotate(45deg);\n}\n\n.ss-content {\n  position: absolute;\n  width: 100%;\n  margin: -1px 0 0 0;\n  box-sizing: border-box;\n  border: solid 1px var(--color-gray);\n  z-index: 1010;\n  background-color: white;\n  transform-origin: center top;\n  transition: transform 0.2s, opacity 0.2s;\n  opacity: 0;\n  transform: scaleY(0);\n}\n.ss-content.ss-open {\n  display: block;\n  opacity: 1;\n  transform: scaleY(1);\n}\n.ss-content .ss-search {\n  display: flex;\n  flex-direction: row;\n}\n.ss-content .ss-search.ss-hide {\n  height: 0;\n  opacity: 0;\n  padding: 0;\n  margin: 0;\n}\n.ss-content .ss-search.ss-hide input {\n  height: 0;\n  opacity: 0;\n  padding: 0;\n  margin: 0;\n}\n.ss-content .ss-search input {\n  display: inline-flex;\n  font-size: inherit;\n  line-height: inherit;\n  flex: 1 1 auto;\n  width: 100%;\n  min-width: 0;\n  height: 30px;\n  padding: 6px 8px;\n  margin: 0;\n  border: none;\n  background-color: white;\n  outline: 0;\n  text-align: left;\n  box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  -webkit-appearance: textfield;\n}\n.ss-content .ss-search input:focus {\n  box-shadow: none;\n}\n.ss-content .ss-search input::placeholder {\n  vertical-align: middle;\n}\n.ss-content .ss-search .ss-addable {\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  font-size: 22px;\n  font-weight: bold;\n  flex: 0 0 30px;\n  height: 30px;\n  color: var(--color-gray-medium);\n  margin: 0 3px 0 12px;\n  border-radius: var(--radius);\n  box-sizing: border-box;\n}\n.ss-content .ss-addable {\n  padding-top: 0;\n}\n.ss-content .ss-list {\n  max-height: 200px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  text-align: left;\n}\n.ss-content .ss-list .ss-optgroup .ss-optgroup-label {\n  padding: 6px 10px 6px 10px;\n  font-weight: bold;\n}\n.ss-content .ss-list .ss-optgroup .ss-option {\n  padding: 6px 6px 6px 25px;\n}\n.ss-content .ss-list .ss-optgroup-label-selectable {\n  cursor: pointer;\n}\n.ss-content .ss-list .ss-optgroup-label-selectable:hover {\n  color: var(--text);\n  background-color: var(--color-gray);\n}\n.ss-content .ss-list .ss-option {\n  padding: 6px 10px 6px 10px;\n  cursor: pointer;\n  user-select: none;\n}\n.ss-content .ss-list .ss-option * {\n  display: inline-block;\n}\n.ss-content .ss-list .ss-option:hover, .ss-content .ss-list .ss-option.ss-highlighted {\n  color: var(--text);\n  background-color: var(--color-gray);\n}\n.ss-content .ss-list .ss-option.ss-disabled {\n  cursor: not-allowed;\n  color: var(--color-gray-light);\n  background-color: white;\n}\n.ss-content .ss-list .ss-option:not(.ss-disabled).ss-option-selected {\n  color: var(--text);\n  background-color: rgba(var(--color-gray), 0.1);\n}\n.ss-content .ss-list .ss-option.ss-hide {\n  display: none;\n}\n.ss-content .ss-list .ss-option .ss-search-highlight {\n  background-color: var(--color-gray);\n}\n\n.ss-value-delete svg {\n  position: relative;\n  top: 2px;\n  margin-top: -4px;\n  width: 8px !important;\n}\n.ss-value-delete svg path {\n  fill: var(--color-text);\n}\n\n.pell {\n  border: 1px solid rgba(10, 10, 10, 0.1);\n  box-sizing: border-box;\n}\n\n.pell-content {\n  box-sizing: border-box;\n  height: 300px;\n  outline: 0;\n  overflow-y: auto;\n  padding: 10px;\n}\n\n.pell-actionbar {\n  background-color: #FFF;\n  border-bottom: 1px solid rgba(10, 10, 10, 0.1);\n}\n\n.pell-button {\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  height: 30px;\n  outline: 0;\n  width: 30px;\n  vertical-align: bottom;\n}\n\n.pell-button-selected {\n  background-color: #F0F0F0;\n}\n\n.checkbox-label {\n  flex: 1 1 100%;\n  cursor: pointer;\n}\n.checkbox-label > input {\n  margin-left: 0;\n}\n\n.uppy-Dashboard-inner {\n  width: auto !important;\n  border: none !important;\n  background-color: transparent !important;\n  min-height: 280px;\n}\n\n.uppy-Dashboard-files {\n  scrollbar-width: none;\n}\n.uppy-Dashboard-files ::-webkit-scrollbar {\n  display: none;\n}\n.uppy-Dashboard-files > div {\n  min-height: 220px !important;\n}\n.uppy-Dashboard-files > div > div {\n  position: relative !important;\n}\n\n.uppy-DashboardContent-bar {\n  background-color: transparent !important;\n}\n\n.uppy-DashboardContent-bar {\n  border: none !important;\n}\n\n.uppy-Root, .uppy-Root > * {\n  font-family: inherit !important;\n}\n\n.uppy-Dashboard-AddFilesPanel {\n  background: var(--background-color) !important;\n  background-color: var(--background-color) !important;\n}\n\n.uppy-Dashboard-Item,\n.uppy-Dashboard-Item-preview {\n  height: auto !important;\n  user-drag: none;\n  user-select: none;\n}\n\n.uppy-Dashboard-Item-previewIconWrap {\n  margin: 20px;\n}\n\n.uppy-Dashboard-Item-previewInnerWrap {\n  background-color: black !important;\n}\n\n.uppy-Dashboard-Item-preview img.uppy-Dashboard-Item-previewImg {\n  height: auto;\n  object-fit: none;\n  width: auto;\n}\n\n.form-element[type=duration] .granularity {\n  display: flex;\n}\n\n.form-element[type=group] {\n  display: flex;\n}\n.form-element[type=group] > .items > .item:not(:first-child) > .form-element > .label {\n  display: none;\n}\n.form-element[type=group] > .items > .item {\n  flex-wrap: nowrap;\n}\n.form-element[type=group] > .items > .item > .button {\n  margin-bottom: 6px;\n  align-self: flex-end;\n}\n.form-element[type=group] > .items > .item > .form-element {\n  flex: 1 1 100px;\n  margin-bottom: 0;\n  min-width: 80px;\n}\n.form-element[type=group] > .items > .item > .form-element .label {\n  height: auto;\n  color: var(--text);\n  font-style: italic;\n  padding-top: 7px;\n  padding-bottom: 5px;\n  font-size: 14px;\n}\n.form-element[type=group] > .items > .item > .form-element > .items {\n  padding: 0;\n  margin-bottom: 0;\n}\n.form-element[type=group] > .items > .item > .form-element > .items > .item {\n  padding-left: 0;\n  padding-right: 0;\n}\n.form-element[type=group] > .items > .item > .form-element > .items > .item input, .form-element[type=group] > .items > .item > .form-element > .items > .item select {\n  min-width: 80px;\n}\n.form-element[type=group] > .items > .item > .form-element[type=reference] {\n  min-width: 300px;\n}\n.form-element[type=group] > .items > .item > .form-element[type=reference] .item {\n  width: 100%;\n}\n.form-element[type=group] > .items > .item > .form-element[type=reference] .item .button.edit {\n  margin-left: auto;\n}\n\n.form-element[type=reference] .items {\n  display: flex;\n  flex-wrap: wrap;\n}\n.form-element[type=reference] .inner {\n  display: flex;\n  width: 100%;\n}\n.form-element[type=reference] .standard-options {\n  left: 5px;\n  right: 5px;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  z-index: 10;\n  width: 100%;\n  margin-top: 10px;\n  top: 40px;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n}\n.form-element[type=reference] .standard-options > .standard-option {\n  border: 1px solid var(--color-gray);\n  padding: 8px;\n  border-radius: var(--radius);\n  cursor: pointer;\n  transition: opacity 0.2s ease-in-out;\n}\n.form-element[type=reference] .standard-options > .standard-option:hover {\n  background-color: var(--color-primary);\n}\n.form-element[type=reference] .search-suggestions {\n  top: 29px;\n  left: 5px;\n  right: 5px;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  position: absolute;\n  z-index: 10;\n}\n.form-element[type=reference] .item {\n  align-items: center;\n  gap: 0;\n}\n.form-element[type=reference] .item input {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  outline: none;\n}\n.form-element[type=reference] .item:not(:last-child) {\n  border-bottom: none;\n}\n.form-element[type=reference] .item[has-suggestions] .button {\n  border-bottom-right-radius: 0;\n}\n.form-element[type=reference] .item[has-suggestions] input {\n  border-bottom-left-radius: 0;\n}\n.form-element[type=reference] .item .button:not(:last-child):not(.remove) {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n.form-element[type=reference] .item * + .button {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.form-element[type=reference] .reference-loading {\n  padding-left: 10px;\n  font-size: 12px;\n}\n.form-element[type=reference] .reference-label {\n  background: white;\n  border-top-left-radius: var(--radius);\n  border-bottom-left-radius: var(--radius);\n  border: 1px solid var(--color-gray);\n  padding-right: 10px;\n  display: flex;\n  flex: 1 1 auto;\n  width: auto;\n  align-items: center;\n  height: 35px;\n}\n.form-element[type=reference] .reference-label a, .form-element[type=reference] .reference-label span {\n  margin-left: 10px;\n}\n.form-element[type=reference] .reference-label[type=text] {\n  padding-left: 10px;\n}\n.form-element[type=reference] .reference-label .image {\n  width: 33px;\n  height: 33px;\n  border-top-left-radius: var(--radius);\n  border-bottom-left-radius: var(--radius);\n  background-color: var(--color-gray);\n  overflow: hidden;\n}\n.form-element[type=reference] .reference-label .image img {\n  object-fit: cover;\n  object-position: center;\n  width: 100%;\n  height: 100%;\n}\n\n.switch {\n  position: relative;\n  display: inline-block;\n  width: 60px;\n  height: 35px;\n  border-radius: var(--radius);\n}\n.switch input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n.switch .slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: var(--color-gray-light);\n  -webkit-transition: 0.4s;\n  transition: 0.4s;\n  border-radius: var(--radius);\n}\n.switch .slider:before {\n  position: absolute;\n  content: \"\";\n  height: 20px;\n  width: 20px;\n  border-radius: var(--radius);\n  left: 8px;\n  bottom: 6px;\n  background-color: white;\n  -webkit-transition: 0.4s;\n  transition: 0.4s;\n  border: 1px solid var(--color-gray);\n}\n.switch input:checked + .slider {\n  background-color: var(--color-secondary);\n}\n.switch input:focus + .slider {\n  box-shadow: 0 0 1px var(--color-secondary);\n}\n.switch input:checked + .slider:before {\n  transform: translateX(23px);\n}\n\n.form-element[type=url-uppy] img,\n.form-element[type=url-image] img {\n  max-width: 100%;\n  max-height: 300px;\n  user-select: none;\n  -webkit-user-drag: none;\n}\n.form-element[type=url-uppy] .top,\n.form-element[type=url-image] .top {\n  display: flex;\n  width: 100%;\n  gap: 10px;\n}\n.form-element[type=url-uppy] .image-wrapper,\n.form-element[type=url-image] .image-wrapper {\n  display: inline-flex;\n  position: relative;\n}\n.form-element[type=url-uppy] .focal-point-description,\n.form-element[type=url-image] .focal-point-description {\n  background: var(--color-primary);\n  padding: 5px;\n}\n.form-element[type=url-uppy] .focal-point,\n.form-element[type=url-image] .focal-point {\n  pointer-events: none;\n  position: absolute;\n  z-index: 1;\n}\n.form-element[type=url-uppy] .focal-point:before, .form-element[type=url-uppy] .focal-point:after,\n.form-element[type=url-image] .focal-point:before,\n.form-element[type=url-image] .focal-point:after {\n  content: \"\";\n  display: block;\n  width: 40px;\n  height: 0px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.form-element[type=url-uppy] .focal-point:after,\n.form-element[type=url-image] .focal-point:after {\n  transform: translate(-50%, -50%) rotate(90deg);\n}\n.form-element[type=url-uppy] .item,\n.form-element[type=url-image] .item {\n  flex-direction: column;\n}\n.form-element[type=url-uppy] input,\n.form-element[type=url-image] input {\n  width: 100%;\n}\n.form-element[type=url-uppy] .image-background,\n.form-element[type=url-image] .image-background {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  opacity: 0.3;\n}\n\n.form-element[type=color] input[type=color] {\n  height: 60px;\n  max-width: 60px;\n}\n\n.form-element[type=container] > .items {\n  padding: 0;\n  background: none;\n  margin-bottom: 0;\n}\n.form-element[type=container] > .items > .item {\n  margin-bottom: 0;\n}\n.form-element[type=container] > .items > .item .form-element {\n  flex: 1 1 30%;\n  margin-bottom: 0;\n}\n\n.form-element.column > .items > .item {\n  flex-direction: column;\n}\n.form-element.column > .items > .item > .form-element {\n  width: 100%;\n}\n\n.form-element[type=details] summary {\n  cursor: pointer;\n}\n.form-element[type=details] summary > .label {\n  display: inline-flex;\n  pointer-events: none;\n  height: 46px;\n}\n\n[name=sidebar] .form-element[type=details] > .items {\n  background-color: var(--color-gray-blue);\n  --background-color: #e8eaf0;\n  --color-primary: #b0bcd9;\n  --color-secondary: #cdd3e2;\n}\n\n.form-element[type=language-picker] {\n  background: none;\n  border: 0;\n  z-index: 9;\n}\n.form-element[type=language-picker] .items, .form-element[type=language-picker] .item {\n  padding: 0;\n  margin: 0;\n  border: 0;\n  background: none;\n}\n.form-element[type=language-picker] .language-switcher {\n  flex: 1 1 100px;\n  margin-top: 3px;\n  display: flex;\n}\n.form-element[type=language-picker] .language-switcher svg {\n  position: relative;\n  top: 2px;\n  margin-right: 10px;\n}\n.form-element[type=language-picker] .language-switcher svg path {\n  fill: var(--color-gray-medium);\n}\n.form-element[type=language-picker] .item .ss-main {\n  flex: 1 1 80%;\n}\n.form-element[type=language-picker] .item .ss-multi-selected {\n  overflow-x: auto;\n  overflow-y: hidden;\n  scrollbar-width: none;\n  border-radius: 0 !important;\n}\n.form-element[type=language-picker] .item .ss-multi-selected::-webkit-scrollbar {\n  display: none;\n}\n.form-element[type=language-picker] .item .ss-multi-selected:before, .form-element[type=language-picker] .item .ss-multi-selected:after {\n  content: \"\";\n  display: block;\n  width: 100px;\n  pointer-events: none;\n  height: calc(100% - 1px);\n  position: absolute;\n  bottom: 1px;\n  z-index: 2;\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n.form-element[type=language-picker] .item .ss-multi-selected:before {\n  left: 0;\n  background-image: linear-gradient(-90deg, rgba(255, 255, 255, 0) 0%, white 100%);\n}\n.form-element[type=language-picker] .item .ss-multi-selected:after {\n  right: 39px;\n  background-image: linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, white 100%);\n}\n.form-element[type=language-picker] .item .ss-multi-selected.hide-left-shadow:before {\n  opacity: 0;\n}\n.form-element[type=language-picker] .item .ss-multi-selected.hide-right-shadow:after {\n  opacity: 0;\n}\n.form-element[type=language-picker] .item .ss-values {\n  padding: 0;\n  flex-wrap: nowrap;\n  white-space: nowrap;\n  width: auto;\n  padding-inline-end: 40px;\n}\n.form-element[type=language-picker] .item .ss-values:after {\n  content: \"\";\n  display: block;\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 1px;\n  border-bottom: 1px solid var(--color-gray);\n}\n.form-element[type=language-picker] .item .ss-values .ss-value:not(.active) .ss-value-text {\n  color: var(--color-gray-dark);\n}\n.form-element[type=language-picker] .item .ss-values .ss-value.active {\n  position: sticky;\n  left: 0;\n  right: 40px;\n  z-index: 3;\n}\n.form-element[type=language-picker] .item .ss-values > .ss-disabled {\n  cursor: pointer;\n  color: var(--text);\n  padding: 15px 0;\n}\n.form-element[type=language-picker] .item .ss-add {\n  cursor: pointer;\n  flex: 0 1 30px;\n  position: relative;\n  padding-inline-start: 30px;\n  padding-inline-end: 10px;\n  width: 40px;\n  display: flex;\n  height: 100%;\n  position: absolute;\n  margin-right: 0;\n  background: white;\n  border-bottom: 1px solid var(--color-gray);\n  right: 0px;\n  z-index: 4;\n}\n.form-element[type=language-picker] .item .ss-add .ss-plus {\n  position: absolute;\n  left: 50%;\n}\n.form-element[type=language-picker] .item .ss-content.ss-open {\n  margin-top: 20px;\n  border-radius: var(--radius);\n}\n.form-element[type=language-picker] .item .ss-multi-selected {\n  border: 0;\n}\n.form-element[type=language-picker] .item .ss-value {\n  position: relative;\n  margin-bottom: -1px;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n  padding: 14px;\n  cursor: pointer;\n  font-size: 16px;\n  border: 1px solid var(--color-gray);\n  background: var(--color-gray-light);\n}\n.form-element[type=language-picker] .item .ss-value.active {\n  background: white;\n  border-bottom-color: white;\n}\n.form-element[type=language-picker] .item .ss-value .ss-value-delete svg {\n  width: 10px !important;\n  margin-left: 4px;\n}\n.form-element[type=language-picker] .item .ss-value .ss-value-delete svg path {\n  fill: var(--color-gray-medium);\n}\n\n.wysiwyg-wrapper {\n  width: 100%;\n}\n\n.form-element[type=wysiwyg] .switch-editor {\n  margin: 6px;\n}\n\n.form-element[type=password] .column {\n  flex: 1 1 40%;\n}\n.form-element[type=password] .column > * {\n  width: 100%;\n}\n\n:host form .form-element[name=main] {\n  width: calc(100% - 440px);\n  float: left;\n  margin-right: 40px;\n}\n:host form .form-element[name=sidebar] {\n  width: 400px;\n  float: right;\n}\n:host form .actions {\n  flex-direction: row-reverse;\n  float: left;\n  clear: both;\n  margin-bottom: 40px;\n  width: 100%;\n  border-top: 1px solid var(--color-gray);\n  padding: 20px 0;\n  position: sticky;\n  bottom: 0;\n  background: white;\n  margin-top: 20px;\n}";

    var OnlyDisplay = ".label small,\n.ss-add,\n.ss-value-delete,\n.icon-button {\n  display: none !important;\n}\n\n.ss-multi-selected {\n  pointer-events: none;\n}\n\n.ss-value {\n  pointer-events: all;\n}\n\n.items,\n.item,\n.label {\n  display: inline !important;\n  background: none !important;\n  padding: 0 !important;\n  margin: 0 !important;\n}\n\n.item:not(:last-child) {\n  border: none !important;\n}\n\n.form-element {\n  display: block !important;\n}\n\n.reference-label {\n  border: none !important;\n  display: inline-flex !important;\n  height: auto !important;\n  padding-inline-end: 0 !important;\n}\n.reference-label .image {\n  width: 16px !important;\n  height: 16px !important;\n  margin-right: 4px !important;\n}\n.reference-label .reference-text {\n  margin-left: 0 !important;\n}\n.reference-label a {\n  margin-left: 0 !important;\n}\n\n.form-element:not([type=language-picker]) {\n  margin-bottom: 4px !important;\n}\n\n.form-element[type=language-picker] {\n  margin-bottom: 30px !important;\n}\n\ndetails summary::-webkit-details-marker {\n  display: none;\n}\n\ndetails {\n  margin-top: 14px !important;\n}\ndetails > .items {\n  display: block !important;\n}\ndetails > summary {\n  list-style: none;\n  pointer-events: none;\n  margin-bottom: 6px !important;\n  font-style: italic;\n}\ndetails > summary .label {\n  font-weight: 100 !important;\n}\n\n.form-element[type=url-image] .items {\n  display: flex !important;\n  margin-top: 10px !important;\n}\n.form-element[type=url-image] .items img {\n  border: 1px solid var(--color-gray);\n  margin-inline-end: 30px;\n}\n\n.form-element[type=language-picker] .item .ss-values .ss-value.active,\n.form-element[type=language-picker] .item .ss-multi-selected::after {\n  right: 0;\n}\n\n.form-element[type=language-picker] .item .ss-values {\n  padding-inline-end: 0 !important;\n}\n.form-element[type=language-picker] .item .ss-values .ss-value:last-child {\n  margin-inline-end: 0 !important;\n}";

    var _templateObject$f, _templateObject2$8, _templateObject3$7, _templateObject4$6, _templateObject5$6;
    var urlCache = /*#__PURE__*/new Map();
    class Renderer extends EventTarget {
      constructor(rdfForm) {
        super();
        this.ready = false;
        this.fieldInstances = new Map();
        this.extraStylesheets = new Set();
        this.init();
        this.form = rdfForm;

        if (this.form.getAttribute('extra-stylesheets')) {
          var _this$form$getAttribu;

          var urls = (_this$form$getAttribu = this.form.getAttribute('extra-stylesheets')) == null ? void 0 : _this$form$getAttribu.split(',');

          if (urls) {
            for (var url of urls) {
              this.extraStylesheets.add(url);
            }
          }
        }
      }

      init() {
        var _this = this;

        return _asyncToGenerator(function* () {
          _this.ready = true;

          _this.dispatchEvent(new CustomEvent('ready'));
        })();
      }

      render() {
        var _this2 = this;

        return _asyncToGenerator(function* () {
          var templates = yield _this2.nest(_this2.form.formDefinition.chain, _this2.form.registry, _this2.form.formData.proxy, _this2.form);

          var formSubmit = event => {
            event.preventDefault();
            event.stopImmediatePropagation();

            _this2.form.dispatchEvent(new CustomEvent('submit', {
              detail: {
                proxy: _this2.form.formData.proxy,
                expanded: _this2.form.formData.proxy.$
              }
            }));
          };

          var isDisplayOnly = _this2.form.getAttribute('display');

          if (!urlCache.has(location.toString())) {
            urlCache.set(location.toString(), {});
          }

          render(_this2.form.shadow, html.for(urlCache.get(location.toString()))(_templateObject$f || (_templateObject$f = _taggedTemplateLiteralLoose(["\n      <style>:host { display: none; }</style>\n      <style>", "</style>\n\n      ", "\n\n      ", "\n\n      ", "\n    "])), RdfFormCss, [..._this2.extraStylesheets.values()].map(link => html(_templateObject2$8 || (_templateObject2$8 = _taggedTemplateLiteralLoose(["<link href=", " rel='stylesheet' type='text/css'>"])), link)), isDisplayOnly ? html(_templateObject3$7 || (_templateObject3$7 = _taggedTemplateLiteralLoose(["<style>", "</style>"])), OnlyDisplay) : null, !isDisplayOnly ? html(_templateObject4$6 || (_templateObject4$6 = _taggedTemplateLiteralLoose(["\n      <form onsubmit=", ">\n        ", "\n        <div class=\"actions\">\n          <button class=\"button save primary big\">", "</button>\n        </div>\n      </form>\n\n      "])), formSubmit, templates, t(_templateObject5$6 || (_templateObject5$6 = _taggedTemplateLiteralLoose(["Save"])))) : templates));
        })();
      }

      nest(formDefinition, registry, formData, parent) {
        var _this3 = this;

        return _asyncToGenerator(function* () {
          var templates = [];

          var isDisplayOnly = _this3.form.getAttribute('display');

          for (var [bindings, [field, children]] of formDefinition.entries()) {
            var _field$formBinding;

            var mainBinding = (_field$formBinding = field['form:binding']) == null ? void 0 : _field$formBinding._;
            var isContainer = lastPart(field['@type'][0]) === 'Container';
            var isUiComponent = lastPart(field['@type'][0]) === 'UiComponent';
            var wrapperFieldInstance = isUiComponent || isContainer ? _this3.fieldInstances.get(field.$) : false;
            if (!wrapperFieldInstance) wrapperFieldInstance = yield registry.setupElement(field, bindings, null, {}, formData, () => _this3.render(), parent, null, children);
            if (!wrapperFieldInstance) continue;
            if (!_this3.fieldInstances.has(field.$)) _this3.fieldInstances.set(field.$, wrapperFieldInstance);
            var innerTemplates = [];

            if (mainBinding && !isContainer) {
              var applicableValues = formData != null && formData[mainBinding] ? [...formData[mainBinding].values()].filter(value => !value['@language'] || value['@language'] === Language.l10nLanguage) : [];

              if (formData && Array.isArray(formData.$)) {
                applicableValues = flatMapProxy(formData, mainBinding).filter(value => value && !value['@language'] || value && value['@language'] === Language.l10nLanguage);
              }

              if (applicableValues.length) {
                var _loop = function* _loop(index, value) {
                  var _this3$fieldInstances, _field$formWidget;

                  var itemValues = formData == null ? void 0 : formData[index];

                  if (formData && Array.isArray(formData.$)) {
                    var item = flatMapProxy(formData, mainBinding).find(itemValue => itemValue.$ === value.$);

                    for (var [innerIndex, formDataItem] of formData.$.entries()) {
                      if (formDataItem[mainBinding][0] === item.$) {
                        itemValues = formData[innerIndex];
                      }
                    }
                  }

                  var fieldInstance = (_this3$fieldInstances = _this3.fieldInstances.get(value.$)) != null ? _this3$fieldInstances : yield registry.setupElement(field, bindings, value, itemValues, formData, () => _this3.render(), parent, index, children);
                  if (!_this3.fieldInstances.has(value.$)) _this3.fieldInstances.set(value.$, fieldInstance);
                  var childValues = ((_field$formWidget = field['form:widget']) == null ? void 0 : _field$formWidget._) === 'group' ? formData[mainBinding][index] : formData[mainBinding];
                  var childTemplates = children.size ? yield _this3.nest(children, registry, childValues, wrapperFieldInstance) : [];
                  innerTemplates.push(isDisplayOnly ? fieldInstance.itemDisplay(childTemplates) : fieldInstance.item(childTemplates));
                };

                for (var [index, value] of applicableValues.entries()) {
                  yield* _loop(index, value);
                }
              } else if (!isDisplayOnly) {
                var childTemplates = children.size ? yield _this3.nest(children, registry, [], wrapperFieldInstance) : [];
                innerTemplates.push(isDisplayOnly ? wrapperFieldInstance.itemDisplay(childTemplates) : wrapperFieldInstance.item(childTemplates));
              }
            } else if (isUiComponent) {
              var _childTemplates = children.size ? yield _this3.nest(children, registry, formData, wrapperFieldInstance) : [];

              innerTemplates.push(isDisplayOnly ? wrapperFieldInstance.itemDisplay(_childTemplates) : wrapperFieldInstance.item(_childTemplates));
            } else if (isContainer) {
              var _childTemplates2 = children.size ? yield _this3.nest(children, registry, mainBinding ? containerProxy(formData, mainBinding) : formData, wrapperFieldInstance) : [];

              innerTemplates.push(isDisplayOnly ? wrapperFieldInstance.itemDisplay(_childTemplates2) : wrapperFieldInstance.item(_childTemplates2));
            }

            templates.push(isDisplayOnly ? wrapperFieldInstance.wrapperDisplay(innerTemplates) : wrapperFieldInstance.wrapper(innerTemplates));
          }

          return templates;
        })();
      }

    }

    var expandProxiesInConsole = () => {
      var originalConsoleLog = console.log;

      console.log = function () {
        for (var _len = arguments.length, rawInputs = new Array(_len), _key = 0; _key < _len; _key++) {
          rawInputs[_key] = arguments[_key];
        }

        var inputs = [...rawInputs];

        for (var [index, input] of inputs.entries()) {
          if (input != null && input.isProxy) inputs[index] = input.$;
        }

        originalConsoleLog(...inputs);
      };
    };

    class RdfForm extends HTMLElement {
      constructor() {
        super();
        this.ready = false;
      }

      static get observedAttributes() {
        return ['ui-languages', 'selected-l10n-language', 'selected-language'];
      }

      disconnectedCallback() {
        var _this = this;

        return _asyncToGenerator(function* () {
          _this.dispatchEvent(new CustomEvent('destroy'));
        })();
      }

      attributeChangedCallback(name, _oldValue, newValue) {
        var _this2 = this;

        return _asyncToGenerator(function* () {
          if (!_this2.ready) return;

          if (name === 'form' && newValue) {
            _this2.formDefinition = new FormDefinition(_this2);
            yield _this2.formDefinition.init();
          }

          if (name === 'data' && newValue) {
            _this2.formData = new RdfFormData(_this2);
            yield _this2.formData.init();
          }

          if (name === 'selected-l10n-language') {
            _this2.language.l10nLanguage = newValue;
            yield _this2.language.init(_this2);
          }

          _this2.renderer.render();
        })();
      }

      connectedCallback() {
        var _this3 = this;

        return _asyncToGenerator(function* () {
          if (_this3.shadow) return;
          _this3.shadow = _this3.attachShadow({
            mode: 'open'
          });
          _this3.formDefinition = new FormDefinition(_this3);
          _this3.formData = new RdfFormData(_this3);
          _this3.registry = new Registry(_this3);
          _this3.renderer = new Renderer(_this3);
          _this3.language = Language;

          _this3.language.addEventListener('indexing-languages', event => _this3.dispatchEvent(new CustomEvent('indexing-languages', {
            detail: event.detail
          })));

          _this3.language.addEventListener('l10n-change', event => _this3.dispatchEvent(new CustomEvent('l10n-change', {
            detail: event.detail
          })));

          yield _this3.language.init(_this3);
          _this3.t = t;
          _this3.proxy = _this3.getAttribute('proxy');
          if (_this3.getAttribute('debug') !== null) expandProxiesInConsole();
          var components = [_this3.formDefinition, _this3.formData, _this3.registry, _this3.language, _this3.renderer];

          for (var component of components) {
            component.addEventListener('ready', () => {
              if (components.every(component => component.ready) && !_this3.ready) {
                _this3.ready = true;

                _this3.renderer.render();

                _this3.dispatchEvent(new CustomEvent('ready', {
                  detail: {
                    proxy: _this3.formData.proxy,
                    expanded: _this3.formData.proxy.$
                  }
                }));
              }
            }, {
              once: true
            });
          }
        })();
      }

    }
    customElements.define('rdf-form', RdfForm);

    /* src/Form.svelte generated by Svelte v3.47.0 */

    const { console: console_1 } = globals;
    const file$1 = "src/Form.svelte";

    // (124:0) {:else}
    function create_else_block$1(ctx) {
    	let p0;
    	let t1;
    	let p1;
    	let t2;
    	let a;

    	const block = {
    		c: function create() {
    			p0 = element("p");
    			p0.textContent = "Need a form location in the URL";
    			t1 = space();
    			p1 = element("p");
    			t2 = text$1("Example ");
    			a = element("a");
    			a.textContent = "https://purl.org/acmeForms/app/#https://purl.org/acmeForms/book-review.form.ttl";
    			add_location(p0, file$1, 124, 4, 3232);
    			attr_dev(a, "href", "https://purl.org/acmeForms/app/#https://purl.org/acmeForms/book-review.form.ttl");
    			add_location(a, file$1, 126, 16, 3295);
    			add_location(p1, file$1, 125, 4, 3275);
    		},
    		m: function mount(target, anchor) {
    			insert_dev(target, p0, anchor);
    			insert_dev(target, t1, anchor);
    			insert_dev(target, p1, anchor);
    			append_dev(p1, t2);
    			append_dev(p1, a);
    		},
    		p: noop$1,
    		d: function destroy(detaching) {
    			if (detaching) detach_dev(p0);
    			if (detaching) detach_dev(t1);
    			if (detaching) detach_dev(p1);
    		}
    	};

    	dispatch_dev("SvelteRegisterBlock", {
    		block,
    		id: create_else_block$1.name,
    		type: "else",
    		source: "(124:0) {:else}",
    		ctx
    	});

    	return block;
    }

    // (101:0) {#if formLocation}
    function create_if_block$1(ctx) {
    	let table;
    	let tr0;
    	let th0;
    	let t1;
    	let td0;
    	let a;
    	let t2;
    	let t3;
    	let th1;
    	let t5;
    	let td1;
    	let t6;
    	let tr1;
    	let th2;
    	let t8;
    	let td2;
    	let t9;
    	let th3;
    	let t11;
    	let td3;
    	let t12;
    	let rdf_form;
    	let mounted;
    	let dispose;
    	let if_block0 = /*hydra*/ ctx[4] && create_if_block_3(ctx);
    	let if_block1 = /*dataLocation*/ ctx[3] && create_if_block_2(ctx);
    	let if_block2 = /*hydra*/ ctx[4] && create_if_block_1(ctx);

    	const block = {
    		c: function create() {
    			table = element("table");
    			tr0 = element("tr");
    			th0 = element("th");
    			th0.textContent = "Form template:";
    			t1 = space();
    			td0 = element("td");
    			a = element("a");
    			t2 = text$1(/*formLocation*/ ctx[2]);
    			t3 = space();
    			th1 = element("th");
    			th1.textContent = "Endpoint";
    			t5 = space();
    			td1 = element("td");
    			if (if_block0) if_block0.c();
    			t6 = space();
    			tr1 = element("tr");
    			th2 = element("th");
    			th2.textContent = "Data template:";
    			t8 = space();
    			td2 = element("td");
    			if (if_block1) if_block1.c();
    			t9 = space();
    			th3 = element("th");
    			th3.textContent = "Method";
    			t11 = space();
    			td3 = element("td");
    			if (if_block2) if_block2.c();
    			t12 = space();
    			rdf_form = element("rdf-form");
    			attr_dev(th0, "class", "svelte-y21z7z");
    			add_location(th0, file$1, 103, 4, 2556);
    			attr_dev(a, "href", /*formLocation*/ ctx[2]);
    			add_location(a, file$1, 104, 8, 2588);
    			attr_dev(td0, "class", "svelte-y21z7z");
    			add_location(td0, file$1, 104, 4, 2584);
    			attr_dev(th1, "class", "svelte-y21z7z");
    			add_location(th1, file$1, 105, 4, 2641);
    			attr_dev(td1, "class", "svelte-y21z7z");
    			add_location(td1, file$1, 106, 4, 2663);
    			add_location(tr0, file$1, 102, 4, 2547);
    			attr_dev(th2, "class", "svelte-y21z7z");
    			add_location(th2, file$1, 109, 4, 2759);
    			attr_dev(td2, "class", "svelte-y21z7z");
    			add_location(td2, file$1, 110, 4, 2788);
    			attr_dev(th3, "class", "svelte-y21z7z");
    			add_location(th3, file$1, 111, 4, 2868);
    			attr_dev(td3, "class", "svelte-y21z7z");
    			add_location(td3, file$1, 112, 4, 2888);
    			add_location(tr1, file$1, 108, 4, 2750);
    			add_location(table, file$1, 101, 4, 2535);
    			set_custom_element_data(rdf_form, "id", /*id*/ ctx[0]);
    			set_custom_element_data(rdf_form, "data", /*dataLocation*/ ctx[3]);
    			set_custom_element_data(rdf_form, "form", /*formLocation*/ ctx[2]);
    			set_custom_element_data(rdf_form, "ui-languages", /*languages*/ ctx[5]);
    			set_custom_element_data(rdf_form, "selected-language", /*language*/ ctx[1]);
    			set_custom_element_data(rdf_form, "selected-l10n-language", /*language*/ ctx[1]);
    			add_location(rdf_form, file$1, 115, 4, 2955);
    		},
    		m: function mount(target, anchor) {
    			insert_dev(target, table, anchor);
    			append_dev(table, tr0);
    			append_dev(tr0, th0);
    			append_dev(tr0, t1);
    			append_dev(tr0, td0);
    			append_dev(td0, a);
    			append_dev(a, t2);
    			append_dev(tr0, t3);
    			append_dev(tr0, th1);
    			append_dev(tr0, t5);
    			append_dev(tr0, td1);
    			if (if_block0) if_block0.m(td1, null);
    			append_dev(table, t6);
    			append_dev(table, tr1);
    			append_dev(tr1, th2);
    			append_dev(tr1, t8);
    			append_dev(tr1, td2);
    			if (if_block1) if_block1.m(td2, null);
    			append_dev(tr1, t9);
    			append_dev(tr1, th3);
    			append_dev(tr1, t11);
    			append_dev(tr1, td3);
    			if (if_block2) if_block2.m(td3, null);
    			insert_dev(target, t12, anchor);
    			insert_dev(target, rdf_form, anchor);

    			if (!mounted) {
    				dispose = listen_dev(rdf_form, "submit", /*handlerSubmit*/ ctx[6], false, false, false);
    				mounted = true;
    			}
    		},
    		p: function update(ctx, dirty) {
    			if (dirty & /*formLocation*/ 4) set_data_dev(t2, /*formLocation*/ ctx[2]);

    			if (dirty & /*formLocation*/ 4) {
    				attr_dev(a, "href", /*formLocation*/ ctx[2]);
    			}

    			if (/*hydra*/ ctx[4]) {
    				if (if_block0) {
    					if_block0.p(ctx, dirty);
    				} else {
    					if_block0 = create_if_block_3(ctx);
    					if_block0.c();
    					if_block0.m(td1, null);
    				}
    			} else if (if_block0) {
    				if_block0.d(1);
    				if_block0 = null;
    			}

    			if (/*dataLocation*/ ctx[3]) {
    				if (if_block1) {
    					if_block1.p(ctx, dirty);
    				} else {
    					if_block1 = create_if_block_2(ctx);
    					if_block1.c();
    					if_block1.m(td2, null);
    				}
    			} else if (if_block1) {
    				if_block1.d(1);
    				if_block1 = null;
    			}

    			if (/*hydra*/ ctx[4]) {
    				if (if_block2) {
    					if_block2.p(ctx, dirty);
    				} else {
    					if_block2 = create_if_block_1(ctx);
    					if_block2.c();
    					if_block2.m(td3, null);
    				}
    			} else if (if_block2) {
    				if_block2.d(1);
    				if_block2 = null;
    			}

    			if (dirty & /*id*/ 1) {
    				set_custom_element_data(rdf_form, "id", /*id*/ ctx[0]);
    			}

    			if (dirty & /*dataLocation*/ 8) {
    				set_custom_element_data(rdf_form, "data", /*dataLocation*/ ctx[3]);
    			}

    			if (dirty & /*formLocation*/ 4) {
    				set_custom_element_data(rdf_form, "form", /*formLocation*/ ctx[2]);
    			}

    			if (dirty & /*language*/ 2) {
    				set_custom_element_data(rdf_form, "selected-language", /*language*/ ctx[1]);
    			}

    			if (dirty & /*language*/ 2) {
    				set_custom_element_data(rdf_form, "selected-l10n-language", /*language*/ ctx[1]);
    			}
    		},
    		d: function destroy(detaching) {
    			if (detaching) detach_dev(table);
    			if (if_block0) if_block0.d();
    			if (if_block1) if_block1.d();
    			if (if_block2) if_block2.d();
    			if (detaching) detach_dev(t12);
    			if (detaching) detach_dev(rdf_form);
    			mounted = false;
    			dispose();
    		}
    	};

    	dispatch_dev("SvelteRegisterBlock", {
    		block,
    		id: create_if_block$1.name,
    		type: "if",
    		source: "(101:0) {#if formLocation}",
    		ctx
    	});

    	return block;
    }

    // (107:8) {#if hydra}
    function create_if_block_3(ctx) {
    	let a;
    	let t_value = /*hydra*/ ctx[4].endpoint + "";
    	let t;
    	let a_href_value;

    	const block = {
    		c: function create() {
    			a = element("a");
    			t = text$1(t_value);
    			attr_dev(a, "href", a_href_value = /*hydra*/ ctx[4].endpoint);
    			add_location(a, file$1, 106, 19, 2678);
    		},
    		m: function mount(target, anchor) {
    			insert_dev(target, a, anchor);
    			append_dev(a, t);
    		},
    		p: function update(ctx, dirty) {
    			if (dirty & /*hydra*/ 16 && t_value !== (t_value = /*hydra*/ ctx[4].endpoint + "")) set_data_dev(t, t_value);

    			if (dirty & /*hydra*/ 16 && a_href_value !== (a_href_value = /*hydra*/ ctx[4].endpoint)) {
    				attr_dev(a, "href", a_href_value);
    			}
    		},
    		d: function destroy(detaching) {
    			if (detaching) detach_dev(a);
    		}
    	};

    	dispatch_dev("SvelteRegisterBlock", {
    		block,
    		id: create_if_block_3.name,
    		type: "if",
    		source: "(107:8) {#if hydra}",
    		ctx
    	});

    	return block;
    }

    // (111:8) {#if dataLocation}
    function create_if_block_2(ctx) {
    	let a;
    	let t;

    	const block = {
    		c: function create() {
    			a = element("a");
    			t = text$1(/*dataLocation*/ ctx[3]);
    			attr_dev(a, "href", /*dataLocation*/ ctx[3]);
    			add_location(a, file$1, 110, 26, 2810);
    		},
    		m: function mount(target, anchor) {
    			insert_dev(target, a, anchor);
    			append_dev(a, t);
    		},
    		p: function update(ctx, dirty) {
    			if (dirty & /*dataLocation*/ 8) set_data_dev(t, /*dataLocation*/ ctx[3]);

    			if (dirty & /*dataLocation*/ 8) {
    				attr_dev(a, "href", /*dataLocation*/ ctx[3]);
    			}
    		},
    		d: function destroy(detaching) {
    			if (detaching) detach_dev(a);
    		}
    	};

    	dispatch_dev("SvelteRegisterBlock", {
    		block,
    		id: create_if_block_2.name,
    		type: "if",
    		source: "(111:8) {#if dataLocation}",
    		ctx
    	});

    	return block;
    }

    // (113:8) {#if hydra}
    function create_if_block_1(ctx) {
    	let t_value = /*hydra*/ ctx[4].method + "";
    	let t;

    	const block = {
    		c: function create() {
    			t = text$1(t_value);
    		},
    		m: function mount(target, anchor) {
    			insert_dev(target, t, anchor);
    		},
    		p: function update(ctx, dirty) {
    			if (dirty & /*hydra*/ 16 && t_value !== (t_value = /*hydra*/ ctx[4].method + "")) set_data_dev(t, t_value);
    		},
    		d: function destroy(detaching) {
    			if (detaching) detach_dev(t);
    		}
    	};

    	dispatch_dev("SvelteRegisterBlock", {
    		block,
    		id: create_if_block_1.name,
    		type: "if",
    		source: "(113:8) {#if hydra}",
    		ctx
    	});

    	return block;
    }

    function create_fragment$1(ctx) {
    	let if_block_anchor;

    	function select_block_type(ctx, dirty) {
    		if (/*formLocation*/ ctx[2]) return create_if_block$1;
    		return create_else_block$1;
    	}

    	let current_block_type = select_block_type(ctx);
    	let if_block = current_block_type(ctx);

    	const block = {
    		c: function create() {
    			if_block.c();
    			if_block_anchor = empty$1();
    		},
    		l: function claim(nodes) {
    			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
    		},
    		m: function mount(target, anchor) {
    			if_block.m(target, anchor);
    			insert_dev(target, if_block_anchor, anchor);
    		},
    		p: function update(ctx, [dirty]) {
    			if (current_block_type === (current_block_type = select_block_type(ctx)) && if_block) {
    				if_block.p(ctx, dirty);
    			} else {
    				if_block.d(1);
    				if_block = current_block_type(ctx);

    				if (if_block) {
    					if_block.c();
    					if_block.m(if_block_anchor.parentNode, if_block_anchor);
    				}
    			}
    		},
    		i: noop$1,
    		o: noop$1,
    		d: function destroy(detaching) {
    			if_block.d(detaching);
    			if (detaching) detach_dev(if_block_anchor);
    		}
    	};

    	dispatch_dev("SvelteRegisterBlock", {
    		block,
    		id: create_fragment$1.name,
    		type: "component",
    		source: "",
    		ctx
    	});

    	return block;
    }

    function instance$1($$self, $$props, $$invalidate) {
    	let { $$slots: slots = {}, $$scope } = $$props;
    	validate_slots('Form', slots, []);
    	const myEngine = Comunica.newEngine();
    	let { id } = $$props;
    	let { language } = $$props;
    	let { stored } = $$props;
    	let formLocation;
    	let dataLocation;
    	let hydra;
    	let languages = JSON.stringify({ "en": "English", "nl": "Nederlands" });

    	async function handlerSubmit(event) {
    		let jsonld = event.detail.expanded;
    		let jsonldStr = JSON.stringify(jsonld, null, 2);

    		const response = await fetch(hydra['endpoint'], {
    			method: hydra['method'],
    			body: jsonldStr,
    			headers: { "Content-Type": "application/ld+json" }
    		});

    		if (!response.ok) {
    			console.error("Request failed: ${response.status}");
    			alert("Failed to post results");
    		} else {
    			console.log("Stored!");
    			$$invalidate(7, stored = true);
    		}
    	}

    	async function fetchFormHydra(url) {
    		myEngine.invalidateHttpCache();

    		const result = await myEngine.query(
    			`
            PREFIX hydra: <http://www.w3.org/ns/hydra/core#> 
            PREFIX form: <http://rdf.danielbeeke.nl/form/form-dev.ttl#>

            SELECT ?endpoint ?method WHERE  {
                ?id a form:Form ;
                    hydra:endpoint ?endpoint ;
                    hydra:supportedClass [
                        hydra:method ?method 
                    ] .
            }
        `,
    			{ sources: [url] }
    		);

    		const bindings = await result.bindings();
    		console.log(`found: ${bindings.length} results`);

    		if (bindings.length < 1) {
    			return undefined;
    		}

    		let endpoint;
    		let method;

    		if (bindings[0].has('?endpoint')) {
    			endpoint = bindings[0].get('?endpoint').value;
    		}

    		if (bindings[0].has('?method')) {
    			method = bindings[0].get('?method').value;
    		}

    		console.log(`endpoint: ${endpoint}`);
    		console.log(`method: ${method}`);
    		return { method, endpoint };
    	}

    	onMount(async () => {
    		let hash = location.hash.substring(1);

    		if (hash.includes("#")) {
    			let parts = hash.split('#');
    			$$invalidate(2, formLocation = parts[0]);
    			$$invalidate(3, dataLocation = parts[1]);
    		} else {
    			$$invalidate(2, formLocation = hash);
    		}

    		$$invalidate(4, hydra = await fetchFormHydra(formLocation));
    	});

    	const writable_props = ['id', 'language', 'stored'];

    	Object.keys($$props).forEach(key => {
    		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console_1.warn(`<Form> was created with unknown prop '${key}'`);
    	});

    	$$self.$$set = $$props => {
    		if ('id' in $$props) $$invalidate(0, id = $$props.id);
    		if ('language' in $$props) $$invalidate(1, language = $$props.language);
    		if ('stored' in $$props) $$invalidate(7, stored = $$props.stored);
    	};

    	$$self.$capture_state = () => ({
    		onMount,
    		myEngine,
    		id,
    		language,
    		stored,
    		formLocation,
    		dataLocation,
    		hydra,
    		languages,
    		handlerSubmit,
    		fetchFormHydra
    	});

    	$$self.$inject_state = $$props => {
    		if ('id' in $$props) $$invalidate(0, id = $$props.id);
    		if ('language' in $$props) $$invalidate(1, language = $$props.language);
    		if ('stored' in $$props) $$invalidate(7, stored = $$props.stored);
    		if ('formLocation' in $$props) $$invalidate(2, formLocation = $$props.formLocation);
    		if ('dataLocation' in $$props) $$invalidate(3, dataLocation = $$props.dataLocation);
    		if ('hydra' in $$props) $$invalidate(4, hydra = $$props.hydra);
    		if ('languages' in $$props) $$invalidate(5, languages = $$props.languages);
    	};

    	if ($$props && "$$inject" in $$props) {
    		$$self.$inject_state($$props.$$inject);
    	}

    	return [
    		id,
    		language,
    		formLocation,
    		dataLocation,
    		hydra,
    		languages,
    		handlerSubmit,
    		stored
    	];
    }

    class Form extends SvelteComponentDev {
    	constructor(options) {
    		super(options);
    		init$1(this, options, instance$1, create_fragment$1, safe_not_equal, { id: 0, language: 1, stored: 7 });

    		dispatch_dev("SvelteRegisterComponent", {
    			component: this,
    			tagName: "Form",
    			options,
    			id: create_fragment$1.name
    		});

    		const { ctx } = this.$$;
    		const props = options.props || {};

    		if (/*id*/ ctx[0] === undefined && !('id' in props)) {
    			console_1.warn("<Form> was created without expected prop 'id'");
    		}

    		if (/*language*/ ctx[1] === undefined && !('language' in props)) {
    			console_1.warn("<Form> was created without expected prop 'language'");
    		}

    		if (/*stored*/ ctx[7] === undefined && !('stored' in props)) {
    			console_1.warn("<Form> was created without expected prop 'stored'");
    		}
    	}

    	get id() {
    		throw new Error("<Form>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
    	}

    	set id(value) {
    		throw new Error("<Form>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
    	}

    	get language() {
    		throw new Error("<Form>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
    	}

    	set language(value) {
    		throw new Error("<Form>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
    	}

    	get stored() {
    		throw new Error("<Form>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
    	}

    	set stored(value) {
    		throw new Error("<Form>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
    	}
    }

    /* src/App.svelte generated by Svelte v3.47.0 */
    const file = "src/App.svelte";

    // (12:1) {:else}
    function create_else_block(ctx) {
    	let form;
    	let updating_stored;
    	let current;

    	function form_stored_binding(value) {
    		/*form_stored_binding*/ ctx[1](value);
    	}

    	let form_props = { id: "myForm", language: "en" };

    	if (/*stored*/ ctx[0] !== void 0) {
    		form_props.stored = /*stored*/ ctx[0];
    	}

    	form = new Form({ props: form_props, $$inline: true });
    	binding_callbacks.push(() => bind(form, 'stored', form_stored_binding));

    	const block = {
    		c: function create() {
    			create_component(form.$$.fragment);
    		},
    		m: function mount(target, anchor) {
    			mount_component(form, target, anchor);
    			current = true;
    		},
    		p: function update(ctx, dirty) {
    			const form_changes = {};

    			if (!updating_stored && dirty & /*stored*/ 1) {
    				updating_stored = true;
    				form_changes.stored = /*stored*/ ctx[0];
    				add_flush_callback(() => updating_stored = false);
    			}

    			form.$set(form_changes);
    		},
    		i: function intro(local) {
    			if (current) return;
    			transition_in(form.$$.fragment, local);
    			current = true;
    		},
    		o: function outro(local) {
    			transition_out(form.$$.fragment, local);
    			current = false;
    		},
    		d: function destroy(detaching) {
    			destroy_component(form, detaching);
    		}
    	};

    	dispatch_dev("SvelteRegisterBlock", {
    		block,
    		id: create_else_block.name,
    		type: "else",
    		source: "(12:1) {:else}",
    		ctx
    	});

    	return block;
    }

    // (10:1) {#if stored}
    function create_if_block(ctx) {
    	let p;

    	const block = {
    		c: function create() {
    			p = element("p");
    			p.textContent = "Thank you for your submission!";
    			add_location(p, file, 10, 2, 136);
    		},
    		m: function mount(target, anchor) {
    			insert_dev(target, p, anchor);
    		},
    		p: noop$1,
    		i: noop$1,
    		o: noop$1,
    		d: function destroy(detaching) {
    			if (detaching) detach_dev(p);
    		}
    	};

    	dispatch_dev("SvelteRegisterBlock", {
    		block,
    		id: create_if_block.name,
    		type: "if",
    		source: "(10:1) {#if stored}",
    		ctx
    	});

    	return block;
    }

    function create_fragment(ctx) {
    	let main;
    	let h1;
    	let t1;
    	let current_block_type_index;
    	let if_block;
    	let if_block_anchor;
    	let current;
    	const if_block_creators = [create_if_block, create_else_block];
    	const if_blocks = [];

    	function select_block_type(ctx, dirty) {
    		if (/*stored*/ ctx[0]) return 0;
    		return 1;
    	}

    	current_block_type_index = select_block_type(ctx);
    	if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);

    	const block = {
    		c: function create() {
    			main = element("main");
    			h1 = element("h1");
    			h1.textContent = "Acme Form Viewer";
    			t1 = space();
    			if_block.c();
    			if_block_anchor = empty$1();
    			add_location(h1, file, 6, 1, 84);
    			attr_dev(main, "class", "svelte-1h6otfa");
    			add_location(main, file, 5, 0, 76);
    		},
    		l: function claim(nodes) {
    			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
    		},
    		m: function mount(target, anchor) {
    			insert_dev(target, main, anchor);
    			append_dev(main, h1);
    			insert_dev(target, t1, anchor);
    			if_blocks[current_block_type_index].m(target, anchor);
    			insert_dev(target, if_block_anchor, anchor);
    			current = true;
    		},
    		p: function update(ctx, [dirty]) {
    			let previous_block_index = current_block_type_index;
    			current_block_type_index = select_block_type(ctx);

    			if (current_block_type_index === previous_block_index) {
    				if_blocks[current_block_type_index].p(ctx, dirty);
    			} else {
    				group_outros();

    				transition_out(if_blocks[previous_block_index], 1, 1, () => {
    					if_blocks[previous_block_index] = null;
    				});

    				check_outros();
    				if_block = if_blocks[current_block_type_index];

    				if (!if_block) {
    					if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    					if_block.c();
    				} else {
    					if_block.p(ctx, dirty);
    				}

    				transition_in(if_block, 1);
    				if_block.m(if_block_anchor.parentNode, if_block_anchor);
    			}
    		},
    		i: function intro(local) {
    			if (current) return;
    			transition_in(if_block);
    			current = true;
    		},
    		o: function outro(local) {
    			transition_out(if_block);
    			current = false;
    		},
    		d: function destroy(detaching) {
    			if (detaching) detach_dev(main);
    			if (detaching) detach_dev(t1);
    			if_blocks[current_block_type_index].d(detaching);
    			if (detaching) detach_dev(if_block_anchor);
    		}
    	};

    	dispatch_dev("SvelteRegisterBlock", {
    		block,
    		id: create_fragment.name,
    		type: "component",
    		source: "",
    		ctx
    	});

    	return block;
    }

    function instance($$self, $$props, $$invalidate) {
    	let { $$slots: slots = {}, $$scope } = $$props;
    	validate_slots('App', slots, []);
    	let stored = false;
    	const writable_props = [];

    	Object.keys($$props).forEach(key => {
    		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<App> was created with unknown prop '${key}'`);
    	});

    	function form_stored_binding(value) {
    		stored = value;
    		$$invalidate(0, stored);
    	}

    	$$self.$capture_state = () => ({ Form, stored });

    	$$self.$inject_state = $$props => {
    		if ('stored' in $$props) $$invalidate(0, stored = $$props.stored);
    	};

    	if ($$props && "$$inject" in $$props) {
    		$$self.$inject_state($$props.$$inject);
    	}

    	return [stored, form_stored_binding];
    }

    class App extends SvelteComponentDev {
    	constructor(options) {
    		super(options);
    		init$1(this, options, instance, create_fragment, safe_not_equal, {});

    		dispatch_dev("SvelteRegisterComponent", {
    			component: this,
    			tagName: "App",
    			options,
    			id: create_fragment.name
    		});
    	}
    }

    const app = new App({
    	target: document.body,
    	props: {
    	}
    });

    return app;

})();
//# sourceMappingURL=bundle.js.map
